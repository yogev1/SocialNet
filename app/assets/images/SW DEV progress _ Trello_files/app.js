!function(){window.siteDomain=location.origin||/^[^\/]+?[\/]{2}[^\/]+/.exec(location.href)[0];var e=[],t=function(t){e.push(t)},n=window;window.abTests={billingComponent:{audiences:["allMembers"],experimentAllocation:1,defaultWeight:1,defaults:{showNewBillingComponent:!1},variations:[{name:"billing",weight:1,values:{showNewBillingComponent:!0}}],autoTrack:!0},boardHeaderBadges:{name:"boardHeaderBadges",autoTrack:!0,audiences:["allMembers"],experimentAllocation:.2,defaultWeight:1,experimentVersion:"v1",defaults:{showHeaderBadges:!1},variations:[{name:"headerBadges",weight:1,values:{showHeaderBadges:!0}}]},commentAndSubscribe:{name:"commentAndSubscribe",audiences:["alphaMembers","englishMembers"],autoTrack:!0,experimentAllocation:{alphaMembers:1,englishMembers:.1},defaultWeight:1,bucketVersion:"v2",experimentVersion:"v2",defaults:{enabled:!1},variations:[{name:"enabled",weight:1,values:{enabled:!0}}]},createBoardWithBackground:{audiences:["alphaEnglishMembers","englishMembers"],experimentAllocation:{alphaEnglishMembers:1,englishMembers:.2},experimentVersion:"v2",bucketVersion:"v2",defaultWeight:1,autoTrack:!0,defaults:{enabled:!1},variations:[{name:"enabled",weight:1,values:{enabled:!0}}]},ghostLists:{name:"ghostLists",audiences:["englishMembers"],autoTrack:!0,experimentAllocation:.1,defaultWeight:1,bucketVersion:"v2",experimentVersion:"v2",defaults:{enabled:!1},variations:[{name:"enabled",weight:1,values:{enabled:!0}}]},globalNavBackButton:{name:"globalNavBackButton",audiences:["englishMembers"],experimentAllocation:1,defaultWeight:1,experimentVersion:"v1",defaults:{showBackButton:!1},autoTrack:!0,variations:[{name:"turnedOn",weight:1,values:{showBackButton:!0}}]},loadAllNotifications:{name:"loadAllNotifications",audiences:["alphaMembers"],experimentAllocation:0,experimentVersion:"v2",defaultWeight:1,defaults:{loadAll:!1},autoTrack:!1,variations:[{name:"enabled",weight:1,values:{loadAll:!0}}]},newMemberChargesPopup:{name:"newMemberChargesPopup",audiences:["allMembers"],autoTrack:!0,experimentAllocation:.1,defaultWeight:1,experimentVersion:"v1",defaults:{enabled:!1},variations:[{name:"control",weight:.5,values:{enabled:!1}},{name:"turnedOn",weight:.5,values:{enabled:!0}}]},npsSurvey:{audiences:["allMembers"],experimentVersion:"v3",experimentAllocation:.4,defaultWeight:1,defaults:{showSurvey:!1},autoTrack:!0,variations:[{name:"showSurvey",weight:1,values:{showSurvey:!0}}]},nuxBanners:{audiences:["allMembers"],experimentVersion:"v2",experimentAllocation:0,defaultWeight:1,defaults:{showNuxBanners:!1},autoTrack:!0,variations:[{name:"turnedOn",weight:0,values:{showNuxBanners:!0}}]},powerUpRequestCTA:{audiences:["englishMembers"],experimentVersion:"v2",experimentAllocation:.3,defaultWeight:1,defaults:{showCTA:!1},autoTrack:!0,variations:[{name:"textOnly",weight:1,values:{showCTA:!0}}]},powerUpSuggestions:{name:"powerUpSuggestions",audiences:["allMembers"],experimentAllocation:.1,defaultWeight:1,experimentVersion:"v1",defaults:{maxDismissalCount:3},autoTrack:!0,variations:[{name:"fiveDismissals",weight:1,values:{maxDismissalCount:5}}]},powerUpTaglines:{name:"powerUpTaglines",audiences:["englishMembers"],experimentAllocation:1,defaultWeight:1,experimentVersion:"v2",defaults:{showTaglines:!1},autoTrack:!0,variations:[{name:"showTaglines",weight:1,values:{showTaglines:!0}}]},tabbedBoardMenu:{audiences:["englishMembers","alphaEnglishMembers"],experimentVersion:"v1",bucketVersion:"v1",experimentAllocation:{englishMembers:.2,alphaEnglishMembers:1},defaultWeight:1,defaults:{tabbed:!1},autoTrack:!0,variations:[{name:"tabbed",weight:1,values:{tabbed:!0}}]},teamMembersTabLayout:{audiences:["allMembers"],experimentVersion:"v1",experimentAllocation:0,defaultWeight:1,defaults:{enabled:!1},autoTrack:!0,variations:[{name:"V1",weight:1,values:{enabled:!0}}]}},function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b;a=void 0,t(function(){return a=e(510)}),s=void 0,t(function(){return s=e(402)}),u=void 0,t(function(){return u=e(441)}),c=void 0,t(function(){return c=e(563)}),l=void 0,t(function(){return l=e(40)}),d=e("bluebird"),p=e(114),o=e("jquery"),f=e("moment"),b=e(51),g=e(136),h=e(245),i=e(221),v=function(e){var t;return t=parseInt(e,10),isNaN(t)?void 0:t},m=function(e,t){return null!=t?e(t):void 0},n.exports={routes:[["board/*path","oldBoardView"],["b/:shortLink(/*path)","boardView"],["card/board/(:slug/):idBoard/:cardComponent","oldCardView"],["card/(:slug/):idBoard/:cardComponent","oldCardView"],["c/:id(/*path)","cardView"]],boardView:function(e,t){var n,r,o,i,a,s,u,c;return null==t&&(t=""),i=t.split("/"),u=i[0],a=i[1],c=i[2],o=i[3],r=i[4],s={idBoard:e},"calendar"===a&&(n=f().startOf("day"),n.year(v(c)),n.month(m(h.sub(1),v(o))),n.date(v(r)),n.isValid()&&(s.calendarDate=n.toDate())),"member"===a&&null!=c&&(s.usernameBoardProfile=c),("calendar"===a||"member"===a||"power-ups"===a)&&(s.section=a),this.displayBoard(s).done()},oldBoardView:function(e){var t,n;return n={},t=e.split("/"),1===t.length?n.idBoard=t[0]:n.idBoard=t[1],3===t.length?n.section=t[2]:4===t.length&&(n.usernameBoardProfile=t[3]),this.displayBoard(n).done()},cardView:function(e,t){var n;return n=location.hash.length>1?location.hash.substr(1):null,this.displayBoard({idCard:e,highlight:n}).done()},oldCardView:function(e,t,n){var r,o;return o=function(e){return/^\d+$/.test(e)},r=o(n)?l.for("top-level","loadCardId",t,n).catch(i,function(){return null}):d.resolve(n),r.then(function(e){return function(n){return e.displayBoard({idBoard:t,idCard:n})}}(this)).done()},showCardDetail:function(e,t){var n,r,o,i,l,d,h,m;if(l=null!=t?t:{},o=l.highlight,h=l.runMethod,i=l.isNavigating,null!=e){if(!this.onBoardView(null!=(d=e.getBoard())?d.id:void 0)||e.modelCache!==this.getCurrentModelCache())return void this.navigate(this.getCardUrl(e,o),{trigger:!0});b("Card Front","Open Card Detail"),r=new u({modelCache:this.getCurrentModelCache(),model:e}),n=e.getBoard(),m=this.showingCalendar(e.getBoard()&&this.applicationView.existingSubviewOrUndefined(s,e.getBoard())),c.show({view:r,hide:function(e){return function(t){return a.clear(),t?void 0:(e.setBoardLocation(n.id,m?"calendar":void 0),e.title(n.get("name")))}}(this),isNavigating:i}),this.waitForId(e,function(t){return function(){return t.navigate(t.getCardUrl(e,o),{replace:t.onCardView(),trigger:!1})}}(this)),null!=h&&r[h](),null!=o&&r.highlight(o,!0),p.add("card",e.id)}}}},{}],2:[function(e,n,r){var o,i,a,s;i=void 0,t(function(){return i=e(40)}),a=e("underscore"),s=e(104),o=e(35),n.exports={routes:[["*splat","displayErrorPage"]],displayErrorPage:function(e){var t;return t=a.extend({errorType:"notFound"},e,{url:location.pathname+location.search,isLoggedIn:o.isLoggedIn()}),this.errorView({title:s("error"),data:t})}}},{}],3:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E;s=e(35),i=e(559),a=e(221),u=void 0,t(function(){return u=e(166)}),c=void 0,t(function(){return c=e(402)}),l=e(82),h=void 0,t(function(){return h=e(40)}),p=void 0,t(function(){return p=e(39)}),m=e(571),f=e("bluebird"),g=e(133),v=e("underscore"),o=e("jquery"),b=e(79),w=e(245),x=e(48),j=e(105),S=e("moment"),T=e(136),E=e(51),d=j("DisplayBoard",["ConfirmToView","CardNotFound","CardNotFoundOnThisBoard","BoardNotFound"]),y=function(e){return"board_"+e},_=function(e,t){var n,r;null==t&&(t=f.resolve()),r=h.for("top-level","loadBoardSecondary",e),n=h.for("top-level","loadBoardPluginData",e),f.all([r,n]).catch(a,function(){}).done()},C=function(e){var t;return t=h.for("top-level","loadCurrentBoardData",e),_(e,t),t.catch(a.Unconfirmed,function(){return f.reject(d.ConfirmToView())}).catch(a,function(){return f.reject(d.BoardNotFound())})},k=function(){return m.hold(),f.resolve().disposer(function(){return m.release()})},n.exports={showCardOnBoard:function(e,t,n,r){return f.try(function(){var t;return null!=(t=n.getCard(e))?(b(null!=t.get("idBoard")&&null!=t.get("idList")&&null!=t.get("name"),"Tried to display a card that was only partially loaded"),t):r(e).tap(function(e){e.get("idBoard")!==n.id&&f.reject(d.CardNotFoundOnThisBoard("",{idBoard:n.id}))})}).then(function(e){return function(n){return e.showCardDetail(n,{highlight:t})}}(this))},showBoardDetailView:function(e,t){return f.try(function(n){return function(){var r,o,i,a;return r=t.model,null!=(i=e.idCard)?n.showCardOnBoard(i,e.highlight,r,e.loadCardData):e.usernameBoardProfile&&null!=(a=r.modelCache.findOne("Member","username",e.usernameBoardProfile))?t.showMemberProfile(a):null!=(o=e.calendarDate)?t.showCalendar(o):(e.openListComposer&&t.openListComposer(),e.openCardComposerInFirstList&&v.defer(function(){return t.openCardComposerInFirstList()}),n.setBoardLocation(r.id,e.section))}}(this))},renderBoard:function(e,t){var n;return f.resolve(this.onBoardView(e.id)?(n=this.existingTopLevelView(c,e),n.closeDetailView(),n):(this.clearPreviousView(),this.setViewType(e),this.showHeader(),this.maybeShowFooterChrome(this.getBoardUrl(e.id)),n=this.topLevelView(c,e,v.extend(t,{modelCache:e.modelCache})),o("#content").html(n.render().el),o("body").addClass("body-board-view"),n))},settingsFromQuery:function(){return v.chain(location.search.substr(1).split("&")).map(function(e){return e.split("=",2)}).filter(function(e){var t;return t=e[0],"menu"===t||"filter"===t}).map(function(e){var t,n;return t=e[0],n=e[1],[t,decodeURIComponent(n)]}).object().value()},displayBoard:function(e){var t,n,r,o,u,c;return x("controller",["boardView",e.idBoard]),c=Date.now(),r=e.idBoard,o=e.idCard,b(r||o,"Illegal invocation of displayBoard: requires one of idBoard, or idCard"),b(null==r||g.checkId(r)||g.isShortLink(r),'Illegal invocation of displayBoard: idBoard must be a board ID or a short link (got "'+r+'")'),b(null==o||g.checkId(o)||g.isShortLink(o),'Illegal invocation of displayBoard: idCard must be a card ID or a short link (got "'+o+'")'),u=v.once(function(e){return h.for("top-level","loadCardData",e).catch(a,function(){return f.reject(d.CardNotFound())})}),t=function(e){return function(t){var n;return n=t.model,new f(function(t){return e.waitForId(n,t)})}}(this),n=v.extend({loadCardData:u},e),f.using(this.getSpinner(),function(a){return function(){return h.release("top-level"),f.try(function(){return null!=o?u(o).call("get","idBoard"):r}).then(function(e){return f.props({loadStartTime:Date.now(),board:C(e),timingLabel:null!=h.getUpToDateBoard(e)?"Known Board":"New Board"})}).then(function(r){var o,i,s;return o=r.board,s=r.timingLabel,i=r.loadStartTime,E("Timing","Load",s,Date.now()-c),f.using(k(),function(){var r;return r=Date.now(),a.renderBoard(o,{section:e.section,settings:a.settingsFromQuery()}).tap(function(){return E("Timing","Load and Render",s,Date.now()-c),E("Timing","Render",s,Date.now()-r)}).tap(t).then(w(a,"showBoardDetailView",n))})}).catch(d.ConfirmToView,function(){return b(s.isLoggedIn(),"Got 401: 'Confirm to view' while not logged in"),T(p,"waitFor","Member",s.myId()).then(function(){return a.displayErrorPage(v.extend({errorType:"unconfirmedBoardNotFound"},s.me().toJSON()))})}).catch(d.CardNotFound,function(){return a.displayErrorPage({errorType:"cardNotFound"})}).catch(d.BoardNotFound,function(){return a.displayErrorPage({errorType:"boardNotFound"})}).catch(d.CardNotFoundOnThisBoard,function(t){var n;return n=t.idBoard,i.show("card does not exist","warning","doesnotexist",5e3),a.setBoardLocation(n,e.section)})}}(this))}}},{}],4:[function(e,n,r){var o,i,a,s,u,c,l;i=e(221),a=void 0,t(function(){return a=e(485)}),s=void 0,t(function(){return s=e(39)}),u=void 0,t(function(){return u=e(40)}),l=e(48),c=e("bluebird"),o=e("jquery"),n.exports={routes:[["e/:name/admin","enterpriseAdminDashboardView"]],displayEnterprisePage:function(e){var t,n,r;return t=e.enterpriseName,n=e.loadFn,r=e.viewClass,l("controller",["enterprise"]),c.using(this.getSpinner(),function(a){return function(){return u.release("top-level"),u.for("top-level",n,t).then(function(t){var n,i,u;return t.isRealEnterprise()?(a.clearPreviousView(),a.setViewType(t),i={modelCache:s},n=a.topLevelView(r,t,i),a.showHeader(),o("body").addClass("body-tabbed-page"),o("#content").html(n.render().el),u=t.get("displayName"),void a.setLocation({title:u,location:e.getLocation.call(a,t.get("name"))})):void a.displayErrorPage()}).catch(i,function(){a.displayErrorPage()})}}(this))},enterpriseAdminDashboardView:function(e){return this.displayEnterprisePage({enterpriseName:e,loadFn:"loadEnterprise",viewClass:a,getLocation:this.getEnterpriseAdminDashboardUrl}).done()}}},{}],5:[function(e,t,n){var r,o,i;r=e("jquery"),o=e(82),i=e(822),t.exports={maybeShowFooterChrome:function(e){return r("#footer-chrome").hide(),o.isEmbeddedDocument()&&this.onAnyBoardView()?(r("#footer-chrome").show(),r("#footer-chrome").html(i({url:e}))):void 0}}},{}],6:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A;a=e(35),i=void 0,t(function(){return i=e(487)}),s=void 0,t(function(){return s=e(417)}),u=e(82),c=void 0,t(function(){return c=e(489)}),l=void 0,t(function(){return l=e(491)}),d=void 0,t(function(){return d=e(493)}),p=void 0,t(function(){return p=e(494)}),h=void 0,t(function(){return h=e(500)}),m=void 0,t(function(){return m=e(502)}),f=void 0,t(function(){return f=e(504)}),g=void 0,t(function(){return g=e(39)}),v=e(505),b=e(571),y=void 0,t(function(){return y=e(506)}),w=void 0,t(function(){return w=e(727)}),k=void 0,t(function(){return k=e(284)}),_=void 0,t(function(){return _=e(507)}),A=e(51),C=void 0,t(function(){return C=e(508)}),x=e(133),j=e("underscore"),o=e("jquery"),O=e(546),T=e(33),S=e(88),E=function(e){var t;return t=e.getPref("twoFactor"),(null!=t?t.enabled:void 0)&&t.needsNewBackups},n.exports={showHeader:function(e){var t,n,r,M,B,P,L;return null==e&&(e={}),o("#header .header-user").remove(),o("#header .header-boards-button").remove(),o("#header #header-search").parent().remove(),o("#header-search").empty(),o(".header-banner").remove(),o("#header nav").remove(),P=a.me(),M=g,u.isEmbeddedDocument()?void(this.onAnyBoardView()?o("#header").hide():(o("#header").empty().prepend(O.fill("header_logo")),o("#header").show())):(o("#header").empty().prepend(O.fill("header_logo")),e.promo||!a.isLoggedIn()?o("#header").append(O.fill("header_promo_nav")):(t=S("globalNavBackButton"),!this.onHome()&&t.get("showBackButton")&&o("#header").append(this.topLevelView(d,P,{modelCache:M}).render().el),o("#header").append(this.topLevelView(p,P,{modelCache:M}).render().el),e.noSearch||o("#header").append(this.topLevelView(w,P,{modelCache:M}).render().el),o("#header .header-woof").parent().remove(),o("#header").append(this.topLevelView(m,P,{modelCache:M}).render().el),L=function(e){return function(){return e._boardDrawerRendered?void 0:(e._boardDrawerRendered=!0,o("#boards-drawer").empty().append(new s({model:P,modelCache:M}).render().el))}}(this),k.getPinSidebar()?L():b.enqueue("render_boards_drawer",L)),o("#header").append(this.topLevelView(h,P,{modelCache:M}).render(e.promo).el),n=j.chain(T).pluck("code").filter(function(e){return 0!==e.indexOf("en")}).value(),/^(explorer-10|safari-[678])/.test(u.browserVersionStr)&&(A("Unsupported Browser Banner","Displayed",u.browserVersionStr),o("#header").after(this.topLevelView(c,P,{modelCache:M}).render().el)),null!=this.currentModel.get()&&x.hasValidInviteTokenFor(this.currentModel.get())?(e={modelCache:this.getCurrentModelCache()},this.onAnyBoardView()?e.idBoard=this.currentModel.get().id:this.onAnyOrganizationView()&&(e.idOrganization=this.currentModel.get().id),o("#header").after(this.topLevelView(f,P,e,this.currentModel.get().id).render().el)):a.isLoggedIn()?a.confirmed()?a.canLogIn()?null!=(r=a.me().enterpriseWithRequiredConversion())||a.me().missedTransferDate()?(e={modelCache:M,locale:B,enterprise:r},o("#header").after(this.topLevelView(i,P,e).render().el)):E(a.me())?o("#header").after(this.topLevelView(C,P,{modelCache:M}).render().el):(B=j.find(n,function(e){return a.me().shouldShowNewLanguageBannerFor(e)}))&&o("#header").after(this.topLevelView(v,P,{modelCache:M,locale:B}).render().el):o("#header").after(this.topLevelView(_,P,{modelCache:M}).render().el):o("#header").after(this.topLevelView(l,P,{modelCache:M}).render().el):this.onAnyBoardView()&&this.currentModel.get().isPublic()&&o("#header").after(this.topLevelView(y,this.currentModel.get(),{modelCache:this.getCurrentModelCache()}).render().el),void P.checkColorBlindMode())}}},{}],7:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z,R,F,$,U,q,H,W,K,G,J,Q,Y,Z,X,ee,te,ne,re,oe,ie,ae=function(e,t){function n(){this.constructor=e}for(var r in t)se.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},se={}.hasOwnProperty;o=e("jquery"),i=void 0,t(function(){return i=e(559)}),s=void 0,t(function(){return s=e(222)}),u=void 0,t(function(){return u=e(296)}),c=void 0,t(function(){return c=e(510)}),l=e(35),d=e(241),p=void 0,t(function(){return p=e(166)}),h=void 0,t(function(){return h=e(402)}),f=void 0,t(function(){return f=e(563)}),g=e(86),v=void 0,t(function(){return v=e(89)}),b=e("hearsay"),y=void 0,t(function(){return y=e(98)}),w=e(22),_=void 0,t(function(){return _=e(208)}),k=void 0,t(function(){return k=e(39)}),C=void 0,t(function(){return C=e(40)}),x=void 0,t(function(){return x=e(210)}),j=void 0,t(function(){return j=e(212)}),S=void 0,t(function(){return S=e(567)}),T=void 0,t(function(){return T=e(569)}),E=e("bluebird"),Z=void 0,t(function(){return Z=e(231)}),O=void 0,t(function(){return O=e(283)}),A=void 0,t(function(){return A=e(284)}),ee=e(88),K=e(46),re=e(51),B=e(133),M=e(547),P=e("underscore"),G=e(109),ne=e(546),W=e(104),L=e(79),I=e(245),a=e(221),ie=e("xtend"),$=e(45),X=function(e){return RegExp("^/"+B.escapeForRegex(e)+"/([a-zA-Z0-9]{8})(/|$)")},V=function(e){var t;return null!=(t=X("c").exec(e))?t[1]:void 0},N=function(e){var t;return null!=(t=X("b").exec(e))?t[1]:void 0},Q=function(e,t){return e&&t&&e===t},H=function(e,t){var n,r,o,i;return o=V(e),i=V(t),Q(o,i)?!0:(n=N(e),r=N(t),Q(n,r)?!0:!1)},U=function(e,t){var n;return n=l.isLoggedIn()?C.for("header",e):E.resolve(null),n.then(function(){return C.triggerWaits(t)}).catch(a,function(e){throw K(new Error("headerLoad ApiError, err = "+e+", err.constructor.name = "+e.constructor.name)),e}).catch(a.Unauthenticated,function(e){return console.log("Error trying to load header")}).done()},F=function(){var e;return e=window.location.search,P.chain(e.substring(1).split("&")).map(function(e){return e.split("=")}).object().value()},R=function(e){return F()[e]},q=R("iframeSource"),z=function(e,t){return/\?[^=]+\=[^&]+/.test(e)?e+"&iframeSource="+t:e+"?iframeSource="+t},G(g,m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,e),t.prototype.initialize=function(){return this._savedTitle="",this.currentModel=new b.Slot(null),this.currentModel.use()},t.prototype.start=function(){return U("loadHeaderData","headerData"),setTimeout(I(U,"loadBoardsMenuData","boardsData"),500),l.isLoggedIn()&&C.await("headerData").then(function(){return l.me().loadNextSurveyDate()}).done(),M.addHandler({shortcut:function(e){return function(t){return t===w.QuestionMark?(e.navigate("shortcuts"),e.shortcutsView(),"Shortcuts page"):void 0}}(this)},{scope:"global"}),y.autoJoin().then(function(e){return e?QuickLoad.clear():void 0}).return()},t.prototype.viewType="none",t.prototype.topLevelView=function(e,t,n){return null==this.applicationView&&(this.applicationView=new u),null==n&&(n={}),null==n.modelCache&&(n.modelCache=this.getCurrentModelCache()),this.applicationView.subview(e,t,n)},t.prototype.existingTopLevelView=function(e,t){return this.applicationView.existingSubview(e,t)},t.prototype.existingTopLevelViewOrUndefined=function(e,t){var n;return null!=(n=this.applicationView)?n.existingSubviewOrUndefined(e,t):void 0},t.prototype.title=function(e){var t,n,r,o,i;return null!=e&&(this._savedTitle=e),o=x.unreadCount(k),i=o?"* ":"",t=i,(null!=(n=this._savedTitle)?n.length:void 0)>0&&(t+=this._savedTitle+" | "),t+="Trello",null!=(r=window.fluid)&&(r.dockBadge=o?o:null),v.setNotifications(o>0),document.title=t},t.prototype.setLocation=function(e){var t,n,r;r=e.title,t=e.location,n=e.options,null!=r&&this.title(r),t&&(/^#/.test(t)&&(t=t.substr(1)),this.navigate(t,n),this.location=t)},t.prototype.showingCalendar=function(e){return(null!=e?e.$(".calendar-wrapper").length:void 0)>0},t.prototype.setBoardLocation=function(e,t,n,r){var o;null==t&&(t=""),null==n&&(n=[]),o=k.get("Board",e).get("name"),this.setLocation({title:o,location:this.getBoardUrl(e,t,n),options:r})},t.prototype.saveMemberBoardProfileLocation=function(e,t){return this.setLocation({title:e.get("fullName"),location:this.getMemberBoardProfileUrl(e.get("username"),t)})},t.prototype.isOnSearchPage=function(){return"search"===this.currentPage},t.prototype.onAnyOrganizationView=function(){return this.currentModel.get()instanceof j},t.prototype.onOrganizationView=function(e){return this.onAnyOrganizationView()&&this.currentModel.get().id===e},t.prototype.onAnyBoardView=function(){return this.currentModel.get()instanceof p},t.prototype.onBoardView=function(e){return this.onAnyBoardView()?B.checkId(e)?this.currentModel.get().id===e:B.isShortLink(e)?this.currentModel.get().get("shortLink")===e:void 0:!1},t.prototype.onHome=function(){return"home"===this.currentPage},t.prototype.getCurrentBoardView=function(){return this.existingTopLevelViewOrUndefined(h,this.getCurrentBoard())},t.prototype.getCurrentBoard=function(){return this.onAnyBoardView()?this.currentModel.get():null},t.prototype.getCurrentModelCache=function(){return this.currentModelCache},t.prototype.saveBoardsView=function(){null==this.savedBoardViewInformation&&this.onAnyBoardView()&&(this.savedBoardViewInformation={idBoard:this.currentModel.get().id,path:/\/b\/[^\/]*\/(.*)/.exec(this.location)[1]})},t.prototype.loadBoardsView=function(){var e,t,n;if(this.savedBoardViewInformation)return n=this.savedBoardViewInformation,e=n.idBoard,t=n.path,this.boardView(e,t),delete this.savedBoardViewInformation},t.prototype.clearPreviousView=function(){var e;this.overBoardsPage&&(this.overBoardsPage=!1),O.setQuery(""),null!=(e=this.applicationView)&&e.remove(),delete this.applicationView,T.hide(),S.close(),f.isVisible&&f.hide(!0),o("#content").html(""),o("body").scrollTop("0").removeClass("body-single-column body-tabbed-page body-search-page body-board-view body-custom-board-background body-custom-board-background-tiled body-light-board-background body-dark-board-background body-default-header").css({"background-image":"","background-color":""},c.clear())},t.prototype.setViewType=function(e){var t;this.currentModel.get()instanceof p&&this.currentModel.get().markAsViewed(),P.isString(e)?(this.currentModelCache=k,this.currentModel.set(null)):(this.currentModelCache=e.modelCache,this.currentModel.set(e)),this.currentPage=e,this.currentModel.get()instanceof p?(t=this.currentModel.get(),this.waitForId(t,function(){return t.markAsViewed(),A.pushBoard(t.id)})):v.setBackground({useDefault:!0})},t.prototype.onCardView=function(){return/^c\/[a-zA-Z0-9]{8}(\/[^\/]+)?/.test(d.history.fragment)},t.prototype.organizationById=function(e){return C.for("top-level","loadOrgNameById",e).then(function(e){return function(t){return e.organizationBoardsView(t)}}(this)).catch(a,function(e){return function(){return e.displayErrorPage()}}(this)).done()},t.prototype.getSpinner=function(){return o(".header-logo").addClass("is-throbbing"),E.resolve().disposer(function(){o(".header-logo").removeClass("is-throbbing")})},t.prototype.syncError=function(e){var t,n,r,a,s,u;i.showHtml(ne.fill("sync_error"),"error","modelSync"),this._reportedError||(this._reportedError=!0,r=/too (low|high)[\.:]\s+(\d+)\s[<>]\s(\d+)/.exec(e.message)||[],t=r[0],n=r[1],s=r[2],u=r[3],re("Error","Sync Error",Z.isUsingSocket()?"Using Socket":"Using AJAX",null!=r?"high"===n?"Too High":"Too Low":"Unknown",null!=r?Math.abs(parseInt(s,10)-parseInt(u,10)):void 0),a=Date.now()-(Z.rpcCurrent.dateLastMessage||0),o.ajax({url:"/test-connection",timeout:3e3}).fail(function(e){return function(){return re("Error","Sync Error Connectability","Unreachable",void 0,a)}}(this)).done(function(e){return function(){return re("Error","Sync Error Connectability","Reachable",void 0,a)}}(this)))},t.prototype.focusContent=function(){return o("#content").attr("tabindex",-1).focus()},t}(d.Router)),J=d.History.prototype.navigate,oe=function(e){return""===e&&(e="boards"),"function"==typeof window.ga&&window.ga("send","pageview","/"+e),"function"==typeof window.sp?window.sp("trackPageView",null,$()):void 0},P.extend(d.History.prototype,{navigate:function(e,t){null!=q&&(e=z(e,q)),H(e,this.location.pathname)&&(t=ie(t,{replace:!0})),J.call(this,e,t),oe(e)}}),D=[e(3),e(13),e(6),e(5),e(12),e(11),e(8),e(14),e(1),e(4),e(9),e(10),e(2)],Y=P.chain(D).map(function(e){return P.extend(m.prototype,e),delete m.prototype.routes,e.routes}).compact().flatten(!0).value().reverse(),te=new m,Y.forEach(function(e){var t,n;return n=e[0],t=e[1],te.route(n,t)}),n.exports=te},{}],8:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f;o=e("jquery"),i=e(221),a=void 0,t(function(){return a=e(222)}),s=e(35),u=void 0,t(function(){return u=e(552)}),c=void 0,t(function(){return c=e(98)}),l=void 0,t(function(){return l=e(39)}),d=void 0,t(function(){return d=e(40)}),p=e(227),h=e("bluebird"),m=e("underscore"),f=function(e){var t,n,r,i,a;return n=o.cookie("invitation")||"",r=n.split(":"),a=r[0],t=r[1],i=r[2],a!==e&&(t=null),{id:t,secret:i}},n.exports={routes:[["invite/accept-board","handleBoardCookieInvitation"],["invite/accept-team","handleTeamCookieInvitation"]],_handleInvitation:function(e){var t,n,r,l,p,m,f,g,v,b;return l=e.id,p=e.loadModel,g=e.targetUrl,v=e.transferUrl,b=e.viewType,t=e.apiUrl,m=e.nameFromInvite,n=e.emailRestrictionsFromInvite,f=function(e){return function(){return d.await("headerData").then(function(){if(!s.isLoggedIn())throw i.Unauthorized();return p()}).then(function(){var t;if(null!=(t=g()))return e.navigate(t,{trigger:!0});throw i.Unauthorized()})}}(this),r=null!=t?a({url:t,type:"get"}):h.reject(i.NotFound()),h.using(this.getSpinner(),function(e){return function(){return o("#content").html('<div class="spinner loading"></div>'),c.autoJoin().then(function(){return f()}).catch(i.NotFound,i.Unauthorized,i.Unconfirmed,function(){var i;return e.clearPreviousView(),i=s.me(),null!=i&&e.setViewType(i),e.showHeader(),h.props({invite:r,member:s.isLoggedIn()?d.for("top-level","loadMemberLogins",s.myId()):void 0}).then(function(r){var s,l;return l=r.invite,s=e.topLevelView(u,i,{inviter:l.memberInviter,name:m(l),emailRestrictions:n(l),transferUrl:"function"==typeof v?v():void 0,willJoinOnConfirm:c.inQueue(t),fxJoin:function(){return a({method:"post",url:t}).then(f)},fxQueueJoin:function(){return c.add(t)}}),o("#content").html(s.render().el)})})}}(this))},handleBoardInvitation:function(e,t){var n;n=e&&t?"/1/board/"+e+"/invitationSecret/"+t:null,this._handleInvitation({loadModel:function(){if(e)return d.for("top-level","loadBoardData",e,p.currentBoardMinimal);throw i.BadRequest("invalid board shortLink")},targetUrl:function(t){return function(){var n;return null!=(n=l.get("Board",e))&&n.isMember(s.me())?t.getBoardUrl(n):null}}(this),viewType:"board-invitation-link",apiUrl:n,nameFromInvite:function(e){return e.board.name},emailRestrictionsFromInvite:function(){return[]}}).catch(i,function(e){return function(){return e.displayErrorPage({errorType:"boardInvitationNotFound"})}}(this)).done()},handleOrgInvitation:function(e,t){var n;n=e&&t?"/1/organization/"+e+"/invitationSecret/"+t:null,this._handleInvitation({loadModel:function(){if(e)return d.for("top-level","loadOrganizationData",e);throw i.BadRequest("invalid orgname")},targetUrl:function(t){return function(){var n;return null!=(n=l.findOne("Organization",function(t){return t.get("name")===e}))&&n.isMember(s.me())?t.getOrganizationUrl(e):null}}(this),transferUrl:function(){return"/"+e+"/transfer-account"},viewType:"org-invitation-link",apiUrl:n,nameFromInvite:function(e){return e.organization.displayName},emailRestrictionsFromInvite:function(e){var t,n;return null!=(t=null!=(n=e.organization.prefs)?n.orgInviteRestrict:void 0)?t:[]}}).catch(i,function(e){return function(t){return e.displayErrorPage({errorType:"orgInvitationNotFound"})}}(this)).done()},handleBoardCookieInvitation:function(){var e,t,n;return e=f("board"),n=e.id,t=e.secret,this.handleBoardInvitation(n,t)},handleTeamCookieInvitation:function(){var e,t,n;return t=f("organization"),e=t.id,n=t.secret,this.handleOrgInvitation(e,n)}}},{}],9:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S;a=e(35),s=void 0,t(function(){return s=e(563)}),_=e(104),u=void 0,t(function(){return u=e(208)}),c=void 0,t(function(){return c=e(602)}),l=void 0,t(function(){return l=e(606)}),d=void 0,t(function(){return d=e(608)}),p=void 0,t(function(){return p=e(614)}),h=void 0,t(function(){return h=e(619)}),m=void 0,t(function(){return m=e(620)}),f=void 0,t(function(){return f=e(39)}),g=void 0,t(function(){return g=e(40)}),v=e("bluebird"),S=e(122),o=e("jquery"),k=e(48),y=e("underscore"),w=e(79),i=e(221),C=e(88),j=e(54),b=e(133),x=null,n.exports={routes:[["","memberBoardsView"],[":username/cards","memberCardsView"],[":username/cards/:orgname","memberCardsView"],[":username/notifications","memberNotificationsView"]],displayMemberPage:function(e){var t,n,r,u,c,l,p,h,m,b,w;return b=e.username,c=e.loadFn,w=e.viewClass,r=e.getLocation,t=e.bodyClass,u=e.inDialogIfOnBoard,l=e.maxDialogWidth,h=e.product,p=e.orgname,m=e.titleKey,null==b&&(b=a.myUsername()),n=this.onAnyBoardView()&&u||this.overBoardsPage,k("controller",["memberBoardsView"]),v.using(this.getSpinner(),function(u){return function(){return g.release("top-level"),g.for("top-level",c,b).then(function(i){var c,l,g,v;n&&u.saveBoardsView(),n||u.clearPreviousView(),a.isMe(i)&&w===d?u.setViewType("home"):u.setViewType(i),v=a.isMe(i)&&null!=m?_(["page title",m]):i.get("fullName")+" ("+i.get("username")+")",u.setLocation({title:v,location:r.call(u,i.get("username"),h),options:{replace:!0}}),g={product:h,orgname:p,modelCache:f},n?(l=new w(y.extend({model:i},g)),c=null,null!=e.maxDialogWidth&&(c=e.maxDialogWidth),s.show({isNavigating:!0,view:l,maxWidth:c,hide:function(e){return e?void 0:u.loadBoardsView()}})):(l=u.topLevelView(w,i,g),u.showHeader(),u.maybeShowFooterChrome(u.getMemberBoardsUrl()),t?o("body").addClass(t):o("body").addClass("body-tabbed-page"),o("#content").html(l.render().el),u.focusContent(),"function"==typeof l.getData&&l.getData())}).catch(i,function(){u.displayErrorPage()})}}(this))},memberBoardsView:function(){var e;return a.isLoggedIn()?(null==x&&(x=o.cookie("simulateNewUser")),e={username:"me",loadFn:"loadMemberBoardsData",viewClass:d,getLocation:this.getMemberBoardsUrl,titleKey:"boards"},this.displayMemberPage(e).then(S).done(),x||b.idToDate(a.myId())>b.dateBefore({minutes:3})?j.possibleNewSignup():void 0):this.displayErrorPage()},memberNotificationsView:function(e){return null==e&&(e="me"),a.isLoggedIn()?(e="me",this.displayMemberPage({username:e,loadFn:"loadNotificationData",viewClass:h,inDialogIfOnBoard:!0,maxDialogWidth:530,getLocation:this.getMemberNotificationsUrl,titleKey:"notifications"}).done()):this.displayErrorPage()},memberProfileView:function(e){return null==e&&(e="me"),this.displayMemberPage({username:e,loadFn:"loadMemberProfileData",viewClass:m,getLocation:this.getMemberProfileUrl,titleKey:"profile"}).done()},memberCardsView:function(e,t){return null==e&&(e="me"),this.displayMemberPage({username:e,loadFn:"loadMemberCardsData",viewClass:p,getLocation:function(e){
return function(n){return e.getMemberCardsUrl(n,t)}}(this),titleKey:"cards",orgname:t}).done()},memberAccountView:function(e){return e="me",this.displayMemberPage({username:e,loadFn:"loadMemberAccountData",viewClass:c,getLocation:this.getMemberAccountUrl,titleKey:"settings"}).done()},memberBillingView:function(e){return e="me",this.displayMemberPage({username:e,loadFn:"loadMemberAccountData",viewClass:l,getLocation:this.getMemberBillingUrl,titleKey:"billing"}).done()}}},{}],10:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k;a=e(35),s=void 0,t(function(){return s=e(563)}),u=void 0,t(function(){return u=e(208)}),c=void 0,t(function(){return c=e(39)}),l=void 0,t(function(){return l=e(40)}),d=void 0,t(function(){return d=e(212)}),p=void 0,t(function(){return p=e(667)}),h=void 0,t(function(){return h=e(671)}),m=void 0,t(function(){return m=e(675)}),f=void 0,t(function(){return f=e(676)}),g=void 0,t(function(){return g=e(685)}),o=e("jquery"),w=e(48),b=e("underscore"),y=e(245),v=e("bluebird"),_=e(136),i=e(221),k=e("xtend"),n.exports={routes:[["org/:id","organizationById"],[":name/members","organizationMembersView"],[":name/:username/cards","organizationMemberCardsView"],[":name/export","organizationExportView"]],organizationBoardsView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationBoardsData",additionalFns:{members:"loadOrganizationMemberGhost"},viewClass:m,getLocation:this.getOrganizationUrl}).done()},organizationMembersView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationMembersData",viewClass:g,getLocation:this.getOrganizationMembersUrl}).get("id").then(y(l,"loadOrganizationMembersExtraData")).done()},organizationMemberCardsView:function(e,t){return this.navigate(this.getOrganizationMemberCardsUrl(e,t),{trigger:!0})},organizationAccountView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationData",viewClass:p,getLocation:this.getOrganizationAccountUrl,membersOnly:!0}).done()},organizationExportView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationExportData",viewClass:f,getLocation:this.getOrganizationExportUrl,adminOnly:!0}).done()},organizationBillingView:function(e,t){return null==t&&(t={}),this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationData",viewClass:h,getLocation:this.getOrganizationBillingUrl,urlOptions:{returnUrl:t.returnUrl}}).done()},displayOrganizationPage:function(e){var t,n,r,d,p;return n=e.orgname,p=e.username,r=e.product,d=e.urlOptions,t=this.onAnyBoardView()&&e.inDialogIfOnBoard||this.overBoardsPage,w("controller",["organization"]),v.using(this.getSpinner(),function(h){return function(){return l.release("top-level"),l.for("top-level",e.loadFn,n).tap(function(t){var n;return v.all(b.values(null!=(n=e.additionalFns)?n:{}).map(function(e){return l[e](t.id,p)}))}).then(function(i){var l,m,f,g,v,y;return f=c.findOne(u,"username",p),!i.owned()&&e.adminOnly||!i.isMember(a.me())&&e.membersOnly||null!=e.businessClass&&!i.isFeatureEnabled(e.businessClass)?(h.organizationBoardsView(n),i):(t?h.saveBoardsView():h.clearPreviousView(),h.setViewType(i),g={urlOptions:d},f&&(g.member=f),null!=r&&(g.product=r),g.modelCache=h.getCurrentModelCache(),t?(m=null,null!=e.maxDialogWidth&&(m=e.maxDialogWidth),v=new e.viewClass(b.extend({model:i},g)),s.show({isNavigating:!0,view:v,maxWidth:m,hide:function(e){return e?void 0:h.loadBoardsView()}})):(v=h.topLevelView(e.viewClass,i,g),h.showHeader(),o("body").addClass("body-tabbed-page"),o("#content").html(v.render().el),h.focusContent()),y=i.get("displayName")+" ("+i.get("name")+")",l=e.getLocation.apply(h,f?[i.get("name"),f.get("username"),d]:r?[i.get("name"),r,d]:[i.get("name"),d]),h.setLocation({title:y,location:l}),i)}).catch(i.Unconfirmed,function(){return _(c,"waitFor","Member",a.myId()).then(function(){return h.displayErrorPage(b.extend({errorType:"unconfirmedOrgNotFound"},a.me().toJSON()))})}).catch(i,function(){return h.displayErrorPage()})}}(this))}}},{}],11:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y;i=e(35),a=void 0,t(function(){return a=e(647)}),u=void 0,t(function(){return u=e(486)}),s=void 0,t(function(){return s=e(563)}),c=void 0,t(function(){return c=e(208)}),l=void 0,t(function(){return l=e(39)}),d=void 0,t(function(){return d=e(40)}),p=e("bluebird"),h=void 0,t(function(){return h=e(727)}),m=void 0,t(function(){return m=e(283)}),f=e(133),o=e("jquery"),v=e(104),b=e(48),g=e("underscore"),y=e(546),n.exports={routes:[["shortcuts","shortcutsView"],["blank","blankView"],["select-org-to-upgrade","businessClassSelectOrgView"],["select-team-to-upgrade","businessClassSelectTeamView"],["search(?*query)","searchView"]],businessClassSelectOrgView:function(){this.navigate("/select-team-to-upgrade",{replace:!0,trigger:!0})},businessClassSelectTeamView:function(){var e;return e="/select-team-to-upgrade",i.isLoggedIn()?p.using(this.getSpinner(),function(t){return function(){return d.for("top-level","loadMyOrganizations").then(function(n){var r,i;return t.setViewType("select-org"),r=g.filter(n.organizationList.models,function(e){return!e.isPremium()}),1===r.length?void t.navigate("/"+r[0].get("name")+"/billing",{trigger:!0}):(t.setLocation({title:v("select organization to upgrade to business class"),location:e}),t.clearPreviousView(),i=t.topLevelView(a,n),t.showHeader(),o("#content").html(i.render().el))})}}(this)).done():void(window.location="/login?returnUrl="+e)},searchView:function(){return b("controller",["searchView"]),p.using(this.getSpinner(),function(e){return function(){return d.await("headerData").then(function(){var t,n,r,a,s;return i.isLoggedIn()?(e.setViewType("search"),e.clearPreviousView(),r=i.me(),t=l,a=f.getQueryParameter("q",""),n=e.topLevelView(h,r,{modelCache:t}),s=n.getResultsView(),m.setQuery(a),s.update(),e.showHeader({noSearch:!0}),o("body").addClass("body-search-page"),o("#content").append(n.render().el).append(s.render().el),void g.defer(function(){return n.focusInput()})):void e.displayErrorPage()})}}(this)).done()},blankView:function(){return p.using(this.getSpinner(),function(e){return function(){return d.await("headerData").then(function(){e.setViewType("blank"),e.clearPreviousView(),e.showHeader()})}}(this)).done()},shortcutsView:function(){d.waitFor("headerData",function(e){return function(){var t,n;return n=v("keyboard shortcuts"),t="shortcuts",e.onAnyBoardView()||e.overBoardsPage?(e.saveBoardsView(),s.show({html:y.fill("shortcuts"),maxWidth:550,hide:function(t){return t?void 0:e.loadBoardsView()}}),e.setLocation(n,t)):e.staticView({title:n,location:t,bodyClass:"body-single-column",template:function(){return y.fill("shortcuts")}})}}(this))},errorView:function(e){var t,n,r;return r=e.title,n=e.location,t=e.data,p.using(this.getSpinner(),function(e){return function(){return d.await("headerData").then(function(){var i;return e.setViewType("error"),e.clearPreviousView(),e.showHeader(),i=e.topLevelView(u,t),o("#content").append(i.render().el),e.focusContent(),e.setLocation({title:r,location:n})})}}(this)).done()},staticView:function(e){var t,n,r,i,a,s,u;return s=e.title,r=e.location,i=e.template,a=e.templateData,t=e.bodyClass,u=e.viewType,n=e.headerOpts,b("controller",[r+"View"]),p.using(this.getSpinner(),function(e){return function(){return d.await("headerData").then(function(){return e.setViewType(null!=u?u:r),e.clearPreviousView(),e.showHeader(n),i(a)}).then(function(n){return o("body").addClass(t),o("#content").html(n),e.focusContent(),e.setLocation({title:s,location:r})})}}(this)).done()}}},{}],12:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g;o=e("jquery"),u=e("underscore"),a=void 0,t(function(){return a=e(40)}),i=e(35),s=e("bluebird"),h=function(e){return e.toLowerCase().replace(/[-_()\[\]:,]/g," ").replace(/\s+/g," ")},l=function(e,t){var n;return n=h(t),u.find(e,function(e){return h(e.get("name"))===n})},g=function(e){return e.toLowerCase().split(/[-_ ]/)},f=function(e,t){var n;return n=g(t),u.find(e,function(e){var t;return t=g(h(e.get("name"))),u.all(n,function(e){return u.any(t,function(t){return 0===t.indexOf(e)})})})},p=function(e,t){var n;return n=g(t),u.find(e,function(e){var t;return t=h(e.get("name")),u.all(n,function(e){return-1!==t.indexOf(e)})})},m=function(e){return e.isOpen()},c=function(e){return-new Date(e.get("dateLastActivity"))},d=function(e){return e.replace(/[-_ ]+/g," ")},n.exports={routes:[["go/*search","quickBoard"],["to/*search","quickBoard"],["/*search","quickBoard"]],quickBoard:function(e){return e=decodeURIComponent(e),i.isLoggedIn()?void s.using(this.getSpinner(),function(t){return function(){return s.all([a.await("headerData").then(function(){return t.showHeader()}),s.try(function(){return e?a.for("top-level","loadQuickBoardsSearch",d(e)):void 0}),a.for("top-level","loadQuickBoardsData")]).then(function(){var n,r,o,a,s,u,h,g,v,b,y,w,_;for(b=i.me(),_=b.boardStarList.chain().invoke("getBoard").compact().filter(m).value(),y=b.boardList.chain().filter(m).sortBy(c).value(),w=b.organizationList.chain().pluck("boardList").pluck("models").flatten().filter(m).sortBy(c).value(),v=[l,f,p],o=[_,y,w],a=0,u=v.length;u>a;a++)for(g=v[a],s=0,h=o.length;h>s;s++)if(r=o[s],null!=(n=g(r,e)))return history.replaceState(null,null,t.getBoardUrl(n)+location.search),void t.displayBoard({idBoard:n.id});return t.navigate("/search?q="+encodeURIComponent(d(e)),{trigger:!0})})}}(this)).done():void(window.location="/login?returnUrl="+encodeURIComponent("//"+e))}}},{}],13:[function(e,n,r){var o,i,a,s;o=e(35),i=void 0,t(function(){return i=e(39)}),a=e(133),s=e("underscore"),n.exports={getSearchUrl:function(e){return"/search?q="+encodeURIComponent(e)},getOrganizationName:function(e){return s.isString(e)?e:e.get("name")},getOrganizationUrl:function(e){return"/"+this.getOrganizationName(e)},getEnterpriseAdminDashboardUrl:function(e){var t;return t=s.isString(e)?e:e.get("name"),"/e/"+t+"/admin"},_orgUrl:function(e,t,n){var r;return null==n&&(n={}),r=n.returnUrl?r="?returnUrl="+encodeURIComponent(n.returnUrl):"",""+this.getOrganizationUrl(e)+t+r},getOrganizationMemberCardsUrl:function(e,t){return this.getMemberCardsUrl(t,this.getOrganizationName(e))},getOrganizationAccountUrl:function(e){return this._orgUrl(e,"/account")},getOrganizationBillingUrl:function(e,t){return this._orgUrl(e,"/billing",t)},getOrganizationExportUrl:function(e){return this._orgUrl(e,"/export")},getOrganizationMembersUrl:function(e){return this._orgUrl(e,"/members")},getBoardUrl:function(e,t,n){var r,o,s,u,c,l,d;for(null==n&&(n=[]),null!=(null!=e?e.id:void 0)&&(e=e.id),o=i.get("Board",e),null!=(d=null!=o?o.get("url"):void 0)?r=a.relativeUrl(d):(c=null!=o?o.get("name"):void 0,r=c?"/board/"+a.makeSlug(c)+"/"+e:"/board/"+e),t&&(r+="/"+t),s=0,u=n.length;u>s;s++)l=n[s],r+="/"+l;return r},getBoardShortUrl:function(e,t){var n,r,o,s;return null!=(null!=e?e.id:void 0)&&(e=e.id),r=i.get("Board",e),null!=(s=null!=r?r.get("shortUrl"):void 0)?n=a.relativeUrl(s):(o=null!=r?r.get("shortLink"):void 0,n="/b/"+o),t&&(n+="/"+t),n},getBoardPowerUpsUrl:function(e){return this.getBoardUrl(e)+"?menu=power-ups"},getBoardPowerUpsUpgradeUrl:function(e){var t;return null!=(t=e.getOrganization())?this.getOrganizationBillingUrl(t,{returnUrl:this.getBoardPowerUpsUrl(e)}):"/business-class"},getMemberBoardProfileUrl:function(e,t){return[this.getBoardUrl(t),"member",e].join("/")},getMemberProfileUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e},getMemberNotificationsUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/notifications"},getMemberBoardsUrl:function(e){return null==e&&(e=o.myUsername()),e===o.myUsername()?"/":"/"+e+"/boards"},getMemberCardsUrl:function(e,t){return null==e&&(e=o.myUsername()),t?"/"+e+"/cards/"+t:"/"+e+"/cards"},getMemberAccountUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/account"},getMemberBillingUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/billing"},getCardUrl:function(e,t){var n,r,o,i;return n=null!=(i=e.get("url"))?a.relativeUrl(i):(r=e.get("name"),this.getCardUrlWithoutModels(e.get("idBoard"),null!=(o=e.get("idShort"))?o:e.id,r)),t?[n,t].join("#"):n},getCardUrlWithoutModels:function(e,t,n){return null==t?null:a.isShortId(t)?"/card/"+a.makeSlug(n)+"/"+e+"/"+t:"/card/board/"+a.makeSlug(n)+"/"+e+"/"+t},getBoardInvitationLinkUrl:function(e,t){return"/invite/b/"+e.get("shortLink")+"/"+t+"/"+a.makeSlug(e.get("name"))},getOrganizationInvitationLinkUrl:function(e,t){return"/invite/"+e.get("name")+"/"+t},getActionUrl:function(e){var t,n;return n=e.isCommentLike()?"comment":"action",t=[n,e.id].join("-"),this.getCardUrl(e.getCard(),t)}}},{}],14:[function(e,n,r){var o,i,a,s,u,c,l,d;o=e("jquery"),i=e(221),a=void 0,t(function(){return a=e(222)}),s=e("bluebird"),u=e(116),c=e("underscore"),d=e(245),l=e(79),n.exports={routes:[[":name/account","userOrOrgAccountView"],[":name/billing(?*query)","userOrOrgBillingView"],[":name/billing/card","userOrOrgBillingCardView"],[":name/billing/card/:product","userOrOrgBillingCardView"],[":name(/)","userOrOrgProfileView"]],userOrOrgProfileView:function(e){null==e&&(e="me"),this.userOrOrgView(e,this.memberProfileView,this.organizationBoardsView)},userOrOrgAccountView:function(e){null==e&&(e="me"),this.userOrOrgView(e,this.memberAccountView,this.organizationAccountView)},userOrOrgBillingView:function(e){var t,n,r;null==e&&(e="me"),r=null!=(t=null!=(n=/returnUrl=([^&]+)/.exec(location.search))?n[1]:void 0)?decodeURIComponent(t):void 0,/^\/($|[a-zA-Z0-9])/.test(r)||(r=void 0),this.userOrOrgView(e,this.memberBillingView,this.organizationBillingView,{returnUrl:r})},userOrOrgBillingCardView:function(e,t){null==e&&(e="me"),this.navigate([e,"billing"].join("/"),{replace:!0,trigger:!0})},getViewData:function(e){var t,n;return t="typeof_"+e,null!=(n=u.get(t))?s.resolve(n):a({url:"/1/types/"+e}).tap(d(u,"set",t))},userOrOrgView:function(e,t,n,r){return null==r&&(r={}),this.getViewData(e).then(function(o){return function(i){var a;return a=function(){switch(i.type){case"member":return t;case"organization":return n}}(),l(null!=a,"/1/types/"+e+" resolved to "+i.type),a.call(o,e,r)}}(this)).catch(i.NotFound,function(e){return function(){return e.displayErrorPage()}}(this)).done()}}},{}],15:[function(e,t,n){var r,o;o="http://creativecommons.org/licenses/by/2.0/deed.en",r={unsplash:{name:"Unsplash"},photos:{name:"Photos"},patterns:{name:"Patterns and Textures"}},t.exports={blue:{type:"default",brightness:"dark",color:"#0079BF"},orange:{type:"default",brightness:"dark",color:"#D29034"},green:{type:"default",brightness:"dark",color:"#519839"},red:{type:"default",brightness:"dark",color:"#B04632"},purple:{type:"default",brightness:"dark",color:"#89609E"},pink:{type:"default",brightness:"dark",color:"#CD5A91"},lime:{type:"default",brightness:"dark",color:"#4BBF6B"},sky:{type:"default",brightness:"dark",color:"#00AECC"},grey:{type:"default",brightness:"dark",color:"#838C91"},mountain:{type:"premium",pack:r.photos,brightness:"light",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/mountain/171b0c9aea08e21f0020f359408b73e4/full.jpg",scaled:[{width:2400,height:1696,url:"https://a.trellocdn.com/images/backgrounds/mountain/46616ebeae7245d4a16cf00cf1e21e86/large.jpg"},{width:1024,height:724,url:"https://a.trellocdn.com/images/backgrounds/mountain/07627e0760eb74e7109a82057ac86881/medium.jpg"},{width:320,height:227,url:"https://a.trellocdn.com/images/backgrounds/mountain/da8d70dd70d666361767b9e30acdba65/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/62681247@N00/6575973407/",name:"jqmj (Queralt)",license:o}},cosmos:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/cosmos/92448e055514fdc92923c9b591aa31df/full.jpg",scaled:[{width:2047,height:1638,url:"https://a.trellocdn.com/images/backgrounds/cosmos/be5121d350dd3e3ac97e209c3a7fce58/large.jpg"},{width:1600,height:1280,url:"https://a.trellocdn.com/images/backgrounds/cosmos/f95acce485fc44f9a07853aa15965f90/medium.jpg"},{width:320,height:256,url:"https://a.trellocdn.com/images/backgrounds/cosmos/0646808c900b7409dbeb96d36f55e980/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/gsfc/6945160410/",name:"NASA Goddard Space Flight Center",license:o}},rain:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/rain/2e8209ee9f21d7147a24cac28ea61358/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/rain/9de9b88a694019ab77d129f1729b05b7/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/rain/b8ac88f9c4e8097c1ef8cc269d66e089/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/rain/e9147244c93e3990f361bc8123cacca9/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/vinothchandar/5243641910/",name:"Vinoth Chandar",license:o}},dew:{type:"premium",pack:r.photos,brightness:"light",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/dew/1d638bc56d179d5a8c35177305d4ea09/full.jpg",scaled:[{width:2400,height:1594,url:"https://a.trellocdn.com/images/backgrounds/dew/5b5f4c5cd0d7e144e40168345c8c6075/large.jpg"},{width:1024,height:680,url:"https://a.trellocdn.com/images/backgrounds/dew/3c8daf991e3132f453ad0c822175b34d/medium.jpg"},{width:320,height:212,url:"https://a.trellocdn.com/images/backgrounds/dew/71633df28ad4038a6fb6f647c1b29b27/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/jenny-pics/5584430423/",name:"Jenny Downing",license:o}},"snow-bokeh":{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/75b2ce11e6652e76ad0d3629d9886ca5/full.jpg",scaled:[{width:2400,height:1596,url:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/11fc1afae97ec97b3b46b149d701e180/large.jpg"},{width:1024,height:681,url:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/9f4c60883dec8b5aa5bc949607081505/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/d74c2d921e28c822e92b881b3e2cb10b/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/tabor-roeder/5337595458/",name:"Phil Roeder",license:o}},city:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/city/1bbbf09d491d444d207e5d8b792a86ba/full.jpg",scaled:[{width:2400,height:1594,url:"https://a.trellocdn.com/images/backgrounds/city/d23508735801f1190b365330eb8ec0a5/large.jpg"},{width:1024,height:680,url:"https://a.trellocdn.com/images/backgrounds/city/a7eea5e35c08388ec3da7dbc814f1da2/medium.jpg"},{width:320,height:212,url:"https://a.trellocdn.com/images/backgrounds/city/27e00a7bee7a783ae7568a819fa9bb97/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/nosha/2907855809/",name:"Nathan Siemers",license:o}},canyon:{type:"premium",pack:r.photos,brightness:"light",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/canyon/0c35d8049641c307de51cac7d449bf4e/full.jpg",scaled:[{width:2400,height:1596,url:"https://a.trellocdn.com/images/backgrounds/canyon/ee79179217e377e332d217cbe10405b4/large.jpg"},{width:1024,height:681,url:"https://a.trellocdn.com/images/backgrounds/canyon/976ada2d506ebb7c2f8708f2ccc47192/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/canyon/1478a9382a5ab8c493685223ff36e6f7/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/wolfgangstaudt/2252688630/",name:"Wolfgang Staudt",license:o}},ocean:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/ocean/4ce437330ab9d2fe40dd3d8504a143e6/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/ocean/ede6927e92b4515102b2d86e919c77fa/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/ocean/c8a238f606e3288c461fc7ea3daa36d9/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/ocean/2de3527d131722c66ec5315205d64104/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mattphipps/4635112852/",name:"MattJP",license:o}},river:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/river/b031ec422c9048f4b6fb3b53f80eba3c/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/river/801d937c765a9996d4eccf4aee6bfc36/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/river/67c2c39a74a32f383ffd10dc53ffb535/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/river/15967f866d002762d13d20d258140418/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/22746515@N02/3114276532/",name:"Bert Kaufmann",license:o}},fall:{type:"premium",pack:r.photos,discontinued:!0,fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/fall/72c32b15d265b78e7058896d4bc85c3b/full.jpg",scaled:[{width:2400,height:1596,url:"https://a.trellocdn.com/images/backgrounds/fall/a42f50fe10ff082519a499a2e86be1dc/large.jpg"},{width:1024,height:681,url:"https://a.trellocdn.com/images/backgrounds/fall/a999e10749c6db57a5acd9960324ed6f/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/fall/8c8e3c5c5eebeac446c7e19ee36d23ae/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mendhak/4107993637/",name:"mendhak",license:o}},snow:{type:"premium",pack:r.photos,discontinued:!0,fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/snow/d5dd0a98d6b0a7ebcaff02dad1535fab/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/snow/149d6adb0c746612aa21ec3c46455583/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/snow/147471be1b6fa8858c40febf9702795b/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/snow/da5f83eace8c3f4e13f1287cefd07956/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/zachd1_618/5386165480/",name:"Zach Dischner",license:o}},purty_wood_dark:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/7a14a57fef9435b0def0f613d0114334/purty_wood_dark.png",attribution:{url:"http://subtlepatterns.com/purty-wood/",name:"Richard Tabor",license:o}},"subtle-irongrip":{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/c9f15836db29df79c2a0092a6758d81e/subtle-irongrip.png",attribution:{url:"http://subtlepatterns.com/iron-grip/",name:"Tony Kinard",license:o}},"red-sweater":{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/17d3a6bc27bdcd05caeae11f67fa46d6/red-sweater.png",attribution:{url:"http://subtlepatterns.com/wild-oliva/",name:"Badhon Ebrahim",license:o}},hex:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/2e2cb18ce229869faec815b4d8fe2770/hex.png"},wave:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/bb289a4f00f13e8ca52e67afd11c1648/wave.png"},bricks:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/5e21dfb838e99d8a7c540a2b90d36f29/bricks.png"},"purple-blur":{type:"premium",pack:r.patterns,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/3a02eab932195316109bd905d3341323/purple-blur.png"},"orange-blur":{type:"premium",pack:r.patterns,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/07a3436eabfd187ee94ae8c578584d07/orange-blur.png"}}},{}],16:[function(e,t,n){t.exports={enabled:!0,id:"webinars-2016-10-20",icon:"information",dateExpires:"2016-10-20T16:00:00Z",locale:"en-US",message:"Upcoming Webinar: [Roadmaps and Retrospectives](https://trello.com/webinars)."}},{}],17:[function(e,t,n){t.exports={"app.box.com":"55a5d915446f517774210001","appear.in":"55a5d915446f517774210000","dropbox.com":"55a5d915446f517774210002","evernote.com":"55a5d915446f517774210003","github.com":"55a5d916446f517774210004","docs.google.com":"55a5d916446f517774210006","drive.google.com":"55a5d916446f517774210006","hangouts.google.com":"55a5d916446f517774210007","secure.helpscout.net":"55a5d917446f517774210008","force.com":"55a5d917446f517774210009","salesforce.com":"55a5d917446f517774210009","slack.com":"55a5d917446f51777421000a","twitter.com":"55a5d917446f51777421000b","zendesk.com":"56940ede94fd60cf95f7ce6a","join.me":"569411df90e3a6f655f73aaa","getcorrello.com":"568c2b6c7d2758a55ac48c98","fogbugz.com":"569d556febffd8769b0dc2ad","surveymonkey.com":"568c143d95adcd7308cbc3fb","publicate.it":"569d550d062c27feb4e6630c","app.intercom.io":"56cdf5f7071f133a93eb2363","app.screenful.me":"570262ea1100fa611d7e200a","pipedrive.com":"57c72026e3248df11df6621b","gmkr.io":"57dbc7dbc674083383e275a1","moxtra.com":"57e02011fd209122a72e85c3","includer.io":"57e22705114f96fa0aa532b0","cl.ly":"583f81ec5f46b0887c236afc","bitbucket.org":"588a331cc86ffbe08f5d2c67","realtimeboard.com":"5893c2b56bde057070fbc1b7","d.pr":"5894c177310f1e861bf12dc2","gitlab.com":"596d1abf23be1b7ab89cf4c4","figma.com":"59b2e7611e6ece0b35eac16a","invisionapp.com":"596f2cb2d279152540b2bb31","invis.io":"596f2cb2d279152540b2bb31","freshdesk.com":"59764210fef8fa7830ddee68"}},{}],18:[function(e,t,n){t.exports=["BE","BG","CZ","DK","DE","EE","IE","GR","ES","FR","HR","IT","CY","LV","LT","LU","HU","MT","NL","AT","PL","PT","RO","SI","SK","FI","SE","GB"]},{}],19:[function(e,t,n){t.exports={GOLD_UPGRADE:"GoldIntro",GOLD_RECOMMENDATION:"GoldEarned"}},{}],20:[function(e,t,n){var r,o,i,a,s,u,c;for(t.exports=r={},c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=0,a=c.length;a>i;i++)o=c[i],r[o.toLowerCase().charCodeAt(0)]=o,r[o.toUpperCase().charCodeAt(0)]=o;u={" ":"Space","?":"QuestionMark",",":"Comma",".":"Period","/":"ForwardSlash","<":"AngleLeft",">":"AngleRight",";":"Semicolon"};for(o in u)s=u[o],r[o.charCodeAt(0)]=s},{}],21:[function(e,t,n){var r;t.exports=r={8:"Backspace",9:"Tab",10:"LineFeed",13:"Enter",27:"Escape",46:"Delete",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown"}},{}],22:[function(e,t,n){var r,o,i,a,s,u,c,l,d;r=e(20),o=e(21),t.exports=i={Unknown:"Unknown"};for(d in r)c=r[d],i[c]=c;for(d in o)c=o[d],i[c]=c;for(l="0123456789".split(""),s=0,u=l.length;u>s;s++)a=l[s],i["_"+a]=i[a]},{}],23:[function(e,t,n){var r,o,i;o=e("underscore"),r=e(26),i=o.chain(r).values().max().value(),t.exports=i>Date.now()?"NewPowerUps_"+i.toISOString().substr(0,10):void 0},{}],24:[function(e,t,n){t.exports={calendar:"55a5d917446f517774210011",cardAging:"55a5d917446f517774210012",voting:"55a5d917446f517774210013"}},{}],25:[function(e,t,n){var r,o,i,a,s,u,c=[].slice;r=e(90),o=["additionalStickers","customStickers","additionalBoardBackgrounds","customBoardBackgrounds","largeAttachments","customEmoji","savedSearches"],s=c.call(o).concat(["crown"],["readSecrets"],["threePlugins"]),u=c.call(o).concat(["infinitePlugins"]),a={10:{shortName:"trelloGoldFromBC",name:"Trello Gold from BC",features:u},37:{shortName:"trelloGoldMonthly",name:"Trello Gold",interval:"monthly",price:5,features:s,yearlyEquivalent:38},38:{shortName:"trelloGoldYearly",name:"Trello Gold",interval:"yearly",price:45,features:s}},i={currentProducts:{monthly:"trelloGoldMonthly",yearly:"trelloGoldYearly"},extras:{currentPriceObjectForModel:function(e){var t,n;return t=this.currentProducts.monthly,n=this.currentProducts.yearly,{monthly:{productNumber:this.getProductNumber(t),price:this.getPrice(t),monthlyPrice:this.getPrice(t)},yearly:{productNumber:this.getProductNumber(n),price:this.getPrice(n),monthlyPrice:this.getPrice(n)/12,savePercent:this.getYearlyDiscountPercent(n,t)},billingStrategy:{flatRate:!0}}}}},t.exports=new r(a,i)},{}],26:[function(e,t,n){var r,o;r=e("underscore"),o={"55a5d917446f51777421000d":"2016-08-07","56d5e249a98895a9797bebb9":"2016-08-23","570262ea1100fa611d7e200a":"2016-08-23","56cdf5f7071f133a93eb2363":"2016-08-23","57b47fb862d25a30298459b1":"2016-08-23"},t.exports=r.chain(o).pairs().map(function(e){var t,n;return t=e[0],n=e[1],[t,new Date(Date.parse(n))]}).object().value()},{}],27:[function(e,t,n){var r,o,i,a,s,u,c,l=[].slice;r=e(90),o=["export","logo","observers","removal","activity","deactivated","orgCards","googleApps","orgMembersPage","superAdmins","prefs","inviteOrg","restrictVis","disableExternalMembers"],i=l.call(o).concat(["goldMembers"],["csvExport"],["shortExportHistory"]),a=l.call(i).concat(["tags"],["plugins"]),s=l.call(a).concat(["enterpriseUI"]),c={35:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:25,features:o,hidden:!0,prebill:!1,upgrade:!0,yearlyEquivalent:36},36:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:200,features:o,hidden:!0,upgrade:!0},39:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:50,features:o,hidden:!0,upgrade:!0,yearlyEquivalent:40},40:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:500,features:o,hidden:!0,upgrade:!0},96:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:5,features:i,perUser:!0,upgrade:!0,yearlyEquivalent:97},97:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:45,features:i,perUser:!0,upgrade:!0},98:{shortName:"businessClass3Monthly",name:"Business Class",interval:"monthly",price:10,features:a,perUser:!0,perActiveUser:!0,yearlyEquivalent:99},99:{shortName:"businessClass3Yearly",name:"Business Class",interval:"yearly",price:100,features:a,perUser:!0,perActiveUser:!0},100:{shortName:"enterprise",name:"Enterprise",interval:"yearly",price:0,features:s,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0},101:{shortName:"businessClass2PO",name:"Business Class v2 PO",interval:"yearly",price:0,features:i,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0,upgrade:!0},102:{shortName:"businessClass3PO",name:"Business Class v3 PO",interval:"yearly",price:0,features:a,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0},103:{shortName:"businessClass3x1Monthly",name:"Business Class",interval:"monthly",price:12.5,features:a,perUser:!0,perActiveUser:!0,yearlyEquivalent:104},104:{shortName:"businessClass3x1Yearly",name:"Business Class",interval:"yearly",price:119.99,features:a,perUser:!0,perActiveUser:!0},105:{shortName:"businessClass3x2Monthly",name:"Business Class",interval:"monthly",price:12.5,features:a,perUser:!0,perActiveUser:!1,yearlyEquivalent:106},106:{shortName:"businessClass3x2Yearly",name:"Business Class",interval:"yearly",price:119.99,features:a,perUser:!0,perActiveUser:!1},107:{shortName:"businessClass3x1PO",name:"Business Class v3.1 PO",interval:"yearly",price:0,features:a,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0},108:{shortName:"enterprise1x1TieredPricing",name:"Enterprise v1.1",interval:"yearly",price:0,features:s,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0},109:{shortName:"enterprise1x2SiteLicense",name:"Enterprise v1.2",interval:"yearly",price:0,features:s,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0}},u={globalFeatures:["logo"],currentProducts:{monthly:"businessClass3x2Monthly",yearly:"businessClass3x2Yearly"},extras:{BC1Products:[35,36,39,40],currentPriceObjectForModel:function(e){var t,n;return t=this.currentProducts.monthly,n=this.currentProducts.yearly,{monthly:{productNumber:this.getProductNumber(t),price:this.getPrice(t),totalPrice:e.totalPerUserPrice(t),monthlyPrice:this.getPrice(t),totalMonthlyPrice:e.totalPerUserPrice(t)},yearly:{productNumber:this.getProductNumber(n),price:this.getPrice(n),totalPrice:e.totalPerUserPrice(n),monthlyPrice:this.getPrice(n)/12,totalMonthlyPrice:e.totalPerUserPrice(n)/12,savePercent:this.getYearlyDiscountPercent(n,t)},billingStrategy:e.getBillingStrategy(n)}}}},t.exports=new r(c,u)},{}],28:[function(e,t,n){t.exports={ORG_TYPE_ENTERPRISE:"ORG_TYPE_ENTERPRISE",ORG_TYPE_BUSINESS_CLASS:"ORG_TYPE_BUSINESS_CLASS",ORG_TYPE_FREE:"ORG_TYPE_FREE"}},{}],29:[function(e,t,n){var r,o,i,a;r={"":"Q","":"W","":"E","":"R","":"T","":"Y","":"U","":"I","":"O","":"P","":"A","":"S","":"D","":"F","":"G","":"H","":"J","":"K","":"L","":";","":"Z","":"X","":"C","":"V","":"B","":"N","":"M","":"Comma","":"Period"},i={};for(o in r)a=r[o],i[o.charCodeAt(0)]=a;t.exports=i},{}],30:[function(e,t,n){t.exports=10},{}],31:[function(e,t,n){t.exports=80},{}],32:[function(e,t,n){t.exports={standard:{premium:!1,stickers:[{image:"check",url:"https://a.trellocdn.com/images/stickers/90e26477b42f93cf816eecc39c9a7067/check.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/90e26477b42f93cf816eecc39c9a7067/check.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/5168d92437a5fc166632f0006879d5ea/check%402x.png"}]},{image:"heart",url:"https://a.trellocdn.com/images/stickers/cc9d955a9ae38ff99b641f8e0ab719ed/heart.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/cc9d955a9ae38ff99b641f8e0ab719ed/heart.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/51a19b35bc5092e9e2761b479ce6105d/heart%402x.png"}]},{image:"warning",url:"https://a.trellocdn.com/images/stickers/f8832dabce0aabd9a3b550c6f571bbab/warning.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/f8832dabce0aabd9a3b550c6f571bbab/warning.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/e0197b2fb0cbd4a389d4ab5de9e1193a/warning%402x.png"}]},{image:"clock",url:"https://a.trellocdn.com/images/stickers/5bd7338f370c3fd7238d40410f200736/clock.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/5bd7338f370c3fd7238d40410f200736/clock.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/b678287abafc2d8c99f3dfa9b8e7a30c/clock%402x.png"}]},{image:"smile",url:"https://a.trellocdn.com/images/stickers/90a8856b7465d57b1ac30925181198b4/smile.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/90a8856b7465d57b1ac30925181198b4/smile.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/fa6754c4dd9625bdce765781c5c69635/smile%402x.png"}]},{image:"laugh",url:"https://a.trellocdn.com/images/stickers/31ce444242a6f930b52180a2a0d27813/laugh.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/31ce444242a6f930b52180a2a0d27813/laugh.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6a4570e57d1e3df870143fc016ed2f7d/laugh%402x.png"}]},{image:"huh",url:"https://a.trellocdn.com/images/stickers/405fd9e6997ac365e4da29d6e550cd3e/huh.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/405fd9e6997ac365e4da29d6e550cd3e/huh.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/4a513d5705f0f89b365f27ec05784147/huh%402x.png"}]},{image:"frown",url:"https://a.trellocdn.com/images/stickers/49afc75f79a5719a3871b3640a4d1e70/frown.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/49afc75f79a5719a3871b3640a4d1e70/frown.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/c414ef32894f9c9873142fc964ec4e08/frown%402x.png"}]},{image:"thumbsup",url:"https://a.trellocdn.com/images/stickers/ebab8d33a9e50bfb92724e51254be4fa/thumbsup.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ebab8d33a9e50bfb92724e51254be4fa/thumbsup.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6f6cea3566b6fbbc0067561b53f4048a/thumbsup%402x.png"}]},{image:"thumbsdown",url:"https://a.trellocdn.com/images/stickers/8accff79fb0229cb8940be8c35aa1838/thumbsdown.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/8accff79fb0229cb8940be8c35aa1838/thumbsdown.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/79d155c5163ee1a67509b789f98a858b/thumbsdown%402x.png"}]},{image:"star",url:"https://a.trellocdn.com/images/stickers/4c68ea50e4ffeeb97df52f7849f00845/star.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/4c68ea50e4ffeeb97df52f7849f00845/star.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/27460fa90f9753396db36bf60815e93a/star%402x.png"}]},{image:"rocketship",url:"https://a.trellocdn.com/images/stickers/484099c2f7dfcfe5fef9c4245fa2802a/rocketship.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/484099c2f7dfcfe5fef9c4245fa2802a/rocketship.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/5bd888e40e6e27bd733d37015857b218/rocketship%402x.png"}]}]},taco:{premium:!0,stickers:[{image:"taco-love",url:"https://a.trellocdn.com/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/06ddf78e10598774b89e3264d8e414da/taco-love%402x.png"}]},{image:"taco-confused",
url:"https://a.trellocdn.com/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/06668f130b632bf4ba0dc7f492628e00/taco-confused%402x.png"}]},{image:"taco-cool",url:"https://a.trellocdn.com/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/8f4ac7820629d5aac2e2faca5b013e4c/taco-cool%402x.png"}]},{image:"taco-angry",url:"https://a.trellocdn.com/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/88141aecd4c8fbdc3ff11ef292b4526f/taco-angry%402x.png"}]},{image:"taco-celebrate",url:"https://a.trellocdn.com/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/905a89b9fb1f867747130360e6cbb4d4/taco-celebrate%402x.png"}]},{image:"taco-robot",url:"https://a.trellocdn.com/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/e1ac5a98088053a8b1ae90cd8f3f056e/taco-robot%402x.png"}]},{image:"taco-alert",url:"https://a.trellocdn.com/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/60cf2c2b89c387f8c1ed92f301492b28/taco-alert%402x.png"}]},{image:"taco-active",url:"https://a.trellocdn.com/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/afe6f31288619ede4f82d516cad6a11e/taco-active%402x.png"}]},{image:"taco-money",url:"https://a.trellocdn.com/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/f0130dd81ed48f6e4626cbdc233b2fda/taco-money%402x.png"}]},{image:"taco-reading",url:"https://a.trellocdn.com/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/0c3110a4622a680fd4a9b63de14521da/taco-reading%402x.png"}]},{image:"taco-trophy",url:"https://a.trellocdn.com/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/9143546ce5c8a3e43736be79803ead39/taco-trophy%402x.png"}]},{image:"taco-sleeping",url:"https://a.trellocdn.com/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/9a51d634e8521dc0e19c09db4df95d8e/taco-sleeping%402x.png"}]},{image:"taco-pixel",url:"https://a.trellocdn.com/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/3751a48869a42911093b6eae9d0a7f8c/taco-pixel%402x.png"}]},{image:"taco-proto",url:"https://a.trellocdn.com/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/51def85cdcf3c1a58cb1ab2ac3749251/taco-proto%402x.png"}]},{image:"taco-embarrassed",url:"https://a.trellocdn.com/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/02663f87e33a2c79828098d1f2d9a086/taco-embarrassed%402x.png"}]},{image:"taco-clean",url:"https://a.trellocdn.com/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/7c593a77fe481b61a2cad4b74b2f8c1c/taco-clean%402x.png"}]}]},pete:{premium:!0,stickers:[{image:"pete-happy",url:"https://a.trellocdn.com/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/0663bc183a0cf0d039498cd8c5db8043/pete-happy%402x.png"}]},{image:"pete-love",url:"https://a.trellocdn.com/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6e461f2c1917d10063fb169a33bb1191/pete-love%402x.png"}]},{image:"pete-broken",url:"https://a.trellocdn.com/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6d84909328bf960bdfcab760e46c886f/pete-broken%402x.png"}]},{image:"pete-alert",url:"https://a.trellocdn.com/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/3453c1a26ddd1187e56431940c7aedfc/pete-alert%402x.png"}]},{image:"pete-talk",url:"https://a.trellocdn.com/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/217a5d2b04a6dea23726a7949dae9ac7/pete-talk%402x.png"}]},{image:"pete-vacation",url:"https://a.trellocdn.com/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/060295310e437200bf334ff7322eede1/pete-vacation%402x.png"}]},{image:"pete-confused",url:"https://a.trellocdn.com/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/7ff61659ad2cd4837aacd999aedcd233/pete-confused%402x.png"}]},{image:"pete-shipped",url:"https://a.trellocdn.com/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/0d9ff936d513aae5a67c8f9653a5c49e/pete-shipped%402x.png"}]},{image:"pete-busy",url:"https://a.trellocdn.com/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/35503951628d67da2c8aaabd49aaf769/pete-busy%402x.png"}]},{image:"pete-completed",url:"https://a.trellocdn.com/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/3197b9305f52b722df47abdb84c063f8/pete-completed%402x.png"}]},{image:"pete-space",url:"https://a.trellocdn.com/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/aa9cb8354739fb355a4abd1c977d975a/pete-space%402x.png"}]},{image:"pete-sketch",url:"https://a.trellocdn.com/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/3808b148cca5b1ed3da001b7c13d5110/pete-sketch%402x.png"}]},{image:"pete-ghost",url:"https://a.trellocdn.com/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/4a28ad313694864c5a661b964a9510ff/pete-ghost%402x.png"}]},{image:"pete-award",url:"https://a.trellocdn.com/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/43dd35d5e48a876a50fc6c63f53f005e/pete-award%402x.png"}]},{image:"pete-music",url:"https://a.trellocdn.com/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/df6a7a7b952e8826916f00e69b503af1/pete-music%402x.png"}]}]}}},{}],33:[function(e,t,n){t.exports=[{code:"cs",name:"etina"},{code:"de",name:"Deutsch"},{code:"en-AU",name:"English (AU)"},{code:"en-GB",name:"English (UK)"},{code:"en-US",name:"English (US)"},{code:"es",name:"Espaol"},{code:"fr",name:"Franais"},{code:"fr-CA",name:"Franais (Canada)"},{code:"it",name:"Italiano"},{code:"hu",name:"Magyar"},{code:"nl",name:"Nederlands"},{code:"nb",name:"Norsk (bokml)"},{code:"pl",name:"Polski"},{code:"pt-BR",name:"Portugus (Brasil)"},{code:"fi",name:"Suomi"},{code:"sv",name:"Svenska"},{code:"vi",name:"Ting Vit"},{code:"tr",name:"Trke"},{code:"ru",name:""},{code:"uk",name:""},{code:"th",name:""},{code:"zh-Hans",name:" ()"},{code:"zh-Hant",name:" ()"},{code:"ja",name:""}]},{}],34:[function(e,t,n){t.exports=[{id:"guide-1",bgcolor:"#FAF3C0",imgUrl1x:"https://a.trellocdn.com/images/tips/3a63a6244ef2e7ade4d645ca0830dc63/guide-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/eab001f563b4e3d8a5d1199cce807e59/guide-1%402x.png",url:"https://trello.com/guide?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=guide"},{id:"inspiration-1",bgcolor:"#298FCA",imgUrl1x:"https://a.trellocdn.com/images/tips/e1565bd541d2b56ec792b202bd420c54/inspiration-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/537647bd716153a10a3254e6912b623b/inspiration-1%402x.png",langs:["en-US","en-GB","en-AU","fr","pt-BR"],url:"https://trello.com/inspiration?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=inspiration"},{id:"power-ups-1",bgcolor:"#42548E",imgUrl1x:"https://a.trellocdn.com/images/tips/d7178bb1e5dc48fb4fe66ea30e772bed/power-ups-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/283ff0f7ee60508a0ea9267b27351402/power-ups-1%402x.png",url:"https://trello.com/power-ups?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=power-ups"},{id:"webinars-1",bgcolor:"#42548E",imgUrl1x:"https://a.trellocdn.com/images/tips/7e1a1e13b5deffa70d0e8ec4fda324cc/webinars-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/f1f39fe1384c4439d9326e23b378a492/webinars-1%402x.png",url:"https://trello.com/webinars?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=webinar"}]},{}],35:[function(e,n,r){var o,i,a,s;o=e("jquery"),i=void 0,t(function(){return i=e(208)}),a=void 0,t(function(){return a=e(39)}),s=e("underscore"),n.exports=new(function(){function e(){this.updateToken()}var t,n,r,u;return t="notLoggedIn",n=null,r=null,u="token"+window.location.port,e.prototype.isLoggedIn=function(){return n!==t},e.prototype.myId=function(){return n},e.prototype.myUsername=function(){var e;return null!=(e=this.me())?e.get("username"):void 0},e.prototype.myToken=function(){return r},e.prototype.me=function(){var e;return e=a.get("Member",n),null!=e||this.isLoggedIn()||(e=new i({id:t,notLoggedIn:!0},{modelCache:a}),a.add(e)),e},e.prototype.isMe=function(e){return(null!=e?e.id:void 0)?this.isMe(e.id):e===n},e.prototype.confirmed=function(){return this.me().get("confirmed")},e.prototype.canLogIn=function(){var e,t;return!s.isEmpty(null!=(e=null!=(t=this.me())?t.get("loginTypes"):void 0)?e:[])},e.prototype.updateToken=function(){var e;return e=o.cookie(u)||"",r!==e&&(r=e,n=r.split("/")[0]||t),n},e.prototype.logoutPost=function(){var e;return e=o("<input>").attr("name","dsc").val(o.cookie("dsc")),o("<form>").attr({method:"post",action:"/logout"}).append(e).css({display:"none"}).appendTo("body").submit()},e.prototype.removeToken=function(){return o.cookie(u,null,{path:"/"}),window.location.reload()},e}())},{}],36:[function(e,t,n){var r;r=e(133),t.exports=window.IdCache=new(function(){function e(){this._shortLinkToId={Card:{},Board:{}},this._idCardToIdBoard={}}return e.prototype.getId=function(e,t){if(r.checkId(t))return t;if(r.isShortLink(t))return this._shortLinkToId[e][t];throw new Error("Not a shortLink or id: "+t)},e.prototype.setId=function(e,t,n){if(!r.checkId(n))throw new Error("Not an id: "+n);if(!r.isShortLink(t))throw new Error("Not a shortLink: "+t);return this._shortLinkToId[e][t]=n},e.prototype.setCardId=function(e,t){return this.setId("Card",e,t)},e.prototype.setBoardId=function(e,t){return this.setId("Board",e,t)},e.prototype.getCardId=function(e){return this.getId("Card",e)},e.prototype.getBoardId=function(e){return this.getId("Board",e)},e}())},{}],37:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y=[].slice;r=e("jquery"),i=e(84),a=e(36),s=e(40),u=e("bluebird"),c=e(107),l=e("trello-markdown"),d=e(133),p=e("underscore"),g=e(546),v=e(146),m=e(104),f=e(267),b=e("xtend"),o=e(221),h=function(e,t){var n,r,o,i,a;if(null==t)return null;i=f(t),o=[t];for(n in e)if(r=e[n],p.isString(r)){if(r!==i[n])return null}else{if(!p.isRegExp(r))throw Error("invalid specification");if(null==(a=r.exec(i[n])))return null;o=o.concat(a.slice(1))}return o},t.exports=new(function(){function e(){}return e.prototype._knownUrls=[{key:"trello board",match:{protocol:location.protocol,host:location.host,pathname:/^\/b\/(([a-zA-Z0-9]{8})|([0-9a-f]{24}))(?:$|\/.*)/},previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://a.trellocdn.com/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",getText:function(e,t){var n,r,i,u;return n=e[0],u=e[1],null!=(r=null!=(i=t.get("Board",a.getBoardId(u)))?i.get("name"):void 0)?r:s.loadBoardName(u).catch(o.NotFound,o.Unauthorized,function(){return n})}},{key:"trello action",match:{protocol:location.protocol,host:location.host,pathname:/^\/c\/(([a-zA-Z0-9]{8})|([0-9a-f]{24}))(?:$|\/.*)/,hash:/^\#(?:comment|action)-([0-9a-f]{24})$/},previewClass:"attachment-thumbnail-preview-trello-logo",getShared:function(e,t){var n,r,o;return n=e[0],o=e[1],r=e[2],u.try(function(){var e;return null!=(e=t.get("Action",r))?e:s.loadAction(r)}).then(function(e){return null!=e?{action:e,memberCreator:t.get("Member",e.get("idMemberCreator"))}:{}})},getIcon:function(e,t,n){var r,o,i,a,s;return o=e[0],s=e[1],i=e[2],a=n.memberCreator,null!=(r=null!=a?a.get("avatarHash"):void 0)?[window.avatarDomain,r,"30.png"].join("/"):"https://a.trellocdn.com/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png"},getText:function(e,t,n){var r,o,a,s,u,l;return o=e[0],u=e[1],a=e[2],r=n.action,null==r?o:(l=p.chain(new i("action").getEntities(r.get("display"),null!=(s=r.get("data").card)?s.id:void 0)).map(function(e){var t,n;return n=e.type,t=e.text,"member"===n&&r.isCommentLike()?t+":":"comment"===n?c.comments.textInline(t):t}).join("").value(),v(l,64))}},{key:"trello card",match:{protocol:location.protocol,host:location.host,pathname:/^\/c\/(([a-zA-Z0-9]{8})|([0-9a-f]{24}))(?:$|\/.*)/},previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://a.trellocdn.com/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",getText:function(e,t){var n,r,i,u;return n=e[0],u=e[1],null!=(r=null!=(i=t.get("Card",a.getCardId(u)))?i.get("name"):void 0)?r:s.loadCardName(u).catch(o.NotFound,o.Unauthorized,function(){return n})}},{key:"fogbugz case",match:{protocol:/^https?:$/,host:/^([^\.]+)\.fogbugz\.com$/,pathname:/^\/f\/cases\/([\d]+)/},previewClass:"attachment-thumbnail-preview-fogbugz-logo",icon:"https://a.trellocdn.com/images/services/a1385c9ce999f8389ec7dc43c1b24b2c/fogbugz.png",getArgs:function(e){var t,n,r;return t=e[0],r=e[1],n=e[2],{caseNumber:n}}},{key:"kiln commit",match:{protocol:/^https?:$/,host:/^([^\.]+)\.(?:fogbugz\.com\/kiln|kilnhg\.com)$/,pathname:/^\/Code\/([^\/]+)\/([^\/]+)\/([^\/]+)\/History\/([^\/]+)/},previewClass:"attachment-thumbnail-preview-kiln-logo",icon:"https://a.trellocdn.com/images/services/6c1d65d72873b01d740adfbb9de22234/kiln.png",getText:function(e){var t,n,r,o,i,a;return t=e[0],a=e[1],o=e[2],i=e[3],n=e[4],r=e[5],"Group"===i?o+"  "+n+": "+r:o+"  "+i+"  "+n+": "+r},dataUrl:function(e){return e.replace(/\/Code\//,"/trello/Code/")},_processJSON:function(e,t){var n,r,o,i,a;if(null!=t.reviews)for(i=t.reviews,n=0,o=i.length;o>n;n++)a=i[n],a.status=m(["known services","kiln commit","status",a.sStatus]),a.url=e.replace(/\/Code\/.*$/,"/Review/"+a.sReview);return t.sAuthor&&(t.author=t.sAuthor.replace(/\s<.*$/,"")),t.hash&&(t.shortHash=t.hash.substr(0,6)),t.sDescription&&(r=new l({restrict:{block:["paragraph","newline"],inline:["break","email","emoji","url"]}}),t.shortCommitMessage=t.sDescription.split("\n")[0],t.commitMessageHtml=r.format(t.sDescription).output),t.url=e,t},previewHtml:function(e,t){return g.fill("kiln_changeset_preview",this._processJSON(e,t))},previewHtmlError:function(e,t){var n;return/unable to access/i.test(t)?(e=null!=(n=/^https?:\/\/[-a-z0-9\.]+(\/kiln)?/.exec(e))?n[0]:void 0,{login:m("known services.kiln commit.error")}):null},thumbnailHtml:function(e,t,n){return g.fill("kiln_changeset_thumbnail",b(this._processJSON(e,t),n))}},{key:"github commit",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/commit\/([^\/]{7,40})$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://a.trellocdn.com/images/services/8cab38550d1f23032facde191031d024/github.png",getText:function(e){var t,n,r,o;return t=e[0],o=e[1],r=e[2],n=e[3],o+"/"+r+": "+n.substr(0,7)}},{key:"github issue",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/issues\/(\d+)$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://a.trellocdn.com/images/services/8cab38550d1f23032facde191031d024/github.png",getArgs:function(e){var t,n,r,o;return t=e[0],o=e[1],r=e[2],n=e[3],{user:o,repo:r,number:n}}},{name:"GitHub Pull Request",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/pull\/(\d+)$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://a.trellocdn.com/images/services/8cab38550d1f23032facde191031d024/github.png",getArgs:function(e){var t,n,r,o;return t=e[0],o=e[1],r=e[2],n=e[3],{user:o,repo:r,number:n}},getText:function(e){var t,n,r,o;return t=e[0],o=e[1],r=e[2],n=e[3],o+"/"+r+": Pull Request "+n}}],e.prototype.interpret=function(e,t){var n,r,o,i,a;for(a=this._knownUrls,r=0,o=a.length;o>r;r++)if(n=a[r],null!=(i=h(n.match,e)))return function(e){var n,r,o,a,s,c,l,d;return c=e.key,l=e.name,a=e.getText,n=e.getArgs,d=e.previewClass,s=e.icon,o=e.getShared,r=e.getIcon,u.resolve("function"==typeof o?o(i,t):void 0).then(function(o){var p,h,f;return f=null!=a?a(i,t,o):(p=null!=(h="function"==typeof n?n(i,t):void 0)?h:{},m(["known services",c,"text"],p)),null!=r&&(s=r(i,t,o)),null==l&&(l=m(["known services",c,"name"])),u.props({name:l,previewClass:d,icon:s,text:f,type:e.key})})}(n);return u.resolve()},e.prototype._runHandler=function(){var e,t,n,o,i,a,s,u,c,l,d;for(u=arguments[0],d=arguments[1],e=4<=arguments.length?y.call(arguments,2,n=arguments.length-1):(n=2,[]),c=arguments[n++],l=this._knownUrls,o=0,a=l.length;a>o;o++)if(i=l[o],null!=h(i.match,d)&&null!=i[u])return s=i.match,t=i.dataUrl,void r.ajax({url:t(d),xhrFields:{withCredentials:!0},headers:{"X-Trello":"Is it me you're looking for?"},success:function(t){return c(null,i[u].apply(i,[d,t].concat(y.call(e))))},error:function(t,n,r){var o,a;return o=u+"Error",a="function"==typeof i[o]?i[o].apply(i,[d,r].concat(y.call(e))):void 0,c(null!=a?a:"could not load")}});c()},e.prototype.previewHtml=function(e,t){return this._runHandler("previewHtml",e,t)},e.prototype.thumbnailHtml=function(e,t,n){return this._runHandler("thumbnailHtml",e,t,n)},e}())},{}],38:[function(e,t,n){var r;r=e(35),t.exports={locales:[window.locale,"en-GB"]}},{}],39:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O=[].slice,A=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(35),i=e(241),r=e(157),u=e(167),c=e(169),a=e(166),s=e(164),l=e(198),d=e(86),p=e(205),h=e(206),m=e(208),g=e(210),v=e(212),b=e(214),y=e(213),w=e("bluebird"),E=e(231),_=e(133),k=e("underscore"),S=e(48),T=e(109),j=e(245),C=e(79),x={Action:{type:r,test:j.eq("actions")},Card:{type:u,test:j.eq("cards")},Checklist:{type:c,test:j.eq("checklists")},Board:{type:a,test:function(e){return/^board($|s)/.test(e)}},BoardPlugin:{type:s,test:j.eq("boardPlugins")},Collaborator:{type:m,test:j.eq("collaborators"),shouldPreserve:!0},Enterprise:{type:l,test:function(e){return/^enterprise/.test(e)}},Label:{type:p,test:j.eq("labels")},List:{type:h,test:function(e){return/^lists?/.test(e)}},Member:{type:m,test:function(e){return/^member/.test(e)&&"memberships"!==e&&"memberType"!==e&&"membershipCounts"!==e}},Notification:{type:g,test:j.eq("notifications")},Organization:{type:v,test:function(e){return/^organization/.test(e)}},Plugin:{type:b,test:function(e){return/^plugins?$/.test(e)}},PluginData:{type:y,test:j.eq("pluginData")}},T(d,f=function(){function e(){var e;this._cache={},this._locked=[],this._lockIndex=0,this._deltaQueue=[],this.uniqueId=k.uniqueId("mc");for(e in x)this._cache[e]={}}return e.prototype.get=function(e,t){var n;return k.isArray(t)?t.map(j(this,"get",e)):_.isShortLink(t)?this.findOne(e,"shortLink",t):(k.isString(e)||(e=e.prototype.typeName),null!=(n=this._cache[e])?n[t]:void 0)},e.prototype.find=function(){var e,t,n,r,o;return n=arguments[0],e=2<=arguments.length?O.call(arguments,1):[],1===e.length?(r=e[0],k.filter(this.all(n),r)):(t=e[0],o=e[1],this.find(n,function(e){return e.get(t)===o}))},e.prototype.findOne=function(){var e;return e=1<=arguments.length?O.call(arguments,0):[],k.first(this.find.apply(this,e))},e.prototype.waitFor=function(e,t,n){var r;return r=this.get(e,t),null!=r?n(null,r):this.once("add:"+e+":"+t,function(r){return function(){return r.waitFor(e,t,n)}}(this))},e.prototype.all=function(e){return k.isString(e)||(e=e.prototype.typeName),k.values(this._cache[e])},e.prototype.add=function(e){var t;e.id&&null!=this.get(e.typeName,e.id)||null!=x[e.typeName]&&(t=e.id?e.id:e.cid,this._cache[e.typeName][t]=e,this.stopListening(e),this.listenTo(e,"change",this.onModelChange),this.listenTo(e,"destroy",this.remove),this.waitForId(e,function(t){return function(n){return delete t._cache[e.typeName][e.cid],t._cache[e.typeName][n]=e,t.trigger("add:"+e.typeName+":"+n,e),"function"==typeof e.triggerCacheEvents?e.triggerCacheEvents(t,"add",e):void 0}}(this)),this.trigger("add:"+e.typeName,e))},e.prototype.onModelChange=function(e){var t,n,r;"function"==typeof e.triggerCacheEvents&&e.triggerCacheEvents(this,"change",e),this.trigger("change:"+e.typeName,e),n=e.changedAttributes();for(t in n)r=n[t],this.trigger("change:"+e.typeName+":"+t,e)},e.prototype.remove=function(e){var t,n,r,o;if(null!=e){if(e instanceof u)for(o=e.actionList.models,n=0,r=o.length;r>n;n++)t=o[n],this.remove(t);return delete this._cache[e.typeName][e.id],delete this._cache[e.typeName][e.cid],this.trigger("remove:"+e.typeName,e),null!=e.id&&this.trigger("remove:"+e.typeName+":"+e.id,e),"function"==typeof e.triggerCacheEvents&&e.triggerCacheEvents(this,"remove",e),this.stopListening(e),e.trigger("destroy"),e.destructor()}},e.prototype._update=function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g;if(null==n&&(n={}),k.isArray(t))return t.map(function(t){return function(r){return t._update(e,r,n)}}(this));if(t.deleted)return void this.remove(this.get(e,t.id));d=k.clone(t),u=function(){var e;e=[];for(s in n)a=n[s],s in d&&(o=d[s],delete d[s],e.push(j(a,o)));return e}();for(r in x){l=x[r],m=l.type,h=l.test,p=l.shouldPreserve;for(s in t)g=t[s],h(s)&&(this._update(r,g,n),p||delete d[s])}return i=k.isString(e)?this.get(e,t.id):e,null!=i?(this.unmarkModel(i),i.set(d),u.forEach(function(e){return e(i)}),i):(f=x[e])?(c=new f.type(d,{modelCache:this}),u.forEach(function(e){return e(c)}),c):t},e.prototype.lock=function(e){var t;return t=this._lockIndex++,S("MC",e+" took lock "+t),this._locked.push(t),t},e.prototype.locked=function(){return!k.isEmpty(this._locked)},e.prototype.unlock=function(e){return A.call(this._locked,e)>=0?(S("MC","gave lock "+e),this._locked=k.without(this._locked,e),this.locked()||this.processDeltas(),!0):!1},e.prototype.getLock=function(){return w.resolve(this.lock()).disposer(function(e){return function(t){return e.unlock(t)}}(this))},e.prototype.enqueueDelta=function(e,t,n,r){null==n&&(n={}),null==r&&(r=function(){}),k.isFunction(n)&&(r=n,n={}),S("MC","got an update for "+(k.isString(e)?e:e.typeName)),this.locked()?this._deltaQueue.push({modelOrType:e,delta:t,mappingRules:n,next:r}):r(null,this._update(e,t,n))},e.prototype.processDeltas=function(){var e,t,n,r,o,i,a,s,u,c,l,d,p;for(u=this._deltaQueue,this._deltaQueue=[],p=function(e){return!k.isString(e)&&null==e.id},S("MC","Running "+u.length+" updates"),t=0,r=u.length;r>t;t++)c=u[t],a=c.modelOrType,e=c.delta,i=c.mappingRules,s=c.next,p(a)&&s(null,this._update(a,e,i));for(d=[],n=0,o=u.length;o>n;n++)l=u[n],a=l.modelOrType,e=l.delta,i=l.mappingRules,s=l.next,p(a)||d.push(s(null,this._update(a,e,i)));return d},e.prototype.markModel=function(e,t){return e._marked=t},e.prototype.unmarkModel=function(e){return delete e._marked},e.prototype.isMarked=function(e,t){return e._marked===t},e.prototype.forEachModel=function(e){var t,n,r,o;for(o in this._cache){r=this._cache[o];for(t in r)n=r[t],e(n)}},e.prototype.mark=function(){var e;return e=k.uniqueId("mark"),this.forEachModel(function(t){return function(n){return t.markModel(n,e)}}(this)),e},e.prototype.sweep=function(e){this.forEachModel(function(t){return function(n){return t.isMarked(n,e)?t.remove(n):void 0}}(this))},e}()),k.extend(f.prototype,i.Events),t.exports=window.ModelCache=new f},{}],40:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V=[].slice;r=e("jquery"),o=e(157),a=e(166),s=e(167),u=e(198),c=e(36),l=e(206),d=e(208),p=e(39),m=e(210),f=e(212),v=e(214),g=e(227),b=e("bluebird"),P=e(231),w=e(119),L=e(55),_=e(133),k=e("underscore"),O=e("moment"),A=e(136),N=e("xtend"),T=e(245),A=e(136),j=e(79),i=e(221),S=function(e,t){var n,r;return r=e.query,n=e.mappingRules,{query:N(r,t),mappingRules:n}},M={},y=5,B=function(e){var t;return t=M,b.fromNode(function(n){return t=QuickLoad.load(e,n)}).catch(function(e){var t,n;return n=e[0],t=e[1],b.reject(i.fromResponse(n,t))}).tap(function(){return j(t!==M,"Promises resolved synchronously; didn't get preload information from QuickLoad")}).spread(function(e,n){return[e,n,t]})},E=function(e){var t;null!=e&&(t=Date.now()-e.start,L("quickload use",e.url,{int_key_1:"time saved",int_val_1:t}))},D=function(e){var t;null!=(t=e.getResponseHeader("X-Server-Time"))&&w.updateServerTime(parseInt(t,10))},I=function(e){return function(t){return b.try(function(){var n;return null!=(n=h.getUpToDateBoard(t))?n:e.call(h,t)})}},x={},C={},t.exports=window.ModelLoader=h={_history:[],_replaying:!1,_loadApiData:function(){var e,t,n,r,o,i,a,s,u,c,l,d;return a=arguments[0],t=arguments[1],u=arguments[2],e=4<=arguments.length?V.call(arguments,3):[],s=e[0],i=e[1],r=e[2],c=u.query,o=null!=(l=u.mappingRules)?l:{},k.isString(a)||(a=a.prototype.typeName),null==s&&(s=_.pluralize(a)+"/"+t),n=_.invitationTokens().join(","),k.isEmpty(n)||(c=k.extend({},c,{invitationTokens:n})),d=QuickLoad.makeUrl("/1/"+s,c),B(d).spread(function(e,t,n){return D(t),E(n),[e,t]}).tap(function(){return r?void 0:new b(function(e){return h.waitFor("headerData",e)})}).spread(function(e,t){return A(p,"enqueueDelta",a,e,o).then(function(e){var n;return i?(n=window.JSON.parse(t.getResponseHeader(i)),[e,n]):e})})},getUpToDateBoard:function(e){var t,n,r;return this.isReplaying()?null:(n=c.getBoardId(e),null==n?null:(t=p.get("Board",n),null==t?null:(r=P.getIxLastUpdate(t.id),null!=r?t:null)))},isReplaying:function(){return this._replaying},replay:function(){var e;return this._replaying=!0,e=p.mark(),b.map(this._history,function(e){return function(t){var n,r,o;return o=t.owner,r=t.loadName,n=t.args,e[r].apply(e,n)}}(this),{concurrency:y}).then(function(){return p.sweep(e)}).finally(function(e){return function(){return e._replaying=!1}}(this)).return()},record:function(){var e,t,n;if(n=arguments[0],t=arguments[1],e=3<=arguments.length?V.call(arguments,2):[],null!=n)return this._history.push({owner:n,loadName:t,args:e});throw Error("Unclaimed "+t)},for:function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?V.call(arguments,2):[],this.record.apply(this,[n,t].concat(V.call(e))),this[t].apply(this,e)},release:function(e){this._history=k.reject(this._history,function(t){return t.owner===e})},loadHeaderData:function(){return this._loadApiData(d,"me",g.memberHeader,void 0,void 0,!0).then(function(e){return["Member",e,g.memberHeader.mappingRules]})},loadBoardsMenuData:function(){return this._loadApiData(d,"me",g.boardsMenuMinimal).then(function(e){return["Member",e,g.boardsMenuMinimal.mappingRules]})},loadBoardMinimal:function(e){return this._loadApiData(a,e,g.boardMinimal)},loadBoardData:function(e,t){return this._loadApiData(a,e,t)},loadBoardAttachment:function(e){return this._loadApiData(a,e,g.boardAttachment)},loadCardData:function(){var e,t,n,r;return e=2<=arguments.length?V.call(arguments,0,t=arguments.length-1):(t=0,[]),r=arguments[t++],n=e[0],null!=n?this._loadApiData(s,r,g.card,"boards/"+n+"/cards/"+r):this._loadApiData(s,r,g.card)},loadCardName:function(e){return this._loadApiData(s,e,{query:{fields:"name"}}).call("get","name")},loadCardId:function(e,t){return this._loadApiData(s,t,g.idCard,"boards/"+e+"/cards/"+t).get("id")},loadCardDetails:function(e,t){return this._loadApiData(s,e,S(g.cardDetails,{actions_limit:t}),"cards/"+e)},loadCardHideDetails:function(e,t){return this._loadApiData(s,e,S(g.cardDetails,{actions:"commentCard,copyCommentCard,createCard,copyCard",actions_limit:t}),"cards/"+e)},loadCardVoters:function(e){return this._loadApiData(s,e,g.cardVoters,"cards/"+e)},loadCardCopyData:function(e,t){return this._loadApiData(s,t,g.cardCopy,"boards/"+e+"/cards/"+t)},loadCardList:function(e){return this._loadApiData(l,e,g.cardList,"cards/"+e+"/list")},loadCardAttachment:function(e){return this._loadApiData(s,e,g.cardAttachment)},loadNotification:function(e){return this._loadApiData(m,e,{query:{fields:"all"}})},loadNotificationData:function(e){return this._loadApiData(d,e,g.memberNotifications)},loadMoreNotificationData:function(e,t){var n,r;return r={filter:"all",limit:m.PAGE_SIZE,display:!0,page:t},n="members/"+e+"/notifications",this._loadApiData(m,null,{query:r},n)},loadAllNotificationData:function(e){var t,n;return n={filter:"all",limit:1e3,display:!0},t="members/"+e+"/notifications",this._loadApiData(m,null,{query:n},t)},loadMemberBoardsData:function(e){return this._loadApiData(d,e,g.memberBoards)},loadMemberCardsData:function(e){return this._loadApiData(d,e,g.memberCards)},loadMemberCards:function(e,t){var n;return n={filter:"visible",stickers:!0,attachments:!0,members:!0},t&&(n.modifiedSince=t),this._loadApiData(s,null,{query:n},"members/"+e+"/cards")},loadMemberEmail:function(e){return this._loadApiData(d,e,{query:{fields:"email",invitationTokens:_.invitationTokens().join(",")}})},loadOrganizationMemberGhost:function(e,t){var n,r,o;return n=null!=(o=_.inviteTokenFor(e))?o.split("-")[0]:void 0,null==n?b.resolve({}):(r={fields:g.memberFields,invitationTokens:_.invitationTokens().join(",")},this._loadApiData(d,n,{query:r}).catch(i,function(){return{}}))},loadMyBoardsUnreadData:function(){return this._loadApiData(d,"me",g.memberUnreadBoards)},loadMoreActionData:function(){var e,t,n,r,i,a,s,u;return a=arguments[0],r=arguments[1],s=arguments[2],i=arguments[3],e=5<=arguments.length?V.call(arguments,4):[],n=e[0],t=e[1],u={filter:"all",limit:i,page:s,display:!0},null!=n&&(u.idModels=n.join(",")),null!=t&&(u.filter=t),this._loadApiData(o,r,{query:u},a+"s/"+r+"/actions")},loadClosedCards:function(e,t){var n,r,o;return r=t.limit,n=t.before,o={stickers:!0,attachments:!0,pluginData:!0},null!=r&&(o.limit=r),null!=n&&(o.before=n),this._loadApiData(s,e,{query:o},"boards/"+e+"/cards/closed")},loadClosedBoards:function(){return this._loadApiData(a,null,{query:{filter:"closed"}},"members/me/boards")},loadArchivedLists:function(e){return this._loadApiData(a,e,g.archivedLists)},loadMemberPaidAccount:function(e){return this._loadApiData(d,e,g.memberPaidAccount)},loadMemberAccountData:function(e){return this._loadApiData(d,e,g.memberAccount)},loadMemberLogins:function(e){return this._loadApiData(d,e,{query:{fields:"email",logins:!0}})},loadMemberProfileData:function(e){var t,n;return n=g.memberProfile,t=g.memberProfile_daysBack,n.action_since=O().subtract(t,"days").toString(),this._loadApiData(d,e,g.memberProfile)},loadMemberCustomBackgrounds:function(e){return this._loadApiData(d,e,{query:{fields:"",boardBackgrounds:"custom"}})},loadMemberCustomStickers:function(e){return this._loadApiData(d,e,{query:{fields:"",customStickers:"all"}})},loadMemberCustomEmoji:function(e){return this._loadApiData(d,e,{query:{fields:"",customEmoji:"all"}})},_loadOrganizationPayload:function(e,t){return this._loadApiData(f,t,e)},loadOrganizationData:function(e){return this._loadOrganizationPayload(g.organization,e)},loadOrganizationBoardsData:function(e){return this._loadOrganizationPayload(g.organizationBoardsPage,e)},loadOrganizationPaidAccount:function(e){return this._loadOrganizationPayload(g.organizationPaidAccount,e)},loadOrganizationMinimal:function(e){return this._loadOrganizationPayload(g.organizationMinimal,e)},loadOrganizationMembersData:function(e){return this._loadOrganizationPayload(g.organizationMembers,e)},loadOrganizationMembersExtraData:function(e){return this._loadOrganizationPayload(g.organizationMembersExtra,e)},loadOrganizationMembersMinimal:function(e){return this._loadOrganizationPayload(g.organizationMembersMinimal,e)},loadOrganizationExportData:function(e){return this._loadOrganizationPayload(g.organizationExports,e)},loadOrganizationMemberMinimal:function(e,t){return this._loadApiData(d,t,g.memberMinimal)},loadMemberOrganizationsDeactivatedMembers:function(){return this._loadApiData(f,null,g.memberOrganizationDeactivatedMembers,"members/me/organizations")},loadOrgMemberCardData:function(e,t){var n;return n="organization/"+e+"/members/"+t+"/cards",this._loadApiData(s,e,g.orgMemberCards,n)},loadOrgNameById:function(e){var t;return t={fields:"name"},this._loadApiData(f,e,{query:t}).call("get","name")},loadCurrentBoardData:I(function(e){return this.loadBoardData(e,g.currentBoardMinimal)}),loadBoardSecondary:I(function(e){return this._loadApiData(a,e,g.currentBoardSecondary)}),loadBoardPluginData:I(function(e){return this._loadApiData(a,e,g.currentBoardPluginData)}),loadBoardName:function(e){var t;return t={fields:["name","closed"].join(",")},this._loadApiData(a,e,{query:t}).call("get","name")},loadMembersOfEnterprise:function(e,t){var n;return n=k.extend({fields:g.enterpriseMemberFields},t),this._loadApiData(d,e,{query:n},"enterprises/"+e+"/members","X-Trello-API-Query-Meta")},loadEnterprise:function(e,t){return null==t&&(t={organizations:"all"}),this._loadApiData(u,e,{query:t})},loadMyOrganizations:function(){return this.loadMemberOrganizations("me")},loadMemberOrganizations:function(e){return this._loadApiData(d,e,g.organizations)},loadSearchData:function(e){return this._loadApiData("search",null,{
query:e},"search")},loadModel:function(e,t,n){return this._loadApiData(e,t,n)},loadBoardAvailablePlugins:function(e){return this._loadApiData(v,null,{query:{filter:"available"}},"boards/"+e+"/plugins")},loadBoardEnabledPlugins:function(e){return this._loadApiData(v,null,{query:{filter:"enabled"}},"boards/"+e+"/plugins")},loadQuickBoardsData:function(){return this._loadApiData(d,"me",g.memberQuickBoards)},loadQuickBoardsSearch:function(e){return this._loadApiData("search",null,{query:g.quickBoardsSearch.query(e)},"search")},loadAction:function(e){return this._loadApiData(o,e,g.action)},loadBCFeatures:function(e){return this._loadApiData(f,e,g.bcFeatures)},triggerWaits:function(e){var t,n,r,o,i;for(x[e]=!0,i=null!=(o=C[e])?o:[],n=0,r=i.length;r>n;n++)(t=i[n])();return delete C[e]},waitFor:function(e,t){return x[e]?t():(null!=C[e]?C[e]:C[e]=[]).push(t)},await:function(e){return new b(function(t){return function(n){return t.waitFor(e,n)}}(this))}}},{}],41:[function(e,t,n){var r,o;o=e("underscore"),r=function(){function e(e){null==e&&(e={}),this.config=o.clone(e)}return e.prototype.get=function(e){return this.config[e]||null},e}(),t.exports=new r(window.init_config)},{}],42:[function(e,t,n){var r;r=e("jquery"),r(document).ajaxSend(function(e,t,n){0===n.url.indexOf("/")&&t.setRequestHeader("X-Trello-Client-Version",window.clientVersion)})},{}],43:[function(e,t,n){var r,o,i,a;r=e("jquery"),o=e(35),a=e(155),t.exports=i={version:new a.Client(window.clientVersion),server:{version:"0.0.0",environment:"dev"},setServerVersionFromResponse:function(e){var t,n;return n=e.getResponseHeader("X-Trello-Version"),t=e.getResponseHeader("X-Trello-Environment"),null!=n&&(this.server.version=n),null!=t?this.server.environment=t:void 0}},Object.defineProperty(window,"TrelloVersion",{get:function(){return"Client: "+i.version+" ("+o.me().get("channels").active+")"}})},{}],44:[function(e,t,n){var r,o,i;o=e(118),i=e("underscore"),r="error_history",t.exports={add:function(e){var t;return t=this.recent(),t.unshift(e),t=i.first(t,5),o.set(r,t)},recent:function(){var e;return null!=(e=o.get(r))?e:[]}}},{}],45:[function(e,t,n){var r,o,i;r=e(43),i=e(38).locales,o=i[0],t.exports=function(){return[{schema:"iglu:com.trello/web-context/jsonschema/1-0-4",data:{client_version:r.version.toString(),client_locale:o}}]}},{}],46:[function(e,t,n){var r,o,i,a;r=e("jquery"),o=e(35),i=e(82),a=e(44),t.exports=function(e,t,n,s){var u,c,l,d,p,h,m;p=window.clientVersion.split("-"),d=p[0],m=p[1],m=parseInt(m,10),u={head:d,version:m,patch:0},c={name:e.name,msg:e.message,url:t,line:n,col:s,stack:e.stack,ua:navigator.userAgent,browser:i.asString,language:null!=(h=navigator.language)?h:navigator.browserLanguage,clientVersion:u},o.isLoggedIn()&&(c.idMember=o.myId());try{r.post("/err",{errors:[c]}),a.add({timestamp:(new Date).toISOString(),stack:e.stack,name:e.name,msg:e.message,url:t})}catch(e){l=e}}},{}],47:[function(e,t,n){var r,o=[].slice;r=/hound=1/.test(document.cookie),t.exports=function(e){var t,n,i,a;if(r){n=" ",i=[];for(t in e)a=e[t],void 0!==a&&null!==a&&""!==a&&(n+="%c"+(t[0].toUpperCase()+t.substr(1))+":%c "+a+" ",i.push("color: #00f; font-weight: bold; background-color: #ddd; border-radius: 2px; padding: 0 2px;"),i.push("color: #444"));return console.log.apply(console,[n].concat(o.call(i)))}}},{}],48:[function(e,t,n){var r;r=e(49),t.exports=r.log.bind(r)},{}],49:[function(e,t,n){var r,o,i,a=[].slice;r=e("jquery"),o=e(118),i=e("underscore"),t.exports=window.Logger=new(function(){function e(){var e;this.enabled=null!=(e=o.get("loggers"))?e:{},this.historyMap={},this.logHistory=!1,this.timeSpent={},this.timing={}}return e.prototype.log=function(){var e,t,n,o;o=arguments[0],e=2<=arguments.length?a.call(arguments,1):[],("undefined"!=typeof console&&null!==console?console.log:void 0)&&(n=!1,0===e.length?(n=!0,e.push(o),o="all"):n=this.enabled.all||this.enabled[o],n&&(1===e.length&&i.isArray(e[0])&&(e=e[0]),e.unshift(o),e.unshift(new Date),r("body").is(".chrome")?console.log(e):console.dir(e)),this.logHistory&&(null==(t=this.historyMap)[o]&&(t[o]=[]),this.historyMap[o].push(e)))},e.prototype.enable=function(e){null==e&&(e="all"),this.enabled[e]=!0,this.save()},e.prototype.disable=function(e){null==e&&(e="all"),delete this.enabled[e],this.save()},e.prototype.disableAll=function(){this.enabled={},this.save()},e.prototype.enableAll=function(){this.enabled.all=!0,this.save()},e.prototype.history=function(e){var t,n,r,o;if(e in this.historyMap)for(o=this.historyMap[e],n=0,r=o.length;r>n;n++)t=o[n],"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(t)},e.prototype.list=function(){"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(i.keys(this.historyMap))},e.prototype.save=function(){o.set("loggers",this.enabled)},e.prototype.time=function(e){return this.timing[e]=performance.now()},e.prototype.endTime=function(e){var t,n;return n=performance.now()-this.timing[e],null==(t=this.timeSpent)[e]&&(t[e]=0),this.timeSpent[e]+=n},e}())},{}],50:[function(e,t,n){var r,o,i,a;r=e(35),o=e(27),i=e(133),a=e("moment"),t.exports=function(e,t,n){var s,u,c,l,d,p,h,m,f,g,v,b,y;return null==t&&(t="not specified"),n||(n="none given"),p=e.toJSON(),d=r.me().toJSON(),h=null!=(m=p.paidAccount)&&null!=(f=m.products)?f[0]:void 0,u={},u.ID=p.id,(null!=(g=p.paidAccount)?g.ixSubscriber:void 0)&&(u.ixSubscriber=null!=(v=p.paidAccount)?v.ixSubscriber:void 0),p.displayName&&(u["Organization Display Name"]=p.displayName),p.name&&(u["Organization Name"]=p.name),p.fullName?u["Full Name"]=p.fullName:u["Full Name"]=d.fullName,p.username?u.Username=p.username:u.Username=d.username,p.idBoards&&(u["# Boards"]=p.idBoards.length),p.memberships&&(u["# Members"]=p.memberships.length),null!=h&&(u["Next Billing Date"]=(c=null!=(b=p.paidAccount.billingDates)?b[h]:void 0)?a(new Date(c)).locale("en").format("LL"):"",o.isYearly(h)?u.Interval="Yearly":u.Interval="Monthly",u.Price=o.getPrice(h)),u["Trello Version"]=window.TrelloVersion.replace(/\s+/g," "),s=function(){var e;e=[];for(l in u)y=u[l],e.push(l+": "+y);return e}().join("\n"),i.bugzscout({me:d,project:"Sales",area:"Cancellations",forceNew:1,description:"Cancelled Business Class - "+u.Interval+"\n",extra:s+"\n\nReason: "+t+"\n\nDetails:\n\n"+n})}},{}],51:[function(e,t,n){var r,o,i;r=e(45),o=e(47),i=e(54),t.exports=function(e,t,n,a,s){var u;return"number"==typeof a&&(s=a,a=void 0),"function"==typeof window.ga&&window.ga("send","event",e,t,n,s),u=r(),"function"==typeof window.sp&&window.sp("trackStructEvent",e,t,n,a,s,u),i.push({event:"snowplow.event",snowplowEvent:{context:u,category:e,action:t,label:n,property:a,value:s}}),o({category:e,action:t,label:n,property:a,value:s})}},{}],52:[function(e,t,n){t.exports=function(e){return"function"==typeof window.sp?window.sp("trackUnstructEvent",{schema:"iglu:com.trello/debug-event/jsonschema/1-0-1",data:e}):void 0}},{}],53:[function(e,t,n){var r;r=e(47),t.exports=function(e,t,n){return"function"==typeof window.sp&&window.sp("trackUnstructEvent",{schema:"iglu:com.trello/experiment-event/jsonschema/1-0-0",data:{experiment_id:e,variation_id:t,assignment_id:n}}),r({experimentId:e,variationId:t,assignmentId:n})}},{}],54:[function(e,t,n){var r;r=function(e){var t;return null!=(t=window.dataLayer)?t.push(e):void 0},t.exports={possibleNewSignup:function(){return r({event:"trello.possibleNewSignup"})},push:r}},{}],55:[function(e,t,n){var r,o,i,a;r=e("underscore"),a=e(52),i=e(267),o=e(108),t.exports=function(e,t,n){var s,u,c;return u=i(t),s=/^\/1\/([^\/]*)/.exec(u.pathname)[1],c=u.query.slice(1),a(r.extend({debug_event_type:e,debug_action:s,string_key_1:"query 1",string_val_1:c.slice(0,255),string_key_2:"query 2",string_val_2:c.slice(255,510),string_key_3:"md5 query",string_val_3:o(c)},n))}},{}],56:[function(e,t,n){var r;r=e(45),t.exports=function(e,t,n,o,i,a,s){return"function"==typeof window.sp?window.sp("trackUnstructEvent",{schema:"iglu:com.trello/client-event/jsonschema/1-0-0",data:{ue_category:e,ue_verb:t,ue_dir_object:n,ue_prep_object:o,ue_ind_object:i,ue_method:a,ue_context:s}},r()):void 0}},{}],57:[function(e,t,n){var r;r=e("promise-queue"),r.configure(e("bluebird"))},{}],58:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w={}.hasOwnProperty;r=e("jquery"),o=e(559),i=e(220),a=e(35),s=e(82),u=e(7),c=e(563),l=e(100),d=e(22),p=e(566),h=e(569),m=e(284),f=e(133),g=e("underscore"),v=e(526),y=e(51),b=function(){var e,t,n,r;t={},r=null,e=0,n=function(){var e,n;for(n in t)w.call(t,n)&&(e=t[n])();r=null,t={}},window.requestAnimationFrame=function(o){var i;return i=e++,null==r&&(r=setTimeout(n)),t[i]=o,i},window.cancelAnimationFrame=function(e){delete t[e]}},r(document).ready(function(){var e,t;return r("meta[name=apple-itunes-app]").attr("content","app-id=461504587, app-argument="+location.href),"requestAnimationFrame"in window||b(),window.orientationchange=function(){return c.calcPos()},s.detectCustomWebkitScrollbars(),r.event.props.push("dataTransfer"),r.event.props.push("detail"),t=function(e,t,n,o){return r(document).on("click",e,function(e){var r,i;return r=function(){var r,a,s,u;for(s=[t,n,o],u=[],r=0,a=s.length;a>r;r++)i=s[r],null!=i&&(g.isFunction(i)?u.push(i.call(this,e)):u.push(i));return u}.call(this),y.apply(null,r)})},t(".js-home-via-logo","Header","Logo","Home"),t(".header-signup","Header","Sign Up"),r(document).on("click",".js-resend-confirmation-email",g.throttle(function(e){return function(){return i({type:"POST",url:"/resendValidate",data:{email:a.me().get("email")},success:function(){return o.flash("email sent","confirm")}})}}(this),6e4)),e=r(".window-overlay"),e.click(function(t){var n;if(!(t.button>0)){if(n=r(t.target).closest("a"),n.length>0&&"#"===n.attr("href"))return void f.stopPropagation(t);if(!r(t.target).is("a.focus-dummy")&&!r(t.target).hasClass("checkbox"))return h.isVisible?void h.hide():p.isEditing()?void p.cancelEdits():void(t.target===e[0]&&c.hide())}}),r(document).click(function(e){return r(e.target).closest(".js-react-root").length?void 0:v(e)}),r(document).keyup(function(e){var t,n;return n=l.getKey(e),n===d.Escape?(e.preventDefault(),t=u.getCurrentBoard(),m.hideUnpinnedSidebar(),p.isEditing()?p.cancelEdits():r(".new-comment").hasClass("focus")?r(".new-comment").removeClass("focus").find("textarea").blur():(r("input").blur(),r("textarea").blur())):void 0}),r(document).bind("dragstart",function(e){return r(e.target).closest(".ui-draggable, .js-draggable").length>0}),null!=window.fluid?y("FluidApp"):void 0})},{}],59:[function(e,t,n){var r,o,i,a,s,u,c;r=e(221),u=e(46),i=e(85),o=e("underscore"),a=e(245),s=function(e){return e instanceof r.Other||!(e instanceof r)},c=[],i.subscribe(o.debounce(function(e){var t,n,r,i,l;return 10===c.length?!1:(n=e.error,l=e.url,i=e.line,t=e.col,s(n)&&RegExp("https?://("+location.host+"|[a-z0-9]+\\.cloudfront\\.net|a.trellocdn.com)/").test(l)?(r=[n.message,l,i,t],o.any(c,a(o.isEqual,r))?!1:(u(n,l,i,t),c.push(r),!1)):!1)},1e3,!0))},{}],60:[function(e,t,n){window.testThatErrorReportingStillWorks=function(){return setTimeout(function(){throw new Error("Error reporting still works!")},1e3)}},{}],61:[function(e,t,n){var r,o;r=e(35),o=e(130),e(274),window.Promise=e("bluebird"),e(254).polyfill(),window.getAuthorization=function(){return{type:"cookie",token:r.myToken()}},e(255)},{}],62:[function(e,t,n){var r,o,i,a;r=e(35),o=e(41),a=e(54),"function"==typeof window.sp&&window.sp("newTracker","cf",window.snowplowCloudfrontServer,{appId:o.get("appId")||"web",cookieDomain:".trello.com",respectDoNotTrack:!0}),r.isLoggedIn()?("function"==typeof window.sp&&window.sp("setUserId",r.myId()),a.push({isLoggedIn:!0})):a.push({isLoggedIn:!1}),null!=(i=window.dataLayer)&&i.push({inApp:!0}),"function"==typeof window.sp&&window.sp(function(){var e;return a.push({event:"snowplow.loaded",snowplow:{domain_userid:null!=(e=this.cf)?e.getDomainUserId():void 0}})})},{}],63:[function(e,t,n){var r;r=e("intl"),r.__addLocaleData(e("intl-locale-data"))},{}],64:[function(e,t,n){var r,o,i,a,s,u,c,l=[].slice;r=e(39),u=e(231),i=e(79),o=e("underscore"),a=function(e,t,n){var r,s,u;return i(t.length>=1),r=t[0],u=2<=t.length?l.call(t,1):[],s=null!=e?o.clone(e):{},s[r]=0===u.length?n:a(s[r],u,n),s},c=function(e){var t,n,i;return null!=e.display?e:null==(t=r.get("Action",e.id))?e:"commentCard"!==t.get("type")?e:(n=null!=(i=e.data)?i.text:void 0,null==n?e:(e=o.clone(e),e.display=a(t.get("display"),["entities","comment","text"],n),e))},s=function(e){return null==e._id?e:(e=o.clone(e),null==e.id&&(e.id=e._id),delete e._id,e)},u.on("updateModels",function(e){var t,n,o,i,a;for(a=e.typeName,n=e.deltas,n=n.map(s),"Action"===a&&(n=n.map(c)),o=0,i=n.length;i>o;o++)t=n[o],r.enqueueDelta(a,t)}),u.on("deleteModels",function(e){var t,n,o,i,a,u;for(u=e.typeName,t=e.deltas,a=t.map(s),n=0,i=a.length;i>n;n++)o=a[n].id,r.enqueueDelta(u,{id:o,deleted:!0})})},{}],65:[function(e,t,n){var r,o;r=e("jquery"),o=e(97),r.getScript("https://apis.google.com/js/api.js",function(){return o.loadedAuth()})},{}],66:[function(e,t,n){window.knowsHowToLoadChannels=!0},{}],67:[function(e,t,n){var r,o,i,a,s,u;r=e("jquery"),o=e(82),i=e(100),a=e(22),s=e(133),"safari"===(u=o.browserStr)&&r(document).on("keydown",function(e){var t,n,o,u,c,l,d,p,h;h=i.getKey(e),h!==a.Tab||e.metaKey||e.shiftKey||e.ctrlKey||(c=r(e.target),c.attr("tabindex")&&(p=parseInt(c.attr("tabindex"),10),u=c.closest("body,.js-tab-parent"),o=u.find("[tabindex]"),t=null,n=null,l=1/0,d=1/0,o.each(function(){var e,o;return o=parseInt(r(this).attr("tabindex"),10),o>p&&l>o&&(l=o,t=r(this),e=!0),null==t&&d>o?(d=o,n=r(this)):void 0}),null==t&&(t=n),null!=t&&(s.stop(e),t.focus())))})},{}],68:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b;r=e(35),o=e(241),i=e(166),s=e(7),u=e(86),c=e(212),f=e(109),g=e(231),d=e("underscore"),v=function(e,t){var n;return e.length===(n=t.length)&&n===d.union(e,t).length},a=function(){function e(e){this.maxLength=e,this.contents=[]}return e.prototype.pushift=function(e){return this.contents=d.without(this.contents,e),this.contents.push(e),this.contents.length>this.maxLength?this.contents.shift():null},e.prototype.remove=function(e){return this.contents=d.without(this.contents,e)},e.prototype.map=function(e){return this.contents.map(e)},e}(),h=function(){return r.isLoggedIn()?[{modelType:"Member",idModel:r.myId(),tags:["messages","updates"]}]:[]},m=function(e){return[{modelType:"Organization",idModel:e.id,tags:["allActions","updates"]}]},p=function(e){var t;return[{modelType:"Board",idModel:e.id,tags:["clientActions","updates"]}].concat(null!=(t=e.getOrganization())?m(t):[])},f(u,l=function(){function e(){this.boards=new a(5),this.orgs=new a(1)}return d.extend(e.prototype,o.Events),e.prototype.addModel=function(e){this.waitForId(e,function(t){return function(){return e instanceof i&&t.syncBoard(e),e instanceof c&&t.syncOrg(e),t.ensureSubscriptions()}}(this))},e.prototype.removeModel=function(e){return e instanceof i&&this.boards.remove(e),e instanceof c&&this.orgs.remove(e),this.ensureSubscriptions()},e.prototype.syncBoard=function(e){var t;null!=(t=this.boards.pushift(e))&&this.stopListening(t),this.listenTo(e,"change:idOrganization",this.ensureSubscriptions),this.listenTo(e,"destroy deleting",function(t){return function(){return t.removeModel(e)}}(this))},e.prototype.syncOrg=function(e){this.orgs.pushift(e),this.listenTo(e,"destroy",function(t){return function(){return t.removeModel(e)}}(this))},e.prototype.ensureSubscriptions=function(){var e,t,n,r,o,i,a,s,u,c,l,f,b,y,w;for(e=d.flatten([h(),this.boards.map(p),this.orgs.map(m)]),y={},n=0,o=e.length;o>n;n++)a=e[n],i=a.modelType,r=a.idModel,w=a.tags,null==y[r]&&(y[r]={tags:[],modelType:i}),(s=y[r].tags).push.apply(s,w),y[r].tags=d.uniq(y[r].tags);u=g.currentSubscriptions;for(r in u)i=u[r].modelType,null==y[r]&&g.unsubscribe(i,r);c=g.currentSubscriptions;for(r in c)l=c[r],b=l.tags,i=l.modelType,null!=y[r]&&(t=y[r].tags,v(b,t)||g.unsubscribe(i,r));for(r in y)f=y[r],w=f.tags,i=f.modelType,null==g.currentSubscriptions[r]&&g.subscribe(i,r,w)},e}()),b=new l,s.currentModel.subscribe(function(e){null!=e?b.addModel(e):b.ensureSubscriptions()})},{}],69:[function(e,t,n){var r,o,i,a,s;o=e(35),r=e(221),a=e(85),a.subscribe(function(e){var t;t=e.error,t instanceof r.Unauthenticated&&o.logoutPost()}),s=o.updateToken(),i=setInterval(function(){var e;return e=o.updateToken(),e!==s&&window.location.reload(),s=e},3e3),window.addEventListener("beforeunload",function(){clearInterval(i)})},{}],70:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g;r=e("jquery"),o=e(241),i=e(41),a=e(7),s=e(83),c=e(637),u=e(110),d=e(233),l=e(569),g=e(55),p=e(133),h=e(156),f=e(546),m=e(46),e(42),e(99),r(function(){return setInterval(function(){s.update("body"),s.trigger("renderInterval")},1e4),d.start(),u.init(),a.start().then(function(){return o.history.start({pushState:!0})}),h.ensureRun(),QuickLoad.onRemove(function(e){return e.used?void 0:g("quickload unused",e.url)})})},{}],71:[function(e,t,n){var r,o,i,a;r=e("jquery"),o=e(160),i=e(133),a=e("underscore"),a.defer(function(){var e,t,n,a;return n=i.getMs({minutes:10+5*Math.random()}),a=null,t=("function"==typeof document.hasFocus?document.hasFocus():void 0)||!0,e=function(){return t&&(null==a||Date.now()-a>n)?(o.fetch(),a=Date.now()):void 0},r(window).on("focus",function(n){return t=!0,e()}),r(window).on("blur",function(e){return t=!1}),setInterval(e,n/4),e()})},{}],72:[function(e,t,n){var r;r=e("underscore"),r.mixin({mapObj:r.compose(r.object,r.map),count:function(e,t){var n,r,o,i;for(null==t&&(t=function(){return!0}),n=0,r=0,o=e.length;o>r;r++)i=e[r],t(i)&&n++;return n}})},{}],73:[function(e,t,n){var r,o;r=e("jquery"),o=e(156),r(function(){var e;return o.calc(),e=null,r(window).resize(function(){clearTimeout(e),e=setTimeout(function(){return o.calc()},200)})})},{}],74:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("underscore"),d={none:-1,new:0,processing:1,denied:2,good:3,overdue:4,disabled:5,cancelled:6,"change processing":7,"change denied":8,"change finished":9,authorizing:10,"product specific processing":11,"free trial":12,"pending product specific processing":13,"pending authorizing":14,deleted:15},l=o.invert(d),i=[3,4,7,8,9,11,12,13,14],c=[1,7,10,11,13,14],u=[4],s=[2,5],a=[6],t.exports=r={hasAccount:function(e){return null!=e&&e!==d.none},isActive:function(e){var t;return null!=e&&(t=Number(e.standing),p.call(i,t)>=0)&&!o.isEmpty(e.products)},isProcessing:function(e){var t;return r.hasAccount(e)&&(t=Number(e),p.call(c,t)>=0)},isProblem:function(e){return e===d.overdue},isCancelled:function(e){var t;return null==e?!1:(t=Number(e.standing),r.hasAccount(e.standing)&&(p.call(a,t)>=0||p.call(i,t)>=0&&p.call(c,t)<0&&o.isEmpty(e.products)))},willExpire:function(e){var t,n;return(null!=(t=e.products)?t[0]:void 0)in(null!=(n=e.expirationDates)?n:{})},needsCC:function(e){var t;return t=Number(e),p.call(s,t)>=0},isInactive:function(e){return r.hasAccount(e)&&!r.isActive(e)},standingName:function(e){return l[e]}}},{}],75:[function(e,t,n){var r,o,i,a,s,u;u=e(265),s=null,a=null,r=function(e){return"function"==typeof e?e():e},o=function(e,t){var n,r,o,i,a;if("."===e)return{val:t};if("object"!=typeof t||null===t)return{};for(a=t,i=e.split("."),n=0,o=i.length;o>n;n++){if(r=i[n],!(r in a))return{};a=a[r]}return{val:a}},i={mustacheRender:function(e,t,n){if(null==n&&(n={}),null!=s)throw new Error("Cannot nest calls to mustacheRender");return u.render(function(){a=n,s=[t];try{e()}finally{s=null,a=null}})},mustacheVar:function(e){var t,n,i;if(null==s)throw new Error("Attempt to render a mustache template outside of a mustacheRender");for(t=s.length-1;t>=0;t+=-1)if(i=s[t],n=o(e,i),n.hasOwnProperty("val"))return r(n.val);return""},mustachePartial:function(e){if(null==a)throw new Error("Attempt to render a mustache template outside of a mustacheRender");if(!(e in a))throw new Error("Unregistered partial "+e);return a[e]()},mustacheBlock:function(e,t){var n,r,o,i,a;if(a=this.mustacheVar(e),!a)return"";if(i=void 0,Array.isArray(a))for(n=0,r=a.length;r>n;n++)o=a[n],s.push(o),t(),s.pop();else"object"==typeof a?(s.push(a),i=t(),s.pop()):i=t();return i},mustacheBlockInverted:function(e,t){var n;return n=this.mustacheVar(e),n?"":t()}},t.exports=e(264)(u,i)},{}],76:[function(e,t,n){var r;t.exports=r=function(){function e(){}return e.prototype.isOpen=function(){return this.get("closed")===!1},e}()},{}],77:[function(e,t,n){var r,o=function(e,t){function n(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},i={}.hasOwnProperty;t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(Error)},{}],78:[function(e,t,n){t.exports=function(e){return function(t,n){if(null==n&&(n="assertion failed"),!t)throw new e(n)}}},{}],79:[function(e,t,n){t.exports=e(78)(e(77))},{}],80:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v=[].slice;s=e(245),a=e(79),f=e(261),i=e("underscore"),c=function(e,t){var n,r,o,i;for(n=e,r=0,i=t.length;i>r;r++){if(o=t[r],!n.hasOwnProperty(o))return void 0;n=n[o]}return n},l=function(e,t){var n;return n=c(e,t),null==n?void 0:(a("string"==typeof n,"key "+t.join(".")+" did not resolve to a string"),n)},r=function(){function e(e){this.key=e}return e}(),o=function(){function e(e){this.value=e}return e}(),m=function(e){return e.split(/(\{[^{}]+\})/).map(function(e){return 0===e.length?null:"{"===e[0]?new r(e.substr(1,e.length-2)):new o(e)}).filter(s.id)},h=f(function(e){return e([String],s.method("split",".")),e([Array],s.id)}),u=function(e,t,n){var r;return t=h(t),r=l(e,t),null==r?void 0:m(r)},p=function(e,t){return e.map(s.choke(1,t))},d=function(e,t){return function(){var n,i;return i=arguments[0],n=2<=arguments.length?v.call(arguments,1):[],p(i,f(function(i){return i([r],function(e){var r;return r=e.key,t.apply(null,[r].concat(v.call(n)))}),i([o],function(t){var r;return r=t.value,e.apply(null,[r].concat(v.call(n)))})}))}},g=function(){var e,t,n,r,o;return r=arguments[0],n=arguments[1],o=arguments[2],e=4<=arguments.length?v.call(arguments,3):[],t=u(r,n),null==t?void 0:o.apply(null,[t].concat(v.call(e)))},t.exports={normalizeKeyPath:h,lookup:u,makeVisitor:d,visit:g}},{}],81:[function(e,t,n){var r;r=function(){function e(){this.browser=this.searchString(this.dataBrowser)||"unknown-browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknown-browser-version",this.OS=this.searchString(this.dataOS)||"unknown-os"}return e.prototype.searchString=function(e){var t,n,r;for(n=0,r=e.length;r>n;n++)if(t=e[n],this.versionSearchString=t.versionSearch||t.identity,t.string&&-1!==t.string.indexOf(t.subString)||t.prop)return t.identity},e.prototype.searchVersion=function(e){var t;return t=e.indexOf(this.versionSearchString),-1!==t?parseFloat(e.substring(t+this.versionSearchString.length+1)):void 0},e.prototype.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident/7",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],e.prototype.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],e}(),t.exports=new r},{}],82:[function(e,t,n){var r,o;r=e("jquery"),o=e(81),t.exports=new(function(){function e(){this.browserStr=o.browser.toLowerCase(),this.browserVersionStr=(o.browser+"-"+o.version).toLowerCase().replace(/\.\d+$/,""),this.osStr=o.OS.toLowerCase(),this.asString=this.browserStr+" "+this.browserVersionStr+" "+this.osStr,r(function(e){return function(){return r("body").addClass(e.asString)}}(this))}return e.prototype.isTouch=function(){return this.isAndroid()||this.isIos()},e.prototype.isAndroid=function(){return"android"===this.osStr},e.prototype.isIos=function(){var e;return"ipad"===(e=this.osStr)||"iphone"===e},e.prototype.isHighDPI=function(){return window.devicePixelRatio>1},e.prototype.isEmbeddedDocument=function(){return window.top!==window.self},e.prototype.allowsDynamicFavicon=function(){var e;return"chrome"===(e=this.browserStr)||"firefox"===e},e.prototype.respectsCrossDomainDownloadAttribute=function(){var e;return"chrome"===(e=this.browserStr)||"opera"===e},e.prototype.detectCustomWebkitScrollbars=function(){var e;try{return r("::-webkit-scrollbar"),e="body-webkit-scrollbars"}catch(t){return e="body-no-webkit-scrollbars"}finally{r("body").addClass(e)}},e}())},{}],83:[function(e,t,n){var r,o,i,a,s,u,c,l,d;r=e("jquery"),o=e(241),a=e(101),s=e(119),u=e(133),c=e("underscore"),d=e("moment"),l=e(104),t.exports=i={objToDate:function(e,t,n){var r;return c.isObject(e)&&(r=e,e=r.year,t=r.month,n=r.day),new Date(e,t-1,n)},dateToObj:function(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}},getStartOfWeek:function(e){return d(e).startOf("week").toDate()},getEndOfWeek:function(e){var t;return t=d(e).endOf("week"),6!==t.get("day")&&t.add(-1,"days").set("hour",23),t.toDate()},getDaysOfWeek:function(e){var t;return t=d(e).startOf("week"),[0,1,2,3,4,5,6].map(function(e){return t.clone().add(e,"days").toDate()})},getMidnightInt:function(e){return d(e).startOf("day").valueOf()},getFirstOfMonth:function(e){return d(e).startOf("month").toDate()},getLastOfMonth:function(e){return d(e).endOf("month").toDate()},isFirstOfMonth:function(e){return d(e).isSame(d(e).startOf("month"),"day")},isLastOfMonth:function(e){return d(e).isSame(d(e).endOf("month"),"day")},getDateDeltaString:function(e,t){return e=d(e),t=d(t),e.isSame(t,"day")?Math.abs(t.diff(e,"seconds"))<10?l("just now"):e.from(t):e.calendar(t)},getDaysUntil:function(e){var t;return e=d(i.dateToObj(e)),t=d(i.dateToObj(new Date)),e.diff(t,"days")},getDateWithSpecificTime:function(e,t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())},update:function(e){var t,n;t=new Date,n=function(n,o){return r(e).find(n).each(function(){var e,n,a;return e=r(this),n=e.data("date"),null==n&&(n=i.parse(e.attr("dt")),n=s.serverToClient(n),e.data("date",n)),a=i.getDateDeltaString(n,t),o(e,n,a)})},n(".js-date-title[dt]",function(e,t,n){e.attr("title",n)}),n(".date[dt], .date[data-date]",function(e,n,r){e.text(i.getDateDeltaString(n,t)),e.is("[title]")||e.attr("title",d(n).format("LLL"))})},parse:function(e){return null==e&&(e=""),d(e).toDate()},toDateString:function(e){var t,n,r;return e=d(e),r=d(),n=Math.abs(r.diff(e,"months"))>9,t=e.isSame(r,"year")&&!n,e.format(t?"llll":"ll")},validDate:function(e){return c.isDate(e)&&!isNaN(e.getTime())}},c.extend(i,o.Events)},{}],84:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=[].slice;i=e("underscore"),r=e(83),u=e(80),l=e(245),s=e(79),h=e(46),g={action:e("locale").actions,notification:e("locale").notifications},p=e(149),d=e(150),m=function(e,t,n){return null==n&&(n=!1),{type:"text",text:e,hideIfContext:n,idContext:t}},c=u.makeVisitor(m,function(e,t){return t.entities[e]}),f=u.makeVisitor(l.id,function(e,t){return t.hasOwnProperty(e)?t[e]:(h(new Error("substitution key "+e+" not found!")),"")}),v=function(e){var t,n,r,o,a;switch(t=i.clone(e),t.type){case"card":t.url=siteDomain+"/c/"+(null!=(n=t.shortLink)?n:t.id);break;case"board":t.url=siteDomain+"/b/"+(null!=(r=t.shortLink)?r:t.id);break;case"organization":t.url=siteDomain+"/"+(null!=(o=t.name)?o:t.id);break;case"enterprise":t.url=siteDomain+"/e/"+(null!=(a=t.name)?a:t.id)+"/admin";break;case"attachment":null!=t.url&&(t.isTrelloAttachment=p(t.url),t.isTrello=d(t.url))}return t},a=function(e,t){return function(n){return n.type===e?t(n):n}},t.exports=o=function(){function e(e){this.visit=l(u.visit,g[e])}var t;return t=function(e,t){var n,r,o;return o=[e.translationKey],null==t?o:(n=i.find(i.pairs(e.entities),function(e){var n,r;return r=e[0],n=e[1],n.id===t}),null!=n?(r=n[0],[[e.translationKey,r].join("@")].concat(b.call(o))):o)},e.prototype.getEntities=function(e,n){var r;return"unknown"===e.translationKey?[]:(r=i.chain(t(e,n)).map(function(t){return function(n){return t.visit(n,c,e)}}(this)).compact().first().value(),null==r?(h(new Error("display key '"+e.translationKey+"' not found!")),[]):r.map(a("translatable",this._textFromTranslatable.bind(this))).map(a("relDate",this._localizedRelDate.bind(this))).map(v))},e.prototype._format=function(e,t){return null==t&&(t={}),this.visit(e,f,t).join("")},e.prototype._textFromTranslatable=function(e){var t;return t=this._format(e.translationKey),m(t,e.idContext,e.hideIfContext)},e.prototype._localizedRelDate=function(e){return i.defaults({current:this.relDateText(e.date)},e)},e.prototype.relDateText=function(e,t){var n,o,i;return null==t&&(t=new Date),n=new Date(e),o=r.getDateDeltaString(n,t),i=n>t?"notification_is_due":"notification_was_due",this._format(i,{period:o})},e}()},{}],85:[function(e,t,n){var r,o,i,a,s;o=e("hearsay"),i=e("bluebird"),a=e(79),s=new o.Emitter,s.use(),r=function(){function e(e,t,n,r){this.error=e,this.url=null!=t?t:document.location.href,this.line=null!=n?n:0,this.col=null!=r?r:0,a(null!=this.error)}return e}(),window.onerror=function(e,t,n,o,i){return null==i&&(i=new Error(e)),s.send(new r(i,t,n,o))},i.onPossiblyUnhandledRejection(function(e){return s.send(new r(e))}),t.exports=s},{}],86:[function(e,t,n){var r,o,i,a;o=e("bluebird"),i=e("underscore"),a=e(79),t.exports=r=function(){function e(){}return e.prototype.listenToOnce=function(e,t,n){var r,o;return o=null,r=function(){return n.apply(this,arguments),o()},o=function(n){return function(){return n.stopListening(e,t,r)}}(this),this.listenTo(e,t,r)},e.prototype.waitForId=function(e,t){return this.waitForAttr(e,"id",t)},e.prototype.waitForAttr=function(e,t,n){var r;if(3!==arguments.length)throw new Error("Wrong number of arguments to waitForAttr");null!=(r=e.get(t))?n(r):this.listenToOnce(e,"change:"+t,function(r){return function(){return r.waitForAttr(e,t,n)}}(this))},e.prototype.waitForAttrs=function(e,t,n){var r;if(3!==arguments.length)throw new Error("Wrong number of arguments to waitForAttrs");return r=t.map(function(t){return function(n){return new o(function(r){return t.waitForAttr(e,n,r)})}}(this)),o.all(r).then(function(e){return i.object(i.zip(t,e))}).tap(n).done()},e}()},{}],87:[function(e,t,n){var r,o,i;r=e(35),o=function(){var e;return null!=(e=r.me().get("channels"))?e.active:void 0},i=function(){return window.locale.match(/^en/)},t.exports={allMembers:function(){return!0},alphaMembers:function(){return"alpha"===o()},englishMembers:function(){return i()},alphaEnglishMembers:function(){return i()&&"alpha"===o()},betaEnglishMembers:function(){return i()&&"beta"===o()}}},{}],88:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),u=e("underscore"),c=e(87),o=e(35),y=e(108),b=e(105),
k=e(53),a=b("SimpleTest",["InvalidExperimentName","InvalidExperimentAllocation"]),s=["npsSurveyV3","nuxBannersV2","powerUpRequestCTAV2","teamMemberTabLayoutV1"],_={},i=1e3,h=function(e,t){return t&&(e+=t),parseInt(y(e).slice(0,8),16)},C=function(e){var t,n;return t=e.defaultWeight,n=e.variations,[{name:"control",weight:null!=t?t:t=1}].concat(n)},w=function(e,t){return u.find(C(e),{name:t})},g=function(e){var t,n;return t=C(e),n=t.filter(function(e){return e.weight>0}).reduce(function(e,t){return t.cumlWeight=t.weight+(null!=u.last(e)?u.last(e).cumlWeight:0),e.concat(t)},[])},l=function(e){var t;return t=e.audiences,t?t.some(function(e){return c[e]()}):!0},p=function(e){var t;return t=e.experimentAllocation,u.isNumber(t)?t:u.chain(t).pairs().map(function(e){return function(e){var t,n;return n=e[0],t=e[1],c[n]()?t:0}}(this)).max().value()},d=function(e){var t,n,r;return r=e.test,n=e.selectedVariation,t=e.identifier,{track:function(){return k(r.name+r.experimentVersion,null!=n?n.name:void 0,t)},inExperiment:null!=n,get:function(e){var t,o,i;return"variation"===e?null!=(t=null!=n?n.name:void 0)?t:"control":(null!=n&&null!=(o=n.values)?o.hasOwnProperty(e):void 0)?n.values[e]:(null!=(i=r.defaults)?i.hasOwnProperty(e):void 0)?r.defaults[e]:null}}},v=function(e,t){var n;return n=h(e.name+e.experimentVersion,"in"+t)%i,n<=p(e)*i},f={v1:function(e,t){var n,r,o,i;return i=g(e),r=Math.floor(u.last(i).cumlWeight/p(e)*100),n=h(e.name+e.experimentVersion,t)%r,o=u.find(i,function(e){return 100*e.cumlWeight>=n})},v2:function(e,t){var n,r,o,a;return a=g(e),v(e,t)?(o=h(e.name+e.experimentVersion,"variation"+t)%i,n=u.last(a).cumlWeight,r=u.find(a,function(e){return e.cumlWeight/n*i>=o})):void 0}},m=function(e,t){var n,o,i,c,p,h,m,g,v;if(v=null!=(c=window.abTests)?c[e]:void 0,!v)throw a.InvalidExperimentName();if(null==v.name&&(v.name=e),v.experimentVersion=null!=(p=null!=(h=v.experimentVersion)?h.toUpperCase():void 0)?p:"",null==v.experimentAllocation&&(v.experimentAllocation=1),u.isNumber(v.experimentAllocation)){if(v.experimentAllocation>1||v.experimentAllocation<0)throw a.InvalidExperimentAllocation()}else if(u.isObject(v.experimentAllocation)&&u.any(u.values(v.experimentAllocation),function(e){return function(e){return!(e>=0&&1>=e)}}(this)))throw a.InvalidExperimentAllocation();return i=r.cookie("force_"+v.name),m=v.name+v.experimentVersion,n=x.call(s,m)>=0?"v1":"v2",g=i?w(v,i):l(v)?f[n](v,t):void 0,o=d({test:v,selectedVariation:g,identifier:t}),null!=g&&v.autoTrack===!0&&o.track(),o},t.exports=function(e,t){var n;return t=null!=t?t:o.me().id,n=u.compact([e,t]).join(":"),null!=_[n]?_[n]:_[n]=m(e,t)}},{}],89:[function(e,t,n){var r,o,i,a,s,u,c;r=e("jquery"),o=e(15),i=e(82),s=e(133),u=e("underscore"),c=e(108),a=e("bluebird"),t.exports=new(function(){function e(){this.settings={},this._update=u.debounce(this._update,100).bind(this),this._hasher=u.memoize(c)}var t;return t=function(e,t,n,r,o,i,a,s){return null==s&&(s=!0),null==i&&(i=5),e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+r-i,n),e.quadraticCurveTo(t+r,n,t+r,n+i),e.lineTo(t+r,n+o-i),e.quadraticCurveTo(t+r,n+o,t+r-i,n+o),e.lineTo(t+i,n+o),e.quadraticCurveTo(t,n+o,t,n+o-i),e.lineTo(t,n+i),e.quadraticCurveTo(t,n,t+i,n),e.closePath(),s&&e.stroke(),a?e.fill():void 0},e.prototype.drawFavicon=function(e){var n,r,i,a,s,u,c;if(n=document.createElement("canvas"),n.width=n.height=64,null==(r="function"==typeof n.getContext?n.getContext("2d"):void 0))throw Error("Can't render to the canvas!");return r.save(),null!=e?(t(r,0,0,64,64,8,!1,!1),r.clip(),this.settings.tiled?r.drawImage(e,0,0):(c=e.width,a=e.height,c>a?r.drawImage(e,0,0,64*c/a,64):r.drawImage(e,0,0,64,64*a/c))):(this.settings.useDefault?(i=r.createLinearGradient(0,0,0,32),i.addColorStop(0,"#298FCA"),i.addColorStop(1,"#0079BF"),r.fillStyle=i):r.fillStyle=null!=(u=this.settings.color)?u:o.blue.color,t(r,0,0,64,64,12,!0)),r.fillStyle="#fff",t(r,9,9,19,44,6,!0),t(r,36,9,19,29,6,!0),r.restore(),this.settings.hasNotifications&&(s=15,r.beginPath(),r.arc(64-s,s,s,0,2*Math.PI,!1),r.fillStyle="#EB5A46",r.fill(),r.lineWidth=4,r.strokeStyle="#FFFFFF",r.stroke(),r.closePath()),n.toDataURL("image/png")},e.prototype._update=function(){return i.allowsDynamicFavicon()?a.try(function(e){return function(){return null!=e.settings.url?new a(function(t,n){var r;return r=document.createElement("img"),r.setAttribute("crossorigin","anonymous"),r.onload=function(){return t(r)},r.onerror=function(e){return n(e)},r.src=e.settings.url+"?favicon"}):void 0}}(this)).then(function(e){return function(t){var n;return n=e.drawFavicon(t),r("#favicon").remove(),r("<link>").attr({id:"favicon",rel:"icon",type:"image/png",sizes:"64x64",href:n}).appendTo("head")}}(this)).catch(function(){}).done():void 0},e.prototype.setNotifications=function(e){return this.settings.hasNotifications=e,this._update()},e.prototype.setBackground=function(e){var t,n,r,o;return r=e.url,n=e.tiled,t=e.color,o=e.useDefault,this.settings.url=r,this.settings.tiled=n,this.settings.color=t,this.settings.useDefault=o,this._update()},e}())},{}],90:[function(e,t,n){var r,o,i,a,s=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("underscore"),i=e(79),a=e(245),t.exports=r=function(){function e(e,t){var n,r,a,s;null==t&&(t={}),this.products={},this.prices={},this.intervals={},this.productShortNames={},this.prebilledProducts={},this.productFeatures={},this.perUserProducts={},this.perActiveUserProducts={},this.purchaseOrderProducts={},this.globalFeatures=null!=(a=t.globalFeatures)?a:[],this.upgradeProducts=[],this.yearlyEquivalents={},i(t.currentProducts),this.currentProducts=t.currentProducts,o.extend(this,t.extras);for(n in e)s=e[n],r=parseInt(n,10),s=o.extend({interval:"monthly",hidden:!1,prebill:!0,perUser:!1,features:[],upgrade:!1},s),this.products[r]=s.name,s.hidden||(this.productShortNames[s.shortName]=r),this.prebilledProducts[r]=s.prebill,this.perUserProducts[r]=s.perUser,this.perActiveUserProducts[r]=s.perActiveUser,this.productFeatures[r]=s.features,this.prices[r]=s.price,this.intervals[r]=s.interval,this.upgradeProducts[r]=s.upgrade,this.yearlyEquivalents[r]=s.yearlyEquivalent,this.purchaseOrderProducts[r]=s.purchaseOrder}return e.prototype._convertToId=function(e){return o.isString(e)?/^\d+$/.test(e)?parseInt(e,10):this.productShortNames[e]:e},e.prototype.getProductNumber=function(e){return this._convertToId(e)},e.prototype.getPrice=function(e){return this.prices[this._convertToId(e)]},e.prototype.getInterval=function(e){return this.intervals[this._convertToId(e)]},e.prototype.isMonthly=function(e){return"monthly"===this.getInterval(e)},e.prototype.isYearly=function(e){return"yearly"===this.getInterval(e)},e.prototype.isPerActiveUser=function(e){return this.perActiveUserProducts[this._convertToId(e)]},e.prototype.isPerUser=function(e){return this.perUserProducts[this._convertToId(e)]},e.prototype.isPrebilled=function(e){return this.prebilledProducts[this._convertToId(e)]},e.prototype.isUpgrade=function(e){return this.upgradeProducts[this._convertToId(e)]},e.prototype.usesPurchaseOrder=function(e){return this.purchaseOrderProducts[this._convertToId(e)]},e.prototype.getYearlyEquivalent=function(e){return this.yearlyEquivalents[this._convertToId(e)]},e.prototype.getYearlyDiscountPercent=function(e,t){var n,r;return r=this.getPrice(e),n=12*this.getPrice(t),Math.round(100*(n-r)/n)},e.prototype.features=function(e){return null==e&&(e=[]),o.chain(e).map(a.lookup(this.productFeatures)).tap(function(t){return i(o.all(t,a.id),"FeatureSet::features called on an unrecognized product: "+e)}).flatten().unique().value()},e.prototype.hasProduct=function(e){return null==e&&(e=[]),o.any(e,function(e){return function(t){return t in e.products}}(this))},e.prototype.isFeatureEnabled=function(e,t){return s.call(this.globalFeatures,e)>=0||s.call(this.features(t),e)>=0},e}()},{}],91:[function(e,t,n){var r,o,i;r=e("underscore"),i=e(121),o=e(34),t.exports=r.filter(o,function(e){return i(["templates","tips",e.id])?e.langs?r.contains(e.langs,window.locale):!0:!1})},{}],92:[function(e,t,n){t.exports={number:e(94),taxRate:e(96),percentage:e(95),money:e(93)}},{}],93:[function(e,t,n){var r,o,i;r=e("intl"),i=e(38).locales,o=null,t.exports=function(e,t){return null==o&&(o=new r.NumberFormat(i[0],{minimumFractionDigits:2,maximumFractionDigits:2})),t?o.format(e):o.format(Math.floor(100*e)/100)}},{}],94:[function(e,t,n){var r,o,i;r=e("intl"),i=e(38).locales,o=null,t.exports=function(e){return null==o&&(o=new r.NumberFormat(i[0])),o.format(e)}},{}],95:[function(e,t,n){var r,o,i;r=e("intl"),i=e(38).locales,o=null,t.exports=function(e){return null==o&&(o=new r.NumberFormat(i[0],{style:"percent"})),o.format(e)}},{}],96:[function(e,t,n){var r,o,i;r=e("intl"),i=e(38).locales,o=null,t.exports=function(e){return null==o&&(o=new r.NumberFormat(i[0],{style:"percent",minimumFractionDigits:4,maximumFractionDigits:4})),o.format(e)}},{}],97:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e("jquery"),o=e(241),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.loadedAuth=function(){var e;return null!=(e=window.gapi)?e.load("auth",function(e){return function(){return e.loaded=!0,e.trigger("loaded"),e.authorize(!0)}}(this)):void 0},t.authorize=function(e,t){return this.validToken()?"function"==typeof t?t(null,this.oauthToken.access_token):void 0:gapi.auth.authorize({client_id:window.googleDriveClientId,scope:"https://www.googleapis.com/auth/drive.readonly",immediate:e},function(e){return function(n){var r;return!n||n.error?(e.oauthToken=null,"function"==typeof t?t(null!=(r=null!=n?n.error:void 0)?r:Error("Failed to request token")):void 0):(e.oauthToken=n,"function"==typeof t?t(null,e.oauthToken.access_token):void 0)}}(this))},t.validToken=function(){var e;return(null!=(e=this.oauthToken)?e.access_token:void 0)&&Date.now()/1e3<parseInt(this.oauthToken.expires_at)},t}(o.Events)},{}],98:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=[].slice;i=e(221),a=e(222),s=e(35),c=e(40),l=e("bluebird"),d=e(118),p=e("underscore"),o="autoJoinQueue",r="any",u=function(){function e(){}return e.prototype.getQueue=function(){var e;return null!=(e=d.get(o))?e:[]},e.prototype.setQueue=function(e){return d.set(o,e)},e.prototype.clearQueue=function(){return d.unset(o)},e.prototype._idMember=function(){return s.isLoggedIn()?s.myId():r},e.prototype._entryForUrl=function(e){return{url:e,idMember:this._idMember()}},e.prototype._matchesMember=function(e){return e===r||e===s.myId()},e.prototype.add=function(e){var t;return t=this.getQueue(),p.any(t,function(t){return function(n){return n.url===e&&t._matchesMember(n.id)}}(this))?void 0:this.setQueue(h.call(t).concat([this._entryForUrl(e)]))},e.prototype.inQueue=function(e){return p.any(this.getQueue(),function(t){return function(n){return n.url===e&&t._matchesMember(n.idMember)}}(this))},e.prototype.autoJoin=function(){var e;return e=this.getQueue(),0!==e.length&&s.isLoggedIn()?null!=this._runOnce?this._runOnce:this._runOnce=c.await("headerData").then(function(t){return function(){return s.me().get("confirmed")?l.map(e,function(e){var n,r,o;return o=e.url,r=e.target,n=e.idMember,t._matchesMember(n)?a({method:"post",url:o}).then(function(){return null}).catch(i,function(){return null}):e}).then(function(n){return n=p.compact(n),0===n.length?t.clearQueue():t.setQueue(n),n.length<e.length}):!1}}(this)):l.resolve(!1)},e}(),t.exports=new u},{}],99:[function(e,t,n){var r,o;r=e("jquery"),o=e(104),r.fn.format=function(e,t){return this.text(o(e,t,{raw:!0})),this},r.fn.formatHtml=function(e,t){return this.html(o(e,t)),this}},{}],100:[function(e,t,n){var r,o,i,a;i=e(22),r=e(20),o=e(21),a=e(29),t.exports={getKey:function(e){var t,n,s;switch(e.type){case"keydown":case"keyup":return null!=(n=o[e.which])?i[n]:i.Unknown;case"keypress":return null!=(t=null!=(s=r[e.which])?s:a[e.which])?i[t]:i.Unknown;default:throw Error("Can't getKey for this event")}},isArrow:function(e){return e===i.ArrowLeft||e===i.ArrowRight||e===i.ArrowUp||e===i.ArrowDown},isSubmitEvent:function(e){var t;if("keydown"!==e.type)throw Error("Checking for submit only works on keydown");return(t=this.getKey(e))===i.Enter||t===i.LineFeed},isForceSubmitEvent:function(e){return this.isSubmitEvent(e)&&(e.ctrlKey||e.metaKey)&&!e.shiftKey}}},{}],101:[function(e,t,n){var r,o,i,a,s,u,c,l,d=[].slice;r=e("jquery"),o=e("underscore"),i=e(245),a=function(e){return e.toLowerCase().split("-")},s=function(e,t){var n,r;return n=a(e),r=a(t),o.all(r,function(e,t){return n[t]===e})},u=function(e){var t,n,r,o;return e=e.split("@")[0],e=e.split(".")[0],t=e.split(/[-_]/),1===t.length?t[0]:(n=t[0],r=t[1],o=3<=t.length?d.call(t,2):[],[n,r.toUpperCase()].concat(d.call(o)).join("-"))},c=o.chain([r.cookie("lang"),navigator.language].concat(d.call(null!=(l=navigator.languages)?l:[]),[navigator.userLanguage],[navigator.browserLanguage],["en-GB"])).compact().map(function(e){return u(e)}).unique().value(),t.exports={preferred:c,matches:s,normalizeLocale:u,is:function(e){return s(c[0],e)},mostPreferred:function(e,t){return o.chain(e).map(function(e){return o.find(t,i(s,e))}).compact().first().value()}}},{}],102:[function(e,t,n){var r,o,i,a;a=e(121),i=e(104),r=e("underscore"),o=e("locale").counting,t.exports=function(e,t,n){var i;return null==n&&(n={}),i=r.extend({count:String(t)},n),a(["counts",e,o(t)],i)}},{}],103:[function(e,t,n){var r,o,i;r=e("underscore"),o=e(121),i=function(e){try{return JSON.parse(e).message}catch(e){return null}},t.exports=function(e){var t,n;return t=r.isString(e)?i(e)||e:null!=(null!=(n=e.responseJSON)?n.message:void 0)?e.responseJSON.message:null!=e.message?i(e.message)||e.message:e.responseText,o(["server error",t])||t}},{}],104:[function(e,t,n){var r,o;o=e(121),r=e(79),t.exports=function(e,t,n){var i;return i=o(e,t,n),r("string"==typeof i,"babble: key "+e+" not found"),i}},{}],105:[function(e,t,n){var r,o,i,a;i=e(253),r=e("underscore"),o=e(79),a="Error",t.exports=function(e,t){var n,r,s,u;for(n=i([e,a].join("::")),r=0,s=t.length;s>r;r++)u=t[r],o(u!==a,u+" is the reserved base name!"),o(!(u in n),"You can't use "+u+" as the name of a custom error"),n[u]=i([e,u].join("::"),{},n);return n}},{}],106:[function(e,t,n){var r;r=e(107),t.exports=new(function(){function e(){}return e.prototype.markdownAsHtml=function(e,t){return null==t&&(t={}),null==e&&(e=""),""===e?e:r.description.format(e,t).output},e.prototype.bytes=function(e){var t,n,r,o,i,a,s;if(null==e)return"Unknown Size";for(s=["B","KB","MB","GB"],t=e,r=n=0,o=s.length;o>n;r=++n){if(a=s[r],1024>t||r===s.length-1)return i=Math.round(100*t)/100,i+" "+a;t/=1024}return"unknown"},e}())},{}],107:[function(e,t,n){var r,o,i,a,s,u,c,l;r=e(35),o=e(167),i=e(7),a=e(39),u=e("trello-markdown"),c=e(133),l=e("underscore"),s=e("emoji-map"),t.exports=window.TFM=new(function(){function e(){var e;e={lookupEmoji:this.lookupEmoji,lookupCardInfo:this.lookupCardInfo,lookupMember:this.lookupMember},e.shouldOpenLinkInNewTab=c.isExternalURL,this.description=new u(e),this.comments=new u(l.extend({restrict:{block:["blockquote","code","fencedCode","hr","list","newline","paragraph"],inline:["atMention","autolink","break","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},e)),this.checkItems=new u(l.extend({inlineOnly:!0,restrict:{inline:["atMention","autolink","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},e))}return e.prototype.lookupEmoji=function(e,t){var n,r,o;return e=e.toLowerCase(),null!=(n=null!=(r=t.textData)&&null!=(o=r.emoji)?o[e]:void 0)?n:s[e]},e.prototype.lookupMember=function(e,t){var n,o,i,s;return e=e.toLowerCase(),"card"===e||"board"===e?[e,!0]:(o=function(){return a.findOne("Member","username",e)},n=function(){return a.findOne("Member",function(t){var n;return n=t.get("fullName"),n?l.chain(n.toLowerCase().split(/\s+/)).filter(function(e){return e.length>=2}).contains(e).value():!1})},i=null!=(s=o())?s:n(),null!=i?[i.get("fullName"),r.isMe(i)]:/^[a-z0-9_]{3,}/.test(e)?[e,!1]:[null,!1])},e.prototype.lookupCardInfo=function(e,t){var n,r,o,s,u;return e=parseInt(e,10),s=null!=t&&null!=(u=t.board)?u.id:void 0,null==s&&null!=(o=i.getCurrentBoard())&&(s=o.id),n=a.findOne("Card",function(t){return t.get("idBoard")===s&&t.get("idShort")===e}),null!=n?{title:n.get("name"),url:i.getCardUrl(n)}:(r="Card "+e,{title:r,url:i.getCardUrlWithoutModels(s,e,r)})},e}())},{}],108:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v;s=0,a=function(e){return m(f(v(e)))},f=function(e){return r(o(h(e),8*e.length))},m=function(e){var t,n,r,o,i;try{}catch(e){t=e,s=0}for(n=s?"0123456789ABCDEF":"0123456789abcdef",o="",i=void 0,r=0;r<e.length;)i=e.charCodeAt(r),o+=n.charAt(i>>>4&15)+n.charAt(15&i),r++;return o},v=function(e){var t,n,r,o;for(n="",t=-1,r=void 0,o=void 0;++t<e.length;)r=e.charCodeAt(t),o=t+1<e.length?e.charCodeAt(t+1):0,r>=55296&&56319>=r&&o>=56320&&57343>=o&&(r=65536+((1023&r)<<10)+(1023&o),t++),127>=r?n+=String.fromCharCode(r):2047>=r?n+=String.fromCharCode(192|r>>>6&31,128|63&r):65535>=r?n+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|63&r):2097151>=r&&(n+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|63&r));return n},h=function(e){var t,n;for(n=Array(e.length>>2),t=0;t<n.length;)n[t]=0,t++;for(t=0;t<8*e.length;)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32,t+=8;return n},r=function(e){var t,n;for(n="",t=0;t<32*e.length;)n+=String.fromCharCode(e[t>>5]>>>t%32&255),t+=8;return n},o=function(e,t){var n,r,o,i,a,s,u,h,m;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,n=1732584193,r=-271733879,o=-1732584194,i=271733878,a=0;a<e.length;)s=n,u=r,h=o,m=i,n=c(n,r,o,i,e[a+0],7,-680876936),i=c(i,n,r,o,e[a+1],12,-389564586),o=c(o,i,n,r,e[a+2],17,606105819),r=c(r,o,i,n,e[a+3],22,-1044525330),n=c(n,r,o,i,e[a+4],7,-176418897),i=c(i,n,r,o,e[a+5],12,1200080426),o=c(o,i,n,r,e[a+6],17,-1473231341),r=c(r,o,i,n,e[a+7],22,-45705983),n=c(n,r,o,i,e[a+8],7,1770035416),i=c(i,n,r,o,e[a+9],12,-1958414417),o=c(o,i,n,r,e[a+10],17,-42063),r=c(r,o,i,n,e[a+11],22,-1990404162),n=c(n,r,o,i,e[a+12],7,1804603682),i=c(i,n,r,o,e[a+13],12,-40341101),o=c(o,i,n,r,e[a+14],17,-1502002290),r=c(r,o,i,n,e[a+15],22,1236535329),n=l(n,r,o,i,e[a+1],5,-165796510),i=l(i,n,r,o,e[a+6],9,-1069501632),o=l(o,i,n,r,e[a+11],14,643717713),r=l(r,o,i,n,e[a+0],20,-373897302),n=l(n,r,o,i,e[a+5],5,-701558691),i=l(i,n,r,o,e[a+10],9,38016083),o=l(o,i,n,r,e[a+15],14,-660478335),r=l(r,o,i,n,e[a+4],20,-405537848),n=l(n,r,o,i,e[a+9],5,568446438),i=l(i,n,r,o,e[a+14],9,-1019803690),o=l(o,i,n,r,e[a+3],14,-187363961),r=l(r,o,i,n,e[a+8],20,1163531501),n=l(n,r,o,i,e[a+13],5,-1444681467),i=l(i,n,r,o,e[a+2],9,-51403784),o=l(o,i,n,r,e[a+7],14,1735328473),r=l(r,o,i,n,e[a+12],20,-1926607734),n=d(n,r,o,i,e[a+5],4,-378558),i=d(i,n,r,o,e[a+8],11,-2022574463),o=d(o,i,n,r,e[a+11],16,1839030562),r=d(r,o,i,n,e[a+14],23,-35309556),n=d(n,r,o,i,e[a+1],4,-1530992060),i=d(i,n,r,o,e[a+4],11,1272893353),o=d(o,i,n,r,e[a+7],16,-155497632),r=d(r,o,i,n,e[a+10],23,-1094730640),n=d(n,r,o,i,e[a+13],4,681279174),i=d(i,n,r,o,e[a+0],11,-358537222),o=d(o,i,n,r,e[a+3],16,-722521979),r=d(r,o,i,n,e[a+6],23,76029189),n=d(n,r,o,i,e[a+9],4,-640364487),i=d(i,n,r,o,e[a+12],11,-421815835),o=d(o,i,n,r,e[a+15],16,530742520),r=d(r,o,i,n,e[a+2],23,-995338651),n=p(n,r,o,i,e[a+0],6,-198630844),i=p(i,n,r,o,e[a+7],10,1126891415),o=p(o,i,n,r,e[a+14],15,-1416354905),r=p(r,o,i,n,e[a+5],21,-57434055),n=p(n,r,o,i,e[a+12],6,1700485571),i=p(i,n,r,o,e[a+3],10,-1894986606),o=p(o,i,n,r,e[a+10],15,-1051523),r=p(r,o,i,n,e[a+1],21,-2054922799),n=p(n,r,o,i,e[a+8],6,1873313359),i=p(i,n,r,o,e[a+15],10,-30611744),o=p(o,i,n,r,e[a+6],15,-1560198380),r=p(r,o,i,n,e[a+13],21,1309151649),n=p(n,r,o,i,e[a+4],6,-145523070),i=p(i,n,r,o,e[a+11],10,-1120210379),o=p(o,i,n,r,e[a+2],15,718787259),r=p(r,o,i,n,e[a+9],21,-343485551),n=g(n,s),r=g(r,u),o=g(o,h),i=g(i,m),a+=16;return Array(n,r,o,i)},u=function(e,t,n,r,o,a){return g(i(g(g(t,e),g(r,a)),o),n)},c=function(e,t,n,r,o,i,a){return u(t&n|~t&r,e,t,o,i,a)},l=function(e,t,n,r,o,i,a){return u(t&r|n&~r,e,t,o,i,a)},d=function(e,t,n,r,o,i,a){return u(t^n^r,e,t,o,i,a)},p=function(e,t,n,r,o,i,a){return u(n^(t|~r),e,t,o,i,a)},g=function(e,t){var n,r;return n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16),r<<16|65535&n},i=function(e,t){return e<<t|e>>>32-t},t.exports=a},{}],109:[function(e,t,n){var r=[].slice;t.exports=function(){var e,t,n,o,i,a,s,u,c;for(s=2<=arguments.length?r.call(arguments,0,t=arguments.length-1):(t=0,[]),e=arguments[t++],n=0,i=s.length;i>n;n++){a=s[n],u=a.prototype;for(o in u)c=u[o],e.prototype[o]=c}return e}},{}],110:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h;r=e("jquery"),o=e(241),a=e(118),s=e("underscore"),c=0,d=window.sessionStorage,p=null!=(l=null!=d?d.status:void 0)?l:"active",u=null,h=null,"undefined"!=typeof document.hidden?(u="hidden",h="visibilitychange"):"undefined"!=typeof document.mozHidden?(u="mozHidden",h="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(u="msHidden",h="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(u="webkitHidden",h="webkitvisibilitychange"),t.exports=i={init:function(){setInterval(i.check,1e4),r(window).focus(function(){return i.addActivity()}),r(document).bind("keydown mousedown",function(){i.addActivity()}),i.getHidden=null!=u?function(){return document[u]}:function(){return!1},null!=h&&r(document).bind(h,function(e){return function(){return i.trigger("visibilitychange")}}(this))},addActivity:function(){var e;e=(new Date).getTime(),c=e,a.set("lastActivity",c),i.setStatus("active")},check:function(){var e;e=(new Date).getTime()-Math.max(c,a.enabled()?parseInt(a.get("lastActivity")):0),e>3e5&&i.setStatus("idle")},setStatus:function(e){e!==p&&(p=e,d&&(d.status=p),i.trigger("setStatus",p))},getStatus:function(){return p}},s.extend(i,o.Events)},{}],111:[function(e,t,n){var r,o,i,a,s;r=e("jquery"),o=e("react"),i=e("react-dom"),a=e(547),s=e("underscore"),t.exports=o.createClass({displayName:"Wrapper",componentWillMount:function(){var e;return"function"==typeof(e=this.props.view).getData?e.getData():void 0},componentDidMount:function(){var e,t;return t=i.findDOMNode(this),e=this.props.view.render().el,r(t).append(e),a.addHandler(this.props.view,{scope:"popover_view"})},componentWillUnmount:function(){return a.removeHandler(this.props.view)},render:function(){return o.createElement("div",s.pick(this.props,["className"]))}})},{}],112:[function(e,t,n){var r,o,i;r=e("hearsay"),i=e("xtend"),o=e(245),t.exports=i(r.mixin,{componentWillUnmount:function(){return this.unsubscribe()},syncState:function(e){return this.subscribe(e,o(this,"setState"))}})},{}],113:[function(e,t,n){var r,o;r=e("react"),o=e("xtend"),t.exports=function(e,t){return null==t&&(t={}),function(n){return r.createElement(e,o(t,n))}}},{}],114:[function(e,t,n){var r,o,i,a,s=[].slice;i=e(118),a=e("underscore"),r=10,o=function(){function e(){}return e.prototype._getKey=function(e){return"recent_"+e},e.prototype.add=function(e,t){var n,o;return n=this.get(e),o=a.chain([t].concat(s.call(n))).uniq().first(r).value(),i.set(this._getKey(e),o)},e.prototype.get=function(e,t){var n;return null==t&&(t=r),a.first(null!=(n=i.get(this._getKey(e)))?n:[],t)},e}(),t.exports=new o},{}],115:[function(e,t,n){var r,o,i=[].slice;o=e("underscore"),t.exports=r=function(){function e(){}return e.prototype.setTimeout=function(e,t){var n;return null==this._scheduled_timeouts&&(this._scheduled_timeouts=[]),this._scheduled_timeouts.push(n=setTimeout(e,t)),n},e.prototype.setInterval=function(e,t){var n;return null==this._scheduled_intervals&&(this._scheduled_intervals=[]),this._scheduled_intervals.push(n=setInterval(e,t)),n},e.prototype.requestAnimationFrame=function(e){var t;return null==this._scheduled_frameRequests&&(this._scheduled_frameRequests=[]),this._scheduled_frameRequests.push(t=requestAnimationFrame(e)),t},e.prototype.callback=function(e){var t;return t=null!=this._scheduled_callbacks?this._scheduled_callbacks:this._scheduled_callbacks=[],this._scheduled_callbacks.push(e),function(){var n,r;return n=1<=arguments.length?i.call(arguments,0):[],r=t.indexOf(e),-1!==r?(t.splice(r,1),e.apply(this,n)):void 0}},e.prototype.cancelScheduled=function(){var e,t,n,r,o,i,a,s,u,c,l,d,p;if(null!=this._scheduled_callbacks)for(;this._scheduled_callbacks.length;)this._scheduled_callbacks.pop();if(null!=this._scheduled_intervals)for(u=this._scheduled_intervals,t=0,i=u.length;i>t;t++)n=u[t],clearInterval(n);if(null!=this._scheduled_timeouts)for(c=this._scheduled_timeouts,r=0,a=c.length;a>r;r++)p=c[r],clearTimeout(p);if(null!=this._scheduled_frameRequests)for(d=null!=(l=this._scheduled_frameRequests)?l:[],o=0,s=d.length;s>o;o++)e=d[o],cancelAnimationFrame(e)},e.prototype.defer=function(e){return this.setTimeout(e,1)},e.prototype.debounce=function(e,t){return null==t&&(t=1),this.dynamicDebounce(e,function(){return t})},e.prototype.dynamicDebounce=function(e,t){var n,r;return n=this.setTimeout.bind(this),r=null,function(){var o,i;o=arguments,i=function(t){return function(){r=null,e.apply(t,o)}}(this),clearTimeout(r),r=n(i,t.apply(this,o))}},e.prototype.throttle=function(e,t,n){var r,i,a,s,u,c,l,d,p,h,m;return null==n&&(n={}),i=r=d=h=null,s=null!=(c=n.leading)?c:!0,m=null!=(l=n.trailing)?l:!0,p=this.setTimeout.bind(this),u=null,a=function(){return u=s?o.now():0,h=null,d=e.apply(i,r),i=r=null},function(){var n,c;return n=o.now(),null!=u||s||(u=n),c=t-(n-u),i=this,r=arguments,0>=c?(clearTimeout(h),h=null,u=n,d=e.apply(i,r),i=r=null):!h&&m&&(h=p(a,c)),d}},e}()},{}],116:[function(e,t,n){t.exports=e(117)(window.sessionStorage)},{}],117:[function(e,t,n){t.exports=function(e){return{enabled:function(){return null!=e},set:function(t,n){try{return null!=e?e[t]=JSON.stringify(n):void 0}catch(e){}},get:function(e){var t,n;if(n=this.getRaw(e),!n)return null;try{return JSON.parse(n)}catch(e){return t=e,null}},getRaw:function(t){return null!=e?e[t]:void 0},unset:function(t){return null!=this.getRaw(t)&&null!=e?delete e[t]:void 0}}}},{}],118:[function(e,t,n){t.exports=e(117)(window.localStorage)},{}],119:[function(e,t,n){var r,o;r=e(118),o=e(48),t.exports=new(function(){function e(){}return e.prototype.delta=r.get("serverTimeDelta"),e.prototype.updateServerTime=function(e){return this.delta=new Date(e)-new Date,r.set("serverTimeDelta",this.delta),o("time","delta",this.delta)},e.prototype.serverToClient=function(e){return new Date(new Date(e)-this.delta)},e}())},{}],120:[function(e,t,n){var r,o,i,a,s,u,c,l,d;r=e("jquery"),u=e("underscore"),o=e(241),c=e(148),l=e(520).getTypes,d=e(140),i=e(100),a=e(22),s=function(){function e(){this.value="",r(document).keydown(function(e){return function(t){var n,o,s;if(n=i.getKey(t),e.value&&(t.ctrlKey||t.metaKey)){if(r(t.target).is("#clipboard"))return void(n===a.C&&e.clearCut());if(!r(t.target).is("input:visible,textarea:visible")&&!(("function"==typeof window.getSelection&&null!=(o=window.getSelection())?o.toString():0)||(null!=(s=document.selection)?s.createRange().text:0)))return u.defer(function(){var t;return t=r("#clipboard-container"),t.empty().show(),r('<div id="clipboard" contenteditable="true"></div>').text(e.value).appendTo(t).focus().select(),d(document.getElementById("clipboard"))})}}}(this)),r(document).keyup(function(e){return function(t){var n;return e.isClipboard(t.target)&&(n=r("#clipboard").text(),""===n&&e.setCut(e.value)),e.checkForPastedImage()}}(this)),r(document).on("paste",function(e){return function(t){return u.isEmpty(l(t))||e.cancelPasteImage(),setTimeout(e.clearCut.bind(e),1)}}(this))}return e.prototype.set=function(e){this.value=e},e.prototype.setCut=function(e){try{localStorage.cut=e}catch(e){}},e.prototype.getCut=function(){try{return localStorage.cut}catch(e){}return null},e.prototype.clearCut=function(){try{delete localStorage.cut}catch(e){}},e.prototype.isCut=function(e){return e===this.getCut()},e.prototype.isClipboard=function(e){return"clipboard"===e.id},e.prototype.clear=function(){return r("#clipboard-container").empty().hide()},e.prototype.checkForPastedImage=function(){return clearTimeout(this.pasteImageTimeout),this.pasteImageTimeout=setTimeout(function(e){return function(){var t,n;t=r("#clipboard-container").find("img"),e.clear(),t.length>0&&(n=t.attr("src"),/^data:/.test(n)&&e.trigger("pasteImage",c(n)))}}(this),1)},e.prototype.cancelPasteImage=function(){return clearTimeout(this.pasteImageTimeout),this.clear()},e}(),u.extend(s.prototype,o.Events),t.exports=new s},{}],121:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m;u=e(38).locales,i=e(80),c=e(261),a=e(245),o=e(79),r=e("underscore"),d=r.clone(e("locale").strings),l=r.pick(e("locale"),"axis","exports","labels","templates","billing");for(s in l)p=l[s],o(!(s in d)),d[s]=p;m=i.makeVisitor(a.id,function(e,t,n){return null==n&&(n={}),o(t.hasOwnProperty(e),"'"+e+"' not found in "+JSON.stringify(t)),p=t[e],o("string"==typeof p,"I don't know how to convert values into strings. Please use a localized conversion function and pass me the string result."),n.raw?p:r.escape(p)}),h=a(i.visit,d),t.exports=function(e,t,n){var r;return null==t&&(t={}),null!=(r=h(e,m,t,n))?r.join(""):void 0}},{}],122:[function(e,t,n){var r,o,i;r=e(35),o=e("underscore"),i=e("moment"),t.exports=function(){var e,t,n,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C;if(r.isLoggedIn()){for(c=r.me(),k=function(e){var t,n,r,o,i;if(n=e+"",t=n.match(/\(([^\)]+)\)$/)||n.match(/([A-Z]+|UTC[+-]\d{4}) [\d]{4}$/))for(t=t[1],/\s/.test(t)&&(t=t.replace(/(\S)\S*/g,function(e,t){return t})),r=null!=(i=t.toUpperCase().match(/[A-Z]/g))?i:[],t=r.join("");t.length<2;)t+="?";else o=e.getTimezoneOffset(),t="UTC"+(0>o?"+":"-")+("00"+Math.floor(Math.abs(o)/60)).substr(-2)+":"+("00"+Math.abs(o)%60).substr(-2);return t},g=v=n=null,t=new Date,g=t.getTimezoneOffset(),w=k(t),h=6e4,a=s=0;12>=s;a=++s)if(t=i(t).add(30,"days").toDate(),t.getTimezoneOffset()!==g){n=t;break}if(null!=n){for(v=n.getTimezoneOffset(),d=(new Date).getTime(),l=n.getTime(),e=0;l>d+h/2&&30>e;)if(e++,p=Math.floor((d+l)/2),f=new Date(p).getTimezoneOffset(),f===g)d=p;else{if(f!==v)break;l=p}_=k(n),n=new Date(h*Math.floor(l/h)).toISOString()}m={},y={offsetCurrent:g,timezoneCurrent:w,offsetNext:v,timezoneNext:_,dateNext:n};for(u in y)C=y[u],null!=C&&(m[u]=C);return b=c.getPref("timezoneInfo"),o.isEqual(m,b)?void 0:c.run("timezoneInfo",m)}}},{}],123:[function(e,t,n){var r;r=e("underscore"),t.exports=function(e){var t;return t=r.reduce(e.split(","),function(e,t){var n,r,o;return o=t.split(":"),n=o[0],r=o[1],null!=r?(null==e[n]&&(e[n]=[]),e[n].push(r)):e[n]=!0,e},{}),function(e){var n,o;return n=t[e.get("type")],null==n?!1:n===!0?!0:(o=e.get("data").old,null!=o&&r.any(n,function(e){return null!=o[e]}))}}},{}],124:[function(e,t,n){var r=[].slice;t.exports=function(){var e,t,n,o,i,a,s,u,c,l,d,p;if(e=2<=arguments.length?r.call(arguments,0,n=arguments.length-1):(n=0,[]),l=arguments[n++],t=e[0],d=2<=e.length?r.call(e,1):[],null==t)return 0;if(d.length>0)for(o=i=0,s=t.length;s>i;o=++i)for(p=t[o],a=0,u=d.length;u>a;a++)if(c=d[a],c.length<=o||!l(p,c[o]))return o;return t.length}},{}],125:[function(e,t,n){var r;r=e("underscore"),t.exports=function(e,t){return r.reject(e,function(e){return e.id===t.id})}},{}],126:[function(e,t,n){var r;r=e("hearsay"),t.exports=function(e,t){return new r.ContinuousSignal(function(n){var r,o,i,a,s;return o=e.get(),r=Date.now(),n(o),i=null,a=function(e){return o=e,r=Date.now(),n(e)},t>0?(s=e.subscribe(function(e){var n;return clearTimeout(i),o!==e?(n=t-(Date.now()-r),0>=n?a(e):i=setTimeout(function(){return a(e)},n)):void 0}),function(){return s(),clearTimeout(i)}):(s=e.subscribe(function(e){return cancelAnimationFrame(i),i=requestAnimationFrame(function(){return n(e)})}),function(){return s(),cancelAnimationFrame(i)})})}},{}],127:[function(e,t,n){var r,o;r=e("underscore"),o=e(134),t.exports=function(e,t,n){var i;return null==n&&(n=function(e,t,n){return n}),(i=function(e,a){var s;return(s=t(e,a))?n(e,a,s):r.isArray(e)?e.map(i):o(e)?r.mapObject(e,i):e;
})(e)}},{}],128:[function(e,t,n){var r;t.exports=function(){try{return new window.CustomEvent("testEvent"),window.CustomEvent}catch(e){return r=function(e,t){var n;return null==t&&(t={bubbles:!1,cancelable:!1,detail:void 0}),n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},r.prototype=window.Event.prototype,r}}()},{}],129:[function(e,t,n){var r;r=e(128),t.exports=function(e,t,n){var o,i,a,s,u,c;for(o=new r(t,{bubbles:!1,cancelable:!1,detail:null!=(s=n.detail)?s:void 0}),u=!1,o.stopPropagation=function(){return u=!0,r.prototype.stopPropagation.apply(this,arguments)},i=0,a=e.length;a>i;i++)c=e[i],u||c.dispatchEvent(o)}},{}],130:[function(e,t,n){var r;r=e(128),t.exports=function(e,t,n){var o,i,a,s;return null==n&&(n={}),o=new r(t,{bubbles:null!=(i=n.bubbles)?i:!0,cancelable:null!=(a=n.cancelable)?a:!1,detail:null!=(s=n.detail)?s:void 0}),e.dispatchEvent(o)}},{}],131:[function(e,t,n){var r,o,i,a,s;i=e("underscore"),s=e(19),r=s.GOLD_RECOMMENDATION,o=s.GOLD_UPGRADE,a=function(e){return i.filter(e.get("credits"),function(e){var t;return!e.applied&&e.count>0&&("invitation"===(t=e.type)||"promoCode"===t)})},t.exports=function(e){var t,n,s,u;return e.isInAnyBCOrganization()?null:(n=e.isGold(),n&&!e.isDismissed(o)?{type:o}:e.isDismissed(r)?null:(t=a(e),(u=i.reduce(t,function(e,t){return e+t.count},0))?(u>12&&(u=12),s=i.chain(t).filter(function(e){return"invitation"===e.type&&null!=e.memberInvited}).pluck("memberInvited").pluck("fullName").value(),{invitedMemberNames:s,numCreditMonths:u,type:r}):null))}},{}],132:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=[].slice,j=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};p=e(118),h=e(133),m=e("underscore"),C=e(88),_=e(19),i=_.GOLD_RECOMMENDATION,a=_.GOLD_UPGRADE,k=e(28),c=k.ORG_TYPE_ENTERPRISE,u=k.ORG_TYPE_BUSINESS_CLASS,l=k.ORG_TYPE_FREE,d=[c,u],o=[96,97,101],r={ENTERPRISE_UPGRADE:{type:"ENTERPRISE_UPGRADE",heading:"welcome heading ent",teamheading:"welcome heading-team ent",subheading:"welcome subheading-get set up",isUpgrade:!0,orgType:c,doesIncludeGold:!0,tips:[{key:"tip-power-ups",url:"https://trello.com/power-ups?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-member"},{key:"tip-team playbooks",url:"https://trello.com/teams?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-member"},{key:"tip-enterprise guide",url:"https://trello.com/guide/enterprise?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-member"}]},ENTERPRISE_UPGRADE_ADMIN:{type:"ENTERPRISE_UPGRADE_ADMIN",heading:"welcome heading ent",teamheading:"welcome heading-team ent",subheading:"welcome subheading-get set up",orgType:c,doesIncludeGold:!0,isUpgrade:!0,tips:[{key:"tip-set up enterprise",url:"https://trello.com/guide/enterprise?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-admin"},{key:"tip-power-ups",url:"https://trello.com/power-ups?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-admin"},{key:"tip-sso",url:"https://trello.com/guide/enterprise/sysadmin.html?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-admin"}]},ENTERPRISE_JOIN:{type:"ENTERPRISE_JOIN",heading:"welcome heading ent",teamheading:"welcome heading-team ent",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:c,doesIncludeGold:!0,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-explore teams boards",url:"https://trello.com/guide/board_basics.html?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-onboard"},{key:"tip-get collaborative",url:"https://trello.com/guide/collaborate.html?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-onboard"}]},ENTERPRISE_INQUIRY:{type:"ENTERPRISE_INQUIRY",heading:"welcome heading",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:c,doesIncludeGold:!0,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-onboard team",url:"https://trello.com/guide/getting-started?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-setup"},{key:"tip-review guide",url:"https://trello.com/guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-setup"}]},BC_UPGRADE:{type:"BC_UPGRADE",heading:"welcome heading bc",teamheading:"welcome heading-team bc",subheading:"welcome subheading-get set up",isUpgrade:!0,orgType:u,doesIncludeGold:!0,tips:[{key:"tip-power-ups",url:"https://trello.com/power-ups?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-member"},{key:"tip-how teams use trello",url:"https://trello.com/teams?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-member"},{key:"tip-bc guide",url:"http://help.trello.com/article/714-business-class-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-member"}]},BC_UPGRADE_ADMIN:{type:"BC_UPGRADE_ADMIN",heading:"welcome heading bc",teamheading:"welcome heading-team bc",subheading:"welcome subheading-get set up",isUpgrade:!0,orgType:u,doesIncludeGold:!0,tips:[{key:"tip-set up team",url:"http://help.trello.com/article/710-onboarding-to-business-class?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-admin"},{key:"tip-power-ups",url:"https://trello.com/power-ups?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-admin"},{key:"tip-bc guide",url:"http://help.trello.com/article/714-business-class-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-admin"}]},BC_JOIN:{type:"BC_JOIN",heading:"welcome heading bc",teamheading:"welcome heading-team bc",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:u,doesIncludeGold:!0,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-explore how teams boards work",url:"https://trello.com/guide/board_basics?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-onboard"},{key:"tip-bc guide",url:"http://help.trello.com/article/714-business-class-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-onboard"}]},BC_SIGNUP:{type:"BC_SIGNUP",heading:"welcome heading bc",teamheading:"welcome heading-team bc",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:u,doesIncludeGold:!0,tips:[{key:"tip-open tutorial board",hasLink:!1},{key:"tip-share guide with team",url:"https://trello.com/guide/getting-started?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-setup"},{key:"tip-bc guide",url:"http://help.trello.com/article/714-business-class-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-setup"}]},FREE_JOIN:{type:"FREE_JOIN",heading:"welcome heading",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:l,doesIncludeGold:!1,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-explore teams boards",url:"https://trello.com/guide/board_basics.html?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-onboard"},{key:"tip-get collaborative",url:"https://trello.com/guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-onboard"}]},FREE_SIGNUP:{type:"FREE_SIGNUP",heading:"welcome heading",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:l,doesIncludeGold:!1,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-create teams first board",url:"https://trello.com/guide/getting-started?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-setup"},{key:"tip-review guide",url:"https://trello.com/guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-setup"}]},NO_TEAM_NEW_MEMBER:{type:"NO_TEAM_NEW_MEMBER",heading:"welcome heading",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:null,doesIncludeGold:!1,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-create team",url:"https://trello.com/guide/getting-started?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-create-team"},{key:"tip-review guide",url:"https://trello.com/guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-create-team"}]}},Object.keys(r).forEach(function(e){return function(e,t){return r[e].precedence=t}}(this)),s="nux-boards-page-banner",w=function(e){return function(e){var t;return t=h.idToDate(e.id),!e.isDismissed(s)&&t>h.dateBefore({weeks:2})&&t>1493824588e3}}(this),b=function(e){return function(e,t){return["nux-boards-page",e,t,"banner"].join("-")}}(this),f=function(e){return function(e,t){return m.any(t,function(t){return e.isDismissed(t)})}}(this),v=function(e){return function(e){return p.get("didMemberInquiryForEnterprise")===e.id}}(this),g=function(e){return function(){var e;return null!=(e=C("nuxBanners"))?e.get("showNuxBanners"):void 0}}(this),y=function(e){return function(e,t){var n,i,a,s,d,p,h,y,_,k,C;return h=t.owned(),a=b(u,t.id),p=b(l,t.id),_=w(e),k=t.attributes[t.nameAttr],t.belongsToRealEnterprise()?(s=t.get("idEnterprise"),d=b(c,s),y=e.get("idEnterprisesAdmin").indexOf(s)>=0,i=f(e,[a,p])||!_,C=function(){switch(!0){case y:return r.ENTERPRISE_UPGRADE_ADMIN;case!y&&i:return r.ENTERPRISE_UPGRADE;case!y&&!i&&g():return r.ENTERPRISE_JOIN;default:return null}}(),null===C?null:m.extend({id:d,idBannersToDismiss:[d,a,p],orgDisplayName:k},C)):t.isPremium()?m.intersection(t.get("products"),o).length>0?null:(i=f(e,[p])||!_,C=function(){switch(!0){case h&&i:return r.BC_UPGRADE_ADMIN;case h&&!i&&g():return r.BC_SIGNUP;case!h&&i:return r.BC_UPGRADE;case!h&&g():return r.BC_JOIN;default:return null}}(),null===C?null:m.extend({id:a,idBannersToDismiss:[a,p],orgDisplayName:k},C)):_?(n=v(e),C=function(){switch(!0){case n&&g():return r.ENTERPRISE_INQUIRY;case h&&g():return r.FREE_SIGNUP;case!h&&g():return r.FREE_JOIN;default:return null}}(),null===C?null:m.extend({id:p,idBannersToDismiss:[p]},C)):null}}(this),t.exports=function(e){return function(e){var t,n,o,u,c,l;return u=w(e)&&g()?m.extend({id:s,idBannersToDismiss:[s]},r.NO_TEAM_NEW_MEMBER):null,c=e.organizationList.map(function(t){return y(e,t)}),n=m.chain([u].concat(x.call(c))).compact().reject(function(t){return e.isDismissed(t.id)}),t=m.chain(n).sortBy(function(e){return e.precedence}).first().value(),o=m.chain(n).pluck("idBannersToDismiss").flatten().value(),t&&(l=t.orgType,j.call(d,l)>=0)&&(o.push(a),o.push(i)),{bannerToDisplay:t,idBannersToDismiss:o}}}(this)},{}],133:[function(e,t,n){var r,o,i,a,s,u,c,l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},d={}.hasOwnProperty;r=e("jquery"),o=e(22),s=e("underscore"),u=e(48),c=e(267),i=e("bluebird"),t.exports=a={spacing:16384,checkId:function(e){return"ObjectID"===(null!=e?e.constructor.name:void 0)||24===(null!=e?e.length:void 0)&&/^[a-f0-9]*$/.test(e)},capitalize:function(e){return s.isString(e)&&!s.isEmpty(e)?e[0].toUpperCase()+e.substr(1):e},pluralize:function(e){return e+"s"},imageFileExtensions:["png","gif","jpg","jpeg","bmp","ico"],extensionIsImage:function(e){var t,n;return t=null!=(n=a.fileExt(e))?n.toLowerCase():void 0,l.call(a.imageFileExtensions,t)>=0},fileExt:function(e){var t,n,r;return null!=(t=null!=(n=/\.([a-z0-9]+)$/i.exec(e))&&null!=(r=n[1])?r.toLowerCase():void 0)?t:null},traverse:function(e,t){var n,r,o;if(s.isEmpty(t)||!e)return e;if(s.isArray(t)){for(n=0,o=t.length;o>n&&(r=t[n],e=e[r],e);n++);return e}return e[t]},escapeForRegex:function(e){return null!=e?e.replace(/[-[\]{}()*+?.,\\\/^$|#\s]/g,"\\$&"):void 0},makeSlug:function(e,t){var n;return null==t&&(t="-"),e&&(n=a.removeAccents(e.toLowerCase()).replace(/[^a-z0-9]+/gi,t).replace(RegExp("^"+t+"|"+t+"$","g"),""),n.length>128&&(n=n.substr(0,128))),n||t},removeAccents:function(e){return e.replace(/[]/g,"a").replace(//g,"ae").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"g").replace(/[]/g,"h").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(//g,"oe").replace(//g,"r").replace(/[]/g,"s").replace(//g,"ss").replace(/[]/g,"u").replace(/[]/g,"y")},isShortId:function(e){return/^[0-9]{1,8}$/.test(e)},isShortLink:function(e){return s.isString(e)&&/^[a-zA-Z0-9]{8}$/.test(e)},getMs:function(e){var t,n,r,o,i,a,s,u;return t=e.days,n=e.hours,r=e.minutes,a=e.seconds,i=e.ms,u=e.years,o=e.months,s=e.weeks,null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),null==a&&(a=0),null==i&&(i=0),u&&(t+=365*u),o&&(t+=30*o),s&&(t+=7*s),n+=24*t,r+=60*n,a+=60*r,i+=1e3*a},getSeconds:function(e){return this.getMs(e)/1e3},dateAfter:function(e){var t,n;return t=null!=(n=null!=e?e.date:void 0)?n:new Date,new Date(t.getTime()+this.getMs(e))},dateBefore:function(e){var t,n;return t=null!=(n=null!=e?e.date:void 0)?n:new Date,new Date(t.getTime()-this.getMs(e))},compareMemberType:function(e,t,n,r){var o,i,a,s,u;switch(null==r&&(r={}),u=r.mode,null==u&&(u="standard"),u){case"members":i=[["normal","admin"]];break;case"commentDelete":i=[["normal","org"],["admin"]];break;default:i=[["org"],["normal"],["admin"]]}return o=function(t){var n,r,o,a,s;for(s=e.getMemberType(t),o=r=0,a=i.length;a>r;o=++r)if(n=i[o],l.call(n,s)>=0)return o;return-1},a=o(t),s=o(n),a>s?1:s>a?-1:0},idToDate:function(e){return new Date(1e3*parseInt(null!=e?e.substr(0,8):void 0,16))},tryToExcludeEXIFRotated:function(e){var t,n;return t=s.reduce(e,function(e,t){var n,r,o;return r=t.scaled,o=t.width,n=t.height,r&&o!==n?n>o?e+1:e-1:e},0),n=t>0,s.filter(e,function(e){var t,r;return r=e.width,t=e.height,n?t>=r:r>=t})},preferScaledPreviews:function(e){var t;return t=this.tryToExcludeEXIFRotated(s.filter(e,function(e){return e.scaled})),s.isEmpty(t)?e:t},smallestPreviewBiggerThan:function(e,t,n){var r,o,i,a;for(null==e&&(e=[]),null==t&&(t=0),null==n&&(n=0),a=[this.preferScaledPreviews(e),this.tryToExcludeEXIFRotated(e)],o=0,i=a.length;i>o;o++)e=a[o],s.isEmpty(r)&&(r=s.filter(e,function(e){return e.width>=t&&e.height>=n}));return this.smallestPreview(r)},previewBetween:function(e,t,n,r,o){var i;return null==e&&(e=[]),i=s.filter(this.preferScaledPreviews(e),function(e){var i,a;return t<=(i=e.width)&&r>=i&&n<=(a=e.height)&&o>=a}),this.biggestPreview(i)},biggestPreview:function(e){return null==e&&(e=[]),0===e.length?null:s.max(this.preferScaledPreviews(e),function(e){return Math.min(e.width,e.height)})},smallestPreview:function(e){return null==e&&(e=[]),0===e.length?null:s.min(this.preferScaledPreviews(e),function(e){return Math.max(e.width,e.height)})},rotateArr:function(e,t){return s.flatten([e.slice(-t),e.slice(0,-t)],!0)},stopPropagation:function(e){return null!=e?e.stopPropagation():void 0},preventDefault:function(e){return null!=e?e.preventDefault():void 0},stop:function(e){return a.stopPropagation(e),a.preventDefault(e)},checkEmail:function(e,t){return null==t&&(t=""),RegExp('^[^"@\\s\\[\\]\\(\\),:;<>\\\\]+@[-a-z0-9\\.'+t+"]+\\.[a-z"+t+"]+$","i").test(e)},removeDomainFromEmailAddress:function(e,t){return null==t&&(t=""),e.replace(RegExp("@[-a-z0-9\\."+t+"]+\\.[a-z"+t+"]+$"),"")},validName:function(e){return e.length>=1},spaces:function(e){for(this.longStr||(this.longStr=" ");this.longStr.length<e;)this.longStr=this.longStr+this.longStr;return this.longStr.substr(0,e)},_pad:function(e,t,n,r){var o,i;return null==n&&(n=" "),e=e.toString(),e.length>t?e.substr(0,t):(o=t-e.length,i=" "===n?this.spaces(o):this.times(n,o),r?i+e:e+i)},rpad:function(e,t,n){return this._pad(e,t,n,!1)},lpad:function(e,t,n){return this._pad(e,t,n,!0)},times:function(e,t){var n;return s.map(function(){n=[];for(var e=0;t>=0?t>e:e>t;t>=0?e++:e--)n.push(e);return n}.apply(this),function(){return e}).join("")},truncate:function(e,t){var n;return!(null!=e?e.length:void 0)||e.length<t?e:(n=e.substr(0,e.lastIndexOf(" ",t)),n?n:e.substr(0,t))},scrollToTop:function(){return r(window).scrollTop(0)},getProtocol:function(e){var t,n;return e&&null!=(t=null!=(n=/^([a-z]+):/i.exec(e))?n[1]:void 0)?t:""},makeHttp:function(e){return e?(e=e.replace(/^[a-z]*:\/*/i,""),"http://"+e):""},sanitizeWebAddress:function(e){var t;return"http"!==(t=a.getProtocol(e))&&"https"!==t?a.makeHttp(e):e},isInPosition:function(e,t,n){var r;return null==(null!=n?n.id:void 0)?!1:(r=t[e],(null!=r?r.id:void 0)===n.id)},calcPos:function(e,t,n,r,o){var i,s,u,c,l,d,p,h,m;return s=65536,l=t.select(function(e){return(!(null!=n&&n.id===e.id)||o)&&(!r||r(e))}),a.isInPosition(e,l,n)?null!=(m=n.pos)?m:n.get("pos"):(i=Math.min(Math.max(e,0),l.length),c=l[i-1],u=l[i],d=(null!=n?n.get("pos"):void 0)||-1,h=null!=c?c.get("pos"):-1,p=null!=u?u.get("pos"):-1,-1===p?n&&d>h?d:h+s:n&&d>h&&p>d?d:h>=0?(p+h)/2:p/2)},randomWait:function(e,t){return Math.floor(e+Math.random()*t)},toTitleCase:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},calcBoardLayout:function(){return r(window).trigger("resize")},navMenuList:function(e,t,n){var r,i,a,u,c,l,d,p;return a=e.find(t),p=a.filter(".selected").first()[0],d=s.indexOf(a,p),i=a[0],u=a[a.length-1],l=0>d-1?u:a[d-1],c=d+1>a.length?i:a[d+1],n===o.ArrowDown&&(r=c),n===o.ArrowUp&&(r=l),this.selectMenuItem(e,t,r)},selectMenuItem:function(e,t,n){return e.find(t).removeClass("selected"),r(n).addClass("selected")},insertSelection:function(e,t,n,o){var i,s,u,c,l;return e=a.getElem(e),i=r(e),l=i.val(),null!=n||null!=o?(u=l.substring(0,n),s=l.substring(o),this.setCaretPosition(e,n+(""+t).length)):(u=l,s=""),c=/\S$/.test(u)?" ":"",i.val(u+c+t+s),this.setCaretPosition(e,u.length+c.length+t.length),i.focus(),i.trigger("mutated")},_nextWhitespace:function(e,t){var n,r;return n=e.indexOf("\n",t),-1===n&&(n=1/0),r=e.indexOf(" ",t),-1===r&&(r=1/0),Math.min(n,r,e.length)},getWordFromIndex:function(e,t){var n,r,o,i;for(o=Math.max(e.lastIndexOf("\n",t-1),e.lastIndexOf(" ",t-1)),o+=1;/[()\[\]\/\\;"'&]|:@/.test(e[o]);)o++;return n=t,r=n-o,i=e.slice(o,n),{start:o,end:n,length:r,str:i}},getWordFromCaret:function(e){var t,n;return e=a.getElem(e),n=r(e).val(),t=this.getCaretPosition(e),this.getWordFromIndex(n,t)},getLineFromIndex:function(e,t){var n,r,o,i;return o=e.lastIndexOf("\n",t-1),o+=1,n=this._nextWhitespace(e,t),r=n-o,i=e.slice(o,n),{start:o,end:n,length:r,str:i}},getLineFromCaret:function(e){var t,n;return e=a.getElem(e),n=r(e).val(),t=this.getCaretPosition(e),this.getLineFromIndex(n,t)},getCaretPosition:function(e){var t,n,r;return e=a.getElem(e),null!=e.selectionStart?t=e.selectionStart:l.call(document,"selection")>=0&&(e.focus(),n=document.selection.createRange(),r=document.selection.createRange().text.length,n.moveStart("character",-e.value.length),t=n.text.length-r),t},setCaretPosition:function(e,t){var n;return e=a.getElem(e),e.setSelectionRange?(e.focus(),e.setSelectionRange(t,t)):e.createTextRange?(n=e.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()):void 0},setCaretAtEnd:function(e){var t;return e?(t=r(e).val().length,this.setCaretPosition(e,t)):void 0},getLastWord:function(e){var t;return t=r(e).val().split(" "),s.last(t)},removeWordAtIndex:function(e,t){var n,r,o;return o=a.getWordFromIndex(e,t),n=e.slice(0,o.start),r=e.slice(o.end),n+r},stripExtraSpaces:function(e){return null!=e?e.replace(/\s+/g," ").trim():void 0},getMemNameArray:function(e){return s.chain(["username","fullName","initials"]).map(function(t){var n;return null!=(n=e.get(t))?n.toLowerCase().split(/\s+/):void 0}).compact().flatten().value()},getMemNameArrayFromId:function(e,t){var n;return null!=(n=e.get("Member",t))?this.getMemNameArray(n):[]},filterMembers:function(e,t,n){var r,o,i,u,c,l;for(l=RegExp("^"+a.escapeForRegex(t),"i"),o=[],r=0,i=n.length;i>r;r++)u=n[r],c=a.getMemNameArrayFromId(e,u),s.find(c,function(e){return l.test(e)})&&o.push(u);return o},getQueryParameter:function(e,t){var n,r,o,i;return null==t&&(t=""),r=RegExp("[?&]"+e+"=([^?&]*)"),n=null!=(o=r.exec(location.search))?o:r.exec(location.hash),i=null!=n?n[1]:void 0,null!=i?decodeURIComponent(i.replace(/\+/g," ")):t},validFileSize:function(e,t){return null==t&&(t=10485760),(null!=e?e.size:void 0)<t},uploadFile:function(e,t,n){var o,i;return i=s.uniqueId("iframe"),o=r("<iframe>").attr("name",i).css("display","none").appendTo("body").load(function(e){var t,r;s.defer(function(){return o.remove()});try{r=o.contents().text()}catch(e){return t=e,n("File too large")}return/File too large/i.test(r)?n(r):n()}),t.closest("form").attr("target",i).find("input[name=token]").val(e).end().submit(),s.defer(function(){return t.val("")})},hasValidInviteTokenFor:function(e){var t,n;return n=this.inviteTokenFor(e.id),null==n?!1:(t=e.modelCache.get("Member",n.split("-")[0]),null==t?!1:"virtual"===e.getMemberType(t)?!0:e.isMember(t)&&"ghost"===e.get("memberType"))},inviteTokenFor:function(e){return r.cookie("invite-token-"+e)},invitationTokens:function(){var e,t,n,o;for(t=/invite-token-[-a-f0-9]*/g,o=[];null!=(e=null!=(n=t.exec(document.cookie))?n[0]:void 0);)o.push(r.cookie(e));return o},getElem:function(e){return e instanceof r?e[0]:e},getElemTransformMatrix:function(e){var t;return t=e.css("-webkit-transform")||e.css("-moz-transform")||e.css("-ms-transform")||e.css("-o-transform")||e.css("transform"),"none"!==t?t:null},getMatrixDegrees:function(e){var t,n,r,o,i;return i=e.split("(")[1].split(")")[0].split(","),t=i[0],n=i[1],r=i[2],o=i[3],Math.round(Math.atan2(n,t)*(180/Math.PI))},getMatrixScale:function(e){var t,n,r,o,i;return i=e.split("(")[1].split(")")[0].split(","),t=i[0],n=i[1],r=i[2],o=i[3],Math.sqrt(t*t+n*n)},getDegrees:function(e,t){return Math.round(Math.atan2(e,t)*(180/Math.PI))},calcDistanceFromCenter:function(e,t,n){var r;return r=Math.pow(t-(e.offset().left+e.width()/2),2)+Math.pow(n-(e.offset().top+e.height()/2),2),Math.floor(Math.sqrt(r))},_runShredders:function(){var e,t,n,r,o,i;for(i=a._shredders,o=new Date,a._shredders=[],e=0,n=0,r=i.length;r>n;n++)t=i[n],o>t.time?(t.fn(),e++):a._shredders.push(t);return u("shred","Shred "+e+" objects, "+a._shredders.length+" left"),a._shredTimeout=null,a._startShredTimer()},_startShredTimer:function(){return!a._shredTimeout&&a._shredders.length>0?null!=a._shredTimeout?a._shredTimeout:a._shredTimeout=setTimeout(a._runShredders,a.getMs({seconds:3})):void 0},shred:function(e){return null==a._shredders&&(a._shredders=[]),a._shredders.push({time:a.dateAfter({seconds:20}),fn:function(t){return function(){var t,n;n=[];for(t in e)d.call(e,t)&&n.push(delete e[t]);return n}}(this)}),a._startShredTimer()},extendEvents:function(e){return function(){return s.defaults(e,s.result(this.constructor.__super__,"events"))}},relativeUrl:function(e){return e.replace(RegExp("^"+siteDomain),"")},isTextElement:function(e){var t,n;if(e instanceof HTMLTextAreaElement)return!0;if(!(e instanceof HTMLInputElement))return!1;if("text"===(t=e.type)||"email"===t||"password"===t||"search"===t)return!0;if("submit"===(n=e.type)||"reset"===n||"button"===n||"checkbox"===n)return!1;try{return e.selectionStart,!0}catch(e){return!1}},withoutAlteringSelection:function(e){var t,n,o,i,s,u,c;n=document.activeElement,t=r(n),s=t.is(":focus"),null!=n&&a.isTextElement(n)?(n.selectionStart?(u=n.selectionStart,i=n.selectionEnd,o=n.selectionDirection):c=this.getCaretPosition(n),e(),u?n.setSelectionRange(u,i,o):c&&this.setCaretPosition(n,c),s&&t.focus()):e()},extendParentClassName:function(e){return function(){return s.result(this.constructor.__super__,"className")+(" "+e)}},waitForImageLoad:function(e){return new i(function(t,n){var r;return r=new Image,r.onload=function(){return t(r)},r.onerror=function(){return n(r)},r.src=e})},bugzscout:function(e,t){var n,o,i,a,s,u;return u=e.project,n=e.area,o=e.description,i=e.extra,s=e.me,a=e.forceNew,null==a&&(a=0),r.ajax({url:"//trello.fogbugz.com/ScoutSubmit.asp",type:"POST",data:{ScoutUserName:"Bugzscout",ScoutProject:u,ScoutArea:n,Description:o,Extra:i,Email:'"'+s.fullName+'" <'+s.email+">",ForceNewBug:a,FriendlyResponse:0},success:function(){return"function"==typeof t?t():void 0},error:function(e,n){return"function"==typeof t?t(n):void 0}})},sortMembers:function(e,t){var n;return n=function(e){return e===t||e.id===t.get("id")},e.sort(function(e,t){var r,o;return r=n(e),o=n(t),r&&!o?-1:!r&&o?1:e.fullName<t.fullName?-1:e.fullName>t.fullName?1:0}),e},firstLessThan:function(e,t){var n,r,o,i,a;for(o=0,i=t.length;i>o;o++){if(r=t[o],!s.isArray(r))return s.isFunction(r)?r.call(this,e):r;if(n=r[0],a=r[1],n>=e)return s.isFunction(a)?a.call(this,e):a}},hoursLeft:function(e){return(new Date(e)-new Date)/a.getMs({hours:1})},escapedReturnUrl:function(){return encodeURIComponent(location.href.replace(/^https?:\/\/[^\/]+/,""))},isExternalURL:function(e){var t;return t=c(e),t.host!==document.location.host||/^[\\\/.]{2,}/.test(t.pathname)},reverse:function(e){return e.slice(0).reverse()},buildFuzzyMatcher:function(e){var t;return t=s.map(e.split(/\s+/),function(e){return RegExp(""+a.escapeForRegex(e),"i")}),function(e){return s.every(t,function(t){return t.test(e)})}},getPadding:function(e){var t;return t=r(e).css(["padding-left","padding-top","padding-bottom","padding-right"]),{left:parseInt(t["padding-left"],10),top:parseInt(t["padding-top"],10),bottom:parseInt(t["padding-bottom"],10),right:parseInt(t["padding-right"],10)}},frameInCoordinateSpace:function(e,t){var n,r;return r=a.getPadding(t),n={top:e.offsetTop-(t.offsetTop+r.top),left:e.offsetLeft-(t.offsetLeft+r.left)},n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n},getBounds:function(e){var t,n;return t=r(e),n={left:t.scrollLeft(),top:t.scrollTop(),width:t.innerWidth(),height:t.innerHeight()},n.bottom=n.top+n.height,n.right=n.left+n.width,n},scrollElementIntoView:function(e,t,n){var o,i,s,u,c,l,d,p,h,m,f,g;p=null!=n?n:{},c=p.horizontal,g=p.vertical,i=p.animated,l=a.getBounds(e),d=a.getPadding(e),s=a.frameInCoordinateSpace(t,e),u={top:s.top-d.top,bottom:s.bottom+d.bottom,left:s.left-d.left,right:s.right+d.right},f=i?(o=r(e),function(e,t){var n;return n={},n[e]=t,o.animate(n,{duration:150,queue:!1})}):function(t,n){return e[t]=n},g&&(m=function(e){return f("scrollTop",e+d.top)},u.bottom>l.bottom?m(u.bottom-l.height):u.top<l.top&&m(u.top)),c&&(h=function(e){return f("scrollLeft",e+d.left)},u.right>l.right?h(u.right-l.width):u.left<l.left&&h(u.left))},loadScript:function(e){return new i(function(t){var n;return n=document.createElement("script"),n.src=e,n.onload=t,document.querySelector("head").appendChild(n)})},isJsonString:function(e){var t;try{return JSON.parse(e)}catch(e){return t=e,!1}finally{}}}},{}],134:[function(e,t,n){t.exports=function(e){var t;return null==e?!1:"object"!=typeof e?!1:null===(t=Object.getPrototypeOf(e))||t===Object.prototype}},{}],135:[function(e,t,n){var r,o,i,a;o=e("underscore"),a=e(134),r=e("react"),t.exports=function(e,t){return!(i(e,this.props)&&i(t,this.state))},i=function(e,t){var n,s,u,c,l,d;if(a(e)&&a(t)){if(o.keys(e).length!==o.keys(t).length)return!1;for(c in e)if(d=e[c],!i(e[c],t[c]))return!1}else if(r.isValidElement(e)&&r.isValidElement(t)){if(!i([e.props,e.state],[t.props,t.state]))return!1}else if(o.isArray(e)&&o.isArray(t)){if(e.length!==t.length)return!1;for(n=u=0,l=e.length;l>u;n=++u)if(s=e[n],!i(e[n],t[n]))return!1}else{if(o.isFunction(e)&&o.isFunction(t))return!0;if(e!==t)return!1}return!0}},{}],136:[function(e,t,n){var r,o=[].slice;r=e("bluebird"),t.exports=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?o.call(arguments,2):[],r.fromNode(function(r){return n[t].apply(n,o.call(e).concat([r]))})}},{}],137:[function(e,t,n){t.exports=function(){if(window.getSelection){if(window.getSelection().empty)return window.getSelection().empty();if(window.getSelection().removeAllRanges)return window.getSelection().removeAllRanges()}else if(document.selection)return document.selection.empty()}},{}],138:[function(e,t,n){t.exports=function(e){var t,n,r;return n=window.getSelection(),r=n.toString(),t=n.anchorNode,!!r&&!!e.find(t).length}},{}],139:[function(e,t,n){t.exports=function(){var e,t;return("function"==typeof window.getSelection&&null!=(e=window.getSelection())?e.toString():void 0)||(null!=(t=document.selection)?t.createRange().text:void 0)}},{}],140:[function(e,t,n){t.exports=function(e){var t,n;document.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(e),t.select()):(n=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),n.removeAllRanges(),n.addRange(t))}},{}],141:[function(e,t,n){t.exports=function(e){return e.ctrlKey||e.metaKey||e.shiftKey||null!=e.button&&0!==e.button?!1:!0}},{}],142:[function(e,t,n){var r,o;r=e(133),o=function(e,t){var n,o,i,a,s,u,c;return null==t&&(t={resetAfterMouseMove:!0,intervals:[{iterations:6,timeout:r.getMs({seconds:10})},{iterations:10,timeout:r.getMs({minutes:1})}]}),i=null,o=null,c=!1,n=function(){return clearTimeout(o),c?(document.removeEventListener("mousemove",s),c=!1):void 0},u=function(){return t.resetAfterMouseMove&&!c?(document.addEventListener("mousemove",s),c=!0):void 0},a=function(){var n;return i.length?(n=i.shift(),o=setTimeout(function(){return e(),requestAnimationFrame(a)},n),n>t.intervals[0].timeout?u():void 0):u()},s=function(){var e,r,o,s,u,c,l,d,p;for(n(),i=[],c=t.intervals,o=0,u=c.length;u>o;o++)for(l=c[o],r=l.iterations,p=l.timeout,e=s=0,d=r;d>=0?d>s:s>d;e=d>=0?++s:--s)i.push(p);return a()},s(),n},t.exports=o},{}],143:[function(e,t,n){var r,o,i;i=e(30),o=-i,r=100-i,t.exports=function(e){return o>e?o:e>r?r:e}},{}],144:[function(e,t,n){t.exports=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;")}},{}],145:[function(e,t,n){var r,o=[].slice;r=e("underscore"),t.exports=function(e,t){var n,i,a,s,u,c;for(c=[],s=t.blockLex(e,{}),i=0,a=s.length;a>i;i++)n=s[i],null!=n.children&&(c=o.call(c).concat(o.call(t.inlineLex(n.children.text))));return u=r.chain(c).filter(function(e){return"link"===e.type}).map(function(n){var r,o;return e=null!=(r=n.children)?r.text:void 0,null!=e?{url:n.url,text:t.textInline(null!=(o=n.children)?o.text:void 0)}:{url:n.url}}).value()}},{}],146:[function(e,t,n){t.exports=function(e,t,n){return null==n&&(n=""),e.length>t?e.substr(0,t-n.length+1).replace(/\s+\S*$/,"")+n:e}},{}],147:[function(e,t,n){t.exports=function(e){return/\bhttps?:\/\//.test(e)}},{}],148:[function(e,t,n){t.exports=function(e){var t,n,r,o,i,a,s,u,c,l,d;if(d=e.split(","),s=d[0],r=d[1],l=/data:([^;]+)(?:;charset=([^;]*))?(;base64)?/.exec(s),null!=l){if(t=l[0],c=l[1],a=l[2],u=l[3],!u)throw Error("Unable to handle non-base64 URIs");if(null!=a)throw Error("Unable to handle encodings");return o=atob(r),n=function(){var e,t,n;for(n=[],e=0,t=o.length;t>e;e++)i=o[e],n.push(i.charCodeAt(0));return n}(),new Blob([new Uint8Array(n)],{type:c})}throw Error("Invalid data URI")}},{}],149:[function(e,t,n){t.exports=function(e){return 0===e.indexOf(window.attachmentsDomain)}},{}],150:[function(e,t,n){var r;r=e(267),t.exports=function(e){return r(e).host===location.host}},{}],151:[function(e,t,n){t.exports=function(e){return/^https?:\/\/\S+$/.test(e)}},{}],152:[function(e,t,n){var r,o;r=e(35),o=e(39),t.exports=function(e){var t,n;if(0!==e.indexOf("/")&&0!==e.indexOf(siteDomain+"/"))return!1;if(e=e.replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),e=e.replace(/[\?\#].*$/,""),/\.[a-z]+$/i.test(e))return!1;if(/^([bce]|board|card|org)\//.test(e))return!0;if(/^search(\/|$)/.test(e))return!0;if(r.isLoggedIn()){if(RegExp("^"+r.myUsername()+"(/|$)").test(e))return!0;if("/"===e)return!0}if(/^shortcuts\/?$/.test(e))return!0;if(null!=(t=null!=(n=/^[^\/\?\#]+/.exec(e))?n[0]:void 0)){if(r.isLoggedIn()&&("me"===t||"my"===t||"you"===t||"your"===t||"username"===t))return!0;if(/^[a-z0-9_]{3,}$/.test(t)){if(null!=o.findOne("Member","username",t))return!0;if(null!=o.findOne("Organization","name",t))return!0}}return!1}},{}],153:[function(e,t,n){var r,o;r=e(150),o=e(267),t.exports=function(e){var t,n,i,a,s;return r(e)?(n=o(e),i=n.pathname.split("/").slice(1),t=i[0],a=i[1],s=function(){switch(t){case"b":return"board";case"c":return"card";case"e":return"enterprise";default:return"unknown"}}(),a="card"===s||"board"===s?a:void 0,{type:s,shortLink:a}):{type:"unknown"}}},{}],154:[function(e,t,n){var r,o=[].slice,i={}.hasOwnProperty;r=e("underscore"),t.exports=function(){var e,t,n,a,s;return n=arguments[0],t=2<=arguments.length?o.call(arguments,1):[],e={},r.flatten(t).forEach(function(t){return e[n(t)]=t}),function(){
var t;t=[];for(a in e)i.call(e,a)&&(s=e[a],t.push(s));return t}()}},{}],155:[function(e,t,n){var r,o;o=e("underscore"),r={},r.Server=function(){function e(e){var t,n;return e?(t=e.split("."),void(t.length>0?this.parts=function(){var e,r,o;for(o=[],e=0,r=t.length;r>e;e++)n=t[e],o.push(parseInt(n,10)||0);return o}():this.parts=[0])):null}return e.prototype.toString=function(){return this.parts.join(".")},e.prototype.toJSON=function(){return this.toString()},e.prototype.lessThan=function(e){var t;return t=this.compareTo(e),t&&0>t},e.prototype.greaterThan=function(e){var t;return t=this.compareTo(e),t&&t>0},e.prototype.equalTo=function(e){var t;return t=this.compareTo(e),t&&0===t},e.prototype.compareTo=function(e){var t,n,i,a,s,u,c;if(o.isString(e))e=new r.Server(e);else if(!(e instanceof r.Server))return null;for(n=Math.max(this.parts.length,e.parts.length),u=o.zip(this.parts,e.parts),t=0,i=u.length;i>t;t++){if(c=u[t],a=c[0],s=c[1],null==a&&(a=0),null==s&&(s=0),a>s)return n;if(s>a)return-n;n--}return 0},e.compareStringVersions=function(e,t){return new r.Server(e).compareTo(t)},e.prototype.supports=function(e){var t,n;return n=e.minServerVersion,t=e.maxServerVersion,(!n||this.greaterThan(n))&&(!t||this.lessThan(t))},e}(),r.Client=function(){function e(e){var t,n;t=e.split("-"),this.head=t[0],n=t[1],this.version=parseInt(n,10),this.patch=0}return e.prototype.toString=function(){return this.head+"-"+this.fullVersion()},e.prototype.toJSON=function(){return this.toString()},e.prototype.fullVersion=function(){return o.compact([this.version,this.patch]).join(".")||0},e}(),t.exports=r},{}],156:[function(e,t,n){var r,o,i,a,s;r=e("jquery"),s={width:0},a={width:750},i={width:900},o={width:1280},t.exports={calc:function(){var e;return this.ranCalc=!0,e=r(window).width(),this.fExtraLarge=this.fLarge=this.fMedium=this.fSmall=!1,e>o.width?this.fExtraLarge=!0:e>i.width?this.fLarge=!0:e>a.width?this.fMedium=!0:this.fSmall=!0,r(this).triggerHandler("windowClassChange")},ensureRun:function(){return this.ranCalc?void 0:this.calc()}}},{}],157:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(35),i=e(83),a=e(203),s=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return u(t,e),t.prototype.typeName="Action",t.prototype.urlRoot="/1/actions",n=64,t.prototype.getModel=function(){return this.collection.options.model},t.prototype.triggerCacheEvents=function(e,t){var n,r,o,i;for(i=this.idModels(),n=0,o=i.length;o>n;n++)r=i[n],e.trigger(t+":"+this.typeName+":"+r)},t.prototype.isCommentLike=function(){var e;return"commentCard"===(e=this.get("type"))||"copyCommentCard"===e},t.prototype.isAddAttachment=function(){return"addAttachmentToCard"===this.get("type")},t.prototype.isMember=function(e){return this.get("idMemberCreator")===e.id},t.prototype.getDate=function(){return i.parse(this.get("date"))},t.prototype.getBoard=function(){var e,t;return this.modelCache.get("Board",null!=(e=this.get("data"))&&null!=(t=e.board)?t.id:void 0)},t.prototype.getCard=function(){var e,t;return this.modelCache.get("Card",null!=(e=this.get("data"))&&null!=(t=e.card)?t.id:void 0)},t.prototype.getChecklist=function(){var e,t;return this.modelCache.get("Checklist",null!=(e=this.get("data"))&&null!=(t=e.checklist)?t.id:void 0)},t.prototype.editable=function(){var e,t;return e=this.get("idMemberCreator"),"commentCard"===(t=this.get("type"))&&o.isMe(e)},t.prototype.deletable=function(){var e,t,n,r;return t=this.get("idMemberCreator"),"commentCard"===(n=this.get("type"))&&("observer"!==(null!=(r=this.getBoard())?r.getExplicitMemberType(o.me()):void 0)&&o.isMe(t)||null!=(e=this.getBoard())&&e.compareMemberType(o.me(),this.modelCache.get("Member",t),{mode:"commentDelete"})>0&&!(!e.isPremOrgAdmin(o.me())&&e.isPremOrgAdmin(t)))},t.prototype.isPlaceholder=function(){return null==this.get("date")},t.prototype.includesModel=function(e){var t,n,r,o;return r=e.typeName.toLowerCase(),(n=e.id)?"member"===r&&this.get("idMemberCreator")===n?!0:(t=this.get("data"),"convertToCardFromCheckItem"===this.get("type")&&t.cardSource.id===n?!0:(null!=(o=t[r])?o.id:void 0)===n):!1},t.prototype.idModels=function(){var e,t,n,r;return t=function(){var e,t,o;t=null!=(e=this.get("data"))?e:{},o=[];for(n in t)r=t[n],null!=(null!=r?r.id:void 0)&&o.push(r.id);return o}.call(this),e=this.get("idMemberCreator"),null!=e&&t.push(e),t},t.prototype.takingTooLong=function(){return this.isTakingTooLong=!0,this.trigger("takingTooLong")},t}(a)},{}],158:[function(e,t,n){var r;r=e(171),t.exports=new r([],{requiresLogin:!1,dataUrl:"/announcements/all"})},{}],159:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),a=e(118),s=e(203),i=e(101),t.exports=o=function(e){function t(e){t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Announcement",t.prototype._key=function(){return"announcement-"+this.id+"-read"},t.prototype.isUnread=function(){return!a.get(this._key())},t.prototype.markRead=function(){return r.post("/announcements/dismiss",{id:this.id}),a.set(this._key(),!0),this.trigger("change:unread")},t.prototype.getLocale=function(){return i.normalizeLocale(this.get("locale")||"en")},t.prototype.matchesLocale=function(e){return i.matches(e,this.getLocale())},t}(s)},{}],160:[function(e,t,n){var r,o,i,a,s;r=e("jquery"),i=e(171),a=e(133),s=e("underscore"),t.exports=o=new i([],{requiresLogin:!0,dataUrl:"/announcements"})},{}],161:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].slice;o=e(203),i=e(133),s=e(267),a=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Attachment",t.prototype.urlRoot=function(){return this.getCard().url()+"/attachments"},t.prototype.getCard=function(){return this.collection.sourceModel},t.prototype.editable=function(){return this.getCard().editable()},t.prototype.smallestPreviewBiggerThan=function(e,t){return i.smallestPreviewBiggerThan(this.get("previews"),e,t)},t.prototype.previewBetween=function(e,t,n,r){return i.previewBetween.apply(i,[this.get("previews")].concat(l.call(arguments)))},t.prototype.biggestPreview=function(){return i.biggestPreview(this.get("previews"))},t.prototype.smallestPreview=function(){return i.smallestPreview(this.get("previews"))},t.prototype.getType=function(){var e;return null!=(e=i.fileExt(this.get("name")))?e:this.get("mimeType")},t.prototype.getServiceKey=function(){var e,t,n;return this.get("isUpload")?"trello":(e=s(this.get("url")).host,n={"docs.google.com":"gdrive","drive.google.com":"gdrive","www.dropbox.com":"dropbox","onedrive.live.com":"onedrive","app.box.com":"box"},null!=(t=n[e])?t:"other")},t}(o)},{}],162:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CustomBoardBackground",t}(o)},{}],163:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(204),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="BoardInvitation",t}(o)},{}],164:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="BoardPlugin",t}(o)},{}],165:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="BoardStar",t.prototype.getBoard=function(){return this.modelCache.get("Board",this.get("idBoard"))},t}(o)},{}],166:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z=function(e,t){function n(){this.constructor=e}for(var r in t)R.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},R={}.hasOwnProperty,F=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},$=[].slice;o=e(220),i=e(221),a=e(222),s=e(76),u=e(35),c=e(15),d=void 0,t(function(){return d=e(174)}),p=e(176),h=e(275),m=e(277),f=e(278),g=void 0,t(function(){return g=e(180)}),v=e(7),b=e("hearsay"),y=e(36),w=e(205),_=e(185),k=e(24),C=e(281),x=void 0,t(function(){return x=e(186)}),j=void 0,t(function(){return j=e(188)}),S=e(200),T=void 0,t(function(){return T=e(40)}),E=e(201),O=e(227),A=e(192),M=e("bluebird"),B=e(133),D=e(123),V=e("xtend"),L=e("underscore"),I=e(109),N=e("moment"),P=1e4,n.exports=l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return z(t,e),I(S,s,t),t.prototype.typeName="Board",t.prototype.urlRoot="/1/boards",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.destruct([this.boardPluginList=new p([],{board:this}).syncCache(this.modelCache,["idBoard"],function(e){return function(t){return t.get("idBoard")===e.id}}(this)),this.listList=new x(null,{board:this}).owner(this).syncCache(this.modelCache,["idBoard","closed"],function(e){return function(t){return t.get("idBoard")===e.id&&t.isOpen()}}(this)),this.invitationList=new d([],{modelCache:this.modelCache,board:this}),this.checklistList=new g([],{modelCache:this.modelCache,board:this}),this.labelList=(new _).syncCache(this.modelCache,["idBoard"],function(e){return function(t){return t.get("idBoard")===e.id}}(this)),this.memberList=(new j).syncModel(this,"memberships",{fxGetIds:function(e){return L.pluck(e,"idMember")}}),this.adminList=(new j).syncModel(this,"memberships",{fxGetIds:function(e){return function(t){var n;return n=L.filter(t,function(t){var n,r;return n=e.modelCache.get("Member",t.idMember),"admin"===t.memberType||null!=n&&(null!=(r=e.getOrganization())?r.isPremOrgAdmin(n):void 0)}),L.pluck(n,"idMember")}}(this)}),this.pluginDataList=new A([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"board"===t.get("scope")}}(this)),this.filter=new f(this,{modelCache:this.modelCache}),this.composer=new m(null,{board:this,modelCache:this.modelCache}),this.listComposer=new C(this,{modelCache:this.modelCache}),this.viewState=new h(null,{modelCache:this.modelCache,board:this})]),this.listenForPermChange(),this.cacheShortLink()},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=D(O.boardActions)),this._actionFilter(e)},t.prototype.cacheShortLink=function(){return this.waitForAttrs(this,["id","shortLink"],function(e){var t,n;return t=e.id,n=e.shortLink,y.setBoardId(n,t)})},t.prototype.close=function(){this.update({closed:!0})},t.prototype.reopen=function(){this.update({closed:!1})},t.prototype.markAsViewed=function(){return u.isLoggedIn()?(this.set("dateLastView",(new Date).toISOString()),o({url:this.urlRoot+"/"+this.id+"/markAsViewed",type:"post",background:!0})):void 0},t.prototype.subscribe=function(e){e!==this.get("subscribed")&&this.update({subscribed:e})},t.prototype.isStarred=function(){return null!=u.me().boardStarList.getBoardStar(this.id)},t.prototype.hasUnseenActivity=function(){var e,t;return t=this.get("dateLastView"),e=this.get("dateLastActivity"),null!=t&&null!=e&&e>t},t.prototype.daysUntilPluginsDisable=function(){var e;return null!=(e=this.get("datePluginDisable"))?N(e).diff(N(),"days"):null},t.prototype.isLessActive=function(){var e,t,n;return e=null!=(t=this.get("dateLastActivity"))?t:new Date(B.idToDate(this.id)),n=N().subtract(6,"months"),n.isAfter(e)},t.prototype.getAvailableRoles=function(){return this.hasObservers()?["admin","normal","observer"]:["admin","normal"]},t.prototype.hasObservers=function(){var e;return null!=(e=this.getOrganization())?e.isFeatureEnabled("observers"):void 0},t.prototype.getPermLevel=function(){return this.getPref("permissionLevel")},t.prototype._normalizePref=function(e){return"none"===e?"disabled":e},t.prototype.getCommentPerm=function(){return this._normalizePref(this.get("prefs").comments)},t.prototype.getInvitePerm=function(){return this._normalizePref(this.get("prefs").invitations)},t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.org&&(r=this.getOrganization(),null!=r&&(n.hasOrg=!0,n.org=r.toJSON({url:!0}))),e.url&&null==n.url&&(n.url=v.getBoardUrl(this)),e.shortUrl&&null==n.shortUrl&&(n.shortUrl=v.getBoardShortUrl(this)),n},t.prototype.calcPos=function(e,t){return B.calcPos(e,this.listList,t,function(e){return e.isOpen()})},t.prototype.getCard=function(e){return B.isShortId(e)?this.modelCache.findOne("Card","idShort",Number(e)):this.modelCache.get("Card",e)},t.prototype.getList=function(e){return this.listList.get(e)},t.prototype.getUrl=function(){return v.getBoardUrl(this)},t.prototype.getChecklist=function(e){return this.modelCache.get("Checklist",e)},t.prototype.getBoardInvitation=function(e){return this.invitationList.get(e)},t.prototype.getCheckItem=function(e){var t,n,r,o,i,a;for(i=this.checklistList.models,r=0,o=i.length;o>r;r++)if(n=i[r],t=null!=n&&null!=(a=n.checkItemList)?a.get(e):void 0)return t},t.prototype.editable=function(){var e;return e=u.me(),e&&this.editableByMember(e)},t.prototype.editableByMember=function(e){return this.isMember(e)},t.prototype.isMember=function(e){var t;return"virtual"===(t=this.getMemberType(e))||"normal"===t||"admin"===t},t.prototype.getMembershipCount=function(){var e,t,n,r;return null!=(e=null!=(t=null!=(n=this.get("membershipCounts"))?n.active:void 0)?t:null!=(r=this.get("memberships"))?r.length:void 0)?e:1},t.prototype.getStarCount=function(e){var t,n;return null!=(t=null!=(n=this.get("starCounts"))?n[e]:void 0)?t:0},t.prototype.getIdTags=function(){var e;return null!=(e=this.get("idTags"))?e:[]},t.prototype.owned=function(){var e;return e=u.me(),e&&this.ownedByMember(e)},t.prototype.ownedByMember=function(e){return"admin"===this.getMemberType(e)},t.prototype.allowsSelfJoin=function(){var e;return null!=(e=this.getPref("selfJoin"))?e:!1},t.prototype.canJoin=function(){var e,t,n;return n=this.getOrganization(),null==n?!1:(t=u.me(),null!=this.getMembershipFor(t)||this.isObserver(t)?!1:(e=n.isMember(t),this.isPremOrgAdmin(t)||this.allowsSelfJoin()&&e))},t.prototype.canInviteMembers=function(){var e,t,n;return null!=this.getOrganization()||this.getPref("canInvite")?("admins"===(null!=(e=this.get("prefs"))?e.invitations:void 0)?n="admin":"members"===(null!=(t=this.get("prefs"))?t.invitations:void 0)&&(n="normal"),"admin"===this.getMemberType(u.me())||n===this.getMemberType(u.me())):!1},t.prototype.compareMemberType=function(e,t,n){return B.compareMemberType(this,e,t,n)},t.prototype.isMemberPublic=function(e){return"public"===this.getMemberType(e)},t.prototype.isMemberOrg=function(e){return"org"===this.getMemberType(e)},t.prototype.isMemberObserver=function(e){return"observer"===this.getMemberType(e)},t.prototype.memberMatchesSetting=function(e,t){switch(this.getPref(t)){case"public":return u.isLoggedIn();case"org":return this.isMember(e)||this.isMemberOrg(e)||this.isMemberObserver(e);case"observers":return this.isMember(e)||this.isMemberObserver(e);case"members":return this.isMember(e);case"admins":return this.ownedByMember(e);default:return!1}},t.prototype.isPowerUpEnabled=function(e){var t,n,r,o;return t=this.get("powerUps"),null!=t&&F.call(t,e)>=0||"calendar"===e&&(n=k.calendar,F.call(this.idPluginsEnabled(),n)>=0)||(r="cardAging"===e&&k.cardAging,F.call(this.idPluginsEnabled(),r)>=0)||(o="voting"===e&&k.voting,F.call(this.idPluginsEnabled(),o)>=0)},t.prototype.powerUpsCount=function(){return this.boardPluginList.length},t.prototype.canEnableAdditionalPowerUps=function(){return u.isLoggedIn()&&this.powerUpsCount()<u.me().getPowerUpsLimit()},t.prototype.isPluginEnabled=function(e){return this.boardPluginList.any(function(t){return t.get("idPlugin")===e})},t.prototype.enablePlugin=function(e){return new M(function(t){return function(n){return t.boardPluginList.create({idPlugin:e},{success:n})}}(this))},t.prototype.disablePlugin=function(e){var t;return t=this.boardPluginList.find(function(t){return t.get("idPlugin")===e}),t.destroy()},t.prototype.canVote=function(e){return this.memberMatchesSetting(e,"voting")},t.prototype.canComment=function(e){return this.memberMatchesSetting(e,"comments")},t.prototype.canInvite=function(e){return this.memberMatchesSetting(e,"invitations")},t.prototype.prefNames=["permissionLevel","voting","comments","invitations","selfJoin","background","cardAging","calendarFeedEnabled"],t.prototype.myPrefNames=["showSidebar","showSidebarMembers","showSidebarBoardActions","showSidebarActivity","emailKey","idEmailList","emailPosition","calendarKey","fullEmail"],t.prototype.isPublic=function(){return"public"===this.getPref("permissionLevel")},t.prototype.isPrivate=function(){return"private"===this.getPref("permissionLevel")},t.prototype.getIdBoardMems=function(){return L.map(this.memberList.models,function(e){return function(e){return e.id}}(this))},t.prototype.getOrganization=function(){return this.modelCache.get("Organization",this.get("idOrganization"))},t.prototype.hasOrganization=function(){return this.get("idOrganization")},t.prototype.snoopOrganization=function(){return this.snoop("idOrganization").map(function(e){return function(){return e.getOrganization()}}(this))},t.prototype.orgMembersAvailable=function(){var e;return e=this.getOrganization(),L.chain(e.memberList.filter(function(t){return function(t){return!e.isDeactivated(t)}}(this))).difference(this.memberList.models).value()},t.prototype.joinBoard=function(e){var t,n,r,o;return n=u.me(),t=this.isPremOrgAdmin(n),r=t?"admin":"normal",n.set("idBoards",n.get("idBoards").concat(this.id)),t&&n.set("idPremOrgsAdmin",(null!=(o=n.get("idPremOrgsAdmin"))?o:[]).concat(this.id)),this.addMember(n,r,e)},t.prototype.addMember=function(){var e,t,n,r,o;return n=arguments[0],e=3<=arguments.length?$.call(arguments,1,t=arguments.length-1):(t=1,[]),o=arguments[t++],r=e[0],null==r&&(r="normal"),this.memberList.add(n),this.api({type:"put",method:"members/"+n.id,data:{type:r}},o),this.set("memberships",this.get("memberships").concat({idMember:n.id,memberType:"normal"}))},t.prototype.removeMember=function(e){return this.memberList.remove(e),this.set("memberships",L.reject(this.get("memberships"),function(t){return t.idMember===e.id}))},t.prototype.getObserverList=function(){var e,t,n,r,o;for(r=this.memberList.models,o=[],e=0,t=r.length;t>e;e++)n=r[e],this.isObserver(n)&&o.push(n);return o},t.prototype.filterLabels=function(e){var t,n;return n=RegExp("^"+B.escapeForRegex(e)),t=[],L.chain(this.getLabels()).filter(function(t){var n,r;return(null!=(n=t.get("name"))?n.toLowerCase().indexOf(e):void 0)>-1||0===(null!=(r=t.get("color"))?r.toLowerCase().indexOf(e):void 0)||t.get("color")===w.colors[parseInt(e)-1]}).value()},t.prototype.labelForColor=function(e){return L.chain(this.getLabels()).filter(function(t){return t.get("color")===e}).first().value()},t.prototype.labelsForColors=function(){return L.chain(this.getLabels()).groupBy(function(e){return e.get("color")}).value()},t.prototype.createLabel=function(e,t){var n;n=L.find(this.getLabels(),function(n){return n.get("name")===e&&n.get("color")===t}),n||this.labelList.create({name:e,color:null!=t?t:"",uses:1},{url:"/1/board/"+this.id+"/labels/"})},t.prototype.labelColors=function(){return w.colors},t.prototype.getLabels=function(){return this.labelList.models.sort(w.compare)},t.prototype._generateKey=function(e){return this.api({type:"post",method:e+"Key/generate"})},t.prototype.generateEmailKey=function(){return this._generateKey("email")},t.prototype.generateCalendarKey=function(){return this._generateKey("calendar")},t.prototype.openCards=function(){var e;return L.flatten(function(){var t,n,r,o;for(r=this.listList.models,o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(e.openCards().models);return o}.call(this))},t.prototype.listenForPermChange=function(){var e,t,n;if(u.isLoggedIn())return n=this.getViewPermState(u.me()),t=this.owned(),e=this.debounce(function(e){return function(){var r,o;o=e.getViewPermState(u.me()),o!==n&&(n=o,e.trigger("permChange",o)),r=e.owned(),r!==t&&(t=r,e.trigger("ownedChange",r))}}(this)),this.listenTo(u.me().boardList,"add remove reset",e),this.listenTo(u.me().organizationList,"add remove reset",e),this.listenTo(this.memberList,"add remove reset",e),this.listenTo(this,"change:memberships change:prefs.permissionLevel",e)},t.prototype.getViewPermState=function(e){var t,n;return this.isObserver(e)?"observer":"normal"===(t=this.getMemberType(e))||"admin"===t?"member":B.hasValidInviteTokenFor(this)?"inviteToken":(null!=(n=this.getOrganization())?n.isMember(e):void 0)&&"org"===this.getPref("permissionLevel")?"org":"public"===this.getPref("permissionLevel")?"public":"none"},t.prototype.getClientBackgroundColor=function(e){var t,n;return null!=(t=null!=(n=c[e])?n.color:void 0)?t:c.blue.color},t.prototype.dataForLabel=function(e){return e.toJSON()},t.prototype.isViewableBy=function(e){return"none"!==this.getViewPermState(e)},t.prototype.toggleTag=function(e){return this.toggle("idTags",e,F.call(this.getIdTags(),e)<0)},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){var t;return V(null!=(t=this.getOrganization())?t.getPluginData(e):void 0,this.pluginDataList.dataForPlugin(e))},t.prototype.snoopPluginData=function(e){var t,n;return n=this.snoopOrganization().map(function(t){return null!=t?t.snoopPluginData(e):b.const(null)}).latest(),t=this.pluginDataList.snoopDataForPlugin(e),b.combine(n,t).map(function(e){return V.apply(null,e)})},t.prototype.clearPluginData=function(e){var t,n,r;return t=this.pluginDataList.for(e,"private"),null!=t&&t.destroy(),n=null!=(r=this.getOrganization())?r.pluginDataList.for(e,"private"):void 0,null!=n?n.destroy():void 0},t.prototype.idPluginsEnabled=function(){return this.boardPluginList.pluck("idPlugin")},t.prototype.snoopIdPluginsEnabled=function(){return b.combine(this.boardPluginList.snoop()).map(function(e){var t;return t=e[0],t.pluck("idPlugin")})},t.prototype.invitationUrl=function(e){return v.getBoardInvitionLinkUrl(e)},t.prototype.startDelete=function(){return this._isDeleting=!0,this.trigger("deleting"),a({method:"delete",url:this.url()}).then(function(e){return function(){return new M(function(t){var n;return(n=function(){return a({url:e.url(),fields:""}).then(function(){return setTimeout(n,500)}).catch(i.NotFound,function(){return t()}).done()})()})}}(this)).then(function(e){return function(){return e.modelCache.remove(e)}}(this)).return()},t.prototype.isDeleting=function(){return this._isDeleting},t.prototype.isOrgBoard=function(){var e,t;return e=null!=(t=this.getOrganization())?t.id:void 0,null!=e&&F.call(u.me().get("idOrganizations"),e)>=0},t.prototype.isWelcomeBoard=function(){return B.idToDate(this.get("id"))-B.idToDate(u.myId())<P},t.prototype.getAvailablePlugins=function(){return null!=this.availablePlugins?this.availablePlugins:this.availablePlugins=T.loadBoardAvailablePlugins(this.id)},t}(E)},{}],167:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D=function(e,t){function n(){this.constructor=e}for(var r in t)I.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},I={}.hasOwnProperty,N=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},V=[].slice;o=e("jquery"),O=e(123),i=e(157),a=void 0,t(function(){return a=e(170)}),s=e(220),c=e(172),u=e(76),l=e(35),p=void 0,t(function(){return p=e(180)}),h=e(7),m=e(83),f=e(36),g=e(185),v=e(199),b=e(303),y=e(206),A=e(46),w=void 0,t(function(){return w=e(188)}),_=e(282),k=e(227),C=e(192),x=e("bluebird"),j=e(194),S=e(203),T=e(133),E=e("underscore"),M=e(109),B=e("moment"),P=e(136),L=e("xtend"),n.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return D(t,e),M(v,u,t),n=1e4,t.prototype.typeName="Card",t.prototype.urlRoot="/1/cards",t.prototype.initialize=function(){return this.destruct([this.memberList=(new w).syncModel(this,"idMembers"),this.labelList=(new g).syncModel(this,"idLabels").syncCache(this.modelCache,[],function(e){return function(t){var n,r;return n=t.id,N.call(null!=(r=e.get("idLabels"))?r:[],n)>=0}}(this)),this.memberVotedList=(new w).syncModel(this,"idMembersVoted"),this.checklistList=(new p).syncCache(this.modelCache,["idCard"],function(e){return function(t){return t.get("idCard")===e.id}}(this)),this.attachmentList=(new c).syncSubModels(this,"attachments"),this.actionList=(new a).syncCache(this.modelCache,[],function(e){return function(t){var n,r,o,i;return n="commentCard"===(o=t.get("type"))||"copyCommentCard"===o,r=(null!=(i=t.get("data").board)?i.id:void 0)===e.get("idBoard"),t.includesModel(e)&&(n||r)}}(this)),this.stickerList=new j(this.get("stickers"),{card:this,modelCache:this.modelCache}).syncSubModels(this,"stickers"),this.pluginDataList=new C([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"card"===t.get("scope")}}(this)),this.memberEditingList=new w]),this.listenTo(this,"change:id change:idBoard",function(e){return function(){return e.actionList.sync()}}(this)),this._initSubEventsOn("badges"),this.cacheShortLink()},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=O(k.cardActions)),this._actionFilter(e)},t.prototype.cacheShortLink=function(){return this.waitForAttrs(this,["id","shortLink"],function(e){var t,n;return t=e.id,n=e.shortLink,f.setCardId(n,t)})},t.prototype.updateEditing=function(e){return null==this._editingTimeout&&(this._editingTimeout={}),this.memberEditingList.add(e),null!=this._editingTimeout[e.id]&&(clearTimeout(this._editingTimeout[e.id]),delete this._editingTimeout[e.id]),this._editingTimeout[e.id]=this.setTimeout(function(t){return function(){return t.memberEditingList.remove(e)}}(this),n)},t.prototype.sync=function(e,n,r){return"create"!==e||null!=this.get("idBoard")&&null!=this.get("idList")?t.__super__.sync.apply(this,arguments):(this.waitForAttrs(this,["idBoard","idList"],function(o){return function(i){return o.set(i),t.__super__.sync.call(o,e,n,r)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this)),this.waitForId(this.getList(),function(e){return function(t){return e.set("idList",t)}}(this)))},t.prototype.set=function(e,n){var r;return(null!=e?e.labels:void 0)&&(e.labels=function(){var t,n,o,i,a;for(o=e.labels,a=[],t=0,n=o.length;n>t;t++)r=o[t],a.push(null!=(i=r.color)?i:r);return a}()),(null!=e?e.badges:void 0)&&(e.badges=L(this.get("badges"),e.badges)),t.__super__.set.apply(this,arguments)},t.prototype.moveToList=function(e,t,n){var r;return null==n&&(n=!1),r=this,this.waitForId(e,function(o){return function(o){var i,a,s,u,c,l,d,p,h;if(c=e.calcPos(t,r),i=e.getBoard().composer,c===r.get("pos")&&r.get("idList")===o&&r.isOpen())return a=i.get("index"),void(a===t?i.set("index",a+1):a===t+1&&i.set("index",a-1));d=r.get("idList"),p=r.getIndexInList(),s={pos:c,idList:o,idBoard:e.getBoard().id,closed:!1};for(u in s)h=s[u],r.get(u)===h&&delete s[u];return n&&setTimeout(function(){return r.trigger("keyboardMove")}),r.update(s),(null!=i?i.get("vis"):void 0)?(a=l=i.get("index"),i.get("list").id===o&&i.get("index")>=t&&a++,i.get("list").id===d&&i.get("index")>p&&a--,i.set("index",a)):void 0}}(this))},t.prototype.moveToNextList=function(e){var t,n;n=this.getBoard().listList.models,t=E.indexOf(n,this.getList()),t<n.length-1&&this.moveToList(n[t+1],"top"===e?0:1e9,!0)},t.prototype.moveToPrevList=function(e){var t,n;n=this.getBoard().listList.models,t=E.indexOf(n,this.getList()),t>0&&this.moveToList(n[t-1],"top"===e?0:1e9,!0)},t.prototype.toggleMember=function(){var e,t,n,r,o;return t=arguments[0],e=3<=arguments.length?V.call(arguments,1,r=arguments.length-1):(r=1,[]),o=arguments[r++],n=e[0],null==n&&(n=!this.hasMember(t)),n&&l.isMe(t)&&this.set("subscribed",!0),this.toggle("idMembers",t,n,o)},t.prototype.addMember=function(e,t){return this.toggleMember(e,!0,t)},t.prototype.removeMember=function(e,t){return this.toggleMember(e,!1,t)},t.prototype.hasMember=function(e){return this.memberList.get(e)},t.prototype.getIdCardMems=function(){return E.map(this.memberList.models,function(e){return function(e){return e.id}}(this))},t.prototype.getIdCommenters=function(){var e,t;return t=[],e=E.each(this.getActions(),function(e){return function(e){var n;return"commentCard"===e.get("type")?(n=e.get("idMemberCreator"),t.push(n)):void 0}}(this)),this.idCommenters=E.uniq(t),this.idCommenters},t.prototype.hasChecklist=function(e){return this.checklistList.get(e)},t.prototype.close=function(e){this.update({closed:!0},e)},t.prototype.reopen=function(){var e;e=this.getList(),null!=e&&this.update({closed:!1,pos:e.calcPos(e.cardList.length,this)})},t.prototype.getBoard=function(){var e,t;return null!=(e=this.modelCache.get("Board",this.get("idBoard")))?e:null!=(t=this.getList())?t.getBoard():void 0},t.prototype.getIndexInList=function(){var e;return e=this.getList(),null!=e?E.indexOf(e.cardList.models,this):-1},t.prototype.getList=function(){var e,t;return null!=(e=this.modelCache.get("List",this.get("idList")))?e:null!=(t=this.collection)?t.owner:void 0},t.prototype.getUrl=function(){return h.getCardUrl(this)},t.prototype.getFullUrl=function(){return""+siteDomain+this.getUrl()},t.prototype.getDueDate=function(){var e;return(null!=(e=this.get("badges"))?e.due:void 0)?new Date(this.get("badges").due):null},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.canAttach=function(){return this.editable()&&!this.isOverLimit("attachments")},t.prototype.dateForNewComment=function(){var e,t;return 0===this.actionList.length?new Date:(t=this.actionList.sort().first(),e=B(t.getDate()).add(1,"seconds").toDate(),E.max([new Date,e]))},t.prototype.addComment=function(e){var t;t=this,""!==e&&this.waitForId(t,function(n){return function(r){var o,a,u;return a=t.getBoard(),o=new i({type:"commentCard",date:n.dateForNewComment(),data:{text:e,card:{id:t.id,name:t.get("name")},board:{id:a.id,name:a.get("name")},textData:{emoji:l.me().allCustomEmoji()}},idMemberCreator:l.myId(),display:{translationKey:"action_comment_on_card",entities:{card:{hideIfContext:!0,id:t.id,isContext:!1,shortLink:t.shortLink,text:e,type:"card"},comment:{text:e,type:"comment"},contextOn:{hideIfContext:!0,idContext:t.id,translationKey:"action_on",type:"translatable"},memberCreator:{id:l.myId(),isContext:!1,text:l.me().get("fullName"),type:"member",username:{text:l.me().get("fullName")}}}}},{modelCache:n.modelCache}),u=n.setTimeout(function(){return o.takingTooLong()},2e3),s({url:"/1/cards/"+t.id+"/actions/comments",type:"post",data:{text:e},dataType:"json",success:function(e){return clearTimeout(u),o.isTakingTooLong=!1,
n.modelCache.enqueueDelta(o,e)}})}}(this))},t.prototype.changeDueDateMaintainTime=function(e){var t,n,r;return n=null!=(r=new Date(this.get("due")))?r:(new Date).setHours(12,0,0,0),t=m.getDateWithSpecificTime(n,e),this.update({due:t})},t.prototype.vote=function(e){return this.getBoard().canVote(l.me())?this.waitForLock("vote",function(t){return function(n){var r,o;return e===t.voted()?n():(r=null!=(o=E.clone(t.get("badges")))?o:{},e?(r.votes++,r.viewingMemberVoted=!0):(r.votes--,r.viewingMemberVoted=!1),t.set("badges",r),void t.toggle("idMembersVoted",l.myId(),e,{collectionName:"membersVoted"},n))}}(this)):void 0},t.prototype.voted=function(){var e,t;return null!=(e=null!=(t=this.get("badges"))?t.viewingMemberVoted:void 0)?e:!1},t.prototype.hasStickers=function(){return this.stickerList.length>0},t.prototype.hasCover=function(){return null!=this.attachmentList.get(this.get("idAttachmentCover"))},t.prototype.getAllAgingClasses=function(){return"aging-level-0 aging-level-1 aging-level-2 aging-level-3 aging-pirate aging-regular"},t.prototype.getAgingData=function(){var e,t,n;return e=this.getBoard(),n=Date.now()-new Date(this.get("dateLastActivity")),t={level:function(){switch(!1){case!(n<T.getMs({days:7})):return 0;case!(n<T.getMs({days:14})):return 1;case!(n<T.getMs({days:28})):return 2;default:return 3}}(),mode:e.get("prefs").cardAging},t.agingClassesToAdd="aging-level-"+t.level+" aging-"+t.mode,/64$/.test(this.id)&&(t.agingClassesToAdd+=" aging-treasure"),t},t.prototype.toggleVote=function(){this.vote(!this.voted())},t.prototype.subscribe=function(e){var t;e!==this.get("subscribed")&&(t=this.get("badges"),t.subscribed=e,this.update({subscribed:e}))},t.prototype.isSubscribed=function(){var e;return E.some([this.get("subscribed"),null!=(e=this.get("badges"))?e.subscribed:void 0,this.getBoard().get("subscribed"),this.getList().get("subscribed")])},t.prototype.getCheckItem=function(e){var t,n,r,o,i,a;for(r=o=0,i=this.checklistList.length-1;i>=0?i>=o:o>=i;r=i>=0?++o:--o)if(n=this.checklistList.at(r),t=null!=n&&null!=(a=n.checkItemList)?a.get(e):void 0)return t;return null},t.prototype.toJSON=function(e){var n;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.url&&(n.url=h.getCardUrl(this)),n},t.prototype.upload=function(e,t,n){var r;return r=new FormData,r.append("token",l.myToken()),null!=t?r.append("file",e,t):r.append("file",e),s({url:"/1/cards/"+this.id+"/attachments",data:r,type:"post",processData:!1,contentType:!1,retry:!1,error:function(r){return function(o,i,a,s){var u,c,l;return l=o.status,c=o.responseJSON,r._isTooManyAttachments(l,null!=c?c.error:void 0)?n(b()):0===l||413===l?n("Error uploading "+(null!=(u=e.name)?u:t)):s()}}(this),success:function(e){return function(t){var r;return e.set("attachments",[t].concat(V.call(null!=(r=e.get("attachments"))?r:[]))),n(null,t)}}(this),timeout:T.getMs({hours:6})})},t.prototype.uploadUrl=function(e,t){return null==t&&(t=function(){}),E.isString(e)&&(e={url:e}),s({url:"/1/cards/"+this.id+"/attachments",type:"post",data:e,error:function(e){return function(n,r,o,i){var a,s;return s=n.status,a=n.responseJSON,t(e._isTooManyAttachments(s,null!=a?a.error:void 0)?b():r)}}(this),success:function(e){return function(n){var r;return e.set("attachments",[n].concat(V.call(null!=(r=e.get("attachments"))?r:[]))),t(null,n)}}(this)})},t.prototype.removeCover=function(){return this.update({idAttachmentCover:""})},t.prototype.makeCover=function(e){return this.update({idAttachmentCover:e.id})},t.prototype.calcChecklistPos=function(e,t){return T.calcPos(e,this.checklistList,t)},t.prototype.calcAttachmentPos=function(e,t){var n;return null===t.get("pos")&&this.attachmentList.models.forEach(function(e,t){var n;return n=16384*(t+1),e.update("pos",n)}),n=this.attachmentList.length-e-1,T.calcPos(n,this.attachmentList,t)},t.prototype._isTooManyAttachments=function(e,t){return 403===e&&"CARD_TOO_MANY_ATTACHMENTS"===t},t.prototype._neighbor=function(e){var t,n,r;if(n=this.getList().openCards(),r=this.getBoard().filter,t=n.indexOf(this),t>=0){for(t+=e;null!=n.at(t)&&!r.satisfiesFilter(n.at(t));)t+=e;return n.at(t)}return null},t.prototype.prevCard=function(){return this._neighbor(-1)},t.prototype.nextCard=function(){return this._neighbor(1)},t.prototype.labelCreateUrl=function(){return"/1/card/"+this.id+"/labels/"},t.prototype.copyTo=function(e){var t,n,r,o;return r=e.name,t=e.idList,o=e.pos,n=e.keepFromSource,null==r&&(r=this.get("name")),y.load(t,k.listMinimal,this.modelCache).then(function(e){return function(t){return P(t.cardList,"create",{name:r,pos:o},{createData:{idCardSource:e.id,keepFromSource:n}})}}(this))},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){return this.pluginDataList.dataForPlugin(e)},t.prototype.snoopPluginData=function(e){var t;return t=this.pluginDataList.snoopDataForPlugin(e)},t.prototype.getAgeMs=function(){return this.id?Date.now()-new Date(T.idToDate(this.id)):0},t.prototype.getIdMemberCreator=function(){var e;return e=this.actionList.find(function(e){var t;return"createCard"===(t=e.get("type"))||"copyCard"===t}),null!=e?e.get("idMemberCreator"):void 0},t.prototype.shouldSuggestDescription=function(){var e,t;return e=l.myId(),!this.get("desc")&&this.editable()&&this.getAgeMs()<T.getMs({minutes:5})&&!((null!=(t=this.get("badges"))?t.comments:void 0)>0)&&(0===this.actionList.length||this.getIdMemberCreator()===e)},t.prototype.isOverLimit=function(e){var t;return t=this.get("limits"),null==t?(A("No limits on card model"),!1):E.chain(t).pairs().any(function(t){return function(t){var n,r,o;return r=t[0],n=t[1],0===r.indexOf(e)&&"ok"!==(null!=(o=n.perCard)?o.status:void 0)}}(this)).value()},t.prototype.isVisible=function(){var e;return this.isOpen()&&(null!=(e=this.getList())?e.isOpen():void 0)},t}(S)},{}],168:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CheckItem",t.prototype.urlRoot=function(){var e;return e=this.getChecklist(),e.getCard().url()+"/checklist/"+e.id+"/checkItem"},t.prototype.sync=function(e,n,r){return null!=this.getChecklist()?this.waitForId(this.getChecklist(),function(o){return function(){return t.__super__.sync.call(o,e,n,r)}}(this)):void 0},t.prototype.getChecklist=function(){return this.collection.sourceModel},t.prototype.getCard=function(){return this.getChecklist().getCard()},t.prototype.getBoard=function(){return this.getCard().getBoard()},t.prototype.editable=function(){return this.getChecklist().editable()},t.prototype.getContext=function(){return this.getChecklist()},t.prototype.move=function(e){this.update("pos",this.getChecklist().calcPos(e,this)),this.collection.sort({silent:!0})},t}(o)},{}],169:[function(e,n,r){var o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=void 0,t(function(){return o=e(179)}),a=e(203),s=e(133),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Checklist",t.prototype.urlRoot=function(){return"/1/checklists"},t.prototype.initialize=function(){return this.destruct([this.checkItemList=(new o).syncSubModels(this,"checkItems")])},t.prototype.sync=function(e,n,r){return"create"!==e||null!=this.get("idBoard")&&null!=this.get("idCard")?t.__super__.sync.apply(this,arguments):(this.waitForAttrs(this,["idBoard","idCard"],function(o){return function(i){return o.set(i),t.__super__.sync.call(o,e,n,r)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this)),this.waitForId(this.getCard(),function(e){return function(t){return e.set("idCard",t)}}(this)))},t.prototype.getCard=function(){var e;return null!=(e=this.modelCache.get("Card",this.get("idCard")))?e:this.collection.sourceModel},t.prototype.getBoard=function(){var e;return null!=(e=this.getCard())?e.getBoard():void 0},t.prototype.getCompletedCount=function(e){var t;return t=0,this.checkItemList.each(function(e){return null!=e.get("state")&&"complete"===e.get("state")?t++:void 0}),t},t.prototype.getCheckItem=function(e){return this.checkItemList.get(e)},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.calcPos=function(e,t){return s.calcPos(e,this.checkItemList,t)},t}(a)},{}],170:[function(e,n,r){var o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(157),s=e(183),u=void 0,t(function(){return u=e(40)}),c=e("bluebird"),l=e("underscore"),a=e(221),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.model=o,t.prototype.initialize=function(e,t){this.options=t},t.prototype.comparator=function(e){return-e.getDate()||0},t.prototype._getRelatedBoards=function(){var e,t,n;return t=function(){var t,r,o,i,a,s,u;for(o=this.models,u=[],t=0,r=o.length;r>t;t++)n=o[t],("moveCardToBoard"===(i=n.get("type"))||"moveCardFromBoard"===i)&&(e=n.get("data"),u.push((null!=(a=e.boardTarget)?a.id:void 0)||(null!=(s=e.boardSource)?s.id:void 0)));return u}.call(this),t=l.compact(l.uniq(t)),t=l.reject(t,function(e){return function(t){return null!=e.modelCache.get("Board",t)}}(this)),c.resolve(t).map(function(e){return function(e){return u.loadBoardName(e).catch(a.Unauthorized,a.NotFound,function(){})}}(this))},t}(s)},{}],171:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(159),a=e(35),s=e(183),u=e(245),t.exports=i=function(e){function t(e,n){this.requiresLogin=n.requiresLogin,this.dataUrl=n.dataUrl,t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.model=o,t.prototype.sync=function(e,t,n){(!this.requiresLogin||a.isLoggedIn())&&r.ajax({url:this.dataUrl,success:function(e){return"function"==typeof n.success?n.success(t,e,n):void 0}})},t.prototype.forLocale=function(e){return this.filter(u.method("matchesLocale",e))},t}(s)},{}],172:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(161),i=e(183),a=e(83),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.initialize=function(e,t){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||a.parse(e.get("date"))},t}(i)},{}],173:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(162),i=e(183),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=r,t.prototype.url=function(){return"/1/member/"+this.member.id+"/boardBackgrounds"},t.prototype.initialize=function(e,t){this.member=t.member},t}(i)},{}],174:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(163),i=e(184),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=r,t}(i)},{}],175:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(166),i=e(183),a=e(133),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},t.prototype.comparator=function(e){var t,n,r;return n=e.getOrganization(),r=(null!=n?n.get("displayName"):void 0)||"",t=e.get("name")||"",a.rpad(r,64).toUpperCase()+t.toUpperCase()},t}(i)},{}],176:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(183),r=e(164),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=r,t.prototype.initialize=function(e,t){var n;return n=t.board,this.board=n},t.prototype.url=function(){return"/1/boards/"+this.board.id+"/boardPlugins"},t}(i)},{}],177:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(165),i=e(183),s=e(133),u=e("underscore"),a=e("bluebird"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return c(t,e),t.prototype.model=r,t.prototype.url=function(){return"/1/member/"+this.member.id+"/boardStars"},t.prototype.initialize=function(e,t){return this.member=t.member,this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.getBoardStar=function(e){return u.find(this.models,function(t){return t.get("idBoard")===e})},t.prototype.starBoard=function(e){var t;return this.getBoardStar(e)?a.reject(new Error("already starred")):(t=this.length?this.at(this.length-1).get("pos")+s.spacing:s.spacing,new a(function(n){return function(r){return n.create({idBoard:e,pos:t},{modelCache:n.modelCache},r)}}(this)))},t.prototype.unstarBoard=function(e){var t;return t=this.getBoardStar(e),null!=t?new a(function(e,n){return t.waitForId(t,function(){return t.destroy({success:e,error:function(e,t){return n(t)}})})}):a.reject(new Error("not starred"))},t.prototype.updateStarBoard=function(e,t){var n,r;return n=this.getBoardStar(e),r=this.getNewPos(n,t),null!=n?n.update({pos:r}):void 0},t.prototype.getBoards=function(){var e;return e=this.getBoardIds(),u.compact(this.modelCache.get("Board",e))},t.prototype.getBoardIds=function(){var e,t,n,r,o;for(r=u.sortBy(this.models,function(e){return e.get("pos")}),o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(n.get("idBoard"));return o},t.prototype.getBoardIndex=function(e){return this.models.filter(n).indexOf(this.getBoardStar(e))},t.prototype.getNewPos=function(e,t){var r;return r=s.calcPos(t,this,e,n)},n=function(e){var t;return t=e.getBoard(),t&&t.isOpen()},t}(i)},{}],178:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(167),i=e(183),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=r,t.prototype.initialize=function(e,t){this.listenTo(this,"change:pos",this.sort),this.list=t.list},t.prototype.url="/1/cards",t.prototype.comparator=function(e){return e.get("pos")||0},t}(i)},{}],179:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(168),i=e(183),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=r,t.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")},t}(i)},{}],180:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(169),i=e(183),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=r,t.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")},t.prototype.idList=function(){return this.pluck("id")},t}(i)},{}],181:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(183),o=e(196),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.url=function(){return"/1/member/"+this.member.id+"/customEmoji"},t.prototype.initialize=function(e,t){this.member=t.member},t}(r)},{}],182:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(35),o=e(183),i=e(197),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=i,t.prototype.url=function(){return"/1/member/"+r.me().id+"/customStickers"},t.prototype.initialize=function(e,t){this.member=t.member},t}(o)},{}],183:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty,d=[].slice;r=e(241),i=e("hearsay"),a=e(133),s=e("underscore"),u=e(245),t.exports=o=function(e){function t(e,n){this.modelCache=null!=n?n.modelCache:void 0,t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.destructor=function(){return this.stopListening(),a.shred(this)},t.prototype.create=function(){var e,n,r,o,i,a,c,l,p;return o=arguments[0],e=3<=arguments.length?d.call(arguments,1,n=arguments.length-1):(n=1,[]),a=arguments[n++],c=e[0],c||s.isFunction(a)||(c=a,a=function(){}),i=this.model,null==c&&(c={}),r=this.modelCache.lock("Collection Create"),c.success=u.concat(null!=(l=c.success)?l:function(){},function(e){return function(e){return a(null,e)}}(this)),c.error=u.concat(null!=(p=c.error)?p:function(){},function(e){return function(e,t){return a(t)}}(this)),c.complete=u.choke(0,this.modelCache,"unlock",r),null==c.modelCache&&(c.modelCache=this.modelCache),t.__super__.create.call(this,o,c)},t.prototype._update=function(e){var t,n,r;return r=e.length===this.models.length?(t=s.sortBy(e,function(e){return e.cid}),n=s.sortBy(this.models,function(e){return e.cid}),!s.isEqual(t,n)):!0,r?this.reset(e):void 0},t.prototype.owner=function(e){return this.owner=e,this},t.prototype.syncModel=function(e,t,n){var r,o,i,a;return this.sourceModel=e,r=(null!=n?n:{}).fxGetIds,this.modelCache=this.sourceModel.modelCache,i={},o=function(e){return function(){var n,o,i;return n=e.sourceModel.get(t),null!=(o=null!=(i="function"==typeof r?r(n):void 0)?i:n)?o:[]}}(this),a=function(e){return function(t){var n;return n=s.chain(t).map(function(t){return e.modelCache.get(e.model,t)}).compact().value(),e._update(n)}}(this),this.sync=function(e){return function(){var e,t,n,r;for(r=o(),i={},e=0,n=r.length;n>e;e++)t=r[e],i[t]=!0;return a(r)}}(this),this.listenTo(this.sourceModel,"change:"+t,this.sync),this.listenTo(this.modelCache,"add:"+this.model.prototype.typeName,function(e){i[e.id]&&this.add(e)}),this.listenTo(this.modelCache,"remove:"+this.model.prototype.typeName,function(e){i[e.id]&&this.remove(e)}),this.sync(),this},t.prototype.syncCache=function(e,t,n){var r,o,i,a;for(this.modelCache=e,this.sync=function(e){return function(){return e._update(e.modelCache.all(e.model).filter(n))}}(this),a=this.model.prototype.typeName,this.listenTo(this.modelCache,"add:"+a,function(e){return function(t){return n(t)?e.add(t):void 0}}(this)),this.listenTo(this.modelCache,"remove:"+a,function(e){return function(t){return n(t)?e.remove(t):void 0}}(this)),this.listenTo(this.modelCache,"reset:"+a,this.sync),o=0,i=t.length;i>o;o++)r=t[o],this.listenTo(this.modelCache,"change:"+a+":"+r,function(e){return n(e)?this.add(e):this.remove(e)});return this.sync(),this},t.prototype.syncSubModels=function(e,t){return this.sourceModel=e,null==this.modelCache&&(this.modelCache=this.sourceModel.modelCache),this.sync=function(e){return function(){var n,r,o,i,a,u,c,l,d,p;for(n=e.models,p=null!=(c=e.sourceModel.get(t))?c:[],u=function(){var e,t,n;for(n=[],e=0,t=p.length;t>e;e++)o=p[e],d=s.find(this.models,function(e){return e.id===o.id}),null!=d?this.modelCache.enqueueDelta(d,o):d=new this.model(o,{modelCache:this.modelCache,collection:this}),n.push(d);return n}.call(e),l=e.models,r=0,i=l.length;i>r;r++)a=l[r],null==a.id&&u.push(a);return e._update(u)}}(this),this.listenTo(this.sourceModel,"change:"+t,this.sync),this.sync(),this},t.prototype.snoop=function(){var e,t;return e=1<=arguments.length?d.call(arguments,0):[],t=["add","remove","reset"].concat(e.map(function(e){return["change",e].join(":")})).join(" "),new i.ContinuousSignal(function(e){return function(n){var r;return n(e),r=function(){return n(e)},e.listenTo(e,t,r),function(){return e.stopListening(e,t,r)}}}(this))},t}(r.Collection)},{}],184:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(183),o=e(83),i=e(204),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=i,t.prototype.initialize=function(e,t){this.options=t},t.prototype.comparator=function(e){return e.get("dateExpires")?-o.parse(e.get("dateExpires")):-(1/0)},t}(r)},{}],185:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(183),o=e(205),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t}(r)},{}],186:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(183),o=e(206),a=e(133),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.initialize=function(e,t){this.listenTo(this,"change:pos",this.sort),this.board=t.board},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.calcPos=function(e,t,n){return a.calcPos(e,this,t,null,n)},t.prototype.url=function(){return"/1/boards/"+this.board.id+"/lists"},t}(r)},{}],187:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(183),o=e(207),a=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.initialize=function(){return this.listenTo(this,"change:primary",this.resetPrimary)},t.prototype.resetPrimary=function(e){var t,n,r;if(e.get("primary")){for(r=this.without(e),t=0,n=r.length;n>t;t++)e=r[t],e.set("primary",!1);return this.sort()}},t.prototype.comparator=function(e){return Number(!e.get("primary"))+e.id},t.prototype.types=function(){return a.countBy(a.flatten(this.pluck("types")))},t}(r)},{}],188:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(220),o=e(35),i=e(183),a=e(208),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=a,t.prototype.sortField="fullName",t.prototype.idList=function(){return this.pluck("id")},t.prototype.remove=function(e,n){var o;return null==this.sourceModel?t.__super__.remove.apply(this,arguments):(t.__super__.remove.call(this,e),o=(null!=n?n.invite:void 0)?"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/ghost/"+e.id:"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/members/"+e.id,(null!=n?n.mass:void 0)&&(o+="/all"),r({url:o,type:"delete",success:function(e){return(null!=e?e.unreadable:0)?void 0:null!=n&&"function"==typeof n.success?n.success():void 0}}))},t.prototype.filterDeactivated=function(e){var n,r,i,a;return a=null!=e?e:{},i=a.model,n=a.force,null==i&&(i=this.sourceModel),null==n&&(n=!1),r=o.me(),new t(this.filter(function(e){return i.hasActiveMembership(e)||!n&&i.isDeactivated(e)&&i.canSeeDeactivated(r)},this.options))},t.prototype.comparator=function(e){var t;return null!=(t=e.get(this.sortField))?t.toLocaleLowerCase():void 0},t}(i)},{}],189:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(183),o=e(209),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.initialize=function(){return this.memberIndex={},this.listenTo(this,"add",function(e){return function(t){return e.memberIndex[t.get("idMember")]=t}}(this)),this.listenTo(this,"remove",function(e){return function(t){return delete e.memberIndex[t.get("idMember")]}}(this)),this.listenTo(this,"reset",function(e){return function(){var t,n,r,o,i;for(e.memberIndex={},o=e.models,i=[],t=0,n=o.length;n>t;t++)r=o[t],i.push(e.memberIndex[r.get("idMember")]=r);return i}}(this))},t.prototype.getMember=function(e){var t,n;return t=null!=(n=null!=e?e.id:void 0)?n:e,this.memberIndex[t]},t}(r)},{}],190:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(184),o=e(211),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t}(r)},{}],191:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(183),o=e(212),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},t.prototype.comparator=function(e){var t;return(null!=(t=e.get("name"))?t.toUpperCase():void 0)||""},t}(r)},{}],192:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(183),o=e(213),a=e("bluebird"),s=e("underscore"),u=e("xtend"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.model=o,t.prototype.initialize=function(e,t){return this.scopeModel=t.scopeModel},t.prototype.scope=function(){return this.scopeModel.typeName.toLowerCase()},t.prototype.for=function(e,t){return s.find(this.models,function(n){return function(r){return r.get("idPlugin")===e&&r.get("access")===t&&r.get("scope")===n.scope()&&r.get("idModel")===n.scopeModel.id}}(this))},t.prototype.create=function(e,n){return e=u(e,{scope:this.scope(),idModel:this.scopeModel.id,access:e.visibility}),t.__super__.create.call(this,e,n)},t.prototype.dataForPlugin=function(e){return s.chain(this.models).filter(function(t){return t.get("idPlugin")===e}).groupBy(function(e){return e.get("scope")}).mapObject(function(e){return s.chain(e).groupBy(function(e){return e.get("access")}).mapObject(function(e){return e[0].get("value")}).value()}).value()},t.prototype.snoopDataForPlugin=function(e){return null==this.signalCache&&(this.signalCache={}),null==this.signalCache[e]&&(this.signalCache[e]=this.snoop("value").map(function(t){return function(){return t.dataForPlugin(e)}}(this)),this.signalCache[e].addDisposer(function(t){return function(){return delete t.signalCache[e]}}(this))),this.signalCache[e]},t.prototype.upsert=function(e,t,n){var r;r=this.for(e,t),null!=r?r.update("value",n):this.create({idPlugin:e,visibility:t,value:n})},t}(r)},{}],193:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(183),o=e(215),a=e(133),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.url=function(){return"/1/member/"+this.member.id+"/savedSearches"},t.prototype.initialize=function(e,t){return this.member=t.member,this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.saveSearch=function(e,t){var n;return n=this.length?this.at(this.length-1).get("pos")+a.spacing:a.spacing,this.create({name:e,query:t,pos:n},{modelCache:this.modelCache})},t}(r)},{}],194:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(183),o=e(216),a=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.url=function(){return"/1/cards/"+this.card.get("id")+"/stickers"},t.prototype.initialize=function(e,t){this.card=t.card,this.listenTo(this,"change:zIndex",this.sort)},t.prototype.comparator=function(e){return e.get("zIndex")||0},t.prototype.nextZIndex=function(e){var t;return this.length>0?(t=a.max(this.pluck("zIndex")),(null!=e?e.get("zIndex"):void 0)===t&&1===this.filter(function(e){return e.get("zIndex")===t}).length?t:t+1):1},t}(r)},{}],195:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(183),o=e(217),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.comparator=function(e,t){return e.get("name").localeCompare(t.get("name"))},t}(r)},{}],196:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CustomEmoji",t}(o)},{}],197:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CustomSticker",t}(o)},{}],198:[function(e,n,r){var o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,
e.__super__=t.prototype,e},h={}.hasOwnProperty;i=void 0,t(function(){return i=e(188)}),c=void 0,t(function(){return c=e(191)}),a=void 0,t(function(){return a=e(40)}),s=e(202),l=e("bluebird"),d=e("underscore"),u=e(27),n.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.typeName="Enterprise",t.prototype.nameAttr="name",t.prototype.urlRoot="/1/enterprises",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.destruct([this.organizationList=(new c).syncModel(this,"idOrganizations"),this.memberList=new i])},t.prototype.loadPageOfMembers=function(e){return a.loadMembersOfEnterprise(this.get("name"),e).tap(function(e){return function(t){var n;return n=t[0],n.length>0?e.memberList.add(n):void 0}}(this))},t.prototype.loadUserTypes=function(){return a.loadEnterprise(this.id,{fields:"userTypes",organizations:"none"})},t.prototype.isRealEnterprise=function(){return u.isFeatureEnabled("enterpriseUI",this.get("products"))},t}(s)},{}],199:[function(e,t,n){var r,o;o=e("underscore"),t.exports=r=function(){function e(){}return e.prototype.getLabels=function(){return this.labelList.models},e.prototype.dataForLabel=function(e){return o.extend(e.toJSON(),{isActive:this.hasLabel(e)})},e.prototype.toggleLabelColor=function(e){var t;return t=this.getBoard().labelForColor(e),null!=t?this.toggleLabel(t):void 0},e.prototype.hasLabel=function(e){return this.labelList.contains(e)},e.prototype.toggleLabel=function(e){var t,n;return t=!this.hasLabel(e),n=e.get("uses")+(t?1:-1),this.toggle("idLabels",e.id,t),e.set("uses",n)},e.prototype.createLabel=function(e,t){var n;return(n=o.find(this.getBoard().getLabels(),function(n){return n.get("name")===e&&n.get("color")===t}))?void(this.hasLabel(n)||this.toggleLabel(n)):void this.labelList.create({name:e,color:null!=t?t:"",idBoard:this.get("idBoard"),uses:1},{url:this.labelCreateUrl()})},e}()},{}],200:[function(e,n,r){var o,i,a,s,u,c,l,d,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(222),i=e(35),a=void 0,t(function(){return a=e(189)}),c=e(125),u=e("underscore"),l=e(51),d=e("xtend"),n.exports=s=function(){function e(){}return e.prototype.orderedVisibleMembers=function(){return this.memberList.sortBy(function(e){return function(t){var n,r;return n=i.isMe(t)?"0":e.isDeactivated(t)?"3":e.isVirtual(t)?"2":"1",n+(null!=(r=t.get("fullName"))?r.toLocaleLowerCase():void 0)}}(this)).filter(function(e){return function(t){return!e.isDeactivated(t)||e.canSeeDeactivated(i.me())}}(this))},e.prototype.getMemberType=function(e){var t,n;return t=("function"==typeof this.getOrganization&&null!=(n=this.getOrganization())?n.isPremOrgAdmin(e):void 0)?"admin":this.getExplicitMemberType(e),"public"!==t&&("function"==typeof this.isVirtual?this.isVirtual(e):void 0)&&(t="virtual"),t},e.prototype._refreshMemberships=function(){return this._memberships.update(this.get("memberships"))},e.prototype._getMembershipFor=function(e){return this._memberships||(this._memberships=new a,this._refreshMemberships(),this.listenTo(this,"change:memberships",this._refreshMemberships)),this._memberships.getMember(e)},e.prototype.getMembershipFor=function(e){var t;return null!=(t=this._getMembershipFor(e))?t.toJSON():void 0},e.prototype.hasActiveMembership=function(e){return null!=this._getMembershipFor(e)&&!this.isDeactivated(e)},e.prototype.isMember=function(e){return null!=this._getMembershipFor(e)},e.prototype.isVirtual=function(e){return"ghost"===(null!=e?e.get("memberType"):void 0)},e.prototype.isDeactivated=function(e){var t;return(null!=(t=this._getMembershipFor(e))?t.get("deactivated"):void 0)===!0},e.prototype.isUnconfirmed=function(e){var t;return(null!=(t=this._getMembershipFor(e))?t.get("unconfirmed"):void 0)===!0},e.prototype.isObserver=function(e){return"observer"===this.getExplicitMemberType(e)},e.prototype.isPremOrgAdmin=function(e){var t,n,r,o;return u.isString(e)&&(e=this.modelCache.get("Member",e)),n=null!=(r=null!=e&&"function"==typeof e.get?e.get("idPremOrgsAdmin"):void 0)?r:[],t=this.getOrganization?null!=(o=this.getOrganization())?o.id:void 0:this.id,p.call(n,t)>=0},e.prototype.getExplicitMemberType=function(e){var t,n;return this.isDeactivated(e)?"deactivated":this.isUnconfirmed(e)?"unconfirmed":(t=this._getMembershipFor(e))?t.get("memberType"):("function"==typeof this.getOrganization&&null!=(n=this.getOrganization())?n.isMember(e):void 0)?"org":"public"},e.prototype.canSeeDeactivated=function(e){var t,n;return this.isMember(e)||(null!=(t=e.organizationList)?t.get(null!=(n=this.getOrganization())?n.id:void 0):void 0)},e.prototype.addMembership=function(e){var t;return t=null!=this.get("memberships")?u.clone(this.get("memberships")):[],t.push(e),this.set("memberships",t)},e.prototype._removeFromMembershipsAttribute=function(e){return this.get("memberships")?this.set("memberships",c(this.get("memberships"),e)):void 0},e.prototype.removeMembership=function(e){return this._memberships.remove(e),this._removeFromMembershipsAttribute(e)},e.prototype.setOnMembership=function(e,t){return this.set({memberships:this.get("memberships").map(function(n){return n.idMember===e.id?d(n,t):n})})},e.prototype.toggleMemberHidden=function(e,t){return o({url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/hiddenGoogleAppsMembers",type:t.type,data:{gMail:e.get("gMail")}})},e.prototype.changeMemberRole=function(e,t){return null!=t.type&&this.setOnMembership(e,{memberType:t.type}),o({type:"PUT",url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/members/"+e.id,data:t}).then(function(){return l("Member","Change Role",t.type)})},e.prototype.addMemberRole=function(e){return o({type:"PUT",url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/members",data:e}).then(function(){return l("Member","Change Role",e.type)})},e}()},{}],201:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(202),i=e("underscore"),t.exports=r=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._initSubEventsOn("myPrefs")}return a(t,e),t.prototype.myPrefNames=[],t.prototype.myPrefDefaults={},t.prototype.toJSON=function(e){var n,r,o,i,a,s;if(null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.prefs)for(a=this.myPrefNames,r=0,o=a.length;o>r;r++)i=a[r],s=this.getPref(i),n[i]=s,n[i+"_"+s]=!0;return n},t.prototype.getPref=function(e){var n,r;return u.call(this.myPrefNames,e)>=0?null!=(n=null!=(r=this.get("myPrefs"))?r[e]:void 0)?n:this.myPrefDefaults[e]:t.__super__.getPref.apply(this,arguments)},t.prototype.setPref=function(e,n,r){return u.call(this.myPrefNames,e)>=0?this.setMyPref(e,n,r):t.__super__.setPref.apply(this,arguments)},t.prototype.setMyPref=function(e,t,n){var r;return this.api({type:"put",method:"myPrefs/"+e,data:{value:t}},n),r=i.clone(this.get("myPrefs")),r[e]=t,this.set({myPrefs:r})},t}(o)},{}],202:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(203),i=e("underscore"),t.exports=r=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._initSubEventsOn("prefs")}return a(t,e),t.prototype.prefNames=[],t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),r=function(e){return function(t,o,a){var s,u,c,l,d,p,h;for(p=[],s=0,c=t.length;c>s;s++)l=t[s],u=a?a+"_"+l:l,h=null!=(d=null!=o?o[l]:void 0)?d:e.getPref(l),i.isObject(h)&&!i.isArray(h)?p.push(r(i.keys(h),h,u)):(n[u]=h,p.push(n[u+"_"+h]=!0));return p}}(this),e.prefs&&r(this.prefNames),n},t.prototype.getPref=function(e){var t;return null!=(t=this.get("prefs"))?t[e]:void 0},t.prototype.setPref=function(e,t,n){return this.update("prefs/"+e,t,n)},t.prototype.set=function(e,n){var r,o,a;if(e=i.clone(e),null!=e.prefs){o=e.prefs;for(r in o)a=o[r],"none"===a&&(a="disabled"),"owners"===a&&(a="admins"),o[r]=a}return t.__super__.set.apply(this,arguments)},t}(o)},{}],203:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty,y=[].slice,w=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(220),i=e(221),a=e(241),s=e(86),u=e("hearsay"),c=void 0,t(function(){return c=e(40)}),l=e("bluebird"),d=e("promise-queue"),p=e(115),m=e(133),f=e("underscore"),g=e(109),n.exports=g(s,p,h=function(e){function t(e,n){var r;this._marked={},this._lockQueue={},this.modelCache=null!=n?n.modelCache:void 0,this._apiQueue=new d(1),t.__super__.constructor.apply(this,arguments),null!=(r=this.modelCache)&&r.add(this)}return v(t,e),t.prototype._initSubEventsOn=function(e){return this.listenTo(this,"change:"+e,function(t){return function(n,r){var o,i,a,s,u;i=null!=(a=n.previousAttributes())?a[e]:void 0,s=[];for(o in r)u=r[o],(null==i||u!==i[o])&&s.push(t.trigger("change:"+e+"."+o));return s}}(this))},t.prototype.waitForLock=function(e,t){var n;return n=function(t){return function(){var r;return f.isEmpty(t._lockQueue[e])?delete t._lockQueue[e]:(r=t._lockQueue[e].shift())(n)}}(this),null!=this._lockQueue[e]?this._lockQueue[e].push(t):(this._lockQueue[e]=[],t(n))},t.prototype.set=function(e,n){var r,o,i,a,s,u,c,l,d,p,h,m,g,v,b,w,_,k;if(f.isArray(e)&&(e=f.find(e,function(e){return e.id===this.id||e._id===this.id})),null!=(null!=e?e._id:void 0)&&(null==e.id&&(e.id=e._id),delete e._id),_=function(){var t;t=[];for(c in e)k=e[c],c.indexOf("/")>=0&&t.push([c,k]);return t}(),_.length>0)for(e=f.clone(e),s=0,p=_.length;p>s;s++){for(g=_[s],c=g[0],k=g[1],v=c.split("/"),m=v[0],o=3<=v.length?y.call(v,1,u=v.length-1):(u=1,[]),d=v[u++],null==e[m]&&(e[m]=null!=(b=f.clone(this.get(m)))?b:{}),i=e[m],a=l=0,h=o.length;h>l;a=++l)r=o[a],i=i[r]=null!=(w=f.clone(i[r]))?w:{};i[d]=k,delete e[c]}return t.__super__.set.apply(this,arguments)},t.prototype.destructor=function(){var e,t,n,r;if(this.stopListening(),this.cancelScheduled(),null!=this._using)for(r=this._using,e=0,t=r.length;t>e;e++)n=r[e],"function"==typeof n.destructor&&n.destructor();return m.shred(this)},t.prototype.destroy=function(){return t.__super__.destroy.apply(this,arguments),this.destructor()},t.prototype.destruct=function(e){var t,n,r,o;if(f.isArray(e)){for(null==this._using&&(this._using=[]),o=[],t=0,n=e.length;n>t;t++)r=e[t],o.push(this._using.push(r));return o}return this.destruct([e])},t.load=function(e,t,n){return l.try(function(r){return function(){var o,i,a;return null==n||null==e?null:(a=function(e,t){var n;return n=f.keys(e),!f.any(n,function(e){return w.call(t,e)<0})},a(t,["query"])&&a(t.query,["fields"])&&null!=(o=n.get(r,e))&&(i=t.query.fields?t.query.fields.split(","):[],f.all(i,function(e){return o.attributes.hasOwnProperty(e)}))?o:null)}}(this)).then(function(n){return function(r){return null!=r?r:c.loadModel(n,e,t)}}(this))},t.prototype.ready=function(e){e&&(this.isReady?e():(this.waitingForReady||(this.waitingForReady=[]),this.waitingForReady.push(e)))},t.prototype.setReady=function(){var e,t,n,r;if(this.isReady=!0,this.waitingForReady)for(r=this.waitingForReady,this.waitingForReady=null,t=0,n=r.length;n>t;t++)e=r[t],"function"==typeof e&&e()},t.prototype.update=function(){var e,t,n,r,o,i,a,s,u,c;return f.isString(arguments[0])?(n=arguments[0],u=arguments[1],a=4<=arguments.length?y.call(arguments,2,e=arguments.length-1):(e=2,[]),o=a[0],r=arguments[e++],i={},i[n]=u):(i=arguments[0],s=3<=arguments.length?y.call(arguments,1,t=arguments.length-1):(t=1,[]),o=s[0],r=arguments[t++]),null!=o||f.isFunction(r)||(o=r,r=null),c=(null!=o?o:{}).waitForServer,c||this.set(i),this._persistUpdate(i,r)},t.prototype._persistUpdate=function(e,t){return this.api({type:"put",data:e},t)},t.prototype.addToSet=function(){var e,t,n,r,o,i,a,s,u,c,l;return t=arguments[0],c=arguments[1],e=4<=arguments.length?y.call(arguments,2,r=arguments.length-1):(r=2,[]),i=arguments[r++],a=e[0],null!=a||f.isFunction(i)||(a=i,i=function(){}),s=null!=a?a:{},l=s.waitForServer,n=s.collectionName,o=this,null==n&&(n=t),l||this.set(t,f.uniq((null!=(u=o.get(t))?u:[]).concat(c))),this.api({method:n,data:{value:c},success:function(e){return function(n,r){var i;return i={},i[t]=f.uniq(o.get(t).concat(c)),e.modelCache.enqueueDelta(o,i),"function"==typeof r?r(null,n):void 0}}(this)},i)},t.prototype.pull=function(){var e,t,n,r,o,i,a,s,u,c,l;return t=arguments[0],c=arguments[1],e=4<=arguments.length?y.call(arguments,2,r=arguments.length-1):(r=2,[]),i=arguments[r++],a=e[0],null!=a||f.isFunction(i)||(a=i,i=function(){}),s=null!=a?a:{},l=s.waitForServer,n=s.collectionName,o=this,null==n&&(n=t),l||this.set(t,f.without(null!=(u=o.get(t))?u:[],c)),this.api({method:n+"/"+c,type:"delete",success:function(e){return function(n,r){var i;return i={},i[t]=f.without(o.get(t),c),e.modelCache.enqueueDelta(o,i),"function"==typeof r?r(null,n):void 0}}(this)},i)},t.prototype.run=function(e,t,n){return this.api({method:e,data:t},n)},t.prototype.api=function(e,t){var n,r,a,s,u,c;return a=e.method,c=e.type,n=e.data,u=e.success,r=e.datatype,s=this,null==r&&(r=""),null==a&&(a=""),null==c&&(c="post"),null==n&&(n={}),null==u&&(u=function(e){return function(t,n){var r;t.id===s.id?e.modelCache.enqueueDelta(s,t):f.isArray(t)&&(r=f.find(t,function(e){return e.id===s.id}),null!=r&&e.modelCache.enqueueDelta(s,r)),n(null,t)}}(this)),null==t&&(t=function(){}),this.waitForId(this,function(e){return function(){var s;return s=e.url(),null!=a&&""!==a&&(s+="/"+a),l.using(e.modelCache.getLock(),function(){return e._apiQueue.add(function(){return new l(function(e,t){return o({url:s,type:c,data:n,datatype:r,success:function(t){e(l.fromNode(function(e){return u(t,e)}))},error:function(e,n,r,o){var a,s;s=e.status,a=e.responseText,r=i.fromResponse(s,a),(r instanceof i.Server||r instanceof i.NoResponse)&&o(),t(r)}})})})}).nodeify(t).catch(function(){}).done()}}(this)),this},t.prototype.toggle=function(){var e,t,n,r,o,i,a;return n=arguments[0],a=arguments[1],e=arguments[2],t=5<=arguments.length?y.call(arguments,3,r=arguments.length-1):(r=3,[]),o=arguments[r++],i=t[0],this[e?"addToSet":"pull"](n,a,i,o)},t.prototype.snoop=function(e){return null!=e?new u.ContinuousSignal(function(t){return function(n){var r;return n(t.get("attr")),r=function(){return n(t.get("attr"))},t.listenTo(t,"change:"+e,r),function(){return t.stopListening(t,"change:"+e,r)}}}(this)):new u.ContinuousSignal(function(e){return function(t){var n;return t(e),n=function(){return t(e)},e.listenTo(e,"change",n),function(){return e.stopListening(e,"change",n)}}}(this))},t.prototype.isVisibleAction=function(e){return!0},t.prototype.getActions=function(){var e;return e=1<=arguments.length?y.call(arguments,0):[],this.modelCache.all("Action").filter(function(t){return function(n){return n.includesModel(t)&&f.all(e,function(e){return n.includesModel(e)})&&t.isVisibleAction(n)}}(this))},t}(a.Model))},{}],204:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty,c=[].slice;r=e(220),i=e(203),a=e(48),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.typeName="Invitation",t.prototype.initialize=function(e,t){a("invitation",t),this.invitationList=t.collection,this.setReady()},t.prototype.create=function(e){var t,n,o,i;return o=e.model,t=e.data,i=e.success,n=e.error,r({url:"/1/"+o.typeName+"/"+o.id+"/invitations",type:"post",data:t,dataType:"json",error:function(e){return function(){var t,r,o,i,a;return t=2<=arguments.length?c.call(arguments,0,i=arguments.length-1):(i=0,[]),o=arguments[i++],r=t[0],"Member email restricted by organization administrators"===r.responseText.trim()?void e.$(".error").show():("Member already invited"!==(a=r.responseText.trim())&&"Member already a member"!==a&&"Member email restricted by organization administrators"!==a&&o(),"function"==typeof n?n(r):void 0)}}(this),success:function(e){return function(e){return"function"==typeof i?i(e):void 0}}(this)})},t.prototype.delete=function(e){var t,n,o,i;return o=e.model,n=e.idInvitation,i=e.success,t=e.error,r({url:"/1/"+o.typeName+"/"+o.id+"/invitations/"+n,type:"delete",dataType:"json",error:function(e){return function(){var e,n,r,o;return e=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),r=arguments[o++],n=e[0],"Invitation not found"!==n.responseText.trim()&&r(),"function"==typeof t?t(n):void 0}}(this),success:function(e){return function(e){return"function"==typeof i?i(e):void 0}}(this)})},t.prototype.respond=function(e){var t,n,o,i,a;return o=e.model,i=e.response,t=e.data,a=e.success,n=e.error,r({url:"/1/"+o.typeName+"/"+o.id+"/invitations/"+i,type:"post",dataType:"json",data:t,error:function(e){return function(){var e,t,r,o;return e=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),r=arguments[o++],t=e[0],"already a member"!==t.responseText.trim()&&r(),"function"==typeof n?n(t):void 0}}(this),success:function(e){return function(e){return"function"==typeof a?a(e):void 0}}(this)})},t}(i)},{}],205:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(203),i=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.typeName="Label",t.prototype.urlRoot="/1/labels",t.prototype.getBoard=function(){return this.modelCache.get("Board",this.get("idBoard"))},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.colorSortVal=function(){var e;return e=i.indexOf(t.colors,this.get("color")),e>=0?e:1/0},t.prototype.nameSortVal=function(){var e;return(null!=(e=this.get("name"))?e:"").toLowerCase()},t.compare=function(e,t){var n;return n=e.colorSortVal()-t.colorSortVal(),0===n||isNaN(n)?e.nameSortVal().localeCompare(t.nameSortVal()):n},t.colors=["green","yellow","orange","red","purple","blue","sky","lime","pink","black"],t}(o)},{}],206:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;o=e(76),i=void 0,t(function(){return i=e(178)}),s=e(203),u=e(133),l=e(147),p=e(109),h=e(146),d=e(225),m=e("xtend"),c=e("underscore"),n.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),p(o,t),t.prototype.typeName="List",t.prototype.urlRoot="/1/lists",t.prototype.initialize=function(){return this.destruct([this.cardList=new i(null,{list:this}).owner(this).syncCache(this.modelCache,["idList","closed"],function(e){return function(t){return e.id&&t.get("idList")===e.id&&t.isOpen()}}(this))])},t.prototype.sync=function(e,n,r){return"create"===e&&null==this.get("idBoard")?(this.waitForAttrs(this,["idBoard"],function(o){return function(i){return o.set(i),t.__super__.sync.call(o,e,n,r)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this))):t.__super__.sync.apply(this,arguments)},t.prototype.subscribe=function(e){e!==this.get("subscribed")&&this.update({subscribed:e})},t.prototype.move=function(e){this.update({pos:this.getBoard().calcPos(e,this)}),this.collection.sort({silent:!0})},t.prototype.close=function(){this.update({closed:!0})},t.prototype.reopen=function(){this.update({closed:!1,pos:this.getBoard().calcPos(this.collection.length,this)})},t.prototype.onChange=function(){},t.prototype.calcPos=function(e,t,n){return u.calcPos(e,this.cardList,t,null,n)},t.prototype.bottomCardPos=function(){var e;return null!=(e=this.cardList.last())?e.get("pos")+u.spacing:u.spacing},t.prototype.getBoard=function(){var e,t;return null!=(e=this.modelCache.get("Board",this.get("idBoard")))?e:null!=(t=this.collection)?t.owner:void 0},t.prototype.selectCardInList=function(e){var t;t=this.openCards().at(e),null!=t&&this.getBoard().viewState.selectCard(t)},t.prototype.selectFirstCardInList=function(){return this.selectCardInList(0)},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.getIndexInList=function(){return c.indexOf(this.getBoard().listList.models,this)},t.prototype.openCards=function(){return this.cardList},t.prototype.uploadUrl=function(e,t,n,r){return null==r&&(r=function(){}),this.cardList.create(m({name:n,pos:this.bottomCardPos()},t),{createData:{urlSource:e,name:null!=t?t.name:void 0}},r)},t.prototype._processText=function(e){var t,n,r,o,i;return/[\r\n]/.test(e)?(i=/^\s*([^\r\n]+)/.exec(e),t=i[0],r=i[1],o=h(r,256),n=e):(o=h(e,256),n=o!==e||l(e)?e:""),{name:o,desc:n}},t.prototype.uploadText=function(e,t){var n,r,o;return null==t&&(t=function(){}),e?(o=this._processText(e),r=o.name,n=o.desc,this.cardList.create({name:r,desc:n,pos:this.bottomCardPos()},t)):t()},t.prototype.upload=function(e,t,n){var r,o;return null==n&&(n=function(){}),r={name:t,idList:this.id,pos:this.bottomCardPos()},o=d(c.extend({},r,{fileSource:[e,t]})),this.cardList.create(r,o)},t}(s)},{}],207:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(203),i=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.typeName="Login",t.prototype.hasConflict=function(){var e;return e=this.collection.types(),!i.any([function(e){return function(){return i.isEmpty(e.get("types"))}}(this),function(t){return function(){return"password"in e}}(this),function(t){return function(){return e.google>=2}}(this)],function(e){return e()})},t}(o)},{}],208:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I=function(e,t){function n(){this.constructor=e}for(var r in t)N.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},N={}.hasOwnProperty,V=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("jquery"),A=e(123),a=e(220),s=e(221),u=e(222),i=e(74),c=e(35),l=e(173),d=void 0,t(function(){return d=e(175)}),p=e(177),h=e(7),m=e(181),f=e(182),v=e(101),b=e(187),w=e(25),P=e("moment"),_=void 0,t(function(){return _=e(40)}),k=e(202),C=void 0,t(function(){return C=e(191)}),x=e(227),j=e(192),S=e(193),M=e(88),T=e(118),D=e(51),E=e(133),O=e("underscore"),B=e(104),g=new Date(2016,8,21),L=null,n.exports=y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return I(t,e),n=1e4,t.prototype.typeName="Member",t.prototype.nameAttr="fullName",t.prototype.urlRoot="/1/members",t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.destruct([this.boardList=(new d).syncModel(this,"idBoards"),this.organizationList=(new C).syncModel(this,"idOrganizations"),this.pluginDataList=new j([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"member"===t.get("scope")}}(this))]),c.isMe(this)&&(this.destruct([this.boardStarList=new p([],{member:this}).syncSubModels(this,"boardStars"),this.savedSearchList=new S([],{member:this}).syncSubModels(this,"savedSearches"),this.customStickerList=new f([],{member:this}).syncSubModels(this,"customStickers"),this.boardBackgroundList=new l([],{member:this}).syncSubModels(this,"boardBackgrounds"),this.customEmojiList=new m([],{member:this}).syncSubModels(this,"customEmoji"),this.loginList=new b([],{member:this}).syncSubModels(this,"logins")]),this.isFeatureEnabled("customEmoji")&&_.loadMemberCustomEmoji(this.id).done()),this.listenTo(this,"change:editing",function(e){return function(t){var n,r;return null!=(n=e.modelCache.get("Card",null!=(r=t.get("editing"))?r.idCard:void 0))?n.updateEditing(t):void 0}}(this))},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=A(x.memberActions)),this._actionFilter(e)},t.prototype.isLoggedIn=function(){return!this.get("notLoggedIn")},t.prototype.getMembershipData=function(e){var t,n,r,o,i,a,s,u,l,d,p,h,m,f,g,v,b,y,w;return t=e.adminList.models,l=c.isMe(this),m=c.me(),h=O.some(t,function(e){return function(t){return t.id!==e.id}}(this)),d=t.length>1,p=e.memberList.length>1,y=e.getMembershipFor(this),f="admin"===e.getExplicitMemberType(this)||"admin"===(null!=y?y.memberType:void 0),v="observer"===e.getExplicitMemberType(this)||"observer"===(null!=y?y.memberType:void 0),g=!(f||v),b=e.isVirtual(this),u=e.owned(),w="org"!==e.getExplicitMemberType(this),n=u,i=!g&&h&&u,a=!v&&h&&u,o=!f&&u,s=p&&(h&&(u||l)||!l&&w&&("function"==typeof e.canInviteMembers?e.canInviteMembers():void 0)&&("function"==typeof e.compareMemberType?e.compareMemberType(m,this):void 0)>=0),r=s&&"Organization"===e.typeName&&u&&!e.isDeactivated(this)&&!b,{isMe:l,canRemove:s,canDeactivate:r,canChangeRole:n,memberIsAdmin:f,memberIsObserver:v,memberIsNormal:g,memberIsVirtual:b,canMakeMember:i,canMakeObserver:a,canMakeAdmin:o,isMoreThanOneAdmin:d,isMoreThanOneMember:p}},t.prototype.canAddBoardsTo=function(e){return null!=e.getMembershipFor(this)},t.prototype.isDismissed=function(e){var t;return V.call(null!=(t=this.get("oneTimeMessagesDismissed"))?t:[],e)>=0},t.prototype.dismiss=function(e,t){return this.isDismissed(e)?"function"==typeof t?t():void 0:this.addToSet("oneTimeMessagesDismissed",e,t)},t.prototype.dismissAd=function(e){return u({url:this.urlRoot+"/me/messagesDismissed",type:"post",data:{name:"ad-"+e}}).then(function(e){return function(t){return e.set("messagesDismissed",t.messagesDismissed)}}(this)).done()},t.prototype.shouldShowPowerUpSuggestionFor=function(e){var t,n,r;return this.hasPowerUpSuggestionsEnabled()?(n=O.findWhere(this.getDismissedPowerUpSuggestions(),{name:"power-up-suggestions-"+e}),null==n?!0:(r=P(n.lastDismissed),t=P().diff(r,"days"),t>=4)):!1},t.prototype.dismissPowerUpSuggestionFor=function(e){return u({url:this.urlRoot+"/me/messagesDismissed",type:"post",data:{name:"power-up-suggestions-"+e}}).then(function(e){return function(t){return e.set("messagesDismissed",t.messagesDismissed)}}(this)).done()},t.prototype.isAdDismissed=function(e){var t;return t=this.get("messagesDismissed"),O.find(t,function(t){return t.name==="ad-"+e})},t.prototype.dismissLanguageBannerFor=function(e,t){return this.dismiss("new-lang-"+e,t)},t.prototype.shouldShowNewLanguageBannerFor=function(e){return e=v.normalizeLocale(e),!this.isDismissed("new-lang-"+e)&&this.getLocale()!==e&&v.normalizeLocale(window.locale)!==e&&v.mostPreferred(v.preferred,[this.getLocale(),e])===e},t.prototype.toggleSubscribeOnComment=function(){return this.dismissAd("subscribeOnComment")},t.prototype.isSubscribeOnCommentEnabled=function(){var e,t,n;return e=null!=(t=null!=(n=this.isAdDismissed("subscribeOnComment"))?n.count:void 0)?t:0,e%2===0},t.prototype.owned=function(){return c.isMe(this)},t.prototype.prefNames=["minutesBetweenSummaries"],t.prototype.getLocale=function(){return this.getPref("locale")?v.normalizeLocale(this.getPref("locale")):"en"},t.prototype.getLocales=function(){return this.isLoggedIn()?[this.getLocale(),"en"]:v.preferred.map(v.normalizeLocale)},t.prototype.getMemberViewTitle=function(){var e,t,n;return t=this.get("username"),e=this.get("fullName"),n=e+" ("+t+")"},t.prototype.toggleColorBlindMode=function(){null!=this.get("prefs")&&(this.get("prefs").colorBlind?this.setPref("colorBlind",!1).save():this.setPref("colorBlind",!0).save(),o("body").toggleClass("body-color-blind-mode-enabled",this.get("prefs").colorBlind))},t.prototype.getOpenBoardsByOrg=function(e){var t,n,r,o,i,a,s,u,c,l,d,p;for(c={},l=this.boardList.models,r=0,s=l.length;s>r;r++)t=l[r],t.isOpen()&&(e&&"observer"===t.get("myPermLevel")||(n=t.toJSON(),o=null!=t.getOrganization()?n.idOrganization:"",null==c[o]&&(c[o]={boards:[],displayName:""===o?B("member boards.boards"):null!=(d=this.modelCache.get("Organization",o))?d.get("displayName"):void 0}),c[o].boards.push(n)));for(i=O.sortBy(O.keys(c),function(e){return""===e?"":c[e].displayName}),p=[],a=0,u=i.length;u>a;a++)o=i[a],p.push(c[o]);return p},t.prototype.getSortedOrgs=function(){return O.clone(this.organizationList.models).sort(function(e,t){return e.get("displayName").localeCompare(t.get("displayName"))})},t.prototype.checkColorBlindMode=function(){var e;return o("body").toggleClass("body-color-blind-mode-enabled",(null!=(e=this.get("prefs"))?e.colorBlind:void 0)===!0)},t.prototype.isFeatureEnabled=function(e){return w.isFeatureEnabled(e,this.get("products"))},t.prototype.isGold=function(){return w.hasProduct(this.get("products"))},t.prototype.isInAnyBCOrganization=function(){return this.organizationList.any(function(e){return e.isPremium()})},t.prototype.getBillingStrategy=function(e){return{flatRate:!0}},t.prototype.hasMemberAccount=function(){var e;return i.hasAccount(null!=(e=this.get("paidAccount"))?e.standing:void 0)},t.prototype.hasMemberOrOrgAccount=function(){return this.hasMemberAccount()||this.organizationList.any(function(e){return e.hasAccount()})},t.prototype.hasPowerUpSuggestionsEnabled=function(){var e,t;return e=M("powerUpSuggestions").get("maxDismissalCount"),t=this.getDismissedPowerUpSuggestions().reduce(function(e,t){return e+t.count},0),e>t},t.prototype.getDismissedPowerUpSuggestions=function(){var e;return e=this.get("messagesDismissed"),e.filter(function(e){return e.name.indexOf(!1)})},t.prototype.allCustomEmoji=function(){var e,t,n,r,o;if(e={},this.isFeatureEnabled("customEmoji"))for(o=this.customEmojiList.models,n=0,r=o.length;r>n;n++)t=o[n],e[t.get("name")]=t.get("url");return e},t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.hasPassword&&(n.hasPassword=V.call(n.loginTypes,"password")>=0),n.accountStanding=i.standingName(null!=(r=this.get("paidAccount"))?r.standing:void 0),n},t.prototype.editing=function(e){return null==e&&(e={}),O.isEqual(e,this.lastMessage)?void 0:(this.lastMessage=e,clearTimeout(this.clearLastTimeout),this.clearLastTimeout=this.setTimeout(function(e){return function(){return e.lastMessage=null}}(this),n/2),c.isLoggedIn()?a({url:this.urlRoot+"/"+this.id+"/editing",type:"post",background:!0,data:O.clone(e)}):void 0)},t.prototype.removeMembershipConfirmationKey=function(e){var t;return t="Organization"===e.typeName,c.isMe(this)?t?"leave org":"leave board":t?"remove member from org":e.isDeactivated(this)?"remove deactivated member from board":"remove member from board"},t.prototype.clearAllNotifications=function(){a({url:"/1/notifications/all/read",type:"post"})},t.prototype.getMobileTempPassword=function(e){a({url:"/1/members/me/loginToken",type:"post",data:{mode:"password"},success:function(t){return e(t.password)}})},t.prototype.maxFileSize=function(){return this.isFeatureEnabled("largeAttachments")?262144e3:10485760},t.prototype.canUploadAttachment=function(e){return e.size<this.maxFileSize()},t.prototype.accountNewerThan=function(e){return E.idToDate(this.id)>e},t.prototype.getShowDetails=function(){var e;return null!=(e=T.get("showDetails"))?e:this.accountNewerThan(g)?!1:!0},t.prototype.setShowDetails=function(e){return T.set("showDetails",e)},t.prototype.enterpriseWithRequiredConversion=function(){var e;if(null==this.get("idEnterprise"))return e=this.organizationList.find(function(e){var t,n;return null!=e.get("idEnterprise")&&null!=e.getEnterprise()&&(null!=(t=e.getEnterprise().get("prefs"))?t.mandatoryTransferDate:void 0)&&!(null!=(n=e.getEnterprise().get("prefs"))?n.ssoOnly:void 0);
}),null!=e?e.getEnterprise():void 0},t.prototype.missedTransferDate=function(){return this.get("missedTransferDate")},t.prototype.hasBCPowerUps=function(){return this.organizationList.any(function(e){return e.isFeatureEnabled("plugins")})},t.prototype.getPowerUpsLimit=function(){return this.hasBCPowerUps()?1/0:this.isFeatureEnabled("threePlugins")?3:1},t.prototype.isEnterpriseAdmin=function(){var e;return(null!=(e=this.get("idEnterprisesAdmin"))?e.length:void 0)>0},t.prototype.isEnterpriseAdminOf=function(e){return this.isEnterpriseAdmin()&&this.get("idEnterprisesAdmin").indexOf(e.id)>=0},t.prototype.loadNextSurveyDate=function(){var e,t;return t=null!=o.cookie("simulateNps"),(null!=(e=M("npsSurvey"))?e.get("showSurvey"):void 0)||t?u({url:this.url()+"/nps/nextSurveyDate",data:{pageId:"header"}}).then(function(e){return function(t){var n;return n=Date.parse(t.nextSurveyDate),n<Date.now()?u({url:e.url()+"/nps",data:{pageId:"header"}}).then(function(e){var t,n,r,o,i;return t=e.cancellations,n=e.next_survey_date,r=e.opted_out,o=e.optout_available,i=e.past_next_survey_date,i&&0===t&&!r}):!1}}(this)).catch(s,function(e){return function(){return!1}}(this)).then(function(e){return function(n){return e.update({showNps:n||t})}}(this)).done():void 0},t.prototype.shouldShowSurvey=function(){return this.get("showNps")===!0},t.prototype.dismissSurvey=function(){return this.set("showNps",!1),T.unset("npsDisplayCount"),u({url:this.url()+"/nps/cancel",method:"post",data:{pageId:"header"}}).done()},t.prototype.trackShowSurvey=function(){var e,t;return e=null!=(t=T.get("npsDisplayCount"))?t:0,e++,T.set("npsDisplayCount",e),D("NPS","Shown Survey","Count",void 0,e),u({url:this.url()+"/nps/show",method:"post",data:{pageId:"header",displayCount:e}}).done()},t.prototype.submitSurvey=function(e){var t,n,r,o,i,a;return n=e.completed,r=e.score,t=e.comment,a=e.usage,o=e.trackScore,i=e.trackUsage,this.set("showNps",!1),o&&D("NPS","Submit Survey","Score",void 0,r),i&&D("NPS","Submit Survey","Usage",a||"Not Specified"),u({url:this.url()+"/nps/survey",method:"post",data:{pageId:"header",survey_rating:r,survey_attributes_comment:t,survey_attributes_role:a,survey_completed:n}}).done()},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){return this.pluginDataList.dataForPlugin(e)},t.prototype.clearPluginData=function(e){var t;return null!=(t=this.pluginDataList.for(e,"private"))?t.destroy():void 0},t.prototype.snoopPluginData=function(e){var t;return t=this.pluginDataList.snoopDataForPlugin(e)},t}(k)},{}],209:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t}(o)},{}],210:[function(e,n,r){var o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(35),i=e(7),a=void 0,t(function(){return a=e(40)}),u=e(203),c=e(133),l=e("underscore"),d=e("xtend"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.PAGE_SIZE=10,t.prototype.typeName="Notification",t.prototype.urlRoot="/1/notifications",t.loadAllPromise=null,t.sortedByDateDescending=function(e){return l.sortBy(e.all("Notification"),function(e){return-new Date(e.get("date")).getTime()})},t.unreadCount=function(e){return e.all("Notification").filter(function(e){return e.get("unread")}).length},t.loadAllNotifications=function(e){return null!=this.loadAllPromise?this.loadAllPromise:this.loadAllPromise=a.loadAllNotificationData(e)},t.prototype.getModel=function(){return this.collection.options.model},t.prototype.getBoard=function(){var e,t,n;return null!=(e=null!=(t=this.get("data"))&&null!=(n=t.board)?n.id:void 0)?this.modelCache.get("Board",e):null},t.prototype.getMember=function(){var e;return null!=(e=this.modelCache.get("Member",this.get("idMemberCreator")))?e.toJSON():void 0},t.prototype.triggerCacheEvents=function(e,t){var n,r,o,i;for(i=this.idModels(),n=0,o=i.length;o>n;n++)r=i[n],e.trigger(t+":"+this.typeName+":"+r)},t.prototype.idModels=function(){var e,t,n,r,o;n=null!=(t=this.get("data"))?t:{},r=[];for(e in n)o=n[e],null!=(null!=o?o.id:void 0)&&r.push(o.id);return r},t.prototype.isCommentLike=function(){var e;return"commentCard"===(e=this.get("type"))||"copyCommentCard"===e},t.prototype.isAddAttachment=function(){return"addAttachmentToCard"===this.get("type")},t.prototype.getExpandedData=function(){var e,t,n,r,o;return n=d(null!=(o=this.toJSON().data)?o:{},{date:this.get("date"),unread:this.get("unread")}),n[this.get("type")]=!0,e=n.board,t=n.card,r=n.organization,n},t.prototype.markRead=function(){return this.update({unread:!1})},t.prototype.navigateToView=function(){var e;return e=this.get("data"),null!=e&&null!=e.card&&null!=e.board?(i.displayBoard({idBoard:e.board.id,idCard:e.card.id}).done(),!0):"memberJoinedTrello"===this.get("type")?(document.location="/recommend",!0):"createdEnterpriseJoinRequest"===this.get("type")&&o.me().isEnterpriseAdminOf(e.enterprise)?(i.enterpriseAdminDashboardView(e.enterprise.id),!0):!1},t.prototype.getUrlOfTarget=function(){var e;return e=this.get("data"),null!=e.enterprise&&o.me().isEnterpriseAdminOf(e.enterprise)?i.getEnterpriseAdminDashboardUrl(e.enterprise.id):null!=e.card?i.getCardUrlWithoutModels(e.board.id,e.card.id,e.card.name):null!=e.board?i.getBoardUrl(e.board):null!=e.organization?i.getOrganizationUrl(e.organization.id):i.getMemberNotificationsUrl()},t}(u)},{}],211:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(204),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="OrganizationInvitation",t}(r)},{}],212:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j=function(e,t){function n(){this.constructor=e}for(var r in t)S.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},S={}.hasOwnProperty;o=e(74),i=e(220),a=e(221),s=e(222),u=e(35),c=void 0,t(function(){return c=e(175)}),l=e(7),d=void 0,t(function(){return d=e(188)}),p=e(200),h=e(202),m=e(27),g=void 0,t(function(){return g=e(190)}),b=e(234),y=e(195),v=e(192),w=e(133),_=e("underscore"),k=e(109),C=e(51),x=e("xtend"),n.exports=f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),k(p,t),t.prototype.typeName="Organization",t.prototype.nameAttr="displayName",t.prototype.urlRoot="/1/organizations",t.prototype.initialize=function(){return t.__super__.initialize.call(this),this.destruct([this.invitationList=new g([]),this.boardList=(new c).syncModel(this,"idBoards"),this.memberList=(new d).syncModel(this,"memberships",{fxGetIds:function(e){return _.pluck(e,"idMember")}}),this.adminList=(new d).syncModel(this,"memberships",{fxGetIds:function(e){return function(e){var t;return t=function(e){var t,n;return n=e.memberType,t=e.deactivated,"admin"===n&&!t},_.pluck(_.filter(e,t),"idMember")}}(this)}),this.collaboratorList=(new d).syncModel(this,"collaborators",{fxGetIds:function(e){return _.pluck(e,"id")}}),this.tagList=(new y).syncSubModels(this,"tags"),this.pluginDataList=new v([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"organization"===t.get("scope")}}(this))]),this._slackAssociation=null},t.prototype.prefNames=["permissionLevel","orgInviteRestrict","boardVisibilityRestrict","externalMembersDisabled"],t.prototype.editable=function(){var e,t;return e=u.me(),t=this.getMembershipFor(e),e&&"admin"===(null!=t?t.memberType:void 0)},t.prototype.isPublic=function(){return"public"===this.getPref("permissionLevel")},t.prototype.isPremium=function(){return m.hasProduct(this.get("products"))},t.prototype.isBusinessClass=function(){return this.isPremium()&&!this.belongsToRealEnterprise()},t.prototype.belongsToRealEnterprise=function(){return m.isFeatureEnabled("enterpriseUI",this.get("products"))},t.prototype.hasAccount=function(){var e;return o.hasAccount(null!=(e=this.get("paidAccount"))?e.standing:void 0)},t.prototype.isPremiumMonthly=function(){return this.isPremium()&&m.isMonthly(this.get("products"))},t.prototype.isPremiumYearly=function(){return this.isPremium()&&m.isYearly(this.get("products"))},t.prototype.calculateTotalPrice=function(e){return m.getPrice(this.get("products"))*e},t.prototype.isEnterprise=function(){return null!=this.get("idEnterprise")},t.prototype.paysWithPurchaseOrder=function(){var e;return m.usesPurchaseOrder(this.get("products"))||"purchase-order@trello.com"===(null!=(e=this.get("paidAccount"))?e.contactEmail:void 0)},t.prototype.getBillingStrategy=function(e){return m.isPerUser(e)?{perUser:!0,perActiveUser:m.isPerActiveUser(e),userCount:m.isPerActiveUser(e)?this.get("activeBillableMemberCount"):this.get("billableMemberCount")}:{flatRate:!0}},t.prototype.totalPerUserPrice=function(e){var t;return t=this.getBillingStrategy(e),t.perUser?t.userCount*m.getPrice(e):void 0},t.prototype.needsBCUpgrade=function(){return 0===_.intersection([m.getProductNumber(m.currentProducts.monthly),m.getProductNumber(m.currentProducts.yearly)],this.get("products")).length},t.prototype.isMember=function(e){var t;return"virtual"===(t=this.getMemberType(e))||"normal"===t||"admin"===t},t.prototype.ownedByMember=function(e){return"admin"===this.getMemberType(e)},t.prototype.canAddBoard=function(e){var t;return this.isFeatureEnabled("restrictVis")?(t=e.get("prefs").permissionLevel,this.canSetVisibility(t)):!0},t.prototype.canSetVisibility=function(e){var t;return this.isFeatureEnabled("restrictVis")?(t=this.get("prefs").boardVisibilityRestrict[e],!t||"org"===t||"admin"===t&&this.owned()):!0},t.prototype.owned=function(){return"admin"===this.getMemberType(u.me())},t.prototype.isLinkedToGoogleApps=function(){return this.isFeatureEnabled("googleApps")&&this.get("prefs").associatedDomain},t.prototype.isFeatureEnabled=function(e){return m.isFeatureEnabled(e,this.get("products"))},t.prototype.snoopIsFeatureEnabled=function(e){return this.snoop("products").map(function(t){return function(){return t.isFeatureEnabled(e)}}(this)).distinct()},t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.url&&(n.url=l.getOrganizationUrl(this.get("name"))),n.accountStanding=o.standingName(null!=(r=this.get("paidAccount"))?r.standing:void 0),n},t.prototype.getPermLevel=function(){return this.get("prefs").permissionLevel},t.prototype.getAvailableRoles=function(){return this.isFeatureEnabled("superAdmins")?["superadmin","normal"]:["admin","normal"]},t.prototype.hasObservers=function(){return!1},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){return this.pluginDataList.dataForPlugin(e)},t.prototype.snoopPluginData=function(e){return this.pluginDataList.snoopDataForPlugin(e)},t.prototype.invitationUrl=function(e){return l.getOrganizationInvitionLinkUrl(e)},t.prototype.externalMembersDisabled=function(){return this.isFeatureEnabled("disableExternalMembers")&&this.getPref("externalMembersDisabled")},t.prototype.reactivateMember=function(e){return this.setOnMembership(e,{deactivated:!1}),s({url:"/1/organizations/"+this.id+"/members/"+e.id+"/deactivated",type:"PUT",data:{value:!1}}).catch(a.Conflict,function(t){return function(n){throw t.setOnMembership(e,{deactivated:!0}),n}}(this))},t.prototype.deactivateMember=function(e){i({url:"/1/organizations/"+this.id+"/members/"+e.id+"/deactivated",type:"PUT",data:{value:!0},success:function(){return C("Organization","Deactivate Member From Organization")}}),this.setOnMembership(e,{deactivated:!0})},t.prototype.addMember=function(e){return s({url:"/1/organizations/"+this.id+"/members/"+e.id,type:"put",data:{type:"normal"},dataType:"json"}).then(function(t){return function(n){return null!=n.token||t.memberList.find(function(t){return t.id===e.id})?void 0:(t.memberList.add(e),C("Invitations","Add Member to Organization","Role: Member"))}}(this))},t.prototype.getGoogleAppsMappings=function(){return s({url:"/1/organizations/"+this.id+"/googleApps/mappings"})},t.prototype.ensureSlackAssociation=function(){return null!=this._updateSlackAssociationOnce?this._updateSlackAssociationOnce:this._updateSlackAssociationOnce=this.updateSlackAssociation()},t.prototype.updateSlackAssociation=function(){return b.ajaxTrello({url:"/trello/"+this.id+"/association"}).tap(function(e){return function(t){var n,r;return n=t[0],r=t[1],"success"===r?((null!=n?n.associated:void 0)&&!n.teams?e._slackAssociation={associated:!0,canChange:n.canChange,adminOnly:n.adminOnly,teams:[{domain:n.domain,name:n.domain,icon:window.slackTrelloDomain+"/img/slack-default-logo.png",id:n.id,selfJoin:n.selfJoin}]}:e._slackAssociation=n,e.trigger("change:slack-association")):void 0}}(this))},t.prototype.deleteSlackAssociation=function(e){return b.ajaxTrello({url:"/trello/"+this.id+"/association?idSlackTeam="+e,type:"DELETE"}).tap(function(e){return function(){return e.updateSlackAssociation()}}(this))},t.prototype.getLatestSlackAssociation=function(){return this._slackAssociation},t.prototype.changeSlackSelfJoin=function(e,t){return b.ajaxTrello({url:"/trello/"+this.id+"/selfJoin?idSlackTeam="+t+"&value="+e,type:"PUT"}).tap(function(e){return function(){return e.updateSlackAssociation()}}(this))},t.prototype.changeSlackAdminOnlyLinking=function(e){return b.ajaxTrello({url:"/trello/"+this.id+"/adminOnlyLinking?value="+e,type:"PUT"}).tap(function(e){return function(){return e.updateSlackAssociation()}}(this))},t.prototype.getEnterprise=function(){return this.modelCache.get("Enterprise",this.get("idEnterprise"))},t.prototype.fetchCollaborators=function(){return s({url:"/1/organizations/"+this.id+"/collaborators"}).then(function(e){return function(t){return e.updateCollaboratorList(t)}}(this))},t.prototype.updateCollaboratorList=function(e){return this.set("collaborators",e)},t}(h)},{}],213:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="PluginData",t.prototype.urlRoot=function(){return"/1/"+this.get("scope")+"/"+this.get("idModel")+"/pluginData"},t}(o)},{}],214:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="Plugin",t}(o)},{}],215:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="SavedSearch",t}(o)},{}],216:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(203),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="Sticker",t}(o)},{}],217:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(203),i=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.typeName="Tag",t.prototype.urlRoot=function(){return this.getOrganization().url()+"/tags"},t.prototype.getOrganization=function(){return this.collection.sourceModel},t}(o)},{}],218:[function(e,t,n){var r,o,i,a,s;i=e("bluebird"),a=e(79),o=e(223),r=e("jquery"),s=e("xtend"),t.exports=function(e){return a(!("success"in e||"error"in e),"This is promise country!"),new i(function(t,n){return r.ajax(s(e,{success:function(e){return t(e)},error:function(e){return n(o.fromResponse(e.status,e.responseText))}}))})}},{}],219:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=[].slice;r=e("jquery"),i=e(559),a=e(35),s=e(43),u=e(133),c=e("underscore"),d=e(48),p=e(546),l=e(104),t.exports=o=new(function(){function e(){this._msBackoff=100,this._msBackoffMin=100,this._nTriesLeft=12,this._nTriesMax=12,this._retrying=!1,this._stopped=!1,this._maxLength=10,this._queue=[],this._queueIdSeq=0}return e.prototype.uniqueReqId=function(){var e;return(null!=(e=a.me())?e.id:void 0)+"-"+Math.random()},e.prototype.hasQueue=function(){return this._queue.length>0},e.prototype.inQueue=function(e){return c.find(this._queue,function(t){return t.queueId===e.queueId})},e.prototype.removeFromQueue=function(e){return this._queue=c.filter(this._queue,function(t){return t.queueId!==e.queueId})},e.prototype.addToQueue=function(e){return d("AjaxQueue","addToQueue",e),this._queue.length+1>this._maxLength?void d("AjaxQueue","maxLength exceeded"):(this._queue.push(e),this.showRetrying())},e.prototype.success=function(e){return d("AjaxQueue","success",e),this.inQueue(e)?(this.removeFromQueue(e),this._retrying=!1,this._msBackoff=this._msBackoffMin,this._nTriesLeft=this._nTriesMax,this.retryNext()):void 0},e.prototype.retryableError=function(e){return d("AjaxQueue","retryableError",e),o.inQueue(e)?this._retrying=!1:o.addToQueue(e),this.retryNext()},e.prototype.serverAlreadySaw=function(e){return this.inQueue(e)?(this.removeFromQueue(e),this.retryNext()):void 0},e.prototype.retryNext=function(){var e;if(!this._stopped){if(!this.hasQueue())return void this.hideRetrying();if(this.showRetrying(),!this._retrying)return this._retrying=!0,e=this._queue[0],this._nTriesLeft>0?(d("AjaxQueue","retrying in "+this._msBackoff+"ms",e),setTimeout(function(){return r.ajax(e)},this._msBackoff),this._msBackoff*=2,--this._nTriesLeft):(this._stopped=!0,this.showOutOfRetries())}},e.prototype.showRealError=function(e,t,n){var r;return d("AjaxQueue","showRealError",n),this.hideRetrying(),r=l("alerts.changes not saved"),i.showHtml(p.fill("connect_failed",{msg:r}),"error","AjaxQueueFail")},e.prototype.showOutOfRetries=function(){var e;return d("AjaxQueue","showOutOfRetries"),this.hideRetrying(),e=l("alerts.timed out"),i.showHtml(p.fill("connect_failed",{msg:e}),"error","AjaxQueueFail")},e.prototype.showRetrying=function(){var e;return e=this._queue.length,i.show("retrying","error","AjaxQueueRetry")},e.prototype.hideRetrying=function(){return i.hide("AjaxQueueRetry")},e.prototype.showSending=function(){return i.show("sending","warning","AjaxQueueSending")},e.prototype.hideSending=function(){return i.hide("AjaxQueueSending")},e.prototype.showUploading=function(e){return i.show(e,"info","AjaxQueueUpload")},e.prototype.hideUploading=function(){return i.hide("AjaxQueueUpload")},e.prototype.ajax=function(e){var t,n,r,i,a,s,u,l;u=c.clone(e),this._stopped||(null==u.timeout&&(u.timeout=2e4),null==u.showSendingAfter&&(u.showSendingAfter=3e3),u.queueId=this._queueIdSeq++,u.headers={"X-Trello-ReqId":this.uniqueReqId()},u.oldSuccess=u.success,u.oldError=u.error,u.ourComplete=u.complete,delete u.complete,a=u.modelCache,delete u.modelCache,l=null!=(s=u.retry)?s:!0,delete u.retry,t=!1,r=!1,i=null!=a?a.lock("AjaxQueue.ajax"):void 0,u.success=function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],o.hideSending(),o.hideUploading(),t=!0,o.success(this),"function"==typeof this.oldSuccess&&this.oldSuccess.apply(this,e),"function"==typeof this.ourComplete&&this.ourComplete(),null!=a?a.unlock(i):void 0},u.error=function(){var e,n,r,s,u,d;return e=1<=arguments.length?h.call(arguments,0):[],o.hideSending(),o.hideUploading(),t=!0,d=e[0],u=e[1],r=e[2],!l||0!==(s=d.status)&&408!==s&&500!==s?(n=function(){return o._stopped=!0,o.showRealError.apply(o,e)},c.isFunction(this.oldError)?this.oldError.apply(this,h.call(e).concat([n])):n(),"function"==typeof this.ourComplete&&this.ourComplete(),null!=a?a.unlock(i):void 0):o.retryableError(this)},/^post$/i.test(u.type)&&(n=function(e){return e.lengthComputable&&e.total>65536},u.xhr=function(e){return function(){var t,o;return o=new XMLHttpRequest,t=o.upload,null!=t&&(t.addEventListener("progress",function(t){var o;if(n(t))return r=!0,o=Math.round(100*t.loaded/t.total).toString()+"%",e.showUploading(["uploading",{percentString:o}])}),t.addEventListener("load",function(t){return r?e.showUploading("processing upload"):void 0})),o}}(this)),this.hasQueue()?o.addToQueue(u):(u.showSendingAfter>=0&&setTimeout(function(e){return function(){return t||r?void 0:o.showSending()}}(this),u.showSendingAfter),this.send(u)))},e.prototype.send=function(e){return r.ajax(e)},e}())},{}],220:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=[].slice;r=e(219),o=e(35),i=e(7),u=e(133),a=e("bluebird"),s=e("promise-queue"),c=e(245),h=e("xtend"),p=new s(3),l=function(e){var t,n;return(null!=(t=null!=(n=e.type)?n:e.method)?t:"GET").toUpperCase()},d=function(e){var t;return null==e.data&&(e.data={}),"GET"!==l(e)&&(e.data.token=o.myToken()),null==(t=e.data).invitationTokens&&(t.invitationTokens=u.invitationTokens().join(",")),e.background?void r.send(e):(null==e.modelCache&&(e.modelCache=i.getCurrentModelCache()),void r.ajax(e))},t.exports=function(e,t){return p.add(function(){var t,n,r,o;return o=null!=(n=e.success)?n:function(){},t=null!=(r=e.error)?r:function(){},new a(function(n,r){e=h(e,{success:function(){var e;e=1<=arguments.length?m.call(arguments,0):[],o.apply(null,e),n(e)},error:function(){var e;e=1<=arguments.length?m.call(arguments,0):[],t.apply(null,e),r(e)}}),d(e)})}).nodeify(t).catch(function(){}).done()}},{}],221:[function(e,t,n){var r,o,i,a,s;a=e(105),o=e(79),s=e("xtend"),i=e(103),r=a("API",["Unauthorized","Unauthenticated","Unconfirmed","Timeout","NoResponse","NotFound","Server","BadRequest","Conflict","Other"]),r.prototype.localizedMessage=function(){return i(this.message)},r.fromResponse=function(e,t){var n;switch(null!=t?n=t.toLowerCase().trim():o(0===e,"Received a response without any content!"),e){case 0:return r.NoResponse();case 400:switch(n){case"invalid token":return r.Unauthenticated();default:return r.BadRequest(t)}break;case 401:switch(n){case"invalid token":return r.Unauthenticated();case"unauthorized permission requested":case"unauthorized organization.":case"unauthorized card permission requested":return r.Unauthorized(t);case"confirm to view":return r.Unconfirmed()}break;case 403:switch(n){case"user not logged in or invalid token.":return r.Unauthenticated();default:return r.Unauthorized(t)}break;case 404:return r.NotFound(t);case 408:return r.Timeout(t);case 409:return r.Conflict(t)}return e>=500&&600>e?r.Server(t):r.Other(e+": "+t)},t.exports=r},{}],222:[function(e,t,n){var r,o,i,a,s,u;r=e(220),i=e("bluebird"),u=e(245),a=e("underscore"),s=e(79),o=e(221),t.exports=function(e){return s(!("success"in e||"error"in e),"This is promise country!"),i.fromNode(u(r,e)).catch(function(e){var t;return t=e[0],i.reject(o.fromResponse(t.status,t.responseText))}).get(0)}},{}],223:[function(e,t,n){var r,o,i,a;i=e(105),o=e(79),a=e("xtend"),r=i("Http",["NoResponse","BadRequest","Unauthorized","Forbidden","NotFound","Timeout","Conflict","Precondition","Server","Other"]),r.fromResponse=function(e,t){switch(o(t||0===e,"Received a response without any content!"),e>=500&&600>e&&r.Server(t),e){case 0:return r.NoResponse();case 400:return r.BadRequest(t);case 401:return r.Unauthorized(t);case 403:return r.Forbidden(t);case 404:return r.NotFound(t);case 408:return r.Timeout(t);case 409:return r.Conflict(t);case 412:return r.Precondition(t);default:return r.Other(e+": "+t)}},t.exports=r},{}],224:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m;u=e("underscore"),d=e(151),p=e(105),h=e(267),a=e(239),s=e("bluebird"),m=e("xtend"),i=2e4,o=p("IFrameIO",["Invalid","NotHandled","Timeout"]),l=null,c=function(){var e,t;if(null==l){if(t="iframe-io-host",l=document.createElement("div"),l.id=t,e=document.getElementsByTagName("body")[0],!e)throw Error("no body to host iframes");e.appendChild(l)}return l},t.exports=r=function(){function e(e,t){this.url=e,this.handlers=t}return e.Error=o,e.prototype._getIO=function(){return null!=this._io?this._io:this._io=new s(function(e){return function(t){var n,r,i;if(!d(e.url))throw o.Invalid("Provided iframe source not valid: "+e.url);return n=document.createElement("iframe"),n.src=e.url,e._iframeEl=n,c().appendChild(n),i=a.randomId(64),r=new a({local:window,remote:n.contentWindow,targetOrigin:h(e.url).set("pathname","").href,secret:i,handlers:m(e.handlers,{initialize:function(){return{secret:i}},ready:function(){return t(r)}})})}}(this)).timeout(i).catch(s.TimeoutError,function(e){return function(){throw("undefined"!=typeof console&&null!==console?console.error:void 0)&&console.error("Error, timeout while initializing index iframe for "+e.url+". Timeout="+i+"ms"),o.Timeout("unable to initialize iframe-io in "+i+"ms")}}(this))},e.prototype.request=function(e,t,n){return this._getIO().then(function(r){var i;return i=Date.now(),r.request(e,t).timeout(n).catch(s.TimeoutError,function(){var r;throw("undefined"!=typeof console&&null!==console?console.error:void 0)&&console.error("IFrameIO request timed out. Command="+e+", Plugin="+(null!=t&&null!=(r=t.context)?r.plugin:void 0)+", Elapsed="+(Date.now()-i)),o.Timeout(e+" did not complete in "+n+"ms")})}).catch(a.NotHandled,a.UnsupportedCommand,function(t){throw o.NotHandled("Request to run '"+e+"' failed due to error: '"+t.message+"'")})},e.prototype.drop=function(){var e;return null!=(e=this._iframeEl)?e.parentNode.removeChild(this._iframeEl):void 0},e}()},{}],225:[function(e,t,n){var r,o,i=[].slice;r=e(35),o=e("underscore"),t.exports=function(e){var t,n,a;t=new FormData,t.append("token",r.myToken());for(n in e)a=e[n],o.isArray(a)?t.append.apply(t,[n].concat(i.call(a))):t.append(n,a);return{data:t,contentType:!1,processData:!1,timeout:216e5}}},{}],226:[function(e,t,n){var r,o,i,a,s,u,c,l,d=[].slice;r=e(222),o=e(25),a=e(212),i=e(27),u=e("bluebird"),c=function(e,t){return e instanceof a?i.getProductNumber(t):o.getProductNumber(t)},l=function(){var e,t;return e=arguments[0],t=2<=arguments.length?d.call(arguments,1):[],[e.urlRoot,e.id,"paidAccount"].concat(d.call(t)).join("/")},s=t.exports={changeProduct:function(e,t){var n;return n=c(e,t),r({url:l(e,"products"),type:"POST",data:{products:[n]}})},cancel:function(e){return r({url:l(e,"cancel"),type:"POST"})},renew:function(e){return s.changeProduct(e,e.get("paidAccount").products[0])},reactivate:function(e,t){var n;return n=c(e,t),r({url:l(e,"reactivate"),type:"POST",data:{products:[n]}})},createAccount:function(e,t){return r({url:l(e),data:t,type:"POST"})},changeCreditCard:function(e,t){return r({url:l(e,"creditCard"),data:t,type:"POST"})},changeInvoiceDetails:function(e,t){return r({method:"POST",url:l(e,"invoice"),data:t})}}},{}],227:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p;s=e(245),p=e(154),i=e("underscore"),o=e(228),t.exports=r={};for(u in o)if(d=o[u],i.isObject(d))r[u]={query:d};else{if(!i.isString(d))throw new Error("Implicit coupling fell over");r[u]=d}l=function(e,t){var n;return n=i.pluck(e,"id"),t.set("idBoards",n)},r.organizationBoardsPage.mappingRules={boards:l},a=function(e,t){var n,r,o;return n=null!=(o=t.get("attachments"))?o:[],r=p(s.get("id"),n,e),t.set("attachments",r)},r.currentBoardMinimal.mappingRules={attachments:a},r.memberActions=[r.boardActions,"updateMember"].join(","),r.boardFieldsUnread=["dateLastActivity","dateLastView"],r.boardAttachment={query:{lists:"open",cards:"visible",fields:"name,prefs,shortLink,url"}},r.boardFieldsMinimalMemberships=["name","closed","memberships"].join(","),r.enterpriseMemberFields=["avatarHash","fullName","initials","username","userType","active","roles","memberType","confirmed"].join(","),r.organizationFieldsMinimalMemberships=[r.organizationFieldsMinimal,"memberships"],r.organizationFieldsMembersPage=[r.organizationBoardsFields,"memberships"].join(","),c=function(e,t){var n,r,o;return n=null!=(o=t.get("memberships"))?o:[],r=p(s.get("id"),n,e),t.set("memberships",r)},r.boardMinimal={query:{fields:r.boardFieldsMinimal,organization:!0,organization_fields:r.organizationFieldsMinimal,myPermLevel:!0,memberships:"me"},mappingRules:{memberships:c}},r.boardsMenuMinimal={query:{boards:"open,starred",board_fields:r.boardFieldsMinimal,boardStars:!0,organizations:"all",organization_fields:r.organizationFieldsMinimal,board_organization:!0,board_organization_fields:r.organizationFieldsMinimal,board_myPermLevel:!0,board_memberships:"me"},mappingRules:{memberships:c}},r.boardsMenu={query:{fields:"",board_fields:r.boardFieldsMinimal,organizations:"all",organization_fields:r.organizationFieldsMinimal,board_organization:!0,board_organization_fields:r.organizationFieldsMinimal,paid_account:!0}},r.memberUnreadBoards={query:{fields:"",boards:"open,starred",board_fields:r.boardFieldsUnread}},r.boardUnread={query:{fields:r.boardFieldsUnread}},r.cardDetails={query:{actions:r.cardActions,actions_display:!0,action_memberCreator_fields:r.memberFieldsAndPremOrgsAdmin,members:!0,member_fields:r.memberFieldsStatus,attachments:!0,fields:"email",checklists:"all",list:!0,pluginData:!0}},r.cardAttachment={query:{board:!0,members:!0,member_fields:r.memberFieldsStatus,attachments:!0,fields:"all",checklists:"all",list:!0,pluginData:!0}},r.cardMinimal={query:{fields:r.cardFieldsBulk}},r.cardVoters={query:{fields:"idMembersVoted",membersVoted:!0}},r.cardCopy={query:{members:!0,member_fields:r.memberFieldsStatus,attachments:!0,stickers:!0,fields:"name",checklists:"all"}},r.cardList={query:{fields:"all"}},r.memberAccount={query:{tokens:"all",sessions:"all",credentials:"all",paid_account:!0,credits:"invitation,promoCode",organizations:"all",organization_paid_account:!0,logins:!0}},r.memberPaidAccount={query:{paid_account:!0}},r.orgMemberCards={query:{board:!0,list:!0,fields:"badges,closed,dateLastActivity,due,dueComplete,idAttachmentCover,idList,idBoard,idMembers,idShort,labels,name,url",attachments:"true",members:"true",stickers:"all",member_fields:r.memberFields,board_fields:r.boardFieldsMinimalMemberships}},r.memberCards={query:{boards:"open",board_fields:"name,closed,idOrganization,prefs",board_lists:"open",board_memberships:"me",organizations:"all",organization_fields:"displayName,name,prefs,products,url",organization_memberships:"me",organization_paid_account:!0,paid_account:!0},mappingRules:{memberships:c}},r.memberMinimal={query:{fields:r.memberFields}},r.memberProfile={query:{actions:"all",actions_limit:10,actions_display:!0,organizations:"all",organization_fields:r.organizationFieldsMinimal,organization_paid_account:!0,boards:"open",board_fields:"name,prefs,idOrganization",paid_account:!0}},r.memberProfile_daysBack=30,r.organization={query:{boards:"open",board_fields:r.boardFieldsMinimal,enterprise:!0,fields:"all",members:"all",member_fields:r.memberFieldsStatus,membersInvited:"all",membersInvited_fields:r.memberFields,paid_account:!0},mappingRules:{boards:l}},r.organizationExports={query:{exports:!0,fields:"all",paid_account:!0}},r.organizationPaidAccount={query:{paid_account:!0}},r.organizationMembers={query:{fields:r.organizationFieldsMembersPage,members:"all",member_fields:r.memberFieldsStatus,membersInvited:"all",membersInvited_fields:r.memberFields,
paid_account:!0,tags:!0}},r.organizationMembersExtra={query:{members:"all",member_activity:!0,boards:"open",board_fields:r.boardFieldsMinimalMemberships},mappingRules:{boards:l}},r.organizationMembersMinimal={query:{members:"all",fields:r.organizationFieldsMinimalMemberships}},r.organizationMinimal={query:{fields:"all",tags:!0}},r.memberNotifications={query:{notifications:"all",notifications_limit:10,notifications_display:!0}},r.organizations={query:{organizations:"all",organization_paid_account:!0}},r.idCard={query:{fields:"",checkItemStates:!1}},r.cardsAndListsMinimal={query:{lists:"open",list_fields:"name,pos,idBoard,closed",cards:"visible",card_fields:"idList,idBoard,pos,closed"}},r.listsMinimal={query:{lists:"open",list_fields:"name,pos,idBoard,closed"}},r.listMinimal={query:{fields:"name,pos,idBoard,closed"}},r.archivedLists={query:{lists:"closed",list_fields:"name,pos,idBoard,closed"}},r.action={query:{display:!0,memberCreator:!0}},r.bcFeatures={query:{boards:"open",board_fields:"all",board_starCounts:"organization",board_membershipCounts:"active",fields:"all",paid_account:!0,memberships:"all",members:"all",tags:!0}},r.memberOrganizationDeactivatedMembers={query:{fields:"all",memberships:"deactivated"},mappingRules:{memberships:c}}},{}],228:[function(e,t,n){var r;t.exports=r={},r.boardFieldsMinimal=["name","closed","dateLastActivity","dateLastView","datePluginDisable","idOrganization","prefs","shortLink","shortUrl","url"].join(","),r.boardFieldsFull=[r.boardFieldsMinimal,"desc","descData","idTags","invitations","invited","labelNames","memberships","pinned","powerUps","subscribed"].join(","),r.boardFieldsMinimalSubscribed=[r.boardFieldsMinimal,"subscribed"].join(","),r.memberFields=["fullName","initials","idEnterprise","memberType","username","avatarHash","bio","bioData","confirmed","products","url"].join(","),r.memberFieldsStatus=[r.memberFields,"status"].join(","),r.memberFieldsAndPremOrgsAdmin=[r.memberFields,"idPremOrgsAdmin"].join(","),r.organizationFieldsMinimal=["name","displayName","products","prefs","logoHash","idEnterprise","tags"].join(","),r.organizationFieldsMinimalMemberships=[r.organizationFieldsMinimal,"memberships"].join(","),r.cardFieldsBulk=["badges","closed","dateLastActivity","desc","descData","due","dueComplete","idAttachmentCover","idList","idBoard","idMembers","idShort","idLabels","limits","name","pos","shortUrl","shortLink","subscribed","url"].join(","),r.boardFieldsInOrganization=[r.boardFieldsMinimal,"idTags"].join(","),r.organizationBoardsFields=[r.organizationFieldsMinimal,"desc","descData","website"].join(","),r.cardActions=["addAttachmentToCard","addChecklistToCard","addMemberToCard","commentCard","copyCommentCard","convertToCardFromCheckItem","createCard","copyCard","deleteAttachmentFromCard","emailCard","moveCardFromBoard","moveCardToBoard","removeChecklistFromCard","removeMemberFromCard","updateCard:idList","updateCard:closed","updateCard:due","updateCard:dueComplete","updateCheckItemStateOnCard"].join(","),r.boardActions=[r.cardActions,"addMemberToBoard","addToOrganizationBoard","copyBoard","createBoard","createList","deleteCard","disablePlugin","disablePowerUp","enablePlugin","enablePowerUp","makeAdminOfBoard","makeNormalMemberOfBoard","makeObserverOfBoard","moveListFromBoard","moveListToBoard","removeFromOrganizationBoard","unconfirmedBoardInvitation","unconfirmedOrganizationInvitation","updateBoard","updateList:closed"].join(","),r.card={fields:"all",stickers:!0,attachments:!0,pluginData:!0},r.currentBoardMinimal={lists:"open",cards:"visible",card_attachments:"cover",card_stickers:!0,card_fields:[r.cardFieldsBulk,"labels"].join(","),card_checklists:"none",members:"all",member_fields:r.memberFieldsStatus,membersInvited:"all",membersInvited_fields:r.memberFields,memberships_orgMemberType:!0,checklists:"none",organization:!0,organization_fields:"name,displayName,desc,descData,url,website,prefs,memberships,logoHash,products",organization_tags:!0,myPrefs:!0,fields:r.boardFieldsFull},r.currentBoardSecondary={fields:"",actions:r.boardActions,actions_display:!0,actions_limit:50,action_memberCreator_fields:r.memberFieldsAndPremOrgsAdmin,checklists:"none",cards:"visible",card_fields:"",card_checklists:"all",card_checklist_checkItems:"none",labels:"all",labels_limit:1e3},r.currentBoardPluginData={fields:"",boardPlugins:!0,cards:"visible",card_fields:"",card_attachments:!0,card_attachment_fields:"bytes,date,edgeColor,idMember,isUpload,mimeType,name,url",pluginData:!0,card_pluginData:!0,organization:!0,organization_fields:"",organization_pluginData:!0},r.memberBoards={boards:"open,starred",board_fields:r.boardFieldsMinimalSubscribed,boardStars:!0,boardsInvited:"all",boardsInvited_fields:r.boardFieldsMinimalSubscribed,board_organization:!0,board_organization_fields:r.organizationFieldsMinimal,credits:"invitation,promoCode",organizations:"all",organization_fields:r.organizationFieldsMinimalMemberships,organizationsInvited:"all",organizationsInvited_fields:r.organizationFieldsMinimal,paid_account:!0},r.memberHeader={channels:!0,notifications:"all",notifications_limit:10,notifications_display:!0,notification_memberCreator_fields:r.memberFields,organizations:"all",organization_paid_account:!0,organization_fields:"name,displayName,idEnterprise",organization_enterprise:!0,paid_account:!0,pluginData:!0,savedSearches:!0,missedTransferDate:!0,enterprises:!0},r.organizationBoardsPage={boards:"open",board_fields:r.boardFieldsInOrganization,board_starCounts:"organization",board_membershipCounts:"active",fields:r.organizationBoardsFields,paid_account:!0,memberships:"active",members:"all",tags:!0},r.memberQuickBoards={fields:"idOrganizations",boards:"open,starred",board_fields:r.boardFieldsMinimal,boardStars:!0,organizations:"all",organization_fields:"idBoards"},r.quickBoardsSearch=function(e){return{query:e,modelTypes:"boards",board_fields:r.boardFieldsMinimal,partial:!0}}},{}],229:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=[].slice;o=e(221),i=e(35),a=e(241),s=e(230),u=e(43),c=e(7),l=e(110),d=e("bluebird"),h=e("underscore"),f=e(48),m=e(245),g=e(105),p=g("RPC",["SyncError","BatchError"]),v=function(e){try{return JSON.parse(e)}catch(e){return null}},t.exports=r=function(){function e(e){for(this.delegate=e,this.idBoardToPoll=null,this.modelIxUpdate={},this.msPoll=2e3,this.msPollIdle=1e4,this.ajaxSessionId=Math.random().toString().substring(2);this.ajaxSessionId.length<16;)this.ajaxSessionId+="0";this.consecutiveFailures=0,this.consecutiveFailuresAllowed=300,this.totalFailures=0,this.totalFailuresAllowed=1e3}return h.extend(e.prototype,a.Events),e.prototype.subscribe=function(e,t,n,r){return"function"==typeof r?r():void 0},e.prototype.unsubscribe=function(e,t,n){return"function"==typeof n?n():void 0},e.prototype.resync=function(){},e.prototype._getPollLength=function(){return i.isLoggedIn()&&"active"===l.getStatus()?this.msPoll:this.msPollIdle},e.prototype.stopPolling=function(){return null!=this._pollingTimeout?(clearTimeout(this._pollingTimeout),delete this._pollingTimeout):void 0},e.prototype.poll=function(){return this._pollingTimeout=setTimeout(function(e){return function(){return e.consecutiveFailures>=e.consecutiveFailuresAllowed||e.totalFailures>=e.totalFailuresAllowed?void e.trigger("connect_failed"):e.doPoll(function(t){if(null!=t){if("syncError"===t)return;e.trigger("connecting"),++e.consecutiveFailures,++e.totalFailures}else e.consecutiveFailures>0&&e.trigger("reconnect"),e.consecutiveFailures=0;return e.poll()})}}(this),this._getPollLength())},e.prototype.doPoll=function(){var e,t,n,r,o,i,a,s,u,c,l;if(e=2<=arguments.length?b.call(arguments,0,t=arguments.length-1):(t=0,[]),s=arguments[t++],r=e[0],a=e[1],l=[],null==a&&(a=this),h.isArray(r))for(o=0,i=r.length;i>o;o++)n=r[o],l.push(this.delegate.currentSubscriptions[n]);else{if(null!=r)return void f("rpc","Bad argument to doPoll: "+r);u=this.delegate.currentSubscriptions;for(n in u)c=u[n],l.push(c)}return h.isEmpty(l)?(f("rpc","No models to poll for "+r),"function"==typeof s?s():void 0):this._doPoll(l,a,s)},e.prototype._doPoll=function(e,t,n){var r,i;return i=new s,r=e.map(function(e){return function(n){var r,a,s,u,c;return s=n.modelType,r=n.idModel,a=n.ixLastUpdate,u=n.tags,c="/"+s+"/"+r+"/deltas?ixLastUpdate="+encodeURIComponent(a.toString())+"&tags="+encodeURIComponent(u.join(",")),i.request(c).tap(function(n){var o;return null!=n.syncError?d.reject(p.SyncError(n.syncError)):(e.delegate.setIxLastUpdate(r,n.modelIxUpdate[r]),h.chain(null!=(o=n.messages)?o:[]).map(v).compact().forEach(function(e){var n,r;r=e.notify,n=e.idModelChannel,t.trigger(r.event,h.extend({idModelChannel:n},r))}),void(e.dateLastMessage=Date.now()))}).catch(o,function(){})}}(this)),d.all(r).catch(p.SyncError,function(e){return function(t){return c.syncError(t),e.stopPolling()}}(this)).catch(s.BatchFailure,function(){}).done(),i.send().tap(function(e){var t;return t=e.jqxhr,u.setServerVersionFromResponse(t)}).catch(s.BatchFailure,function(e){var t,n;return n=e.message,t=e.error,d.reject(p.BatchError(n,{error:t}))}).nodeify(n).done()},e}()},{}],230:[function(e,t,n){var r,o,i,a,s,u,c,l;r=e("jquery"),o=e(221),c=e(253),l=e(245),u=e(79),a=e("bluebird"),s=e("underscore"),t.exports=i=function(){function e(){this._requests=[]}return e.BatchFailure=c("Batcher::BatchFailure"),e.prototype._sent=!1,e.prototype.request=function(e){return u(!this._sent,"Cannot add requests to a batcher after sending!"),new a(function(t){return function(n,r){return t._requests.push({url:e,resolve:n,reject:r})}}(this))},e.prototype.send=function(){var t;return u(!this._sent,"Cannot send more than once!"),this._sent=!0,t=this._requests.map(l.get("url")).join(","),new a(function(n){return function(i,a){return r.ajax({data:{urls:t},url:"/1/batch",success:function(e,t,r){var a,u,c,l,d,p,h,m;for(c=s.zip(e,n._requests),a=0,u=c.length;u>a;a++)l=c[a],m=l[0],d=l[1],h=d.resolve,p=d.reject,"200"in m?h(m[200]):p(o.fromResponse(m.statusCode,m.message));return i({jqxhr:r})},error:function(t){var r,i,s,u,c,l,d;for(d=t.status,l=t.responseText,r=o.fromResponse(d,l),u=n._requests,i=0,s=u.length;s>i;i++)(c=u[i].reject)(e.BatchFailure("",{error:r}));return a(r)}})}}(this))},e}()},{}],231:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=[].slice;r=e(229),o=e(35),i=e(241),s=e(235),u=e(232),c=e(118),l=e("underscore"),d=e(48),p=e(51),window.dropTheHammer=function(){return c.set("useWebsockets","yes"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Websockets engaged! Reload the page, please. Use pitStop() to turn sockets off."):void 0},window.pitStop=function(){return c.set("useWebsockets","no"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Shutting Websockets down! Reload the page, please. Use dropTheHammer() to turn sockets back on."):void 0},a=function(){function e(){this.rpcSocket=this.rpcAJAX=this.rpcCurrent=null,this.currentSubscriptions={},this.fReadyToSubscribe=!1,this.deferredQueue=[],this.handleLogin()}return l.extend(e.prototype,i.Events),e.prototype.rpcReady=function(){var e,t,n,r;for(this.fReadyToSubscribe=!0,this.isUsingSocket()||this.rpcCurrent.poll(),this.trigger("ready"),r=this.deferredQueue,t=0,n=r.length;n>t;t++)(e=r[t])();return this.listenTo(this,"reconnect",function(e){return function(){return e.resubscribe()}}(this))},e.prototype.resubscribe=function(){var e,t,n,r;this.rpcCurrent.resync(),t=this.currentSubscriptions,n=[];for(e in t)r=t[e],n.push(this.subscribe(r.modelType,e,r.tags));return n},e.prototype.setActiveRPC=function(e){this.stopListening(this.rpcCurrent),this.rpcCurrent=e,this.listenTo(this.rpcCurrent,"all",function(e){return function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],e.trigger.apply(e,t)}}(this))},e.prototype.lazyCreateRPC=function(){var e,t,n;if(!this.rpcCurrent){if(this.rpcSocket=new u(this),this.rpcAJAX=new r(this),this.setActiveRPC(this.rpcAJAX),e=function(){return null!=("undefined"!=typeof performance&&null!==performance?performance.now:void 0)?performance.now():+new Date},this.rpcSocket.hasSocketTransport()){if(this.rpcSocket.connectedOnce)return;return n=e(),t=8e3,setTimeout(function(e){return function(){return e.fReadyToSubscribe?void 0:(d("rpc","Socket not responsive. Using AJAX."),e.rpcSocket.disconnect(),e.rpcReady())}}(this),t),this.rpcSocket.ping(function(t){return function(r,o){t.fReadyToSubscribe?(t.rpcSocket.disconnect(),p("RPC","No Sockets","Slow ping",e()-n)):(d("rpc","Socket responded to ping in a timely fashion. Using sockets."),t.setActiveRPC(t.rpcSocket),t.rpcReady())}}(this))}return d("rpc","No socket connect. Using AJAX."),this.rpcReady()}},e.prototype.handleLogin=function(){return o.isLoggedIn()?this.lazyCreateRPC():void 0},e.prototype.unsubscribe=function(e,t){return this.lazyCreateRPC(),this.rpcCurrent.unsubscribe(e,t),delete this.currentSubscriptions[t]},e.prototype.subscribe=function(e,t,n){var r;return this.lazyCreateRPC(),null!=(r=this.currentSubscriptions[t])?r.tags=l.union(r.tags,n):this.currentSubscriptions[t]={tags:n,ixLastUpdate:-1,modelType:e,idModel:t},this.fReadyToSubscribe?this.rpcCurrent.subscribe(e,t,n):(d("rpc","deferring subscribe to "+e+" "+t),void this.deferredQueue.push(function(r){return function(){return r.rpcCurrent.subscribe(e,t,n)}}(this)))},e.prototype.getIxLastUpdate=function(e){var t;return null!=(t=this.currentSubscriptions[e])?t.ixLastUpdate:void 0},e.prototype.setIxLastUpdate=function(e,t){var n;return null!=(n=this.currentSubscriptions[e])?n.ixLastUpdate=t:void 0},e.prototype.resync=function(){var e,t;return t=1<=arguments.length?h.call(arguments,0):[],this.lazyCreateRPC(),"function"==typeof(e=this.rpcCurrent).resync?e.resync.apply(e,t):void 0},e.prototype.isUsingSocket=function(){return null!=this.rpcCurrent&&this.rpcCurrent===this.rpcSocket},e}(),t.exports=window.rpc=new a},{}],232:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=[].slice;r=e(35),o=e(241),i=e(43),a=e(110),s=e(235),c=e(118),l=e(133),d=e("underscore"),p=e(48),h=e(51),t.exports=u=function(){function e(e){var t,n,o,i,u,d,m,f,g,v;if(this.delegate=e,this.reqid=0,this.dictCallback={},this.dictTime={},this.connectedOnce=!1,this.modelIxUpdate={},this.hasSockets="WebSocket"in window&&"no"!==c.get("useWebsockets"),"WebSocket"in window?"no"===c.get("useWebsockets")&&h("RPC","No Sockets","pitStop"):h("RPC","No Sockets","No WebSocket"),this.hasSockets){for(p("rpc","opening newSocket"),m="http:"===document.location.protocol?"ws:":"wss:",this.socket=new s(m+"//"+document.location.host+"/1/Session/socket?token="+r.myToken(),{maxReconnectDelay:64e3,failedConsecutiveReconnectsLimit:10,reconnectRateLimit:3,reconnectRateWindow:l.getMs({minutes:5}),maxReconnectsPerDay:100,fxReconnectDelay:function(e){var t,n,r,o;if(o=a.getStatus(),r="active"===o?l.randomWait(l.getMs({seconds:10}),l.getMs({seconds:30})):l.randomWait(l.getMs({seconds:30}),l.getMs({minutes:2})),t="active"===o?l.randomWait(100,l.getMs({seconds:1})):l.randomWait(l.getMs({seconds:2}),l.getMs({seconds:10})),null==e||1006===e.code)return r;if(4e3===e.code){try{n=parseInt(e.reason,0)}catch(e){}return"active"===o?l.randomWait(l.getMs({seconds:n}),4*l.getMs({seconds:n})):l.randomWait(4*l.getMs({seconds:n}),4*l.getMs({seconds:n})*4)}return t}}),f=["connect","reconnect","connecting","reconnecting","disconnect","connect_failed","reconnect_failed","error"],t=function(e){return function(t){return e.socket.on(t,function(e){return p("rpc","socket event",t,e)})}}(this),o=0,u=f.length;u>o;o++)v=f[o],t(v);for(g=["connecting","reconnecting"],n=function(e){return function(t){return e.socket.on(t,function(){return p("rpc","connecting"),e.trigger("connecting")})}}(this),i=0,d=g.length;d>i;i++)v=g[i],n(v);this.socket.on("connect_failed",function(e){return function(){return p("rpc","connect_failed"),e.trigger("connect_failed")}}(this)),this.socket.on("reconnect_failed",function(e){return function(){var t;return p("rpc","reconnect_failed"),e.trigger("reconnect_failed"),e.socket.reconnectNotAttemptedReason!==e.socket.previousReason?(t=Date.now()-(e.dateLastMessage||0),h("Error","Websocket Redbox","Time since good connection",void 0,t),h("Error","Websocket Redbox","Reconnect failure reason",e.socket.reconnectNotAttemptedReason,void 0),p("rpc","time since last good connection",t),p("rpc","reconnect failure reason",e.socket.reconnectNotAttemptedReason)):void 0}}(this)),this.socket.on("connect",function(e){return function(){return p("rpc","connect"),e.trigger("connect"),e.connectedOnce=!0}}(this)),this.socket.on("reconnect",function(e){return function(){return p("rpc","reconnect"),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse,e.trigger("reconnect")}}(this)),this.socket.on("disconnect",function(e){return function(t){return p("rpc","disconnect",t),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse}}(this)),this.socket.on("error",function(e){return function(){var t,n;return e.connectedOnce&&!(null!=(t=e.socket)&&null!=(n=t.socket)?n.connected:void 0)?e.trigger("disconnect"):void 0}}(this)),this.socket.on("data",function(e){return function(t){return e._messageHandler(t)}}(this))}}return d.extend(e.prototype,o.Events),e.prototype._messageHandler=function(e){var t,n,r;return this.dateLastMessage=Date.now(),p("rpc","message",e),clearTimeout(this.timeoutInvokeResponse),delete this.timeoutInvokeResponse,(null!=e?e.version:void 0)?void i.setServerVersion(e):(null!=e.reqid&&(n=this.dictCallback["fx"+e.reqid]),null!=e.result?"function"==typeof n&&n(null,e.result):(null!=(r=e.notify)?r.event:void 0)?(null!=e.idModelChannel&&this.delegate.setIxLastUpdate(e.idModelChannel,e.ixLastUpdateChannel),this.trigger(e.notify.event,d.extend({idModelChannel:e.idModelChannel},e.notify))):e.error?"function"==typeof n&&n(e.error):p("rpc","unrecognized message",e),void(e.reqid&&(t=new Date-this.dictTime[e.reqid],p("timing","message",e.reqid,"time",t),delete this.dictCallback["fx"+e.reqid],delete this.dictTime[e.reqid])))},e.prototype.subscribe=function(e,t,n,r){return this.send({type:"subscribe",modelType:e,idModel:t,tags:n,invitationTokens:l.invitationTokens()},function(e){return function(n,o){return null!=n?p("rpc",n):e.delegate.setIxLastUpdate(t,o),"function"==typeof r?r(n,o):void 0}}(this))},e.prototype.unsubscribe=function(e,t,n){return this.send({type:"unsubscribe",modelType:e,idModel:t},function(e){return function(e,t){return null!=e&&p("rpc",e),"function"==typeof n?n(e,t):void 0}}(this))},e.prototype.ping=function(e){return this.send({type:"ping"},function(t){return function(t,n){return null!=t&&p("rpc",t),"function"==typeof e?e(t,n):void 0}}(this))},e.prototype._getSubscriptions=function(){return this.send({type:"getSubscriptions"},function(e){return function(e,t){return null!=t?p("rpc",t):void 0}}(this))},e.prototype.send=function(e,t){var n;this.dictCallback["fx"+this.reqid]=t,this.dictTime[this.reqid]=new Date,e.reqid=this.reqid++,n=JSON.stringify(e),p("rpc","invoke: "+n),this.socket.send(n),null==this.timeoutInvokeResponse&&(this.timeoutInvokeResponse=setTimeout(function(e){return function(){var t;if(e.socket.state===s.CONNECTED)return p("rpc","No response from the socket.io server in 10 seconds. Disconnecting."),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse,null!=(t=e.socket)?t.disconnect():void 0}}(this),1e4))},e.prototype.resync=function(){var e;return e=1<=arguments.length?m.call(arguments,0):[],d.isEmpty(e)&&(e=null),this.delegate.rpcAJAX.doPoll(e,this,function(){})},e.prototype.disconnect=function(){p("rpc","disconnecting"),this.socket.disconnect()},e.prototype.hasSocketTransport=function(){return this.hasSockets},e}()},{}],233:[function(e,t,n){var r,o,i,a,s,u;r=e("jquery"),o=e(35),i=e(7),s=e(133),u=e(231),t.exports=a={start:function(){return u.on("ready",function(e){return function(){return r(window).on("beforeunload",function(){e.markCurrentBoardAsViewed()})}}(this)),u.on("updateModels deleteModels",function(e){return function(t){var n,r;n=t.idModelChannel,null!=n&&n===(null!=(r=i.getCurrentBoard())?r.id:void 0)&&e.scheduleMarkCurrentBoardAsViewed()}}(this))},markCurrentBoardAsViewed:function(){var e;return clearTimeout(this._markAsViewedTimeout),null!=(e=i.getCurrentBoard())?e.markAsViewed():void 0},scheduleMarkCurrentBoardAsViewed:function(){return clearTimeout(this._markAsViewedTimeout),this._markAsViewedTimeout=setTimeout(function(e){return function(){return e.markCurrentBoardAsViewed()}}(this),s.getMs({minutes:5}))}}},{}],234:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=[].slice;o=e(35),i=e("bluebird"),d=e("xtend"),r=e("jquery"),l=window.slackTrelloDomain,s=window.slackDomain,u="7737388dfc54ea015104894e3a0a56f9",c="",a=function(e){return new i(function(t,n){e=d(e,{success:function(){var e;e=1<=arguments.length?p.call(arguments,0):[],t(e)},error:function(){var e;e=1<=arguments.length?p.call(arguments,0):[],n(e)}}),r.ajax(e)})},t.exports.ajaxTrello=function(e){return e.url=l+e.url,null==e.data&&(e.data={}),e.data.cookie=document.cookie,a(e)}},{}],235:[function(e,t,n){var r,o,i,a,s,u,c,l=[].slice;r=e(241),a=e(133),s=e("underscore"),u=e(48),c=["close","error","message","open"],o=4001,t.exports=i=function(){function e(t,n){var o,i,u,l;for(this.url=t,l=null!=n?n:{},this.fxReconnectDelay=l.fxReconnectDelay,this.maxReconnectDelay=l.maxReconnectDelay,this.failedConsecutiveReconnectsLimit=l.failedConsecutiveReconnectsLimit,this.reconnectRateLimit=l.reconnectRateLimit,this.reconnectRateWindow=l.reconnectRateWindow,this.maxReconnectsPerDay=l.maxReconnectsPerDay,s.extend(this,r.Events),this.ws=null,this.resetRetries(),i=0,u=c.length;u>i;i++)o=c[i],this.listenTo(this,o,this["on"+a.capitalize(o)]);return"WebSocket"in window?(this.mustNeverReconnect=!1,this.reconnectRateAttempts=0,this.totalReconnects=0,this._setDailyFailsCheck(),this.connect(),this.buffer=[],this.connectedOnce=!1,this.wakeUpCheckLastRun=(new Date).getTime(),setInterval(function(e){return function(){var t;return t=(new Date).getTime(),t>e.wakeUpCheckLastRun+e.reconnectRateWindow&&!e.mustNeverReconnect&&(e.connect(),e.trigger("reconnecting")),e.wakeUpCheckLastRun=t}}(this),e.WAKE_UP_CHECK_INTERVAL),void this.trigger("connecting")):void this.trigger("connect_failed")}return e.CONNECTING="connecting",e.CONNECTED="connected",e.WAITING_TO_RECONNECT="waiting to reconnect",e.RECONNECTING="reconnecting",e.CLOSED="closed",e.PING_TIMEOUT=3e4,e.WAKE_UP_CHECK_INTERVAL=2e3,e.prototype._setDailyFailsCheck=function(){return setInterval(function(t){return function(){return t.totalReconnects=0,t.state===e.CLOSED?t.reconnect():void 0}}(this),a.getMs({days:1}))},e.prototype._setReconnectBackOff=function(){return null==this._timeoutBackOff?this._timeoutBackOff=setTimeout(function(t){return function(){return clearTimeout(t._timeoutBackOff),delete t._timeoutBackOff,t.reconnectRateAttempts=0,t.state===e.CLOSED?t.reconnect():void 0}}(this),this.reconnectRateWindow):void 0},e.prototype.resetRetries=function(){return this.failedConsecutiveReconnectAttempts=0},e.prototype._clearPingTimeout=function(){return null!=this._pingTimeout&&clearTimeout(this._pingTimeout),this._pingTimeout=null},e.prototype._resetPingTimeout=function(){return this._clearPingTimeout(),this._pingTimeout=setTimeout(this._noPing.bind(this),e.PING_TIMEOUT)},e.prototype._noPing=function(){return!this.state!==e.CONNECTED?this.disconnect():void 0},e.prototype.connect=function(){var t,n,r,o,i,a;if(null!=this.ws)for(r=0,i=c.length;i>r;r++)t=c[r],this.ws["on"+t]=null;for(this.ws=new WebSocket(this.url),n=function(e){return function(t){return e.ws["on"+t]=function(){return e.trigger.apply(e,[t].concat(l.call(arguments)))}}}(this),o=0,a=c.length;a>o;o++)t=c[o],n(t);return this.state=e.CONNECTING},e.prototype.onOpen=function(t){return this.connectedOnce?this.trigger("reconnect"):this.trigger("connect"),this.connectedOnce=!0,this.state=e.CONNECTED,this.flushBuffer(),this.resetRetries()},e.prototype._triggerFailures=function(){return this.state===e.CONNECTING?this.trigger("connect_failed"):void 0},e.prototype.onClose=function(e){var t;return this.trigger("disconnect",null!=(t=null!=e?e.reason:void 0)?t:""),(null!=e?e.code:void 0)===o&&(this.mustNeverReconnect=!0),this._triggerFailures(),this._clearPingTimeout(),this.reconnect(e)},e.prototype.onError=function(e){return this._triggerFailures(),this.disconnect(),this.reconnect()},e.prototype.onMessage=function(e){var t;if(this._resetPingTimeout(),""===e.data)return u("socket","responding to ping"),void this.ws.send("");try{t=JSON.parse(e.data)}catch(e){}return this.trigger("data",t)},e.prototype._shouldNotReconnect=function(){return null!=this.reconnectNotAttemptedReason&&(this.previousReason=this.reconnectNotAttemptedReason),this.reconnectNotAttemptedReason=this.failedConsecutiveReconnectAttempts>=this.failedConsecutiveReconnectsLimit?"too many consecutive failures":this.mustNeverReconnect?"server NEVER RECONNECT code received":this.reconnectRateAttempts>=this.reconnectRateLimit?"rate limited":this.totalReconnects>=this.maxReconnectsPerDay?"max reconnects limit reached":void 0,null!=this.reconnectNotAttemptedReason},e.prototype.reconnect=function(t){var n;switch(this.state){case e.CONNECTED:this.ws.close();break;case e.RECONNECTING:case e.WAITING_TO_RECONNECT:return}return this._setReconnectBackOff(),n=null==this.reconnectNotAttemptedReason,this._shouldNotReconnect()?(n&&this.trigger("reconnect_failed"),void(this.state=e.CLOSED)):(this.state=e.WAITING_TO_RECONNECT,0===this.failedConsecutiveReconnectAttempts&&(this.currentReconnectDelay=this.fxReconnectDelay(t)),u("socket","attempting reconnect in "+this.currentReconnectDelay+"ms"),this._reconnectTimer=setTimeout(function(t){return function(){return t._reconnectTimer=null,t.connect(),t.state=e.RECONNECTING,t.trigger("reconnecting")}}(this),this.currentReconnectDelay),this.totalReconnects++,this.failedConsecutiveReconnectAttempts++,this.reconnectRateAttempts++,this.currentReconnectDelay=Math.min(2*this.currentReconnectDelay,this.maxReconnectDelay))},e.prototype.disconnect=function(){var t;switch(this._clearPingTimeout(),t=this.state,this.state=e.CLOSED,t){case e.CONNECTED:case e.CONNECTING:case e.RECONNECTING:return this.ws.close(),this.onClose();case e.WAITING_TO_RECONNECT:return clearTimeout(this._reconnectTimer)}},e.prototype.send=function(t){if(this.state!==e.CONNECTED)return this.buffer.push(t);try{return this.ws.send(t)}catch(e){return this.buffer.push(t),this.onError()}},e.prototype.flushBuffer=function(){var e,t,n,r,o;for(e=this.buffer,this.buffer=[],o=[],n=0,r=e.length;r>n;n++)t=e[n],o.push(this.send(t));return o},e}()},{}],236:[function(e,t,n){var r;r=e(266),t.exports={unsplashApi:new r.default({applicationId:"454087647775b190c574339cb2994716b17ef2f83ad11838d0ef0dac2d102e66"}),toJson:r.toJson}},{}],237:[function(e,t,n){t.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=164)}([function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(44),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){function r(e,t){var n=i(e,t);return o(n)?n:void 0}var o=n(80),i=n(108);e.exports=r},function(e,t,n){var r=n(1),o=r.Symbol;e.exports=o},function(e,t,n){function r(e){return null==e?void 0===e?u:s:c&&c in Object(e)?i(e):a(e)}var o=n(3),i=n(105),a=n(133),s="[object Null]",u="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){function r(e){return"symbol"==typeof e||i(e)&&o(e)==a}var o=n(4),i=n(6),a="[object Symbol]";e.exports=r},function(e,t,n){"use strict";(function(e){function r(e){return e.replace(k,"-$1").toLowerCase()}function o(e){return x(e).replace(j,"-ms-")}function i(e){return D(e)===!0&&"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){return t={exports:{}},e(t,t.exports),t.exports}function s(e){return function(){return e}}function u(e,t,n,r,o,i,a,s){if(oe(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,s],l=0;u=new Error(t.replace(/%s/g,function(){return c[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}function c(e,t,n,r,o){for(var i in e)if(e.hasOwnProperty(i)){var a;try{pe("function"==typeof e[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",r||"React class",n,i),a=e[i](t,i,r,n,null,me)}catch(e){a=e}if(he(!a||a instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,i,"undefined"==typeof a?"undefined":T(a)),a instanceof Error&&!(a.message in fe)){fe[a.message]=!0;var s=o?o():"";he(!1,"Failed %s type: %s%s",n,a.message,null!=s?s:"")}}}function l(e){return"string"==typeof e}function d(e){return"function"==typeof e&&"string"==typeof e.styledComponentId}function p(e){return e.displayName||e.name||"Component"}function h(e){var t=Re.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}function m(e,t){for(var n=1540483477,r=24,o=t^e.length,i=e.length,a=0;i>=4;){var s=f(e,a);s=v(s,n),s^=s>>>r,s=v(s,n),o=v(o,n),o^=s,a+=4,i-=4}switch(i){case 3:o^=g(e,a),o^=e.charCodeAt(a+2)<<16,o=v(o,n);break;case 2:o^=g(e,a),o=v(o,n);break;case 1:o^=e.charCodeAt(a),o=v(o,n)}return o^=o>>>13,o=v(o,n),o^=o>>>15,o>>>0}function f(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function g(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function v(e,t){e=0|e,t=0|t;var n=65535&e,r=e>>>16,o=n*t+((r*t&65535)<<16)|0;return o}var b=n(162),y=n.n(b),w=n(19),_=n.n(w),k=/([A-Z])/g,C=r,x=C,j=/^ms-/,S=o,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},B=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},P=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},L=function(e){return null!=e&&"object"===("undefined"==typeof e?"undefined":T(e))&&!Array.isArray(e)},D=L,I=function(e){var t,n;return i(e)===!1?!1:(t=e.constructor,
"function"!=typeof t?!1:(n=t.prototype,i(n)===!1?!1:n.hasOwnProperty("isPrototypeOf")===!1?!1:!0))},N=function e(t,n){var r=Object.keys(t).map(function(n){return I(t[n])?e(t[n],n):S(n)+": "+t[n]+";"}).join(" ");return n?n+" {\n  "+r+"\n}":r},V=function e(t,n){return t.reduce(function(t,r){return void 0===r||null===r||r===!1||""===r?t:Array.isArray(r)?[].concat(t,e(r,n)):r.hasOwnProperty("styledComponentId")?[].concat(t,["."+r.styledComponentId]):"function"==typeof r?n?t.concat.apply(t,e([r(n)],n)):t.concat(r):t.concat(I(r)?N(r):r.toString())},[])};y.a.set({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!0});var z=function(e,t,n){var r=e.join("").replace(/^\s*\/\/.*$/gm,""),o=t&&n?n+" "+t+" { "+r+" }":r;return y()(n||!t?"":t,o)},R="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),F=R.length,$=function(e){var t="",n=void 0;for(n=e;n>F;n=Math.floor(n/R.length))t=R[n%F]+t;return R[n%F]+t},U=function(e,t){return t.reduce(function(t,n,r){return t.concat(n,e[r+1])},[e[0]])},q=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return V(U(e,n))},H=/^[^\S\n]*?\/\* sc-component-id:\s+(\S+)\s+\*\//gm,W=function(e){var t=""+(e||""),n=[];return t.replace(H,function(e,t,r){return n.push({componentId:t,matchIndex:r}),e}),n.map(function(e,r){var o=e.componentId,i=e.matchIndex,a=n[r+1],s=a?t.slice(i,a.matchIndex):t.slice(i);return{componentId:o,cssFromDOM:s}})},K=40,G=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";E(this,e),this.el=t,this.isLocal=n,this.ready=!1;var o=W(r);this.size=o.length,this.components=o.reduce(function(e,t){return e[t.componentId]=t,e},{})}return e.prototype.isFull=function(){return this.size>=K},e.prototype.addComponent=function(e){if(this.ready||this.replaceElement(),this.components[e])throw new Error("Trying to add Component '"+e+"' twice!");var t={componentId:e,textNode:document.createTextNode("")};this.el.appendChild(t.textNode),this.size+=1,this.components[e]=t},e.prototype.inject=function(e,t,n){this.ready||this.replaceElement();var r=this.components[e];if(!r)throw new Error("Must add a new component before you can inject css into it");if(""===r.textNode.data&&r.textNode.appendData("\n/* sc-component-id: "+e+" */\n"),r.textNode.appendData(t),n){var o=this.el.getAttribute(Q);this.el.setAttribute(Q,o?o+" "+n:n)}},e.prototype.toHTML=function(){return this.el.outerHTML},e.prototype.toReactElement=function(){throw new Error("BrowserTag doesn't implement toReactElement!")},e.prototype.clone=function(){throw new Error("BrowserTag cannot be cloned!")},e.prototype.replaceElement=function(){var e=this;if(this.ready=!0,0!==this.size){var t=this.el.cloneNode();if(t.appendChild(document.createTextNode("\n")),Object.keys(this.components).forEach(function(n){var r=e.components[n];r.textNode=document.createTextNode(r.cssFromDOM),t.appendChild(r.textNode)}),!this.el.parentNode)throw new Error("Trying to replace an element that wasn't mounted!");this.el.parentNode.replaceChild(t,this.el),this.el=t}},e}(),J={create:function(){for(var e=[],t={},n=document.querySelectorAll("["+Q+"]"),r=n.length,o=0;r>o;o+=1){var i=n[o];e.push(new G(i,"true"===i.getAttribute(Y),i.innerHTML));var a=i.getAttribute(Q);a&&a.trim().split(/\s+/).forEach(function(e){t[e]=!0})}var s=function(e){var t=document.createElement("style");if(t.type="text/css",t.setAttribute(Q,""),t.setAttribute(Y,e?"true":"false"),!document.head)throw new Error("Missing document <head>");return document.head.appendChild(t),new G(t,e)};return new te(s,e,t)}},Q="data-styled-components",Y="data-styled-components-is-local",Z="__styled-components-stylesheet__",X=null,ee=[],te=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};E(this,e),this.hashes={},this.deferredInjections={},this.tagConstructor=t,this.tags=n,this.names=r,this.constructComponentTagMap()}return e.prototype.constructComponentTagMap=function(){var e=this;this.componentTags={},this.tags.forEach(function(t){Object.keys(t.components).forEach(function(n){e.componentTags[n]=t})})},e.prototype.getName=function(e){return this.hashes[e.toString()]},e.prototype.alreadyInjected=function(e,t){return this.names[t]?(this.hashes[e.toString()]=t,!0):!1},e.prototype.hasInjectedComponent=function(e){return!!this.componentTags[e]},e.prototype.deferredInject=function(e,t,n){this===X&&ee.forEach(function(r){r.deferredInject(e,t,n)}),this.getOrCreateTag(e,t),this.deferredInjections[e]=n},e.prototype.inject=function(e,t,n,r,o){this===X&&ee.forEach(function(r){r.inject(e,t,n)});var i=this.getOrCreateTag(e,t),a=this.deferredInjections[e];a&&(i.inject(e,a),delete this.deferredInjections[e]),i.inject(e,n,o),r&&o&&(this.hashes[r.toString()]=o)},e.prototype.toHTML=function(){return this.tags.map(function(e){return e.toHTML()}).join("")},e.prototype.toReactElements=function(){return this.tags.map(function(e,t){return e.toReactElement("sc-"+t)})},e.prototype.getOrCreateTag=function(e,t){var n=this.componentTags[e];if(n)return n;var r=this.tags[this.tags.length-1],o=!r||r.isFull()||r.isLocal!==t?this.createNewTag(t):r;return this.componentTags[e]=o,o.addComponent(e),o},e.prototype.createNewTag=function(e){var t=this.tagConstructor(e);return this.tags.push(t),t},e.reset=function(t){X=e.create(t)},e.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof document;return(e?Ee:J).create()},e.clone=function(t){var n=new e(t.tagConstructor,t.tags.map(function(e){return e.clone()}),A({},t.names));return n.hashes=A({},t.hashes),n.deferredInjections=A({},t.deferredInjections),ee.push(n),n},O(e,null,[{key:"instance",get:function(){return X||(X=e.create())}}]),e}(),ne=function(){};ne.thatReturns=s,ne.thatReturnsFalse=s(!1),ne.thatReturnsTrue=s(!0),ne.thatReturnsNull=s(null),ne.thatReturnsThis=function(){return this},ne.thatReturnsArgument=function(e){return e};var re=ne,oe=function(e){};oe=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")};var ie=u,ae=re,se=ae;!function(){var e=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];var o=0,i="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}};se=function(t,n){if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==n.indexOf("Failed Composite propType: ")&&!t){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;r>i;i++)o[i-2]=arguments[i];e.apply(void 0,[n].concat(o))}}}();var ue,ce=se,le="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",de=le,pe=ie,he=ce,me=de,fe={},ge=c,ve=re,be=ie,ye=ce,we=de,_e=ge,ke=function(e,t){function n(e){var t=e&&(_&&e[_]||e[k]);return"function"==typeof t?t:void 0}function r(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function o(e){this.message=e,this.stack=""}function i(e){function n(n,a,s,u,c,l,d){if(u=u||C,l=l||s,d!==we)if(t)be(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("undefined"!=typeof console){var p=u+":"+s;!r[p]&&3>i&&(ye(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",l,u),r[p]=!0,i++)}return null==a[s]?n?new o(null===a[s]?"The "+c+" `"+l+"` is marked as required "+("in `"+u+"`, but its value is `null`."):"The "+c+" `"+l+"` is marked as required in "+("`"+u+"`, but its value is `undefined`.")):null:e(a,s,u,c,l)}var r={},i=0,a=n.bind(null,!1);return a.isRequired=n.bind(null,!0),a}function a(e){function t(t,n,r,i,a,s){var u=t[n],c=b(u);if(c!==e){var l=y(u);return new o("Invalid "+i+" `"+a+"` of type "+("`"+l+"` supplied to `"+r+"`, expected ")+("`"+e+"`."))}return null}return i(t)}function s(){return i(ve.thatReturnsNull)}function u(e){function t(t,n,r,i,a){if("function"!=typeof e)return new o("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){var u=b(s);return new o("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<s.length;c++){var l=e(s,c,r,i,a+"["+c+"]",we);if(l instanceof Error)return l}return null}return i(t)}function c(){function t(t,n,r,i,a){var s=t[n];if(!e(s)){var u=b(s);return new o("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected a single ReactElement."))}return null}return i(t)}function l(e){function t(t,n,r,i,a){if(!(t[n]instanceof e)){var s=e.name||C,u=w(t[n]);return new o("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected ")+("instance of `"+s+"`."))}return null}return i(t)}function d(e){function t(t,n,i,a,s){for(var u=t[n],c=0;c<e.length;c++)if(r(u,e[c]))return null;var l=JSON.stringify(e);return new o("Invalid "+a+" `"+s+"` of value `"+u+"` "+("supplied to `"+i+"`, expected one of "+l+"."))}return Array.isArray(e)?i(t):(ye(!1,"Invalid argument supplied to oneOf, expected an instance of array."),ve.thatReturnsNull)}function p(e){function t(t,n,r,i,a){if("function"!=typeof e)return new o("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],u=b(s);if("object"!==u)return new o("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."));for(var c in s)if(s.hasOwnProperty(c)){var l=e(s,c,r,i,a+"."+c,we);if(l instanceof Error)return l}return null}return i(t)}function h(e){function t(t,n,r,i,a){for(var s=0;s<e.length;s++){var u=e[s];if(null==u(t,n,r,i,a,we))return null}return new o("Invalid "+i+" `"+a+"` supplied to "+("`"+r+"`."))}return Array.isArray(e)?i(t):(ye(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),ve.thatReturnsNull)}function m(){function e(e,t,n,r,i){return g(e[t])?null:new o("Invalid "+r+" `"+i+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return i(e)}function f(e){function t(t,n,r,i,a){var s=t[n],u=b(s);if("object"!==u)return new o("Invalid "+i+" `"+a+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."));for(var c in e){var l=e[c];if(l){var d=l(s,c,r,i,a+"."+c,we);if(d)return d}}return null}return i(t)}function g(t){switch("undefined"==typeof t?"undefined":T(t)){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(g);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!g(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!g(a[1]))return!1}return!0;default:return!1}}function v(e,t){return"symbol"===e?!0:"Symbol"===t["@@toStringTag"]?!0:"function"==typeof Symbol&&t instanceof Symbol?!0:!1}function b(e){var t="undefined"==typeof e?"undefined":T(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":v(t,e)?"symbol":t}function y(e){var t=b(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function w(e){return e.constructor&&e.constructor.name?e.constructor.name:C}var _="function"==typeof Symbol&&Symbol.iterator,k="@@iterator",C="<<anonymous>>",x={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:s(),arrayOf:u,element:c(),instanceOf:l,node:m(),objectOf:p,oneOf:d,oneOfType:h,shape:f};return o.prototype=Error.prototype,x.checkPropTypes=_e,x.PropTypes=x,x},Ce=a(function(e){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,n=function(e){return"object"===("undefined"==typeof e?"undefined":T(e))&&null!==e&&e.$$typeof===t},r=!0;e.exports=ke(n,r)}),xe=function(e){function t(){return E(this,t),P(this,e.apply(this,arguments))}return M(t,e),t.prototype.getChildContext=function(){var e;return e={},e[Z]=this.props.sheet,e},t.prototype.render=function(){return _.a.Children.only(this.props.children)},t}(w.Component);xe.childContextTypes=(ue={},ue[Z]=Ce.instanceOf(te).isRequired,ue),xe.propTypes={sheet:Ce.instanceOf(te).isRequired};var je,Se,Te=function(){function e(t){E(this,e),this.isLocal=t,this.components={},this.size=0,this.names=[]}return e.prototype.isFull=function(){return!1},e.prototype.addComponent=function(e){if(this.components[e])throw new Error("Trying to add Component '"+e+"' twice!");this.components[e]={componentId:e,css:""},this.size+=1},e.prototype.inject=function(e,t,n){var r=this.components[e];if(!r)throw new Error("Must add a new component before you can inject css into it");""===r.css&&(r.css="/* sc-component-id: "+e+" */\n"),r.css+=t.replace(/\n*$/,"\n"),n&&this.names.push(n)},e.prototype.toHTML=function(){var e=this,t=Q+'="'+this.names.join(" ")+'"',n=Y+'="'+(this.isLocal?"true":"false")+'"',r=Object.keys(this.components).map(function(t){return e.components[t].css}).join("");return'<style type="text/css" '+t+" "+n+">\n"+r+"\n</style>"},e.prototype.toReactElement=function(e){var t,n=this,r=(t={},t[Q]=this.names.join(" "),t[Y]=this.isLocal.toString(),t),o=Object.keys(this.components).map(function(e){return n.components[e].css}).join("");return _.a.createElement("style",A({key:e,type:"text/css"},r,{dangerouslySetInnerHTML:{__html:o}}))},e.prototype.clone=function(){var t=this,n=new e(this.isLocal);return n.names=[].concat(this.names),n.size=this.size,n.components=Object.keys(this.components).reduce(function(e,n){return e[n]=A({},t.components[n]),e},{}),n},e}(),Ee=function(){function e(){E(this,e),this.instance=te.clone(te.instance)}return e.prototype.collectStyles=function(e){if(this.closed)throw new Error("Can't collect styles once you've called getStyleTags!");return _.a.createElement(xe,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.closed||(ee.splice(ee.indexOf(this.instance),1),this.closed=!0),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.closed||(ee.splice(ee.indexOf(this.instance),1),this.closed=!0),this.instance.toReactElements()},e.create=function(){return new te(function(e){return new Te(e)})},e}(),Oe=200,Ae=function(e){var t={},n=!1;return function(r){n||(t[r]=!0,Object.keys(t).length>=Oe&&(console.warn("Over "+Oe+" classes were generated for component "+e+". Consider using style property for frequently changed styles.\nExample:\n  const StyledComp = styled.div`width: 100%;`\n  <StyledComp style={{ background: background }} />"),n=!0,t={}))}},Me={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0,autoFocus:!0,defaultValue:!0,valueLink:!0,defaultChecked:!0,checkedLink:!0,innerHTML:!0,suppressContentEditableWarning:!0,onFocusIn:!0,onFocusOut:!0,className:!0,onCopy:!0,onCut:!0,onPaste:!0,onCompositionEnd:!0,onCompositionStart:!0,onCompositionUpdate:!0,onKeyDown:!0,onKeyPress:!0,onKeyUp:!0,onFocus:!0,onBlur:!0,onChange:!0,onInput:!0,onSubmit:!0,onClick:!0,onContextMenu:!0,onDoubleClick:!0,onDrag:!0,onDragEnd:!0,onDragEnter:!0,onDragExit:!0,onDragLeave:!0,onDragOver:!0,onDragStart:!0,onDrop:!0,onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOut:!0,onMouseOver:!0,onMouseUp:!0,onSelect:!0,onTouchCancel:!0,onTouchEnd:!0,onTouchMove:!0,onTouchStart:!0,onScroll:!0,onWheel:!0,onAbort:!0,onCanPlay:!0,onCanPlayThrough:!0,onDurationChange:!0,onEmptied:!0,onEncrypted:!0,onEnded:!0,onError:!0,onLoadedData:!0,onLoadedMetadata:!0,onLoadStart:!0,onPause:!0,onPlay:!0,onPlaying:!0,onProgress:!0,onRateChange:!0,onSeeked:!0,onSeeking:!0,onStalled:!0,onSuspend:!0,onTimeUpdate:!0,onVolumeChange:!0,onWaiting:!0,onLoad:!0,onAnimationStart:!0,onAnimationEnd:!0,onAnimationIteration:!0,onTransitionEnd:!0,onCopyCapture:!0,onCutCapture:!0,onPasteCapture:!0,onCompositionEndCapture:!0,onCompositionStartCapture:!0,onCompositionUpdateCapture:!0,onKeyDownCapture:!0,onKeyPressCapture:!0,onKeyUpCapture:!0,onFocusCapture:!0,onBlurCapture:!0,onChangeCapture:!0,onInputCapture:!0,onSubmitCapture:!0,onClickCapture:!0,onContextMenuCapture:!0,onDoubleClickCapture:!0,onDragCapture:!0,onDragEndCapture:!0,onDragEnterCapture:!0,onDragExitCapture:!0,onDragLeaveCapture:!0,onDragOverCapture:!0,onDragStartCapture:!0,onDropCapture:!0,onMouseDownCapture:!0,onMouseEnterCapture:!0,onMouseLeaveCapture:!0,onMouseMoveCapture:!0,onMouseOutCapture:!0,onMouseOverCapture:!0,onMouseUpCapture:!0,onSelectCapture:!0,onTouchCancelCapture:!0,onTouchEndCapture:!0,onTouchMoveCapture:!0,onTouchStartCapture:!0,onScrollCapture:!0,onWheelCapture:!0,onAbortCapture:!0,onCanPlayCapture:!0,onCanPlayThroughCapture:!0,onDurationChangeCapture:!0,onEmptiedCapture:!0,onEncryptedCapture:!0,onEndedCapture:!0,onErrorCapture:!0,onLoadedDataCapture:!0,onLoadedMetadataCapture:!0,onLoadStartCapture:!0,onPauseCapture:!0,onPlayCapture:!0,onPlayingCapture:!0,onProgressCapture:!0,onRateChangeCapture:!0,onSeekedCapture:!0,onSeekingCapture:!0,onStalledCapture:!0,onSuspendCapture:!0,onTimeUpdateCapture:!0,onVolumeChangeCapture:!0,onWaitingCapture:!0,onLoadCapture:!0,onAnimationStartCapture:!0,onAnimationEndCapture:!0,onAnimationIterationCapture:!0,onTransitionEndCapture:!0},Be={accept:!0,acceptCharset:!0,accessKey:!0,action:!0,allowFullScreen:!0,allowTransparency:!0,alt:!0,as:!0,async:!0,autoComplete:!0,autoPlay:!0,capture:!0,cellPadding:!0,cellSpacing:!0,charSet:!0,challenge:!0,checked:!0,cite:!0,classID:!0,className:!0,cols:!0,colSpan:!0,content:!0,contentEditable:!0,contextMenu:!0,controls:!0,coords:!0,crossOrigin:!0,data:!0,dateTime:!0,default:!0,defer:!0,dir:!0,disabled:!0,download:!0,draggable:!0,encType:!0,form:!0,formAction:!0,formEncType:!0,formMethod:!0,formNoValidate:!0,formTarget:!0,frameBorder:!0,headers:!0,height:!0,hidden:!0,high:!0,href:!0,hrefLang:!0,htmlFor:!0,httpEquiv:!0,icon:!0,id:!0,inputMode:!0,integrity:!0,is:!0,keyParams:!0,keyType:!0,kind:!0,label:!0,lang:!0,list:!0,loop:!0,low:!0,manifest:!0,marginHeight:!0,marginWidth:!0,max:!0,maxLength:!0,media:!0,mediaGroup:!0,method:!0,min:!0,minLength:!0,multiple:!0,muted:!0,name:!0,nonce:!0,noValidate:!0,open:!0,optimum:!0,pattern:!0,placeholder:!0,playsInline:!0,poster:!0,preload:!0,profile:!0,radioGroup:!0,readOnly:!0,referrerPolicy:!0,rel:!0,required:!0,reversed:!0,role:!0,rows:!0,rowSpan:!0,sandbox:!0,scope:!0,scoped:!0,scrolling:!0,seamless:!0,selected:!0,shape:!0,size:!0,sizes:!0,span:!0,spellCheck:!0,src:!0,srcDoc:!0,srcLang:!0,srcSet:!0,start:!0,step:!0,style:!0,summary:!0,tabIndex:!0,target:!0,title:!0,type:!0,useMap:!0,value:!0,width:!0,wmode:!0,wrap:!0,about:!0,datatype:!0,inlist:!0,prefix:!0,property:!0,resource:!0,typeof:!0,vocab:!0,autoCapitalize:!0,autoCorrect:!0,autoSave:!0,color:!0,itemProp:!0,itemScope:!0,itemType:!0,itemID:!0,itemRef:!0,results:!0,security:!0,unselectable:0},Pe={accentHeight:!0,accumulate:!0,additive:!0,alignmentBaseline:!0,allowReorder:!0,alphabetic:!0,amplitude:!0,arabicForm:!0,ascent:!0,attributeName:!0,attributeType:!0,autoReverse:!0,azimuth:!0,baseFrequency:!0,baseProfile:!0,baselineShift:!0,bbox:!0,begin:!0,bias:!0,by:!0,calcMode:!0,capHeight:!0,clip:!0,clipPath:!0,clipRule:!0,clipPathUnits:!0,colorInterpolation:!0,colorInterpolationFilters:!0,colorProfile:!0,colorRendering:!0,contentScriptType:!0,contentStyleType:!0,cursor:!0,cx:!0,cy:!0,d:!0,decelerate:!0,descent:!0,diffuseConstant:!0,direction:!0,display:!0,divisor:!0,dominantBaseline:!0,dur:!0,dx:!0,dy:!0,edgeMode:!0,elevation:!0,enableBackground:!0,end:!0,exponent:!0,externalResourcesRequired:!0,fill:!0,fillOpacity:!0,fillRule:!0,filter:!0,filterRes:!0,filterUnits:!0,floodColor:!0,floodOpacity:!0,focusable:!0,fontFamily:!0,fontSize:!0,fontSizeAdjust:!0,fontStretch:!0,fontStyle:!0,fontVariant:!0,fontWeight:!0,format:!0,from:!0,fx:!0,fy:!0,g1:!0,g2:!0,glyphName:!0,glyphOrientationHorizontal:!0,glyphOrientationVertical:!0,glyphRef:!0,gradientTransform:!0,gradientUnits:!0,hanging:!0,horizAdvX:!0,horizOriginX:!0,ideographic:!0,imageRendering:!0,in:!0,in2:!0,intercept:!0,k:!0,k1:!0,k2:!0,k3:!0,k4:!0,kernelMatrix:!0,kernelUnitLength:!0,kerning:!0,keyPoints:!0,keySplines:!0,keyTimes:!0,lengthAdjust:!0,letterSpacing:!0,lightingColor:!0,limitingConeAngle:!0,local:!0,markerEnd:!0,markerMid:!0,markerStart:!0,markerHeight:!0,markerUnits:!0,markerWidth:!0,mask:!0,maskContentUnits:!0,maskUnits:!0,mathematical:!0,mode:!0,numOctaves:!0,offset:!0,opacity:!0,operator:!0,order:!0,orient:!0,orientation:!0,origin:!0,overflow:!0,overlinePosition:!0,overlineThickness:!0,paintOrder:!0,panose1:!0,pathLength:!0,patternContentUnits:!0,patternTransform:!0,patternUnits:!0,pointerEvents:!0,points:!0,pointsAtX:!0,pointsAtY:!0,pointsAtZ:!0,preserveAlpha:!0,preserveAspectRatio:!0,primitiveUnits:!0,r:!0,radius:!0,refX:!0,refY:!0,renderingIntent:!0,repeatCount:!0,repeatDur:!0,requiredExtensions:!0,requiredFeatures:!0,restart:!0,result:!0,rotate:!0,rx:!0,ry:!0,scale:!0,seed:!0,shapeRendering:!0,slope:!0,spacing:!0,specularConstant:!0,specularExponent:!0,speed:!0,spreadMethod:!0,startOffset:!0,stdDeviation:!0,stemh:!0,stemv:!0,stitchTiles:!0,stopColor:!0,stopOpacity:!0,strikethroughPosition:!0,strikethroughThickness:!0,string:!0,stroke:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeLinecap:!0,strokeLinejoin:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,surfaceScale:!0,systemLanguage:!0,tableValues:!0,targetX:!0,targetY:!0,textAnchor:!0,textDecoration:!0,textRendering:!0,textLength:!0,to:!0,transform:!0,u1:!0,u2:!0,underlinePosition:!0,underlineThickness:!0,unicode:!0,unicodeBidi:!0,unicodeRange:!0,unitsPerEm:!0,vAlphabetic:!0,vHanging:!0,vIdeographic:!0,vMathematical:!0,values:!0,vectorEffect:!0,version:!0,vertAdvY:!0,vertOriginX:!0,vertOriginY:!0,viewBox:!0,viewTarget:!0,visibility:!0,widths:!0,wordSpacing:!0,writingMode:!0,x:!0,xHeight:!0,x1:!0,x2:!0,xChannelSelector:!0,xlinkActuate:!0,xlinkArcrole:!0,xlinkHref:!0,xlinkRole:!0,xlinkShow:!0,xlinkTitle:!0,xlinkType:!0,xmlBase:!0,xmlns:!0,xmlnsXlink:!0,xmlLang:!0,xmlSpace:!0,y:!0,y1:!0,y2:!0,yChannelSelector:!0,z:!0,zoomAndPan:!0},Le=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",De=Le+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Ie=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+De+"]*$")),Ne={}.hasOwnProperty,Ve=function(e){return Ne.call(Be,e)||Ne.call(Pe,e)||Ie(e.toLowerCase())||Ne.call(Me,e)},ze=h,Re=Object.prototype.toString,Fe=function(e){var t=[],n=e;return{publish:function(e){n=e,t.forEach(function(e){return e(n)})},subscribe:function(e){return t.push(e),e(n),function(){t=t.filter(function(t){return t!==e})}}}},$e="__styled-components__",Ue=function(e){function t(){E(this,t);var n=P(this,e.call(this));return n.getTheme=n.getTheme.bind(n),n}return M(t,e),t.prototype.componentWillMount=function(){var e=this;if(this.context[$e]){var t=this.context[$e];this.unsubscribeToOuter=t(function(t){e.outerTheme=t})}this.broadcast=Fe(this.getTheme())},t.prototype.getChildContext=function(){var e;return A({},this.context,(e={},e[$e]=this.broadcast.subscribe,e))},t.prototype.componentWillReceiveProps=function(e){this.props.theme!==e.theme&&this.broadcast.publish(this.getTheme(e.theme))},t.prototype.componentWillUnmount=function(){this.context[$e]&&this.unsubscribeToOuter()},t.prototype.getTheme=function(e){var t=e||this.props.theme;if(ze(t)){var n=t(this.outerTheme);if(!I(n))throw new Error("[ThemeProvider] Please return an object from your theme function, i.e. theme={() => ({})}!");return n}if(!I(t))throw new Error("[ThemeProvider] Please make your theme prop a plain object");return A({},this.outerTheme,t)},t.prototype.render=function(){return this.props.children?_.a.Children.only(this.props.children):null},t}(w.Component);Ue.childContextTypes=(je={},je[$e]=Ce.func.isRequired,je),Ue.contextTypes=(Se={},Se[$e]=Ce.func,Se);var qe,He=function(e){function t(){return E(this,t),P(this,e.apply(this,arguments))}return M(t,e),t}(w.Component);He.contextTypes=(qe={},qe[$e]=Ce.func,qe[Z]=Ce.instanceOf(te),qe);var We=/[[\].#*$><+~=|^:(),"'`]/g,Ke=/--+/g,Ge=function(t,r){var o={},i=function(e){var n="string"!=typeof e?"sc":e.replace(We,"-").replace(Ke,"-"),r=(o[n]||0)+1;o[n]=r;var i=t.generateName(n+r);return n+"-"+i},a=function(e){function t(){var n,r,o;E(this,t);for(var i=arguments.length,a=Array(i),s=0;i>s;s++)a[s]=arguments[s];return n=r=P(this,e.call.apply(e,[this].concat(a))),r.attrs={},r.state={theme:null,generatedClassName:""},o=n,P(r,o)}return M(t,e),t.prototype.buildExecutionContext=function(e,t){var n=this.constructor.attrs,r=A({},t,{theme:e});return void 0===n?r:(this.attrs=Object.keys(n).reduce(function(e,t){var o=n[t];return e[t]="function"==typeof o?o(r):o,e},{}),A({},r,this.attrs))},t.prototype.generateAndInjectStyles=function(e,t){var n=this.constructor,r=n.componentStyle,o=n.warnTooManyClasses,i=this.buildExecutionContext(e,t),a=this.context[Z]||te.instance,s=r.generateAndInjectStyles(i,a);return void 0!==o&&o(s),s},t.prototype.componentWillMount=function(){var e=this;if(this.context[$e]){var t=this.context[$e];this.unsubscribe=t(function(t){var n=e.constructor.defaultProps,r=n&&e.props.theme===n.theme,o=e.props.theme&&!r?e.props.theme:t,i=e.generateAndInjectStyles(o,e.props);e.setState({theme:o,generatedClassName:i})})}else{var n=this.props.theme||{},r=this.generateAndInjectStyles(n,this.props);this.setState({theme:n,generatedClassName:r})}},t.prototype.componentWillReceiveProps=function(e){var t=this;this.setState(function(n){var r=t.constructor.defaultProps,o=r&&e.theme===r.theme,i=e.theme&&!o?e.theme:n.theme,a=t.generateAndInjectStyles(i,e);return{theme:i,generatedClassName:a}})},t.prototype.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe()},t.prototype.render=function(){var e=this,t=this.props.innerRef,r=this.state.generatedClassName,o=this.constructor,i=o.styledComponentId,a=o.target,s=l(a),u=[this.props.className,i,this.attrs.className,r].filter(Boolean).join(" "),c=A({},this.attrs,{className:u});d(a)?c.innerRef=t:c.ref=t;var p=Object.keys(this.props).reduce(function(t,n){return"innerRef"===n||"className"===n||s&&!Ve(n)||(t[n]=e.props[n]),t},c);return n.i(w.createElement)(a,p)},t}(He),s=function n(o,s,u){var c,d=s.displayName,h=void 0===d?l(o)?"styled."+o:"Styled("+p(o)+")":d,m=s.componentId,f=void 0===m?i(s.displayName):m,g=s.ParentComponent,v=void 0===g?a:g,b=s.rules,y=s.attrs,w=s.displayName&&s.componentId?s.displayName+"-"+s.componentId:f,_=void 0;"undefined"!=typeof e&&(_=Ae(h));var k=new t(void 0===b?u:b.concat(u),w),C=function(e){function t(){return E(this,t),P(this,e.apply(this,arguments))}return M(t,e),t.withComponent=function(e){var r=(s.displayName,s.componentId,B(s,["displayName","componentId"])),o=A({},r,{ParentComponent:t});return n(e,o,u)},O(t,null,[{key:"extend",get:function(){var e=(s.displayName,s.componentId,s.rules),i=B(s,["displayName","componentId","rules"]),a=void 0===e?u:e.concat(u),c=A({},i,{rules:a,ParentComponent:t});return r(n,o,c)}}]),t}(v);return C.contextTypes=(c={},c[$e]=Ce.func,c[Z]=Ce.instanceOf(te),c),C.displayName=h,C.styledComponentId=w,C.attrs=y,C.componentStyle=k,C.warnTooManyClasses=_,C.target=o,C};return s},Je=function(e,t,n){var r=function(){function r(e,t){if(E(this,r),this.rules=e,this.componentId=t,!te.instance.hasInjectedComponent(this.componentId)){var n="."+t+" {}";te.instance.deferredInject(t,!0,n)}}return r.prototype.generateAndInjectStyles=function(r,o){var i=t(this.rules,r),a=m(this.componentId+i.join("")),s=o.getName(a);if(s)return s;var u=e(a);if(o.alreadyInjected(a,u))return u;var c="\n"+n(i,"."+u);return o.inject(this.componentId,!0,c,a,u),u},r.generateName=function(t){return e(m(t))},r}();return r},Qe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Ye=function(e,t){var n=function(n){return t(e,n)};return Qe.forEach(function(e){n[e]=n(e)}),n},Ze=function(e){return e.replace(/\s|\\n/g,"")},Xe=function(e,t,n){return function(r){for(var o=arguments.length,i=Array(o>1?o-1:0),a=1;o>a;a++)i[a-1]=arguments[a];var s=n.apply(void 0,[r].concat(i)),u=m(Ze(JSON.stringify(s))),c=te.instance.getName(u);if(c)return c;var l=e(u);if(te.instance.alreadyInjected(u,l))return l;var d=t(s,l,"@keyframes");return te.instance.inject("sc-keyframes-"+l,!0,d,u,l),l}},et=function(e,t){var n=function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;r>i;i++)o[i-1]=arguments[i];var a=t.apply(void 0,[n].concat(o)),s=m(JSON.stringify(a)),u="sc-global-"+s;te.instance.hasInjectedComponent(u)||te.instance.inject(u,!1,e(a))};return n},tt=function(e){var t=function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof r&&"function"!=typeof r)throw new Error("Cannot create styled-component for component: "+r);var i=function(t){for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;i>s;s++)a[s-1]=arguments[s];return n(r,o,e.apply(void 0,[t].concat(a)))};return i.withConfig=function(e){return t(n,r,A({},o,e))},i.attrs=function(e){return t(n,r,A({},o,{attrs:A({},o.attrs||{},e)}))},i};return t},nt=("function"==typeof Object.getOwnPropertySymbols,Je($,V,z)),rt=tt(q),ot=Ge(nt,rt),it=(Xe($,z,q),et(z,q),Ye(ot,rt));t.a=it}).call(t,n(161))},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return w});var o=n(8),i=n(11),a=n(57),s=n(33),u=n(56),c=n(20),l=n(10),d=r(["\n  white-space: nowrap;\n\n  "," {\n    display: inline-block;\n    margin-right: 8px;\n    vertical-align: top;\n\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n"],["\n  white-space: nowrap;\n\n  "," {\n    display: inline-block;\n    margin-right: 8px;\n    vertical-align: top;\n\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n"]),p=r(["\n  font-family: ",";\n  font-size: 12px;\n  font-weight: normal;\n  margin: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"],["\n  font-family: ",";\n  font-size: 12px;\n  font-weight: normal;\n  margin: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]),h=r(["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: bold;\n  margin: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  & ~ "," {\n    margin-top: 8px;\n  }\n\n  & ~ "," {\n    margin-top: 4px;\n  }\n"],["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: bold;\n  margin: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  & ~ "," {\n    margin-top: 8px;\n  }\n\n  & ~ "," {\n    margin-top: 4px;\n  }\n"]),m=r(["\n  overflow: visible;\n  text-overflow: clip;\n  white-space: normal;\n"],["\n  overflow: visible;\n  text-overflow: clip;\n  white-space: normal;\n"]),f=r(["\n  height: 158px;\n  background-size: ",";\n  width: ","px;\n\n  ","\n\n  ",", ",", "," {\n    color: ","\n  }\n\n  "," {\n    ","\n  }\n\n  "," {\n    ","\n  }\n\n  padding: 8px;\n"],["\n  height: 158px;\n  background-size: ",";\n  width: ","px;\n\n  ","\n\n  ",", ",", "," {\n    color: ","\n  }\n\n  "," {\n    ","\n  }\n\n  "," {\n    ","\n  }\n\n  padding: 8px;\n"]),g=o.a.div(d,c.a),v=o.a.h2.attrs({
title:function(e){var t=e.children;return t}})(p,a.a),b=o.a.h1.attrs({title:function(e){var t=e.children;return t}})(h,a.a,g,v),y=b.extend(m),w=u.a.extend(f,function(e){var t=e.headerBgColor;return t?"100% 64px, cover":"cover"},function(e){var t=e.numLists,n=void 0===t?5:t;return""+(48*n+8)},function(e){var t=e.hasError;return t?"background-color: "+i.a["light-gray-300"]+";":""},b,v,y,function(e){var t=e.bgColor,r=e.hasError,o=e.headerBgColor,a=o||t||i.a["trello-blue-500"];return n.i(s.a)(a)&&!r?i.a.white:i.a["near-black"]},l.a,function(e){var t=e.hasError,n=e.loading;return(t||n)&&"opacity: 0;"},c.a,function(e){var t=e.hasError,n=e.loading;return(t||n)&&"background-color: "+i.a["light-gray-50"]+";"})},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return s});var o=n(8),i=n(11),a=r(["\n  background-color: ",";\n  border-radius: 2px;\n  box-sizing: border-box;\n  height: 24px;\n  opacity: 0.8;\n"],["\n  background-color: ",";\n  border-radius: 2px;\n  box-sizing: border-box;\n  height: 24px;\n  opacity: 0.8;\n"]),s=o.a.div(a,i.a.white)},function(e,t,n){"use strict";t.a={"business-blue-100":"#D2D7E5","business-blue-200":"#B2B9D0","business-blue-300":"#838FB5","business-blue-400":"#6170A1","business-blue-50":"#EDEFF4","business-blue-500":"#42548E","business-blue-600":"#3E4D80","business-blue-700":"#3A476F","business-blue-800":"#36405F","business-blue-900":"#30364C","green-100":"#D6ECD2","green-200":"#B7DDB0","green-300":"#99D18F","green-400":"#7BC86C","green-50":"#EEF6EC","green-500":"#61BD4F","green-600":"#5AAC44","green-700":"#519839","green-800":"#49852E","green-900":"#3F6F21","light-gray-100":"#EDEFF0","light-gray-200":"#E2E4E6","light-gray-300":"#D6DADC","light-gray-400":"#CDD2D4","light-gray-50":"#F8F9F9","light-gray-500":"#C4C9CC","light-gray-600":"#B6BBBF","light-gray-700":"#A5ACB0","light-gray-800":"#959DA1","light-gray-900":"#838C91","lime-100":"#D3F6E4","lime-200":"#B3F1D0","lime-300":"#90ECC1","lime-400":"#6DECA9","lime-50":"#ECFBF3","lime-500":"#51E898","lime-600":"#4FD683","lime-700":"#4DC26B","lime-800":"#4CAF54","lime-900":"#4A9839","orange-100":"#FCE8D2","orange-200":"#FAD8B0","orange-300":"#FDC788","orange-400":"#FFB968","orange-50":"#FDF5EC","orange-500":"#FFAB4A","orange-600":"#E99E40","orange-700":"#D29034","orange-800":"#BB8129","orange-900":"#A0711C","pink-100":"#FCDEF0","pink-200":"#FAC6E5","pink-300":"#FFB0E1","pink-400":"#FF95D6","pink-50":"#FEF2F9","pink-500":"#FF80CE","pink-600":"#E76EB1","pink-700":"#CD5A91","pink-800":"#B44772","pink-900":"#96304C","purple-100":"#EDDBF4","purple-200":"#DFC0EB","purple-300":"#D5A6E6","purple-400":"#CD8DE5","purple-50":"#F7F0FA","purple-500":"#C377E0","purple-600":"#A86CC1","purple-700":"#89609E","purple-800":"#6C547B","purple-900":"#484553","red-100":"#F5D3CE","red-200":"#EFB3AB","red-300":"#EC9488","red-400":"#EF7564","red-50":"#FBEDEB","red-500":"#EB5A46","red-600":"#CF513D","red-700":"#B04632","red-800":"#933B27","red-900":"#6E2F1A","sky-100":"#BDECF3","sky-200":"#8FDFEB","sky-300":"#5DD3E5","sky-400":"#29CCE5","sky-50":"#E4F7FA","sky-500":"#00C2E0","sky-600":"#00AECC","sky-700":"#0098B7","sky-800":"#0082A0","sky-900":"#006988","trello-blue-100":"#BCD9EA","trello-blue-200":"#8BBDD9","trello-blue-300":"#5BA4CF","trello-blue-400":"#298FCA","trello-blue-50":"#E4F0F6","trello-blue-500":"#0079BF","trello-blue-600":"#026AA7","trello-blue-700":"#055A8C","trello-blue-800":"#094C72","trello-blue-900":"#0C3953","yellow-100":"#FAF3C0","yellow-200":"#F5EA92","yellow-300":"#F3E260","yellow-400":"#F5DD29","yellow-50":"#FDFAE5","yellow-500":"#F2D600","yellow-600":"#E6C60D","yellow-700":"#D9B51C","yellow-800":"#CCA42B","yellow-900":"#BD903C",black:"#000","near-black":"#4d4d4d",white:"#FFF"}},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(119),i=n(120),a=n(121),s=n(122),u=n(123);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(27);e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(116);e.exports=r},function(e,t,n){var r=n(2),o=r(Object,"create");e.exports=o},function(e,t,n){function r(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=n(7),i=1/0;e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e){return null!=e&&i(e.length)&&!o(e)}var o=n(50),i=n(29);e.exports=r},function(t,n){t.exports=e("react")},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return s});var o=n(8),i=n(10),a=r(["\n  background-color: rgba(214, 218 , 220, 0.9); // light-gray-300\n  border-radius: 3px;\n  box-sizing: border-box;\n  width: 40px;\n  padding: 4px 4px 16px;\n\n  "," {\n    margin-bottom: 4px;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n"],["\n  background-color: rgba(214, 218 , 220, 0.9); // light-gray-300\n  border-radius: 3px;\n  box-sizing: border-box;\n  width: 40px;\n  padding: 4px 4px 16px;\n\n  "," {\n    margin-bottom: 4px;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n"]),s=o.a.div(a,i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return g});var r=n(148),o=n.n(r),i=n(150),a=n.n(i),s=n(19),u=n.n(s),c=n(52),l=n.n(c),d=n(9),p=n(10),h=n(20),m=function(e,t){if(null==e||0===e.length)return[];if(1===e.length)return[e[0].size];var n=l()(e,"size"),r=n[n.length-1],o=n[0],i=o.size/r.size*100;if(80>i)return e.slice(0,t).map(function(e){if(0===e.size)return 0;var t=a()(n,["id",e.id]);return t<n.length/3?1:t<n.length/3*2?2:3});if(90>i){var s=1,u=2;return o>8&&(s=2,u=3),e.slice(0,t).map(function(e){if(0===e.size)return 0;var t=a()(n,["id",e.id]);return t<n.length/2?s:u})}return e.slice(0,t).map(function(e){var t=e.size;return 0===t||null==t?0:9>t?1:17>t?2:3})},f=function(e){var t=e.size,n=e.id,r=Math.min(t||0,3);return u.a.createElement(h.a,{key:n},o()(Array(r),0).map(function(e,t){return u.a.createElement(p.a,{key:t})}))},g=function(e){var t=e.lists,n=e.numLists,r=m(t,n);return u.a.createElement(d.a,null,r.map(function(e,n){return u.a.createElement(f,{size:e,key:t[n].id})}))}},function(e,t,n){var r=n(2),o=n(1),i=r(o,"Map");e.exports=i},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(124),i=n(125),a=n(126),s=n(127),u=n(128);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?i(e[0],e[1]):o(e):u(e)}var o=n(84),i=n(85),a=n(17),s=n(0),u=n(154);e.exports=r},function(e,t){function n(e,t){return t=null==t?r:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&t>e}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function r(e,t){if(o(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||i(e)?!0:s.test(e)||!a.test(e)||null!=t&&e in Object(t)}var o=n(0),i=n(7),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){var r=n(77),o=n(6),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&r>=e}var r=9007199254740991;e.exports=n},function(e,t,n){function r(e){return a(e)?o(e):i(e)}var o=n(66),i=n(82),a=n(18);e.exports=r},function(e,t,n){function r(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(157);e.exports=r},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return d});var o=n(19),i=n.n(o),a=n(8),s=n(9),u=n(21),c=r(["\n  border-radius: 100px;\n  background-color: #F8F9F9;\n  display: block;\n  height: 8px;\n  margin-bottom: 16px;\n  width: 112px;\n"],["\n  border-radius: 100px;\n  background-color: #F8F9F9;\n  display: block;\n  height: 8px;\n  margin-bottom: 16px;\n  width: 112px;\n"]),l=a.a.span(c),d=function(e){var t=(e.className,e.numLists);return i.a.createElement(s.e,{bgColor:"light-gray-300",loading:!0,numLists:t},i.a.createElement(l,null),i.a.createElement(u.b,{lists:[{id:"1",size:2},{id:"2",size:3},{id:"3",size:1},{id:"4",size:2},{id:"5",size:2},{id:"6",size:1}],numLists:t}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n(11),o=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(e){return e.match(/\d{1,3},\s*\d{1,3},\s*\d{1,3}/gi)[0].split(/[,\s]+/).map(function(e){return parseInt(e,10)})},a=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null},s=function(e){if("#"===e[0])return a(e);if(0===e.indexOf("rgb"))return i(e);if(r.a.hasOwnProperty(e))return a(r.a[e]);throw new Error("Must provide a hex, RGB, or brand color")},u=function(e){var t=s(e),n=o(t,3),r=n[0],i=n[1],a=n[2],u=(.2126*r+.7152*i+.0722*a)/255;return.4623475>=u},c=function(e,t){if(0===e.indexOf("rgba"))return e;var n=s(e),r=o(n,3),i=r[0],a=r[1],u=r[2];return"rgba("+i+", "+a+", "+u+", "+t+")"}},function(e,t,n){function r(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(12),i=n(141),a=n(142),s=n(143),u=n(144),c=n(145);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}e.exports=n},function(e,t,n){var r=n(74),o=n(98),i=o(r);e.exports=i},function(e,t,n){function r(e,t){t=o(t,e);for(var n=0,r=t.length;null!=e&&r>n;)e=e[i(t[n++])];return n&&n==r?e:void 0}var o=n(42),i=n(16);e.exports=r},function(e,t,n){function r(e,t,n,a,s){return e===t?!0:null==e||null==t||!i(e)&&!i(t)?e!==e&&t!==t:o(e,t,n,a,r,s)}var o=n(78),i=n(6);e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){function r(e,t){return o(e)?e:i(e,t)?[e]:a(s(e))}var o=n(0),i=n(26),a=n(146),s=n(160);e.exports=r},function(e,t,n){function r(e,t,n,r,c,l){var d=n&s,p=e.length,h=t.length;if(p!=h&&!(d&&h>p))return!1;var m=l.get(e);if(m&&l.get(t))return m==t;var f=-1,g=!0,v=n&u?new o:void 0;for(l.set(e,t),l.set(t,e);++f<p;){var b=e[f],y=t[f];if(r)var w=d?r(y,b,f,t,e,l):r(b,y,f,e,t,l);if(void 0!==w){if(w)continue;g=!1;break}if(v){if(!i(t,function(e,t){return a(v,t)||b!==e&&!c(b,e,n,r,l)?void 0:v.push(t)})){g=!1;break}}else if(b!==y&&!c(b,y,n,r,l)){g=!1;break}}return l.delete(e),l.delete(t),g}var o=n(62),i=n(67),a=n(94),s=1,u=2;e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(163))},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return("number"==r?i(n)&&a(t,n.length):"string"==r&&t in n)?o(n[t],e):!1}var o=n(27),i=n(18),a=n(25),s=n(5);e.exports=r},function(e,t,n){function r(e){return e===e&&!o(e)}var o=n(5);e.exports=r},function(e,t){function n(e,t){return function(n){return null==n?!1:n[e]===t&&(void 0!==t||e in Object(n))}}e.exports=n},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;e.exports=n},function(e,t,n){(function(e){var r=n(1),o=n(156),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||o;e.exports=l}).call(t,n(53)(e))},function(e,t,n){function r(e){if(!i(e))return!1;var t=o(e);return t==s||t==u||t==a||t==c}var o=n(4),i=n(5),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";e.exports=r},function(e,t,n){var r=n(81),o=n(41),i=n(132),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},function(e,t,n){var r=n(72),o=n(86),i=n(89),a=n(45),s=i(function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])});e.exports=s},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);n.d(t,"BoardLists",function(){return r.a}),n.d(t,"TeamName",function(){return r.b}),n.d(t,"BoardName",function(){return r.c}),n.d(t,"ErrorMessage",function(){return r.d}),n.d(t,"Board",function(){return r.e});var o=n(55);n.d(t,"BoardTile",function(){return o.a});var i=n(10);n.d(t,"Card",function(){return i.a});var a=n(20);n.d(t,"List",function(){return a.a});var s=n(32);n.d(t,"PlaceholderBoardTile",function(){return s.a});var u=n(21);n.d(t,"ListOfCards",function(){return u.a}),n.d(t,"ProportionalBoardLists",function(){return u.b})},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(149),o=n.n(r),i=n(19),a=n.n(i),s=n(52),u=n.n(s),c=n(9),l=n(21),d=n(32),p=5,h=4,m=6,f=function(e){var t=e.board,n=e.error,r=e.loading,i=e.numLists,s=void 0===i?p:i;if((h>s||s>m)&&(s=p),r)return a.a.createElement(d.a,{numLists:s});if(n)return a.a.createElement(c.e,{className:"board-background",hasError:!0,numLists:s},a.a.createElement(c.d,null,n),a.a.createElement(l.b,{lists:[{id:"1",size:2},{id:"2",size:3},{id:"3",size:1},{id:"4",size:2},{id:"5",size:2},{id:"6",size:1}],numLists:s}));t||(t={});var f=void 0;t.prefs&&t.prefs.backgroundColor&&(f=t.prefs.backgroundColor);var g=f,v=void 0;if(t.prefs&&t.prefs.backgroundImage&&(v=t.prefs.backgroundImage,g="light"===t.prefs.backgroundBrightness?"light-gray-50":"near-black",t.prefs.backgroundImageScaled)){var b=u()(t.prefs.backgroundImageScaled,"width"),y=o()(b,function(e){return e.width>248&&e.height>158});y.length>0&&(v=y[0].url)}return a.a.createElement(c.e,{className:"board-background",bgColor:f,bgImage:v,headerBgColor:g,numLists:s},a.a.createElement(c.c,null,t.name),null!=t.organization&&a.a.createElement(c.b,null,t.organization.displayName),a.a.createElement(l.b,{lists:t.lists,numLists:s}))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return u});var o=n(8),i=n(11),a=n(33),s=r(["\n  background-color: ",";\n  background-image: ",";\n\n  background-repeat: no-repeat;\n  border: ",";\n  border-radius: 3px;\n  box-sizing: border-box;\n  overflow: hidden;\n  width: 248px;\n"],["\n  background-color: ",";\n  background-image: ",";\n\n  background-repeat: no-repeat;\n  border: ",";\n  border-radius: 3px;\n  box-sizing: border-box;\n  overflow: hidden;\n  width: 248px;\n"]),u=o.a.div(s,function(e){var t=e.bgColor;return t?i.a.hasOwnProperty(t)?i.a[t]:t:i.a["trello-blue-500"]},function(e){var t=e.bgImage,r=e.headerBgColor;if(!t)return"none";if(!r)return"url("+t+")";i.a.hasOwnProperty(r)&&(r=i.a[r]),r=n.i(a.b)(r,.7);var o="linear-gradient(0deg, "+r+" 50%, "+r+" 0%)";return o+", url("+t+")"},function(e){var t=e.borderColor;return t?"1px solid "+i.a[t]:"none"})},function(e,t,n){"use strict";t.a="Helvetica, Arial, sans-serif"},function(e,t,n){var r=n(2),o=n(1),i=r(o,"DataView");e.exports=i},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(110),i=n(111),a=n(112),s=n(113),u=n(114);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){var r=n(2),o=n(1),i=r(o,"Promise");e.exports=i},function(e,t,n){var r=n(2),o=n(1),i=r(o,"Set");e.exports=i},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(23),i=n(136),a=n(137);r.prototype.add=r.prototype.push=i,r.prototype.has=a,e.exports=r},function(e,t,n){var r=n(1),o=r.Uint8Array;e.exports=o},function(e,t,n){var r=n(2),o=n(1),i=r(o,"WeakMap");e.exports=i},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){function r(e,t){var n=a(e),r=!n&&i(e),l=!n&&!r&&s(e),p=!n&&!r&&!l&&c(e),h=n||r||l||p,m=h?o(e.length,String):[],f=m.length;for(var g in e)!t&&!d.call(e,g)||h&&("length"==g||l&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,f))||m.push(g);return m}var o=n(92),i=n(28),a=n(0),s=n(49),u=n(25),c=n(51),l=Object.prototype,d=l.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t,n){return e===e&&(void 0!==n&&(e=n>=e?e:n),void 0!==t&&(e=e>=t?e:t)),e}e.exports=n},function(e,t,n){function r(e,t,n,r){var a=e.length;for(n=o(n),0>n&&(n=-n>a?0:a+n),r=void 0===r||r>a?a:o(r),0>r&&(r+=a),r=n>r?0:i(r);r>n;)e[n++]=t;return e}var o=n(31),i=n(158);e.exports=r},function(e,t,n){function r(e,t){var n=[];return o(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}var o=n(38);e.exports=r},function(e,t){function n(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}e.exports=n},function(e,t,n){function r(e,t,n,a,s){var u=-1,c=e.length;for(n||(n=i),s||(s=[]);++u<c;){var l=e[u];t>0&&n(l)?t>1?r(l,t-1,n,a,s):o(s,l):a||(s[s.length]=l)}return s}var o=n(37),i=n(115);e.exports=r},function(e,t,n){var r=n(99),o=r();e.exports=o},function(e,t,n){function r(e,t){return e&&o(e,t,i)}var o=n(73),i=n(30);e.exports=r},function(e,t,n){function r(e,t,n){var r=t(e);return i(e)?r:o(r,n(e))}var o=n(37),i=n(0);e.exports=r},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function r(e){return i(e)&&o(e)==a}var o=n(4),i=n(6),a="[object Arguments]";e.exports=r},function(e,t,n){function r(e,t,n,r,g,b){var y=c(e),w=c(t),_=y?m:u(e),k=w?m:u(t);_=_==h?f:_,k=k==h?f:k;var C=_==f,x=k==f,j=_==k;if(j&&l(e)){if(!l(t))return!1;y=!0,C=!1}if(j&&!C)return b||(b=new o),y||d(e)?i(e,t,n,r,g,b):a(e,t,_,n,r,g,b);if(!(n&p)){var S=C&&v.call(e,"__wrapped__"),T=x&&v.call(t,"__wrapped__");if(S||T){var E=S?e.value():e,O=T?t.value():t;return b||(b=new o),g(E,O,n,r,b)}}return j?(b||(b=new o),s(e,t,n,r,g,b)):!1}var o=n(34),i=n(43),a=n(101),s=n(102),u=n(107),c=n(0),l=n(49),d=n(51),p=1,h="[object Arguments]",m="[object Array]",f="[object Object]",g=Object.prototype,v=g.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r){var u=n.length,c=u,l=!r;if(null==e)return!c;for(e=Object(e);u--;){var d=n[u];if(l&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++u<c;){d=n[u];var p=d[0],h=e[p],m=d[1];if(l&&d[2]){if(void 0===h&&!(p in e))return!1}else{var f=new o;if(r)var g=r(h,m,p,e,t,f);if(!(void 0===g?i(m,h,a|s,r,f):g))return!1}}return!0}var o=n(34),i=n(40),a=1,s=2;e.exports=r},function(e,t,n){function r(e){if(!a(e)||i(e))return!1;var t=o(e)?m:c;return t.test(s(e))}var o=n(50),i=n(117),a=n(5),s=n(48),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,p=l.toString,h=d.hasOwnProperty,m=RegExp("^"+p.call(h).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){return a(e)&&i(e.length)&&!!M[o(e)]}var o=n(4),i=n(29),a=n(6),s="[object Arguments]",u="[object Array]",c="[object Boolean]",l="[object Date]",d="[object Error]",p="[object Function]",h="[object Map]",m="[object Number]",f="[object Object]",g="[object RegExp]",v="[object Set]",b="[object String]",y="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",k="[object Float32Array]",C="[object Float64Array]",x="[object Int8Array]",j="[object Int16Array]",S="[object Int32Array]",T="[object Uint8Array]",E="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",M={};M[k]=M[C]=M[x]=M[j]=M[S]=M[T]=M[E]=M[O]=M[A]=!0,M[s]=M[u]=M[w]=M[c]=M[_]=M[l]=M[d]=M[p]=M[h]=M[m]=M[f]=M[g]=M[v]=M[b]=M[y]=!1,e.exports=r},function(e,t,n){function r(e){if(!o(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(118),i=n(131),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=-1,r=i(e)?Array(e.length):[];return o(e,function(e,o,i){r[++n]=t(e,o,i)}),r}var o=n(38),i=n(18);e.exports=r},function(e,t,n){function r(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(79),i=n(104),a=n(47);e.exports=r},function(e,t,n){function r(e,t){return s(e)&&u(t)?c(l(e),t):function(n){var r=i(n,e);return void 0===r&&r===t?a(n,e):o(t,r,d|p)}}var o=n(40),i=n(151),a=n(152),s=n(26),u=n(46),c=n(47),l=n(16),d=1,p=2;e.exports=r},function(e,t,n){function r(e,t,n){var r=-1;t=o(t.length?t:[l],u(i));var d=a(e,function(e,n,i){var a=o(t,function(t){return t(e)});return{criteria:a,index:++r,value:e}});return s(d,function(e,t){return c(e,t,n)})}var o=n(36),i=n(24),a=n(83),s=n(91),u=n(41),c=n(96),l=n(17);e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function r(e){return function(t){return o(t,e)}}var o=n(39);e.exports=r},function(e,t,n){function r(e,t){return a(i(e,t,o),e+"")}var o=n(17),i=n(135),a=n(139);e.exports=r},function(e,t,n){var r=n(147),o=n(100),i=n(17),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},function(e,t){function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e){if("string"==typeof e)return e;if(a(e))return i(e,r)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}var o=n(3),i=n(36),a=n(0),s=n(7),u=1/0,c=o?o.prototype:void 0,l=c?c.toString:void 0;e.exports=r},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){function r(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e===e,a=o(e),s=void 0!==t,u=null===t,c=t===t,l=o(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&t>e||l&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!c)return-1}return 0}var o=n(7);e.exports=r},function(e,t,n){function r(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,s=i.length,u=n.length;++r<s;){var c=o(i[r],a[r]);if(c){if(r>=u)return c;var l=n[r];return c*("desc"==l?-1:1)}}return e.index-t.index}var o=n(95);e.exports=r},function(e,t,n){var r=n(1),o=r["__core-js_shared__"];e.exports=o},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!o(n))return e(n,r);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var o=n(18);e.exports=r},function(e,t){function n(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++o];if(n(i[u],u,i)===!1)break}return t}}e.exports=n},function(e,t,n){var r=n(2),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){function r(e,t,n,r,o,C,j){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return e.byteLength==t.byteLength&&C(new i(e),new i(t))?!0:!1;case p:case h:case g:return a(+e,+t);case m:return e.name==t.name&&e.message==t.message;case v:case y:return e==t+"";case f:var S=u;case b:var T=r&l;if(S||(S=c),e.size!=t.size&&!T)return!1;var E=j.get(e);if(E)return E==t;r|=d,j.set(e,t);var O=s(S(e),S(t),r,o,C,j);return j.delete(e),O;case w:if(x)return x.call(e)==x.call(t)}return!1}var o=n(3),i=n(63),a=n(27),s=n(43),u=n(129),c=n(138),l=1,d=2,p="[object Boolean]",h="[object Date]",m="[object Error]",f="[object Map]",g="[object Number]",v="[object RegExp]",b="[object Set]",y="[object String]",w="[object Symbol]",_="[object ArrayBuffer]",k="[object DataView]",C=o?o.prototype:void 0,x=C?C.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t,n,r,a,u){var c=n&i,l=o(e),d=l.length,p=o(t),h=p.length;if(d!=h&&!c)return!1;for(var m=d;m--;){var f=l[m];if(!(c?f in t:s.call(t,f)))return!1}var g=u.get(e);if(g&&u.get(t))return g==t;var v=!0;u.set(e,t),u.set(t,e);for(var b=c;++m<d;){f=l[m];var y=e[f],w=t[f];if(r)var _=c?r(w,y,f,t,e,u):r(y,w,f,e,t,u);if(!(void 0===_?y===w||a(y,w,n,r,u):_)){v=!1;break}b||(b="constructor"==f)}if(v&&!b){var k=e.constructor,C=t.constructor;k!=C&&"constructor"in e&&"constructor"in t&&!("function"==typeof k&&k instanceof k&&"function"==typeof C&&C instanceof C)&&(v=!1)}return u.delete(e),u.delete(t),v}var o=n(103),i=1,a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return o(e,a,i)}var o=n(75),i=n(106),a=n(30);e.exports=r},function(e,t,n){function r(e){for(var t=i(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,o(a)]}return t}var o=n(46),i=n(30);e.exports=r},function(e,t,n){function r(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[u]=n:delete e[u]),o}var o=n(3),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,u=o?o.toStringTag:void 0;e.exports=r},function(e,t,n){var r=n(35),o=n(155),i=Object.prototype,a=i.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return a.call(e,t)}))}:o;e.exports=u},function(e,t,n){var r=n(58),o=n(22),i=n(60),a=n(61),s=n(64),u=n(4),c=n(48),l="[object Map]",d="[object Object]",p="[object Promise]",h="[object Set]",m="[object WeakMap]",f="[object DataView]",g=c(r),v=c(o),b=c(i),y=c(a),w=c(s),_=u;(r&&_(new r(new ArrayBuffer(1)))!=f||o&&_(new o)!=l||i&&_(i.resolve())!=p||a&&_(new a)!=h||s&&_(new s)!=m)&&(_=function(e){var t=u(e),n=t==d?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return f;case v:return l;case b:return p;case y:return h;case w:return m}return t}),e.exports=_},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(e,t,n){t=o(t,e);for(var r=-1,l=t.length,d=!1;++r<l;){var p=c(t[r]);if(!(d=null!=e&&n(e,p)))break;e=e[p]}return d||++r!=l?d:(l=null==e?0:e.length,!!l&&u(l)&&s(p,l)&&(a(e)||i(e)))}var o=n(42),i=n(28),a=n(0),s=n(25),u=n(29),c=n(16);e.exports=r},function(e,t,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(15);e.exports=r},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(o){var n=t[e];return n===i?void 0:n}return s.call(t,e)?t[e]:void 0}var o=n(15),i="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return o?void 0!==t[e]:a.call(t,e)}var o=n(15),i=Object.prototype,a=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?i:t,this}var o=n(15),i="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e){return a(e)||i(e)||!!(s&&e&&e[s])}var o=n(3),i=n(28),a=n(0),s=o?o.isConcatSpreadable:void 0;e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return!!i&&i in e}var o=n(97),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():a.call(t,n,1),--this.size,!0}var o=n(13),i=Array.prototype,a=i.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return 0>n?void 0:t[n][1]}var o=n(13);e.exports=r},function(e,t,n){function r(e){return o(this.__data__,e)>-1}var o=n(13);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=o(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this}var o=n(13);e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}var o=n(59),i=n(12),a=n(22);e.exports=r},function(e,t,n){function r(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=n(14);e.exports=r},function(e,t,n){function r(e){return o(this,e).get(e)}var o=n(14);e.exports=r},function(e,t,n){function r(e){return o(this,e).has(e)}var o=n(14);e.exports=r},function(e,t,n){function r(e,t){var n=o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var o=n(14);e.exports=r},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t,n){function r(e){var t=o(e,function(e){return n.size===i&&n.clear(),e}),n=t.cache;return t}var o=n(153),i=500;e.exports=r},function(e,t,n){var r=n(134),o=r(Object.keys,Object);e.exports=o},function(e,t,n){(function(e){var r=n(44),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o,s=a&&r.process,u=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=u}).call(t,n(53)(e))},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function r(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=i(r.length-t,0),u=Array(s);++a<s;)u[a]=r[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=r[a];return c[t]=n(u),o(e,this,c)}}var o=n(65),i=Math.max;e.exports=r},function(e,t){function n(e){return this.__data__.set(e,r),this}var r="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){var r=n(90),o=n(140),i=o(r);e.exports=i},function(e,t){function n(e){var t=0,n=0;return function(){var a=i(),s=o-(a-n);if(n=a,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;e.exports=n},function(e,t,n){function r(){this.__data__=new o,this.size=0}var o=n(12);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(e,t),this.size=n.size,this}var o=n(12),i=n(22),a=n(23),s=200;e.exports=r},function(e,t,n){var r=n(130),o=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=r(function(e){
var t=[];return o.test(e)&&t.push(""),e.replace(i,function(e,n,r,o){t.push(r?o.replace(a,"$1"):n||e)}),t});e.exports=s},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){function r(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&i(e,t,n)&&(n=0,r=a),o(e,t,n,r)):[]}var o=n(69),i=n(45);e.exports=r},function(e,t,n){function r(e,t){var n=s(e)?o:i;return n(e,a(t,3))}var o=n(35),i=n(70),a=n(24),s=n(0);e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var u=null==n?0:a(n);return 0>u&&(u=s(r+u,0)),o(e,i(t,3),u)}var o=n(71),i=n(24),a=n(31),s=Math.max;e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}var o=n(39);e.exports=r},function(e,t,n){function r(e,t){return null!=e&&i(e,t,o)}var o=n(76),i=n(109);e.exports=r},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(r.Cache||o),n}var o=n(23),i="Expected a function";r.Cache=o,e.exports=r},function(e,t,n){function r(e){return a(e)?o(s(e)):i(e)}var o=n(87),i=n(88),a=n(26),s=n(16);e.exports=r},function(e,t){function n(){return[]}e.exports=n},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if(e=o(e),e===i||e===-i){var t=0>e?-1:1;return t*a}return e===e?e:0}var o=n(159),i=1/0,a=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){return e?o(i(e),0,a):0}var o=n(68),i=n(31),a=4294967295;e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||l.test(e)?d(e.slice(2),n?2:8):u.test(e)?a:+e}var o=n(5),i=n(7),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;e.exports=r},function(e,t,n){function r(e){return null==e?"":o(e)}var o=n(93);e.exports=r},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){f&&h&&(f=!1,h.length?m=h.concat(m):g=-1,m.length&&s())}function s(){if(!f){var e=o(a);f=!0;for(var t=m.length;t;){for(h=m,m=[];++g<t;)h&&h[g].run();g=-1,t=m.length}h=null,f=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,d,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,m=[],f=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new u(e,t)),1!==m.length||f||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){!function(t){e.exports=t(null)}(function e(t){"use strict";function n(e,t,o,a){for(var c,l,d=0,p=0,f=0,g=0,v=0,b=0,y=0,w=0,_=0,k=0,C=0,x=0,E=0,O=0,A=0,M=0,B=0,P=0,Y=0,Ce=o.length,xe=Ce-1,Ee="",Ae="",Me="",Fe="",$e="",Ue="";Ce>A;){if(y=o.charCodeAt(A),p+g+f+d===0){if(A===xe&&(M>0&&(Ae=Ae.replace(m,"")),(Ae=Ae.trim()).length>0)){switch(y){case G:case W:case N:case H:case q:break;default:Ae+=o.charAt(A)}y=N}if(1===B)switch(y){case z:case X:B=0;break;case W:case H:case q:case G:break;default:A--,y=N}switch(y){case z:for(Ae=Ae.trim(),v=Ae.charCodeAt(0),C=1,A++;Ce>A;){switch(y=o.charCodeAt(A)){case z:C++;break;case V:C--}if(0===C)break;Me+=o.charAt(A++)}switch(v===se&&(v=(Ae=Ae.replace(h,"").trim()).charCodeAt(0)),v){case K:switch(M>0&&(Ae=Ae.replace(m,"")),b=Ae.charCodeAt(1)){case ve:case de:case pe:c=t;break;default:c=Te}if(Me=n(t,c,Me,b),Y=Me.length,Se>0&&0===Y&&(Y=Ae.length),Oe>0&&(c=r(Te,Ae,P),l=u(De,Me,c,t,ye,be,Y,b),Ae=c.join(""),void 0!==l&&0===(Y=(Me=l.trim()).length)&&(b=0,Me="")),Y>0)switch(b){case ve:case de:case pe:Me=Ae+"{"+Me+"}";break;case le:Ae=Ae.replace(j,"$1 $2"+(Ne>0?Ve:"")),Me=Ae+"{"+Me+"}",Me="@"+(ke>0?L+Me+"@"+Me:Me);break;default:Me=Ae+Me}else Me="";break;default:Me=n(t,r(t,Ae,P),Me,a)}$e+=Me,x=0,B=0,O=0,M=0,P=0,E=0,Ae="",Me="",y=o.charCodeAt(++A);break;case V:case N:if(Ae=(M>0?Ae.replace(m,""):Ae).trim(),Ae.length>1)switch(0===O&&(v=Ae.charCodeAt(0),(v===Q||v>96&&123>v)&&Ae.indexOf(" ")&&(Ae=Ae.replace(" ",":"))),Oe>0&&void 0!==(l=u(Pe,Ae,t,e,ye,be,Fe.length,a))&&0===(Ae=l.trim()).length&&(Ae="\x00\x00"),v=Ae.charCodeAt(0),b=Ae.charCodeAt(1),v+b){case se:break;case fe:case ge:Ue+=Ae+o.charAt(A);break;default:Fe+=O>0?i(Ae,v,b,Ae.charCodeAt(2)):Ae+";"}x=0,B=0,O=0,M=0,P=0,Ae="",y=o.charCodeAt(++A)}}switch(y){case H:case q:if(p+g+f+d+je===0)switch(k){case F:case te:case ne:case K:case ae:case oe:case Z:case ie:case re:case Q:case ee:case X:case N:case z:case V:break;default:O>0&&(B=1)}p===re&&(p=0),Oe*Ie>0&&u(Be,Ae,t,e,ye,be,Fe.length,a),be=1,ye++;break;case N:case V:if(p+g+f+d===0){be++;break}default:switch(be++,Ee=o.charAt(A),y){case W:case G:if(g+d===0)switch(w){case X:case ee:case W:case G:Ee="";break;default:y!==G&&(Ee=" ")}break;case se:Ee="\\0";break;case ue:Ee="\\f";break;case ce:Ee="\\v";break;case J:g+p+d===0&&_e>0&&(P=1,M=1,Ee="\f"+Ee);break;case 108:if(g+p+d+we===0&&O>0)switch(A-O){case 2:w===he&&o.charCodeAt(A-3)===ee&&(we=w);case 8:_===me&&(we=_)}break;case ee:g+p+d===0&&(O=A);break;case X:p+f+g+d===0&&(M=1,Ee+="\r");break;case ne:0===p&&(g=g===y?0:0===g?y:g,A===xe&&(xe++,Ce++));break;case te:0===p&&(g=g===y?0:0===g?y:g,A===xe&&(xe++,Ce++));break;case $:g+p+f===0&&d++;break;case U:g+p+f===0&&d--;break;case F:g+p+d===0&&(A===xe&&(xe++,Ce++),f--);break;case R:if(g+p+d===0){if(0===x)switch(2*w+3*_){case 533:break;default:C=0,x=1}f++}break;case K:p+f+g+d+O+E===0&&(E=1);break;case Z:case re:if(g+d+f>0)break;switch(p){case 0:switch(2*y+3*o.charCodeAt(A+1)){case 235:p=re;break;case 220:p=Z}break;case Z:y===re&&w===Z&&(Ee="",p=0)}}if(0===p){if(_e+g+d+E===0&&a!==le&&y!==N)switch(y){case X:case ae:case oe:case ie:case F:case R:if(0===x){switch(w){case W:case G:case q:case H:Ee+="\x00";break;default:Ee="\x00"+Ee+(y===X?"":"\x00")}M=1}else switch(y){case R:x=++C;break;case F:0===(x=--C)&&(M=1,Ee+="\x00")}break;case G:switch(w){case se:case z:case V:case N:case X:case ue:case W:case G:case q:case H:break;default:0===x&&(M=1,Ee+="\x00")}}Ae+=Ee,y!==G&&(k=y)}}_=w,w=y,A++}if(Y=Fe.length,Se>0&&0===Y&&0===$e.length&&0===t[0].length==!1&&(a!==de||1===t.length&&(_e>0?ze:Re)===t[0])&&(Y=t.join(",").length+2),Y>0){if(c=0===_e&&a!==le?s(t):t,Oe>0&&(l=u(Le,Fe,c,e,ye,be,Y,a),void 0!==l&&0===(Fe=l).length))return Ue+Fe+$e;if(Fe=c.join(",")+"{"+Fe+"}",ke*we>0){switch(we){case me:Fe=Fe.replace(T,":"+D+"$1")+Fe;break;case he:Fe=Fe.replace(S,"::"+L+"input-$1")+Fe.replace(S,"::"+D+"$1")+Fe.replace(S,":"+I+"input-$1")+Fe}we=0}}return Ue+Fe+$e}function r(e,t,n){var r=t.trim().split(_),i=r,a=r.length,s=e.length;switch(s){case 0:case 1:for(var u=0,c=0===s?"":e[0]+" ";a>u;u++)i[u]=o(c,i[u],n,s).trim();break;default:for(var u=0,l=0,i=[];a>u;u++)for(var d=0;s>d;d++)i[l++]=o(e[d]+" ",r[u],n,s).trim()}return i}function o(e,t,n,r){var o=t,i=o.charCodeAt(0);switch(33>i&&(i=(o=o.trim()).charCodeAt(0)),i){case J:switch(_e+r){case 0:case 1:if(0===e.trim().length)break;default:return o.replace(k,"$1"+e.trim())}break;case ee:switch(o.charCodeAt(1)){case 103:if(Ce>0&&_e>0)return o.replace(C,"$1").replace(k,"$1"+Re);break;default:return e.trim()+o}default:if(n*_e>0&&o.indexOf("\f")>0)return o.replace(k,(e.charCodeAt(0)===ee?"":"$1")+e.trim())}return e+o}function i(e,t,n,r){var o,i=e+";",s=0,u=2*t+3*n+4*r;if(944===u)i=a(i);else if(ke>0)switch(u){case 963:110===i.charCodeAt(5)&&(i=L+i+i);break;case 978:i=L+i+D+i+i;break;case 1019:case 983:i=L+i+D+i+I+i+i;break;case 883:i.charCodeAt(8)===Q&&(i=L+i+i);break;case 932:i=L+i+I+i+i;break;case 964:i=L+i+I+"flex-"+i+i;break;case 1023:o=i.substring(i.indexOf(":",15)).replace("flex-",""),i=L+"box-pack"+o+L+i+I+"flex-pack"+o+i;break;case 975:switch(s=(i=e).length-10,o=(33===i.charCodeAt(s)?i.substring(0,s):i).substring(8).trim(),u=o.charCodeAt(0)+(0|o.charCodeAt(7))){case 203:o.charCodeAt(8)>110&&(i=i.replace(o,L+o)+";"+i);break;case 207:case 102:i=i.replace(o,L+(u>102?"inline-":"")+"box")+";"+i.replace(o,L+o)+";"+i.replace(o,I+o+"box")+";"+i}i+=";";break;case 938:if(i.charCodeAt(5)===Q)switch(i.charCodeAt(6)){case 105:o=i.replace("-items",""),i=L+i+L+"box-"+o+I+"flex-"+o+i;break;case 115:i=L+i+I+"flex-item-"+i.replace("-self","")+i;break;default:i=L+i+I+"flex-line-pack"+i.replace("align-content","")+i}break;case 1005:g.test(i)&&(i=i.replace(f,":"+L)+i.replace(f,":"+D)+i);break;case 953:(s=i.indexOf("-content",9))>0&&(o=i.substring(s-3),i="width:"+L+o+"width:"+D+o+"width:"+o);break;case 1015:if(e.charCodeAt(9)!==Q)break;case 962:i=L+i+(102===i.charCodeAt(5)?I+i:"")+i,n+r===211&&105===i.charCodeAt(13)&&i.indexOf("transform",10)>0&&(i=i.substring(0,i.indexOf(";",27)+1).replace(v,"$1"+L+"$2")+i);break;case 1e3:switch(o=i.substring(13).trim(),s=o.indexOf("-")+1,o.charCodeAt(0)+o.charCodeAt(s)){case 226:o=i.replace(P,"tb");break;case 232:o=i.replace(P,"tb-rl");break;case 220:o=i.replace(P,"lr");break;default:return i}i=L+i+I+o+i}return i}function a(e){var t=e.length,n=e.indexOf(":",9)+1,r=e.substring(0,n).trim(),o=e.substring(n,t-1).trim(),i="";if(e.charCodeAt(9)!==Q)for(var a=o.split(b),s=0,n=0,t=a.length;t>s;n=0,s++){for(var u=a[s],c=u.split(y);u=c[n];){var l=u.charCodeAt(0);if(1===Ne&&(l>K&&90>l||l>96&&123>l||l===Y||l===Q&&u.charCodeAt(1)!==Q))switch(isNaN(parseFloat(u))+(-1!==u.indexOf("("))){case 1:switch(u){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:u+=Ve}}c[n++]=u}i+=(0===s?"":",")+c.join(" ")}else i+=110===e.charCodeAt(10)?o+(1===Ne?Ve:""):o;return i=r+i+";",ke>0?L+i+i:i}function s(e){for(var t,n,r=0,o=e.length,i=Array(o);o>r;r++){for(var a=e[r].split(w),s="",u=0,c=0,l=0,d=0,p=a.length;p>u;u++)if(!(0===(c=(n=a[u]).length)&&p>1)){if(l=s.charCodeAt(s.length-1),d=n.charCodeAt(0),t="",0!==u)switch(l){case Z:case ae:case oe:case ie:case G:case R:break;default:t=" "}switch(d){case J:n=t+ze;case ae:case oe:case ie:case G:case F:case R:break;case $:n=t+n+ze;break;case ee:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(Ce>0){n=t+n.substring(8,c-1);break}default:(1>u||a[u-1].length<1)&&(n=t+ze+n)}break;case X:t="";default:n=c>1&&n.indexOf(":")>0?t+n.replace(B,"$1"+ze+"$2"):t+n+ze}s+=n}i[r]=s.replace(m,"").trim()}return i}function u(e,t,n,r,o,i,a,s){for(var u,c=0,l=t;Oe>c;c++)switch(u=Ee[c].call(p,e,l,n,r,o,i,a,s)){case void 0:case!1:case!0:case null:break;default:l=u}switch(l){case void 0:case!1:case!0:case null:case t:break;default:return l}}function c(e){return e.replace(m,"").replace(E,"").replace(O,"$1").replace(A,"$1").replace(M," ")}function l(e){switch(e){case void 0:case null:Oe=Ee.length=0;break;default:switch(e.constructor){case Array:for(var t=0,n=e.length;n>t;t++)l(e[t]);break;case Function:Ee[Oe++]=e;break;case Boolean:Ie=0|!!e}}return l}function d(e){for(var t in e){var n=e[t];switch(t){case"keyframe":Ne=0|n;break;case"global":Ce=0|n;break;case"cascade":_e=0|n;break;case"compress":xe=0|n;break;case"prefix":ke=0|n;break;case"semicolon":je=0|n;break;case"preserve":Se=0|n}}return d}function p(t,r){if(void 0!==this&&this.constructor===p)return e(t);var o=t,i=o.charCodeAt(0);33>i&&(i=(o=o.trim()).charCodeAt(0)),Ne>0&&(Ve=o.replace(x,i===$?"":"-")),i=1,1===_e?Re=o:ze=o;var a,s=[Re];Oe>0&&(a=u(Me,r,s,s,ye,be,0,0),void 0!==a&&"string"==typeof a&&(r=a));var l=n(Te,s,r,0);return Oe>0&&(a=u(Ae,l,s,s,ye,be,l.length,0),void 0!==a&&"string"!=typeof(l=a)&&(i=0)),Ve="",Re="",ze="",we=0,ye=1,be=1,xe*i===0?l:c(l)}var h=/^\0+/g,m=/[\0\r\f]/g,f=/: */g,g=/zoo|gra/,v=/([,: ])(transform)/g,b=/,+\s*(?![^(]*[)])/g,y=/ +\s*(?![^(]*[)])/g,w=/ *[\0] */g,_=/,\r+?/g,k=/([\t\r\n ])*\f?&/g,C=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,x=/\W+/g,j=/@(k\w+)\s*(\S*)\s*/,S=/::(place)/g,T=/:(read-only)/g,E=/\s+(?=[{\];=:>])/g,O=/([[}=:>])\s+/g,A=/(\{[^{]+?);(?=\})/g,M=/\s{2,}/g,B=/([^\(])(:+) */g,P=/[svh]\w+-[tblr]{2}/,L="-webkit-",D="-moz-",I="-ms-",N=59,V=125,z=123,R=40,F=41,$=91,U=93,q=10,H=13,W=9,K=64,G=32,J=38,Q=45,Y=95,Z=42,X=44,ee=58,te=39,ne=34,re=47,oe=62,ie=43,ae=126,se=0,ue=12,ce=11,le=107,de=109,pe=115,he=112,me=111,fe=169,ge=163,ve=100,be=1,ye=1,we=0,_e=1,ke=1,Ce=1,xe=0,je=0,Se=0,Te=[],Ee=[],Oe=0,Ae=-2,Me=-1,Be=0,Pe=1,Le=2,De=3,Ie=0,Ne=1,Ve="",ze="",Re="";return p.use=l,p.set=d,void 0!==t&&d(t),p})},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(1,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(54)}])},{}],238:[function(e,t,n){t.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=60)}([function(t,n){t.exports=e("react")},function(e,t,n){"use strict";(function(e){function r(e){return e.replace(k,"-$1").toLowerCase()}function o(e){return x(e).replace(j,"-ms-")}function i(e){return D(e)===!0&&"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){return t={exports:{}},e(t,t.exports),t.exports}function s(e){return function(){return e}}function u(e,t,n,r,o,i,a,s){if(oe(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,s],l=0;u=new Error(t.replace(/%s/g,function(){return c[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}function c(e,t,n,r,o){for(var i in e)if(e.hasOwnProperty(i)){var a;try{pe("function"==typeof e[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",r||"React class",n,i),a=e[i](t,i,r,n,null,me)}catch(e){a=e}if(he(!a||a instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,i,"undefined"==typeof a?"undefined":T(a)),a instanceof Error&&!(a.message in fe)){fe[a.message]=!0;var s=o?o():"";he(!1,"Failed %s type: %s%s",n,a.message,null!=s?s:"")}}}function l(e){return"string"==typeof e}function d(e){return"function"==typeof e&&"string"==typeof e.styledComponentId}function p(e){return e.displayName||e.name||"Component"}function h(e){var t=Re.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}function m(e,t){for(var n=1540483477,r=24,o=t^e.length,i=e.length,a=0;i>=4;){var s=f(e,a);s=v(s,n),s^=s>>>r,s=v(s,n),o=v(o,n),o^=s,a+=4,i-=4}switch(i){case 3:o^=g(e,a),o^=e.charCodeAt(a+2)<<16,o=v(o,n);break;case 2:o^=g(e,a),o=v(o,n);break;case 1:o^=e.charCodeAt(a),o=v(o,n)}return o^=o>>>13,o=v(o,n),o^=o>>>15,o>>>0}function f(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function g(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function v(e,t){e=0|e,t=0|t;var n=65535&e,r=e>>>16,o=n*t+((r*t&65535)<<16)|0;return o}n.d(t,"a",function(){return Ue});var b=n(59),y=n.n(b),w=n(0),_=n.n(w),k=/([A-Z])/g,C=r,x=C,j=/^ms-/,S=o,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},B=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},P=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},L=function(e){return null!=e&&"object"===("undefined"==typeof e?"undefined":T(e))&&!Array.isArray(e)},D=L,I=function(e){var t,n;return i(e)===!1?!1:(t=e.constructor,"function"!=typeof t?!1:(n=t.prototype,i(n)===!1?!1:n.hasOwnProperty("isPrototypeOf")===!1?!1:!0))},N=function e(t,n){var r=Object.keys(t).map(function(n){return I(t[n])?e(t[n],n):S(n)+": "+t[n]+";"}).join(" ");return n?n+" {\n  "+r+"\n}":r},V=function e(t,n){return t.reduce(function(t,r){return void 0===r||null===r||r===!1||""===r?t:Array.isArray(r)?[].concat(t,e(r,n)):r.hasOwnProperty("styledComponentId")?[].concat(t,["."+r.styledComponentId]):"function"==typeof r?n?t.concat.apply(t,e([r(n)],n)):t.concat(r):t.concat(I(r)?N(r):r.toString())},[])};y.a.set({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!0});var z=function(e,t,n){var r=e.join("").replace(/^\s*\/\/.*$/gm,""),o=t&&n?n+" "+t+" { "+r+" }":r;return y()(n||!t?"":t,o)},R="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),F=R.length,$=function(e){var t="",n=void 0;for(n=e;n>F;n=Math.floor(n/R.length))t=R[n%F]+t;return R[n%F]+t},U=function(e,t){return t.reduce(function(t,n,r){return t.concat(n,e[r+1])},[e[0]])},q=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return V(U(e,n))},H=/^[^\S\n]*?\/\* sc-component-id:\s+(\S+)\s+\*\//gm,W=function(e){var t=""+(e||""),n=[];return t.replace(H,function(e,t,r){return n.push({componentId:t,matchIndex:r}),e}),n.map(function(e,r){var o=e.componentId,i=e.matchIndex,a=n[r+1],s=a?t.slice(i,a.matchIndex):t.slice(i);return{componentId:o,cssFromDOM:s}})},K=40,G=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";E(this,e),this.el=t,this.isLocal=n,this.ready=!1;var o=W(r);this.size=o.length,this.components=o.reduce(function(e,t){return e[t.componentId]=t,e},{})}return e.prototype.isFull=function(){return this.size>=K},e.prototype.addComponent=function(e){if(this.ready||this.replaceElement(),this.components[e])throw new Error("Trying to add Component '"+e+"' twice!");var t={componentId:e,textNode:document.createTextNode("")};this.el.appendChild(t.textNode),this.size+=1,this.components[e]=t},e.prototype.inject=function(e,t,n){this.ready||this.replaceElement();var r=this.components[e];if(!r)throw new Error("Must add a new component before you can inject css into it");if(""===r.textNode.data&&r.textNode.appendData("\n/* sc-component-id: "+e+" */\n"),r.textNode.appendData(t),n){var o=this.el.getAttribute(Q);this.el.setAttribute(Q,o?o+" "+n:n)}},e.prototype.toHTML=function(){return this.el.outerHTML},e.prototype.toReactElement=function(){throw new Error("BrowserTag doesn't implement toReactElement!")},e.prototype.clone=function(){throw new Error("BrowserTag cannot be cloned!")},e.prototype.replaceElement=function(){var e=this;if(this.ready=!0,0!==this.size){var t=this.el.cloneNode();if(t.appendChild(document.createTextNode("\n")),Object.keys(this.components).forEach(function(n){var r=e.components[n];r.textNode=document.createTextNode(r.cssFromDOM),t.appendChild(r.textNode)}),!this.el.parentNode)throw new Error("Trying to replace an element that wasn't mounted!");this.el.parentNode.replaceChild(t,this.el),this.el=t}},e}(),J={create:function(){for(var e=[],t={},n=document.querySelectorAll("["+Q+"]"),r=n.length,o=0;r>o;o+=1){var i=n[o];e.push(new G(i,"true"===i.getAttribute(Y),i.innerHTML));var a=i.getAttribute(Q);a&&a.trim().split(/\s+/).forEach(function(e){t[e]=!0})}var s=function(e){var t=document.createElement("style");if(t.type="text/css",t.setAttribute(Q,""),t.setAttribute(Y,e?"true":"false"),!document.head)throw new Error("Missing document <head>");return document.head.appendChild(t),new G(t,e)};return new te(s,e,t)}},Q="data-styled-components",Y="data-styled-components-is-local",Z="__styled-components-stylesheet__",X=null,ee=[],te=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};E(this,e),this.hashes={},this.deferredInjections={},this.tagConstructor=t,this.tags=n,this.names=r,this.constructComponentTagMap()}return e.prototype.constructComponentTagMap=function(){var e=this;this.componentTags={},this.tags.forEach(function(t){Object.keys(t.components).forEach(function(n){e.componentTags[n]=t})})},e.prototype.getName=function(e){return this.hashes[e.toString()]},e.prototype.alreadyInjected=function(e,t){return this.names[t]?(this.hashes[e.toString()]=t,!0):!1},e.prototype.hasInjectedComponent=function(e){return!!this.componentTags[e]},e.prototype.deferredInject=function(e,t,n){this===X&&ee.forEach(function(r){r.deferredInject(e,t,n)}),this.getOrCreateTag(e,t),this.deferredInjections[e]=n},e.prototype.inject=function(e,t,n,r,o){this===X&&ee.forEach(function(r){r.inject(e,t,n)});var i=this.getOrCreateTag(e,t),a=this.deferredInjections[e];a&&(i.inject(e,a),delete this.deferredInjections[e]),i.inject(e,n,o),r&&o&&(this.hashes[r.toString()]=o)},e.prototype.toHTML=function(){return this.tags.map(function(e){return e.toHTML()}).join("")},e.prototype.toReactElements=function(){return this.tags.map(function(e,t){return e.toReactElement("sc-"+t)})},e.prototype.getOrCreateTag=function(e,t){var n=this.componentTags[e];if(n)return n;var r=this.tags[this.tags.length-1],o=!r||r.isFull()||r.isLocal!==t?this.createNewTag(t):r;return this.componentTags[e]=o,o.addComponent(e),o},e.prototype.createNewTag=function(e){var t=this.tagConstructor(e);return this.tags.push(t),t},e.reset=function(t){X=e.create(t)},e.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof document;return(e?Ee:J).create()},e.clone=function(t){var n=new e(t.tagConstructor,t.tags.map(function(e){return e.clone()}),A({},t.names));return n.hashes=A({},t.hashes),n.deferredInjections=A({},t.deferredInjections),ee.push(n),n},O(e,null,[{key:"instance",get:function(){return X||(X=e.create())}}]),e}(),ne=function(){};ne.thatReturns=s,ne.thatReturnsFalse=s(!1),ne.thatReturnsTrue=s(!0),ne.thatReturnsNull=s(null),ne.thatReturnsThis=function(){return this},ne.thatReturnsArgument=function(e){return e};var re=ne,oe=function(e){};oe=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")};var ie=u,ae=re,se=ae;!function(){var e=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];var o=0,i="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}};se=function(t,n){if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==n.indexOf("Failed Composite propType: ")&&!t){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;r>i;i++)o[i-2]=arguments[i];e.apply(void 0,[n].concat(o))}}}();var ue,ce=se,le="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",de=le,pe=ie,he=ce,me=de,fe={},ge=c,ve=re,be=ie,ye=ce,we=de,_e=ge,ke=function(e,t){function n(e){var t=e&&(_&&e[_]||e[k]);return"function"==typeof t?t:void 0}function r(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function o(e){this.message=e,this.stack=""}function i(e){function n(n,a,s,u,c,l,d){if(u=u||C,l=l||s,d!==we)if(t)be(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("undefined"!=typeof console){var p=u+":"+s;!r[p]&&3>i&&(ye(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",l,u),r[p]=!0,i++)}return null==a[s]?n?new o(null===a[s]?"The "+c+" `"+l+"` is marked as required "+("in `"+u+"`, but its value is `null`."):"The "+c+" `"+l+"` is marked as required in "+("`"+u+"`, but its value is `undefined`.")):null:e(a,s,u,c,l)}var r={},i=0,a=n.bind(null,!1);return a.isRequired=n.bind(null,!0),a}function a(e){function t(t,n,r,i,a,s){var u=t[n],c=b(u);if(c!==e){var l=y(u);return new o("Invalid "+i+" `"+a+"` of type "+("`"+l+"` supplied to `"+r+"`, expected ")+("`"+e+"`."))}return null}return i(t)}function s(){return i(ve.thatReturnsNull)}function u(e){function t(t,n,r,i,a){if("function"!=typeof e)return new o("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){var u=b(s);return new o("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<s.length;c++){var l=e(s,c,r,i,a+"["+c+"]",we);if(l instanceof Error)return l}return null}return i(t)}function c(){function t(t,n,r,i,a){var s=t[n];if(!e(s)){var u=b(s);return new o("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected a single ReactElement."))}return null}return i(t)}function l(e){function t(t,n,r,i,a){if(!(t[n]instanceof e)){var s=e.name||C,u=w(t[n]);return new o("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected ")+("instance of `"+s+"`."))}return null}return i(t)}function d(e){function t(t,n,i,a,s){for(var u=t[n],c=0;c<e.length;c++)if(r(u,e[c]))return null;var l=JSON.stringify(e);return new o("Invalid "+a+" `"+s+"` of value `"+u+"` "+("supplied to `"+i+"`, expected one of "+l+"."))}return Array.isArray(e)?i(t):(ye(!1,"Invalid argument supplied to oneOf, expected an instance of array."),ve.thatReturnsNull)}function p(e){function t(t,n,r,i,a){if("function"!=typeof e)return new o("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],u=b(s);if("object"!==u)return new o("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."));for(var c in s)if(s.hasOwnProperty(c)){var l=e(s,c,r,i,a+"."+c,we);if(l instanceof Error)return l}return null}return i(t)}function h(e){function t(t,n,r,i,a){for(var s=0;s<e.length;s++){var u=e[s];if(null==u(t,n,r,i,a,we))return null}return new o("Invalid "+i+" `"+a+"` supplied to "+("`"+r+"`."))}return Array.isArray(e)?i(t):(ye(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),ve.thatReturnsNull)}function m(){function e(e,t,n,r,i){return g(e[t])?null:new o("Invalid "+r+" `"+i+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return i(e)}function f(e){function t(t,n,r,i,a){var s=t[n],u=b(s);if("object"!==u)return new o("Invalid "+i+" `"+a+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."));for(var c in e){var l=e[c];if(l){var d=l(s,c,r,i,a+"."+c,we);if(d)return d}}return null}return i(t)}function g(t){switch("undefined"==typeof t?"undefined":T(t)){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(g);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!g(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!g(a[1]))return!1}return!0;default:return!1}}function v(e,t){return"symbol"===e?!0:"Symbol"===t["@@toStringTag"]?!0:"function"==typeof Symbol&&t instanceof Symbol?!0:!1}function b(e){var t="undefined"==typeof e?"undefined":T(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":v(t,e)?"symbol":t}function y(e){var t=b(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function w(e){return e.constructor&&e.constructor.name?e.constructor.name:C}var _="function"==typeof Symbol&&Symbol.iterator,k="@@iterator",C="<<anonymous>>",x={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:s(),arrayOf:u,element:c(),instanceOf:l,node:m(),objectOf:p,oneOf:d,oneOfType:h,shape:f};return o.prototype=Error.prototype,x.checkPropTypes=_e,x.PropTypes=x,x},Ce=a(function(e){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,n=function(e){return"object"===("undefined"==typeof e?"undefined":T(e))&&null!==e&&e.$$typeof===t},r=!0;e.exports=ke(n,r)}),xe=function(e){function t(){return E(this,t),P(this,e.apply(this,arguments))}return M(t,e),t.prototype.getChildContext=function(){var e;return e={},e[Z]=this.props.sheet,e},t.prototype.render=function(){return _.a.Children.only(this.props.children)},t}(w.Component);xe.childContextTypes=(ue={},ue[Z]=Ce.instanceOf(te).isRequired,ue),xe.propTypes={sheet:Ce.instanceOf(te).isRequired};var je,Se,Te=function(){function e(t){E(this,e),this.isLocal=t,this.components={},this.size=0,this.names=[]}return e.prototype.isFull=function(){return!1},e.prototype.addComponent=function(e){if(this.components[e])throw new Error("Trying to add Component '"+e+"' twice!");this.components[e]={componentId:e,css:""},this.size+=1},e.prototype.inject=function(e,t,n){var r=this.components[e];if(!r)throw new Error("Must add a new component before you can inject css into it");""===r.css&&(r.css="/* sc-component-id: "+e+" */\n"),r.css+=t.replace(/\n*$/,"\n"),n&&this.names.push(n)},e.prototype.toHTML=function(){var e=this,t=Q+'="'+this.names.join(" ")+'"',n=Y+'="'+(this.isLocal?"true":"false")+'"',r=Object.keys(this.components).map(function(t){return e.components[t].css}).join("");return'<style type="text/css" '+t+" "+n+">\n"+r+"\n</style>"},e.prototype.toReactElement=function(e){var t,n=this,r=(t={},t[Q]=this.names.join(" "),t[Y]=this.isLocal.toString(),t),o=Object.keys(this.components).map(function(e){return n.components[e].css}).join("");return _.a.createElement("style",A({key:e,type:"text/css"},r,{dangerouslySetInnerHTML:{__html:o}}))},e.prototype.clone=function(){var t=this,n=new e(this.isLocal);return n.names=[].concat(this.names),n.size=this.size,n.components=Object.keys(this.components).reduce(function(e,n){
return e[n]=A({},t.components[n]),e},{}),n},e}(),Ee=function(){function e(){E(this,e),this.instance=te.clone(te.instance)}return e.prototype.collectStyles=function(e){if(this.closed)throw new Error("Can't collect styles once you've called getStyleTags!");return _.a.createElement(xe,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.closed||(ee.splice(ee.indexOf(this.instance),1),this.closed=!0),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.closed||(ee.splice(ee.indexOf(this.instance),1),this.closed=!0),this.instance.toReactElements()},e.create=function(){return new te(function(e){return new Te(e)})},e}(),Oe=200,Ae=function(e){var t={},n=!1;return function(r){n||(t[r]=!0,Object.keys(t).length>=Oe&&(console.warn("Over "+Oe+" classes were generated for component "+e+". Consider using style property for frequently changed styles.\nExample:\n  const StyledComp = styled.div`width: 100%;`\n  <StyledComp style={{ background: background }} />"),n=!0,t={}))}},Me={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0,autoFocus:!0,defaultValue:!0,valueLink:!0,defaultChecked:!0,checkedLink:!0,innerHTML:!0,suppressContentEditableWarning:!0,onFocusIn:!0,onFocusOut:!0,className:!0,onCopy:!0,onCut:!0,onPaste:!0,onCompositionEnd:!0,onCompositionStart:!0,onCompositionUpdate:!0,onKeyDown:!0,onKeyPress:!0,onKeyUp:!0,onFocus:!0,onBlur:!0,onChange:!0,onInput:!0,onSubmit:!0,onClick:!0,onContextMenu:!0,onDoubleClick:!0,onDrag:!0,onDragEnd:!0,onDragEnter:!0,onDragExit:!0,onDragLeave:!0,onDragOver:!0,onDragStart:!0,onDrop:!0,onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOut:!0,onMouseOver:!0,onMouseUp:!0,onSelect:!0,onTouchCancel:!0,onTouchEnd:!0,onTouchMove:!0,onTouchStart:!0,onScroll:!0,onWheel:!0,onAbort:!0,onCanPlay:!0,onCanPlayThrough:!0,onDurationChange:!0,onEmptied:!0,onEncrypted:!0,onEnded:!0,onError:!0,onLoadedData:!0,onLoadedMetadata:!0,onLoadStart:!0,onPause:!0,onPlay:!0,onPlaying:!0,onProgress:!0,onRateChange:!0,onSeeked:!0,onSeeking:!0,onStalled:!0,onSuspend:!0,onTimeUpdate:!0,onVolumeChange:!0,onWaiting:!0,onLoad:!0,onAnimationStart:!0,onAnimationEnd:!0,onAnimationIteration:!0,onTransitionEnd:!0,onCopyCapture:!0,onCutCapture:!0,onPasteCapture:!0,onCompositionEndCapture:!0,onCompositionStartCapture:!0,onCompositionUpdateCapture:!0,onKeyDownCapture:!0,onKeyPressCapture:!0,onKeyUpCapture:!0,onFocusCapture:!0,onBlurCapture:!0,onChangeCapture:!0,onInputCapture:!0,onSubmitCapture:!0,onClickCapture:!0,onContextMenuCapture:!0,onDoubleClickCapture:!0,onDragCapture:!0,onDragEndCapture:!0,onDragEnterCapture:!0,onDragExitCapture:!0,onDragLeaveCapture:!0,onDragOverCapture:!0,onDragStartCapture:!0,onDropCapture:!0,onMouseDownCapture:!0,onMouseEnterCapture:!0,onMouseLeaveCapture:!0,onMouseMoveCapture:!0,onMouseOutCapture:!0,onMouseOverCapture:!0,onMouseUpCapture:!0,onSelectCapture:!0,onTouchCancelCapture:!0,onTouchEndCapture:!0,onTouchMoveCapture:!0,onTouchStartCapture:!0,onScrollCapture:!0,onWheelCapture:!0,onAbortCapture:!0,onCanPlayCapture:!0,onCanPlayThroughCapture:!0,onDurationChangeCapture:!0,onEmptiedCapture:!0,onEncryptedCapture:!0,onEndedCapture:!0,onErrorCapture:!0,onLoadedDataCapture:!0,onLoadedMetadataCapture:!0,onLoadStartCapture:!0,onPauseCapture:!0,onPlayCapture:!0,onPlayingCapture:!0,onProgressCapture:!0,onRateChangeCapture:!0,onSeekedCapture:!0,onSeekingCapture:!0,onStalledCapture:!0,onSuspendCapture:!0,onTimeUpdateCapture:!0,onVolumeChangeCapture:!0,onWaitingCapture:!0,onLoadCapture:!0,onAnimationStartCapture:!0,onAnimationEndCapture:!0,onAnimationIterationCapture:!0,onTransitionEndCapture:!0},Be={accept:!0,acceptCharset:!0,accessKey:!0,action:!0,allowFullScreen:!0,allowTransparency:!0,alt:!0,as:!0,async:!0,autoComplete:!0,autoPlay:!0,capture:!0,cellPadding:!0,cellSpacing:!0,charSet:!0,challenge:!0,checked:!0,cite:!0,classID:!0,className:!0,cols:!0,colSpan:!0,content:!0,contentEditable:!0,contextMenu:!0,controls:!0,coords:!0,crossOrigin:!0,data:!0,dateTime:!0,default:!0,defer:!0,dir:!0,disabled:!0,download:!0,draggable:!0,encType:!0,form:!0,formAction:!0,formEncType:!0,formMethod:!0,formNoValidate:!0,formTarget:!0,frameBorder:!0,headers:!0,height:!0,hidden:!0,high:!0,href:!0,hrefLang:!0,htmlFor:!0,httpEquiv:!0,icon:!0,id:!0,inputMode:!0,integrity:!0,is:!0,keyParams:!0,keyType:!0,kind:!0,label:!0,lang:!0,list:!0,loop:!0,low:!0,manifest:!0,marginHeight:!0,marginWidth:!0,max:!0,maxLength:!0,media:!0,mediaGroup:!0,method:!0,min:!0,minLength:!0,multiple:!0,muted:!0,name:!0,nonce:!0,noValidate:!0,open:!0,optimum:!0,pattern:!0,placeholder:!0,playsInline:!0,poster:!0,preload:!0,profile:!0,radioGroup:!0,readOnly:!0,referrerPolicy:!0,rel:!0,required:!0,reversed:!0,role:!0,rows:!0,rowSpan:!0,sandbox:!0,scope:!0,scoped:!0,scrolling:!0,seamless:!0,selected:!0,shape:!0,size:!0,sizes:!0,span:!0,spellCheck:!0,src:!0,srcDoc:!0,srcLang:!0,srcSet:!0,start:!0,step:!0,style:!0,summary:!0,tabIndex:!0,target:!0,title:!0,type:!0,useMap:!0,value:!0,width:!0,wmode:!0,wrap:!0,about:!0,datatype:!0,inlist:!0,prefix:!0,property:!0,resource:!0,typeof:!0,vocab:!0,autoCapitalize:!0,autoCorrect:!0,autoSave:!0,color:!0,itemProp:!0,itemScope:!0,itemType:!0,itemID:!0,itemRef:!0,results:!0,security:!0,unselectable:0},Pe={accentHeight:!0,accumulate:!0,additive:!0,alignmentBaseline:!0,allowReorder:!0,alphabetic:!0,amplitude:!0,arabicForm:!0,ascent:!0,attributeName:!0,attributeType:!0,autoReverse:!0,azimuth:!0,baseFrequency:!0,baseProfile:!0,baselineShift:!0,bbox:!0,begin:!0,bias:!0,by:!0,calcMode:!0,capHeight:!0,clip:!0,clipPath:!0,clipRule:!0,clipPathUnits:!0,colorInterpolation:!0,colorInterpolationFilters:!0,colorProfile:!0,colorRendering:!0,contentScriptType:!0,contentStyleType:!0,cursor:!0,cx:!0,cy:!0,d:!0,decelerate:!0,descent:!0,diffuseConstant:!0,direction:!0,display:!0,divisor:!0,dominantBaseline:!0,dur:!0,dx:!0,dy:!0,edgeMode:!0,elevation:!0,enableBackground:!0,end:!0,exponent:!0,externalResourcesRequired:!0,fill:!0,fillOpacity:!0,fillRule:!0,filter:!0,filterRes:!0,filterUnits:!0,floodColor:!0,floodOpacity:!0,focusable:!0,fontFamily:!0,fontSize:!0,fontSizeAdjust:!0,fontStretch:!0,fontStyle:!0,fontVariant:!0,fontWeight:!0,format:!0,from:!0,fx:!0,fy:!0,g1:!0,g2:!0,glyphName:!0,glyphOrientationHorizontal:!0,glyphOrientationVertical:!0,glyphRef:!0,gradientTransform:!0,gradientUnits:!0,hanging:!0,horizAdvX:!0,horizOriginX:!0,ideographic:!0,imageRendering:!0,in:!0,in2:!0,intercept:!0,k:!0,k1:!0,k2:!0,k3:!0,k4:!0,kernelMatrix:!0,kernelUnitLength:!0,kerning:!0,keyPoints:!0,keySplines:!0,keyTimes:!0,lengthAdjust:!0,letterSpacing:!0,lightingColor:!0,limitingConeAngle:!0,local:!0,markerEnd:!0,markerMid:!0,markerStart:!0,markerHeight:!0,markerUnits:!0,markerWidth:!0,mask:!0,maskContentUnits:!0,maskUnits:!0,mathematical:!0,mode:!0,numOctaves:!0,offset:!0,opacity:!0,operator:!0,order:!0,orient:!0,orientation:!0,origin:!0,overflow:!0,overlinePosition:!0,overlineThickness:!0,paintOrder:!0,panose1:!0,pathLength:!0,patternContentUnits:!0,patternTransform:!0,patternUnits:!0,pointerEvents:!0,points:!0,pointsAtX:!0,pointsAtY:!0,pointsAtZ:!0,preserveAlpha:!0,preserveAspectRatio:!0,primitiveUnits:!0,r:!0,radius:!0,refX:!0,refY:!0,renderingIntent:!0,repeatCount:!0,repeatDur:!0,requiredExtensions:!0,requiredFeatures:!0,restart:!0,result:!0,rotate:!0,rx:!0,ry:!0,scale:!0,seed:!0,shapeRendering:!0,slope:!0,spacing:!0,specularConstant:!0,specularExponent:!0,speed:!0,spreadMethod:!0,startOffset:!0,stdDeviation:!0,stemh:!0,stemv:!0,stitchTiles:!0,stopColor:!0,stopOpacity:!0,strikethroughPosition:!0,strikethroughThickness:!0,string:!0,stroke:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeLinecap:!0,strokeLinejoin:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,surfaceScale:!0,systemLanguage:!0,tableValues:!0,targetX:!0,targetY:!0,textAnchor:!0,textDecoration:!0,textRendering:!0,textLength:!0,to:!0,transform:!0,u1:!0,u2:!0,underlinePosition:!0,underlineThickness:!0,unicode:!0,unicodeBidi:!0,unicodeRange:!0,unitsPerEm:!0,vAlphabetic:!0,vHanging:!0,vIdeographic:!0,vMathematical:!0,values:!0,vectorEffect:!0,version:!0,vertAdvY:!0,vertOriginX:!0,vertOriginY:!0,viewBox:!0,viewTarget:!0,visibility:!0,widths:!0,wordSpacing:!0,writingMode:!0,x:!0,xHeight:!0,x1:!0,x2:!0,xChannelSelector:!0,xlinkActuate:!0,xlinkArcrole:!0,xlinkHref:!0,xlinkRole:!0,xlinkShow:!0,xlinkTitle:!0,xlinkType:!0,xmlBase:!0,xmlns:!0,xmlnsXlink:!0,xmlLang:!0,xmlSpace:!0,y:!0,y1:!0,y2:!0,yChannelSelector:!0,z:!0,zoomAndPan:!0},Le=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",De=Le+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Ie=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+De+"]*$")),Ne={}.hasOwnProperty,Ve=function(e){return Ne.call(Be,e)||Ne.call(Pe,e)||Ie(e.toLowerCase())||Ne.call(Me,e)},ze=h,Re=Object.prototype.toString,Fe=function(e){var t=[],n=e;return{publish:function(e){n=e,t.forEach(function(e){return e(n)})},subscribe:function(e){return t.push(e),e(n),function(){t=t.filter(function(t){return t!==e})}}}},$e="__styled-components__",Ue=function(e){function t(){E(this,t);var n=P(this,e.call(this));return n.getTheme=n.getTheme.bind(n),n}return M(t,e),t.prototype.componentWillMount=function(){var e=this;if(this.context[$e]){var t=this.context[$e];this.unsubscribeToOuter=t(function(t){e.outerTheme=t})}this.broadcast=Fe(this.getTheme())},t.prototype.getChildContext=function(){var e;return A({},this.context,(e={},e[$e]=this.broadcast.subscribe,e))},t.prototype.componentWillReceiveProps=function(e){this.props.theme!==e.theme&&this.broadcast.publish(this.getTheme(e.theme))},t.prototype.componentWillUnmount=function(){this.context[$e]&&this.unsubscribeToOuter()},t.prototype.getTheme=function(e){var t=e||this.props.theme;if(ze(t)){var n=t(this.outerTheme);if(!I(n))throw new Error("[ThemeProvider] Please return an object from your theme function, i.e. theme={() => ({})}!");return n}if(!I(t))throw new Error("[ThemeProvider] Please make your theme prop a plain object");return A({},this.outerTheme,t)},t.prototype.render=function(){return this.props.children?_.a.Children.only(this.props.children):null},t}(w.Component);Ue.childContextTypes=(je={},je[$e]=Ce.func.isRequired,je),Ue.contextTypes=(Se={},Se[$e]=Ce.func,Se);var qe,He=function(e){function t(){return E(this,t),P(this,e.apply(this,arguments))}return M(t,e),t}(w.Component);He.contextTypes=(qe={},qe[$e]=Ce.func,qe[Z]=Ce.instanceOf(te),qe);var We=/[[\].#*$><+~=|^:(),"'`]/g,Ke=/--+/g,Ge=function(t,r){var o={},i=function(e){var n="string"!=typeof e?"sc":e.replace(We,"-").replace(Ke,"-"),r=(o[n]||0)+1;o[n]=r;var i=t.generateName(n+r);return n+"-"+i},a=function(e){function t(){var n,r,o;E(this,t);for(var i=arguments.length,a=Array(i),s=0;i>s;s++)a[s]=arguments[s];return n=r=P(this,e.call.apply(e,[this].concat(a))),r.attrs={},r.state={theme:null,generatedClassName:""},o=n,P(r,o)}return M(t,e),t.prototype.buildExecutionContext=function(e,t){var n=this.constructor.attrs,r=A({},t,{theme:e});return void 0===n?r:(this.attrs=Object.keys(n).reduce(function(e,t){var o=n[t];return e[t]="function"==typeof o?o(r):o,e},{}),A({},r,this.attrs))},t.prototype.generateAndInjectStyles=function(e,t){var n=this.constructor,r=n.componentStyle,o=n.warnTooManyClasses,i=this.buildExecutionContext(e,t),a=this.context[Z]||te.instance,s=r.generateAndInjectStyles(i,a);return void 0!==o&&o(s),s},t.prototype.componentWillMount=function(){var e=this;if(this.context[$e]){var t=this.context[$e];this.unsubscribe=t(function(t){var n=e.constructor.defaultProps,r=n&&e.props.theme===n.theme,o=e.props.theme&&!r?e.props.theme:t,i=e.generateAndInjectStyles(o,e.props);e.setState({theme:o,generatedClassName:i})})}else{var n=this.props.theme||{},r=this.generateAndInjectStyles(n,this.props);this.setState({theme:n,generatedClassName:r})}},t.prototype.componentWillReceiveProps=function(e){var t=this;this.setState(function(n){var r=t.constructor.defaultProps,o=r&&e.theme===r.theme,i=e.theme&&!o?e.theme:n.theme,a=t.generateAndInjectStyles(i,e);return{theme:i,generatedClassName:a}})},t.prototype.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe()},t.prototype.render=function(){var e=this,t=this.props.innerRef,r=this.state.generatedClassName,o=this.constructor,i=o.styledComponentId,a=o.target,s=l(a),u=[this.props.className,i,this.attrs.className,r].filter(Boolean).join(" "),c=A({},this.attrs,{className:u});d(a)?c.innerRef=t:c.ref=t;var p=Object.keys(this.props).reduce(function(t,n){return"innerRef"===n||"className"===n||s&&!Ve(n)||(t[n]=e.props[n]),t},c);return n.i(w.createElement)(a,p)},t}(He),s=function n(o,s,u){var c,d=s.displayName,h=void 0===d?l(o)?"styled."+o:"Styled("+p(o)+")":d,m=s.componentId,f=void 0===m?i(s.displayName):m,g=s.ParentComponent,v=void 0===g?a:g,b=s.rules,y=s.attrs,w=s.displayName&&s.componentId?s.displayName+"-"+s.componentId:f,_=void 0;"undefined"!=typeof e&&(_=Ae(h));var k=new t(void 0===b?u:b.concat(u),w),C=function(e){function t(){return E(this,t),P(this,e.apply(this,arguments))}return M(t,e),t.withComponent=function(e){var r=(s.displayName,s.componentId,B(s,["displayName","componentId"])),o=A({},r,{ParentComponent:t});return n(e,o,u)},O(t,null,[{key:"extend",get:function(){var e=(s.displayName,s.componentId,s.rules),i=B(s,["displayName","componentId","rules"]),a=void 0===e?u:e.concat(u),c=A({},i,{rules:a,ParentComponent:t});return r(n,o,c)}}]),t}(v);return C.contextTypes=(c={},c[$e]=Ce.func,c[Z]=Ce.instanceOf(te),c),C.displayName=h,C.styledComponentId=w,C.attrs=y,C.componentStyle=k,C.warnTooManyClasses=_,C.target=o,C};return s},Je=function(e,t,n){var r=function(){function r(e,t){if(E(this,r),this.rules=e,this.componentId=t,!te.instance.hasInjectedComponent(this.componentId)){var n="."+t+" {}";te.instance.deferredInject(t,!0,n)}}return r.prototype.generateAndInjectStyles=function(r,o){var i=t(this.rules,r),a=m(this.componentId+i.join("")),s=o.getName(a);if(s)return s;var u=e(a);if(o.alreadyInjected(a,u))return u;var c="\n"+n(i,"."+u);return o.inject(this.componentId,!0,c,a,u),u},r.generateName=function(t){return e(m(t))},r}();return r},Qe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Ye=function(e,t){var n=function(n){return t(e,n)};return Qe.forEach(function(e){n[e]=n(e)}),n},Ze=function(e){return e.replace(/\s|\\n/g,"")},Xe=function(e,t,n){return function(r){for(var o=arguments.length,i=Array(o>1?o-1:0),a=1;o>a;a++)i[a-1]=arguments[a];var s=n.apply(void 0,[r].concat(i)),u=m(Ze(JSON.stringify(s))),c=te.instance.getName(u);if(c)return c;var l=e(u);if(te.instance.alreadyInjected(u,l))return l;var d=t(s,l,"@keyframes");return te.instance.inject("sc-keyframes-"+l,!0,d,u,l),l}},et=function(e,t){var n=function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;r>i;i++)o[i-1]=arguments[i];var a=t.apply(void 0,[n].concat(o)),s=m(JSON.stringify(a)),u="sc-global-"+s;te.instance.hasInjectedComponent(u)||te.instance.inject(u,!1,e(a))};return n},tt=function(e){var t=function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof r&&"function"!=typeof r)throw new Error("Cannot create styled-component for component: "+r);var i=function(t){for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;i>s;s++)a[s-1]=arguments[s];return n(r,o,e.apply(void 0,[t].concat(a)))};return i.withConfig=function(e){return t(n,r,A({},o,e))},i.attrs=function(e){return t(n,r,A({},o,{attrs:A({},o.attrs||{},e)}))},i};return t},nt=("function"==typeof Object.getOwnPropertySymbols,Je($,V,z)),rt=tt(q),ot=Ge(nt,rt),it=(Xe($,z,q),et(z,q),Ye(ot,rt));t.b=it}).call(t,n(58))},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n.n(o),a=n(1),s=n(11),u=n(15),c=r(["\n  margin-left: 4px;\n"],["\n  margin-left: 4px;\n"]),l=r(["\n  height: ","px;\n  padding-top: 2px;\n  width: ","px;\n"],["\n  height: ","px;\n  padding-top: 2px;\n  width: ","px;\n"]),d=a.b.span(c),p=a.b.img.attrs({src:function(e){var t=e.icon,n=e.iconName,r=e.theme;return r&&r[n]?r[n]:t}})(l,function(e){var t=e.height;return t},function(e){var t=e.width;return t}),h=function(e){var t=e.bgColor,n=void 0===t?"":t,r=e.children,o=e.className,a=void 0===o?"":o,c=e.fontColor,l=void 0===c?"":c,h=e.icon,m=e.iconName,f=e.iconHeight,g=void 0===f?12:f,v=e.iconWidth,b=void 0===v?12:v;return i.a.createElement(s.a,{bgColor:n,className:a,fontColor:l},i.a.createElement(u.a,null,i.a.createElement(p,{height:g,width:b,icon:h,iconName:m}),!!r&&i.a.createElement(d,null," ",r," ")))};t.a=h},function(e,t,n){"use strict";t.a={"business-blue-100":"#D2D7E5","business-blue-200":"#B2B9D0","business-blue-300":"#838FB5","business-blue-400":"#6170A1","business-blue-50":"#EDEFF4","business-blue-500":"#42548E","business-blue-600":"#3E4D80","business-blue-700":"#3A476F","business-blue-800":"#36405F","business-blue-900":"#30364C","green-100":"#D6ECD2","green-200":"#B7DDB0","green-300":"#99D18F","green-400":"#7BC86C","green-50":"#EEF6EC","green-500":"#61BD4F","green-600":"#5AAC44","green-700":"#519839","green-800":"#49852E","green-900":"#3F6F21","light-gray-100":"#EDEFF0","light-gray-200":"#E2E4E6","light-gray-300":"#D6DADC","light-gray-400":"#CDD2D4","light-gray-50":"#F8F9F9","light-gray-500":"#C4C9CC","light-gray-600":"#B6BBBF","light-gray-700":"#A5ACB0","light-gray-800":"#959DA1","light-gray-900":"#838C91","lime-100":"#D3F6E4","lime-200":"#B3F1D0","lime-300":"#90ECC1","lime-400":"#6DECA9","lime-50":"#ECFBF3","lime-500":"#51E898","lime-600":"#4FD683","lime-700":"#4DC26B","lime-800":"#4CAF54","lime-900":"#4A9839","orange-100":"#FCE8D2","orange-200":"#FAD8B0","orange-300":"#FDC788","orange-400":"#FFB968","orange-50":"#FDF5EC","orange-500":"#FFAB4A","orange-600":"#E99E40","orange-700":"#D29034","orange-800":"#BB8129","orange-900":"#A0711C","pink-100":"#FCDEF0","pink-200":"#FAC6E5","pink-300":"#FFB0E1","pink-400":"#FF95D6","pink-50":"#FEF2F9","pink-500":"#FF80CE","pink-600":"#E76EB1","pink-700":"#CD5A91","pink-800":"#B44772","pink-900":"#96304C","purple-100":"#EDDBF4","purple-200":"#DFC0EB","purple-300":"#D5A6E6","purple-400":"#CD8DE5","purple-50":"#F7F0FA","purple-500":"#C377E0","purple-600":"#A86CC1","purple-700":"#89609E","purple-800":"#6C547B","purple-900":"#484553","red-100":"#F5D3CE","red-200":"#EFB3AB","red-300":"#EC9488","red-400":"#EF7564","red-50":"#FBEDEB","red-500":"#EB5A46","red-600":"#CF513D","red-700":"#B04632","red-800":"#933B27","red-900":"#6E2F1A","sky-100":"#BDECF3","sky-200":"#8FDFEB","sky-300":"#5DD3E5","sky-400":"#29CCE5","sky-50":"#E4F7FA","sky-500":"#00C2E0","sky-600":"#00AECC","sky-700":"#0098B7","sky-800":"#0082A0","sky-900":"#006988","trello-blue-100":"#BCD9EA","trello-blue-200":"#8BBDD9","trello-blue-300":"#5BA4CF","trello-blue-400":"#298FCA","trello-blue-50":"#E4F0F6","trello-blue-500":"#0079BF","trello-blue-600":"#026AA7","trello-blue-700":"#055A8C","trello-blue-800":"#094C72","trello-blue-900":"#0C3953","yellow-100":"#FAF3C0","yellow-200":"#F5EA92","yellow-300":"#F3E260","yellow-400":"#F5DD29","yellow-50":"#FDFAE5","yellow-500":"#F2D600","yellow-600":"#E6C60D","yellow-700":"#D9B51C","yellow-800":"#CCA42B","yellow-900":"#BD903C",black:"#000","near-black":"#4d4d4d",white:"#FFF"}},function(e,t,n){"use strict";t.a="Helvetica, Arial, sans-serif"},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var o=n(1),i=n(3),a=r(["\n  border-bottom: 1px solid ",";\n  padding: ",";\n  text-align: ",";\n\n  * {\n    vertical-align: middle;\n  }\n"],["\n  border-bottom: 1px solid ",";\n  padding: ",";\n  text-align: ",";\n\n  * {\n    vertical-align: middle;\n  }\n"]),s=r(["\n  background-color: ",";\n  border-radius: 3px;\n  border: ",";\n\n  ",":last-child {\n    border-bottom: none;\n  }\n"],["\n  background-color: ",";\n  border-radius: 3px;\n  border: ",";\n\n  ",":last-child {\n    border-bottom: none;\n  }\n"]),u=o.b.div(a,i.a["light-gray-200"],function(e){var t=e.slim,n=void 0===t?!1:t;return n?"4px":"8px"},function(e){var t=e.alignRight,n=void 0===t?!1:t;return n?"right":"left"}),c=o.b.div(s,i.a["light-gray-50"],function(e){var t=e.hideBorder;return t?"none":"solid 1px "+i.a["light-gray-200"]},u)},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return j}),n.d(t,"b",function(){return S});var i=n(0),a=n.n(i),s=n(1),u=n(3),c=n(4),l=n(56),d=n.n(l),p=n(16),h=n(5),m=n(42),f=n(7),g=o(["\n"],["\n"]),v=o(["\n  font-weight: normal;\n"],["\n  font-weight: normal;\n"]),b=o(["\n  display: flex;\n  font-family: ",";\n  font-size: 12px;\n  height: 16px;\n  letter-spacing: -0.3px;\n  padding: "," 8px;\n\n  "," {\n    flex: 1;\n  }\n\n  ",", "," {\n    display: inline-block;\n    font-size: inherit;\n    height: 100%;\n    margin: 0;\n    overflow: hidden;\n    position: relative;\n    text-overflow: ellipsis;\n    top: 1px;\n    white-space: nowrap;\n  }\n"],["\n  display: flex;\n  font-family: ",";\n  font-size: 12px;\n  height: 16px;\n  letter-spacing: -0.3px;\n  padding: "," 8px;\n\n  "," {\n    flex: 1;\n  }\n\n  ",", "," {\n    display: inline-block;\n    font-size: inherit;\n    height: 100%;\n    margin: 0;\n    overflow: hidden;\n    position: relative;\n    text-overflow: ellipsis;\n    top: 1px;\n    white-space: nowrap;\n  }\n"]),y=o(["\n  background-image: url(",");\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  display: inline-block;\n  height: 0;\n  margin-right: 8px;\n  padding: 8px; /* Hack: not sure why this works better than height/width of 16px */\n  width: 0;\n"],["\n  background-image: url(",");\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  display: inline-block;\n  height: 0;\n  margin-right: 8px;\n  padding: 8px; /* Hack: not sure why this works better than height/width of 16px */\n  width: 0;\n"]),w=o(["\n  background-position: bottom;\n  background-size: ",";\n\n  ",", "," {\n    margin: 8px 8px 0 8px;\n    vertical-align: top;\n  }\n\n  "," {\n    color: ","\n  }\n\n  "," {\n    border-radius: 0;\n    border-top: 0;\n  }\n"],["\n  background-position: bottom;\n  background-size: ",";\n\n  ",", "," {\n    margin: 8px 8px 0 8px;\n    vertical-align: top;\n  }\n\n  "," {\n    color: ","\n  }\n\n  "," {\n    border-radius: 0;\n    border-top: 0;\n  }\n"]),_=s.b.h1(g),k=s.b.h2(v),C=s.b.div(b,c.a,function(e){var t=e.displayLogo;return t?"":"4px"},k,_,k),x=s.b.div(y,function(e){var t=e.theme;return t&&t.trelloIcon?t.trelloIcon:d.a}),j=m.a.extend(w,function(e){var t=e.headerBgColor;return t?"100% 40px, cover":"cover"},f.a,f.b,C,function(e){var t=e.bgColor,r=e.headerBgColor,o=r||t||u.a["trello-blue-500"];return n.i(p.a)(o)?u.a.white:u.a["near-black"]},h.b),S=function(e){var t=e.boardName,n=e.displayLogo,o=void 0===n?!1:n,i=e.listName,s=r(e,["boardName","displayLogo","listName"]);return a.a.createElement(C,Object.assign({displayLogo:o},s),o&&a.a.createElement(x,null),a.a.createElement(_,null,t,":"),a.a.createElement(k,null,i))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return v}),n.d(t,"b",function(){return b}),n.d(t,"c",function(){return y}),n.d(t,"d",function(){return w}),n.d(t,"e",function(){return _}),n.d(t,"f",function(){return k}),n.d(t,"g",function(){return C});var o=n(1),i=n(3),a=n(4),s=n(10),u=n(12),c=n(11),l=r(["\n  background-color: ",";\n  border-radius: 3px;\n  box-sizing: border-box;\n  box-shadow: 0 1px 0 0 ",";\n  display: inline-block;\n  padding-bottom: 8px;\n  position: relative;\n  overflow: hidden;\n  width: 232px;\n"],["\n  background-color: ",";\n  border-radius: 3px;\n  box-sizing: border-box;\n  box-shadow: 0 1px 0 0 ",";\n  display: inline-block;\n  padding-bottom: 8px;\n  position: relative;\n  overflow: hidden;\n  width: 232px;\n"]),d=r(["\n  display: block;\n  text-decoration: none;\n\n  &:hover {\n    background-color: ",";\n    cursor: pointer;\n  }\n"],["\n  display: block;\n  text-decoration: none;\n\n  &:hover {\n    background-color: ",";\n    cursor: pointer;\n  }\n"]),p=r(["\n  background-color: ",";\n  background-image: url(",");\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: ",";\n  height: ","px;\n"],["\n  background-color: ",";\n  background-image: url(",");\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: ",";\n  height: ","px;\n"]),h=r(["\n  color: ",";\n  font-family: ",";\n  font-size: 14px;\n  font-weight: normal;\n  margin: 0;\n  padding: 8px 8px 0;\n"],["\n  color: ",";\n  font-family: ",";\n  font-size: 14px;\n  font-weight: normal;\n  margin: 0;\n  padding: 8px 8px 0;\n"]),m=r(["\n  line-height:  8px;\n  padding: 4px 8px 0;\n\n  "," {\n    margin-right: 4px;\n    margin-top: 4px;\n  }\n"],["\n  line-height:  8px;\n  padding: 4px 8px 0;\n\n  "," {\n    margin-right: 4px;\n    margin-top: 4px;\n  }\n"]),f=r(["\n  margin-top: 4px;\n  padding: 0 8px;\n\n  "," {\n    margin-top: 4px;\n    margin-right: 8px;\n  }\n"],["\n  margin-top: 4px;\n  padding: 0 8px;\n\n  "," {\n    margin-top: 4px;\n    margin-right: 8px;\n  }\n"]),g=r(["\n  text-align: right;\n  padding: 0 8px;\n\n  "," {\n    float: right;\n    margin-left: 4px;\n    margin-top: 8px;\n    vertical-align: top;\n  }\n"],["\n  text-align: right;\n  padding: 0 8px;\n\n  "," {\n    float: right;\n    margin-left: 4px;\n    margin-top: 8px;\n    vertical-align: top;\n  }\n"]),v=o.b.div(l,i.a.white,i.a["light-gray-200"]),b=v.withComponent("a").extend(d,i.a["light-gray-100"]),y=o.b.div(p,function(e){var t=e.bgColor;return t?i.a[t]:"transparent"},function(e){var t=e.img;return t},function(e){var t=e.height,n=e.width;return n?n+"px "+t+"px":"cover"},function(e){var t=e.height;return t}),w=o.b.h1(h,i.a["near-black"],a.a),_=o.b.div(m,u.a),k=o.b.div(f,c.a),C=o.b.div(g,s.a)},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n.n(o),a=n(1),s=n(57),u=n.n(s),c=r(["\n  ","\n  ","\n"],["\n  ","\n  ","\n"]),l=a.b.img.attrs({src:function(e){var t=e.theme;return t&&t.trelloLogo?t.trelloLogo:u.a}})(c,function(e){var t=e.height;return t?"height: "+t+"px":""},function(e){var t=e.width;return t?"width: "+t+"px":""}),d=function(e){var t=e.className,n=void 0===t?"":t,r=e.height,o=e.width;return i.a.createElement(l,{alt:"Trello",className:n,height:r,width:o})};t.a=d},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var i=n(0),a=n.n(i),s=n(1),u=n(13),c=o(["\n  line-height: 12px;\n  margin-left: 4px;\n"],["\n  line-height: 12px;\n  margin-left: 4px;\n"]),l=o(["\n  height: ","px;\n  width: ","px;\n"],["\n  height: ","px;\n  width: ","px;\n"]),d=s.b.span(c),p=s.b.img.attrs({src:function(e){var t=e.icon,n=e.iconName,r=e.theme;return r&&r[n]?r[n]:t}})(l,function(e){var t=e.height;return t},function(e){var t=e.width;return t}),h=function(e){var t=e.children,n=e.icon,o=e.iconName,i=e.iconHeight,s=void 0===i?12:i,c=e.iconWidth,l=void 0===c?12:c,h=r(e,["children","icon","iconName","iconHeight","iconWidth"]);return a.a.createElement(u.a,h,a.a.createElement(p,{height:s,width:l,icon:n,iconName:o}),a.a.createElement(d,null,t))};t.a=h},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n.n(o),a=n(1),s=n(3),u=n(4),c=r(["\n  background-color: ","};\n  ","\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  border-radius: 100%;\n  color: ","};\n  display: inline-block;\n  font-family: ",";\n  font-size: 12px;\n  font-weight: bold;\n  line-height: ","px;\n  height: ","px;\n  text-align: center;\n  width: ","px;\n\n  ","\n"],["\n  background-color: ","};\n  ","\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  border-radius: 100%;\n  color: ","};\n  display: inline-block;\n  font-family: ",";\n  font-size: 12px;\n  font-weight: bold;\n  line-height: ","px;\n  height: ","px;\n  text-align: center;\n  width: ","px;\n\n  ","\n"]),l=function(e){var t=e.className,n=e.img,r=e.initials;return i.a.createElement("span",{className:t},!n&&r)};t.a=n.i(a.b)(l)(c,function(e){var t=e.deactivated;return t?s.a["light-gray-200"]:s.a["light-gray-300"]},function(e){var t=e.img;return t?"background-image: url("+t+");":""},function(e){var t=e.deactivated;return t?s.a["light-gray-900"]:s.a["near-black"]},u.a,function(e){var t=e.size;return t||"32"},function(e){var t=e.size;return t||"32"},function(e){var t=e.size;return t||"32"},function(e){var t=e.deactivated,n=e.img;return t&&n&&"opacity: 0.2;"})},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(1),i=n(3),a=n(4),s=r(["\n  ",";\n  ",";\n  border-radius: 3px;\n  display: inline-block;\n  font-family: ",";\n  font-size: 12px;\n  font-weight: 500;\n  height: 16px;\n  letter-spacing: -0.3px;\n  line-height: 16px;\n  padding: 0 ",";\n"],["\n  ",";\n  ",";\n  border-radius: 3px;\n  display: inline-block;\n  font-family: ",";\n  font-size: 12px;\n  font-weight: 500;\n  height: 16px;\n  letter-spacing: -0.3px;\n  line-height: 16px;\n  padding: 0 ",";\n"]),u=o.b.span(s,function(e){var t=e.bgColor;return"background-color: "+(i.a[t]||"transparent")},function(e){var t=e.fontColor;return"color: "+(i.a[t]||i.a["light-gray-800"])},a.a,function(e){var t=e.bgColor;return t?"4px":"0"});t.a=u},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(1),i=n(3),a=n(4),s=r(["\n  border-radius: ",";\n  background-color: ",";\n  color: ",";\n  display: inline-block;\n  font-family: ",";\n  font-size: 12px;\n  font-weight: 600;\n  height: ",";\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-font-smoothing: antialiased;\n\n  ","\n"],["\n  border-radius: ",";\n  background-color: ",";\n  color: ",";\n  display: inline-block;\n  font-family: ",";\n  font-size: 12px;\n  font-weight: 600;\n  height: ",";\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-font-smoothing: antialiased;\n\n  ","\n"]),u=o.b.span.attrs({title:function(e){var t=e.children;return t}})(s,function(e){var t=e.children;return t?"3px":"100px"},function(e){var t=e.color;return i.a.hasOwnProperty(t)?i.a[t]:t},function(e){var t=e.fontColor;return t||i.a.white},a.a,function(e){var t=e.children;return t?"16px":"8px"},function(e){var t=e.children;return t?"\n        box-sizing: border-box;\n        line-height: 16px;\n        max-width: 100%;\n        min-width: 56px;\n        overflow: hidden;\n        padding: 0 8px;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      ":"width: 40px;";
});t.a=u},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(1),i=n(3),a=n(4),s=r(["\n  background-color: transparent;\n  border: none;\n  color: ",";\n  font-family: ",";\n  font-size: 12px;\n  height: 16px;\n  letter-spacing: -0.3px;\n  line-height: 1.33;\n  padding: 0;\n  text-align: center;\n"],["\n  background-color: transparent;\n  border: none;\n  color: ",";\n  font-family: ",";\n  font-size: 12px;\n  height: 16px;\n  letter-spacing: -0.3px;\n  line-height: 1.33;\n  padding: 0;\n  text-align: center;\n"]),u=o.b.button(s,i.a["near-black"],a.a);t.a=u},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(1),i=n(3),a=r(["\n  background-color: ",";\n  border-radius: 3px;\n  border: solid 1px ",";\n  box-sizing: border-box;\n  color: ",";\n  font-size: 14px;\n  height: 24px;\n  letter-spacing: -0.3px;\n  line-height: 1.14;\n  padding: 0 8px;\n\n  &::placeholder {\n    color: ",";\n  }\n"],["\n  background-color: ",";\n  border-radius: 3px;\n  border: solid 1px ",";\n  box-sizing: border-box;\n  color: ",";\n  font-size: 14px;\n  height: 24px;\n  letter-spacing: -0.3px;\n  line-height: 1.14;\n  padding: 0 8px;\n\n  &::placeholder {\n    color: ",";\n  }\n"]),s=o.b.input(a,i.a.white,i.a["light-gray-200"],i.a["near-white"],i.a["light-gray-900"]);t.a=s},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d});var o=n(0),i=n.n(o),a=n(1),s=r(["\n  display: flex;\n"],["\n  display: flex;\n"]),u=r(["\n  display: inline-block;\n  height: 12px;\n"],["\n  display: inline-block;\n  height: 12px;\n"]),c=a.b.div(s),l=a.b.img(u),d=function(e){var t=e.icon;return i.a.createElement(l,{src:t})}},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n(3),o=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(e){return e.match(/\d{1,3},\s*\d{1,3},\s*\d{1,3}/gi)[0].split(/[,\s]+/).map(function(e){return parseInt(e,10)})},a=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null},s=function(e){if("#"===e[0])return a(e);if(0===e.indexOf("rgb"))return i(e);if(r.a.hasOwnProperty(e))return a(r.a[e]);throw new Error("Must provide a hex, RGB, or brand color")},u=function(e){var t=s(e),n=o(t,3),r=n[0],i=n[1],a=n[2],u=(.2126*r+.7152*i+.0722*a)/255;return.4623475>=u},c=function(e,t){if(0===e.indexOf("rgba"))return e;var n=s(e),r=o(n,3),i=r[0],a=r[1],u=r[2];return"rgba("+i+", "+a+", "+u+", "+t+")"}},function(e,t,n){e.exports=n.p+"static/media/join-icon.0297c32e.svg"},function(e,t,n){e.exports=n.p+"static/media/subscribe-icon.8d579b9e.svg"},function(e,t,n){e.exports=n.p+"static/media/vote-icon.77ada361.svg"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);n.d(t,"ActionPanelRow",function(){return r.a}),n.d(t,"ActionPanel",function(){return r.b});var o=n(6);n.d(t,"Board",function(){return o.a}),n.d(t,"BoardAndListName",function(){return o.b});var i=n(7);n.d(t,"Card",function(){return i.a}),n.d(t,"CardLink",function(){return i.b}),n.d(t,"CardCover",function(){return i.c}),n.d(t,"CardTitle",function(){return i.d}),n.d(t,"CardLabels",function(){return i.e}),n.d(t,"CardBadges",function(){return i.f}),n.d(t,"CardMembers",function(){return i.g});var a=n(37);n.d(t,"ArchivedBadge",function(){return a.a}),n.d(t,"AttachmentsBadge",function(){return a.b}),n.d(t,"ChecklistBadge",function(){return a.c}),n.d(t,"CommentsBadge",function(){return a.d}),n.d(t,"DescriptionBadge",function(){return a.e}),n.d(t,"DueDateBadge",function(){return a.f}),n.d(t,"NotificationBadge",function(){return a.g}),n.d(t,"SubscribedBadge",function(){return a.h}),n.d(t,"TrelloAttachmentsBadge",function(){return a.i}),n.d(t,"VotesBadge",function(){return a.j});var s=n(41);n.d(t,"JoinButton",function(){return s.a}),n.d(t,"SubscribeButton",function(){return s.b}),n.d(t,"VoteButton",function(){return s.c});var u=n(15);n.d(t,"Flex",function(){return u.a}),n.d(t,"Icon",function(){return u.b});var c=n(10);n.d(t,"Avatar",function(){return c.a});var l=n(11);n.d(t,"Badge",function(){return l.a});var d=n(21);n.d(t,"CardActionButtons",function(){return d.a});var p=n(22);n.d(t,"CardCommentSection",function(){return p.a});var h=n(12);n.d(t,"CardLabel",function(){return h.a});var m=n(14);n.d(t,"Input",function(){return m.a});var f=n(23);n.d(t,"InvalidIdCard",function(){return f.a});var g=n(24);n.d(t,"NotFoundCard",function(){return g.a});var v=n(25);n.d(t,"PlaceholderCard",function(){return v.a});var b=n(8);n.d(t,"TrelloLogo",function(){return b.a});var y=n(26);n.d(t,"UnauthorizedCard",function(){return y.a});var w=n(1);n.d(t,"ThemeProvider",function(){return w.a})},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(1),i=n(13),a=r(["\n  display: flex;\n  justify-content: ",";\n  padding: 0 8px;\n\n  "," {\n    ","\n  }\n"],["\n  display: flex;\n  justify-content: ",";\n  padding: 0 8px;\n\n  "," {\n    ","\n  }\n"]),s=o.b.div(a,function(e){var t=e.children;return t.length<3?"flex-start":"space-between"},i.a,function(e){var t=e.children;return t.length<3?"margin-right: 16px;":""});t.a=s},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n.n(o),a=n(1),s=n(10),u=n(14),c=n(8),l=r(["\n  * {\n    vertical-align: middle;\n  }\n\n  ",", "," {\n    margin-right: 8px;\n  }\n\n  "," {\n    width: 142px; /* TODO: figure out a better way to do this */\n  }\n"],["\n  * {\n    vertical-align: middle;\n  }\n\n  ",", "," {\n    margin-right: 8px;\n  }\n\n  "," {\n    width: 142px; /* TODO: figure out a better way to do this */\n  }\n"]),d=a.b.div(l,s.a,u.a,u.a),p=function(e){var t=e.className,n=void 0===t?"":t;return i.a.createElement(d,{className:n},i.a.createElement(s.a,{img:"https://api.adorable.io/avatars/40/gerard.png",size:24}),i.a.createElement(u.a,null),i.a.createElement(c.a,null))};t.a=p},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n.n(o),a=n(43),s=n.n(a),u=n(8),c=n(5),l=n(6),d=n(7),p=r(["\n  padding: 4px 0;\n"],["\n  padding: 4px 0;\n"]),h=d.c.extend(p),m=function(){return i.a.createElement(h,{bgColor:"trello-blue-500",height:40,img:s.a,width:38})},f=function(e){var t=e.className,n=void 0===t?"":t;return i.a.createElement(l.a,{bgColor:"light-gray-50",borderColor:"light-gray-200"},i.a.createElement(d.a,{className:n},i.a.createElement(m,null),i.a.createElement(d.d,null,"Taco says invalid id but hes just a dog, so.")),i.a.createElement(c.b,{hideBorder:!0},i.a.createElement(c.a,{alignRight:!0,slim:!0},i.a.createElement(u.a,null))))};t.a=f},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n.n(o),a=n(50),s=n.n(a),u=n(8),c=n(5),l=n(6),d=n(7),p=r(["\n  padding: 4px 0;\n"],["\n  padding: 4px 0;\n"]),h=d.c.extend(p),m=function(){return i.a.createElement(h,{bgColor:"trello-blue-500",height:40,img:s.a,width:38})},f=function(e){var t=e.className,n=void 0===t?"":t;return i.a.createElement(l.a,{bgColor:"light-gray-50",borderColor:"light-gray-200"},i.a.createElement(d.a,{className:n},i.a.createElement(m,null),i.a.createElement(d.d,null,"Card not found. It appears to have been deleted.")),i.a.createElement(c.b,{hideBorder:!0},i.a.createElement(c.a,{alignRight:!0,slim:!0},i.a.createElement(u.a,null))))};t.a=f},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n.n(o),a=n(12),s=n(6),u=r(["\n  height: 96px;\n  padding: 16px;\n"],["\n  height: 96px;\n  padding: 16px;\n"]),c=r(["\n  display: block;\n  margin-bottom: 8px;\n  width: 112px;\n"],["\n  display: block;\n  margin-bottom: 8px;\n  width: 112px;\n"]),l=r(["\n  display: block;\n  width: 32px;\n"],["\n  display: block;\n  width: 32px;\n"]),d=s.a.extend(u),p=a.a.extend(c),h=a.a.extend(l),m=function(e){e.className;return i.a.createElement(d,{bgColor:"light-gray-300"},i.a.createElement(p,{color:"light-gray-50"}),i.a.createElement(h,{color:"light-gray-50"}))};t.a=m},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n.n(o),a=n(9),s=n(8),u=n(46),c=n.n(u),l=n(17),d=n.n(l),p=n(5),h=n(6),m=n(7),f=r(["\n  background-position: top center;\n  background-size: 127px 75px;\n"],["\n  background-position: top center;\n  background-size: 127px 75px;\n"]),g=r(["\n  display: flex;\n  justify-content: space-between;\n"],["\n  display: flex;\n  justify-content: space-between;\n"]),v=m.c.extend(f),b=p.a.extend(g),y=function(){return i.a.createElement(v,{bgColor:"trello-blue-500",height:60,img:c.a})},w=function(e){var t=e.className,n=void 0===t?"":t;return i.a.createElement(h.a,{bgColor:"light-gray-50",borderColor:"light-gray-200"},i.a.createElement(m.a,{className:n},i.a.createElement(y,null),i.a.createElement(m.d,null,"Unfortunetly you do not have access to view this card")),i.a.createElement(p.b,{hideBorder:!0},i.a.createElement(b,null,i.a.createElement(a.a,{icon:d.a},"Request to Join"),i.a.createElement(s.a,null))))};t.a=w},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(44),a=n.n(i),s=n(2),u=function(e){var t=e.children;return o.a.createElement(s.a,{icon:a.a,iconName:"archivedIcon"},t)};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(45),a=n.n(i),s=n(2),u=function(e){var t=e.numAttachments,n=void 0===t?0:t;return o.a.createElement(s.a,{icon:a.a,iconName:"attachmentIcon"},n)};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(48),a=n.n(i),s=n(47),u=n.n(s),c=n(2),l=function(e){var t=e.numComplete,n=void 0===t?0:t,r=e.numItems,i=n===r,s=i?"green-600":null,l=i?"white":null,d=i?u.a:a.a,p=i?"checklistIconComplete":"checklistIconIncomplete";return o.a.createElement(c.a,{bgColor:s,fontColor:l,icon:d,iconName:p},n,"/",r)};t.a=l},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(49),a=n.n(i),s=n(2),u=function(e){var t=e.numComments,n=void 0===t?0:t;return o.a.createElement(s.a,{icon:a.a,iconName:"commentIcon"},n)};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(51),a=n.n(i),s=n(2),u=function(){return o.a.createElement(s.a,{icon:a.a,iconName:"descriptionIcon"})};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(53),a=n.n(i),s=n(52),u=n.n(s),c=n(2),l=864e5,d=1296e5,p=function(e){var t=e.children,n=e.dueDate,r=e.isComplete,i=void 0===r?!1:r,s=new Date,p=n.getTime(),h=s>=p-l&&p>s,m=s>=p&&p+d>s,f=s>=p+d,g="transparent",v="light-gray-800",b=a.a,y="dueDateIcon";return!i&&f?(g="red-300",v="white",b=u.a,y="dueDateIconComplete"):!i&&m?(g="red-600",v="white",b=u.a,y="dueDateIconComplete"):!i&&h?(g="yellow-600",v="white",b=u.a,y="dueDateIconComplete"):i&&(g="green-600",v="white",b=u.a,y="dueDateIconComplete"),o.a.createElement(c.a,{bgColor:g,fontColor:v,icon:b,iconName:y},t)};t.a=p},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(54),a=n.n(i),s=n(2),u=function(e){var t=e.numUnread,n=void 0===t?0:t;return o.a.createElement(s.a,{bgColor:"red-600",fontColor:"white",icon:a.a,iconName:"notificationIcon"},n)};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(18),a=n.n(i),s=n(2),u=function(){return o.a.createElement(s.a,{icon:a.a,iconName:"subscribeIcon"})};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(55),a=n.n(i),s=n(2),u=function(e){var t=e.numAttachments,n=void 0===t?0:t;return o.a.createElement(s.a,{icon:a.a,iconName:"trelloAttachmentIcon"},n)};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(19),a=n.n(i),s=n(2),u=function(e){var t=e.numVotes,n=void 0===t?0:t;return o.a.createElement(s.a,{bgColor:"light-gray-200",fontColor:"light-gray-800",icon:a.a,iconName:"voteIcon"},n)};t.a=u},function(e,t,n){"use strict";var r=n(27);n.d(t,"a",function(){return r.a});var o=n(28);n.d(t,"b",function(){return o.a});var i=n(29);n.d(t,"c",function(){return i.a});var a=n(30);n.d(t,"d",function(){return a.a});var s=n(31);n.d(t,"e",function(){return s.a});var u=n(32);n.d(t,"f",function(){return u.a});var c=n(33);n.d(t,"g",function(){return c.a});var l=n(34);n.d(t,"h",function(){return l.a});var d=n(35);n.d(t,"i",function(){return d.a});var p=n(36);n.d(t,"j",function(){return p.a})},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(17),a=n.n(i),s=n(9),u=function(e){return o.a.createElement(s.a,Object.assign({},e,{icon:a.a,iconName:"joinIcon"}),"Join")};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(18),a=n.n(i),s=n(9),u=function(e){return o.a.createElement(s.a,Object.assign({},e,{icon:a.a,iconName:"subscribeIcon"}),"Subscribe")};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(19),a=n.n(i),s=n(9),u=function(e){return o.a.createElement(s.a,Object.assign({},e,{icon:a.a,iconName:"voteIcon"}),"Vote")};t.a=u},function(e,t,n){"use strict";var r=n(38);n.d(t,"a",function(){return r.a});var o=n(39);n.d(t,"b",function(){return o.a});var i=n(40);n.d(t,"c",function(){return i.a})},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return u});var o=n(1),i=n(3),a=n(16),s=r(["\n  background-color: ",";\n  background-image: ",";\n\n  background-repeat: no-repeat;\n  border: ",";\n  border-radius: 3px;\n  box-sizing: border-box;\n  overflow: hidden;\n  width: 248px;\n"],["\n  background-color: ",";\n  background-image: ",";\n\n  background-repeat: no-repeat;\n  border: ",";\n  border-radius: 3px;\n  box-sizing: border-box;\n  overflow: hidden;\n  width: 248px;\n"]),u=o.b.div(s,function(e){var t=e.bgColor;return t?i.a.hasOwnProperty(t)?i.a[t]:t:i.a["trello-blue-500"]},function(e){var t=e.bgImage,r=e.headerBgColor;if(!t)return"none";if(!r)return"url("+t+")";i.a.hasOwnProperty(r)&&(r=i.a[r]),r=n.i(a.b)(r,.7);var o="linear-gradient(0deg, "+r+" 50%, "+r+" 0%)";return o+", url("+t+")"},function(e){var t=e.borderColor;return t?"1px solid "+i.a[t]:"none"})},function(e,t,n){e.exports=n.p+"static/media/alert-taco.c0c2af90.svg"},function(e,t,n){e.exports=n.p+"static/media/archived-icon.07222c73.svg"},function(e,t,n){e.exports=n.p+"static/media/attachment-icon.1cfee90d.svg"},function(e,t,n){e.exports=n.p+"static/media/bouncer-taco.7bafdb88.svg"},function(e,t,n){e.exports=n.p+"static/media/checklist-icon-complete.c2d9cae6.svg"},function(e,t,n){e.exports=n.p+"static/media/checklist-icon-incomplete.45bbfd31.svg"},function(e,t,n){e.exports=n.p+"static/media/comment-icon.488a6237.svg"},function(e,t,n){e.exports=n.p+"static/media/confused-taco.1d592218.svg"},function(e,t,n){e.exports=n.p+"static/media/description-icon.d490b4a6.svg"},function(e,t,n){e.exports=n.p+"static/media/duedate-complete-icon.ae9932d5.svg"},function(e,t,n){e.exports=n.p+"static/media/duedate-icon.38bca723.svg"},function(e,t,n){e.exports=n.p+"static/media/notification-icon.34d2bcee.svg"},function(e,t,n){e.exports=n.p+"static/media/trello-attachment-icon.5eb53663.svg"},function(e,t,n){e.exports=n.p+"static/media/trello-icon.186d18b0.svg"},function(e,t,n){e.exports=n.p+"static/media/trello-logo.d824d531.svg"},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){f&&h&&(f=!1,h.length?m=h.concat(m):g=-1,m.length&&s())}function s(){if(!f){var e=o(a);f=!0;for(var t=m.length;t;){for(h=m,m=[];++g<t;)h&&h[g].run();g=-1,t=m.length}h=null,f=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,d,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,m=[],f=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new u(e,t)),1!==m.length||f||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){!function(t){e.exports=t(null)}(function e(t){"use strict";function n(e,t,o,a){for(var c,l,d=0,p=0,f=0,g=0,v=0,b=0,y=0,w=0,_=0,k=0,C=0,x=0,E=0,O=0,A=0,M=0,B=0,P=0,Y=0,Ce=o.length,xe=Ce-1,Ee="",Ae="",Me="",Fe="",$e="",Ue="";Ce>A;){if(y=o.charCodeAt(A),p+g+f+d===0){if(A===xe&&(M>0&&(Ae=Ae.replace(m,"")),(Ae=Ae.trim()).length>0)){switch(y){case G:case W:case N:case H:case q:break;default:Ae+=o.charAt(A)}y=N}if(1===B)switch(y){case z:case X:B=0;break;case W:case H:case q:case G:break;default:A--,y=N}switch(y){case z:for(Ae=Ae.trim(),v=Ae.charCodeAt(0),C=1,A++;Ce>A;){switch(y=o.charCodeAt(A)){case z:C++;break;case V:C--}if(0===C)break;Me+=o.charAt(A++)}switch(v===se&&(v=(Ae=Ae.replace(h,"").trim()).charCodeAt(0)),v){case K:switch(M>0&&(Ae=Ae.replace(m,"")),b=Ae.charCodeAt(1)){case ve:case de:case pe:c=t;break;default:c=Te}if(Me=n(t,c,Me,b),Y=Me.length,Se>0&&0===Y&&(Y=Ae.length),Oe>0&&(c=r(Te,Ae,P),l=u(De,Me,c,t,ye,be,Y,b),Ae=c.join(""),void 0!==l&&0===(Y=(Me=l.trim()).length)&&(b=0,Me="")),Y>0)switch(b){case ve:case de:case pe:Me=Ae+"{"+Me+"}";break;case le:Ae=Ae.replace(j,"$1 $2"+(Ne>0?Ve:"")),Me=Ae+"{"+Me+"}",Me="@"+(ke>0?L+Me+"@"+Me:Me);break;default:Me=Ae+Me}else Me="";break;default:Me=n(t,r(t,Ae,P),Me,a)}$e+=Me,x=0,B=0,O=0,M=0,P=0,E=0,Ae="",Me="",y=o.charCodeAt(++A);break;case V:case N:if(Ae=(M>0?Ae.replace(m,""):Ae).trim(),Ae.length>1)switch(0===O&&(v=Ae.charCodeAt(0),(v===Q||v>96&&123>v)&&Ae.indexOf(" ")&&(Ae=Ae.replace(" ",":"))),Oe>0&&void 0!==(l=u(Pe,Ae,t,e,ye,be,Fe.length,a))&&0===(Ae=l.trim()).length&&(Ae="\x00\x00"),v=Ae.charCodeAt(0),b=Ae.charCodeAt(1),v+b){case se:break;case fe:case ge:Ue+=Ae+o.charAt(A);break;default:Fe+=O>0?i(Ae,v,b,Ae.charCodeAt(2)):Ae+";"}x=0,B=0,O=0,M=0,P=0,Ae="",y=o.charCodeAt(++A)}}switch(y){case H:case q:if(p+g+f+d+je===0)switch(k){case F:case te:case ne:case K:case ae:case oe:case Z:case ie:case re:case Q:case ee:case X:case N:case z:case V:break;default:O>0&&(B=1)}p===re&&(p=0),Oe*Ie>0&&u(Be,Ae,t,e,ye,be,Fe.length,a),be=1,ye++;break;case N:case V:if(p+g+f+d===0){be++;break}default:switch(be++,Ee=o.charAt(A),y){case W:case G:if(g+d===0)switch(w){case X:case ee:case W:case G:Ee="";break;default:y!==G&&(Ee=" ")}break;case se:Ee="\\0";break;case ue:Ee="\\f";break;case ce:Ee="\\v";break;case J:g+p+d===0&&_e>0&&(P=1,M=1,Ee="\f"+Ee);break;case 108:if(g+p+d+we===0&&O>0)switch(A-O){case 2:w===he&&o.charCodeAt(A-3)===ee&&(we=w);case 8:_===me&&(we=_)}break;case ee:g+p+d===0&&(O=A);break;case X:p+f+g+d===0&&(M=1,Ee+="\r");break;case ne:0===p&&(g=g===y?0:0===g?y:g,A===xe&&(xe++,Ce++));break;case te:0===p&&(g=g===y?0:0===g?y:g,A===xe&&(xe++,Ce++));break;case $:g+p+f===0&&d++;break;case U:g+p+f===0&&d--;break;case F:g+p+d===0&&(A===xe&&(xe++,Ce++),f--);break;case R:if(g+p+d===0){if(0===x)switch(2*w+3*_){case 533:break;default:C=0,x=1}f++}break;case K:p+f+g+d+O+E===0&&(E=1);break;case Z:case re:if(g+d+f>0)break;switch(p){case 0:switch(2*y+3*o.charCodeAt(A+1)){case 235:p=re;break;case 220:p=Z}break;case Z:y===re&&w===Z&&(Ee="",p=0)}}if(0===p){if(_e+g+d+E===0&&a!==le&&y!==N)switch(y){case X:case ae:case oe:case ie:case F:case R:if(0===x){switch(w){case W:case G:case q:case H:Ee+="\x00";break;default:Ee="\x00"+Ee+(y===X?"":"\x00")}M=1}else switch(y){case R:x=++C;break;case F:0===(x=--C)&&(M=1,Ee+="\x00")}break;case G:switch(w){case se:case z:case V:case N:case X:case ue:case W:case G:case q:case H:break;default:0===x&&(M=1,Ee+="\x00")}}Ae+=Ee,y!==G&&(k=y)}}_=w,w=y,A++}if(Y=Fe.length,Se>0&&0===Y&&0===$e.length&&0===t[0].length==!1&&(a!==de||1===t.length&&(_e>0?ze:Re)===t[0])&&(Y=t.join(",").length+2),Y>0){if(c=0===_e&&a!==le?s(t):t,Oe>0&&(l=u(Le,Fe,c,e,ye,be,Y,a),void 0!==l&&0===(Fe=l).length))return Ue+Fe+$e;if(Fe=c.join(",")+"{"+Fe+"}",ke*we>0){switch(we){case me:Fe=Fe.replace(T,":"+D+"$1")+Fe;break;case he:Fe=Fe.replace(S,"::"+L+"input-$1")+Fe.replace(S,"::"+D+"$1")+Fe.replace(S,":"+I+"input-$1")+Fe}we=0}}return Ue+Fe+$e}function r(e,t,n){var r=t.trim().split(_),i=r,a=r.length,s=e.length;switch(s){case 0:case 1:for(var u=0,c=0===s?"":e[0]+" ";a>u;u++)i[u]=o(c,i[u],n,s).trim();break;default:for(var u=0,l=0,i=[];a>u;u++)for(var d=0;s>d;d++)i[l++]=o(e[d]+" ",r[u],n,s).trim()}return i}function o(e,t,n,r){var o=t,i=o.charCodeAt(0);switch(33>i&&(i=(o=o.trim()).charCodeAt(0)),i){case J:switch(_e+r){case 0:case 1:if(0===e.trim().length)break;default:return o.replace(k,"$1"+e.trim())}break;case ee:switch(o.charCodeAt(1)){case 103:if(Ce>0&&_e>0)return o.replace(C,"$1").replace(k,"$1"+Re);break;default:return e.trim()+o}default:if(n*_e>0&&o.indexOf("\f")>0)return o.replace(k,(e.charCodeAt(0)===ee?"":"$1")+e.trim())}return e+o}function i(e,t,n,r){var o,i=e+";",s=0,u=2*t+3*n+4*r;if(944===u)i=a(i);else if(ke>0)switch(u){case 963:110===i.charCodeAt(5)&&(i=L+i+i);break;case 978:i=L+i+D+i+i;break;case 1019:case 983:i=L+i+D+i+I+i+i;break;case 883:i.charCodeAt(8)===Q&&(i=L+i+i);break;case 932:i=L+i+I+i+i;break;case 964:i=L+i+I+"flex-"+i+i;break;case 1023:o=i.substring(i.indexOf(":",15)).replace("flex-",""),i=L+"box-pack"+o+L+i+I+"flex-pack"+o+i;break;case 975:switch(s=(i=e).length-10,o=(33===i.charCodeAt(s)?i.substring(0,s):i).substring(8).trim(),u=o.charCodeAt(0)+(0|o.charCodeAt(7))){case 203:o.charCodeAt(8)>110&&(i=i.replace(o,L+o)+";"+i);break;case 207:case 102:i=i.replace(o,L+(u>102?"inline-":"")+"box")+";"+i.replace(o,L+o)+";"+i.replace(o,I+o+"box")+";"+i}i+=";";break;case 938:if(i.charCodeAt(5)===Q)switch(i.charCodeAt(6)){case 105:o=i.replace("-items",""),i=L+i+L+"box-"+o+I+"flex-"+o+i;break;case 115:i=L+i+I+"flex-item-"+i.replace("-self","")+i;break;default:i=L+i+I+"flex-line-pack"+i.replace("align-content","")+i}break;case 1005:g.test(i)&&(i=i.replace(f,":"+L)+i.replace(f,":"+D)+i);break;case 953:(s=i.indexOf("-content",9))>0&&(o=i.substring(s-3),i="width:"+L+o+"width:"+D+o+"width:"+o);break;case 1015:if(e.charCodeAt(9)!==Q)break;case 962:i=L+i+(102===i.charCodeAt(5)?I+i:"")+i,n+r===211&&105===i.charCodeAt(13)&&i.indexOf("transform",10)>0&&(i=i.substring(0,i.indexOf(";",27)+1).replace(v,"$1"+L+"$2")+i);break;case 1e3:switch(o=i.substring(13).trim(),s=o.indexOf("-")+1,o.charCodeAt(0)+o.charCodeAt(s)){case 226:o=i.replace(P,"tb");break;case 232:o=i.replace(P,"tb-rl");break;case 220:o=i.replace(P,"lr");break;default:return i}i=L+i+I+o+i}return i}function a(e){var t=e.length,n=e.indexOf(":",9)+1,r=e.substring(0,n).trim(),o=e.substring(n,t-1).trim(),i="";if(e.charCodeAt(9)!==Q)for(var a=o.split(b),s=0,n=0,t=a.length;t>s;n=0,s++){for(var u=a[s],c=u.split(y);u=c[n];){var l=u.charCodeAt(0);if(1===Ne&&(l>K&&90>l||l>96&&123>l||l===Y||l===Q&&u.charCodeAt(1)!==Q))switch(isNaN(parseFloat(u))+(-1!==u.indexOf("("))){case 1:switch(u){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:u+=Ve}}c[n++]=u}i+=(0===s?"":",")+c.join(" ")}else i+=110===e.charCodeAt(10)?o+(1===Ne?Ve:""):o;return i=r+i+";",ke>0?L+i+i:i}function s(e){for(var t,n,r=0,o=e.length,i=Array(o);o>r;r++){for(var a=e[r].split(w),s="",u=0,c=0,l=0,d=0,p=a.length;p>u;u++)if(!(0===(c=(n=a[u]).length)&&p>1)){if(l=s.charCodeAt(s.length-1),d=n.charCodeAt(0),t="",0!==u)switch(l){case Z:case ae:case oe:case ie:case G:case R:break;default:t=" "}switch(d){case J:n=t+ze;case ae:case oe:case ie:case G:case F:case R:break;case $:n=t+n+ze;break;case ee:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(Ce>0){n=t+n.substring(8,c-1);break}default:(1>u||a[u-1].length<1)&&(n=t+ze+n)}break;case X:t="";default:n=c>1&&n.indexOf(":")>0?t+n.replace(B,"$1"+ze+"$2"):t+n+ze}s+=n}i[r]=s.replace(m,"").trim()}return i}function u(e,t,n,r,o,i,a,s){for(var u,c=0,l=t;Oe>c;c++)switch(u=Ee[c].call(p,e,l,n,r,o,i,a,s)){case void 0:case!1:case!0:case null:break;default:l=u}switch(l){case void 0:case!1:case!0:case null:case t:break;default:return l}}function c(e){return e.replace(m,"").replace(E,"").replace(O,"$1").replace(A,"$1").replace(M," ")}function l(e){switch(e){case void 0:case null:Oe=Ee.length=0;break;default:switch(e.constructor){case Array:for(var t=0,n=e.length;n>t;t++)l(e[t]);break;case Function:Ee[Oe++]=e;break;case Boolean:Ie=0|!!e}}return l}function d(e){for(var t in e){var n=e[t];switch(t){case"keyframe":Ne=0|n;break;case"global":Ce=0|n;break;case"cascade":_e=0|n;break;case"compress":xe=0|n;break;case"prefix":ke=0|n;break;case"semicolon":je=0|n;break;case"preserve":Se=0|n}}return d}function p(t,r){if(void 0!==this&&this.constructor===p)return e(t);var o=t,i=o.charCodeAt(0);33>i&&(i=(o=o.trim()).charCodeAt(0)),Ne>0&&(Ve=o.replace(x,i===$?"":"-")),i=1,1===_e?Re=o:ze=o;var a,s=[Re];Oe>0&&(a=u(Me,r,s,s,ye,be,0,0),void 0!==a&&"string"==typeof a&&(r=a));var l=n(Te,s,r,0);return Oe>0&&(a=u(Ae,l,s,s,ye,be,l.length,0),void 0!==a&&"string"!=typeof(l=a)&&(i=0)),Ve="",Re="",ze="",we=0,ye=1,be=1,xe*i===0?l:c(l)}var h=/^\0+/g,m=/[\0\r\f]/g,f=/: */g,g=/zoo|gra/,v=/([,: ])(transform)/g,b=/,+\s*(?![^(]*[)])/g,y=/ +\s*(?![^(]*[)])/g,w=/ *[\0] */g,_=/,\r+?/g,k=/([\t\r\n ])*\f?&/g,C=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,x=/\W+/g,j=/@(k\w+)\s*(\S*)\s*/,S=/::(place)/g,T=/:(read-only)/g,E=/\s+(?=[{\];=:>])/g,O=/([[}=:>])\s+/g,A=/(\{[^{]+?);(?=\})/g,M=/\s{2,}/g,B=/([^\(])(:+) */g,P=/[svh]\w+-[tblr]{2}/,L="-webkit-",D="-moz-",I="-ms-",N=59,V=125,z=123,R=40,F=41,$=91,U=93,q=10,H=13,W=9,K=64,G=32,J=38,Q=45,Y=95,Z=42,X=44,ee=58,te=39,ne=34,re=47,oe=62,ie=43,ae=126,se=0,ue=12,ce=11,le=107,de=109,pe=115,he=112,me=111,fe=169,ge=163,ve=100,be=1,ye=1,we=0,_e=1,ke=1,Ce=1,xe=0,je=0,Se=0,Te=[],Ee=[],Oe=0,Ae=-2,Me=-1,Be=0,Pe=1,Le=2,De=3,Ie=0,Ne=1,Ve="",ze="",Re="";return p.use=l,p.set=d,void 0!==t&&d(t),p})},function(e,t,n){e.exports=n(20)}])},{}],239:[function(e,t,n){var r=e("bluebird"),o=e(240),i=function(e){this.local=e.local,this.remote=e.remote,this.targetOrigin=e.targetOrigin,this.secret=e.secret,this.handlers=e.handlers,this.defaultHandler=e.defaultHandler,this.hostHandlers=e.hostHandlers,this._pendingRequests={},this._messageQueue=[],this.listen()},a="not handled",s="unsupported command";i.NotHandled=o("PostMessageIO:NotHandled",{code:a}),i.UnsupportedCommand=o("PostMessageIO:UnsupportedCommand",{code:s});var u=function(e,t){return Array.prototype.slice.call(e,t)},c=function(){var e={};return u(arguments,0).forEach(function(t){if(t)for(key in t)e[key]=t[key]}),e},l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";i.randomId=function(e){e=e||16;var t=[];if(window.crypto&&window.crypto.getRandomValues)t=window.crypto.getRandomValues(new Uint32Array(e));else if("object"==typeof window.msCrypto&&"function"==typeof window.msCrypto.getRandomValues)t=window.msCrypto.getRandomValues(new Uint32Array(e));else for(;t.length<e;)t.push(Math.floor(Math.random()*l.length));for(var n=[],r=0;e>r;r++)n.push(l[t[r]%l.length]);return n.join("")},i.prototype.listen=function(){var e=this;e.stop(),e.listener=function(t){var n=t.data,r=t.source;if(r==e.remote||n.secret==e.secret){var o=function(t){var n=t.data;switch(t.type){case"request":e._handleRequest(n.id,n.command,n.args,r);break;case"response":e._handleResponse(n.to,n.success,n.response);break;case"bulk":n.forEach(o)}};o(n)}},this.local.addEventListener("message",e.listener)},i.prototype.stop=function(){this.local.removeEventListener("message",self.listener)},i.prototype._handleRequest=function(e,t,n,o){var a=this,s=c(a.hostHandlers,{NotHandled:i.NotHandled,command:t,args:n,source:o,request:function(){return a.request.apply(a,u(arguments,0).concat([o]))},secret:a.secret});r.try(function(){if(!a.handlers.hasOwnProperty(t)){if(a.defaultHandler)return a.defaultHandler.apply(a,[s,t].concat(n));throw new i.UnsupportedCommand("unsupported command: "+t)}return a.handlers[t].apply(a,[s].concat(n))}).then(function(t){a.respond(e,!0,t,o)}).catch(i.NotHandled,i.UnsupportedCommand,function(t){a.respond(e,!1,{code:t.code,message:t.message},o)}).done()},i.prototype._handleResponse=function(e,t,n){var r=this;if(r._pendingRequests.hasOwnProperty(e))if(t)r._pendingRequests[e].resolve(n);else{var o=null;switch(n.code){case a:o=new i.NotHandled(n.message);break;case s:o=new i.UnsupportedCommand(n.message);break;default:o=new Error(n.message)}r._pendingRequests[e].reject(o)}},i.prototype.raw=function(e,t,n){var r=this;if("bulk"==e){var o={secret:r.secret,type:e,data:t};n?n.postMessage(o,"*"):r.remote.postMessage(o,r.targetOrigin)}else 0==r._messageQueue.length&&setTimeout(r.emptyQueue.bind(r),0),r._messageQueue.push({type:e,data:t,target:n})},i.prototype.emptyQueue=function(){var e=this,t=e._messageQueue;e._messageQueue=[];for(var n=0;n<t.length;n++){var r=t[n];if(!r.sent){for(var o=r.target,i=[],a=n;a<t.length;a++)t[a].target==o&&(i.push({type:t[a].type,data:t[a].data}),t[a].sent=!0);e.raw("bulk",i,o)}}},i.prototype.request=function(e){var t=this,n=u(arguments,1),o=i.randomId(),a=void 0,s=n[n.length-1];return s&&"function"==typeof s.postMessage&&(a=n.pop()),t.raw("request",{id:o,command:e,args:n},a),new r(function(r,i){t._pendingRequests[o]={id:o,command:e,args:n,resolve:r,reject:i}})},i.prototype.respond=function(e,t,n,r){var o=this;o.raw("response",{to:e,success:t,response:n},r)},t.exports=i},{}],240:[function(e,t,n){var r=Object.prototype.hasOwnProperty,o=function(e,t){function n(){this.constructor=e}for(var o in t)r.call(t,o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype},i=function(e){return function(t){for(var n=Array.prototype.slice.call(arguments,1),o=0;o<n.length;o++){var i=n[o];for(var a in i)r.call(i,a)&&e(t,a,i)&&(t[a]=i[a])}return t}},a=i(function(){return!0}),s=i(function(e,t){return"undefined"==typeof e[t]});t.exports=function(e,t,n){function i(e,n){if(!(this instanceof i)){var r=new i(e,n);return null!=Error.captureStackTrace&&Error.captureStackTrace(r,arguments.callee),r}Error.call(this),null!=Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),this.message=e,s(this,n,t);var o=this.message||e;delete this.message,Object.defineProperty(this,"message",{get:function(){return this.getMessage(o)},set:function(e){o=e}})}return null==n&&(n=Error),o(i,n),i.prototype.name=e,i.prototype.getMessage=function(e){return e},i.prototype.toObject=function(){var e={};for(var t in this)r.call(this,t)&&(e[t]=this[t]);return e},i.prototype.toJSON=function(){return a({message:this.message
},this.toObject())},i}},{}],241:[function(e,t,n){var r,o,i,a;i=e(985),o=e(35),a=e("underscore"),r=e("jquery"),i.$=r,i.$=e("jquery"),i.prepareData=function(e,t,n){var i,s,u;return null==n&&(n={}),u={token:o.myToken()},s=function(){switch(e){case"create":case"update":return i=null!=n.requestData?a.clone(n.requestData):null!=n.createData?a.extend({},t.toJSON(),n.createData):a.clone(t.toJSON()),a.extend(i,u);case"delete":return u;default:return{}}}(),"read"===e&&a.isArray(n.fields)&&(s.fields=n.fields.join(",")),"read"===e?r.param(s):JSON.stringify(s)},i.syncOriginal=i.sync,i.sync=function(e,t,n){var r,o,s;switch(e){case"update":return null!=n&&"function"==typeof n.success?n.success(t,{},n):void 0;case"create":n.wait||(r=t.modelCache.lock("Backbone.sync create"),o=a.once(function(){return t.modelCache.unlock(r)}),s=function(e){return function(){return"function"==typeof e&&e.apply(null,arguments),o()}},setTimeout(s(),1e4),n.success=s(n.success),n.error=s(n.error));break;case"delete":if(/^placeholder/.test(t.id))return}return i.syncOriginal.apply(i,arguments)},t.exports=i},{}],242:[function(e,t,n){var r,o={}.hasOwnProperty;r=function(e){return function(t){switch(arguments.length){case 0:throw new Error("Operators can't be invoked with no arguments");case 1:return function(n){if(0===arguments.length)throw new Error("Partially applied binary operator can't be invoked with no arguments");return e.call(this,n,t)};default:return e.apply(null,arguments)}}},t.exports=function(e){var t,n,i;n={};for(t in e)o.call(e,t)&&(i=e[t],n[t]=r(i));return n}},{}],243:[function(e,t,n){var r,o,i=[].slice;o=e(252),r=function(e,t){return"function"==typeof e&&(t=e,e=t.length),function(){return arguments.length<e?r(e-arguments.length,o.apply(null,[t].concat(i.call(arguments)))):t.apply(this,arguments)}},t.exports=r},{}],244:[function(e,t,n){var r,o,i=[].slice;r=e(252),o=e(250),t.exports={noop:r(),id:function(e){return e},choke:function(){var e,t,n;return n=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],e=r.apply(null,t),function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],e.apply(this,t.slice(0,n))}},concat:function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],function(){var t,n,r,o;for(n=void 0,r=0,o=e.length;o>r;r++)t=e[r],n=t.apply(this,arguments);return n}},compose:function(e,t){return function(){return e.call(this,t.apply(this,arguments))}},unpack:function(e){return function(t){return e.apply(this,t)}},invoke:function(){var e,t;return t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[],t.apply(this,e)},guard:function(e,t,n){return function(){return t.apply(this,arguments)?e.apply(this,arguments):n}},const:function(e){return function(){return e}},once:function(e,t){return null==t&&(t="Function called more than once!"),o({first:e,after:function(){throw new Error(t)}})}}},{}],245:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h={}.hasOwnProperty;for(o=e(252),u=[e(247),e(246),e(248),e(251),e(244)],d=0,p=u.length;p>d;d++){s=u[d];for(i in s)h.call(s,i)&&(l=s[i],o[i]=l)}o.overloaded=e(249),o.curried=e(243),o.prime=e(250),r={sub:"subtract",mult:"multiply",div:"divide",idiv:"intDivide",mod:"modulo",neg:"negate",rem:"remainder",comp:"compose",dot:"get"};for(a in r)h.call(r,a)&&(c=r[a],o[a]=o[c]);t.exports=o},{}],246:[function(e,t,n){var r;r=e(242),t.exports=r({and:function(e,t){return e&&t},or:function(e,t){return e||t}}),t.exports.not=function(e){return!e}},{}],247:[function(e,t,n){var r;r=e(242),t.exports=r({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t},intDivide:function(e,t){return Math.floor(e/t)},modulo:function(e,t){return(e%t+t)%t},remainder:function(e,t){return e%t}}),t.exports.negate=function(e){return-e}},{}],248:[function(e,t,n){var r,o=[].slice;r=e(243),t.exports={get:r(function(e,t){return t[e]}),lookup:r(function(e,t){return e[t]}),set:r(function(e,t,n){return t[e]=n}),method:function(){var e,t;return t=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],function(){var n,r;return r=arguments[0],n=2<=arguments.length?o.call(arguments,1):[],0===n.length?r[t].apply(r,e):r[t].apply(r,o.call(e).concat(o.call(n)))}}}},{}],249:[function(e,t,n){var r,o={}.hasOwnProperty;r=function(e,t){var n;return n=e.filter(function(e){return t>=e}),0===n.length?null:Math.max.apply(null,n)},t.exports=function(e){var t,n,i,a,s;if(1!==arguments.length)throw new Error("overloaded is not overloaded!");if(n={},a=function(){var r;r=[];for(t in e)if(o.call(e,t)){if(s=e[t],i=Number(t),""===t||isNaN(i))throw new Error("non-numeric key "+t);n[i]=s,r.push(i)}return r}(),0===a.length)throw new Error("you must pass at least one overload!");return function(){var e,t,o;return t=arguments.length,e=null!=(o=n[t])?o:function(){if(t=r(a,t),null===t)throw new Error("function not overloaded to accept "+arguments.length+" arguments");return n[t]}(),e.apply(this,arguments)}}},{}],250:[function(e,t,n){var r,o,i=[].slice;r=e(252),o=function(){var e,t,n,r,o,a,s;for(t=arguments[0],e=arguments[1],r=3<=arguments.length?i.call(arguments,2):[],o=void 0,a=0,s=r.length;s>a;a++)n=r[a],null!=n&&(o=n.apply(t,e));return o},t.exports=function(e){var t,n,r,i,a,s;return a=e.first,t=e.after,r=e.beforeBoth,n=e.afterBoth,i=e.both,n=null!=n?n:i,s=!0,function(){return o(this,arguments,r,s?(s=!1,a):t,n)}}},{}],251:[function(e,t,n){var r;r=e(242),t.exports=r({gt:function(e,t){return e>t},gte:function(e,t){return e>=t},lt:function(e,t){return t>e},lte:function(e,t){return t>=e},eq:function(e,t){return e===t},neq:function(e,t){return e!==t}})},{}],252:[function(e,t,n){var r,o,i,a,s,u,c=[].slice;a=function(){},r=null!=(u=Array.isArray)?u:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=function(e){return"function"==typeof e},i=function(e){return"string"==typeof e},s=function(){var e,t,n,r,s;return n=1<=arguments.length?c.call(arguments,0):[],0===n.length?a:null==n[0]?a:"function"==typeof n[0]?(t=n[0],e=2<=n.length?c.call(n,1):[],0===e.length?t:function(){return t.call.apply(t,[this].concat(c.call(e),c.call(arguments)))}):(s=n[0],r=n[1],e=3<=n.length?c.call(n,2):[],t=function(){if(i(r))return s[r];if(o(r))return r;throw new Error("The [target, method, args...] functionoid requires a string or a function as the method")}(),function(){return t.call.apply(t,[s].concat(c.call(e),c.call(arguments)))})},t.exports=s},{}],253:[function(e,t,n){arguments[4][240][0].apply(n,arguments)},{}],254:[function(e,t,n){"use strict";function r(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(void 0!==o&&null!==o)for(var i=Object.keys(Object(o)),a=0,s=i.length;s>a;a++){var u=i[a],c=Object.getOwnPropertyDescriptor(o,u);void 0!==c&&c.enumerable&&(n[u]=o[u])}}return n}function o(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}t.exports={assign:r,polyfill:o}},{}],255:[function(e,t,n){!function(e,t){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||l(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?o/n:0}function r(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=i(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function o(){return e.performance&&performance.now&&performance.now()}function i(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function a(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function u(e,t){var n=Math.max(e.top,t.top),r=Math.min(e.bottom,t.bottom),o=Math.max(e.left,t.left),i=Math.min(e.right,t.right),a=i-o,s=r-n;return a>=0&&s>=0&&{top:n,bottom:r,left:o,right:i,width:a,height:s}}function c(e){var t=e.getBoundingClientRect();if(t)return t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t}function l(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}if(!("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)){var d=t.documentElement,p=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||0>e||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},r.prototype._parseRootMargin=function(e){var t=e||"0px",n=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():l();this._observationTargets.forEach(function(r){var i=r.element,a=c(i),s=this._rootContainsTarget(i),u=r.entry,l=e&&s&&this._computeTargetAndRootIntersection(i,t),d=r.entry=new n({time:o(),target:i,boundingClientRect:a,rootBounds:t,intersectionRect:l});e&&s?this._hasCrossedThreshold(u,d)&&this._queuedEntries.push(d):u&&u.isIntersecting&&this._queuedEntries.push(d)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(t,n){if("none"!=e.getComputedStyle(t).display){for(var r=c(t),o=r,i=t.parentNode,a=!1;!a;){var s=null;if(i==this.root||1!=i.nodeType?(a=!0,s=n):"visible"!=e.getComputedStyle(i).overflow&&(s=c(i)),s&&(o=u(s,o),!o))break;i=i.parentNode}return o}},r.prototype._getRootRect=function(){var e;if(this.root)e=c(this.root);else{var n=t.documentElement,r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var i=this.thresholds[o];if(i==n||i==r||n>i!=r>i)return!0}},r.prototype._rootIsInDom=function(){return!this.root||d.contains(this.root)},r.prototype._rootContainsTarget=function(e){return(this.root||d).contains(e)},r.prototype._registerInstance=function(){p.indexOf(this)<0&&p.push(this)},r.prototype._unregisterInstance=function(){var e=p.indexOf(this);-1!=e&&p.splice(e,1)},e.IntersectionObserver=r,e.IntersectionObserverEntry=n}}(window,document)},{}],256:[function(e,t,n){(function(){t.exports=function(e,t,n){var r;switch(null==t&&(t=", "),null==n&&(n=" and "),e.length){case 0:return"";case 1:return e.pop();default:return r=e.pop(),e.join(t)+n+r}}}).call(this)},{}],257:[function(e,t,r){(function(){function e(e,t){return e.set(t[0],t[1]),e}function o(e,t){return e.add(t),e}function i(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t,n,r){for(var o=-1,i=e?e.length:0;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function s(e,t){for(var n=-1,r=e?e.length:0;++n<r&&t(e[n],n,e)!==!1;);return e}function u(e,t){for(var n=e?e.length:0;n--&&t(e[n],n,e)!==!1;);return e}function c(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,r=e?e.length:0,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function d(e,t){var n=e?e.length:0;return!!n&&k(e,t,0)>-1}function p(e,t,n){for(var r=-1,o=e?e.length:0;++r<o;)if(n(t,e[r]))return!0;return!1}function h(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function m(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function f(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function g(e,t,n,r){var o=e?e.length:0;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function v(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function b(e){return e.split("")}function y(e){return e.match(Mt)||[]}function w(e,t,n){var r;return n(e,function(e,n,o){return t(e,n,o)?(r=n,!1):void 0}),r}function _(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function k(e,t,n){if(t!==t)return _(e,x,n);for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}function C(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function x(e){return e!==e}function j(e,t){var n=e?e.length:0;return n?A(e,t)/n:Ae}function S(e){return function(t){return null==t?ne:t[e]}}function T(e){return function(t){return null==e?ne:e[t]}}function E(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}function O(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function A(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);i!==ne&&(n=n===ne?i:n+i)}return n}function M(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function B(e,t){return h(t,function(t){return[t,e[t]]})}function P(e){return function(t){return e(t)}}function L(e,t){return h(t,function(t){return e[t]})}function D(e,t){return e.has(t)}function I(e,t){for(var n=-1,r=e.length;++n<r&&k(t,e[n],0)>-1;);return n}function N(e,t){for(var n=e.length;n--&&k(t,e[n],0)>-1;);return n}function V(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&r++;return r}function z(e){return"\\"+Fn[e]}function R(e,t){return null==e?ne:e[t]}function F(e){return Bn.test(e)}function $(e){return Pn.test(e)}function U(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function q(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function H(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function W(e,t){return function(n){return e(t(n))}}function K(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n];(a===t||a===se)&&(e[n]=se,i[o++]=n)}return i}function G(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function J(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Q(e){return F(e)?Z(e):or(e)}function Y(e){return F(e)?X(e):b(e)}function Z(e){for(var t=An.lastIndex=0;An.test(e);)t++;return t}function X(e){return e.match(An)||[]}function ee(e){return e.match(Mn)||[]}function te(t){function n(e){if(Ns(e)&&!$d(e)&&!(e instanceof T)){if(e instanceof b)return e;if(Jc.call(e,"__wrapped__"))return Pi(e)}return new b(e)}function r(){}function b(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ne}function T(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Me,this.__views__=[]}function Z(){var e=new T(this.__wrapped__);return e.__actions__=jo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=jo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=jo(this.__views__),e}function X(){if(this.__filtered__){var e=new T(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Mt(){var e=this.__wrapped__.value(),t=this.__dir__,n=$d(e),r=0>t,o=n?e.length:0,i=ui(0,o,this.__views__),a=i.start,s=i.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,d=l.length,p=0,h=_l(u,this.__takeCount__);if(!n||oe>o||o==u&&h==u)return io(e,this.__actions__);var m=[];e:for(;u--&&h>p;){c+=t;for(var f=-1,g=e[c];++f<d;){var v=l[f],b=v.iteratee,y=v.type,w=b(g);if(y==je)g=w;else if(!w){if(y==xe)continue e;break e}}m[p++]=g}return m}function qt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ht(){this.__data__=Al?Al(null):{}}function Wt(e){return this.has(e)&&delete this.__data__[e]}function Kt(e){var t=this.__data__;if(Al){var n=t[e];return n===ae?ne:n}return Jc.call(t,e)?t[e]:ne}function Gt(e){var t=this.__data__;return Al?t[e]!==ne:Jc.call(t,e)}function Jt(e,t){var n=this.__data__;return n[e]=Al&&t===ne?ae:t,this}function Qt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yt(){this.__data__=[]}function Zt(e){var t=this.__data__,n=kn(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():ul.call(t,n,1),!0}function Xt(e){var t=this.__data__,n=kn(t,e);return 0>n?ne:t[n][1]}function en(e){return kn(this.__data__,e)>-1}function tn(e,t){var n=this.__data__,r=kn(n,e);return 0>r?n.push([e,t]):n[r][1]=t,this}function nn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function rn(){this.__data__={hash:new qt,map:new(Sl||Qt),string:new qt}}function on(e){return ii(this,e).delete(e)}function an(e){return ii(this,e).get(e)}function sn(e){return ii(this,e).has(e)}function un(e,t){return ii(this,e).set(e,t),this}function cn(e){var t=-1,n=e?e.length:0;for(this.__data__=new nn;++t<n;)this.add(e[t])}function ln(e){return this.__data__.set(e,ae),this}function dn(e){return this.__data__.has(e)}function pn(e){this.__data__=new Qt(e)}function hn(){this.__data__=new Qt}function mn(e){return this.__data__.delete(e)}function fn(e){return this.__data__.get(e)}function gn(e){return this.__data__.has(e)}function vn(e,t){var n=this.__data__;if(n instanceof Qt){var r=n.__data__;if(!Sl||r.length<oe-1)return r.push([e,t]),this;n=this.__data__=new nn(r)}return n.set(e,t),this}function bn(e,t){var n=$d(e)||Cs(e)?M(e.length,Fc):[],r=n.length,o=!!r;for(var i in e)!t&&!Jc.call(e,i)||o&&("length"==i||gi(i,r))||n.push(i);return n}function yn(e,t,n,r){return e===ne||ks(e,Hc[n])&&!Jc.call(r,n)?t:e}function wn(e,t,n){(n!==ne&&!ks(e[t],n)||"number"==typeof t&&n===ne&&!(t in e))&&(e[t]=n)}function _n(e,t,n){var r=e[t];Jc.call(e,t)&&ks(r,n)&&(n!==ne||t in e)||(e[t]=n)}function kn(e,t){for(var n=e.length;n--;)if(ks(e[n][0],t))return n;return-1}function Cn(e,t,n,r){return Ul(e,function(e,o,i){t(r,e,n(e),i)}),r}function xn(e,t){return e&&So(t,bu(t),e)}function jn(e,t){for(var n=-1,r=null==e,o=t.length,i=Lc(o);++n<o;)i[n]=r?ne:fu(e,t[n]);return i}function Sn(e,t,n){return e===e&&(n!==ne&&(e=n>=e?e:n),t!==ne&&(e=e>=t?e:t)),e}function Tn(e,t,n,r,o,i,a){var u;if(r&&(u=i?r(e,o,i,a):r(e)),u!==ne)return u;if(!Is(e))return e;var c=$d(e);if(c){if(u=di(e),!t)return jo(e,u)}else{var l=Xl(e),d=l==Re||l==Fe;if(qd(e))return ho(e,t);if(l==qe||l==De||d&&!i){if(U(e))return i?e:{};if(u=pi(d?{}:e),!t)return To(e,xn(u,e))}else{if(!Nn[l])return i?e:{};u=hi(e,l,Tn,t)}}a||(a=new pn);var p=a.get(e);if(p)return p;if(a.set(e,u),!c)var h=n?ei(e):bu(e);return s(h||e,function(o,i){h&&(i=o,o=e[i]),_n(u,i,Tn(o,t,n,r,i,e,a))}),u}function An(e){var t=bu(e);return function(n){return Mn(n,e,t)}}function Mn(e,t,n){var r=n.length;if(null==e)return!r;for(e=zc(e);r--;){var o=n[r],i=t[o],a=e[o];if(a===ne&&!(o in e)||!i(a))return!1}return!0}function Bn(e){return Is(e)?al(e):{}}function Pn(e,t,n){if("function"!=typeof e)throw new $c(ie);return nd(function(){e.apply(ne,n)},t)}function Vn(e,t,n,r){var o=-1,i=d,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=h(t,P(n))),r?(i=p,a=!1):t.length>=oe&&(i=D,a=!1,t=new cn(t));e:for(;++o<s;){var l=e[o],m=n?n(l):l;if(l=r||0!==l?l:0,a&&m===m){for(var f=c;f--;)if(t[f]===m)continue e;u.push(l)}else i(t,m,r)||u.push(l)}return u}function zn(e,t){var n=!0;return Ul(e,function(e,r,o){return n=!!t(e,r,o)}),n}function Rn(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(null!=a&&(s===ne?a===a&&!Gs(a):n(a,s)))var s=a,u=i}return u}function Fn(e,t,n,r){var o=e.length;for(n=eu(n),0>n&&(n=-n>o?0:o+n),r=r===ne||r>o?o:eu(r),0>r&&(r+=o),r=n>r?0:tu(r);r>n;)e[n++]=t;return e}function qn(e,t){var n=[];return Ul(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}function Hn(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=fi),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?Hn(s,t-1,n,r,o):m(o,s):r||(o[o.length]=s)}return o}function Kn(e,t){return e&&Hl(e,t,bu)}function Gn(e,t){return e&&Wl(e,t,bu)}function Qn(e,t){return l(t,function(t){return Ps(e[t])})}function Yn(e,t){t=bi(t,e)?[t]:lo(t);for(var n=0,r=t.length;null!=e&&r>n;)e=e[Ai(t[n++])];return n&&n==r?e:ne}function or(e,t,n){var r=t(e);return $d(e)?r:m(r,n(e))}function cr(e){return Zc.call(e)}function lr(e,t){return e>t}function dr(e,t){return null!=e&&Jc.call(e,t)}function pr(e,t){return null!=e&&t in zc(e)}function hr(e,t,n){return e>=_l(t,n)&&e<wl(t,n)}function mr(e,t,n){for(var r=n?p:d,o=e[0].length,i=e.length,a=i,s=Lc(i),u=1/0,c=[];a--;){var l=e[a];a&&t&&(l=h(l,P(t))),u=_l(l.length,u),s[a]=!n&&(t||o>=120&&l.length>=120)?new cn(a&&l):ne}l=e[0];var m=-1,f=s[0];e:for(;++m<o&&c.length<u;){var g=l[m],v=t?t(g):g;if(g=n||0!==g?g:0,!(f?D(f,v):r(c,v,n))){for(a=i;--a;){var b=s[a];if(!(b?D(b,v):r(e[a],v,n)))continue e}f&&f.push(v),c.push(g)}}return c}function fr(e,t,n,r){return Kn(e,function(e,o,i){t(r,n(e),o,i)}),r}function gr(e,t,n){bi(t,e)||(t=lo(t),e=Ei(e,t),t=Zi(t));var r=null==e?e:e[Ai(t)];return null==r?ne:i(r,e,n)}function vr(e){return Ns(e)&&Zc.call(e)==Ze}function br(e){return Ns(e)&&Zc.call(e)==Ve}function yr(e,t,n,r,o){return e===t?!0:null==e||null==t||!Is(e)&&!Ns(t)?e!==e&&t!==t:wr(e,t,yr,n,r,o)}function wr(e,t,n,r,o,i){var a=$d(e),s=$d(t),u=Ie,c=Ie;a||(u=Xl(e),u=u==De?qe:u),s||(c=Xl(t),c=c==De?qe:c);var l=u==qe&&!U(e),d=c==qe&&!U(t),p=u==c;if(p&&!l)return i||(i=new pn),a||Jd(e)?Yo(e,t,n,r,o,i):Zo(e,t,u,n,r,o,i);if(!(o&ye)){var h=l&&Jc.call(e,"__wrapped__"),m=d&&Jc.call(t,"__wrapped__");if(h||m){var f=h?e.value():e,g=m?t.value():t;return i||(i=new pn),n(f,g,r,o,i)}}return p?(i||(i=new pn),Xo(e,t,n,r,o,i)):!1}function _r(e){return Ns(e)&&Xl(e)==$e}function kr(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=zc(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){s=n[o];var u=s[0],c=e[u],l=s[1];if(a&&s[2]){if(c===ne&&!(u in e))return!1}else{var d=new pn;if(r)var p=r(c,l,u,e,t,d);if(!(p===ne?yr(l,c,r,be|ye,d):p))return!1}}return!0}function Cr(e){if(!Is(e)||_i(e))return!1;var t=Ps(e)||U(e)?el:Vt;return t.test(Mi(e))}function xr(e){return Is(e)&&Zc.call(e)==We}function jr(e){return Ns(e)&&Xl(e)==Ke}function Sr(e){return Ns(e)&&Ds(e.length)&&!!In[Zc.call(e)]}function Tr(e){return"function"==typeof e?e:null==e?uc:"object"==typeof e?$d(e)?Pr(e[0],e[1]):Br(e):gc(e)}function Er(e){if(!ki(e))return yl(e);var t=[];for(var n in zc(e))Jc.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Or(e){if(!Is(e))return Ti(e);var t=ki(e),n=[];for(var r in e)("constructor"!=r||!t&&Jc.call(e,r))&&n.push(r);return n}function Ar(e,t){return t>e}function Mr(e,t){var n=-1,r=xs(e)?Lc(e.length):[];return Ul(e,function(e,o,i){r[++n]=t(e,o,i)}),r}function Br(e){var t=ai(e);return 1==t.length&&t[0][2]?xi(t[0][0],t[0][1]):function(n){return n===e||kr(n,e,t)}}function Pr(e,t){return bi(e)&&Ci(t)?xi(Ai(e),t):function(n){var r=fu(n,e);return r===ne&&r===t?vu(n,e):yr(t,r,ne,be|ye)}}function Lr(e,t,n,r,o){if(e!==t){if(!$d(t)&&!Jd(t))var i=Or(t);s(i||t,function(a,s){if(i&&(s=a,a=t[s]),Is(a))o||(o=new pn),Dr(e,t,s,n,Lr,r,o);else{var u=r?r(e[s],a,s+"",e,t,o):ne;u===ne&&(u=a),wn(e,s,u)}})}}function Dr(e,t,n,r,o,i,a){var s=e[n],u=t[n],c=a.get(u);if(c)return void wn(e,n,c);var l=i?i(s,u,n+"",e,t,a):ne,d=l===ne;d&&(l=u,$d(u)||Jd(u)?$d(s)?l=s:js(s)?l=jo(s):(d=!1,l=Tn(u,!0)):Hs(u)||Cs(u)?Cs(s)?l=ru(s):!Is(s)||r&&Ps(s)?(d=!1,l=Tn(u,!0)):l=s:d=!1),d&&(a.set(u,l),o(l,u,r,i,a),a.delete(u)),wn(e,n,l)}function Ir(e,t){var n=e.length;if(n)return t+=0>t?n:0,gi(t,n)?e[t]:ne}function Nr(e,t,n){var r=-1;t=h(t.length?t:[uc],P(oi()));var o=Mr(e,function(e,n,o){var i=h(t,function(t){return t(e)});return{criteria:i,index:++r,value:e}});return O(o,function(e,t){return ko(e,t,n)})}function Vr(e,t){return e=zc(e),zr(e,t,function(t,n){return n in e})}function zr(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=e[a];n(s,a)&&(i[a]=s)}return i}function Rr(e){return function(t){return Yn(t,e)}}function Fr(e,t,n,r){var o=r?C:k,i=-1,a=t.length,s=e;for(e===t&&(t=jo(t)),n&&(s=h(e,P(n)));++i<a;)for(var u=0,c=t[i],l=n?n(c):c;(u=o(s,l,u,r))>-1;)s!==e&&ul.call(s,u,1),ul.call(e,u,1);return e}function $r(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;if(gi(o))ul.call(e,o,1);else if(bi(o,e))delete e[Ai(o)];else{var a=lo(o),s=Ei(e,a);null!=s&&delete s[Ai(Zi(a))]}}}return e}function Ur(e,t){return e+ml(Cl()*(t-e+1))}function qr(e,t,n,r){for(var o=-1,i=wl(hl((t-e)/(n||1)),0),a=Lc(i);i--;)a[r?i:++o]=e,e+=n;return a}function Hr(e,t){var n="";if(!e||1>t||t>Ee)return n;do t%2&&(n+=e),t=ml(t/2),t&&(e+=e);while(t);return n}function Wr(e,t){return t=wl(t===ne?e.length-1:t,0),function(){for(var n=arguments,r=-1,o=wl(n.length-t,0),a=Lc(o);++r<o;)a[r]=n[t+r];r=-1;for(var s=Lc(t+1);++r<t;)s[r]=n[r];return s[t]=a,i(e,this,s)}}function Kr(e,t,n,r){if(!Is(e))return e;t=bi(t,e)?[t]:lo(t);for(var o=-1,i=t.length,a=i-1,s=e;null!=s&&++o<i;){var u=Ai(t[o]),c=n;if(o!=a){var l=s[u];c=r?r(l,u,s):ne,c===ne&&(c=Is(l)?l:gi(t[o+1])?[]:{})}_n(s,u,c),s=s[u]}return e}function Gr(e,t,n){var r=-1,o=e.length;0>t&&(t=-t>o?0:o+t),n=n>o?o:n,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Lc(o);++r<o;)i[r]=e[r+t];return i}function Jr(e,t){var n;return Ul(e,function(e,r,o){return n=t(e,r,o),!n}),!!n}function Qr(e,t,n){var r=0,o=e?e.length:r;if("number"==typeof t&&t===t&&Pe>=o){for(;o>r;){var i=r+o>>>1,a=e[i];null!==a&&!Gs(a)&&(n?t>=a:t>a)?r=i+1:o=i}return o}return Yr(e,t,uc,n)}function Yr(e,t,n,r){t=n(t);for(var o=0,i=e?e.length:0,a=t!==t,s=null===t,u=Gs(t),c=t===ne;i>o;){var l=ml((o+i)/2),d=n(e[l]),p=d!==ne,h=null===d,m=d===d,f=Gs(d);if(a)var g=r||m;else g=c?m&&(r||p):s?m&&p&&(r||!h):u?m&&p&&!h&&(r||!f):h||f?!1:r?t>=d:t>d;g?o=l+1:i=l}return _l(i,Be)}function Zr(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!ks(s,u)){var u=s;i[o++]=0===a?0:a}}return i}function Xr(e){return"number"==typeof e?e:Gs(e)?Ae:+e}function eo(e){if("string"==typeof e)return e;if(Gs(e))return $l?$l.call(e):"";var t=e+"";return"0"==t&&1/e==-Te?"-0":t}function to(e,t,n){var r=-1,o=d,i=e.length,a=!0,s=[],u=s;if(n)a=!1,o=p;else if(i>=oe){var c=t?null:Jl(e);if(c)return G(c);a=!1,o=D,u=new cn}else u=t?[]:s;e:for(;++r<i;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,a&&h===h){for(var m=u.length;m--;)if(u[m]===h)continue e;t&&u.push(h),s.push(l)}else o(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function no(e,t){t=bi(t,e)?[t]:lo(t),e=Ei(e,t);var n=Ai(Zi(t));return!(null!=e&&Jc.call(e,n))||delete e[n]}function ro(e,t,n,r){return Kr(e,t,n(Yn(e,t)),r)}function oo(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?Gr(e,r?0:i,r?i+1:o):Gr(e,r?i+1:0,r?o:i)}function io(e,t){var n=e;return n instanceof T&&(n=n.value()),f(t,function(e,t){return t.func.apply(t.thisArg,m([e],t.args))},n)}function ao(e,t,n){for(var r=-1,o=e.length;++r<o;)var i=i?m(Vn(i,e[r],t,n),Vn(e[r],i,t,n)):e[r];return i&&i.length?to(i,t,n):[]}function so(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;){var s=i>r?t[r]:ne;n(a,e[r],s)}return a}function uo(e){return js(e)?e:[]}function co(e){return"function"==typeof e?e:uc}function lo(e){return $d(e)?e:od(e)}function po(e,t,n){var r=e.length;return n=n===ne?r:n,!t&&n>=r?e:Gr(e,t,n)}function ho(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function mo(e){var t=new e.constructor(e.byteLength);return new rl(t).set(new rl(e)),t}function fo(e,t){var n=t?mo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function go(t,n,r){var o=n?r(H(t),!0):H(t);return f(o,e,new t.constructor)}function vo(e){var t=new e.constructor(e.source,Lt.exec(e));return t.lastIndex=e.lastIndex,t}function bo(e,t,n){var r=t?n(G(e),!0):G(e);return f(r,o,new e.constructor)}function yo(e){return Fl?zc(Fl.call(e)):{}}function wo(e,t){var n=t?mo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function _o(e,t){if(e!==t){var n=e!==ne,r=null===e,o=e===e,i=Gs(e),a=t!==ne,s=null===t,u=t===t,c=Gs(t);if(!s&&!c&&!i&&e>t||i&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!o)return 1;if(!r&&!i&&!c&&t>e||c&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!u)return-1}return 0}function ko(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var u=_o(o[r],i[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}function Co(e,t,n,r){for(var o=-1,i=e.length,a=n.length,s=-1,u=t.length,c=wl(i-a,0),l=Lc(u+c),d=!r;++s<u;)l[s]=t[s];for(;++o<a;)(d||i>o)&&(l[n[o]]=e[o]);for(;c--;)l[s++]=e[o++];return l}function xo(e,t,n,r){for(var o=-1,i=e.length,a=-1,s=n.length,u=-1,c=t.length,l=wl(i-s,0),d=Lc(l+c),p=!r;++o<l;)d[o]=e[o];for(var h=o;++u<c;)d[h+u]=t[u];for(;++a<s;)(p||i>o)&&(d[h+n[a]]=e[o++]);return d}function jo(e,t){var n=-1,r=e.length;for(t||(t=Lc(r));++n<r;)t[n]=e[n];return t}function So(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=r?r(n[a],e[a],a,n,e):ne;_n(n,a,s===ne?e[a]:s)}return n}function To(e,t){return So(e,Yl(e),t)}function Eo(e,t){return function(n,r){var o=$d(n)?a:Cn,i=t?t():{};return o(n,e,oi(r,2),i)}}function Oo(e){return Wr(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:ne,a=o>2?n[2]:ne;for(i=e.length>3&&"function"==typeof i?(o--,i):ne,a&&vi(n[0],n[1],a)&&(i=3>o?ne:i,o=1),t=zc(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}function Ao(e,t){return function(n,r){if(null==n)return n;if(!xs(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=zc(n);(t?i--:++i<o)&&r(a[i],i,a)!==!1;);
return n}}function Mo(e){return function(t,n,r){for(var o=-1,i=zc(t),a=r(t),s=a.length;s--;){var u=a[e?s:++o];if(n(i[u],u,i)===!1)break}return t}}function Bo(e,t,n){function r(){var t=this&&this!==Wn&&this instanceof r?i:e;return t.apply(o?n:this,arguments)}var o=t&ue,i=Do(e);return r}function Po(e){return function(t){t=iu(t);var n=F(t)?Y(t):ne,r=n?n[0]:t.charAt(0),o=n?po(n,1).join(""):t.slice(1);return r[e]()+o}}function Lo(e){return function(t){return f(rc(Nu(t).replace(En,"")),e,"")}}function Do(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Bn(e.prototype),r=e.apply(n,t);return Is(r)?r:n}}function Io(e,t,n){function r(){for(var a=arguments.length,s=Lc(a),u=a,c=ri(r);u--;)s[u]=arguments[u];var l=3>a&&s[0]!==c&&s[a-1]!==c?[]:K(s,c);if(a-=l.length,n>a)return Ko(e,t,zo,r.placeholder,ne,s,l,ne,ne,n-a);var d=this&&this!==Wn&&this instanceof r?o:e;return i(d,this,s)}var o=Do(e);return r}function No(e){return function(t,n,r){var o=zc(t);if(!xs(t)){var i=oi(n,3);t=bu(t),n=function(e){return i(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[i?t[a]:a]:ne}}function Vo(e){return Wr(function(t){t=Hn(t,1);var n=t.length,r=n,o=b.prototype.thru;for(e&&t.reverse();r--;){var i=t[r];if("function"!=typeof i)throw new $c(ie);if(o&&!a&&"wrapper"==ni(i))var a=new b([],!0)}for(r=a?r:n;++r<n;){i=t[r];var s=ni(i),u="wrapper"==s?Ql(i):ne;a=u&&wi(u[0])&&u[1]==(fe|de|he|ge)&&!u[4].length&&1==u[9]?a[ni(u[0])].apply(a,u[3]):1==i.length&&wi(i)?a[s]():a.thru(i)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&$d(r)&&r.length>=oe)return a.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}})}function zo(e,t,n,r,o,i,a,s,u,c){function l(){for(var v=arguments.length,b=Lc(v),y=v;y--;)b[y]=arguments[y];if(m)var w=ri(l),_=V(b,w);if(r&&(b=Co(b,r,o,m)),i&&(b=xo(b,i,a,m)),v-=_,m&&c>v){var k=K(b,w);return Ko(e,t,zo,l.placeholder,n,b,k,s,u,c-v)}var C=p?n:this,x=h?C[e]:e;return v=b.length,s?b=Oi(b,s):f&&v>1&&b.reverse(),d&&v>u&&(b.length=u),this&&this!==Wn&&this instanceof l&&(x=g||Do(x)),x.apply(C,b)}var d=t&fe,p=t&ue,h=t&ce,m=t&(de|pe),f=t&ve,g=h?ne:Do(e);return l}function Ro(e,t){return function(n,r){return fr(n,e,t(r),{})}}function Fo(e,t){return function(n,r){var o;if(n===ne&&r===ne)return t;if(n!==ne&&(o=n),r!==ne){if(o===ne)return r;"string"==typeof n||"string"==typeof r?(n=eo(n),r=eo(r)):(n=Xr(n),r=Xr(r)),o=e(n,r)}return o}}function $o(e){return Wr(function(t){return t=1==t.length&&$d(t[0])?h(t[0],P(oi())):h(Hn(t,1),P(oi())),Wr(function(n){var r=this;return e(t,function(e){return i(e,r,n)})})})}function Uo(e,t){t=t===ne?" ":eo(t);var n=t.length;if(2>n)return n?Hr(t,e):t;var r=Hr(t,hl(e/Q(t)));return F(t)?po(Y(r),0,e).join(""):r.slice(0,e)}function qo(e,t,n,r){function o(){for(var t=-1,u=arguments.length,c=-1,l=r.length,d=Lc(l+u),p=this&&this!==Wn&&this instanceof o?s:e;++c<l;)d[c]=r[c];for(;u--;)d[c++]=arguments[++t];return i(p,a?n:this,d)}var a=t&ue,s=Do(e);return o}function Ho(e){return function(t,n,r){return r&&"number"!=typeof r&&vi(t,n,r)&&(n=r=ne),t=Xs(t),n===ne?(n=t,t=0):n=Xs(n),r=r===ne?n>t?1:-1:Xs(r),qr(t,n,r,e)}}function Wo(e){return function(t,n){return("string"!=typeof t||"string"!=typeof n)&&(t=nu(t),n=nu(n)),e(t,n)}}function Ko(e,t,n,r,o,i,a,s,u,c){var l=t&de,d=l?a:ne,p=l?ne:a,h=l?i:ne,m=l?ne:i;t|=l?he:me,t&=~(l?me:he),t&le||(t&=~(ue|ce));var f=[e,t,o,h,d,m,p,s,u,c],g=n.apply(ne,f);return wi(e)&&td(g,f),g.placeholder=r,rd(g,e,t)}function Go(e){var t=Vc[e];return function(e,n){if(e=nu(e),n=_l(eu(n),292)){var r=(iu(e)+"e").split("e"),o=t(r[0]+"e"+(+r[1]+n));return r=(iu(o)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function Jo(e){return function(t){var n=Xl(t);return n==$e?H(t):n==Ke?J(t):B(t,e(t))}}function Qo(e,t,n,r,o,i,a,s){var u=t&ce;if(!u&&"function"!=typeof e)throw new $c(ie);var c=r?r.length:0;if(c||(t&=~(he|me),r=o=ne),a=a===ne?a:wl(eu(a),0),s=s===ne?s:eu(s),c-=o?o.length:0,t&me){var l=r,d=o;r=o=ne}var p=u?ne:Ql(e),h=[e,t,n,r,o,l,d,i,a,s];if(p&&ji(h,p),e=h[0],t=h[1],n=h[2],r=h[3],o=h[4],s=h[9]=null==h[9]?u?0:e.length:wl(h[9]-c,0),!s&&t&(de|pe)&&(t&=~(de|pe)),t&&t!=ue)m=t==de||t==pe?Io(e,t,s):t!=he&&t!=(ue|he)||o.length?zo.apply(ne,h):qo(e,t,n,r);else var m=Bo(e,t,n);var f=p?Kl:td;return rd(f(m,h),e,t)}function Yo(e,t,n,r,o,i){var a=o&ye,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,d=!0,p=o&be?new cn:ne;for(i.set(e,t),i.set(t,e);++l<s;){var h=e[l],m=t[l];if(r)var f=a?r(m,h,l,t,e,i):r(h,m,l,e,t,i);if(f!==ne){if(f)continue;d=!1;break}if(p){if(!v(t,function(e,t){return p.has(t)||h!==e&&!n(h,e,r,o,i)?void 0:p.add(t)})){d=!1;break}}else if(h!==m&&!n(h,m,r,o,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function Zo(e,t,n,r,o,i,a){switch(n){case Xe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ze:return e.byteLength==t.byteLength&&r(new rl(e),new rl(t))?!0:!1;case Ne:case Ve:case Ue:return ks(+e,+t);case ze:return e.name==t.name&&e.message==t.message;case We:case Ge:return e==t+"";case $e:var s=H;case Ke:var u=i&ye;if(s||(s=G),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;i|=be,a.set(e,t);var l=Yo(s(e),s(t),r,o,i,a);return a.delete(e),l;case Je:if(Fl)return Fl.call(e)==Fl.call(t)}return!1}function Xo(e,t,n,r,o,i){var a=o&ye,s=bu(e),u=s.length,c=bu(t),l=c.length;if(u!=l&&!a)return!1;for(var d=u;d--;){var p=s[d];if(!(a?p in t:Jc.call(t,p)))return!1}var h=i.get(e);if(h&&i.get(t))return h==t;var m=!0;i.set(e,t),i.set(t,e);for(var f=a;++d<u;){p=s[d];var g=e[p],v=t[p];if(r)var b=a?r(v,g,p,t,e,i):r(g,v,p,e,t,i);if(!(b===ne?g===v||n(g,v,r,o,i):b)){m=!1;break}f||(f="constructor"==p)}if(m&&!f){var y=e.constructor,w=t.constructor;y!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w)&&(m=!1)}return i.delete(e),i.delete(t),m}function ei(e){return or(e,bu,Yl)}function ti(e){return or(e,yu,Zl)}function ni(e){for(var t=e.name+"",n=Ll[t],r=Jc.call(Ll,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function ri(e){var t=Jc.call(n,"placeholder")?n:e;return t.placeholder}function oi(){var e=n.iteratee||cc;return e=e===cc?Tr:e,arguments.length?e(arguments[0],arguments[1]):e}function ii(e,t){var n=e.__data__;return yi(t)?n["string"==typeof t?"string":"hash"]:n.map}function ai(e){for(var t=bu(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Ci(o)]}return t}function si(e,t){var n=R(e,t);return Cr(n)?n:ne}function ui(e,t,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=_l(t,e+a);break;case"takeRight":e=wl(e,t-a)}}return{start:e,end:t}}function ci(e){var t=e.match(Ot);return t?t[1].split(At):[]}function li(e,t,n){t=bi(t,e)?[t]:lo(t);for(var r,o=-1,i=t.length;++o<i;){var a=Ai(t[o]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}if(r)return r;var i=e?e.length:0;return!!i&&Ds(i)&&gi(a,i)&&($d(e)||Cs(e))}function di(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Jc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function pi(e){return"function"!=typeof e.constructor||ki(e)?{}:Bn(ol(e))}function hi(e,t,n,r){var o=e.constructor;switch(t){case Ze:return mo(e);case Ne:case Ve:return new o(+e);case Xe:return fo(e,r);case et:case tt:case nt:case rt:case ot:case it:case at:case st:case ut:return wo(e,r);case $e:return go(e,r,n);case Ue:case Ge:return new o(e);case We:return vo(e);case Ke:return bo(e,r,n);case Je:return yo(e)}}function mi(e,t){var n=t.length,r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Et,"{\n/* [wrapped with "+t+"] */\n")}function fi(e){return $d(e)||Cs(e)||!!(cl&&e&&e[cl])}function gi(e,t){return t=null==t?Ee:t,!!t&&("number"==typeof e||Rt.test(e))&&e>-1&&e%1==0&&t>e}function vi(e,t,n){if(!Is(n))return!1;var r=typeof t;return("number"==r?xs(n)&&gi(t,n.length):"string"==r&&t in n)?ks(n[t],e):!1}function bi(e,t){if($d(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||Gs(e)?!0:wt.test(e)||!yt.test(e)||null!=t&&e in zc(t)}function yi(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function wi(e){var t=ni(e),r=n[t];if("function"!=typeof r||!(t in T.prototype))return!1;if(e===r)return!0;var o=Ql(r);return!!o&&e===o[0]}function _i(e){return!!Kc&&Kc in e}function ki(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Hc;return e===n}function Ci(e){return e===e&&!Is(e)}function xi(e,t){return function(n){return null==n?!1:n[e]===t&&(t!==ne||e in zc(n))}}function ji(e,t){var n=e[1],r=t[1],o=n|r,i=(ue|ce|fe)>o,a=r==fe&&n==de||r==fe&&n==ge&&e[7].length<=t[8]||r==(fe|ge)&&t[7].length<=t[8]&&n==de;if(!i&&!a)return e;r&ue&&(e[2]=t[2],o|=n&ue?0:le);var s=t[3];if(s){var u=e[3];e[3]=u?Co(u,s,t[4]):s,e[4]=u?K(e[3],se):t[4]}return s=t[5],s&&(u=e[5],e[5]=u?xo(u,s,t[6]):s,e[6]=u?K(e[5],se):t[6]),s=t[7],s&&(e[7]=s),r&fe&&(e[8]=null==e[8]?t[8]:_l(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function Si(e,t,n,r,o,i){return Is(e)&&Is(t)&&(i.set(t,e),Lr(e,t,ne,Si,i),i.delete(t)),e}function Ti(e){var t=[];if(null!=e)for(var n in zc(e))t.push(n);return t}function Ei(e,t){return 1==t.length?e:Yn(e,Gr(t,0,-1))}function Oi(e,t){for(var n=e.length,r=_l(t.length,n),o=jo(e);r--;){var i=t[r];e[r]=gi(i,n)?o[i]:ne}return e}function Ai(e){if("string"==typeof e||Gs(e))return e;var t=e+"";return"0"==t&&1/e==-Te?"-0":t}function Mi(e){if(null!=e){try{return Gc.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Bi(e,t){return s(Le,function(n){var r="_."+n[0];t&n[1]&&!d(e,r)&&e.push(r)}),e.sort()}function Pi(e){if(e instanceof T)return e.clone();var t=new b(e.__wrapped__,e.__chain__);return t.__actions__=jo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Li(e,t,n){t=(n?vi(e,t,n):t===ne)?1:wl(eu(t),0);var r=e?e.length:0;if(!r||1>t)return[];for(var o=0,i=0,a=Lc(hl(r/t));r>o;)a[i++]=Gr(e,o,o+=t);return a}function Di(e){for(var t=-1,n=e?e.length:0,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o}function Ii(){for(var e=arguments.length,t=Lc(e?e-1:0),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return e?m($d(n)?jo(n):[n],Hn(t,1)):[]}function Ni(e,t,n){var r=e?e.length:0;return r?(t=n||t===ne?1:eu(t),Gr(e,0>t?0:t,r)):[]}function Vi(e,t,n){var r=e?e.length:0;return r?(t=n||t===ne?1:eu(t),t=r-t,Gr(e,0,0>t?0:t)):[]}function zi(e,t){return e&&e.length?oo(e,oi(t,3),!0,!0):[]}function Ri(e,t){return e&&e.length?oo(e,oi(t,3),!0):[]}function Fi(e,t,n,r){var o=e?e.length:0;return o?(n&&"number"!=typeof n&&vi(e,t,n)&&(n=0,r=o),Fn(e,t,n,r)):[]}function $i(e,t,n){var r=e?e.length:0;if(!r)return-1;var o=null==n?0:eu(n);return 0>o&&(o=wl(r+o,0)),_(e,oi(t,3),o)}function Ui(e,t,n){var r=e?e.length:0;if(!r)return-1;var o=r-1;return n!==ne&&(o=eu(n),o=0>n?wl(r+o,0):_l(o,r-1)),_(e,oi(t,3),o,!0)}function qi(e){var t=e?e.length:0;return t?Hn(e,1):[]}function Hi(e){var t=e?e.length:0;return t?Hn(e,Te):[]}function Wi(e,t){var n=e?e.length:0;return n?(t=t===ne?1:eu(t),Hn(e,t)):[]}function Ki(e){for(var t=-1,n=e?e.length:0,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r}function Gi(e){return e&&e.length?e[0]:ne}function Ji(e,t,n){var r=e?e.length:0;if(!r)return-1;var o=null==n?0:eu(n);return 0>o&&(o=wl(r+o,0)),k(e,t,o)}function Qi(e){var t=e?e.length:0;return t?Gr(e,0,-1):[]}function Yi(e,t){return e?bl.call(e,t):""}function Zi(e){var t=e?e.length:0;return t?e[t-1]:ne}function Xi(e,t,n){var r=e?e.length:0;if(!r)return-1;var o=r;if(n!==ne&&(o=eu(n),o=(0>o?wl(r+o,0):_l(o,r-1))+1),t!==t)return _(e,x,o-1,!0);for(;o--;)if(e[o]===t)return o;return-1}function ea(e,t){return e&&e.length?Ir(e,eu(t)):ne}function ta(e,t){return e&&e.length&&t&&t.length?Fr(e,t):e}function na(e,t,n){return e&&e.length&&t&&t.length?Fr(e,t,oi(n,2)):e}function ra(e,t,n){return e&&e.length&&t&&t.length?Fr(e,t,ne,n):e}function oa(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=oi(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return $r(e,o),n}function ia(e){return e?xl.call(e):e}function aa(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&vi(e,t,n)?(t=0,n=r):(t=null==t?0:eu(t),n=n===ne?r:eu(n)),Gr(e,t,n)):[]}function sa(e,t){return Qr(e,t)}function ua(e,t,n){return Yr(e,t,oi(n,2))}function ca(e,t){var n=e?e.length:0;if(n){var r=Qr(e,t);if(n>r&&ks(e[r],t))return r}return-1}function la(e,t){return Qr(e,t,!0)}function da(e,t,n){return Yr(e,t,oi(n,2),!0)}function pa(e,t){var n=e?e.length:0;if(n){var r=Qr(e,t,!0)-1;if(ks(e[r],t))return r}return-1}function ha(e){return e&&e.length?Zr(e):[]}function ma(e,t){return e&&e.length?Zr(e,oi(t,2)):[]}function fa(e){var t=e?e.length:0;return t?Gr(e,1,t):[]}function ga(e,t,n){return e&&e.length?(t=n||t===ne?1:eu(t),Gr(e,0,0>t?0:t)):[]}function va(e,t,n){var r=e?e.length:0;return r?(t=n||t===ne?1:eu(t),t=r-t,Gr(e,0>t?0:t,r)):[]}function ba(e,t){return e&&e.length?oo(e,oi(t,3),!1,!0):[]}function ya(e,t){return e&&e.length?oo(e,oi(t,3)):[]}function wa(e){return e&&e.length?to(e):[]}function _a(e,t){return e&&e.length?to(e,oi(t,2)):[]}function ka(e,t){return e&&e.length?to(e,ne,t):[]}function Ca(e){if(!e||!e.length)return[];var t=0;return e=l(e,function(e){return js(e)?(t=wl(e.length,t),!0):void 0}),M(t,function(t){return h(e,S(t))})}function xa(e,t){if(!e||!e.length)return[];var n=Ca(e);return null==t?n:h(n,function(e){return i(t,ne,e)})}function ja(e,t){return so(e||[],t||[],_n)}function Sa(e,t){return so(e||[],t||[],Kr)}function Ta(e){var t=n(e);return t.__chain__=!0,t}function Ea(e,t){return t(e),e}function Oa(e,t){return t(e)}function Aa(){return Ta(this)}function Ma(){return new b(this.value(),this.__chain__)}function Ba(){this.__values__===ne&&(this.__values__=Zs(this.value()));var e=this.__index__>=this.__values__.length,t=e?ne:this.__values__[this.__index__++];return{done:e,value:t}}function Pa(){return this}function La(e){for(var t,n=this;n instanceof r;){var o=Pi(n);o.__index__=0,o.__values__=ne,t?i.__wrapped__=o:t=o;var i=o;n=n.__wrapped__}return i.__wrapped__=e,t}function Da(){var e=this.__wrapped__;if(e instanceof T){var t=e;return this.__actions__.length&&(t=new T(this)),t=t.reverse(),t.__actions__.push({func:Oa,args:[ia],thisArg:ne}),new b(t,this.__chain__)}return this.thru(ia)}function Ia(){return io(this.__wrapped__,this.__actions__)}function Na(e,t,n){var r=$d(e)?c:zn;return n&&vi(e,t,n)&&(t=ne),r(e,oi(t,3))}function Va(e,t){var n=$d(e)?l:qn;return n(e,oi(t,3))}function za(e,t){return Hn(Ha(e,t),1)}function Ra(e,t){return Hn(Ha(e,t),Te)}function Fa(e,t,n){return n=n===ne?1:eu(n),Hn(Ha(e,t),n)}function $a(e,t){var n=$d(e)?s:Ul;return n(e,oi(t,3))}function Ua(e,t){var n=$d(e)?u:ql;return n(e,oi(t,3))}function qa(e,t,n,r){e=xs(e)?e:Mu(e),n=n&&!r?eu(n):0;var o=e.length;return 0>n&&(n=wl(o+n,0)),Ks(e)?o>=n&&e.indexOf(t,n)>-1:!!o&&k(e,t,n)>-1}function Ha(e,t){var n=$d(e)?h:Mr;return n(e,oi(t,3))}function Wa(e,t,n,r){return null==e?[]:($d(t)||(t=null==t?[]:[t]),n=r?ne:n,$d(n)||(n=null==n?[]:[n]),Nr(e,t,n))}function Ka(e,t,n){var r=$d(e)?f:E,o=arguments.length<3;return r(e,oi(t,4),n,o,Ul)}function Ga(e,t,n){var r=$d(e)?g:E,o=arguments.length<3;return r(e,oi(t,4),n,o,ql)}function Ja(e,t){var n=$d(e)?l:qn;return n(e,cs(oi(t,3)))}function Qa(e){var t=xs(e)?e:Mu(e),n=t.length;return n>0?t[Ur(0,n-1)]:ne}function Ya(e,t,n){var r=-1,o=Zs(e),i=o.length,a=i-1;for(t=(n?vi(e,t,n):t===ne)?1:Sn(eu(t),0,i);++r<t;){var s=Ur(r,a),u=o[s];o[s]=o[r],o[r]=u}return o.length=t,o}function Za(e){return Ya(e,Me)}function Xa(e){if(null==e)return 0;if(xs(e))return Ks(e)?Q(e):e.length;var t=Xl(e);return t==$e||t==Ke?e.size:Er(e).length}function es(e,t,n){var r=$d(e)?v:Jr;return n&&vi(e,t,n)&&(t=ne),r(e,oi(t,3))}function ts(e,t){if("function"!=typeof t)throw new $c(ie);return e=eu(e),function(){return--e<1?t.apply(this,arguments):void 0}}function ns(e,t,n){return t=n?ne:t,t=e&&null==t?e.length:t,Qo(e,fe,ne,ne,ne,ne,t)}function rs(e,t){var n;if("function"!=typeof t)throw new $c(ie);return e=eu(e),function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=ne),n}}function os(e,t,n){t=n?ne:t;var r=Qo(e,de,ne,ne,ne,ne,ne,t);return r.placeholder=os.placeholder,r}function is(e,t,n){t=n?ne:t;var r=Qo(e,pe,ne,ne,ne,ne,ne,t);return r.placeholder=is.placeholder,r}function as(e,t,n){function r(t){var n=p,r=h;return p=h=ne,b=t,f=e.apply(r,n)}function o(e){return b=e,g=nd(s,t),y?r(e):f}function i(e){var n=e-v,r=e-b,o=t-n;return w?_l(o,m-r):o}function a(e){var n=e-v,r=e-b;return v===ne||n>=t||0>n||w&&r>=m}function s(){var e=Md();return a(e)?u(e):void(g=nd(s,i(e)))}function u(e){return g=ne,_&&p?r(e):(p=h=ne,f)}function c(){g!==ne&&Gl(g),b=0,p=v=h=g=ne}function l(){return g===ne?f:u(Md())}function d(){var e=Md(),n=a(e);if(p=arguments,h=this,v=e,n){if(g===ne)return o(v);if(w)return g=nd(s,t),r(v)}return g===ne&&(g=nd(s,t)),f}var p,h,m,f,g,v,b=0,y=!1,w=!1,_=!0;if("function"!=typeof e)throw new $c(ie);return t=nu(t)||0,Is(n)&&(y=!!n.leading,w="maxWait"in n,m=w?wl(nu(n.maxWait)||0,t):m,_="trailing"in n?!!n.trailing:_),d.cancel=c,d.flush=l,d}function ss(e){return Qo(e,ve)}function us(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new $c(ie);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(us.Cache||nn),n}function cs(e){if("function"!=typeof e)throw new $c(ie);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function ls(e){return rs(2,e)}function ds(e,t){if("function"!=typeof e)throw new $c(ie);return t=t===ne?t:eu(t),Wr(e,t)}function ps(e,t){if("function"!=typeof e)throw new $c(ie);return t=t===ne?0:wl(eu(t),0),Wr(function(n){var r=n[t],o=po(n,0,t);return r&&m(o,r),i(e,this,o)})}function hs(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new $c(ie);return Is(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),as(e,t,{leading:r,maxWait:t,trailing:o})}function ms(e){return ns(e,1)}function fs(e,t){return t=null==t?uc:t,Nd(t,e)}function gs(){if(!arguments.length)return[];var e=arguments[0];return $d(e)?e:[e]}function vs(e){return Tn(e,!1,!0)}function bs(e,t){return Tn(e,!1,!0,t)}function ys(e){return Tn(e,!0,!0)}function ws(e,t){return Tn(e,!0,!0,t)}function _s(e,t){return null==t||Mn(e,t,bu(t))}function ks(e,t){return e===t||e!==e&&t!==t}function Cs(e){return js(e)&&Jc.call(e,"callee")&&(!sl.call(e,"callee")||Zc.call(e)==De)}function xs(e){return null!=e&&Ds(e.length)&&!Ps(e)}function js(e){return Ns(e)&&xs(e)}function Ss(e){return e===!0||e===!1||Ns(e)&&Zc.call(e)==Ne}function Ts(e){return!!e&&1===e.nodeType&&Ns(e)&&!Hs(e)}function Es(e){if(xs(e)&&($d(e)||"string"==typeof e||"function"==typeof e.splice||qd(e)||Cs(e)))return!e.length;var t=Xl(e);if(t==$e||t==Ke)return!e.size;if(Pl||ki(e))return!yl(e).length;for(var n in e)if(Jc.call(e,n))return!1;return!0}function Os(e,t){return yr(e,t)}function As(e,t,n){n="function"==typeof n?n:ne;var r=n?n(e,t):ne;return r===ne?yr(e,t,n):!!r}function Ms(e){return Ns(e)?Zc.call(e)==ze||"string"==typeof e.message&&"string"==typeof e.name:!1}function Bs(e){return"number"==typeof e&&vl(e)}function Ps(e){var t=Is(e)?Zc.call(e):"";return t==Re||t==Fe}function Ls(e){return"number"==typeof e&&e==eu(e)}function Ds(e){return"number"==typeof e&&e>-1&&e%1==0&&Ee>=e}function Is(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ns(e){return!!e&&"object"==typeof e}function Vs(e,t){return e===t||kr(e,t,ai(t))}function zs(e,t,n){return n="function"==typeof n?n:ne,kr(e,t,ai(t),n)}function Rs(e){return qs(e)&&e!=+e}function Fs(e){if(ed(e))throw new Ic("This method is not supported with core-js. Try https://github.com/es-shims.");return Cr(e)}function $s(e){return null===e}function Us(e){return null==e}function qs(e){return"number"==typeof e||Ns(e)&&Zc.call(e)==Ue}function Hs(e){if(!Ns(e)||Zc.call(e)!=qe||U(e))return!1;var t=ol(e);if(null===t)return!0;var n=Jc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Gc.call(n)==Yc}function Ws(e){return Ls(e)&&e>=-Ee&&Ee>=e}function Ks(e){return"string"==typeof e||!$d(e)&&Ns(e)&&Zc.call(e)==Ge}function Gs(e){return"symbol"==typeof e||Ns(e)&&Zc.call(e)==Je}function Js(e){return e===ne}function Qs(e){return Ns(e)&&Xl(e)==Qe}function Ys(e){return Ns(e)&&Zc.call(e)==Ye}function Zs(e){if(!e)return[];if(xs(e))return Ks(e)?Y(e):jo(e);if(il&&e[il])return q(e[il]());var t=Xl(e),n=t==$e?H:t==Ke?G:Mu;return n(e)}function Xs(e){if(!e)return 0===e?e:0;if(e=nu(e),e===Te||e===-Te){var t=0>e?-1:1;return t*Oe}return e===e?e:0}function eu(e){var t=Xs(e),n=t%1;return t===t?n?t-n:t:0}function tu(e){return e?Sn(eu(e),0,Me):0}function nu(e){if("number"==typeof e)return e;if(Gs(e))return Ae;if(Is(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Is(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(jt,"");var n=Nt.test(e);return n||zt.test(e)?Un(e.slice(2),n?2:8):It.test(e)?Ae:+e}function ru(e){return So(e,yu(e))}function ou(e){return Sn(eu(e),-Ee,Ee)}function iu(e){return null==e?"":eo(e)}function au(e,t){var n=Bn(e);return t?xn(n,t):n}function su(e,t){return w(e,oi(t,3),Kn)}function uu(e,t){return w(e,oi(t,3),Gn)}function cu(e,t){return null==e?e:Hl(e,oi(t,3),yu)}function lu(e,t){return null==e?e:Wl(e,oi(t,3),yu)}function du(e,t){return e&&Kn(e,oi(t,3))}function pu(e,t){return e&&Gn(e,oi(t,3))}function hu(e){return null==e?[]:Qn(e,bu(e))}function mu(e){return null==e?[]:Qn(e,yu(e))}function fu(e,t,n){var r=null==e?ne:Yn(e,t);return r===ne?n:r}function gu(e,t){return null!=e&&li(e,t,dr)}function vu(e,t){return null!=e&&li(e,t,pr)}function bu(e){return xs(e)?bn(e):Er(e)}function yu(e){return xs(e)?bn(e,!0):Or(e)}function wu(e,t){var n={};return t=oi(t,3),Kn(e,function(e,r,o){n[t(e,r,o)]=e}),n}function _u(e,t){var n={};return t=oi(t,3),Kn(e,function(e,r,o){n[r]=t(e,r,o)}),n}function ku(e,t){return Cu(e,cs(oi(t)))}function Cu(e,t){return null==e?{}:zr(e,ti(e),oi(t))}function xu(e,t,n){t=bi(t,e)?[t]:lo(t);var r=-1,o=t.length;for(o||(e=ne,o=1);++r<o;){var i=null==e?ne:e[Ai(t[r])];i===ne&&(r=o,i=n),e=Ps(i)?i.call(e):i}return e}function ju(e,t,n){return null==e?e:Kr(e,t,n)}function Su(e,t,n,r){return r="function"==typeof r?r:ne,null==e?e:Kr(e,t,n,r)}function Tu(e,t,n){var r=$d(e)||Jd(e);if(t=oi(t,4),null==n)if(r||Is(e)){var o=e.constructor;n=r?$d(e)?new o:[]:Ps(o)?Bn(ol(e)):{}}else n={};return(r?s:Kn)(e,function(e,r,o){return t(n,e,r,o)}),n}function Eu(e,t){return null==e?!0:no(e,t)}function Ou(e,t,n){return null==e?e:ro(e,t,co(n))}function Au(e,t,n,r){return r="function"==typeof r?r:ne,null==e?e:ro(e,t,co(n),r)}function Mu(e){return e?L(e,bu(e)):[]}function Bu(e){return null==e?[]:L(e,yu(e))}function Pu(e,t,n){return n===ne&&(n=t,t=ne),n!==ne&&(n=nu(n),n=n===n?n:0),t!==ne&&(t=nu(t),t=t===t?t:0),Sn(nu(e),t,n)}function Lu(e,t,n){return t=Xs(t),n===ne?(n=t,t=0):n=Xs(n),e=nu(e),hr(e,t,n)}function Du(e,t,n){if(n&&"boolean"!=typeof n&&vi(e,t,n)&&(t=n=ne),n===ne&&("boolean"==typeof t?(n=t,t=ne):"boolean"==typeof e&&(n=e,e=ne)),e===ne&&t===ne?(e=0,t=1):(e=Xs(e),t===ne?(t=e,e=0):t=Xs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Cl();return _l(e+o*(t-e+$n("1e-"+((o+"").length-1))),t)}return Ur(e,t)}function Iu(e){return _p(iu(e).toLowerCase())}function Nu(e){return e=iu(e),e&&e.replace(Ft,ir).replace(On,"")}function Vu(e,t,n){e=iu(e),t=eo(t);var r=e.length;n=n===ne?r:Sn(eu(n),0,r);var o=n;return n-=t.length,n>=0&&e.slice(n,o)==t}function zu(e){return e=iu(e),e&&ft.test(e)?e.replace(ht,ar):e}function Ru(e){return e=iu(e),e&&xt.test(e)?e.replace(Ct,"\\$&"):e}function Fu(e,t,n){e=iu(e),t=eu(t);var r=t?Q(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return Uo(ml(o),n)+e+Uo(hl(o),n)}function $u(e,t,n){e=iu(e),t=eu(t);var r=t?Q(e):0;return t&&t>r?e+Uo(t-r,n):e}function Uu(e,t,n){e=iu(e),t=eu(t);var r=t?Q(e):0;return t&&t>r?Uo(t-r,n)+e:e}function qu(e,t,n){return n||null==t?t=0:t&&(t=+t),e=iu(e).replace(jt,""),kl(e,t||(Dt.test(e)?16:10))}function Hu(e,t,n){return t=(n?vi(e,t,n):t===ne)?1:eu(t),Hr(iu(e),t)}function Wu(){var e=arguments,t=iu(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function Ku(e,t,n){return n&&"number"!=typeof n&&vi(e,t,n)&&(t=n=ne),(n=n===ne?Me:n>>>0)?(e=iu(e),e&&("string"==typeof t||null!=t&&!Kd(t))&&(t=eo(t),!t&&F(e))?po(Y(e),0,n):e.split(t,n)):[]}function Gu(e,t,n){return e=iu(e),n=Sn(eu(n),0,e.length),t=eo(t),e.slice(n,n+t.length)==t}function Ju(e,t,r){var o=n.templateSettings;r&&vi(e,t,r)&&(t=ne),e=iu(e),t=ep({},t,o,yn);var i,a,s=ep({},t.imports,o.imports,yn),u=bu(s),c=L(s,u),l=0,d=t.interpolate||$t,p="__p += '",h=Rc((t.escape||$t).source+"|"+d.source+"|"+(d===bt?Pt:$t).source+"|"+(t.evaluate||$t).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Dn+"]")+"\n";e.replace(h,function(t,n,r,o,s,u){return r||(r=o),p+=e.slice(l,u).replace(Ut,z),n&&(i=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),p+="';\n";var f=t.variable;f||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(ct,""):p).replace(lt,"$1").replace(dt,"$1;"),p="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=kp(function(){return Nc(u,m+"return "+p).apply(ne,c)});if(g.source=p,Ms(g))throw g;return g}function Qu(e){return iu(e).toLowerCase()}function Yu(e){return iu(e).toUpperCase()}function Zu(e,t,n){if(e=iu(e),e&&(n||t===ne))return e.replace(jt,"");if(!e||!(t=eo(t)))return e;var r=Y(e),o=Y(t),i=I(r,o),a=N(r,o)+1;return po(r,i,a).join("")}function Xu(e,t,n){if(e=iu(e),e&&(n||t===ne))return e.replace(Tt,"");if(!e||!(t=eo(t)))return e;var r=Y(e),o=N(r,Y(t))+1;return po(r,0,o).join("")}function ec(e,t,n){if(e=iu(e),e&&(n||t===ne))return e.replace(St,"");if(!e||!(t=eo(t)))return e;var r=Y(e),o=I(r,Y(t));return po(r,o).join("")}function tc(e,t){var n=we,r=_e;if(Is(t)){var o="separator"in t?t.separator:o;n="length"in t?eu(t.length):n,r="omission"in t?eo(t.omission):r}e=iu(e);var i=e.length;if(F(e)){var a=Y(e);i=a.length}if(n>=i)return e;var s=n-Q(r);if(1>s)return r;var u=a?po(a,0,s).join(""):e.slice(0,s);if(o===ne)return u+r;if(a&&(s+=u.length-s),Kd(o)){if(e.slice(s).search(o)){var c,l=u;for(o.global||(o=Rc(o.source,iu(Lt.exec(o))+"g")),o.lastIndex=0;c=o.exec(l);)var d=c.index;u=u.slice(0,d===ne?s:d)}}else if(e.indexOf(eo(o),s)!=s){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+r}function nc(e){return e=iu(e),e&&mt.test(e)?e.replace(pt,sr):e}function rc(e,t,n){return e=iu(e),t=n?ne:t,t===ne?$(e)?ee(e):y(e):e.match(t)||[]}function oc(e){var t=e?e.length:0,n=oi();return e=t?h(e,function(e){if("function"!=typeof e[1])throw new $c(ie);return[n(e[0]),e[1]]}):[],Wr(function(n){for(var r=-1;++r<t;){var o=e[r];if(i(o[0],this,n))return i(o[1],this,n)}})}function ic(e){return An(Tn(e,!0))}function ac(e){return function(){return e}}function sc(e,t){return null==e||e!==e?t:e}function uc(e){return e}function cc(e){return Tr("function"==typeof e?e:Tn(e,!0))}function lc(e){return Br(Tn(e,!0))}function dc(e,t){return Pr(e,Tn(t,!0))}function pc(e,t,n){var r=bu(t),o=Qn(t,r);null!=n||Is(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=Qn(t,bu(t)));var i=!(Is(n)&&"chain"in n&&!n.chain),a=Ps(e);return s(o,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=jo(this.__actions__);return o.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,m([this.value()],arguments))})}),e}function hc(){return Wn._===this&&(Wn._=Xc),this}function mc(){}function fc(e){return e=eu(e),Wr(function(t){return Ir(t,e)})}function gc(e){return bi(e)?S(Ai(e)):Rr(e)}function vc(e){return function(t){return null==e?ne:Yn(e,t)}}function bc(){return[]}function yc(){return!1}function wc(){return{}}function _c(){return""}function kc(){return!0}function Cc(e,t){if(e=eu(e),1>e||e>Ee)return[];var n=Me,r=_l(e,Me);t=oi(t),e-=Me;for(var o=M(r,t);++n<e;)t(n);return o}function xc(e){return $d(e)?h(e,Ai):Gs(e)?[e]:jo(od(e))}function jc(e){var t=++Qc;return iu(e)+t}function Sc(e){return e&&e.length?Rn(e,uc,lr):ne}function Tc(e,t){return e&&e.length?Rn(e,oi(t,2),lr):ne}function Ec(e){return j(e,uc)}function Oc(e,t){return j(e,oi(t,2))}function Ac(e){return e&&e.length?Rn(e,uc,Ar):ne}function Mc(e,t){return e&&e.length?Rn(e,oi(t,2),Ar):ne}function Bc(e){return e&&e.length?A(e,uc):0}function Pc(e,t){return e&&e.length?A(e,oi(t,2)):0}t=t?ur.defaults(Wn.Object(),t,ur.pick(Wn,Ln)):Wn;var Lc=t.Array,Dc=t.Date,Ic=t.Error,Nc=t.Function,Vc=t.Math,zc=t.Object,Rc=t.RegExp,Fc=t.String,$c=t.TypeError,Uc=Lc.prototype,qc=Nc.prototype,Hc=zc.prototype,Wc=t["__core-js_shared__"],Kc=function(){var e=/[^.]+$/.exec(Wc&&Wc.keys&&Wc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Gc=qc.toString,Jc=Hc.hasOwnProperty,Qc=0,Yc=Gc.call(zc),Zc=Hc.toString,Xc=Wn._,el=Rc("^"+Gc.call(Jc).replace(Ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tl=Jn?t.Buffer:ne,nl=t.Symbol,rl=t.Uint8Array,ol=W(zc.getPrototypeOf,zc),il=nl?nl.iterator:ne,al=zc.create,sl=Hc.propertyIsEnumerable,ul=Uc.splice,cl=nl?nl.isConcatSpreadable:ne,ll=t.clearTimeout!==Wn.clearTimeout&&t.clearTimeout,dl=Dc&&Dc.now!==Wn.Date.now&&Dc.now,pl=t.setTimeout!==Wn.setTimeout&&t.setTimeout,hl=Vc.ceil,ml=Vc.floor,fl=zc.getOwnPropertySymbols,gl=tl?tl.isBuffer:ne,vl=t.isFinite,bl=Uc.join,yl=W(zc.keys,zc),wl=Vc.max,_l=Vc.min,kl=t.parseInt,Cl=Vc.random,xl=Uc.reverse,jl=si(t,"DataView"),Sl=si(t,"Map"),Tl=si(t,"Promise"),El=si(t,"Set"),Ol=si(t,"WeakMap"),Al=si(zc,"create"),Ml=function(){var e=si(zc,"defineProperty"),t=si.name;return t&&t.length>2?e:ne}(),Bl=Ol&&new Ol,Pl=!sl.call({valueOf:1},"valueOf"),Ll={},Dl=Mi(jl),Il=Mi(Sl),Nl=Mi(Tl),Vl=Mi(El),zl=Mi(Ol),Rl=nl?nl.prototype:ne,Fl=Rl?Rl.valueOf:ne,$l=Rl?Rl.toString:ne;n.templateSettings={escape:gt,evaluate:vt,interpolate:bt,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,b.prototype=Bn(r.prototype),b.prototype.constructor=b,T.prototype=Bn(r.prototype),T.prototype.constructor=T,qt.prototype.clear=Ht,qt.prototype.delete=Wt,qt.prototype.get=Kt,qt.prototype.has=Gt,qt.prototype.set=Jt,Qt.prototype.clear=Yt,Qt.prototype.delete=Zt,Qt.prototype.get=Xt,Qt.prototype.has=en,Qt.prototype.set=tn,nn.prototype.clear=rn,nn.prototype.delete=on,nn.prototype.get=an,nn.prototype.has=sn,nn.prototype.set=un,cn.prototype.add=cn.prototype.push=ln,cn.prototype.has=dn,pn.prototype.clear=hn,pn.prototype.delete=mn,pn.prototype.get=fn,pn.prototype.has=gn,pn.prototype.set=vn;var Ul=Ao(Kn),ql=Ao(Gn,!0),Hl=Mo(),Wl=Mo(!0),Kl=Bl?function(e,t){return Bl.set(e,t),e}:uc,Gl=ll||function(e){return Wn.clearTimeout(e)},Jl=El&&1/G(new El([,-0]))[1]==Te?function(e){return new El(e)}:mc,Ql=Bl?function(e){return Bl.get(e)}:mc,Yl=fl?W(fl,zc):bc,Zl=fl?function(e){for(var t=[];e;)m(t,Yl(e)),e=ol(e);return t}:bc,Xl=cr;(jl&&Xl(new jl(new ArrayBuffer(1)))!=Xe||Sl&&Xl(new Sl)!=$e||Tl&&Xl(Tl.resolve())!=He||El&&Xl(new El)!=Ke||Ol&&Xl(new Ol)!=Qe)&&(Xl=function(e){var t=Zc.call(e),n=t==qe?e.constructor:ne,r=n?Mi(n):ne;if(r)switch(r){case Dl:return Xe;case Il:return $e;case Nl:return He;case Vl:return Ke;case zl:return Qe}return t});var ed=Wc?Ps:yc,td=function(){var e=0,t=0;return function(n,r){var o=Md(),i=Ce-(o-t);if(t=o,i>0){if(++e>=ke)return n}else e=0;return Kl(n,r)}}(),nd=pl||function(e,t){return Wn.setTimeout(e,t)},rd=Ml?function(e,t,n){var r=t+"";return Ml(e,"toString",{configurable:!0,enumerable:!1,value:ac(mi(r,Bi(ci(r),n)))})}:uc,od=us(function(e){e=iu(e);
var t=[];return _t.test(e)&&t.push(""),e.replace(kt,function(e,n,r,o){t.push(r?o.replace(Bt,"$1"):n||e)}),t}),id=Wr(function(e,t){return js(e)?Vn(e,Hn(t,1,js,!0)):[]}),ad=Wr(function(e,t){var n=Zi(t);return js(n)&&(n=ne),js(e)?Vn(e,Hn(t,1,js,!0),oi(n,2)):[]}),sd=Wr(function(e,t){var n=Zi(t);return js(n)&&(n=ne),js(e)?Vn(e,Hn(t,1,js,!0),ne,n):[]}),ud=Wr(function(e){var t=h(e,uo);return t.length&&t[0]===e[0]?mr(t):[]}),cd=Wr(function(e){var t=Zi(e),n=h(e,uo);return t===Zi(n)?t=ne:n.pop(),n.length&&n[0]===e[0]?mr(n,oi(t,2)):[]}),ld=Wr(function(e){var t=Zi(e),n=h(e,uo);return t===Zi(n)?t=ne:n.pop(),n.length&&n[0]===e[0]?mr(n,ne,t):[]}),dd=Wr(ta),pd=Wr(function(e,t){t=Hn(t,1);var n=e?e.length:0,r=jn(e,t);return $r(e,h(t,function(e){return gi(e,n)?+e:e}).sort(_o)),r}),hd=Wr(function(e){return to(Hn(e,1,js,!0))}),md=Wr(function(e){var t=Zi(e);return js(t)&&(t=ne),to(Hn(e,1,js,!0),oi(t,2))}),fd=Wr(function(e){var t=Zi(e);return js(t)&&(t=ne),to(Hn(e,1,js,!0),ne,t)}),gd=Wr(function(e,t){return js(e)?Vn(e,t):[]}),vd=Wr(function(e){return ao(l(e,js))}),bd=Wr(function(e){var t=Zi(e);return js(t)&&(t=ne),ao(l(e,js),oi(t,2))}),yd=Wr(function(e){var t=Zi(e);return js(t)&&(t=ne),ao(l(e,js),ne,t)}),wd=Wr(Ca),_d=Wr(function(e){var t=e.length,n=t>1?e[t-1]:ne;return n="function"==typeof n?(e.pop(),n):ne,xa(e,n)}),kd=Wr(function(e){e=Hn(e,1);var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return jn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof T&&gi(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Oa,args:[o],thisArg:ne}),new b(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ne),e})):this.thru(o)}),Cd=Eo(function(e,t,n){Jc.call(e,n)?++e[n]:e[n]=1}),xd=No($i),jd=No(Ui),Sd=Eo(function(e,t,n){Jc.call(e,n)?e[n].push(t):e[n]=[t]}),Td=Wr(function(e,t,n){var r=-1,o="function"==typeof t,a=bi(t),s=xs(e)?Lc(e.length):[];return Ul(e,function(e){var u=o?t:a&&null!=e?e[t]:ne;s[++r]=u?i(u,e,n):gr(e,t,n)}),s}),Ed=Eo(function(e,t,n){e[n]=t}),Od=Eo(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ad=Wr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&vi(e,t[0],t[1])?t=[]:n>2&&vi(t[0],t[1],t[2])&&(t=[t[0]]),Nr(e,Hn(t,1),[])}),Md=dl||function(){return Wn.Date.now()},Bd=Wr(function(e,t,n){var r=ue;if(n.length){var o=K(n,ri(Bd));r|=he}return Qo(e,r,t,n,o)}),Pd=Wr(function(e,t,n){var r=ue|ce;if(n.length){var o=K(n,ri(Pd));r|=he}return Qo(t,r,e,n,o)}),Ld=Wr(function(e,t){return Pn(e,1,t)}),Dd=Wr(function(e,t,n){return Pn(e,nu(t)||0,n)});us.Cache=nn;var Id=Wr(function(e,t){t=1==t.length&&$d(t[0])?h(t[0],P(oi())):h(Hn(t,1),P(oi()));var n=t.length;return Wr(function(r){for(var o=-1,a=_l(r.length,n);++o<a;)r[o]=t[o].call(this,r[o]);return i(e,this,r)})}),Nd=Wr(function(e,t){var n=K(t,ri(Nd));return Qo(e,he,ne,t,n)}),Vd=Wr(function(e,t){var n=K(t,ri(Vd));return Qo(e,me,ne,t,n)}),zd=Wr(function(e,t){return Qo(e,ge,ne,ne,ne,Hn(t,1))}),Rd=Wo(lr),Fd=Wo(function(e,t){return e>=t}),$d=Lc.isArray,Ud=Zn?P(Zn):vr,qd=gl||yc,Hd=Xn?P(Xn):br,Wd=er?P(er):_r,Kd=tr?P(tr):xr,Gd=nr?P(nr):jr,Jd=rr?P(rr):Sr,Qd=Wo(Ar),Yd=Wo(function(e,t){return t>=e}),Zd=Oo(function(e,t){if(Pl||ki(t)||xs(t))return void So(t,bu(t),e);for(var n in t)Jc.call(t,n)&&_n(e,n,t[n])}),Xd=Oo(function(e,t){So(t,yu(t),e)}),ep=Oo(function(e,t,n,r){So(t,yu(t),e,r)}),tp=Oo(function(e,t,n,r){So(t,bu(t),e,r)}),np=Wr(function(e,t){return jn(e,Hn(t,1))}),rp=Wr(function(e){return e.push(ne,yn),i(ep,ne,e)}),op=Wr(function(e){return e.push(ne,Si),i(cp,ne,e)}),ip=Ro(function(e,t,n){e[t]=n},ac(uc)),ap=Ro(function(e,t,n){Jc.call(e,t)?e[t].push(n):e[t]=[n]},oi),sp=Wr(gr),up=Oo(function(e,t,n){Lr(e,t,n)}),cp=Oo(function(e,t,n,r){Lr(e,t,n,r)}),lp=Wr(function(e,t){return null==e?{}:(t=h(Hn(t,1),Ai),Vr(e,Vn(ti(e),t)))}),dp=Wr(function(e,t){return null==e?{}:Vr(e,h(Hn(t,1),Ai))}),pp=Jo(bu),hp=Jo(yu),mp=Lo(function(e,t,n){return t=t.toLowerCase(),e+(n?Iu(t):t)}),fp=Lo(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),gp=Lo(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),vp=Po("toLowerCase"),bp=Lo(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),yp=Lo(function(e,t,n){return e+(n?" ":"")+_p(t)}),wp=Lo(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),_p=Po("toUpperCase"),kp=Wr(function(e,t){try{return i(e,ne,t)}catch(e){return Ms(e)?e:new Ic(e)}}),Cp=Wr(function(e,t){return s(Hn(t,1),function(t){t=Ai(t),e[t]=Bd(e[t],e)}),e}),xp=Vo(),jp=Vo(!0),Sp=Wr(function(e,t){return function(n){return gr(n,e,t)}}),Tp=Wr(function(e,t){return function(n){return gr(e,n,t)}}),Ep=$o(h),Op=$o(c),Ap=$o(v),Mp=Ho(),Bp=Ho(!0),Pp=Fo(function(e,t){return e+t},0),Lp=Go("ceil"),Dp=Fo(function(e,t){return e/t},1),Ip=Go("floor"),Np=Fo(function(e,t){return e*t},1),Vp=Go("round"),zp=Fo(function(e,t){return e-t},0);return n.after=ts,n.ary=ns,n.assign=Zd,n.assignIn=Xd,n.assignInWith=ep,n.assignWith=tp,n.at=np,n.before=rs,n.bind=Bd,n.bindAll=Cp,n.bindKey=Pd,n.castArray=gs,n.chain=Ta,n.chunk=Li,n.compact=Di,n.concat=Ii,n.cond=oc,n.conforms=ic,n.constant=ac,n.countBy=Cd,n.create=au,n.curry=os,n.curryRight=is,n.debounce=as,n.defaults=rp,n.defaultsDeep=op,n.defer=Ld,n.delay=Dd,n.difference=id,n.differenceBy=ad,n.differenceWith=sd,n.drop=Ni,n.dropRight=Vi,n.dropRightWhile=zi,n.dropWhile=Ri,n.fill=Fi,n.filter=Va,n.flatMap=za,n.flatMapDeep=Ra,n.flatMapDepth=Fa,n.flatten=qi,n.flattenDeep=Hi,n.flattenDepth=Wi,n.flip=ss,n.flow=xp,n.flowRight=jp,n.fromPairs=Ki,n.functions=hu,n.functionsIn=mu,n.groupBy=Sd,n.initial=Qi,n.intersection=ud,n.intersectionBy=cd,n.intersectionWith=ld,n.invert=ip,n.invertBy=ap,n.invokeMap=Td,n.iteratee=cc,n.keyBy=Ed,n.keys=bu,n.keysIn=yu,n.map=Ha,n.mapKeys=wu,n.mapValues=_u,n.matches=lc,n.matchesProperty=dc,n.memoize=us,n.merge=up,n.mergeWith=cp,n.method=Sp,n.methodOf=Tp,n.mixin=pc,n.negate=cs,n.nthArg=fc,n.omit=lp,n.omitBy=ku,n.once=ls,n.orderBy=Wa,n.over=Ep,n.overArgs=Id,n.overEvery=Op,n.overSome=Ap,n.partial=Nd,n.partialRight=Vd,n.partition=Od,n.pick=dp,n.pickBy=Cu,n.property=gc,n.propertyOf=vc,n.pull=dd,n.pullAll=ta,n.pullAllBy=na,n.pullAllWith=ra,n.pullAt=pd,n.range=Mp,n.rangeRight=Bp,n.rearg=zd,n.reject=Ja,n.remove=oa,n.rest=ds,n.reverse=ia,n.sampleSize=Ya,n.set=ju,n.setWith=Su,n.shuffle=Za,n.slice=aa,n.sortBy=Ad,n.sortedUniq=ha,n.sortedUniqBy=ma,n.split=Ku,n.spread=ps,n.tail=fa,n.take=ga,n.takeRight=va,n.takeRightWhile=ba,n.takeWhile=ya,n.tap=Ea,n.throttle=hs,n.thru=Oa,n.toArray=Zs,n.toPairs=pp,n.toPairsIn=hp,n.toPath=xc,n.toPlainObject=ru,n.transform=Tu,n.unary=ms,n.union=hd,n.unionBy=md,n.unionWith=fd,n.uniq=wa,n.uniqBy=_a,n.uniqWith=ka,n.unset=Eu,n.unzip=Ca,n.unzipWith=xa,n.update=Ou,n.updateWith=Au,n.values=Mu,n.valuesIn=Bu,n.without=gd,n.words=rc,n.wrap=fs,n.xor=vd,n.xorBy=bd,n.xorWith=yd,n.zip=wd,n.zipObject=ja,n.zipObjectDeep=Sa,n.zipWith=_d,n.entries=pp,n.entriesIn=hp,n.extend=Xd,n.extendWith=ep,pc(n,n),n.add=Pp,n.attempt=kp,n.camelCase=mp,n.capitalize=Iu,n.ceil=Lp,n.clamp=Pu,n.clone=vs,n.cloneDeep=ys,n.cloneDeepWith=ws,n.cloneWith=bs,n.conformsTo=_s,n.deburr=Nu,n.defaultTo=sc,n.divide=Dp,n.endsWith=Vu,n.eq=ks,n.escape=zu,n.escapeRegExp=Ru,n.every=Na,n.find=xd,n.findIndex=$i,n.findKey=su,n.findLast=jd,n.findLastIndex=Ui,n.findLastKey=uu,n.floor=Ip,n.forEach=$a,n.forEachRight=Ua,n.forIn=cu,n.forInRight=lu,n.forOwn=du,n.forOwnRight=pu,n.get=fu,n.gt=Rd,n.gte=Fd,n.has=gu,n.hasIn=vu,n.head=Gi,n.identity=uc,n.includes=qa,n.indexOf=Ji,n.inRange=Lu,n.invoke=sp,n.isArguments=Cs,n.isArray=$d,n.isArrayBuffer=Ud,n.isArrayLike=xs,n.isArrayLikeObject=js,n.isBoolean=Ss,n.isBuffer=qd,n.isDate=Hd,n.isElement=Ts,n.isEmpty=Es,n.isEqual=Os,n.isEqualWith=As,n.isError=Ms,n.isFinite=Bs,n.isFunction=Ps,n.isInteger=Ls,n.isLength=Ds,n.isMap=Wd,n.isMatch=Vs,n.isMatchWith=zs,n.isNaN=Rs,n.isNative=Fs,n.isNil=Us,n.isNull=$s,n.isNumber=qs,n.isObject=Is,n.isObjectLike=Ns,n.isPlainObject=Hs,n.isRegExp=Kd,n.isSafeInteger=Ws,n.isSet=Gd,n.isString=Ks,n.isSymbol=Gs,n.isTypedArray=Jd,n.isUndefined=Js,n.isWeakMap=Qs,n.isWeakSet=Ys,n.join=Yi,n.kebabCase=fp,n.last=Zi,n.lastIndexOf=Xi,n.lowerCase=gp,n.lowerFirst=vp,n.lt=Qd,n.lte=Yd,n.max=Sc,n.maxBy=Tc,n.mean=Ec,n.meanBy=Oc,n.min=Ac,n.minBy=Mc,n.stubArray=bc,n.stubFalse=yc,n.stubObject=wc,n.stubString=_c,n.stubTrue=kc,n.multiply=Np,n.nth=ea,n.noConflict=hc,n.noop=mc,n.now=Md,n.pad=Fu,n.padEnd=$u,n.padStart=Uu,n.parseInt=qu,n.random=Du,n.reduce=Ka,n.reduceRight=Ga,n.repeat=Hu,n.replace=Wu,n.result=xu,n.round=Vp,n.runInContext=te,n.sample=Qa,n.size=Xa,n.snakeCase=bp,n.some=es,n.sortedIndex=sa,n.sortedIndexBy=ua,n.sortedIndexOf=ca,n.sortedLastIndex=la,n.sortedLastIndexBy=da,n.sortedLastIndexOf=pa,n.startCase=yp,n.startsWith=Gu,n.subtract=zp,n.sum=Bc,n.sumBy=Pc,n.template=Ju,n.times=Cc,n.toFinite=Xs,n.toInteger=eu,n.toLength=tu,n.toLower=Qu,n.toNumber=nu,n.toSafeInteger=ou,n.toString=iu,n.toUpper=Yu,n.trim=Zu,n.trimEnd=Xu,n.trimStart=ec,n.truncate=tc,n.unescape=nc,n.uniqueId=jc,n.upperCase=wp,n.upperFirst=_p,n.each=$a,n.eachRight=Ua,n.first=Gi,pc(n,function(){var e={};return Kn(n,function(t,r){Jc.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION=re,s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),s(["drop","take"],function(e,t){T.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new T(this);n=n===ne?1:wl(eu(n),0);var o=this.clone();return r?o.__takeCount__=_l(n,o.__takeCount__):o.__views__.push({size:_l(n,Me),type:e+(o.__dir__<0?"Right":"")}),o},T.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),s(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==xe||n==Se;T.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:oi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),s(["head","last"],function(e,t){var n="take"+(t?"Right":"");T.prototype[e]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");T.prototype[e]=function(){return this.__filtered__?new T(this):this[n](1)}}),T.prototype.compact=function(){return this.filter(uc)},T.prototype.find=function(e){return this.filter(e).head()},T.prototype.findLast=function(e){return this.reverse().find(e)},T.prototype.invokeMap=Wr(function(e,t){return"function"==typeof e?new T(this):this.map(function(n){return gr(n,e,t)})}),T.prototype.reject=function(e){return this.filter(cs(oi(e)))},T.prototype.slice=function(e,t){e=eu(e);var n=this;return n.__filtered__&&(e>0||0>t)?new T(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ne&&(t=eu(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},T.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},T.prototype.toArray=function(){return this.take(Me)},Kn(T.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),i=n[o?"take"+("last"==t?"Right":""):t],a=o||/^find/.test(t);i&&(n.prototype[t]=function(){var t=this.__wrapped__,s=o?[1]:arguments,u=t instanceof T,c=s[0],l=u||$d(t),d=function(e){var t=i.apply(n,m([e],s));return o&&p?t[0]:t};l&&r&&"function"==typeof c&&1!=c.length&&(u=l=!1);var p=this.__chain__,h=!!this.__actions__.length,f=a&&!p,g=u&&!h;if(!a&&l){t=g?t:new T(this);var v=e.apply(t,s);return v.__actions__.push({func:Oa,args:[d],thisArg:ne}),new b(v,p)}return f&&g?e.apply(this,s):(v=this.thru(d),f?o?v.value()[0]:v.value():v)})}),s(["pop","push","shift","sort","splice","unshift"],function(e){var t=Uc[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var n=this.value();return t.apply($d(n)?n:[],e)}return this[r](function(n){return t.apply($d(n)?n:[],e)})}}),Kn(T.prototype,function(e,t){var r=n[t];if(r){var o=r.name+"",i=Ll[o]||(Ll[o]=[]);i.push({name:t,func:r})}}),Ll[zo(ne,ce).name]=[{name:"wrapper",func:ne}],T.prototype.clone=Z,T.prototype.reverse=X,T.prototype.value=Mt,n.prototype.at=kd,n.prototype.chain=Aa,n.prototype.commit=Ma,n.prototype.next=Ba,n.prototype.plant=La,n.prototype.reverse=Da,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=Ia,n.prototype.first=n.prototype.head,il&&(n.prototype[il]=Pa),n}var ne,re="4.15.0",oe=200,ie="Expected a function",ae="__lodash_hash_undefined__",se="__lodash_placeholder__",ue=1,ce=2,le=4,de=8,pe=16,he=32,me=64,fe=128,ge=256,ve=512,be=1,ye=2,we=30,_e="...",ke=150,Ce=16,xe=1,je=2,Se=3,Te=1/0,Ee=9007199254740991,Oe=1.7976931348623157e308,Ae=NaN,Me=4294967295,Be=Me-1,Pe=Me>>>1,Le=[["ary",fe],["bind",ue],["bindKey",ce],["curry",de],["curryRight",pe],["flip",ve],["partial",he],["partialRight",me],["rearg",ge]],De="[object Arguments]",Ie="[object Array]",Ne="[object Boolean]",Ve="[object Date]",ze="[object Error]",Re="[object Function]",Fe="[object GeneratorFunction]",$e="[object Map]",Ue="[object Number]",qe="[object Object]",He="[object Promise]",We="[object RegExp]",Ke="[object Set]",Ge="[object String]",Je="[object Symbol]",Qe="[object WeakMap]",Ye="[object WeakSet]",Ze="[object ArrayBuffer]",Xe="[object DataView]",et="[object Float32Array]",tt="[object Float64Array]",nt="[object Int8Array]",rt="[object Int16Array]",ot="[object Int32Array]",it="[object Uint8Array]",at="[object Uint8ClampedArray]",st="[object Uint16Array]",ut="[object Uint32Array]",ct=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39|#96);/g,ht=/[&<>"'`]/g,mt=RegExp(pt.source),ft=RegExp(ht.source),gt=/<%-([\s\S]+?)%>/g,vt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wt=/^\w*$/,_t=/^\./,kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ct=/[\\^$.*+?()[\]{}|]/g,xt=RegExp(Ct.source),jt=/^\s+|\s+$/g,St=/^\s+/,Tt=/\s+$/,Et=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ot=/\{\n\/\* \[wrapped with (.+)\] \*/,At=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bt=/\\(\\)?/g,Pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lt=/\w*$/,Dt=/^0x/i,It=/^[-+]0x[0-9a-f]+$/i,Nt=/^0b[01]+$/i,Vt=/^\[object .+?Constructor\]$/,zt=/^0o[0-7]+$/i,Rt=/^(?:0|[1-9]\d*)$/,Ft=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$t=/($^)/,Ut=/['\n\r\u2028\u2029\\]/g,qt="\\ud800-\\udfff",Ht="\\u0300-\\u036f\\ufe20-\\ufe23",Wt="\\u20d0-\\u20f0",Kt="\\u2700-\\u27bf",Gt="a-z\\xdf-\\xf6\\xf8-\\xff",Jt="\\xac\\xb1\\xd7\\xf7",Qt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yt="\\u2000-\\u206f",Zt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xt="A-Z\\xc0-\\xd6\\xd8-\\xde",en="\\ufe0e\\ufe0f",tn=Jt+Qt+Yt+Zt,nn="[']",rn="["+qt+"]",on="["+tn+"]",an="["+Ht+Wt+"]",sn="\\d+",un="["+Kt+"]",cn="["+Gt+"]",ln="[^"+qt+tn+sn+Kt+Gt+Xt+"]",dn="\\ud83c[\\udffb-\\udfff]",pn="(?:"+an+"|"+dn+")",hn="[^"+qt+"]",mn="(?:\\ud83c[\\udde6-\\uddff]){2}",fn="[\\ud800-\\udbff][\\udc00-\\udfff]",gn="["+Xt+"]",vn="\\u200d",bn="(?:"+cn+"|"+ln+")",yn="(?:"+gn+"|"+ln+")",wn="(?:"+nn+"(?:d|ll|m|re|s|t|ve))?",_n="(?:"+nn+"(?:D|LL|M|RE|S|T|VE))?",kn=pn+"?",Cn="["+en+"]?",xn="(?:"+vn+"(?:"+[hn,mn,fn].join("|")+")"+Cn+kn+")*",jn=Cn+kn+xn,Sn="(?:"+[un,mn,fn].join("|")+")"+jn,Tn="(?:"+[hn+an+"?",an,mn,fn,rn].join("|")+")",En=RegExp(nn,"g"),On=RegExp(an,"g"),An=RegExp(dn+"(?="+dn+")|"+Tn+jn,"g"),Mn=RegExp([gn+"?"+cn+"+"+wn+"(?="+[on,gn,"$"].join("|")+")",yn+"+"+_n+"(?="+[on,gn+bn,"$"].join("|")+")",gn+"?"+bn+"+"+wn,gn+"+"+_n,sn,Sn].join("|"),"g"),Bn=RegExp("["+vn+qt+Ht+Wt+en+"]"),Pn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ln=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dn=-1,In={};In[et]=In[tt]=In[nt]=In[rt]=In[ot]=In[it]=In[at]=In[st]=In[ut]=!0,In[De]=In[Ie]=In[Ze]=In[Ne]=In[Xe]=In[Ve]=In[ze]=In[Re]=In[$e]=In[Ue]=In[qe]=In[We]=In[Ke]=In[Ge]=In[Qe]=!1;var Nn={};Nn[De]=Nn[Ie]=Nn[Ze]=Nn[Xe]=Nn[Ne]=Nn[Ve]=Nn[et]=Nn[tt]=Nn[nt]=Nn[rt]=Nn[ot]=Nn[$e]=Nn[Ue]=Nn[qe]=Nn[We]=Nn[Ke]=Nn[Ge]=Nn[Je]=Nn[it]=Nn[at]=Nn[st]=Nn[ut]=!0,Nn[ze]=Nn[Re]=Nn[Qe]=!1;var Vn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"ss"},zn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Rn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Fn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$n=parseFloat,Un=parseInt,qn="object"==typeof n&&n&&n.Object===Object&&n,Hn="object"==typeof self&&self&&self.Object===Object&&self,Wn=qn||Hn||Function("return this")(),Kn="object"==typeof r&&r&&!r.nodeType&&r,Gn=Kn&&"object"==typeof t&&t&&!t.nodeType&&t,Jn=Gn&&Gn.exports===Kn,Qn=Jn&&qn.process,Yn=function(){try{return Qn&&Qn.binding("util")}catch(e){}}(),Zn=Yn&&Yn.isArrayBuffer,Xn=Yn&&Yn.isDate,er=Yn&&Yn.isMap,tr=Yn&&Yn.isRegExp,nr=Yn&&Yn.isSet,rr=Yn&&Yn.isTypedArray,or=S("length"),ir=T(Vn),ar=T(zn),sr=T(Rn),ur=te();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Wn._=ur,define(function(){return ur})):Gn?((Gn.exports=ur)._=ur,Kn._=ur):Wn._=ur}).call(this)},{}],258:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=t,r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if(o=n.next(),o.done)break;i=o.value}var a=i;if(!e(a))return!1}return!0}},{}],259:[function(e,t,n){"use strict";var r=e(263);t.exports=new r(function(){return!0})},{}],260:[function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],o=e[Symbol.iterator]();!(n=o.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=e(258),i=e(263),a=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push([e[r],t[r]]);return n},s=function(e){var t=r(e,2),n=t[0],o=t[1];return n(o)},u=function(e){return"string"==typeof e},c=function(e){return"boolean"==typeof e},l=function(e){return"number"==typeof e},d=function(e){return"function"==typeof e},p=void 0,h=function(e){var t=e.map(p);return function(n){return Array.isArray(n)&&e.length===n.length&&o(s,a(t,n))}},m=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push([n,p(e[n])]);return function(e){if("object"!=typeof e)return!1;for(var n=t,o=Array.isArray(n),i=0,n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if(i=n.next(),i.done)break;a=i.value}var s=r(a,2),u=s[0],c=s[1];if(!(u in e&&c(e[u])))return!1}return!0}};p=function(e){return e instanceof i?e.matches:e===String?u:e===Boolean?c:e===Number?l:e===Function?d:e===Array?Array.isArray:Array.isArray(e)?h(e):"object"==typeof e?m(e):"function"==typeof e?function(t){return t instanceof e}:function(t){return t===e}},t.exports=p},{}],261:[function(e,t,n){"use strict";var r=e(263),o=e(262),i=e(260),a=e(258);o.Any=e(259),o.If=function(e){return new r(e)},o.Or=function(e,t){return e=i(e),t=i(t),new r(function(n){return e(n)||t(n)})},o.And=function(e,t){return e=i(e),t=i(t),new r(function(n){return e(n)&&t(n)})};var s=function(e){return Array.isArray(e)||"undefined"!=typeof Symbol&&e[Symbol.iterator]};o.List=function(e){return new r(function(t){return s(t)&&a(i(e),t)})},o.compile=i,o.overload=o,t.exports=o},{}],262:[function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],o=e[Symbol.iterator]();!(n=o.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=e(260),i=e(259);t.exports=function(e){if("function"!=typeof e)throw new Error("Pass a function to pattern.");var t=[],n=function(e,n){if(0===arguments.length)throw new Error("Cannot call match without arguments.");if(1===arguments.length&&(n=e,e=i),"function"!=typeof n)throw new Error("Final argument to match must be a function implementation.");t.push([o(e),n])};return e(function(){n.apply(this,arguments)}),n=function(){throw new Error("Cannot call match outside of a pattern invocation.")},function(){for(var e=arguments.length,n=Array(e),o=0;e>o;o++)n[o]=arguments[o];for(var i=t,a=Array.isArray(i),s=0,i=a?i:i[Symbol.iterator]();;){var u;if(a){if(s>=i.length)break;u=i[s++]}else{if(s=i.next(),s.done)break;u=s.value}var c=r(u,2),l=c[0],d=c[1];if(l(n))return d.apply(this,n)}throw new Error("No matching pattern")}}},{}],263:[function(e,t,n){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.exports=function e(t){r(this,e),this.matches=t,Object.freeze(this)}},{}],264:[function(e,t,n){var r=Object.prototype.hasOwnProperty,o=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return"object"!=typeof e&&(e=null),t.reduce(function(e,t){return"object"!=typeof t||null===t?e:Object.create(e,i(t))},e)},i=function(e){var t=Object.getOwnPropertyNames(e);return t.reduce(function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t},Object.create(null))},a=function(e,t){return"undefined"==typeof t&&(t=Object.prototype),s(e,t,{})},s=function(e,t,n){u(n,i(e));var r=Object.getPrototypeOf(e);return r===t||null===r?Object.create(r,n):s(r,t,n)},u=function(e,t){Object.keys(t).forEach(function(n){r.call(e,n)||(e[n]=t[n])})};t.exports=o,t.exports.getOwnPropertyDescriptorMap=i,t.exports.flatten=a},{}],265:[function(e,t,n){(function(){var e,n,r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k=[].slice,C=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};n={default:"<!DOCTYPE html>",5:"<!DOCTYPE html>",xml:'<?xml version="1.0" encoding="utf-8" ?>',transitional:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',strict:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">',frameset:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">',1.1:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">',basic:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">',mobile:'<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">',ce:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "ce-html-1.0-transitional.dtd">'},r={regular:"a abbr address article aside audio b bdi bdo blockquote body button canvas caption cite code colgroup datalist dd del details dfn div dl dt em fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup html i iframe ins kbd label legend li map mark menu meter nav noscript object ol optgroup option output p pre progress q rp rt ruby s samp section select small span strong sub summary sup table tbody td textarea tfoot th thead time title tr u ul video",raw:"style",script:"script",void:"area base br col command embed hr img input keygen link meta param source track wbr",obsolete:"applet acronym bgsound dir frameset noframes isindex listing nextid noembed plaintext rb strike xmp big blink center font marquee multicol nobr spacer tt",obsolete_void:"basefont frame"},g=function(){var e,t,n,o,i,a,s,u,c;for(t=1<=arguments.length?k.call(arguments,0):[],c=[],o=0,a=t.length;a>o;o++)for(e=t[o],u=r[e].split(" "),i=0,s=u.length;s>i;i++)n=u[i],C.call(c,n)<0&&c.push(n);return c},e=function(){function e(){this.htmlOut=null}return e.prototype.resetBuffer=function(e){var t;return null==e&&(e=null),t=this.htmlOut,this.htmlOut=e,t},e.prototype.render=function(){var e,t,n,r;r=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],t=this.resetBuffer("");try{r.apply(null,e)}finally{n=this.resetBuffer(t)}return n},e.prototype.cede=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.render.apply(this,e)},e.prototype.renderable=function(e){var t;return t=this,function(){var n,r;if(n=1<=arguments.length?k.call(arguments,0):[],null===t.htmlOut){t.htmlOut="";try{e.apply(this,n)}finally{r=t.resetBuffer()}return r}return e.apply(this,n)}},e.prototype.renderAttr=function(e,t){var n,r;return null==t?" "+e:t===!1?"":"data"===e&&"object"==typeof t?function(){var e;e=[];for(n in t)r=t[n],e.push(this.renderAttr("data-"+n,r));return e}.call(this).join(""):(t===!0&&(t=e)," "+e+"="+this.quote(this.escape(t.toString())))},e.prototype.attrOrder=["id","class"],e.prototype.renderAttrs=function(e){var t,n,r,o,i,a;for(i="",o=this.attrOrder,t=0,n=o.length;n>t;t++)r=o[t],r in e&&(i+=this.renderAttr(r,e[r]));for(r in e)a=e[r],C.call(this.attrOrder,r)>=0||(i+=this.renderAttr(r,a));return i},e.prototype.renderContents=function(){var e,t,n;if(e=arguments[0],t=2<=arguments.length?k.call(arguments,1):[],null==e);else{if("function"!=typeof e)return this.text(e);if(n=e.apply(this,t),"string"==typeof n)return this.text(n)}},e.prototype.isSelector=function(e){var t;return e.length>1&&("#"===(t=e.charAt(0))||"."===t)},e.prototype.parseSelector=function(e){var t,n,r,o,i,a,s,u;for(r=null,t=[],a=e.split("."),n=0,i=a.length;i>n;n++)u=a[n],u=u.trim(),r?t.push(u):(s=u.split("#"),o=s[0],r=s[1],""!==o&&t.push(u));return{id:r,classes:t}},e.prototype.normalizeArgs=function(e){var t,n,r,o,i,a,s,u,c,l;for(n={},l=null,o=null,s=i=0,u=e.length;u>i;s=++i)if(t=e[s],null!=t)switch(typeof t){case"string":0===s&&this.isSelector(t)?(l=t,c=this.parseSelector(t)):o=t;break;case"function":case"number":case"boolean":o=t;break;case"object":t.constructor===Object?n=t:o=t;break;default:o=t}return null!=c&&(a=c.id,r=c.classes,null!=a&&(n.id=a),(null!=r?r.length:void 0)&&(n.class&&r.push(n.class),n.class=r.join(" "))),{attrs:n,contents:o,selector:l}},e.prototype.tag=function(){var e,t,n,r,o;return o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,this.raw("<"+o+this.renderAttrs(t)+">"),this.renderContents(n),this.raw("</"+o+">")},e.prototype.rawTag=function(){var e,t,n,r,o;return o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,this.raw("<"+o+this.renderAttrs(t)+">"),this.raw(n),this.raw("</"+o+">")},e.prototype.scriptTag=function(){var e,t,n,r,o;return o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,this.raw("<"+o+this.renderAttrs(t)+">"),this.renderContents(n),this.raw("</"+o+">")},e.prototype.selfClosingTag=function(){var e,t,n,r,o;if(o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,n)throw new Error("Teacup: <"+o+"/> must not have content.  Attempted to nest "+n);return this.raw("<"+o+this.renderAttrs(t)+" />")},e.prototype.coffeescript=function(e){return this.raw('<script type="text/javascript">(function() {\n  var __slice = [].slice,\n      __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n      __hasProp = {}.hasOwnProperty,\n      __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n  ('+this.escape(e.toString())+")();\n})();</script>")},e.prototype.comment=function(e){return this.raw("<!--"+this.escape(e)+"-->")},e.prototype.doctype=function(e){return null==e&&(e=5),this.raw(n[e])},e.prototype.ie=function(e,t){return this.raw("<!--[if "+this.escape(e)+"]>"),this.renderContents(t),this.raw("<![endif]-->")},e.prototype.text=function(e){if(null==this.htmlOut)throw new Error("Teacup: can't call a tag function outside a rendering context");return this.htmlOut+=null!=e&&this.escape(e.toString())||"",null},e.prototype.raw=function(e){return null!=e?(this.htmlOut+=e,null):void 0},e.prototype.escape=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.prototype.quote=function(e){return'"'+e+'"'},e.prototype.use=function(e){return e(this)},e.prototype.tags=function(){var e,t,n,r,o,i;for(e={},t=[].concat("cede coffeescript comment component doctype escape ie normalizeArgs raw render renderable script tag text use".split(" "),g("regular","obsolete","raw","void","obsolete_void")),n=function(t){return function(n){return e[n]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],t[n].apply(t,e)}}}(this),r=0,o=t.length;o>r;r++)i=t[r],n(i);return e},e.prototype.component=function(e){return function(t){return function(){var n,r,o,i,a,s;return n=1<=arguments.length?k.call(arguments,0):[],i=t.normalizeArgs(n),s=i.selector,r=i.attrs,o=i.contents,a=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],e.unshift(o),t.renderContents.apply(t,e)},e.apply(t,[s,r,a])}}(this)},e}(),v=g("regular","obsolete"),o=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.tag.apply(this,[t].concat(k.call(e)))}};for(u=0,d=v.length;d>u;u++)_=v[u],o(_);for(b=g("raw"),i=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.rawTag.apply(this,[t].concat(k.call(e)))}},c=0,p=b.length;p>c;c++)_=b[c],i(_);for(y=g("script"),a=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.scriptTag.apply(this,[t].concat(k.call(e)))}},l=0,h=y.length;h>l;l++)_=y[l],a(_);for(w=g("void","obsolete_void"),s=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.selfClosingTag.apply(this,[t].concat(k.call(e)))}},f=0,m=w.length;m>f;f++)_=w[f],s(_);("undefined"!=typeof t&&null!==t?t.exports:void 0)?(t.exports=(new e).tags(),t.exports.Teacup=e):"function"==typeof define&&define.amd?define("teacup",[],function(){return(new e).tags()}):(window.teacup=(new e).tags(),window.teacup.Teacup=e)}).call(this)},{}],266:[function(e,t,n){!function(e,r){"object"==typeof n&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof n?n.Unsplash=r():e.Unsplash=r()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){
"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return"function"==typeof e.json?e.json():e}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.toJson=i;var s=n(1),u=n(11),c=n(3),l=r(c),d=n(6),p=r(d),h=n(10),m=r(h),f=n(7),g=r(f),v=n(4),b=r(v),y=n(5),w=r(y),_=n(8),k=r(_),C=n(9),x=r(C),j=function(){function e(t){o(this,e),this._apiUrl=t.apiUrl||s.API_URL,this._apiVersion=t.apiVersion||s.API_VERSION,this._applicationId=t.applicationId,this._secret=t.secret,this._callbackUrl=t.callbackUrl,this._bearerToken=t.bearerToken,this.auth=l.default.bind(this)(),this.currentUser=p.default.bind(this)(),this.users=m.default.bind(this)(),this.photos=g.default.bind(this)(),this.categories=b.default.bind(this)(),this.collections=w.default.bind(this)(),this.search=k.default.bind(this)(),this.stats=x.default.bind(this)()}return a(e,[{key:"request",value:function(e){var t=u.buildFetchOptions.bind(this)(e),n=t.url,r=t.options;return fetch(n,r)}}]),e}();t.default=j},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_URL="https://api.unsplash.com",t.API_VERSION="v1",t.OAUTH_AUTHORIZE_URL="https://unsplash.com/oauth/authorize",t.OAUTH_TOKEN_URL="https://unsplash.com/oauth/token"},function(e,t,n){"use strict";t.decode=t.parse=n(13),t.encode=t.stringify=n(14)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=this;return{getAuthenticationUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["public"],n=a.default.stringify({client_id:e._applicationId,redirect_uri:e._callbackUrl,response_type:"code",scope:t.length>1?t.join("+"):t.toString()});return decodeURIComponent(s.OAUTH_AUTHORIZE_URL+"?"+n)},userAuthentication:function(t){var n=s.OAUTH_TOKEN_URL;return e.request({url:n,method:"POST",body:{client_id:e._applicationId,client_secret:e._secret,redirect_uri:e._callbackUrl,grant_type:"authorization_code",code:t},oauth:!0})},setBearerToken:function(t){t&&(e._bearerToken=t)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(2),a=r(i),s=n(1)},function(e,t){"use strict";function n(){var e=this;return{listCategories:function(){var t="/categories";return e.request({url:t,method:"GET"})},category:function(t){var n="/categories/"+t;return e.request({url:n,method:"GET"})},categoryPhotos:function(t,n,r){var o="/categories/"+t+"/photos",i={page:n,per_page:r};return e.request({url:o,method:"GET",query:i})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{listCollections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="/collections",o={page:t,per_page:n};return e.request({url:r,method:"GET",query:o})},listCuratedCollections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="/collections/curated",o={page:t,per_page:n};return e.request({url:r,method:"GET",query:o})},listFeaturedCollections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="/collections/featured",o={page:t,per_page:n};return e.request({url:r,method:"GET",query:o})},getCollection:r.bind(this,!1),getCuratedCollection:r.bind(this,!0),getCuratedCollectionPhotos:o.bind(this,!0),getCollectionPhotos:o.bind(this,!1),createCollection:i.bind(this,null),updateCollection:i.bind(this),deleteCollection:function(t){var n="/collections/"+t;return e.request({url:n,method:"DELETE"})},addPhotoToCollection:function(t,n){var r="/collections/"+t+"/add";return e.request({url:r,method:"POST",body:{photo_id:n}})},removePhotoFromCollection:function(t,n){var r="/collections/"+t+"/remove?photo_id="+n;return e.request({url:r,method:"DELETE"})}}}function r(e,t){var n=e?"/collections/curated/"+t:"/collections/"+t;return this.request({url:n,method:"GET"})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"latest",i=e?"/collections/curated/"+t+"/photos":"/collections/"+t+"/photos",a={page:n,per_page:r,order_by:o};return this.request({url:i,method:"GET",query:a})}function i(e,t,n,r){var o=e?"/collections/"+e:"/collections",i={title:t,description:n,private:r};return this.request({url:o,method:e?"PUT":"POST",body:i})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{profile:function(){var t="/me";return e.request({url:t,method:"GET"})},updateProfile:function(t){var n="/me",r=t.username,o=t.firstName,i=t.lastName,a=t.email,s=t.url,u=t.location,c=t.bio,l=t.instagramUsername,d={username:r,first_name:o,last_name:i,email:a,url:s,location:u,bio:c,instagram_username:l};return Object.keys(d).forEach(function(e){d[e]||delete d[e]}),e.request({url:n,method:"PUT",body:d})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{listPhotos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"latest",o="/photos",i={page:t,per_page:n,order_by:r};return e.request({url:o,method:"GET",query:i})},listCuratedPhotos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"latest",o="/photos/curated",i={page:t,per_page:n,order_by:r};return e.request({url:o,method:"GET",query:i})},searchPhotos:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i="/photos/search",a={query:t,category:n.length>1?n.join(","):n.toString(),page:r,per_page:o};return e.request({url:i,method:"GET",query:a})},getPhoto:function(t,n,r,o){var i="/photos/"+t,a={w:n,h:r,rect:o};return e.request({url:i,method:"GET",query:a})},getPhotoStats:function(t){var n="/photos/"+t+"/stats";return e.request({url:n,method:"GET"})},getRandomPhoto:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="/photos/random",r=t.collections||[],o={category:t.category,featured:t.featured,username:t.username,orientation:t.orientation,collections:r.join(),query:t.query,w:t.width,h:t.height,c:t.cacheBuster||(new Date).getTime()};return Object.keys(o).forEach(function(e){o[e]||delete o[e]}),e.request({url:n,method:"GET",query:o})},uploadPhoto:function(t){if(!e._bearerToken)throw new Error("Requires a bearerToken to be set.");var n="/photos";return e.request({url:n,method:"POST",body:{photo:t}})},likePhoto:function(t){if(!e._bearerToken)throw new Error("Requires a bearerToken to be set.");var n="/photos/"+t+"/like";return e.request({url:n,method:"POST"})},unlikePhoto:function(t){if(!e._bearerToken)throw new Error("Requires a bearerToken to be set.");var n="/photos/"+t+"/like";return e.request({url:n,method:"DELETE"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){return{all:r.bind(this,"/search"),photos:r.bind(this,"/search/photos"),users:r.bind(this,"/search/users"),collections:r.bind(this,"/search/collections")}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o={query:t,page:n,per_page:r};return this.request({url:e,method:"GET",query:o})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{total:function(){var t="/stats/total";return e.request({url:t,method:"GET"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{profile:function(t){var n="/users/"+t;return e.request({url:n,method:"GET"})},photos:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest",i="/users/"+t+"/photos",a={page:n,per_page:r,order_by:o};return e.request({url:i,method:"GET",query:a})},likes:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest",i="/users/"+t+"/likes",a={page:n,per_page:r,order_by:o};return e.request({url:i,method:"GET",query:a})},collections:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"published",i="/users/"+t+"/collections",a={page:n,per_page:r,order_by:o};return e.request({url:i,method:"GET",query:a})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return c.default(e)}function i(e){var t=e.method,n=e.query,r=e.oauth,i=e.body,u=r===!0?e.url:""+this._apiUrl+e.url,c=a({},e.headers,{"Accept-Version":this._apiVersion,Authorization:this._bearerToken?"Bearer "+this._bearerToken:"Client-ID "+this._applicationId});return i&&(c["Content-Type"]="application/x-www-form-urlencoded"),n&&(u=decodeURIComponent(u+"?"+s.stringify(n))),{url:u,options:{method:t,headers:c,body:"GET"!==t&&i?o(i):void 0}}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.formUrlEncode=o,t.buildFetchOptions=i;var s=n(2),u=n(12),c=r(u)},function(e,t){e.exports=function(e,t){function n(e){return String(e).replace(/[^ !'()~\*]*/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~\*]/g,function(e){return"%"+e.charCodeAt().toString(16).slice(-2).toUpperCase()})}function r(e){var n=Object.keys(e);return t.sorted?n.sort():n}function o(e){return e.filter(function(e){return e}).join("&")}function i(e,t){return o(r(t).map(function(n){return s(e+"["+n+"]",t[n])}))}function a(e,t){return o(t.map(function(t){return s(e+"[]",t)}))}function s(e,r){var o=typeof r,s=null;return r===s?s=t.ignorenull?s:n(e)+"="+s:/string|number|boolean/.test(o)?s=n(e)+"="+n(r):Array.isArray(r)?s=a(e,r):"object"===o&&(s=i(e,r)),s}return t="object"==typeof t?t:{},o(r(e).map(function(t){return s(t,e[t])}))}},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var c=0;u>c;++c){var l,d,p,h,m=e[c].replace(a,"%20"),f=m.indexOf(r);f>=0?(l=m.substr(0,f),d=m.substr(f+1)):(l=m,d=""),p=decodeURIComponent(l),h=decodeURIComponent(d),n(i,p)?Array.isArray(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(n(e))}).join(t):i+encodeURIComponent(n(e[o]))}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}}])})},{}],267:[function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var c,l,d,p,h=s.test(e),m=typeof t,f=this,g=0;for("object"!==m&&"string"!==m&&(n=t,t=null),n&&"function"!=typeof n&&(n=a.parse),t=i(t);g<u.length;g++)l=u[g],c=l[0],p=l[1],c!==c?f[p]=e:"string"==typeof c?~(d=e.indexOf(c))&&("number"==typeof l[2]?(f[p]=e.slice(0,d),e=e.slice(d+l[2])):(f[p]=e.slice(d),e=e.slice(0,d))):(d=c.exec(e))&&(f[p]=d[1],e=e.slice(0,e.length-d[0].length)),f[p]=f[p]||(l[3]||"port"===p&&h?t[p]||"":""),l[4]&&(f[p]=f[p].toLowerCase());n&&(f.query=n(f.query)),o(f.port,f.protocol)||(f.host=f.hostname,f.port=""),f.username=f.password="",f.auth&&(l=f.auth.split(":"),f.username=l[0]||"",f.password=l[1]||""),f.href=f.toString()}var o=e(270),i=e(268),a=e(269),s=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];r.prototype.set=function(e,t,n){var r=this;return"query"===e?("string"==typeof t&&t.length&&(t=(n||a.parse)(t)),r[e]=t):"port"===e?(r[e]=t,o(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="")):"hostname"===e?(r[e]=t,r.port&&(t+=":"+r.port),r.host=t):"host"===e?(r[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),r.hostname=t[0],r.port=t[1])):r[e]=t,r.href=r.toString(),r},r.prototype.toString=function(e){e&&"function"==typeof e||(e=a.stringify);var t,n=this,r=n.protocol+"//";return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.hostname,n.port&&(r+=":"+n.port),r+=n.pathname,n.query&&(t="object"==typeof n.query?e(n.query):n.query,r+=("?"===t.charAt(0)?"":"?")+t),n.hash&&(r+=n.hash),r},r.qs=a,r.location=i,t.exports=r},{}],268:[function(e,t,r){"use strict";var o,i={hash:1,query:1};t.exports=function(t){t=t||n.location||{},o=o||e(267);var r,a={},s=typeof t;if("blob:"===t.protocol)a=new o(unescape(t.pathname),{});else if("string"===s){a=new o(t,{});for(r in i)delete a[r]}else if("object"===s)for(r in t)r in i||(a[r]=t[r]);return a}},{}],269:[function(e,t,n){"use strict";function r(e){for(var t,n=/([^=?&]+)=([^&]*)/g,r={};t=n.exec(e);r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return r}function o(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var r in e)i.call(e,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.length?t+n.join("&"):""}var i=Object.prototype.hasOwnProperty;n.stringify=o,n.parse=r},{}],270:[function(e,t,n){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 22!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],271:[function(e,t,n){t.exports=e(273)},{}],272:[function(e,t,n){!function(e){"use strict";var n=-1,r={onVisible:function(e){var t=r.isSupported();if(!t||!r.hidden())return e(),t;var n=r.change(function(t,o){r.hidden()||(r.unbind(n),e())});return n},change:function(e){if(!r.isSupported())return!1;n+=1;var t=n;return r._callbacks[t]=e,r._listen(),t},unbind:function(e){delete r._callbacks[e]},afterPrerendering:function(e){var t=r.isSupported(),n="prerender";if(!t||n!=r.state())return e(),t;var o=r.change(function(t,i){n!=i&&(r.unbind(o),e())});return o},hidden:function(){return!(!r._doc.hidden&&!r._doc.webkitHidden)},state:function(){return r._doc.visibilityState||r._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!r._doc.visibilityState&&!r._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(e){var t=r.state();for(var n in r._callbacks)r._callbacks[n].call(r._doc,e,t)},_listen:function(){if(!r._init){var e="visibilitychange";r._doc.webkitVisibilityState&&(e="webkit"+e);var t=function(){r._change.apply(r,arguments)};r._doc.addEventListener?r._doc.addEventListener(e,t):r._doc.attachEvent(e,t),r._init=!0}}};"undefined"!=typeof t&&t.exports?t.exports=r:e.Visibility=r}(this)},{}],273:[function(e,t,n){!function(n){"use strict";var r=-1,o=function(e){return e.every=function(t,n,o){e._time(),o||(o=n,n=null),r+=1;var i=r;return e._timers[i]={visible:t,hidden:n,callback:o},e._run(i,!1),e.isSupported()&&e._listen(),i},e.stop=function(t){return e._timers[t]?(e._stop(t),delete e._timers[t],!0):!1},e._timers={},e._time=function(){e._timed||(e._timed=!0,e._wasHidden=e.hidden(),e.change(function(){e._stopRun(),e._wasHidden=e.hidden()}))},e._run=function(t,r){var o,i=e._timers[t];if(e.hidden()){if(null===i.hidden)return;o=i.hidden}else o=i.visible;var a=function(){i.last=new Date,i.callback.call(n)};if(r){var s=new Date,u=s-i.last;o>u?i.delay=setTimeout(function(){i.id=setInterval(a,o),a()},o-u):(i.id=setInterval(a,o),a())}else i.id=setInterval(a,o)},e._stop=function(t){var n=e._timers[t];clearInterval(n.id),clearTimeout(n.delay),delete n.id,delete n.delay},e._stopRun=function(t){var n=e.hidden(),r=e._wasHidden;if(n&&!r||!n&&r)for(var o in e._timers)e._stop(o),e._run(o,!n)},e};"undefined"!=typeof t&&t.exports?t.exports=o(e(272)):o(n.Visibility)}(window)},{}],274:[function(e,t,n){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&y(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",(t.headers||!this.headers)&&(this.headers=new o(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function f(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+","+r:r},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},d.call(h.prototype),d.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];g.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=h,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,r){var o=new h(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:f(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new g(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&v.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],275:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(35),i=e(120),a=e(203),s=e(156),u=e("underscore"),c=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.sync=function(e,t,n){throw new Error("BoardState is a special weird non-persistent thing")},t.prototype.initialize=function(e,n){return t.__super__.initialize.apply(this,arguments),this.board=n.board,this.useSidebarPref()?(this.setShowSidebarFromPref(),this.listenTo(this.board,"change:myPrefs",this.setShowSidebarFromPref)):this.set("showSidebar",!s.fSmall),this.set("listComposerOpen",!1)},t.prototype.setSidebarDisplayType=function(e){return this.set("sidebarDisplayType",null!=e?e:"")},t.prototype.getSidebarDisplayType=function(){return this.get("sidebarDisplayType")},t.prototype.selectCard=function(e){this._selectedList=null,e!==this._selectedCard&&(this._selectedCard&&this.stopListening(this._selectedCard,"change:closed"),this._selectedCard=e,null!=this._selectedCard&&(this.listenTo(this._selectedCard,"change:closed",function(e){return function(){return e.selectCardAfter(e._selectedCard)}}(this)),this.waitForId(this._selectedCard,function(t){return function(){return t._selectedCard===e?i.set(e.getFullUrl()):void 0}}(this))),this.trigger("active-card-changed"))},t.prototype.selectList=function(e){return this._selectedList=e},t.prototype.isCardSelected=function(e){return null!=e&&e===this._selectedCard},t.prototype.clearSelectedCard=function(){return this.selectCard(null)},t.prototype.getCard=function(){return this._selectedCard},t.prototype.getList=function(){var e;return e=this.getCard(),null!=e?e.getList():this._selectedList},t.prototype.selectCardAfter=function(e){var t,n,r,o;return n=e.getList(),o=null!=n?n.cardList.filter(function(e){return function(t){return e.board.filter.satisfiesFilter(t)}}(this)):void 0,r=null==n||0===o.length?null:(t=function(e){return function(e){return function(t){return t!==e&&t.get("pos")>=e.get("pos")}}}(this),u.find(o,t(e))),this.selectCard(null!=r?r:u.last(o))},t.prototype.openListComposer=function(){return this.set("listComposerOpen",!0)},t.prototype.closeListComposer=function(){return this.set("listComposerOpen",!1)},t.prototype.useSidebarPref=function(){return r.isLoggedIn()&&(s.fExtraLarge||s.fLarge||s.fMedium)},t.prototype.setShowSidebar=function(e){var t;return e!==this.get("showSidebar")&&(t=e?"Open":"Close",c("Board Menu",t+" Board Menu"),this.set("showSidebar",e),this.useSidebarPref())?this.board.setPref("showSidebar",e):void 0},t.prototype.setShowSidebarFromPref=function(){return this.waitForAttr(this.board,"myPrefs",function(e){return function(){return e.set("showSidebar",e.board.getPref("showSidebar"))}}(this))},t}(a)},{}],276:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(279),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.default=function(){return{mode:"month"}},t.prototype.getMode=function(){return this.get("mode")},t.prototype.setMode=function(e){return this.update("mode",e)},t}(o)},{}],277:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(185),i=e(199),a=e(279),s=e(109),t.exports=s(i,r=function(e){function t(e,n){this.board=n.board,t.__super__.constructor.apply(this,arguments),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardCardComposerSettings-"+t}),e.fetch()}}(this)),this.destruct([this.labelList=(new o).syncModel(this,"idLabels").syncCache(this.modelCache,[],function(e){return function(t){var n,r;return n=t.id,l.call(null!=(r=e.get("idLabels"))?r:[],n)>=0}}(this))])}return u(t,e),t.prototype.typeName="CardComposer",t.prototype.syncedKeys=["title"],t.prototype.default=function(){return{list:null,index:null,idMembers:[],idLabels:[],pos:"bottom",title:"",vis:!1}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.clearItems=function(){this.labelList.reset(),this.save({idMembers:[],idLabels:[],title:""})},t.prototype.moveToNext=function(){var e;this.save({index:(null!=(e=this.get("index"))?e:0)+1})},t.prototype.getBoard=function(){return this.board},t.prototype.getList=function(){return this.get("list")},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.addMember=function(e){return this.addToSet("idMembers",e)},t.prototype.removeMember=function(e){return this.pull("idMembers",e)},t.prototype.labelCreateUrl=function(){return"/1/board/"+this.getBoard().id+"/labels/"},t}(a))},{}],278:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},g=[].slice;r=e(35),i=e(83),s=e(205),u=e(279),c=e(133),l=e("underscore"),p=e("moment"),d=e(104),a="000000000000000000000000",t.exports=o=function(e){function t(e,n){this.board=e,t.__super__.constructor.call(this,null,n),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardCardFilterSettings-"+t}),e.fetch(),e._resetNewCards()}}(this)),this.dueMap={day:1,week:7,month:28,overdue:0,notdue:0,complete:0,incomplete:0},this.modeMap={or:"or",and:"and"},this.newCardsWithoutIds=[],this.listenTo(this,"change:title change:idLabels change:idMembers change:due",this.debounce(this._resetNewCards))}return h(t,e),t.prototype.default=function(){return{idMembers:[],idLabels:[],title:null,due:null,limitMembers:!0,limitLabels:!0,newCards:[],mode:"or"}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.getBoard=function(){return this.board},t.prototype._resetNewCards=function(){return this.newCardsWithoutIds=[],this.save("newCards",[])},t.prototype.toggleQuietMode=function(){var e,t,n,o,i;if(e=r.myId(),null!=e){o=this.default(),o.idMembers=[e],t=!0;for(n in o)i=o[n],t&&(t=l.isEqual(this.get(n),i));return t?this.clear():this.save(o)}},t.prototype.toggleIdLabel=function(e){return this.toggle("idLabels",e)},t.prototype.toggleMember=function(e){return this.toggle("idMembers",e)},t.prototype.isFiltering=function(){var e;return l.some([!l.isEmpty(this.get("idMembers")),!l.isEmpty(this.get("idLabels")),null!=(e=this.get("title"))?e.trim():void 0,null!=this.get("due")])},t.prototype.satisfiesFilter=function(e){var t,n,r,o,i,s,u,c,d,h,m,v,b,y,w,_,k,C,x,j,S,T,E,O,A;if(null==e)return!1;if(e.get("closed"))return!0;if(C=e.id,f.call(null!=(x=this.get("newCards"))?x:[],C)>=0||f.call(this.newCardsWithoutIds,e)>=0)return!0;for(A="and"===this.get("mode"),j=["idLabels","idMembers"],h=0,y=j.length;y>h;h++)if(d=j[h],!l.isEmpty(this.get(d)))if(t=e.get(d),l.isEmpty(t)&&(t=[a]),u=this.get(d),v=l.intersection(u,t),A){if(v.length<u.length)return!1}else if(0===v.length)return!1;if(null!=this.get("due"))switch(s=this.get("due"),i=e.get("due"),o=e.get("dueComplete"),s){case"complete":if(!o)return!1;break;case"incomplete":
if(!i||o)return!1;break;case"notdue":if(null!=e.get("due"))return!1;break;case"overdue":if(_=new Date,o||null==i||p(i).isAfter(_))return!1;break;default:if(o||null==i)return!1;if(w=p().add(this.dueMap[s],"day"),!p(i).isBetween(p(),w))return!1}return T=this.get("title"),null==T||(c=function(e){return l.compact(e.toLowerCase().split(/[\s\x21\x22\x24-\x26\x28-\x2C\x2F\x3A-\x3F\x5B-\x60\x7B-\x7F]+/))},E=c(T),l.isEmpty(E)||(m=null!=e.get("idShort")?c(e.get("idShort").toString()):[],n=l.flatten([c(null!=(S=e.get("name"))?S:""),m]),r=2<=E.length?g.call(E,0,b=E.length-1):(b=0,[]),k=E[b++],!l.isEmpty(r)&&!l.isEmpty(l.intersection(r,n))||(O=function(e){return e.substring(0,k.length)===k},l.any(n,O))))?!0:!1},t.prototype.addNewCard=function(e){return this.newCardsWithoutIds.push(e),this.waitForId(e,function(t){return function(n){return t.newCardsWithoutIds=l.without(t.newCardsWithoutIds,e),t.addToSet("newCards",n)}}(this))},t.prototype.toJSON=function(e){var n,o,i,u,p,h,m;return p=null!=e?e:{},n=p.board,o=p.expanded,i=t.__super__.toJSON.apply(this,arguments),n&&(i.board=this.board.toJSON()),o&&(m=null!=(h=this.get("title"))?h:"",u=RegExp("^"+c.escapeForRegex(m),"i"),i.labels=l.chain(this.board.getLabels()).filter(function(e){return u.test(e.get("color"))||u.test(e.get("name"))}).sort(s.compare).map(function(e){return function(t){var n;return l.extend(t.toJSON(),{isActive:(n=t.id,f.call(e.get("idLabels"),n)>=0)})}}(this)).unshift({id:a,name:d(["filtering","no labels"]),isActive:f.call(this.get("idLabels"),a)>=0}).value(),i.members=this.board.memberList.chain().filter(function(e){return"me"===m&&r.isMe(e)||l.any(c.getMemNameArray(e),function(e){return u.test(e)})}).map(function(e){return function(t){var n;return l.extend(t.toJSON(),{isActive:(n=t.id,f.call(e.get("idMembers"),n)>=0)})}}(this)).value(),i.members=c.sortMembers(i.members,r.me()),i.members.unshift({id:a,fullName:d(["filtering","unassigned"]),initials:"?",isActive:f.call(this.get("idMembers"),a)>=0}),i.dueOptions=l.keys(this.dueMap).map(function(e){return function(t){return{time:t,desc:d(["due date filter",t]),isActive:t===e.get("due")}}}(this)),i.modes=l.keys(this.modeMap).map(function(e){return function(t){return{mode:t,desc:d(["filter mode",t]),isActive:t===e.get("mode")}}}(this))),i},t.prototype.toQueryString=function(){var e,t,n,r;return this.isFiltering()?(t=[],(r=this.get("title"))&&t.push(r),this.get("idLabels").forEach(function(e){return function(n){var r,o;return n===a?t.push(["label","none"].join(":")):(r=e.board.modelCache.get("Label",n))?(o=r.get("name"))?t.push(["label",encodeURIComponent(o)].join(":")):t.push(["label",r.get("color")].join(":")):void 0}}(this)),this.get("idMembers").forEach(function(e){return function(n){var r;return n===a?t.push(["member","none"].join(":")):(r=e.board.modelCache.get("Member",n))?t.push("@"+r.get("username")):void 0}}(this)),(e=this.get("due"))&&t.push(["due",e].join(":")),"and"===this.get("mode")&&t.push(["mode","and"].join(":")),n={menu:"filter",filter:t.join(",")},"?"+l.chain(n).pairs().map(function(e){var t,n;return t=e[0],n=e[1],[t,n].join("=")}).join("&").value()):""},t.prototype.fromQueryString=function(e){var t,n,r,o,i,s,u,c,d,p,h,m,g,v,b;if(e){for(i=[],o=[],t=void 0,g=void 0,p=e.split(","),m=[],r=0,u=p.length;u>r;r++){switch(n=p[r],n=n.replace(/^@/,"member:"),h=n.split(":"),v=h[0],b=h[1],v){case"member":"none"===b?i.push(a):(c=this.board.modelCache.findOne("Member",function(e){return e.get("username")===b}),null!=c&&i.push(c.id));break;case"label":"none"===b?o.push(a):(s=this.board.labelList.find(function(e){return 0===e.get("name").toLowerCase().indexOf(b.toLowerCase())||""===e.get("name")&&e.get("color")===b}),null!=s&&o.push(s.id));break;case"due":f.call(l.keys(this.dueMap),b)>=0&&(t=b);break;case"mode":"and"===b&&(d="and");break;default:g=n}m.push(this.set({idMembers:i,idLabels:o,due:t,title:g,mode:d}))}return m}},t}(u)},{}],279:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),i=e(118),a=e(203),s=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.destructor=function(){return this.disableTabSync()},t.prototype.enableTabSync=function(){return this._onStorageBound=this._onStorage.bind(this),r(window).on("storage",this._onStorageBound)},t.prototype.disableTabSync=function(){return null!=this._onStorageBound?r(window).off("storage",this._onStorageBound):void 0},t.prototype.default=function(){return{}},t.prototype._onStorage=function(e){return e=e.originalEvent,(null!=e?e.key:void 0)===this.id&&e.oldValue!==e.newValue?(this.fetch(),"function"==typeof this.onStorage?this.onStorage(e.originalEvent):void 0):void 0},t.prototype.sync=function(e,t,n){var r,o,a,u,c;switch(u=n.success,e){case"create":throw Error("not implemented");case"read":return o=t.syncedKeysFromLocalStorage(),s.defaults(o,this.default()),"function"==typeof u?u(t,o,n):void 0;case"update":o=t.toJSON(),r=this.default(),delete o.id;for(a in o)c=o[a],s.isEqual(c,r[a])&&delete o[a];return s.isEmpty(o)?i.unset(t.id):i.set(t.id,o),"function"==typeof u?u(t,t.toJSON(),n):void 0;case"delete":return i.unset(t.id),"function"==typeof u?u(t,null,n):void 0}},t.prototype.syncedKeysFromLocalStorage=function(){var e,t;return e=null!=(t=i.get(this.id))?t:{},s.pick(e,this.syncedKeys)},t.prototype.syncedKeys=function(){return!0},t.prototype.toJSON=function(){return s.pick(this.attributes,this.syncedKeys)},t.prototype._persistUpdate=function(e,t){var n;return i.set(this.id,s.extend(null!=(n=i.get(this.id))?n:this.default(),e)),"function"==typeof t?t(null,this.toJSON()):void 0},t.prototype.toggle=function(e,t){return this.inSet(e,t)?(this.pull(e,t),!1):(this.addToSet(e,t),!0)},t.prototype.inSet=function(e,t){var n;return l.call(null!=(n=this.get(e))?n:[],t)>=0},t.prototype.addToSet=function(e,t){var n;return this.save(e,(null!=(n=this.get(e))?n:[]).concat(t))},t.prototype.pull=function(e,t){var n;return this.save(e,s.without(null!=(n=this.get(e))?n:[],t))},t}(a)},{}],280:[function(e,t,n){var r,o=function(e,t){function n(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},i={}.hasOwnProperty;r=e(279),t.exports=new(function(e){function t(){t.__super__.constructor.apply(this,arguments),this.set({id:"labelState"}),this.fetch(),this.enableTabSync()}return o(t,e),t.prototype.default=function(){return{showText:!1}},t.prototype.getShowText=function(){return this.get("showText")},t.prototype.setShowText=function(e){return this.update("showText",e)},t.prototype.toggleText=function(){return this.setShowText(!this.getShowText())},t.prototype.onStorage=function(e){return this.setShowText(this.getShowText())},t}(r))},{}],281:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(279),t.exports=r=function(e){function t(e,n){this.board=e,t.__super__.constructor.call(this,null,n),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardListComposerSettings-"+t}),e.fetch()}}(this))}return i(t,e),t.prototype.default=function(){return{title:null,vis:!1}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.clearItems=function(){this.save({title:""})},t.prototype.getBoard=function(){return this.board},t.prototype.toJSON=function(e){var n,r,o,i;return i=null!=e?e:{},n=i.board,o=i.list,r=t.__super__.toJSON.apply(this,arguments),n&&(r.board=this.getBoard().toJSON()),r},t}(o)},{}],282:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(35),o=e(279),i=e("underscore"),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({id:"memberState-"+r.myId()}),this.fetch()}return a(t,e),t.prototype.default=function(){return{cardsPageSortType:"board",cardsPageFilter:"active-month",cardsPageGroup:"all",processingAttachmentsLength:0,idCollapsedChecklists:[]}},t.prototype.getCardsPageSortType=function(){return this.get("cardsPageSortType")},t.prototype.getCardsPageFilter=function(){return this.get("cardsPageFilter")},t.prototype.getCardsPageGroup=function(){return this.get("cardsPageGroup")},t.prototype.sortCardsPageByBoard=function(){return this.save("cardsPageSortType","board")},t.prototype.sortCardsPageByDate=function(){return this.save("cardsPageSortType","date")},t.prototype.setCardsPageFilter=function(e){return this.save("cardsPageFilter",e)},t.prototype.setCardsPageGroup=function(e){return this.save("cardsPageGroup",e)},t.prototype.getCollapsedChecklists=function(){return this.get("idCollapsedChecklists")},t.prototype.pullCollapsedChecklist=function(e){return this.pull("idCollapsedChecklists",e)},t.prototype.pushCollapsedChecklist=function(e){var t,n;return this.pull("idCollapsedChecklists",e),this.addToSet("idCollapsedChecklists",e),t=this.getCollapsedChecklists(),n=i.rest(t,Math.max(0,t.length-256)),this.save("idCollapsedChecklists",n)},t}(o))},{}],283:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(203),o=e(133),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({query:"",suggestions:[],suggestionSearchTerm:"",suggestSearchModelTypes:""})}return i(t,e),t.prototype.getQuery=function(){return this.get("query")},t.prototype.setQuery=function(e){return e!==this.getQuery()&&this.set("query",e),""===e?(this.clearSuggestions(),this.clearSuggestionSearchTerm(),this.clearSuggestionSearchModelTypes()):void 0},t.prototype.removeStringFromQuery=function(e){var t,n,r;return t=this.getQuery(),n=RegExp(""+o.escapeForRegex(e)),n.test(t)?(r=t.replace(e,""),r=o.stripExtraSpaces(r),""!==r&&(r+=" "),this.setQuery(r)):void 0},t.prototype.addStringToQuery=function(e){var t,n,r;return t=this.getQuery(),n=RegExp(""+o.escapeForRegex(e)),n.test(t)?void 0:(r=t+" "+e,r=o.stripExtraSpaces(r)+" ",this.setQuery(r))},t.prototype.getSuggestions=function(){return this.get("suggestions")},t.prototype.setSuggestions=function(e){return this.set("suggestions",e)},t.prototype.clearSuggestions=function(){return this.set("suggestions",[])},t.prototype.getSuggestionSearchTerm=function(){return this.get("suggestionSearchTerm")},t.prototype.setSuggestionSearchTerm=function(e){return this.set("suggestionSearchTerm",e)},t.prototype.clearSuggestionSearchTerm=function(){return this.set("suggestionSearchTerm","")},t.prototype.getSuggestionSearchModelTypes=function(){return this.get("suggestSearchModelTypes")},t.prototype.setSuggestionSearchModelTypes=function(e){return this.set("suggestSearchModelTypes",e)},t.prototype.clearSuggestionSearchModelTypes=function(){return this.set("suggestSearchModelTypes","")},t}(r))},{}],284:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(35),o=e(279),i=e("underscore"),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({id:"sidebarState-"+r.myId()}),this.fetch()}return a(t,e),t.prototype.default=function(){return{pinBoardsListSidebar:!1,showBoardsListSidebar:!1,idRecentBoards:[],collapsedDrawerSections:[]}},t.prototype.syncedKeys=["idRecentBoards","collapsedDrawerSections","pinBoardsListSidebar"],t.prototype.getPinSidebar=function(){return this.get("pinBoardsListSidebar")},t.prototype.showPinSidebar=function(){return this.save("pinBoardsListSidebar",!0)},t.prototype.hidePinSidebar=function(){return this.save("pinBoardsListSidebar",!1)},t.prototype.getShowSidebar=function(){return this.get("showBoardsListSidebar")},t.prototype.showSidebar=function(){return this.save("showBoardsListSidebar",!0)},t.prototype.hideSidebar=function(){return this.save("showBoardsListSidebar",!1)},t.prototype.hideUnpinnedSidebar=function(){return this.getShowSidebar()&&!this.getPinSidebar()?this.hideSidebar():void 0},t.prototype.getRecentBoards=function(){return this.get("idRecentBoards")},t.prototype.pullBoard=function(e){var t,n;for(n=i.clone(this.getRecentBoards());(t=i.indexOf(n,e))>-1;)n.splice(t,1);return this.save("idRecentBoards",n)},t.prototype.pushBoard=function(e){var t;return t=i.clone(this.getRecentBoards()),i.contains(t,e)&&(t=i.without(t,e)),t.unshift(e),t=t.slice(0,16),this.save("idRecentBoards",t)},t.prototype.getCollapsedSections=function(){var e;return null!=(e=this.get("collapsedDrawerSections"))?e:this.default().collapsedDrawerSections},t.prototype.isCollapsed=function(e){return i.contains(this.getCollapsedSections(),e)},t.prototype.collapseSection=function(e){return this.addToSet("collapsedDrawerSections",e)},t.prototype.expandSection=function(e){return this.pull("collapsedDrawerSections",e)},t}(o))},{}],285:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k=function(e,t){function n(){this.constructor=e}for(var r in t)C.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},C={}.hasOwnProperty,x=[].slice;r=e("jquery"),i=e(286),a=e(287),s=e(83),u=e(133),c=e(549),l=e("underscore"),g=e("moment"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return k(t,e),t.prototype.initialize=function(e){return this.renderOpts=e.renderOpts,this.highlight=e.highlight,this.makeDebouncedMethods("render"),this.listenTo(this.collection,"add remove reset",this.renderDebounced),this.actionViews=[],this.showDetails=!0},t.prototype.render=function(){return this.collection._getRelatedBoards().then(function(e){return function(){var t;t=""===e.$el.html()||e.showDetails!==e._lastShowDetails||e.missingViews(),e._lastShowDetails=e.showDetails,e.rerender(t,!0)}}(this)).then(function(e){return function(){e.trigger("render")}}(this)).done()},t.prototype.missingViews=function(){return l.any(this.actionViews,function(e){return function(t){return!r.contains(e.el,t.el)}}(this))},t.prototype.rerender=function(e,t){var n,r,o,i,a,u,c,d,p,h;for(p=this.saveEdits(),a=p[0],i=p[1],o=this.collection.models,o=l.sortBy(o,function(e){return-s.parse(e.get("date"))}),this.showDetails||(o=l.filter(o,function(e){return e.isCommentLike()})),r=v(o).slice(0,this.renderOpts.limit),e&&t&&this.removeActionViews(),this.$(".js-board-member-profile-no-activity").toggleClass("hide",r.length>0),c=u=0,d=r.length;d>u;c=++u)n=r[c],(e||this.actionNeedsRerender(n,c))&&(h=this.rerenderAction(n,c,r,{rerenderAll:e}),this.restoreEdits(a,i,h))},t.prototype.setShowDetails=function(e){return this.showDetails=e},t.prototype.saveEdits=function(){var e,t;return t=[],e=0,this.$(".editing textarea").each(function(){var n;n=r(this),t.push(n.val()),n.is(":focus")&&(n.parents(".editing").addClass("focused"),e=u.getCaretPosition(n))}),null!=t&&t.reverse(),[t,e]},t.prototype.restoreEdits=function(e,t,n){var r;return n.$el.hasClass("editing")?(n.$("textarea").val(e.pop()),r=u.getElem(n.$("textarea")),n.$el.hasClass("focused")&&u.setCaretPosition(r,t),n.openEditView()):void 0},t.prototype._viewForAction=function(e){return/^comment/.test(e.get("type"))?this.subview(a,e,this.renderOpts):this.subview(i,e,this.renderOpts)},t.prototype.rerenderAction=function(e,t,n,r){var o,i,a,s;return s=this._viewForAction(e),o=this.highlight&&this.highlight===e.id,s.setHighlighted(o),r.rerenderAll?(this.appendSubview(s),this.actionViews.push(s)):(this.insertActionView(s,t),1===this.actionViews.length&&1===n.length?(this.actionViews[t].remove(),this.actionViews.splice(t,1,s)):null==this.actionViews[t+1]?this.actionViews.splice(t,1,s):n.length<=this.actionViews.length?this.actionViews[t+1].model.id===(null!=(i=l.first(n[t+1]))?i.id:void 0)?(this.actionViews[t].remove(),this.actionViews.splice(t,1,s)):(this.actionViews.splice(t,0,s),null!=(a=this.actionViews[this.actionViews.length-1])&&a.remove(),this.actionViews=this.actionViews.splice(0,this.actionViews.length-1)):this.actionViews.splice(t,0,s)),s},t.prototype.actionNeedsRerender=function(e,t){var n,r,o;return(null!=(r=this.actionViews[t+1])&&null!=(o=r.model)?o.id:void 0)===e.id&&(this.actionViews[t].remove(),this.actionViews.splice(t,1)),n=this.actionViews[t],!n||e.id!==n.model.id},t.prototype.insertActionView=function(e,t){return this.actionViews[t]?(e.delegateEvents(),e.render().$el.insertBefore(this.actionViews[t].el)):this.appendSubview(e)},t.prototype.removeActionViews=function(){var e,t,n,r;for(r=this.actionViews,t=0,n=r.length;n>t;t++)e=r[t],e.remove();this.actionViews=[]},t.prototype.delegateEvents=function(){var e,n,r,o;for(t.__super__.delegateEvents.apply(this,arguments),o=this.actionViews,n=0,r=o.length;r>n;n++)e=o[n],e.delegateEvents()},t.prototype.undelegateEvents=function(){var e,n,r,o;for(t.__super__.undelegateEvents.apply(this,arguments),o=this.actionViews,n=0,r=o.length;r>n;n++)e=o[n],e.undelegateEvents()},t.prototype.remove=function(){return this.removeActionViews(),t.__super__.remove.apply(this,arguments)},t.prototype.setHighlight=function(e){var t,n,r;e!==this.highlight&&(this.highlight&&null!=(n=this.collection.get(this.highlight))&&(r=this._viewForAction(n),r.setHighlighted(!1)),this.highlight=e,this.highlight&&(t=this.collection.get(this.highlight))&&(r=this._viewForAction(t),r.setHighlighted(!0)))},t}(c),b=function(e){return function(t){return function(n,r){var o;return o=e in n&&e in r&&n[e].id===r[e].id,o?t(n,r):[!1,!1]}}},w=b("card"),y=b("board"),h=function(e){return[e,e]},p=function(e,t){var n,r,o,i;return n=e[0],r=e[1],o=t[0],i=t[1],[n||o,r||i]},m=function(e,t){var n,r;return null==t?!1:0===e.length?!0:(n=e[0],r=2<=e.length?x.call(e,1):[],m(r,t[n]))},f=function(){var e,t;return e=arguments[0],t=2<=arguments.length?x.call(arguments,1):[],l.all(t,function(t){return m(e,t)})},d=[{a:"removeMemberFromCard",b:"addMemberToCard",cancel:w(function(e,t){return h(e.idMember===t.idMember)})},{a:"deleteAttachmentFromCard",b:"addAttachmentToCard",cancel:w(function(e,t){return h(e.attachment.id===t.attachment.id)})},{a:"updateCheckItemStateOnCard",b:"updateCheckItemStateOnCard",cancel:w(function(e,t){return h(e.checkItem.id===t.checkItem.id)})},{a:"updateCard",b:"updateCard",cancel:w(function(e,t){return h("listAfter"in e&&"listBefore"in t&&e.listAfter.id===t.listBefore.id)})},{a:"addChecklistToCard",b:"removeChecklistFromCard",cancel:w(function(e,t){return h(e.checklist.id===t.checklist.id)})},{a:"updateBoard",b:"updateBoard",cancel:y(function(e,t){return[f(["board","prefs","background"],e,t),!1]})}],_=function(e,t){return d.reduce(function(n,r){return e.type!==r.a||t.type!==r.b?n:p(n,r.cancel(e,t))},[!1,!1])},v=function(e){var t,n,r,o,i,a,s,u,c,d,p;if(1===e.length)return e;for(o={},d=e.slice(0,-1),u=s=0,c=d.length;c>s;u=++s)t=d[u],i=t.toJSON(),a=e[u+1].toJSON(),l.extend(i,i.data),l.extend(a,a.data),i.idMemberCreator===a.idMemberCreator&&g(i.date).diff(a.date,"minutes")<5&&!o[i.id]&&!o[a.id]&&(p=_(i,a),n=p[0],r=p[1],n&&(o[i.id]=!0),r&&(o[a.id]=!0));return l.reject(e,function(e){return o[e.id]})}},{}],286:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M=function(e,t){function n(){this.constructor=e}for(var r in t)B.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},B={}.hasOwnProperty;r=e("jquery"),i=e(582),a=e(306),s=e(510),u=e(35),c=e(166),l=e(517),d=e(82),p=e(167),h=e(7),m=e(83),f=e(84),j=e(139),g=e(37),v=e(39),b=e(569),y=e(107),w=e(133),_=e(549),k=e("underscore"),x=e(525),T=e(48),E=e("moment"),O=e(546),A=e(51),S=e(104),C=e(733),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),t.prototype.className="phenom",t.prototype.initialize=function(e){var t,n,r,o;return this.context=e.context,this.highlighted=e.highlighted,this.listenTo(this.model,"takingTooLong change",this.render),r=this.model.get("data"),null!=(null!=(o=r.card)?o.id:void 0)&&r.board&&(this.listenTo(this.modelCache,"remove:Action:"+this.model.get("id"),function(e){return function(){return e.remove()}}(this)),null!=(t=this.model.getCard())&&t.id!==this.context.id&&this.listenTo(t,"change:name",this.render)),null!=(n=this.model.getChecklist())?this.listenTo(n,"change:name",this.render):void 0},t.prototype.events={"click .js-show-mem-menu":"viewMemberActionMenu","click .js-open-attachment-viewer":"openAttachmentViewer","click .js-open-card":"openCard","click .js-reply-to-action":"reply","click .js-expand-comment":"expandComment","click a":"checkAttachment"},t.prototype.getData=function(){var e;return e=new f("action").getEntities(this.model.get("display"),this.context.id),{saved:null!=this.model.id,entities:k.map(e,this._withEntityInfo.bind(this)),date:this.model.get("date"),dateLastEdited:this.model.get("data").dateLastEdited,textData:this.model.get("data").textData,url:null!=this.model.getCard()?h.getActionUrl(this.model):null}},t.prototype.getContext=function(){var e,t,n,r,o,i,a,s,c;return t={},e=this.modelCache.get("Board",null!=(o=this.model.get("data"))&&null!=(i=o.board)?i.id:void 0),this.options.showBoard&&null!=e&&(t.board=e.toJSON({prefs:!0,url:!0}),t.boardPLevelIconClass=l.getPermLevelIconClassForBoard(e),t.boardPLevelAltText=l.getPermLevelAltTextForBoard(e)),this.options.showOrganization&&(r=this.modelCache.get("Organization",null!=(a=this.model.get("data"))&&null!=(s=a.organization)?s.id:void 0),null!=r&&(t.organization=r.toJSON({prefs:!0,url:!0}),t.orgPLevelIconClass=r.getPermLevel(),t.orgPLevelAltText=S(["org perms",r.getPermLevel(),"text"]))),n=this.modelCache.get("Member",this.model.get("idMemberCreator")),t.canReply=(null!=e?e.canComment(u.me()):void 0)&&(this.model.isAddAttachment()||this.model.isCommentLike()&&null!=n&&!u.isMe(n)),t.canDelete=this.model.deletable(),t.canEdit=this.model.editable(),t.member=null!=n?n.toJSON():void 0,null!=(c=t.member)&&(c.url=h.getMemberProfileUrl(t.member.id)),t},t.prototype.getOptions=function(){var e,t;return{showCompactAttachmentPreview:this.options.compact,truncateComment:null!=(t="function"==typeof(e=this.options).truncateComments?e.truncateComments(this.model):void 0)?t:!1,showOptions:!this.model.isPlaceholder()&&!this.options.compact&&!this.options.readOnly,useEmbedly:!this.options.compact&&this.model.isCommentLike(),usePreviews:!this.options.compact&&this.model.isAddAttachment()}},t.prototype.render=function(){var e,t,n,o,i,a,s,u,c,l,d,p,h,f;if(a=this.getData(),l=this.getOptions(),i=this.getContext(),T("actions",a),this.$el.addClass(this.model.isCommentLike()?"mod-comment-type":this.model.isAddAttachment()?"mod-attachment-type":"mod-other-type"),this.$el.html(C(a,i,l)),null!=(o=this.model.getBoard())&&this.$(".js-friendly-links").each(function(){return x(this,o)}),l.useEmbedly)for(e=this.$(".js-embedly"),d=a.entities,u=0,c=d.length;c>u;u++)if(s=d[u],"comment"===s.type&&null!=s.embedly)try{p=JSON.parse(s.embedly);for(h in p)f=p[h],/wistia/i.test(h)||(f["type_"+f.type]=!0,f.requireHttps=!0,e.show().append(O.fill("embedly",f)))}catch(e){}return l.usePreviews&&(n=k.filter(a.entities,function(e){return"attachment"===e.type}),k.isEmpty(n)||(t=this.$(".js-previews"),g.previewHtml(n[0].url,function(e,n){if(t.empty(),null!=e){if(null!=e.login)return r("<div>").addClass("attachment-extra-info-login").html(e.login).appendTo(t),t.removeClass("hide")}else if(null!=n)return r("<div>").addClass("attachment-extra-info").html(n).appendTo(t),t.removeClass("hide")}))),m.update(this.el),this.$el.toggleClass("unsent",!!this.model.isTakingTooLong),this.renderHighlighted(),this},t.prototype.renderHighlighted=function(){return this.$el.toggleClass("mod-highlighted",!!this.highlighted),this},t.prototype._tfmFormatOpts=function(){return{card:this.model.get("data").card,board:this.model.get("data").board},siteDomain,{textData:this.model.get("data").textData}},t.prototype._withEntityInfo=function(e){var t,n,r,o,i,a,s,u,c,l;return o=k.clone(e),"attachment"===o.type&&(o.url=this.model.get("data").attachment.url),"attachmentPreview"===o.type&&(o.previewUrlForRes=null!=(n=v.get("Card",null!=(i=this.model.get("data").card)?i.id:void 0))&&(t=n.attachmentList.get(null!=(a=this.model.get("data").attachment)?a.id:void 0))?d.isHighDPI()?null!=(s=null!=(u=t.smallestPreviewBiggerThan(1e3))?u:t.biggestPreview())?s.url:void 0:null!=(c=null!=(l=t.smallestPreviewBiggerThan(500))?l:t.biggestPreview())?c.url:void 0:void 0,null==o.previewUrlForRes&&(o.previewUrlForRes=d.isHighDPI()&&null!=o.previewUrl2x?o.previewUrl2x:o.previewUrl)),"comment"===o.type&&(o.textHtml=y.comments.format(o.text,this._tfmFormatOpts()).output),"checkItem"===o.type&&(o.nameHtml=y.checkItems.format(o.text,this._tfmFormatOpts()).output),"date"===o.type&&(o.text=E(o.date).calendar()),"card"===o.type&&null!=(n=v.get("Card",o.id))&&(o.text=n.get("name")),"checklist"===o.type&&null!=(r=v.get("Checklist",o.id))&&(o.text=r.get("name")),o},t.prototype.viewMemberActionMenu=function(e){var t,n;w.stop(e),t=this.modelCache.get("Member",null!=(n=r(e.target).closest("[idmember]").attr("idmember"))?n:this.model.get("idMemberCreator")),b.toggle({elem:this.$(e.target).closest(".js-show-mem-menu"),view:i,options:{model:t,modelCache:this.modelCache}})},t.prototype.expandComment=function(e){return w.stop(e),this.$(".js-comment").removeClass("is-truncated")},t.prototype.openCard=function(e){"Card"===this.context.typeName||r(e.target).is("a,textarea")||j()||(w.stop(e),h.navigate(h.getActionUrl(this.model),{trigger:!0}))},t.prototype.openAttachmentViewer=function(e){var t,n;e.metaKey||e.ctrlKey||(t=r(e.target),t.closest(".window-main-col").length>0&&(w.stop(e),s.isActive()||(n=t.closest(".js-open-attachment-viewer").attr("data-idattachment"),s.show({model:this.model.getCard(),idAttachment:n}))))},t.prototype.reply=function(e){return w.stop(e),this.$el.trigger("replyToAction",this.model),A("Card","Reply to Comment")},t.prototype.setHighlighted=function(e){e!==this.highlighted&&(this.highlighted=e,this.renderHighlighted())},t.prototype.checkAttachment=function(e){var t,n,r;if(!e.metaKey&&!e.ctrlKey)return n=this.model.getCard(),r=e.currentTarget.href,null!=n&&0===r.indexOf(window.attachmentsDomain)&&-1!==r.indexOf(n.id)&&(t=n.attachmentList.find(function(e){return e.get("url")===r}),null!=t&&a.isViewerable(w.fileExt(t.get("url"))))?(e.preventDefault(),s.show({model:n,idAttachment:t.id})):void 0},t}(_)},{}],287:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=function(e,t){function n(){this.constructor=e}for(var r in t)j.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},j={}.hasOwnProperty;r=e("jquery"),o=e(286),i=e(511),a=e(437),u=e(513),c=e(561),l=e(7),d=e(100),p=e(22),h=e(566),f=e(569),g=e(107),v=e(133),b=e("underscore"),w=e(145),_=e(109),k=e(546),C=e(51),y=e(104),m=e(521),t.exports=_(i,u,m,s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.events=v.extendEvents({"click .js-confirm-delete-action":"confirmDeleteAction","click .js-edit-action":"editAction","click .js-discard-comment-edits":"cancelEdit","click .js-save-edit":"saveEdit","keyup .js-text":"keyAutoMention","keydown .js-text":"keydownJsText","input .js-text":"checkLength","mutated .js-text":"checkLength","click .js-comment-add-attachment":"commentAddAttachment","click .js-comment-mention-member":"commentMentionMember","click .js-comment-add-emoji":"commentAddEmoji","click .js-comment-add-card":"commentAddCard","click .js-attach-link":"attachLink"}),t.prototype.potentialAttachments=function(){var e;return e=this.model.getCard(),b.filter(w(this.model.get("data").text,g.comments),function(t){var n;return n=t.url,!e.attachmentList.any(function(e){return e.get("url")===n})})},t.prototype.getContext=function(){var e,n;return n=t.__super__.getContext.apply(this,arguments),e=this.model.getCard(),n.canAttachLink=null!=e&&e.editable()&&this.potentialAttachments().length>0,n},t.prototype.confirmDeleteAction=function(e){v.stop(e),c.toggle("delete comment",{elem:r(e.target).closest(".js-confirm-delete-action")[0],model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return C("Card","Delete Comment"),e.model.destroy()}}(this)})},t.prototype.getTextInput=function(){return this.$(".js-text")},t.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},t.prototype.editAction=function(e){return v.stop(e),this.$el.hasClass("is-editing")?void 0:(this.$el.addClass("is-editing"),this.$("textarea").focus().select(),this.openEditView())},t.prototype.openEditView=function(){this.$el.append(k.fill("comment_edit_controls")),this.$(".js-text").attr("placeholder","").autosize()},t.prototype.keydownJsText=function(e){return d.isForceSubmitEvent(e)?this.saveEdit(e):d.getKey(e)===p.Escape?(v.stop(e),this.cancelEdit()):this.checkInsert(e)},t.prototype.saveEdit=function(e){var t;("keypress"!==e.type||d.isForceSubmitEvent(e)||d.getKey(e)===p.Enter&&(!r(e.target).is("textarea")||r(e.currentTarget).hasClass("single-line")))&&(v.stop(e),t=this.$(".js-text").val(),this.$(".js-spinner").show(),this.$(".js-hide-on-sending").hide(),this.$(".current-comment").text(t),h.cancelEdit(this.$el),this.model.get("display").entities.comment.text=t,this.model.update("text",t),this.$(".js-text").trigger("autosize.destroy"),f.hide(),C("Card","Edit Comment"))},t.prototype.showError=function(e){},t.prototype.cancelEdit=function(){var e;e=this.model.get("data").text,this.$(".js-text").val(e),h.cancelEdit(this.$el),this.$(".js-text").trigger("autosize.destroy")},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.attachLink=function(e){var t;return v.stop(e),t=this.potentialAttachments(),f.toggle({elem:r(e.currentTarget),view:new a({model:this.getCard(),modelCache:this.modelCache,links:t})})},t}(o))},{}],288:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(35),i=e(133),a=e(549),s=e(51),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.events=function(){return{click:this.click,"click .js-close-ad":this.close}},t.isEligible=function(e){return!1},t.prototype.getAdId=function(){return this.constructor.adId},t.prototype.click=function(){return s("Ad",this.getAdId(),"Click")},t.prototype.close=function(e){var t;return i.stop(e),null!=(t=this.getAdId())&&(s("Ad",this.getAdId(),"Dismiss"),o.me().dismiss(t)),this.$el.slideUp(100)},t}(a)},{}],289:[function(e,t,n){var r,o,i,a=[].slice;r=e(290),o=e(291),i=e("underscore"),t.exports=new(function(){function e(){}return e.prototype._findAd=function(){var e,t,n;return e=arguments[0],n=arguments[1],t=3<=arguments.length?a.call(arguments,2):[],i.find(e,function(e){return!n.isDismissed(e.adId)&&e.isEligible.apply(e,[n].concat(a.call(t)))})},e.prototype.addMemberToOrganizationAd=function(e,t){return this._findAd.apply(this,[[o]].concat(a.call(arguments)))},e.prototype.boardsListAd=function(e,t){return this._findAd.apply(this,[[r]].concat(a.call(arguments)))},e}())},{}],290:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(293),i=e(133),a=e(546),t.exports=r=function(e){
function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.adId="BoardsListBC",t.isEligible=function(e){var t,n,r,o;return(o=function(e,t){return i.idToDate(e.id)<i.dateBefore(t)})(e,{months:1})?(r=e.organizationList,t=r.any(function(e){return e.isPremium()}),n=r.any(function(e){return o(e,{weeks:1})}),!t&&n):void 0},t.prototype.className="member-boards-list-ad business-class-ad window-title-extra--bc-pitch",t.prototype.copyHtml=function(){return a.fill("ad_business_class")},t.prototype.click=function(){return t.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},t}(o)},{}],291:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(292),i=e(546),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.adId="AddOrganizationMemberBC",t.isEligible=function(e,t){return null!=t&&!t.isPremium()},t.prototype.copyHtml=function(){return i.fill("ad_business_class_google_apps")},t}(o)},{}],292:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(295),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.className="pop-over-ad business-class-ad",t.prototype.iconClass=function(){return"business-class-mark"},t.prototype.click=function(){return t.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},t}(o)},{}],293:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(288),i=e(546),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.tagName="span",t.prototype.className="member-boards-list-ad",t.prototype.render=function(){return this.$el.html(i.fill("member_boards_list_ad",{copyHtml:this.copyHtml()})),this},t.prototype.copy=function(){return""},t}(r)},{}],294:[function(e,t,n){var r,o,i;r=e("react"),o=e(541)("paid_product_info"),i=e(51),t.exports=r.createClass({displayName:"PaidProductBannerComponent",render:o.renderable(function(){var e,t,n,r,a,s,u;return u=function(){return i("Billing Page","See All Benefits Link Click")},r=this.props,a=r.stringsKey,s=r.subtitleCount,n=r.infoUrl,e=r.epilogueCount,t=r.icon,o.div(".billing-intro.u-clearfix",function(){return o.div(".billing-intro-header",{style:{marginBottom:"25px"}},function(){var e,t,n;for(o.h1(".billing-intro-header-title",function(){return o.format([a,"title"])}),t=e=0,n=s;n>=0?n>e:e>n;t=n>=0?++e:--e)o.p(".billing-intro-header-text",function(){return o.format([a,"subtitles",t])})}),o.ul(".billing-intro-list",function(){var e,t;for(t=e=0;3>e;t=++e)o.li(".billing-intro-list-item",function(){return o.h3(function(){return o.format([a,"featureHeaders",t])}),o.p(function(){return o.format([a,"featureBodies",t])})})}),e&&o.div(".billing-intro-header",function(){var t,n,r;for(n=t=0,r=e;r>=0?r>t:t>r;n=r>=0?++t:--t)o.p(function(){return o.format([a,"epilogue recent",n])})}),o.div(".billing-intro-more",function(){return o.a(".billing-intro-more-link.quiet-button",{href:n,target:"_blank",onClick:u},function(){return o.format([a,"link"])})})})})})},{}],295:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(288),i=e(546),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.className="pop-over-list-ad",t.prototype.render=function(){return this.$el.html(i.fill("pop_over_ad",{copyHtml:this.copyHtml(),iconClass:this.iconClass()})),this},t.prototype.copyHtml=function(){return""},t}(r)},{}],296:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),i=e(563),a=e(280),s=e(566),u=e(569),c=e(284),l=e(549),d=e(156),p=e("underscore"),h=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){var e,t;this.updatePinnedDrawer(),d.ensureRun(),window.Dialog=i,this.listenTo(c,"change:pinBoardsListSidebar",function(){return this.updatePinnedDrawer()}),this.initLabelState(),t=function(e){d.calc(),u.onWindowResize(),i.isVisible&&i.calcPos()},e=this.debounce(t,300),r(window).on("resize.windowEvent",e)},t.prototype.updatePinnedDrawer=function(){return r("body").toggleClass("body-pinned-drawer",c.getPinSidebar())},t.prototype.initLabelState=function(){return a.getShowText()&&r(document.body).addClass("body-card-label-text"),this.listenTo(a,"change:showText",this.toggleLabelText)},t.prototype.toggleLabelText=function(){return this.resetLabelTextAnimationTimer&&clearTimeout(this.resetLabelTextAnimationTimer),a.getShowText()?r(document.body).removeClass("body-card-label-text-off").addClass("body-card-label-text-on"):r(document.body).removeClass("body-card-label-text-on body-card-label-text").addClass("body-card-label-text-off"),this.resetLabelTextAnimationTimer=setTimeout(this.resetLabelTextAnimation,1e3)},t.prototype.resetLabelTextAnimation=function(){var e;return e=r(document.body),a.getShowText()&&e.addClass("body-card-label-text"),e.removeClass("body-card-label-text-on").removeClass("body-card-label-text-off")},t}(l)},{}],297:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(299),i=e(300),a=e(133),s=e(549),c=e(546),u=e(104),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="archive",t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-switch-section":"didClickSwitchSections","input .js-search":"searchChanged"},t.prototype.initialize=function(){return this.searchText=this.slot(""),this.cardsView=this.subview(o,this.model,{searchText:this.searchText}).render(),this.listsView=this.subview(i,this.model,{searchText:this.searchText}).render(),this.activeSubview=this.slot(this.cardsView)},t.prototype.searchChanged=function(){return this.searchText.set(this.$searchInput.val().trim())},t.prototype.didClickSwitchSections=function(e){var t;return t=function(e,t,n){return e===t?n:t},this.activeSubview.set(t(this.activeSubview.get(),this.cardsView,this.listsView)),this.$searchInput.focus(),a.stop(e)},t.prototype.injectSubview=function(e){return this.$(".js-archive-content").append(e.el),e.didBecomeActive()},t.prototype.renderOnce=function(){return this.$el.html(c.fill("board_archive")),this.$searchInput=this.$(".js-search"),this.subscribeChanges(this.activeSubview,{in:this.injectSubview,out:function(e){return e.$el.detach()}}),this.watch("activeSubview",function(e){return function(t){var n;return n=t===e.cardsView?"switch to archived lists":"switch to archived cards",e.$(".js-switch-section").text(u(n))}}(this)),this.watch("activeSubview.isLoading",function(e){return function(t){return e.$(".js-loading-spinner").toggleClass("hide",!t),e.$(".js-archive-content").toggleClass("hide",t)}}(this)),this},t}(s)},{}],298:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),i=e(447),a=e(561),s=e(7),u=e(563),c=e(133),l=e(549),d=e(546),p=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.tagName="div",t.prototype.className="archived-list-card",t.prototype.events={"click .list-card":"openCard","click .js-delete":"deleteModel","click .js-reopen":"reopen"},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t,n;return t={reOpenText:this.options.reOpenText,canDelete:null!=(n=this.options.canDelete)?n:!1},e=this.subview(i,this.model,{dontFilter:!0}),e.render(),this.$el.append(e.el),this.$el.append(d.fill("archived_card_options",t,{editable:this.model.editable()})),this},t.prototype.openCard=function(e){c.stop(e),s.showCardDetail(this.model),u.calcPos()},t.prototype.deleteModel=function(e){var t;c.stop(e),a.toggle("delete card",{elem:null!=(t=r(e.target).closest(".js-delete"))?t[0]:void 0,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),p("Card","Delete","Via Archive")}}(this)})},t.prototype.reopen=function(e){return c.preventDefault(e),this.model.update({closed:!1},function(e){return function(){return p("Card","Reopen","Via Archive")}}(this)),!1},t}(l)},{}],299:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].slice;r=e(298),i=e(83),a=e("hearsay"),s=e(40),u=e(549),c=e("underscore"),p=e(546),d=e(104),l=e(245),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n,o,a;return h(t,e),t.prototype.CARDS_PER_PAGE=30,o={},a=function(e){var t;return t=o,{lease:function(){var n;return n=function(){(t===o||n===t)&&e.apply(this,arguments)},t=n,n}}},t.prototype.initialize=function(e){var t;return this.searchText=e.searchText,this.isLoadingInitialCards=this.slot(!1),this.isLoadingMoreCards=this.slot(!1),this.isLoadingSearchResults=this.slot(!1),this.isLoading=this.using(this.isLoadingInitialCards.or(this.isLoadingSearchResults)),this.isSearching=this.using(this.searchText.map(function(e){return e.length>0}).distinct()),this.hasMoreCards=this.slot(!1),this.searchResults=this.slot([]),this.sortedContiguousCards=this.slot([]),this.updateSearchCallback=a(function(e){return function(t){var n;return n=t.map(function(t){return e.modelCache.get("Card",t.id)}),e.searchResults.set(n),e.isLoadingSearchResults.set(!1)}}(this)),t=function(e){return function(t){return e.sortedContiguousCards.set(c.without(e.sortedContiguousCards.get(),t)),e.searchResults.set(c.without(e.searchResults.get(),t))}}(this),this.listenTo(this.modelCache,{"remove:Card":t,"change:Card:closed":function(e){return function(n){n.get("idBoard")===e.model.id&&(n.get("closed")?e.sortedContiguousCards.set([n].concat(f.call(e.sortedContiguousCards.get()))):t(n))}}(this)}),this.cards=this.using(this.isSearching.if(this.searchResults,this.sortedContiguousCards))},t.prototype.events={"click .js-more-cards":"getMoreCards"},n=!1,t.prototype.didBecomeActive=function(){var e;if(!this.hasBeenActiveBefore)return this.hasBeenActiveBefore=!0,e={limit:this.CARDS_PER_PAGE},this.isLoadingInitialCards.set(!0),s.loadClosedCards(this.model.id,e).tap(l(this,"didLoadContiguousCards")).finally(function(e){return function(){return e.isLoadingInitialCards.set(!1)}}(this)).done()},t.prototype.didLoadContiguousCards=function(e){var t,n;return this.hasMoreCards.set(e.length===this.CARDS_PER_PAGE),n=c.sortBy(e,function(e){return function(t){return-e.cardSortRank(t)}}(this)),t=f.call(this.sortedContiguousCards.get()).concat(f.call(n)),this.sortedContiguousCards.set(c.uniq(t))},t.prototype.cardSortRank=function(e){var t,n;return null!=(n="function"==typeof(t=i.parse(e.get("dateLastActivity"))).getTime?t.getTime():void 0)?n:null},t.prototype.getMoreCards=function(){var e,t;return e=c.last(this.sortedContiguousCards.get()),t={limit:this.CARDS_PER_PAGE,before:null!=e?this.cardSortRank(e):null},this.isLoadingMoreCards.set(!0),s.loadClosedCards(this.model.id,t).tap(l(this,"didLoadContiguousCards")).finally(function(e){return function(){return e.isLoadingMoreCards.set(!1)}}(this)).done()},t.prototype.vigor=t.VIGOR.SOME,t.prototype.renderOnce=function(){var e,t;return this.$el.html(p.fill("archived_cards")),this.watch("isLoadingMoreCards",function(e){return this.$(".js-more-cards").attr("disabled",e)}),t=this.hasMoreCards.and(this.isSearching.not()),this.subscribe(t,function(e){return this.$(".js-more-cards").toggleClass("hide",!e)}),this.watch("isSearching",function(e){var t;return t=e?"no results":"no archived cards",this.$(".js-empty-message").text(d(t))}),this.watch("cards",function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)}),this.watch("isLoadingSearchResults",function(e){return this.$(".js-search-loading").toggleClass("hide",!e)}),e=this.debounce(this.loadSearchResults,400),this.subscribe(this.searchText.filter(function(e){return e.length>0}),function(){return this.isLoadingSearchResults.set(!0),e.call(this)}),this.subscribe(this.cards,this.frameDebounce(this.renderCards))},t.prototype.loadSearchResults=function(){var e;return e={query:"is:archived "+this.searchText.get(),modelTypes:"cards",idBoards:this.model.id,card_stickers:!0,card_attachments:"cover",partial:!0},s.loadSearchData(e).get("cards").then(this.updateSearchCallback.lease()).done()},t.prototype.renderCards=function(){var e,t,n;e=this.$(".js-archive-items"),e.children().detach(),n=function(){var e,n,o,i;for(o=this.cards.get(),i=[],e=0,n=o.length;n>e;e++)t=o[e],i.push(this.subview(r,t,{reOpenText:d("unarchive card"),canDelete:!0}));return i}.call(this),this.appendSubviews(n,e)},t}(u)},{}],300:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].slice;o=e(301),i=e(40),a=e(133),s=e(549),u=e("underscore"),l=e(546),c=e(104),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.initialize=function(e){return this.searchText=e.searchText,this.isLoading=this.slot(!0),this.allArchivedLists=this.slot([]),this.sortedFilteredLists=this.allArchivedLists.combine(this.searchText).map(function(e){var t,n,r;return n=e[0],r=e[1],""===r?n:(t=a.buildFuzzyMatcher(r),u.filter(n,function(e){return t(e.get("name"))}))}).map(function(e){return u.sortBy(e,function(e){return e.get("name")})}),this.using(this.sortedFilteredLists),this.listenTo(this.modelCache,"change:List:closed",function(e){return function(t){return t.get("closed")?e.allArchivedLists.set([t].concat(h.call(e.allArchivedLists.get()))):e.allArchivedLists.set(u.without(e.allArchivedLists.get(),t))}}(this))},t.prototype.hasBeenActiveBefore=!1,t.prototype.didBecomeActive=function(){this.hasBeenActiveBefore||(this.hasBeenActiveBefore=!0,i.loadArchivedLists(this.model.id).then(function(e){return function(t){var n;return n=e.modelCache.find("List",function(t){return t.get("idBoard")===e.model.id&&t.get("closed")}),e.allArchivedLists.set(n),e.isLoading.set(!1)}}(this)))},t.prototype.vigor=t.VIGOR.SOME,t.prototype.renderOnce=function(){return this.$el.html(l.fill("archived_lists")),this.watch("searchText",function(e){var t;return t=0===e.length?"no archived lists":"no results",this.$(".js-empty-message").text(c(t))}),this.watch("sortedFilteredLists",function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)}),this.watch("sortedFilteredLists",this.frameDebounce(this.renderLists))},t.prototype.renderLists=function(){var e,t;return this.$(".js-archive-items").children().detach(),e=function(){var e,n,r,i;for(r=this.sortedFilteredLists.get(),i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(this.subview(o,t,{reOpenText:c("unarchive list"),canDelete:!1}));return i}.call(this),this.appendSubviews(e,this.$(".js-archive-items")),this},t}(s)},{}],301:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(561),i=e(569),a=e(133),s=e(549),l=e(51),u=e(544)("archive_item"),c=u.renderable(function(e){var t,n,r,o,i,a;return a=e.url,o=e.name,r=e.deleting,n=e.canReopen,i=e.reOpenText,t=e.canDelete,u.p(".item-name",function(){return a&&!r?u.a({href:a},function(){return u.text(o)}):u.span(function(){return u.text(o)})}),r?u.div(".options.quiet",function(){return u.format("deleting")}):u.div(".options",function(){return n&&u.a(".button-link.js-reopen",{href:"#"},function(){return u.icon("refresh"),u.text(" "),u.text(i)}),t?u.a(".button-link.negate.js-delete",{href:"#"},function(){return u.icon("remove","delete")}):void 0})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.tagName="li",t.prototype.className="u-clearfix",t.prototype.events={"click .js-reopen":"reopen","click .js-delete":"delete"},t.prototype.initialize=function(){return this.listenTo(this.model,"deleting",this.render)},t.prototype.canReopen=function(){return null!=this.model.owned?this.model.owned():this.model.editable()},t.prototype.canDelete=function(){var e;return"function"==typeof(e=this.model).owned?e.owned():void 0},t.prototype.render=function(){var e,t;return this.$el.html(c({name:this.model.get("name"),url:"function"==typeof(e=this.model).getUrl?e.getUrl():void 0,reOpenText:this.options.reOpenText,canDelete:this.canDelete(),canReopen:this.canReopen(),deleting:"function"==typeof(t=this.model).isDeleting?t.isDeleting():void 0})),this},t.prototype.reopen=function(e){return a.preventDefault(e),i.hide(),this.model.update({closed:!1},function(e){return function(){var t;return l(e.model.typeName,"Reopen","Via Archive"),"function"==typeof(t=e.options).onReopen?t.onReopen(e.model):void 0}}(this)),!1},t.prototype.delete=function(e){return a.stop(e),o.toggle("delete board",{elem:e.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.startDelete().then(function(){return l("Board","Delete","Via Closed Boards List")}).done()}}(this)})},t}(s)},{}],302:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(301),i=e(7),a=e(549),c=e(546),u=e(104),s=e(245),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.boardList,{"change:closed add remove reset":this.frameDebounce(this.render)})},t.prototype.render=function(){var e,t,n,o;return t=this.model.boardList,n={empty:0===t.filter(function(e){return e.get("closed")}).length},this.$el.html(c.fill("closed_boards",n)),e=this.$(".js-archive-items"),o=t.filter(s.method("get","closed")).map(function(e){return function(t){return e.subview(r,t,{onReopen:e.onReopen.bind(e),reOpenText:u("unarchive board")})}}(this)),this.appendSubviews(o,e),this},t.prototype.onReopen=function(e){return i.displayBoard({idBoard:e.id}).done()},t}(a)},{}],303:[function(e,t,n){t.exports=e(253)("Attachment::LimitExceeded")},{}],304:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V=function(e,t){function n(){this.constructor=e}for(var r in t)z.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},z={}.hasOwnProperty;S=e("underscore"),r=e(306),i=e(510),a=e(35),s=e(82),c=e(561),l=e(83),d=e(100),p=e(22),h=e(37),M=e(537),f=e(532),g=e(531),v=e(533),b=e(536),w=e(718),k=e(308),_=e(569),C=e("bluebird"),m=e(708),y=e(717),B=e(88),x=e(133),j=e(549),E=e(151),O=e(104),P=e(544)("plugin_attachment_thumbnail"),L=e(742),D=e(51),I=e(56),u=e(41),N=e("xtend"),A=P.renderable(function(e){var t,n,r,o,i,a,s,u,c,l,d,p,h;return t=e.canRemove,n=e.canReply,r=e.created,o=e.createdBy,i=e.image,s=e.isHidden,a=e.initialize,c=e.modified,l=e.modifiedBy,d=e.title,h=e.url,s?P.div:((null==i||null==i.url)&&(i={url:""}),u={href:h,target:h,title:d},p=function(){return n&&P.span(function(){return P.a(".attachment-thumbnail-details-title-options-item.js-reply",{href:"#"},function(){return P.span(".attachment-thumbnail-details-options-item-text",function(){return P.format("comment")})})}),t?P.span(function(){return P.a(".attachment-thumbnail-details-title-options-item.dark-hover.js-confirm-delete",{href:"#"},function(){return P.span(".attachment-thumbnail-details-options-item-text",function(){return P.format("remove")})})}):void 0},i.logo?P.a(".attachment-thumbnail-preview",S.clone(u),function(){return P.span(".attachment-thumbnail-preview-power-up-logo",function(){return P.img({class:"attachment-thumbnail-preview-power-up-logo-image",src:i.url+"?color=999"})})}):P.a(".attachment-thumbnail-preview",N(u,{style:P.stylify({"background-image":i.url?P.urlify(i.url):void 0,"background-position-y":"top"===i.y?"0px":void 0,"background-position-x":"left"===i.x?"0px":void 0,"background-size":function(){switch(i.size){case"cover":return"cover";case"original":return"inherit";default:return"contain"}}()})})),void P.p(".attachment-thumbnail-details",function(){var e,t;return P.span(".attachment-thumbnail-name.js-attachment-name",function(){return P.text(d)}),P.span(".quiet.attachment-thumbnail-details-options",function(){return P.a(".attachment-thumbnail-details-title-action.dark-hover.js-attachment-action",S.clone(u),function(){return P.icon("external-link"),P.span(".attachment-thumbnail-details-options-item-text.js-direct-link")})}),P.textarea(".attachment-thumbnail-details-title.js-attachment-thumbnail-details hide",{maxlength:256},function(){return P.text(d)}),P.span(".u-block.quiet.attachment-thumbnail-details-title-options",function(){return p()}),null!=r&&(P.span(".u-block.quiet",function(){return null!=o?P.format("created-by",{date:r,user:o}):P.format("created",{date:r})}),null!=c&&P.span(".u-block.quiet",function(){return null!=l?P.format("modified-by",{date:c,user:l}):P.format("modified",{date:c})})),null!=a&&"iframe"===a.type?(t=a.url,e=a.height,P.iframe(".plugin-iframe.plugin-thumbnail-initialize",{src:t,style:e?"height:"+e+"px;":void 0})):void 0}))}),T=function(e,t){return null==t&&(t=null),e.catch(f.Error.UnableToLoadManifest,function(){return t})},t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return V(t,e),t.prototype.className="attachment-thumbnail",t.prototype.events={"click .js-open-viewer":"openViewer","click .js-open-in-new-window":"openLink","click .js-direct-link":"dontOpenViewer","click .js-download":"download","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover","click .js-confirm-delete":"confirmDelete","click .js-reply":"reply","click .js-enable-power-up":"enablePowerUp","click .js-attachment-name":"enableEditAttachmentName","click .js-attachment-thumbnail-details":"dontOpenViewer","click .js-show-power-up-suggestions-info":"showPowerUpSuggestionsInformation","keydown .js-attachment-thumbnail-details":"onEditAttachmentName","blur .js-attachment-thumbnail-details":"saveAttachmentName",moveattachment:"rearrangeAttachment"},t.prototype.initialize=function(){return this.isEditingAttachmentName=!1,this.powerUpEnablementInProgress=!1,this.listenTo(a.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.renderNormal)),this.listenTo(a.me(),"change:messagesDismissed",this.frameDebounce(this.renderNormal))},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=this.model.getCard(),e=t.getBoard(),this.subscribe(M(e,t).combine(t.snoop("idAttachmentCover").combine(this.model.snoop("previews").combine(this.model.snoop("name")))),function(e){return function(){return e.renderPluginThumbnail().catch(b.Error.NotHandled,function(){return e.renderNormal()}).done()}}(this)),this},t.prototype.renderPluginThumbnail=function(){var e,t,n;return t=this.model.getCard(),e=t.getBoard(),n=this.model.get("name"),b.one({command:"attachment-thumbnail",card:t,board:e,options:v.attachment(this.model)}).then(function(r){return function(o){var i;return null!=(null!=o?o.title:void 0)&&null!=(i=r.options)&&"function"==typeof i.onPluginThumbnail&&i.onPluginThumbnail(o.idPlugin),(null!=o?o.url:void 0)&&E(o.url)||(o.url=r.model.get("url")),r.options.isHidden&&r.$el.addClass("hide"),r.$el.html(A(N({url:r.model.get("url")},o,{canRemove:r.model.editable(),canReply:null!=r.options.onReply&&e.canComment(a.me()),created:o.created?new Date(o.created):void 0,modified:o.modified?new Date(o.modified):void 0,title:n===o.url.slice(0,256)?o.title:n,isHidden:r.options.isHidden}))),l.update(r.el),r.initIFrames(e,t),r.$(".js-attachment-thumbnail-details").autosize({append:!1})}}(this)).return()},t.prototype.renderNormal=function(){var e,t;return t=this.model.getCard(),e=t.getBoard(),C.all([r.getAttachmentData(this.model),C.try(function(t){return function(){return e.getAvailablePlugins().filter(function(e){return e.id===k.getPowerUpIdFromClaimedPowerUpDomains(t.model.get("url"))}).map(function(e){var t;return t=g.get(e),C.props({id:e.id,name:t.getName(),details:T(t.getDetails()),iconUrl:T(t.getIconUrl())})}).get(0)}}(this))]).spread(function(e){return function(n,o){var i,c,d,p,m,f,g,v,b,y;return n.canUseViewer="dropbox"!==e.model.getServiceKey()&&r.isViewerable(n.ext)&&!s.isTouch(),n.canReply=null!=(p=e.model.getCard().getBoard())?p.canComment(a.me()):void 0,d=null!=(m=e.model.smallestPreviewBiggerThan(110,80))?m:e.model.biggestPreview(),s.isHighDPI()&&(c=e.model.smallestPreviewBiggerThan(220,160),d=null!=c?c:d),null!=d&&(y=null!=(f=t.getBoard())&&null!=(g=f.get("prefs"))?g.cardCovers:void 0,n.isCover=y&&t.get("idAttachmentCover")===e.model.id,n.imgSrc=d.url),n.isUpload=e.model.get("isUpload"),n.editable=e.model.editable(),e.suggestedPlugin=o,(null!=(v=e.suggestedPlugin)?v.id:void 0)&&(t.getBoard().isPluginEnabled(e.suggestedPlugin.id)?n.pluginEnablementInProgress=null!=e.powerUpEnablementInProgress&&e.powerUpEnablementInProgress:a.me().shouldShowPowerUpSuggestionFor(e.suggestedPlugin.id)&&(I("card-detail","views","Power-Up enable suggestion","","","",e.suggestedPlugin.id),n.plugin=e.suggestedPlugin)),((null!=(b=t.getBoard().getOrganization())?b.isFeatureEnabled("plugins"):void 0)||!u.get("dontUpsell"))&&(n.upsellEnabled=!0),e.options.isHidden&&e.$el.addClass("hide"),e.$el.html(L(N(n,{isHidden:e.options.isHidden}))),e.renderCoverState(),l.update(e.el),n.isKnownService&&(i=e.$(".js-attachment-thumbnail-details"),h.thumbnailHtml(n.url,n,function(e,t){return null==e&&null!=t?(i.html(t),l.update(i)):void 0})),e.$(".js-attachment-thumbnail-details").autosize({append:!1})}}(this)).done(),this},t.prototype.openViewer=function(e){e.metaKey||e.ctrlKey||this.isEditingAttachmentName||(x.stop(e),i.isActive()||(i.show({model:this.model.getCard(),attachmentModel:this.model}),D("Attachment","Open Attachment Viewer",this.model.getType())))},t.prototype.dontOpenViewer=function(e){return e.stopPropagation()},t.prototype.renderCoverState=function(){var e,t,n,r,o,i,a,s;n=null!=(o=this.model.getCard())&&null!=(i=o.getBoard())?i.getPref("cardCovers"):void 0,e=this.$(".js-make-cover").addClass("hide"),t=this.$(".js-remove-cover").addClass("hide"),(null!=(a=this.model.get("previews"))?a.length:void 0)>0&&n&&(r=(null!=(s=this.model.getCard())?s.get("idAttachmentCover"):void 0)===this.model.id,e.toggleClass("hide",r),t.toggleClass("hide",!r))},t.prototype.download=function(e){x.stopPropagation(e),D("Attachment","Attachment Thumbnail","Download")},t.prototype.makeCover=function(e){x.stop(e),_.hide(),this.model.getCard().makeCover(this.model),D("Attachment","Attachment Thumbnail","Make Cover")},t.prototype.removeCover=function(e){x.stop(e),_.hide(),this.model.getCard().removeCover(null),D("Attachment","Attachment Thumbnail","Remove Cover")},t.prototype.confirmDelete=function(e){var t;x.stop(e),t=this.model.get("isUpload")?"delete attachment":"remove attachment",c.toggle(t,{elem:this.$(".js-confirm-delete"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),D("Attachment","Delete Attachment",e.model.getType())}}(this)}),D("Attachment","Attachment Thumbnail","Confirm Delete")},t.prototype.reply=function(e){return x.stop(e),this.options.onReply()},t.prototype.enablePowerUp=function(e){var t,n;return x.stop(e),t=this.model.getCard().getBoard(),n=this.suggestedPlugin,t.canEnableAdditionalPowerUps()?t.isPluginEnabled(n.id)?void this.renderNormal():(this.powerUpEnablementInProgress=!0,this.renderNormal(),t.enablePlugin(n.id).then(function(e){return function(){return e.powerUpEnablementInProgress=!1,e.renderNormal()}}(this)).done(),void I("card-detail","enables","Power-Up","","","enable button",n.id)):void _.toggle({elem:this.$(e.target),view:new m({model:t,plugin:n}),autoPosition:!0})},t.prototype.enableEditAttachmentName=function(e){return this.model.getCard().editable()?(x.stopPropagation(e),this.isEditingAttachmentName=!0,this.$(".js-attachment-name").addClass("hide"),this.$(".js-attachment-action").addClass("hide"),this.$(".js-attachment-thumbnail-details").removeClass("hide").trigger("autosize.resize").focus().select()):void 0},t.prototype.showPowerUpSuggestionsInformation=function(e){var t,n,r;I("card-detail","views","Power-Up enable suggestion info screen","","","by clicking the info icon",this.suggestedPlugin.id),x.stopPropagation(e),n=this.model.getCard(),t=n.getBoard(),r={model:this.suggestedPlugin,board:t},_.toggle({elem:this.$(e.target),view:new y(r),autoPosition:!0})},t.prototype.onEditAttachmentName=function(e){var t;return t=this.$(e.currentTarget).trigger("autosize.resize"),d.getKey(e)===p.Enter||d.getKey(e)===p.Escape?(x.stop(e),t.blur()):void 0},t.prototype.saveAttachmentName=function(e){var t,n,r,o;return this.isEditingAttachmentName=!1,n=this.$(e.currentTarget),t=this.$(".js-attachment-name"),r=n.val().replace(/\s+/g," ").trim(),o=this.model.get("name"),r.length>256&&(r=r.substring(0,256),n.text(r)),r!==o&&r.length>0?(t.text(r),this.model.update("name",r)):(n.val(o),t.text(o)),this.$(".js-attachment-name").removeClass("hide"),this.$(".js-attachment-action").removeClass("hide"),this.$(".js-attachment-thumbnail-details").addClass("hide")},t.prototype.rearrangeAttachment=function(e,t){var n,r,o;return r=this.model.getCard(),null!=r?(n=t.item.parent().children(),o=n.index(t.item),this.model.update("pos",r.calcAttachmentPos(o,this.model)),this.model.collection.sort({silent:!0}),this.$(".plugin-iframe").length&&this.renderPluginThumbnail(),D("Attachment","Reorder Attachment")):void 0},t.prototype.openLink=function(){var e;return e=this.model.get("url"),window.open(e,e)},t}(w)},{}],305:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(306),a=e(83),s=e(22),u=e(533),c=e(536),l=e(569),d=e("bluebird"),p=e(547),h=e(133),m=e(549),f=e("underscore"),v=e(546),b=e(51),g=e(104),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.className="attachment-viewer",t.prototype.initialize=function(){var e,t;return l.hide(),this.allowsCardCovers=null!=(t=this.model.getBoard())?t.getPref("cardCovers"):void 0,this.currentAttachment=this.options.attachmentModel,e=this.options.idAttachment,null!=e&&(this.currentAttachment=this.model.attachmentList.find(function(t){return t.id===e})),this.idPluginAttachments=[],this.getIdPluginAttachments(),this.idTrelloAttachments=[],this.getIdTrelloAttachments(),this.listenTo(this.model.attachmentList,"add remove reset",this.getIdPluginAttachments);
},t.prototype.events={"click .js-show-next-frame":"showNextFrame","click .js-show-prev-frame":"showPrevFrame","mouseenter .js-show-next-frame":"hintNextFrame","mouseenter .js-show-prev-frame":"hintPrevFrame","mouseleave .js-show-next-frame":"clearHint","mouseleave .js-show-prev-frame":"clearHint","click .js-stop":"stop","click .js-close-viewer":"close","click .js-open-delete-confirm":"openDeleteConfirm","click .js-close-delete-confirm":"closeDeleteConfirm","click .js-delete":"delete","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover",shortcut:"shortcut"},t.prototype.shortcut=function(e){switch(e){case s.Escape:return this.close(),["Esc - Close Attachment Viewer","Attachment Viewer"];case s.ArrowRight:return this.showNextFrame(),["Right Arrow - Next Attachment","Attachment Viewer"];case s.ArrowLeft:return this.showPrevFrame(),["Left Arrow - Previous Attachment","Attachment Viewer"]}},t.prototype.getAttachmentModels=function(){return this.model.attachmentList.filter(function(e){return function(t){var n,r;return n=t.id,_.call(e.idPluginAttachments,n)<0&&(r=t.id,_.call(e.idTrelloAttachments,r)<0)}}(this))},t.prototype.getAttachmentModelsLength=function(){return this.getAttachmentModels().length},t.prototype.getCurrentAttachmentIndex=function(){return f.indexOf(this.getAttachmentModels(),this.currentAttachment)},t.prototype.getPrevAttachmentIndex=function(){var e;return e=this.getCurrentAttachmentIndex()+1,e>=this.getAttachmentModelsLength()?null:e},t.prototype.getPrevModel=function(){var e;return e=this.getPrevAttachmentIndex(),null!=e?this.getAttachmentModels()[e]:null},t.prototype.getNextAttachmentIndex=function(){var e;return e=this.getCurrentAttachmentIndex()-1,0>e?null:e},t.prototype.getNextModel=function(){var e;return e=this.getNextAttachmentIndex(),null!=e?this.getAttachmentModels()[e]:null},t.prototype.render=function(){var e,t,n,r,o;return e=this.model.toJSON(),e.numAttachments=this.getAttachmentModelsLength(),this.$el.html(v.fill("attachment_viewer",e)),o=this.currentAttachment.id,_.call(this.idPluginAttachments,o)>=0&&(t=this.getAttachmentModels(),this.currentAttachment=t[t.length-1]),this.addNewFrame(this.currentAttachment,"center"),n=this.getNextModel(),null!=n&&this.addNewFrame(n,"right"),r=this.getPrevModel(),null!=r&&this.addNewFrame(r,"left"),this.setDetailsAndControls(),p.addHandler(this,{scope:"attachment_viewer",modal:!0}),this},t.prototype.setDetailsAndControls=function(){o.getAttachmentData(this.currentAttachment).then(function(e){return function(t){var n,r;return t.canMakeCover=e.allowsCardCovers&&(null!=(r=t.previews)?r.length:void 0)>0,t.isCover=e.allowsCardCovers&&e.model.get("idAttachmentCover")===e.currentAttachment.id,n=e.currentAttachment.get("isUpload")?"delete attachment":"remove attachment",f.extend(t,{removeButtonText:g([n,"button"]),removeMessageText:g([n,"message"]),removeConfirmText:g([n,"confirm"]),removeCancelText:g([n,"cancel"])}),e.$(".js-display-frame-details").html(v.fill("attachment_viewer_frame_details",t,{editable:e.model.editable()})),e.$(".js-show-prev-frame").toggleClass("hide",null==e.getPrevAttachmentIndex()),e.$(".js-show-next-frame").toggleClass("hide",null==e.getNextAttachmentIndex()),a.update(e.el)}}(this)).done()},t.prototype.addNewFrame=function(e,t){return o.getAttachmentData(e).then(function(e){return function(n){var i,a,s,u,c,l,d,p,m,f,g,b,y,w;return null!=t&&(n.directionClass="attachment-viewer-frame-"+t),d=n.ext,u=_.call(o.imageExts(),d)>=0||(null!=(p=n.previews)?p.length:void 0)>0,m=n.ext,i=_.call(o.audioExts(),m)>=0,f=n.ext,c=_.call(o.videoExts(),f)>=0,g=n.ext,s=_.call(o.iFrameableExts(),g)>=0,b=n.ext,a=_.call(o.googleViewerableExts(),b)>=0,n.isExternal?n.isPlaceholder=!0:u?(n.isImage=!0,null!=n.previews&&null!=(l=null!=(y=h.biggestPreview(n.previews))?y.url:void 0)&&(n.url=l)):i?n.isAudio=!0:c?n.isVideo=!0:s?n.isIFrameable=!0:a?(n.isIFrameable=!0,w=encodeURIComponent(n.url),n.url="https://docs.google.com/viewer?embedded=true&url="+w):(n.isPlaceholder=!0,n.openText="Download"),e.$(".js-frames").append(v.fill("attachment_viewer_frame",n,{editable:e.model.editable()})),e.defer(function(){return r(".attachment-viewer-frame").addClass("attachment-viewer-frame-loaded")})}}(this)).done(),this},t.prototype.focusFrame=function(e,t){var n,o,i,a;switch(this.currentAttachment=e,n=f.find(this.$(".attachment-viewer-frame"),function(t){return function(t){return r(t).attr("data-idAttachment")===e.id}}(this)),t){case"right":o=this.$(".attachment-viewer-frame-left"),a="attachment-viewer-frame-left",i=this.getNextModel();break;case"left":o=this.$(".attachment-viewer-frame-right"),a="attachment-viewer-frame-right",i=this.getPrevModel()}this.$(".attachment-viewer-frame-center").removeClass("attachment-viewer-frame-center").addClass(a),r(n).removeClass("attachment-viewer-frame-left attachment-viewer-frame-right").addClass("attachment-viewer-frame-center"),o.remove(),null!=i?this.addNewFrame(i,t):this.clearHint(),this.setDetailsAndControls()},t.prototype.showNextFrame=function(e){var t;h.stop(e),t=this.getNextModel(),null!=t&&this.focusFrame(t,"right"),b("Attachment Viewer","Show Next Frame")},t.prototype.showPrevFrame=function(e){var t;h.stop(e),t=this.getPrevModel(),null!=t&&this.focusFrame(t,"left"),b("Attachment Viewer","Show Previous Frame")},t.prototype.hintNextFrame=function(){this.$el.addClass("attachment-viewer-frames-next-hint")},t.prototype.hintPrevFrame=function(){this.$el.addClass("attachment-viewer-frames-prev-hint")},t.prototype.clearHint=function(){this.$el.removeClass("attachment-viewer-frames-next-hint attachment-viewer-frames-prev-hint")},t.prototype.stop=function(e){return h.stopPropagation(e)},t.prototype.openDeleteConfirm=function(e){h.stop(e),this.$(".js-meta").addClass("hide"),this.$(".js-confirm-delete").removeClass("hide"),b("Attachment Viewer","Open Delete Attachment Confirm")},t.prototype.closeDeleteConfirm=function(e){h.stop(e),this.$(".js-meta").removeClass("hide"),this.$(".js-confirm-delete").addClass("hide"),b("Attachment Viewer","Close Delete Attachment Confirm")},t.prototype.delete=function(e){h.stop(e),this.currentAttachment.destroy(),this.close(),b("Attachment Viewer","Delete Attachment")},t.prototype.renderToggleCover=function(){var e,t;e=this.allowsCardCovers&&this.currentAttachment.get("previews").length>0,this.$(".js-cover-options").toggleClass("hide",!e),t=this.allowsCardCovers&&this.model.get("idAttachmentCover")===this.currentAttachment.id,this.$(".js-make-cover-box").toggleClass("hide",t),this.$(".js-remove-cover-box").toggleClass("hide",!t)},t.prototype.makeCover=function(){this.model.makeCover(this.currentAttachment),this.renderToggleCover(),b("Attachment Viewer","Make Cover")},t.prototype.removeCover=function(){this.model.removeCover(null),this.renderToggleCover(),b("Attachment Viewer","Remove Cover")},t.prototype.close=function(){this.remove(),p.removeHandler(this),b("Attachment Viewer","Close Viewer")},t.prototype.getIdPluginAttachments=function(){return this.getIdTrelloAttachments(),c.all({timeout:5e3,command:"attachment-sections",card:this.model,board:this.model.getBoard(),options:{entries:u.attachments(this.model.attachmentList)}}).then(function(e){return function(t){return e.idPluginAttachments=f.chain(t).map(function(e){var t;return null!=e&&null!=(t=e.claimed)?t.map(function(e){return e.id}):void 0}).flatten().value(),e.render()}}(this))},t.prototype.getIdTrelloAttachments=function(){return d.map(this.model.attachmentList.models,o.getAttachmentData).then(function(e){return function(t){return e.idTrelloAttachments=f.chain(t).filter(function(e){var t;return e.isKnownService&&("trello card"===(t=e.type)||"trello board"===t)}).map(function(e){var t;return t=e.id}).value()}}(this))},t}(m)},{}],306:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(82),o=e(106),i=e(37),a=e("bluebird"),s=e(133),l=e(121),d=e("xtend"),u=e("underscore"),c=e(104),t.exports=function(){return{getAttachmentData:function(e){var t,n;return t=e.get("url"),n=e.getServiceKey(),i.interpret(t,e.modelCache).then(function(t){return function(t){var i;if(null!=t)return{isKnownService:!0,meta:t.name,previewClass:t.previewClass,name:t.text,type:t.type};switch(n){case"trello":return i=r.respectsCrossDomainDownloadAttribute(),{meta:o.bytes(e.get("bytes")),openText:c(i?"attachments.trello.download":"attachments.trello.open"),doDownload:i,openIconClass:i?"download":"external-link",isExternal:!1};case"gdrive":return{meta:l(["mime",e.get("mimeType")]),previewClass:"attachment-thumbnail-preview-google-drive-logo"};case"dropbox":return{previewClass:"attachment-thumbnail-preview-dropbox-logo"};case"onedrive":return{previewClass:"attachment-thumbnail-preview-one-drive-logo"};case"box":return{previewClass:"attachment-thumbnail-preview-box-logo"};case"other":return{ext:"LINK"}}}}(this)).then(function(r){var o;return o=d({doDownload:!1,isKnownService:!1,isExternal:!0,openIconClass:"external-link"},e.toJSON(),r),null==o.meta&&(o.meta=c(["attachments",n,"type"])),null==o.openText&&(o.openText=c(["attachments",n,"open"])),null==o.removeText&&(o.removeText=c(["attachments",n,"remove"])),null==o.ext&&(o.ext=s.fileExt(t),null!=o.ext&&o.ext.length>6&&(o.ext=null)),o})},availableExts:function(){var e,t,n,r,o;if(null==this._availableExts){for(e=[],o=navigator.mimeTypes,t=0,n=o.length;n>t;t++)r=o[t],e=e.concat(r.suffixes.split(","));this._availableExts=u.compact(u.uniq(e))}return this._availableExts},imageExts:function(){return["bmp","gif","jpeg","jpg","png","svg","webp"]},getPlayableExts:function(e,t){var n;return n=document.createElement(t),u.chain(e).filter(function(e){var t;return t=e.types,u.any(t,function(e){return""!==n.canPlayType(e)})}).pluck("exts").flatten().value()},audioExts:function(){var e;return this._audioExts?this._audioExts:(e=[{exts:["m4a"],types:["audio/x-m4a;","audio/aac;"]},{exts:["mp3"],types:["audio/mpeg;"]},{exts:["opus"],types:['audio/ogg; codecs="opus"']},{exts:["ogg"],types:['audio/ogg; codecs="vorbis"']},{exts:["wav"],types:['audio/wav; codecs="1"']}],this._audioExts=this.getPlayableExts(e,"audio"))},videoExts:function(){var e;return this._videoExts?this._videoExts:(e=[{exts:["mp4"],types:['video/mp4; codecs="mp4v.20.8"']},{exts:["mov","h264"],types:['video/mp4; codecs="avc1.42E01E"','video/mp4; codecs="avc1.42E01E, mp4a.40.2"']},{exts:["ogv"],types:['video/ogg; codecs="theora"']},{exts:["webm"],types:['video/webm; codecs="vp8, vorbis"']}],this._videoExts=this.getPlayableExts(e,"video"))},googleViewerableExts:function(){var e;return e=["doc","docx","ppt","pptx","rtf","xls","xlsx"],p.call(this.availableExts(),"pdf")>=0||e.push("pdf"),null!=this._googleViewerableExts?this._googleViewerableExts:this._googleViewerableExts=e},iFrameableExts:function(){var e,t;return e=["css","js","txt"],t=["pdf"],null!=this._iFrameableExts?this._iFrameableExts:this._iFrameableExts=u.intersection(t,this.availableExts()).concat(e)},allViewerableExts:function(){return null!=this._viewerableExts?this._viewerableExts:(this._viewerableExts=this.imageExts().concat(this.audioExts()).concat(this.videoExts()).concat(this.googleViewerableExts()).concat(this.iFrameableExts()),this._viewerableExts)},isViewerable:function(e){return p.call(this.allViewerableExts(),e)>=0}}}()},{}],307:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(549),i=e(743),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=function(){return this.$el.html(i()),this},t}(o)},{}],308:[function(e,t,n){var r,o,i;o=e("underscore"),i=e(267),r=e(17),t.exports=new(function(){function e(){}return e.prototype._hasIPAddressFormat=function(e){return/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/.test(e)},e.prototype._urlIsValid=function(e){var t;return null==e?!1:(t=e.protocol,"http:"!==t&&"https:"!==t?!1:this._hasIPAddressFormat(e.hostname)?!1:!0)},e.prototype._findClaimedPowerUpIdFromNakedDomainByHostname=function(e){var t,n;return t=Object.keys(r),n=o.find(t,function(t){var n;return n=e.length-t.length-1,e.slice(n)==="."+t}),r[n]},e.prototype.getPowerUpIdFromClaimedPowerUpDomains=function(e){var t,n;return n=i(e),this._urlIsValid(n)?(t=n.hostname,null!=r[t]?r[t]:this._findClaimedPowerUpIdFromNakedDomainByHostname(t)):void 0},e}())},{}],309:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w=function(e,t){function n(){this.constructor=e}for(var r in t)_.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},_={}.hasOwnProperty;o=e(83),l=e("react"),v=e("underscore"),y=e(541)("trello_board_attachment"),b=e(429),r=b.CanonicalBoard,i=b.GenericErrorCanonicalBoard,a=b.InvalidCanonicalBoard,s=b.LoadingCanonicalBoard,u=b.NetworkErrorCanonicalBoard,c=b.NotFoundCanonicalBoard,g=b.UnauthorizedCanonicalBoard,h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.displayName="TrelloBoardAttachmentLoading",t.prototype.render=y.renderable(function(){return y.div(".trello-board-attachment-loading",function(e){return function(){return y.div(".trello-attachment-canonical-board",function(){return y.tag(s)})}}(this))}),t}(l.Component),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.displayName="TrelloBoardAttachmentGenericError",t.prototype.render=y.renderable(function(){var e,t,n,r;return r=this.props,e=r.canEdit,t=r.errorText,n=r.onRemove,y.div(".trello-board-attachment-error",function(r){return function(){return y.div(".trello-attachment-canonical-board",function(){return y.tag(i,{errorText:t})}),n&&e?y.a(".remove-trello-attachment",{onClick:n},function(){return y.format("remove")}):void 0}}(this))}),t}(l.Component),f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.displayName="TrelloBoardAttachmentUnauthorized",t.prototype.render=y.renderable(function(){var e,t,n,r;return r=this.props,e=r.canEdit,t=r.errorText,n=r.onRemove,y.div(".trello-board-attachment-error",function(t){return function(){return y.div(".trello-attachment-canonical-board",function(){return y.tag(g)}),n&&e?y.a(".remove-trello-attachment",{onClick:n},function(){return y.format("remove")}):void 0}}(this))}),t}(l.Component),m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.displayName="TrelloBoardAttachmentSpecificError",t.prototype.render=y.renderable(function(){var e,t,n,r;return r=this.props,e=r.canEdit,t=r.error,n=r.onRemove,y.div(".trello-board-attachment-error",function(r){return function(){return y.div(".trello-attachment-canonical-board",function(){return"bad request"===t?y.tag(a):"server"===t?y.tag(u):y.tag(c)}),n&&e?y.a(".remove-trello-attachment",{onClick:n},function(){return y.format("remove")}):void 0}}(this))}),t}(l.Component),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.displayName="TrelloBoardAttachment",t.prototype.render=y.renderable(function(){var e,t,n,o;return o=this.props,e=o.board,t=o.canRemove,n=o.onRemove,y.div(".trello-board-attachment",function(o){return function(){return y.div(".trello-attachment-canonical-board",function(){return y.tag(r,{board:e})}),n&&t?y.a(".remove-trello-attachment",{onClick:n},function(){return y.format("remove")}):void 0}}(this))}),t}(l.Component),t.exports={TrelloBoardAttachmentComponent:d,TrelloBoardAttachmentGenericError:p,TrelloBoardAttachmentLoading:h,TrelloBoardAttachmentSpecificError:m,TrelloBoardAttachmentUnauthorized:f}},{}],310:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T=function(e,t){function n(){this.constructor=e}for(var r in t)E.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},E={}.hasOwnProperty;r=e("jquery"),o=e(221),i=e(561),a=e(205),s=e(39),u=e(40),c=e("bluebird"),l=e("react"),d=e("react-dom"),y=e(133),w=e(549),_=e("underscore"),k=e(103),C=e(153),x=e("recup"),S=e(51),j=e(309),m=j.TrelloBoardAttachmentComponent,f=j.TrelloBoardAttachmentGenericError,g=j.TrelloBoardAttachmentLoading,v=j.TrelloBoardAttachmentSpecificError,b=j.TrelloBoardAttachmentUnauthorized,p=e(540),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return T(t,e),t.prototype.className="trello-board-attachment-container",t.prototype.initialize=function(){return null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.getBoard().then(function(e){return function(t){return e.board=t,e.board&&e.setUpListeners(),e.renderReactSection()}}(this)).catch(function(e){return function(e){return console.error(e)}}(this))},t.prototype.setUpListeners=function(){var e;if(this.board.id===this.model.getCard().getBoard().id)return e=this.frameDebounce(this.renderReactSection),this.listenTo(this.board,{change:e,destroy:function(e){return function(){return e.board=null,e.error="not found",e.renderReactSection()}}(this)}),this.listenTo(this.board.listList,{"add remove":e})},t.prototype.getReactRoot=function(){return l.createElement(p,{},this.getTrelloBoardAttachment())},t.prototype.renderReactSection=function(){return d.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.render=function(){return this.$el.append(this.$reactRoot),this.renderReactSection(),this},t.prototype.getTrelloBoardAttachmentError=function(){var e,t;return e=this.model.getCard().editable(),t={error:this.error,canEdit:e,onRemove:this.confirmDelete.bind(this)},x.render(function(e){return function(){return x.div(function(){var n;return"unauthorized"===e.error?x.createElement(b,t):"server"===(n=e.error)||"bad request"===n||"not found"===n?x.createElement(v,t):x.createElement(f,_.extend({errorText:k(e.error)},t))})}}(this))},t.prototype.getTrelloBoardAttachment=function(){return this.error?this.getTrelloBoardAttachmentError():x.render(function(e){return function(){return x.div(function(){var t;return e.board?(t=e.model.getCard().editable(),x.createElement(m,{board:e.board,canRemove:t,onRemove:e.confirmDelete.bind(e)})):x.createElement(g)})}}(this))},t.prototype.getShortLink=function(){return this.shortLink||(this.shortLink=C(this.options.boardUrl).shortLink),this.shortLink},t.prototype.getBoard=function(){var e,t;return t=this.getShortLink(),e=s.get("Board",t),e&&this.model.getCard().getBoard().id===e.id?c.resolve(e):this.fetchBoard()},t.prototype.fetchBoard=function(){var e;return e=this.getShortLink(),u.loadBoardAttachment(e).then(function(t){return function(){return t.error=null,s.get("Board",e)}}(this)).catch(o.Unauthorized,function(e){return function(t){return e.error="unauthorized",null}}(this)).catch(o.NotFound,function(e){return function(t){return e.error="not found",null}}(this)).catch(o.Server,function(e){return function(t){return e.error="server",null}}(this)).catch(o.BadRequest,function(e){return function(t){return e.error="bad request",null}}(this)).catch(function(e){return function(t){return e.error=t.message,null}}(this))},t.prototype.confirmDelete=function(e){return y.stop(e),i.toggle("remove attachment",{elem:this.$(e.currentTarget),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),S("Attachment","Delete Attachment",e.model.getType())}}(this)}),S("Attachment","Attachment Thumbnail","Confirm Delete")},t.prototype.unarchiveBoard=function(e,t){return e.update({closed:!1},function(e){return function(){return S("Board","Reopen","Via Trello Attachment")}}(this))},t.prototype.remove=function(){return d.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(w)},{}],311:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w=function(e,t){function n(){this.constructor=e}for(var r in t)_.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},_={}.hasOwnProperty;o=e(83),l=e("react"),v=e("underscore"),y=e(541)("trello_card_attachment"),b=e(430),r=b.CanonicalCard,i=b.GenericErrorCanonicalCard,a=b.InvalidCanonicalCard,s=b.LoadingCanonicalCard,u=b.NetworkErrorCanonicalCard,c=b.NotFoundCanonicalCard,g=b.UnauthorizedCanonicalCard,h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.displayName="TrelloCardAttachmentLoading",t.prototype.render=y.renderable(function(){return y.div(".trello-card-attachment-loading",function(e){return function(){return y.div(".trello-attachment-canonical-card",function(){return y.tag(s)})}}(this))}),t}(l.Component),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.displayName="TrelloCardAttachmentGenericError",t.prototype.render=y.renderable(function(){var e,t,n,r;return r=this.props,e=r.canEdit,t=r.errorText,n=r.onRemove,y.div(".trello-card-attachment-error",function(r){return function(){return y.div(".trello-attachment-canonical-card",function(){return y.tag(i,{errorText:t})}),n&&e?y.a(".remove-trello-attachment",{onClick:n},function(){return y.format("remove")}):void 0}}(this))}),t}(l.Component),f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.displayName="TrelloCardAttachmentUnauthorized",t.prototype.render=y.renderable(function(){var e,t,n;return n=this.props,e=n.canEdit,t=n.onRemove,y.div(".trello-card-attachment-error",function(n){return function(){return y.div(".trello-attachment-canonical-card",function(){return y.tag(g)}),t&&e?y.a(".remove-trello-attachment",{onClick:t},function(){return y.format("remove")}):void 0}}(this))}),t}(l.Component),m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.displayName="TrelloCardAttachmentSpecificError",t.prototype.render=y.renderable(function(){var e,t,n,r;return r=this.props,e=r.canEdit,t=r.error,n=r.onRemove,y.div(".trello-card-attachment-error",function(r){return function(){return y.div(".trello-attachment-canonical-card",function(){return"bad request"===t?y.tag(a):"server"===t?y.tag(u):y.tag(c)}),n&&e?y.a(".remove-trello-attachment",{onClick:n},function(){return y.format("remove")}):void 0}}(this))}),t}(l.Component),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.displayName="TrelloCardAttachment",t.prototype.render=y.renderable(function(){var e,t,n,o,i,a,s,u,c,l,d,p;return p=this.props,e=p.board,t=p.canRemove,n=p.canUnarchive,o=p.card,a=p.labels,s=p.list,u=p.members,c=p.numNotifications,l=p.onRemove,d=p.onUnarchive,i=o.get("closed"),y.div(".trello-card-attachment",function(p){return function(){return y.div(".trello-attachment-canonical-card",function(){return y.tag(r,{board:e,canRemove:t,canUnarchive:n,card:o,labels:a,list:s,members:u,numNotifications:c})}),l&&t&&y.a(".remove-trello-attachment",{onClick:l},function(){return y.format("remove")}),i&&n?y.a(".unarchive-trello-card",{onClick:d},function(){return y.span(".icon-sm.icon-archive"),y.format("unarchive card")}):void 0}}(this))}),t}(l.Component),t.exports={TrelloCardAttachmentComponent:d,TrelloCardAttachmentGenericError:p,TrelloCardAttachmentLoading:h,TrelloCardAttachmentSpecificError:m,TrelloCardAttachmentUnauthorized:f}},{}],312:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E=function(e,t){function n(){this.constructor=e}for(var r in t)O.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},O={}.hasOwnProperty;r=e("jquery"),o=e(221),i=e(561),a=e(205),s=e(39),u=e(40),c=e("bluebird"),l=e("react"),d=e("react-dom"),y=e(133),w=e(549),_=e("underscore"),k=e(103),C=e(153),x=e("recup"),T=e(51),S=e(142),j=e(311),m=j.TrelloCardAttachmentComponent,f=j.TrelloCardAttachmentGenericError,g=j.TrelloCardAttachmentLoading,v=j.TrelloCardAttachmentSpecificError,b=j.TrelloCardAttachmentUnauthorized,p=e(540),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return E(t,e),t.prototype.className="trello-card-attachment-container",t.prototype.initialize=function(){return null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.getCard().then(function(e){return function(t){return e.card=t,e.card&&e.setUpListeners(),e.renderReactSection()}}(this)).catch(function(e){return function(e){return console.error(e)}}(this))},t.prototype.setUpListeners=function(){var e;return this.card.getBoard().id!==this.model.getCard().getBoard().id?void this.startPolling():(e=this.frameDebounce(this.renderReactSection),this.listenTo(this.card,{change:e,destroy:function(e){return function(){return e.card=null,e.error="not found",e.renderReactSection()}}(this)}),this.listenTo(this.card.getList(),{"change:name":e}),this.listenTo(this.card.getBoard(),{"change:name":e,"change:prefs":function(e){var t,n,r,o;return(null!=(t=e.get("prefs"))?t.backgroundImage:void 0)!==(null!=(n=e.previous("prefs"))?n.backgroundImage:void 0)||(null!=(r=e.get("prefs"))?r.backgroundColor:void 0)!==(null!=(o=e.previous("prefs"))?o.backgroundColor:void 0)?this.renderReactSection():void 0}}))},t.prototype.startPolling=function(){var e;return e=function(e){return function(){return e.fetchCard().then(function(t){return e.card=t,e.renderReactSection()})}}(this),this.cancelSmartInterval=S(e,{resetAfterMouseMove:!0,intervals:[{iterations:6,timeout:y.getMs({seconds:10})},{iterations:10,timeout:y.getMs({minutes:1})}]})},t.prototype.getReactRoot=function(){return l.createElement(p,{},this.getTrelloCardAttachment())},t.prototype.renderReactSection=function(){return d.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.render=function(){return this.$el.append(this.$reactRoot),this.renderReactSection(),this},t.prototype.getTrelloCardAttachmentError=function(){var e,t;return e=this.model.getCard().editable(),t={error:this.error,canEdit:e,onRemove:this.confirmDelete.bind(this)},x.render(function(e){return function(){return x.div(function(){var n;return"unauthorized"===e.error?x.createElement(b,t):"server"===(n=e.error)||"bad request"===n||"not found"===n?x.createElement(v,t):x.createElement(f,_.extend({errorText:k(e.error)},t))})}}(this))},t.prototype.getTrelloCardAttachment=function(){return this.error?this.getTrelloCardAttachmentError():x.render(function(e){return function(){return x.div(function(){var t,n,r;return e.card?(t=e.model.getCard().editable(),n=e.card.editable(),r=s.find("Notification",function(t){var n,r;return t.get("unread")&&(null!=(n=t.get("data"))&&null!=(r=n.card)?r.id:void 0)===e.card.id}).length,x.createElement(m,{card:e.card,board:e.card.getBoard(),canRemove:t,canUnarchive:n,labels:e.card.getLabels().sort(a.compare),list:e.card.getList(),members:e.card.memberList.models,numNotifications:r,onRemove:e.confirmDelete.bind(e),onUnarchive:e.unarchiveCard.bind(e,e.card)})):x.createElement(g)})}}(this))},t.prototype.getShortLink=function(){return this.shortLink||(this.shortLink=C(this.options.cardUrl).shortLink),this.shortLink},t.prototype.getCard=function(){var e,t;return t=this.getShortLink(),e=s.get("Card",t),e&&e.getBoard()&&e.getList()&&e.getLabels()?c.resolve(e):this.fetchCard()},t.prototype.fetchCard=function(){var e;return e=this.getShortLink(),u.loadCardAttachment(e).then(function(t){return function(n){return t.error=null,s.get("Card",e)}}(this)).catch(o.Unauthorized,function(e){return function(t){return e.error="unauthorized",null}}(this)).catch(o.NotFound,function(e){return function(t){return e.error="not found",null}}(this)).catch(o.Server,function(e){return function(t){return e.error="server",null}}(this)).catch(o.BadRequest,function(e){return function(t){return e.error="bad request",null}}(this)).catch(function(e){return function(t){return e.error=t.message,null}}(this))},t.prototype.confirmDelete=function(e){return y.stop(e),i.toggle("remove attachment",{elem:this.$(e.currentTarget),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),T("Attachment","Delete Attachment",e.model.getType())}}(this)}),T("Attachment","Attachment Thumbnail","Confirm Delete")},t.prototype.unarchiveCard=function(e,t){return e.update({closed:!1},function(e){return function(){return T("Card","Reopen","Via Trello Attachment")}}(this))},t.prototype.remove=function(){return"function"==typeof this.cancelSmartInterval&&this.cancelSmartInterval(),d.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(w)},{}],313:[function(e,t,n){var r,o,i;r=e("react"),i=e(541)(),o=e(135),t.exports=r.createClass({displayName:"BoardListItemBadgeComponent",render:i.renderable(function(){var e,t,n,r,o;return n=this.props,e=n.icon,r=n.text,o=n.title,t=n.iconClass,i.span(".board-tile-badges-item",{title:o},function(){return i.icon(e,{class:["board-tile-badges-item-icon",t].join(" ")}),null!=r?i.span(".board-tile-badges-item-name",function(){return i.text(r)}):void 0})}),shouldComponentUpdate:o})},{}],314:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S=[].slice;o=e(74),a=e(315),s=e(316),c=e(320),d=e(329),u=e(323),m=e(330),i=e(322),g=e(331),l=e(27),p=e("bluebird"),h=e("react"),f=e(107),v=e(133),C=e(541)("billing"),y=e(245),_=e(104),x=e(51),b=e("underscore"),j=e("xtend"),r=e("jquery"),k=e(113),w=e(93),t.exports=h.createClass({displayName:"BillingComponent",getInitialState:function(){return{processingReactivation:!1,reactivateDisabled:!1,reactivatingProduct:null}},render:C.renderable(function(){var e,t,n,r,o,i,s,u,c,l,d,p,h,m,f;return p=this.props,o=p.id,e=p.activeAccount,c=p.paidAccount,f=p.willExpire,u=p.nextChargeAmount,s=p.nextBillingDate,t=p.canSwitchToYearly,n=p.cancelledAccount,r=p.hasAccount,m=p.statementUrl,d=p.productName,h=this.state,i=h.justCancelled,l=h.processingReactivation,C.div(function(p){return function(){return p.renderStatusBanner(),e&&C.div(".window-module.u-text-align-center",function(){return C.div(".u-gutter",function(){return f?p.renderExpirationAndRenewButton():c.cardType?(u&&s&&p.renderNextCharge(),t()?p.renderUpgradeToYearly():void 0):p.renderCreditExpirationMessage()})}),!e||f||c.cardType||p.renderBillingForm(),n&&!l&&p.renderReactivateSection(),c.cardType&&(e&&p.renderPaymentMethod(),p.renderBillingContact(),p.renderAdditionalInvoiceDetails()),r&&C.createElement(a,{statementUrl:m,key:o}),e&&p.renderCancelFlow(f),i?C.div(".window-module",function(){return C.div(".u-gutter",function(){return C.p(function(){return C.strong(function(){return C.format("your-productname-subscription-has-been-cancelled",{productName:d})})}),C.p(function(){return C.format("well-keep-your-data-safe-and-your-account-will-remain-usable-if-youd-like-you-can-reinstate-productname-at-any-time-by-re-entering-your-credit-card-information",{productName:d})}),C.p(function(){return C.format("the-trello-team")})})}):void 0}}(this))}),renderNextCharge:function(){var e,t,n,r,o;return o=this.props,e=o.billingStrategy,n=o.nextChargeAmount,r=o.price,t=o.nextBillingDate,C.p(".next-charge",function(){return e.perUser?C.format("you-will-be-billed-nextchargeamount-price-per-billablemembercount-members-on-nextbillingdate",{nextChargeAmount:w(n),price:w(r),billableMemberCount:e.userCount,nextBillingDate:t}):C.format("you-will-be-billed-nextchargeamount-on-nextbillingdate",{nextChargeAmount:w(n),nextBillingDate:t})})},renderUpgradeToYearly:function(){var e,t,n,r,o,i;return n=this.props,o=n.yearlyEquivalentPrice,i=n.yearlyEquivalentTotalPrice,e=n.billingStrategy,r=n.yearlyDiscountPercent,t=n.onSwitchToYearly,C.p(function(){return C.b(t,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return C.format("switch-to-yearly-billing")})}),C.p(function(){return e.perUser?C.format("yearly-billing-will-be-totalyearlyprice-yearlyprice-per-member-per-year",{totalYearlyPrice:w(i),yearlyPrice:w(o)}):C.format("yearly-billing-will-be-yearlyprice-per-year",{
yearlyPrice:w(o)}),C.br(),C.format("thats-percent-less-than-monthly-billing",{yearlyDiscountPercent:r})})},renderCreditExpirationMessage:function(){var e;return e=this.props.nextBillingDate,C.p(".next-charge",function(){return C.format("your-credits-will-expire-on-nextbillingdate",{nextBillingDate:e})}),C.p(function(){return C.format("keep-using-trello-in-style-even-after-your-credits-expire")})},renderExpirationAndRenewButton:function(){var e,t,n,r;return r=this.props,n=r.productName,e=r.expirationDate,t=r.onRenewClick,C.p(".quiet",function(){return C.format("youve-cancelled-productname-but-you-can-use-the-premium-features-until-expirationdate",{productName:n,expirationDate:e})}),C.p(function(){return C.b(t,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return C.format("renew-your-subscription")})}),C.p(".quiet",function(){return C.format("when-you-renew-you-wont-be-charged-until-the-date-listed-above")})},renderBillingForm:function(){var e,t,n,r,o,a,s,l;return l=this.props,t=l.current,o=l.paidAccount,a=l.paidAccountPoll,e=l.createPaidAccount,r=l.didntGetAuthStatus,n=l.didGetAuthStatus,s=l.productName,C.div(".billing",function(l){return function(){return C.createElement(c,{defaultProduct:t.yearly.productNumber,monthlyProduct:t.monthly,yearlyProduct:t.yearly,onSubmit:e,doPoll:a,buttonKey:"continue",contentBuilders:[k(d,{productName:s,monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.yearly.productNumber,billingStrategy:t.billingStrategy}),k(u),k(i),k(m,{monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.yearly.productNumber,billingStrategy:t.billingStrategy}),k(g)],extraData:{billingContactFullName:o.contactFullName,billingContactEmail:o.contactEmail,billingContactLocale:o.contactLocale},didntGetAuthStatus:function(){return r()},didGetAuthStatus:function(){return n()}})}}(this))},renderReactivationButtons:function(){var e,t,n,r,o,i;return i=this.props,e=i.current,t=i.productName,n=this.state.reactivateDisabled,r=y(this,"reactivate",e.monthly.productNumber),o=y(this,"reactivate",e.yearly.productNumber),C.div(".window-module",function(){return C.div(".window-module-title",function(){return C.h3(function(){return C.format("reactivate-productname",{productName:t})})}),C.div(".u-gutter",function(){return C.div(".billing-option-buttons.u-clearfix",function(){return C.b(r,{class:C.classify({disabled:n})},function(){return C.span(".name",function(){return C.format("charge-monthly")}),C.span(".price",function(){e.billingStrategy.perUser?C.format("totalmonthlyprice-monthlyprice-per-member",{totalMonthlyPrice:w(e.monthly.totalPrice),monthlyPrice:w(e.monthly.price)}):C.strong(function(){return C.format("monthlyprice",{monthlyPrice:w(e.monthly.price)})})})}),C.b(o,{class:C.classify({disabled:n})},function(){return C.span(".name",function(){return C.format("charge-yearly-save")}),C.span(".price",function(){e.billingStrategy.perUser?C.format("totalyearlyprice-yearlyprice-per-member",{totalYearlyPrice:w(e.yearly.totalPrice),yearlyPrice:w(e.yearly.price)}):C.strong(function(){return C.format("yearlyprice",{yearlyPrice:w(e.yearly.price)})})})})})})})},renderReactivateSection:function(){var e;return e=this.props.paidAccount,null!=e.cardType?this.renderReactivationButtons():this.renderBillingForm()},renderPaymentMethod:function(){var e,t,n,r,o;return o=this.props,e=o.accountStanding,t=o.accountStandingDisplay,r=o.paidAccount,n=o.onClickChangeCC,C.div(".window-module",function(o){return function(){return C.div(".window-module-title",function(){return C.h3(".u-inline",function(){return C.format("payment-method")})}),C.div(".u-gutter",function(){return C.p(function(){return"good"===e?C.format("your-account-is-in-good-standing"):C.format("account-standing-accountstandingdisplay",{accountStandingDisplay:t}),C.br(),C.format("credit-card-on-file"),C.text(" "),C.format("paidaccount-cardlast4",{paidAccount_cardLast4:r.cardLast4}),C.text(" "),C.b(n,".quiet",function(){return C.format("change")})})})}}(this))},renderCCChangeForm:function(){var e,t,n,r,o,a;return a=this.props,t=a.current,e=a.changeCreditCard,o=a.paidAccountPoll,r=a.didntGetAuthStatus,n=a.didGetAuthStatus,C.createElement(c,{defaultProduct:t.yearly.productNumber,monthlyProduct:t.monthly,yearlyProduct:t.yearly,onSubmit:e,doPoll:o,buttonKey:"continue",contentBuilders:[u,i,g].map(y.choke(1,k)),didntGetAuthStatus:function(e){return function(){return r()}}(this),didGetAuthStatus:function(e){return function(){return n()}}(this)})},reactivate:function(e){var t,n,r;r=this.props.reactivateProduct,n=this.state.reactivateDisabled,n||(t=l.isMonthly(e)?"Monthly":"Yearly",x("Organization View","Billing Page","Reactivate Business Class - "+t),this.setState({reactivateDisabled:!0}),r(e).then(function(e){return function(n){return x("Organization","Sucessfully Reactivate Business Class - "+t),e.setState({processingReactivation:!0,reactivateDisabled:!1})}}(this)).done())},renderBillingContact:function(){var e,t,n;return n=this.props,t=n.paidAccount,e=n.onChangeBillingContactClick,C.div(".window-module",function(){return C.div(".window-module-title",function(){return C.h3(function(){return C.format("billing-contact")})}),C.div(".u-gutter",function(){return C.p(function(){return C.format("paidaccount-contactfullname-paidaccount-contactemail",{paidAccount_contactFullName:t.contactFullName,paidAccount_contactEmail:t.contactEmail}),C.text(" "),C.b(e,".quiet",function(){return C.format("change")})})})})},renderAdditionalInvoiceDetails:function(){var e,t,n;return n=this.props,t=n.paidAccount,e=n.onChangeAdditionalDetailsClick,C.div(".window-module",function(){return C.div(".window-module-title",function(){return C.h3(function(){return C.format("additional-invoice-details")})}),C.div(".u-gutter",function(){return t.invoiceDetails?(C.raw(f.description.format(t.invoiceDetails).output),C.div(function(){return C.b(e,".quiet",function(){return C.format("change")})})):C.p(function(){return C.format("we-dont-have-any-additional-information-for-your-invoice"),C.text(" "),C.b(e,".quiet",function(){return C.format("change")})})})})},renderCancelFlow:function(e){var t,n,r;return r=this.props,n=r.productName,t=r.cancelProduct,C.createElement(s,{type:this.props.type,isModule:!0,productName:n,willExpire:e,id:this.props.id,cancelProduct:function(e){return function(){var n;return n=1<=arguments.length?S.call(arguments,0):[],t.apply(null,n).then(y.choke(0,y(e,"setState",{justCancelled:!0})))}}(this)})},renderStatusBanner:function(){var e,t,n,r,o,i,a,s,u,c,l;return l=this.props,e=l.activeAccount,i=l.problemAccount,a=l.processingAccount,u=l.productIconClass,n=l.detailsUrl,c=l.productName,t=l.cancelledAccount,r=l.needCC,o=l.onClickChangeCC,s=this.state.processingReactivation,C.div(".window-module.u-gutter",function(){return e&&(i?(C.p(".bc-active-status.error",function(){return C.format("theres-an-issue-with-productname",{productIconClass:u,detailsUrl:n,productName:c})}),C.b(o,".emphasis-button",function(){return C.format("you-are-overdue-and-we-are-having-trouble-processing-your-credit-card-enter-a-credit-card-to-resolve-the-issue")})):(C.p({class:C.classify({"bc-active-status":!0,active:!0,warning:a})},function(){return C.span({class:"icon-lg icon-"+u}),a?C.format("productname-is-almost-active",{detailsUrl:n,productName:c}):C.format("productname-is-active",{detailsUrl:n,productName:c})}),a&&C.p(".quiet",{style:{marginLeft:"46px"}},function(){return C.format("your-credit-card-is-being-processed")}))),t&&(s?(C.p(".bc-active-status.warning",function(){return C.format("your-account-is-being-processed-for-reactivation",{productIconClass:u})}),C.p(".quiet.u-text-align-center",function(){return C.format("check-back-soon")})):C.p(".bc-active-status.error",function(){return C.format("productname-is-cancelled",{productIconClass:u,detailsUrl:n,productName:c})})),r?(C.p(".bc-active-status.error",function(){return C.format("productname-is-not-active",{productIconClass:u,detailsUrl:n,productName:c})}),C.b(o,".emphasis-button",function(){return C.format("enter-a-credit-card-to-activate-productname",{productName:c})})):void 0})}})},{}],315:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v;r=e(218),o=e(334),a=e("react"),f=e(541)("billing_statement"),i=e(112),p=e("moment"),u=e(92),d=e(46),v=e(121),s=e(245),m={return:["credited-return","credited-return-receipt"],credit:["paid-credit","paid-credit-receipt"],debit:["billed-debit","billed-debit-invoice"],refund:["refunded-refund","refunded-refund"]},h=function(e){var t,n,r,o;r=m[e.type],n=r[0],o=r[1],t={statementUrl:e.statementUrl},t[e.type]=u.money(e.amount),t.statementUrl?f.format(o,t):f.format(n,t)},g={startDate:function(e){return p(e).format("LL")},endDate:function(e){return p(e).format("LL")},taxRate:u.taxRate,discount:u.percentage},c=function(e){var t,n,r,o,i;o=function(e){return e.toString()},r={};for(t in e)i=e[t],r[t]=(null!=(n=g[t])?n:o)(i);return r},l=function(e){var t,n;return null==e.translationKey?e.fallbackText:(t=c(e.translationArgs),n=v(["billing",e.translationKey],t),null!=n?n:(d(new Error("Unknown statement row key "+e.translationKey)),e.fallbackText))},t.exports=a.createClass({displayName:"BillingHistoryComponent",mixins:[i],render:f.renderable(function(){var e,t,n;return t=this.state,e=t.errorText,n=t.statement,f.div(".window-module",function(){return f.div(".window-module-title",function(){return f.h3(function(){return f.format("billing-history")})}),f.div(".u-gutter",{id:"billing-statement"},function(){var t,r,o,i;if(null!=e)return f.text(e);if(null!=n){for(o=[],t=0,r=n.length;r>t;t++)i=n[t],f.div(function(){return f.p(function(){return f.format("date-item",{date:p(new Date(i.date)).format("l"),item:l(i)})}),f.p({style:{textAlign:"right"}},function(){return h(i)})}),o.push(f.hr());return o}return f.div(".spinner.loading")})})}),componentWillMount:function(){this.pollster=new o(s(r,{url:this.props.statementUrl}),10,5e3),this.pollster.start(),this.syncState(this.pollster.state)},componentWillUnmount:function(){this.pollster.stop()}})},{}],316:[function(e,n,r){var o,i,a,s,u,c,l,d,p;a=e("react"),o=e(35),c=e(133),d=e(541)("billing"),l=e(245),p=e(51),i=void 0,t(function(){return i=e(40)}),s=1,u=2,n.exports=a.createClass({displayName:"CancelFlowComponent",getInitialState:function(){return{isGold:"gold"===this.props.type,isCancelling:this.props.initialIsCancelling,cancellingStep:s,features:[]}},componentDidMount:function(){return this.fetchFeatures(function(e){return function(t){return e.setState({features:t})}}(this))},fetchFeatures:function(e){var t,n;return t=this.props.id,n={dynamic:[function(e){var t,n;return n="dynamic-feature-unlimited-powerups",(t=e.boardList.filter(function(e){return e.powerUpsCount()>1}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return n="dynamic-feature-deactivate-users",(t=e.get("memberships").filter(function(e){return e.deactivated}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return n="dynamic-feature-observers",(t=e.boardList.filter(function(e){return e.get("memberships").some(function(e){return"observer"===e.memberType})}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return n="dynamic-feature-collections",(t=e.boardList.filter(function(e){return e.get("idTags").length}).length)?{key:n,data:{count:t}}:void 0},function(e){var t;return t="dynamic-feature-invitation-restrictions",e.boardList.some(function(e){return"members"!==e.getInvitePerm()})?{key:t}:void 0},function(e){var t;return t="dynamic-feature-visibility-restrictions",e.boardList.some(function(e){return"org"===e.getPermLevel()})?{key:t}:void 0},function(e){var t,n;return n="dynamic-feature-private-boards",(t=e.boardList.filter(function(e){return e.isPrivate()}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return t="dynamic-feature-bulk-export",(null!=(n=e.get("exports"))?n.length:void 0)?{key:t}:void 0}],static:["static-feature-unlimited-powerups","static-feature-bigger-attachments","static-feature-priority-email-support","static-feature-board-export"],gold:["gold-feature-powerups","gold-feature-bigger-attachments","gold-feature-custom-backgrounds","gold-feature-saved-searches"]},this.state.isGold?e(n.gold.map(function(e){return{key:e}})):i.loadBCFeatures(t).then(function(t){return e(n.dynamic.map(function(e){return e(t)}).filter(function(e){return e}).concat(n.static.map(function(e){return{key:e}})).slice(0,4))})},render:d.renderable(function(){var e,t,n,r,i,a,l,h,m,f,g,v,b,y;return g=this.props,f=g.productName,n=g.cancelProduct,m=g.isModule,l=g.isDeleting,y=g.willExpire,v=this.state,a=v.isCancelling,r=v.cancellingStep,i=v.features,h=v.isGold,b=function(e){return function(){return p("Organization View","Billing Page","Open Cancel Business Class Dialog"),e.setState({isCancelling:!0})}}(this),e=function(e){return function(){return l||e.setState({cancellingStep:u}),n()}}(this),t=function(e){return function(){return e.setState({cancellingStep:s,isCancelling:!1})}}(this),d.div({class:d.classify({"window-module":m,".u-gutter":m})},function(){if(!a&&l){if(!y)return d.b(b,".quiet.dark-hover",function(){return d.format("delete-this-organization")})}else{if(a)return d.div(function(){return d.div(".cancel-flow-overlay",{onClick:t},function(){return d.div(".cancel-flow-dialog-wrapper",function(){return d.div(h?".cancel-flow-dialog.gold":".cancel-flow-dialog",{onClick:c.stopPropagation},function(){return d.span(".icon-lg.icon-close.cancel-flow-overlay-close-icon",{onClick:t}),d.img(".cancel-flow-logo",{src:h?"https://a.trellocdn.com/images/4aed30c34bf90d579f738a89fbd276f7/trello-gold-logo-gold%402x.png":"https://a.trellocdn.com/images/5ccffc76fe9c9220a251715c59d17ac5/business-class-logo-white%402x.png"}),d.div(".cancel-flow-content",function(){return r===s?(d.p(".cancel-flow-bold",function(){return d.text(" "),d.format("cancel-pre-features",{productName:f})}),d.ul(function(){return i.map(function(e){var t,n;return n=e.key,t=e.data,d.li(function(){return d.format(n,t)})})}),d.p(function(){return d.format("cancel-post-features")}),d.div(".cancel-flow-buttons",function(){return d.button(".button.primary.cancel-flow-keep",{onClick:t},function(){return d.format(l?"cancel-delete-keep":"cancel-keep",{productName:f})}),d.button(".button.cancel-flow-confirm",{onClick:e},function(){return d.format(l?"cancel-delete-switch":"cancel-switch")})})):r===u?(d.p(".cancel-flow-bold",function(){return d.format("cancel-sorry-to-see-you-go")}),d.div(function(){return d.format("cancel-tell-us-about-your-experience"),d.text(" "),d.a({href:"https://trello.typeform.com/to/hiuX7c?id="+o.me().id,target:"_blank"},function(){return d.format("cancel-take-our-survey")})})):void 0})})})})});if(!y)return d.b(b,".quiet.dark-hover",function(){return d.icon("close"),d.text(" "),d.format("cancel-productname-ellipsis",{productName:f})})}})})})},{}],317:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;i=e(226),a=e(569),s=e("react"),u=e("react-dom"),c=e(540),l=e(549),r=e(321),d=e(541)("credit_card"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="change additional details",t.prototype.renderOnce=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$el.prepend(this.reactRoot),this.renderReactSection(),this},t.prototype.getReactRoot=function(){return s.createElement(c,{},this.getFormComponent())},t.prototype.renderReactSection=function(){return u.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getFormComponent=function(){return d.render(function(e){return function(){return d.div(function(){return d.createElement(r,{initialValue:e.model.get("paidAccount").invoiceDetails,onSubmit:function(t){return i.changeInvoiceDetails(e.model,t).then(function(t){return e.model.set(t),a.hide()}).done()}})})}}(this))},t}(l)},{}],318:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(220),o=e(35),a=e(569),s=e(133),u=e(549),l=e(749),c=e(33),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="change billing contact",t.prototype.events={"click .js-submit":"changeBillingContact","submit form":"changeBillingContact"},t.prototype.render=function(){var e,t,n;return n=this.model.get("paidAccount"),e=n?{fullName:n.contactFullName,email:n.contactEmail,locale:n.contactLocale}:{fullName:o.me().get("fullName"),email:o.me().get("email"),locale:o.me().getLocale()},t=e.locale&&c.some(function(t){var n;return n=t.code,n.toLowerCase()===e.locale.toLowerCase()}),t||(e.locale="en-US"),this.$el.html(l(e)),this},t.prototype.changeBillingContact=function(e){var t,n,o,i,u;for(s.stop(e),t={},t.billingContactFullName=this.$("input#billingContactFullName").val(),t.billingContactEmail=this.$("input#billingContactEmail").val(),t.billingContactLocale=this.$("select#billingContactLocale").val(),this.$(".js-submit").attr("disabled","disabled"),u=["billingContactFullName","billingContactEmail","billingContactLocale"],o=0,i=u.length;i>o;o++)n=u[o],this.$("#"+n).removeClass("input-error");return r({url:this.model.urlRoot+"/"+this.model.id+"/paidAccount/billingContact",data:t,type:"POST",success:function(e){return function(t){return e.model.set(t),a.hide()}}(this),error:function(e){return function(t){var n,r;return n=null!=(r=t.responseText)?r:"error",e.$(".js-submit").removeAttr("disabled","disabled"),/billingContactFullName/.test(n)?void e.$("#billingContactFullName").addClass("input-error"):/email/.test(n)?void e.$("#billingContactEmail").addClass("input-error"):/locale/.test(n)?void e.$("#billingContactLocale").addClass("input-error"):e.$(".error").text(n).show()}}(this)})},t}(u)},{}],319:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e(221),i=e(335),s=e(226),u=e(569),c=e("react"),l=e("react-dom"),d=e(540),p=e(549),a=e(324),h=e(541)("credit_card"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="change credit card",t.prototype.renderOnce=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$el.prepend(this.reactRoot),this.renderReactSection(),this},t.prototype.getReactRoot=function(){return c.createElement(d,{},this.getFormComponent())},t.prototype.renderReactSection=function(){return l.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getFormComponent=function(){return h.render(function(e){return function(){return h.div(function(){return h.createElement(a,{onSubmit:function(t){return s.changeCreditCard(e.model,t).catch(r.BadRequest,function(e){var t,n,r,o;for(o=["country","zipCode","taxId"],n=0,r=o.length;r>n;n++)if(t=o[n],e.message.trim()==="invalid value for "+t)throw i.InvalidField("",{field:t});throw i.PostError(e.message)}).then(function(t){return e.model.set(t),u.hide()})}})})}}(this))},t}(p)},{}],320:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g;r=e(220),u=e(133),i=e(335),o=e(333),a=e("bluebird"),s=e("react"),m=e(541)("credit_card"),c=e("underscore"),d=e(245),p=e(104),f=e(51),g=e("xtend"),h=e(340),l=e(18),t.exports=s.createClass({displayName:"CreditCardFormComponent",zeroAmount:"0.00",getInitialState:function(){var e;return{errorField:null,unknownError:null,waitingForCCAuth:!1,tax:this.zeroAmount,country:"US",region:"",zipCode:"",taxId:"",selectedBillingPlan:null!=(e=this.props.yearlyProduct)?e.productNumber:void 0}},getData:function(){return this.props.extraData},setBillingPlan:function(e){return e!==this.state.selectedBillingPlan?this.setState({selectedBillingPlan:e},function(){return this.calculateSalesTax(this.state)}):void 0},resetSalesTax:function(){return this.setState({tax:this.zeroAmount,region:"",zipCode:"",taxId:""})},calculateSubTotalCost:function(){switch(this.state.selectedBillingPlan.toString()){case this.props.yearlyProduct.productNumber.toString():return this.props.yearlyProduct.totalPrice||this.props.yearlyProduct.price;case this.props.monthlyProduct.productNumber.toString():return this.props.monthlyProduct.totalPrice||this.props.monthlyProduct.price}},calculateSalesTax:function(e){var t,n,i;return t=e.country,i=e.zipCode,n=e.taxId,this.setState({country:t?t:this.state.country,zipCode:i?i:"",taxId:n?n:""},function(){var e;return("US"===this.state.country||"PR"===this.state.country||"CA"===this.state.country)&&this.state.zipCode.length||"AU"===this.state.country||-1!==l.indexOf(this.state.country)?(e="/1/members/me/paidAccount/salesTax?country="+this.state.country+"&subtotal="+this.calculateSubTotalCost(),this.state.zipCode.length&&(e+="&postalCode="+this.state.zipCode),this.state.taxId.length&&(e+="&taxId="+this.state.taxId),r({url:e,type:"GET",success:function(e){return function(t){return e.setState({tax:t.tax,region:t.taxRegion,errorField:null})}}(this),error:function(e){return function(t){var n,r;return n=o.getErrorField(null!=t&&null!=(r=t.responseJSON)?r.error:void 0),e.setState({tax:null,region:null,errorField:n})}}(this)})):void 0})},render:m.renderable(function(){var e,t,n,r,o,i,s,u,c,l,h,f,v,b,y,w,_,k,C;return c=this.props,r=c.contentBuilders,e=c.buttonKey,C=c.yearlyProduct,s=c.monthlyProduct,l=this.state,i=l.errorField,_=l.unknownError,k=l.waitingForCCAuth,w=l.tax,h=l.region,v=l.selectedBillingPlan,o=l.country,b=this.setBillingPlan,t=this.calculateSalesTax,f=this.resetSalesTax,y=this.calculateSubTotalCost(),n=[],u=function(e){return function(){var t;t=a.map(n.concat([e]),d.method("getData")).then(function(e){return g.apply(null,e)}),e.submit(t)}}(this),m.div(".credit-card-form.billing-inner.bc-billing-wrap",function(){return r.map(function(e){return e({ref:d(n,"push"),errorField:i,setBillingPlan:b,selectedBillingPlan:v,subTotalCost:y,calculateSalesTax:t,resetSalesTax:f,tax:w,region:h,country:o})}).forEach(d(m,"addElement")),m.p({class:m.classify({"u-form-info":!0,hide:!k})},function(){return m.text(p(["alerts","authorizing"]))}),m.p({class:m.classify({"u-form-error":!0,hide:!_})},function(){var e,t;return m.text(null!=(e=null!=(t=null!=_?_.message:void 0)?t:_)?e:"")}),m.div({class:m.classify({hide:k})},function(){return m.input({type:"button",value:m.l(e),class:"primary",onClick:u})})})}),componentWillUnmount:function(){var e;return null!=(e=this._submitPromise)?e.cancel():void 0},submit:function(e){var t,n,r;if(null!=this._submitPromise)throw Error("Submission already in progress!");return r=this.props,n=r.onSubmit,t=r.doPoll,this.setState({errorField:null,unknownError:null,waitingForCCAuth:!0}),this._submitPromise=e.then(function(e){return function(e){return null==e.acceptTOS||e.acceptTOS?h(d(n,e),t,e):a.reject(i.InvalidField("",{field:"acceptTOS"}))}}(this)).then(function(e){return function(t){e.props.didGetAuthStatus(),f("Business Class","Purchase",""+t.products[0])}}(this)).catch(i.InvalidField,function(e){return function(t){var n;n=t.field,e.setState({errorField:n})}}(this)).catch(i.PostError,function(e){return function(t){var n,r,i,a;n=t.err,u.isJsonString(n.message)?(i=JSON.parse(n.message),r=o.getErrorField(null!=i?i.error:void 0),r&&e.setState({errorField:r})):e.setState({unknownError:null!=(a=n.message)?a:"error"})}}(this)).catch(i.PollError,function(e){return function(t){var n;n=t.err,e.props.didntGetAuthStatus()}}(this)).catch(a.CancellationError,function(){}).finally(function(e){return function(){e.isMounted()&&e.setState({waitingForCCAuth:!1}),delete e._submitPromise}}(this)).done()}})},{}],321:[function(e,t,n){var r,o,i,a,s,u,c,l;i=e("react"),r=e(328),c=e(541)("credit_card"),a=e("underscore"),l=e("xtend"),c=e(541)("credit_card"),s=e(245),o=e(328),u=function(e){var t,n;return n=e[0],t=e[1],[n,c.l(["countries",t])]},t.exports=i.createClass({displayName:"AdditionalDetailsComponent",formFields:["invoiceDetails"],requiredFields:{},mixins:[r],getInitialState:function(){return{invoiceDetails:this.props.initialValue}},render:c.renderable(function(){var e,t,n,r;return r=this.state.submitting,e=this.props.onSubmit,t=function(t){return function(n){return t.setState({submitting:!0}),t.getData().then(e).done()}}(this),n=this.controlledOpts("invoiceDetails"),c.div(".u-clearfix",function(){return c.form({onSubmit:e,ref:"form"},function(){return c.div(".additional-details-section.u-clearfix",function(){return c.div(".invoice-details",function(){return c.label(function(){return c.textarea(".invoice-details-textarea",l(n,{readOnly:r,maxLength:1024,placeholder:c.l("additional-details-placeholder")}))})})})}),c.div(function(){return c.button(".primary",{onClick:t,disabled:r,class:c.classify({disabled:r})},function(){return c.format("save")})})})})})},{}],322:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p;i=e("react"),l=e(541)("credit_card"),a=e("underscore"),p=e("xtend"),c=e(245),r=e(333),s=e(327),o=e(328),u=e(18),d=function(e){var t;return e.length?(t=e.replace(/\D/g,"").length,t>=2&&12>=t):!0},t.exports=i.createClass({displayName:"AddressTaxComponent",mixins:[o],formFields:["zipCode","country","taxId"],requiredFields:{country:/\S/,zipCode:function(e,t){var n;return n=t.country,"US"!==n&&"CA"!==n&&"PR"!==n||r.testZipCode(e,n)},taxId:d},getInitialState:function(){return p(this.defaultInitialState(),{country:s.special[0][0],taxId:"",zipCode:""})},componentWillMount:function(){return this.calculateSalesTax=a.debounce(this.props.calculateSalesTax,750)},render:l.renderable(function(){var e,t,n,o,i,s,c,p,h,m,f,g;return p=this.props,n=p.errorField,e=p.calculateSalesTax,m=p.resetSalesTax,h=this.state,t=h.country,g=h.zipCode,f=h.taxId,o=this.getLocalizedCountries(),s=function(e){return function(t){return e.setState({taxId:t.target.value},function(){return d(this.state.taxId)?this.calculateSalesTax({taxId:this.state.taxId,country:this.state.country,zipCode:this.state.zipCode}):void 0})}}(this),i=function(e){return function(t){return a.isFunction(e.props.resetSalesTax)&&a.isFunction(e.props.calculateSalesTax)?(e.props.resetSalesTax(),e.setState({country:t.target.value,zipCode:"",taxId:""},function(){return this.props.calculateSalesTax({country:this.state.country})})):void 0}}(this),c=function(e){return function(t){return a.isFunction(e.props.calculateSalesTax)?e.setState({zipCode:t.target.value},function(){return r.testZipCode(this.state.zipCode,this.state.country)?this.props.calculateSalesTax({country:this.state.country,zipCode:this.state.zipCode}):void 0}):void 0}}(this),l.div(function(){return l.div(".u-clearfix",function(){return l.form(function(){return l.div(".credit-card-form-section.u-clearfix",function(){return l.div(".credit-card-country",function(){return l.label(function(){return l.format("country")}),l.select({onChange:i,autoComplete:"country",class:l.classify({"select-error":"country"===n})},function(){var e,t,n,r,i;for(e=0,t=o.length;t>e;e++)r=o[e],i=r[0],n=r[1],l.option({value:i},function(){return l.text(n)})}),"country"===n?l.span(".u-form-error",function(){return l.format("must-be-a-valid-country")}):void 0}),"US"===t||"CA"===t||"PR"===t?l.div(".credit-card-zip-code",function(){var e,r;return r="zipCode"===n,e=function(){switch(t){case"US":case"PR":return"us-addresses-require-a-zip-code";case"CA":return"please-enter-a-valid-postal-code"}}(),l.label(function(){return l.format("postal-code"),l.input({onChange:c,class:l.classify({text:!0,"input-error":r}),maxLength:"10",size:"10",autoComplete:"postal-code",placeholder:"CA"===t?"M4B 1G5":"90210",type:"text",value:g}),r?l.span(".u-form-error",function(){return l.format(e)}):void 0})}):void 0})})}),l.div({class:l.classify({"tax-number":!0,hide:!(-1!==u.indexOf(t)||"AU"===t)})},function(){var e;return e="taxId"===n,l.label(function(){return l.format("tax-number",{taxType:"AU"===t?"ABN":"VAT"}),l.input({class:l.classify({"input-error":e,text:!0}),type:"text",onChange:s,value:f})}),e?l.p(".u-form-error.error",function(){return l.format("please-enter-a-valid-tax-number")}):void 0})})}),getLocalizedCountries:function(){var e,t;return e=s.special.map(r.localizeCountry),t=s.unloved.map(r.localizeCountry).sort(function(e,t){var n,r,o,i;return n=e[0],r=e[1],o=t[0],i=t[1],r.localeCompare(i)}),e.concat(t)}})},{}],323:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m;a=e(335),c=e("react"),s=e(328),o=e(326),r=e(333),u=e("bluebird"),p=e(541)("credit_card"),d=e(245),m=e("xtend"),l=e(572),i=e(325),h=e(51),t.exports=c.createClass({displayName:"CreditCardComponent",formFields:[],requiredFields:{},mixins:[s,o],getInitialState:function(){return m(this.defaultInitialState(),this.gatewayInitialState())},render:p.renderable(function(){var e,t,n,o,a,s,u,c,m,f,g;return n=this.props.errorField,f=this.state,e=f.cardType,u=f.gatewayLoaded,o=f.gatewayErrorField,s=f.gatewayFocusField,a=f.gatewayFieldStatus,c="name"===n,t=d(this,"controlledOpts"),m=function(e){return function(e){return e.preventDefault()}}(this),g=function(){var t,n;return document.querySelectorAll(".js-tooltip-content").length?l.hide():(h("Organization View","Business Class Page","CVV Tooltip"),n=new i({cardType:e}),t=this.$(".js-cvv-tooltip-trigger"),l.show(n,t,!1,l.STYLE.BILLING))},p.div(".u-clearfix",function(){return p.form({onSubmit:m,ref:"form"},function(){return p.h3(function(){return p.format("pay-with-credit-card")}),p.div(".credit-card-form-section",function(){var t;return t=function(e){var t,n,r,o,i;return i=e.selector,o=e.labelKey,n=e.fieldType,t=e.errorKey,r="invalid"===a[n],p.label(function(){return p.span(i+"-label-text",function(){return p.format(o)}),p.div(".iframe-input"+i,{class:p.classify({disabled:!u,focus:s===n,"input-error":r})}),null!=t&&r?p.span(".u-form-error",function(){return p.format(t)}):void 0})},p.div(".u-clearfix",function(){return p.div(".credit-card-form-number",function(){return t({selector:".js-card-number"+(e?"."+e:""),labelKey:"credit-card",fieldType:"number",errorKey:"please-provide-your-full-card-number-for-credit-card-verification"})}),p.div(".credit-card-expiration-date",function(){return t({selector:".js-expiration-date",labelKey:"expiration-date",fieldType:"expirationDate",errorKey:"please-provide-a-valid-expiration-date"})}),p.div(".credit-card-form-cvv",function(){return t({selector:".js-cvv",labelKey:"cvv",fieldType:"cvv",errorKey:r.getCvvErrorKey(e)}),p.span(".cvv-tooltip-trigger.js-cvv-tooltip-trigger",{onClick:g})})})})})})})})},{}],324:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f;r=e(221),l=e(133),o=e(333),a=e(335),c=e("react"),s=e(328),i=e(326),u=e("bluebird"),m=e(541)("credit_card"),h=e(245),f=e("xtend"),d=e(327),p=e(18),t.exports=c.createClass({displayName:"CreditCardUpdateComponent",formFields:["country","zipCode","taxId"],requiredFields:{country:/\S/,zipCode:function(e,t){var n;return n=t.country,"US"!==n&&"CA"!==n&&"PR"!==n||o.testZipCode(e,n)}},mixins:[s,i],getInitialState:function(){return f(this.defaultInitialState(),this.gatewayInitialState(),{country:d.special[0][0],taxId:""})},render:m.renderable(function(){var e,t,n,i,s,u,c,d,g,v,b,y,w,_,k,C,x,j;return w=this.props.onSubmit,C=this.state,e=C.cardType,x=C.submitting,i=C.errorField,g=C.gatewayLoaded,u=C.gatewayErrorField,d=C.gatewayFocusField,c=C.gatewayFieldStatus,n=C.country,j=C.unknownError,b=this.getLocalizedCountries(),t=h(this,"controlledOpts"),v="name"===i,y=function(e){return function(t){return e.setState({country:t.target.value,zipCode:"",taxId:""})}}(this),_=function(e){return function(t){return e.setState({submitting:!0}),e.getData().then(w).catch(a.InvalidField,function(t){var n;return n=t.field,e.setState({errorField:n,submitting:!1})}).catch(a.PostError,function(t){var n,r;return l.isJsonString(null!=t?t.message:void 0)?(n=JSON.parse(t.message),(i=o.getErrorField(null!=n?n.error:void 0))?e.setState({errorField:i,submitting:!1}):void 0):e.setState({
unknownError:null!=(r=t.message)?r:"error",submitting:!1})}).catch(r,function(t){var n;return n=t.message,e.setState({unknownError:null!=n?n:"error",submitting:!1})}).done()}}(this),k=function(e){return e.preventDefault()},s=function(e,n,r,o){var a;return a=e===i,m.label(function(){return m.format(n),m.input(f(o,t(e),{class:m.classify({text:!0,"input-error":a}),type:"text"})),a?m.span(".u-form-error",function(){return m.format(r)}):void 0})},m.div(".u-clearfix",function(){return m.form({onSubmit:k,ref:"form",key:"credit-card-update-form"},function(){return m.div(".credit-card-update-section.u-clearfix",function(){var r;return r=function(e){var t,n,r,o,a;return a=e.selector,o=e.labelKey,n=e.fieldType,t=e.errorKey,r="invalid"===c[n]||i===n,m.label(function(){return m.format(o),m.div(".iframe-input"+a,{class:m.classify({disabled:!g,focus:d===n,"input-error":r})}),null!=t&&r?m.span(".u-form-error",function(){return m.format(t)}):void 0})},m.div(".u-clearfix",function(){return m.div(".credit-card-form-number",function(){return r({selector:".js-card-number",labelKey:"card-number",fieldType:"number",errorKey:"please-provide-your-full-card-number-for-credit-card-verification"})}),m.div(".credit-card-expiration-date",function(){return r({selector:".js-expiration-date",labelKey:"expiration",fieldType:"expirationDate",errorKey:"please-provide-a-valid-expiration-date"})}),m.div(".credit-card-form-cvv",function(){return r({selector:".js-cvv",labelKey:"cvv",fieldType:"cvv",errorKey:o.getCvvErrorKey(e)})})}),m.div(".credit-card-country",function(){return m.label(function(){return m.format("country"),m.text(" ")}),m.select(f(t("country"),{onChange:y,autoComplete:"country"}),function(){var e,t,n,r,o;for(e=0,t=b.length;t>e;e++)r=b[e],o=r[0],n=r[1],m.option({value:o},function(){return m.text(n)})})}),("US"===n||"CA"===n||"PR"===n)&&m.div(".credit-card-zip-code",function(){return s("zipCode","zip-postal-code","please-enter-a-valid-postal-code",{maxLength:"10",size:"10",autoComplete:"postal-code"})}),m.div({class:m.classify({"tax-number":!0,hide:!(-1!==p.indexOf(n)||"AU"===n)})},function(){return m.label(function(){var e;return e="taxId"===i,m.format("tax-number",{taxType:"AU"===n?"ABN":"VAT"}),m.input(f(t("taxId"),{class:m.classify({text:!0,"input-error":e}),type:"text"})),e?m.span(".u-form-error",function(){return m.format("please-enter-a-valid-tax-number")}):void 0})})})}),j&&m.p(".u-form-error",function(){return m.text(j)}),m.div(function(){return m.button(".primary",{onClick:_,disabled:x,class:m.classify({disabled:x})},function(){return m.format("save")})})})}),getLocalizedCountries:function(){var e,t;return e=d.special.map(o.localizeCountry),t=d.unloved.map(o.localizeCountry).sort(function(e,t){var n,r,o,i;return n=e[0],r=e[1],o=t[0],i=t[1],r.localeCompare(i)}),e.concat(t)}})},{}],325:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;s=e(544)("credit_card"),o=e(549),i=s.renderable(function(){return s.h3(function(){return s.text(s.l("amex_title"))}),s.p(function(){return s.text(s.l("amex_info"))}),s.img({src:"https://a.trellocdn.com/images/credit-cards/1256bb64c2e33bafad6358dc1c1b2fbc/credit-card-amex.png"})}),a=s.renderable(function(){return s.h3(function(){return s.text(s.l("other_cards_title"))}),s.p(function(){return s.text(s.l("other_cards_info"))}),s.img({src:"https://a.trellocdn.com/images/credit-cards/78ab357ad132b4742ccf91463b6511b2/credit-card.png"})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.renderOnce=function(){switch(this.options.cardType){case"american-express":this.$el.append(i());break;case"visa":case"master-card":case"discover":this.$el.append(a());break;default:this.$el.append([i(),a()])}return this},t}(o)},{}],326:[function(e,t,n){var r,o,i,a,s,u;r=e(335),o=e(128),i=e("bluebird"),s=e("underscore"),u=e(104),a=e(133),t.exports={gatewayFields:["number","cvv","expirationDate"],gatewayInitialState:function(){var e;return e=s.chain(this.gatewayFields).map(function(e){return[e,"empty"]}).object().value(),{gatewayLoaded:!1,gatewayFieldStatus:e,gatewayFocusField:null}},componentDidMount:function(){if(null==this.refs.form)throw Error("expected to be mixed into something with a ref to a form");return this._loadGateway().then(function(e){return function(){return e.setState({gatewayLoaded:!0}),e._initialiseBraintree()}}(this))},componentWillUnmount:function(){var e;return null!=(e=this._asyncDataPromise)?e.cancel():void 0},componentWillReceiveProps:function(e){var t;return t=function(){switch(e.errorField){case"credit card number":return"number";case"expYear":return"expirationDate";default:return e.errorField}}(),this.setFieldStatus(t,"invalid")},_initialiseBraintree:function(){return window.braintree.client.create({authorization:window.braintreeClientToken},function(e){return function(t,n){var o;if(t)throw Error(t);return o={client:n,styles:{input:{"font-size":"16px","font-family":'"Helvetica Neue", Arial, Helvetica, sans-serif'}},fields:{number:{selector:".js-card-number",placeholder:"4111 1111 1111 1111"},cvv:{selector:".js-cvv",placeholder:u("cvv digits",{digits:"3"})},expirationDate:{selector:".js-expiration-date",placeholder:u("month/year abbreviation")}}},window.braintree.hostedFields.create(o,function(t,n){var o;if(t)throw Error(t);return o=document.querySelector(".js-cvv-label-text"),n.on("cardTypeChange",function(t){var r;return 1===t.cards.length?(r=t.cards[0],e.setState({cardType:r.type}),null!=o&&(o.textContent=r.code.name),n.setAttribute({field:"cvv",attribute:"placeholder",value:u("cvv digits",{digits:r.code.size.toString()})})):e.setState({cardType:null})}),n.on("focus",function(t){return e.setState({gatewayFocusField:t.emittedBy})}),n.on("blur",function(t){var n,r,o;return e.setState({gatewayFocusField:null}),n=t.emittedBy,r=t.fields[n],o=r.isEmpty?"empty":r.isValid?"valid":"invalid",e.setFieldStatus(n,o)}),n.on("empty",function(t){return e.setFieldStatus(t.emittedBy,"empty")}),n.on("validityChange",function(t){var n,r,o;return n=t.emittedBy,r=t.fields[n],o=r.isEmpty?"empty":r.isPotentiallyValid?"valid":"invalid",e.setFieldStatus(n,o)}),e.refs.form.addEventListener("submit",function(t){return t.preventDefault(),n.tokenize(function(t,n){return t?void e._reject(new r.PostError(t.message)):e._resolve({nonce:n.nonce})})})})}}(this))},_awaitData:function(){return null!=this._awaiting&&this._reject(new Error("submitting form again")),new i(function(e){return function(t,n){return e._awaiting={resolve:t,reject:n}}}(this)).finally(function(e){return function(){return e._awaiting=null}}(this))},_resolve:function(e){var t;return null!=(t=this._awaiting)?t.resolve(e):void 0},_reject:function(e){var t;return null!=(t=this._awaiting)?t.reject(e):void 0},getAsyncData:function(){var e,t,n,a,s;for(a=this.gatewayFields,t=0,n=a.length;n>t;t++)if(e=a[t],"valid"!==this.state.gatewayFieldStatus[e])return i.reject(r.InvalidField("",{field:e}));return null!=(s=this._asyncDataPromise)&&s.cancel(),this._asyncDataPromise=this._awaitData().cancellable(),this.refs.form.dispatchEvent(new o("submit",{cancelable:!0})),this._asyncDataPromise},_loadGateway:function(){return null!=this._loadGatewayPromise?this._loadGatewayPromise:this._loadGatewayPromise=i.try(function(e){return function(){var e;if(null==window.braintree)return e=["https://js.braintreegateway.com/web/3.19.0/js/client.min.js","https://js.braintreegateway.com/web/3.19.0/js/hosted-fields.min.js"],i.all(e.map(function(e){return a.loadScript(e)}))}}(this)).return()},setFieldStatus:function(e,t){var n;return n=s.clone(this.state.gatewayFieldStatus),n[e]=t,this.setState({gatewayFieldStatus:n})}}},{}],327:[function(e,t,n){t.exports={special:[["US","united-states"],["GB","united-kingdom"],["CA","canada"],["AU","australia"],["DE","germany"],["NL","netherlands"]],unloved:[["AF","afghanistan"],["AL","albania"],["DZ","algeria"],["AS","american-samoa"],["AD","andorra"],["AI","anguilla"],["AG","antiqua-and-barbuda"],["AR","argentina"],["AM","armenia"],["AW","aruba"],["AU","australia"],["AT","austria"],["AZ","azerbaijan"],["BS","bahamas"],["BH","bahrain"],["BD","bangladesh"],["BB","barbados"],["BY","belarus"],["BE","belgium"],["BZ","belize"],["BJ","benin"],["BM","bermuda"],["BT","bhutan"],["BO","bolivia"],["BA","bosnia-herzegovina"],["BV","bouvet-islands"],["BR","brazil"],["IO","british-indian-ocean-territory"],["VI","british-virgin-islands"],["BN","brunei"],["BG","bulgaria"],["BF","burkina-faso"],["BI","burundi"],["KH","cambodia"],["CM","cameroon"],["CA","canada"],["CV","cape-verde"],["KY","cayman-islands"],["CF","central-african-republic"],["TD","chad"],["CL","chile"],["CN","china"],["CO","colombia"],["KM","comoros"],["CG","congo"],["CR","costa-rica"],["CI","cote-d-ivoire"],["HR","croatia"],["CY","cyprus"],["CZ","czech-republic"],["DK","denmark"],["DJ","djibouti"],["DM","dominica"],["DO","dominican-republic"],["EG","egypt"],["SV","el-salvador"],["EC","equador"],["GQ","equatorial-guinea"],["ER","eritrea"],["EE","estonia"],["ET","ethiopia"],["FK","falkland-islands"],["FO","faroe-islands"],["FM","federated-states-of-micronesia"],["FJ","fiji"],["FI","finland"],["FR","france"],["GF","french-guiana"],["PF","french-polynesia"],["GA","gabon"],["GM","gambia"],["GE","georgia"],["DE","germany"],["GH","ghana"],["GI","gibraltar"],["GR","greece"],["GL","greenland"],["GD","grenada"],["GP","guadeloupe"],["GU","guam"],["GT","guatemala"],["GN","guinea"],["GW","guinea-bissau"],["GY","guyana"],["HT","haiti"],["HN","honduras"],["HK","hong-kong"],["HU","hungary"],["IS","iceland"],["IN","india"],["ID","indonesia"],["IE","ireland"],["IL","israel"],["IT","italy"],["JM","jamaica"],["JP","japan"],["JO","jordan"],["KZ","kazakhstan"],["KE","kenya"],["KI","kiribati"],["KW","kuwait"],["KG","kyrgyzstan"],["LA","laos"],["LV","latvia"],["LB","lebanon"],["LS","lesotho"],["LR","liberia"],["LI","liechtenstein"],["LT","lithuania"],["LU","luxembourg"],["MO","macau"],["MG","madagascar"],["MW","malawi"],["MY","malaysia"],["MV","maldives"],["ML","mali"],["MT","malta"],["MH","marshall-islands"],["MQ","martinique"],["MR","mauritania"],["MU","mauritius"],["YT","mayotte"],["FX","metropolitan-france"],["MX","mexico"],["MD","moldova"],["MN","mongolia"],["ME","montenegro"],["MA","morocco"],["MZ","mozambique"],["NA","namibia"],["NR","nauru"],["NP","nepal"],["AN","netherlands-antilles"],["NL","netherlands"],["NC","new-caledonia"],["NZ","new-zealand"],["NI","nicaragua"],["NE","niger"],["NG","nigeria"],["MP","northern-mariana-islands"],["NO","norway"],["OM","oman"],["PK","pakistan"],["PW","palau"],["PA","panama"],["PG","papua-new-guinea"],["PY","paraguay"],["PE","peru"],["PE","peru"],["PH","philippines"],["PN","pitcairn"],["PL","poland"],["PT","portugal"],["PR","puerto-rico"],["QA","qatar"],["KR","republic-of-korea"],["RE","reunion"],["RO","romania"],["RU","russia"],["ST","sao-tome-and-principe"],["SA","saudi-arabia"],["SN","senegal"],["RS","serbia"],["SC","seychelles"],["SL","sierra-leone"],["SG","singapore"],["SK","slovakia"],["SI","slovenia"],["SB","solomon-islands"],["SO","somalia"],["ZA","south-africa"],["ES","spain"],["LK","sri-lanka"],["SH","st-helena"],["KN","st-kitts-and-nevis"],["LC","st-lucia"],["VC","st-vincent-and-the-grenadines"],["SD","sudan"],["SR","suriname"],["SJ","svalbard-and-jan-mayen-islands"],["SZ","swaziland"],["SE","sweden"],["CH","switzerland"],["SY","syria"],["TW","taiwan"],["TJ","tajikistan"],["TZ","tanzania"],["TH","thailand"],["MK","the-former-yugoslav-republic-of-macedonia"],["TG","togo"],["TO","tonga"],["TT","trinidad-and-tobago"],["TR","turkey"],["TM","turkmenistan"],["TC","turks-and-caicos-islands"],["TV","tuvalu"],["UG","uganda"],["UA","ukraine"],["AE","united-arab-emirates"],["GB","united-kingdom"],["US","united-states"],["UY","uruguay"],["UZ","uzbekistan"],["VU","vanuatu"],["VA","vatican-city"],["VE","venezuela"],["VN","vietnam"],["EH","western-sahara"],["YE","yemen"],["ZR","zaire"],["ZM","zambia"],["ZW","zimbabwe"]]}},{}],328:[function(e,t,n){var r,o,i,a;i=e("underscore"),r=e(335),o=e("bluebird"),a=e("xtend"),t.exports={defaultInitialState:function(){return i.object(this.formFields.map(function(e){return[e,""]}))},getData:function(){var e,t,n,s,u,c;n=null!=(t=this.requiredFields)?t:{};for(e in n)if(u=n[e],c=this.state[e],s=i.isRegExp(u)?u.test(c):i.isFunction(u)?u(c,this.state):i.isEqual(u,c),!s)return o.reject(r.InvalidField("",{field:e}));return o.resolve("function"==typeof this.getAsyncData?this.getAsyncData():void 0).then(function(e){return function(t){return e.formFields?a(t,i.object(e.formFields.map(function(t){return[t,e.state[t]]}))):void 0}}(this))},controlledOpts:function(e){return{onChange:function(t){return function(n){var r;return r={},r[e]=n.target.value,t.setState(r)}}(this),value:this.state[e]}}}},{}],329:[function(e,t,n){var r,o,i,a,s,u,c,l,d;r=e(328),o=e("react"),c=e(541)("credit_card"),i=e("underscore"),d=e("xtend"),a=e(245),s=e(93),u=e(94),l=e(51),t.exports=o.createClass({displayName:"ProductsComponent",formFields:["products"],mixins:[r],getInitialState:function(){return{products:[this.props.defaultProduct.toString()]}},render:c.renderable(function(){var e,t,n,r,o,i,d,p,h,m;return i=this.props,o=i.productName,r=i.monthlyProduct,m=i.yearlyProduct,e=i.billingStrategy,p=i.setBillingPlan,d=i.selectedBillingPlan,t=a(c,"radio",this),d&&r&&(n=d.toString()===r.productNumber.toString()),h=function(e){var t;return e.target.value?(t=function(){switch(e.target.value){case"105":return"Monthly";case"106":return"Annual";default:return"Unknown"}}(),l("Organization View","Business Class Page",t+" Billing Button")):void 0},c.div(".u-clearfix.billing-products-component",function(){return c.h1(".subscribe-title",function(){return c.format("subscribe-to-productname",{productName:o})}),c.h3(".billing-plan-title",function(){return c.format("billing-plan")}),c.div(".u-clearfix.billing-plans-wrap",function(){return c.div(".u-clearfix.billing-plan.yearly-plan",function(){return c.label({onClick:h},function(){return t("products",[m.productNumber.toString()],function(){return p(m.productNumber.toString())}),c.span(".radio"),c.h4(function(){return c.format("billed-annually")}),c.strong(".monthly-price",function(){return c.text("$"+s(m.price/12))}),c.span(".save-losenge.small",function(){return c.format("save-percent",{savePercent:u(m.savePercent)})}),c.span(".small.clear",function(){return c.format(e.perUser?"per-user-per-month":"per-month")})})}),c.div(".u-clearfix.billing-plan.monthly-plan",function(){return c.label({onClick:h},function(){return t("products",[r.productNumber.toString()],function(){return p(r.productNumber.toString())}),c.span(".radio"),c.h4(function(){return c.format("billed-monthly")}),c.strong(".monthly-price",function(){return c.text("$"+s(r.price))}),c.span(".small.clear",function(){return c.format(e.perUser?"per-user-per-month":"per-month")})})})}),n&&c.span(".switch-to-annual.small",function(){return c.format("save-annual-billing",{savePercent:m.savePercent})}),e.perActiveUser?c.p(".u-quiet",function(){return c.format("smart billing explanation recently active")}):void 0})})})},{}],330:[function(e,t,n){var r,o,i,a;r=e(328),o=e("react"),a=e(541)("credit_card"),i=e(93),t.exports=o.createClass({displayName:"SummaryComponent",mixins:[r],getInitialState:function(){return{products:[this.props.defaultProduct.toString()]}},render:a.renderable(function(){var e,t,n,r,o,s,u,c,l,d;return r=this.props,n=r.monthlyProduct,d=r.yearlyProduct,e=r.billingStrategy,s=r.selectedBillingPlan,u=r.subTotalCost,c=r.tax,o=r.region,t=s.toString()===d.productNumber.toString(),l=(parseFloat(u)+parseFloat(c||0)).toFixed(2),a.div(".billing-summary",function(){return a.h3(function(){return a.format("billing-plan-summary")}),a.table(function(){return a.tbody(function(){return a.tr(function(){return a.td(function(){return a.span(".licences-quantity",function(){return e.flatRate?a.format("one-trello-gold-license"):a.format(t?"yearly-licenses":"monthly-licenses",{licenses:e.userCount})}),t?a.span(".save-info.small",function(){return a.format("monthly-saving-info",{savePercent:d.savePercent})}):a.span(".switch-to-annual.small",function(){return a.format("annual-saving-info",{savePercent:d.savePercent})})}),a.td(function(){return a.strong(".cost-each-monthly.price",function(){return a.text("$"+i(t?d.price:n.monthlyPrice))}),e.flatRate?void 0:a.span(".small",function(){return a.format("each")})})}),a.tr(function(){return a.td(function(){return null!==o?a.format("sales-tax",{region:c?o:""}):a.span(".u-form-error",function(){return a.format("could-not-calculate-sales-tax")})}),a.td(function(){return null!==c?a.strong(function(){return a.text("$"+i(c))}):void 0})})}),a.tfoot(function(){return a.tr(function(){return a.td(function(){return a.format("total-label")}),a.td(function(){return a.strong(".price",function(){return a.text("$"+i(l,!0))})})})})})})})})},{}],331:[function(e,t,n){var r,o,i;r=e(328),o=e("react"),i=e(541)("credit_card"),t.exports=o.createClass({displayName:"TermsOfServiceComponent",formFields:["acceptTOS"],requiredFields:{acceptTOS:!0},mixins:[r],getInitialState:function(){return{acceptTOS:!1}},render:i.renderable(function(){var e,t,n,r;return t=this.props.errorField,n="acceptTOS"===t,r=function(e){return function(t){return e.setState({acceptTOS:t.target.checked})}}(this),e=this.state.acceptTOS,i.div({id:"divAcceptTOS"},function(){return i.div(".check-div.u-clearfix",function(){return i.label(function(){return i.input({class:i.classify({"input-error":n}),type:"checkbox",checked:e,onChange:r}),i.format("i-accept-the-terms-of-service-and-the-privacy-policy")})}),n?i.p(".u-form-error.error",function(){return i.format("you-must-accept-the-terms-of-service-and-privacy-policy")}):void 0})})})},{}],332:[function(e,t,n){var r,o,i,a,s;r=e(74),i=e(104),a=e("moment"),o=e(245),s=e("xtend"),t.exports=function(e,t,n){var o,u,c,l,d,p,h,m,f,g,v,b;return c={},c.paidAccount=e.get("paidAccount"),c.key=c.id=e.id,c.statementUrl=e.urlRoot+"/"+e.id+"/paidAccount/statement",u=null!=(d=c.paidAccount)&&null!=(p=d.products)?p[0]:void 0,b=t.getYearlyEquivalent(u),null!=u&&(l=null!=(h=c.paidAccount.billingDates)?h[u]:void 0)&&(c.nextBillingDate=a(new Date(l)).format("LL")),c.yearlyEquivalent=b,c.yearlyEquivalentPrice=t.getPrice(b),c.yearlyEquivalentTotalPrice="function"==typeof e.totalPerUserPrice?e.totalPerUserPrice(b):void 0,c.yearlyDiscountPercent=t.getYearlyDiscountPercent(b,u),c.price=t.getPrice(u),c.billingStrategy=e.getBillingStrategy(u),t.isPerUser(u)?c.nextChargeAmount=e.totalPerUserPrice(u):c.nextChargeAmount=t.getPrice(u),c.current=t.currentPriceObjectForModel(e),c.canSwitchToYearly=function(){return!t.isUpgrade(u)&&null!=t.getYearlyEquivalent(u)},c.activeAccount=r.isActive(c.paidAccount),v=null!=(m=c.paidAccount)?m.standing:void 0,c.hasAccount=r.hasAccount(v),c.processingAccount=r.isProcessing(v),c.problemAccount=r.isProblem(v),c.willExpire=r.willExpire(c.paidAccount),c.willExpire&&null!=u&&(l=c.paidAccount.expirationDates[u])&&(c.expirationDate=a(new Date(l)).format("LL")),null!=(o=r.standingName(null!=(f=e.get("paidAccount"))?f.standing:void 0))&&(c.accountStanding=o,c.accountStandingDisplay=i(["account standing",o])),c.cancelledAccount=r.isCancelled(c.paidAccount),c.needCC=r.needsCC(null!=(g=c.paidAccount)?g.standing:void 0),s(c,n)}},{}],333:[function(e,t,n){var r,o;o=e(541)("credit_card"),t.exports=r={localizeCountry:function(e){var t,n;return n=e[0],t=e[1],[n,o.l(["countries",t])]},testZipCode:function(e,t){var n;switch(t){case"US":case"PR":return 5===(n=e.replace(/\D/g,"").length)||9===n;case"CA":return/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/.test(e);default:return!1}},getCvvErrorKey:function(e){return"american-express"===e?"please-enter-a-valid-4-digit-amex-cid":"please-enter-a-valid-3-digit-cvv"},getErrorField:function(e){switch(e){case"SHOP_INVALID_TAX_ZIP_CODE":return"zipCode";case"SHOP_INVALID_TAX_COUNTRY_CODE":return"country";case"SHOP_INVALID_TAX_ID":return"taxId"}}}},{}],334:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(339),i=e("moment"),s=e(261),u=function(e,t){if("string"!=typeof e)throw Error("Not a string!");return 0===e.indexOf(t)},a=function(e){return{date:e.date,statementUrl:e.statementUrl,fallbackText:e.item,translationKey:e.translationKey,translationArgs:e.translationSubstitutions,amount:Math.abs(e.amount),type:function(){if(u(e.item,"Credit."))return"return";if(u(e.item,"Refund to your"))return"refund";if(e.amount>0)return"credit";if(e.amount<0)return"debit";throw new Error("Cannot format a row with 0 amount!")}()}},c=function(e){var t,n;return n=(null!=(t=e.statement)?t:[]).filter(function(e){return 0!==e.amount}).map(a).reverse(),{statement:n}},t.exports=r=function(e){function t(){var e;t.__super__.constructor.apply(this,arguments),e=null,this.state=this._protectedState.map(s(function(t){return t([{value:s.Any}],function(t){var n;return n=t.value,e=c(n)}),t([{error:s.Any}],function(e){var t;return t=e.error,{errorText:t.message}}),t([{timeout:!0}],function(){return e}),t([{}],function(){return{}})}))}return l(t,e),t}(o)},{}],335:[function(e,t,n){var r;r=e(105),t.exports=r("CreditCardForm",["InvalidField","PostError","PollError"])},{}],336:[function(e,t,n){var r,o,i,a;a=e(74),r=a.isActive,o=a.isProcessing,i=a.needsCC,t.exports=function(e){return i(null!=e?e.standing:void 0)||r(e)&&!o(null!=e?e.standing:void 0)}},{}],337:[function(e,t,n){var r;r=e(253),t.exports=r("PollTimeoutError")},{}],338:[function(e,t,n){var r,o;o=e("bluebird"),r=e(337),t.exports=function(e,t){var n,i;return i=null,n=new o(function(n,o){i=e.state.subscribe(function(e){"error"in e?o(e.error):"timeout"in e?o(r()):"value"in e&&t(e.value)&&n(e.value)})}),e.start(),e.finished.then(function(){return i()}),n.finally(function(){return e.stop()})}},{}],339:[function(e,t,n){var r,o,i,a,s,u,c,l,d;r=e(221),o=e("hearsay"),s=e("bluebird"),d=e("moment"),l=e(245),u=e(79),c=e(253),i=c("PollingError"),t.exports=a=function(){function e(e,t,n){var r;this.pollFx=e,this.minutesToPoll=t,this.intervalMs=n,this._protectedState=new o.Slot({}),this.state=this._protectedState,this.finished=new s(function(e){return function(t){return e._resolveFinished=t}}(this)),r=this._protectedState.use(),this.finished.finally(r)}return e.prototype._started=!1,e.prototype.start=function(){u(!this._started,"Cannot start more than once!"),u(!this._isComplete(),"Cannot start after stopping!"),this._started=!0,this._dateToStopPolling=d().add(this.minutesToPoll,"minutes").toDate(),this._poll()},e.prototype._done=function(){return u(!this._isComplete(),"Pollster cannot complete more than once!"),this._resolveFinished(this.state.get())},e.prototype._isComplete=function(){return this.finished.isFulfilled()},e.prototype.stop=function(){this._isComplete()||(null!=this._currentTimeout&&(clearTimeout(this._currentTimeout),delete this._currentTimeout),this._done())},e.prototype._poll=function(){return s.try(this.pollFx).catch(function(e){return s.reject(i("",{innerError:e}))}).then(function(e){return function(t){e._isComplete()||(e._protectedState.set({value:t}),d().isBefore(e._dateToStopPolling)?e._currentTimeout=setTimeout(l(e,"_poll"),e.intervalMs):(e._protectedState.set({timeout:!0}),delete e._currentTimeout,e._done()))}}(this)).catch(i,function(e){return function(t){var n;return n=t.innerError,e._protectedState.set({error:n}),e._done()}}(this)).done()},e}()},{}],340:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h;r=e(221),o=e(222),a=e(339),s=e("bluebird"),d=e(338),u=e(336),i=e(335),c=function(e){return u(e.paidAccount)},h="U.S. addresses require a 5 or 9 digit zip code. Canadian addresses require a Postal Code.",l=function(e){return e instanceof r.BadRequest&&(/^invalid value for /.test(e.message)||e.message.trim()===h)},p=function(e){return s.resolve(e).disposer(function(e){return e.stop()})},t.exports=function(e,t,n){return s.using(p(new a(t,1,1e3)),function(t){return e().cancellable().catch(l,function(e){var t,n;return n=e.message,t=n.trim()===h?"zipCode":n.replace("invalid value for ","").trim(),s.reject(i.InvalidField("",{field:t}))}).catch(r,function(e){return s.reject(i.PostError("",{err:e}))}).then(function(e){return c(e)?e:d(t,c).catch(function(e){return s.reject(i.PollError("",{err:e}))})})})}},{}],341:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e("react"),i=e("underscore"),u=e(541)("create_board"),s=e(345),a=s.createBackgroundStyle,t.exports=r=function(e){function t(e){this.state={background:null},t.__super__.constructor.call(this,e)}return c(t,e),t.prototype.displayName="BackgroundChooserComponent",t.prototype.componentDidMount=function(){return setTimeout(function(e){return function(){var t;return null!=(t=e.chooserElem)?t.focus():void 0}}(this),10)},t.prototype.render=u.renderable(function(){var e,t,n,r,o,i,a,s,c;return i=this.props,e=i.colors,o=i.photos,n=i.onColorChooserTriggerClick,r=i.onPhotoChooserTriggerClick,s=i.selectedBackground,t=this.containsSelectedBackground.bind(this),a=this.renderBackgroundItem.bind(this),c=function(e){return function(t){return e.chooserElem=t}}(this),u.div(".background-chooser",{ref:c,tabIndex:0},function(){return u.section(function(){return u.header(".background-chooser-header",function(){return u.h1(".background-chooser-heading",function(){return u.format("colors")}),u.a(".quiet-button",{href:"#",onClick:n},function(){return u.format("see more")})}),u.ul(".background-grid",function(){return e=e.slice(0,6),s.isColor&&!t(e)&&(e=[s].concat(e.slice(1))),e.forEach(a)})}),u.section(function(){return u.header(".background-chooser-header",function(){return u.h1(".background-chooser-heading",function(){return u.format("photos")}),u.a(".quiet-button",{href:"#",onClick:r},function(){return u.format("see more")})}),u.ul(".background-grid",function(){return o=o.slice(0,6),s.isPhoto&&!t(o)&&(o=[s].concat(o.slice(1))),o.forEach(a)})})})}),t.prototype.renderBackgroundItem=function(e){var t,n;return t=e.value===(null!=this.state.background?this.state.background.value:this.props.selectedBackground.value),n=function(t){return function(){return t.setState({background:e}),t.props.onSelect(e)}}(this),u.li(".background-grid-item",function(){return u.button(".background-grid-trigger",{className:u.classify({"is-photo":e.isPhoto,selected:t}),key:e.value,onClick:n,role:"button",style:a(e),title:e.isColor?e.value:void 0},function(){return t?u.icon("check"):void 0})})},t.prototype.containsSelectedBackground=function(e){return i.find(e,function(e){return function(t){return t.value===e.props.selectedBackground.value}}(this))},t}(o.Component)},{}],342:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e("react"),s=e(541)(),a=e(345),i=a.createBackgroundStyle,t.exports=r=function(e){function t(e){this.state={background:null},t.__super__.constructor.call(this,e)}return u(t,e),t.prototype.displayName="ColorChooserComponent",t.prototype.componentDidMount=function(){return setTimeout(function(e){return function(){var t;return null!=(t=e.chooserElem)?t.focus():void 0}}(this),10)},t.prototype.render=s.renderable(function(){var e,t,n,r,o,a;return e=this.state.background,r=this.props,t=r.colors,o=r.selectedBackground,n=function(e){return function(t){return e.setState({background:t}),e.props.onSelect(t)}}(this),a=function(e){return function(t){return e.chooserElem=t}}(this),s.div(".background-chooser",{ref:a,tabIndex:0},function(){return s.ul(".background-grid",function(){return t.forEach(function(t){var r;return r=t.value===(null!=e?e.value:o.value),s.li(".background-grid-item",function(){return s.button(".background-grid-trigger",{className:s.classify({selected:r}),key:t.value,onClick:function(){return n(t)},role:"button",style:i(t),title:t.value},function(){return r?s.icon("check"):void 0})})})})})}),t}(o.Component)},{}],343:[function(e,t,n){t.exports={Unsplash:{DEFAULT_COLLECTION_ID:317099,PAGE_SIZE:18,RAW_PARAMS:"?w=2560&h=2048&q=90"}}},{}],344:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I=function(e,t){function n(){this.constructor=e}for(var r in t)N.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},N={}.hasOwnProperty,V=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};v=e("bluebird"),b=e("react"),_=e("underscore"),u=e(7),o=e(35),p=e(40),L=e(51),T=e(104),y=e(133),A=e(236),D=A.unsplashApi,P=A.toJson,B=e(541)("create_board"),r=e(559),d=e(563),g=e(569),k=e(343),S=e(345),i=e(341),s=e(342),f=e(347),h=e(346),w=e(348),C=S.createBackgroundStyle,x=S.createColors,j=S.createPhotoFromResponse,E=S.preloadPermissions,O=S.preloadPhotos,M=k.Unsplash,l=M.DEFAULT_COLLECTION_ID,m=M.PAGE_SIZE,a=x(),t.exports=c=function(e){function t(e){var n;this.state={isBackgroundChooserVisible:!1,isColorChooserVisible:!1,isPhotoChooserVisible:!1,isLoadingVisPermissions:!1,isLoadingPhotos:!1,isOrgChooserVisible:!1,isSubmitting:!1,isVisChooserVisible:!1,background:a[0],org:null,orgsWithPermissions:[],photos:[],vis:"private",title:null!=(n=e.defaultTitle)?n:""},t.__super__.constructor.call(this,e)}return I(t,e),t.prototype.displayName="CreateBoardComponent",t.prototype.componentDidMount=function(){var e;return this.loadVisPermissions(),this.loadPhotos(),this.submitButtonWidth=null!=(e=this.submitButtonElem)?e.getBoundingClientRect().width:void 0,setTimeout(function(e){return function(){var t,n;return null!=(t=e.titleInputElem)&&t.focus(),null!=(n=e.titleInputElem)?n.select():void 0}}(this),10)},t.prototype.componentDidUpdate=function(e,t){return this.state.isOrgChooserVisible&&this.showOrgChooser(),this.state.isVisChooserVisible&&this.showVisChooser(),this.state.isBackgroundChooserVisible&&this.showBackgroundChooser(),this.state.isColorChooserVisible&&!t.isColorChooserVisible&&this.showColorChooser(),this.state.isPhotoChooserVisible&&!t.isPhotoChooserVisible?this.showPhotoChooser():void 0},t.prototype.render=B.renderable(function(){return B.form(".create-board-form",{onSubmit:this.onSubmit.bind(this)},function(e){return function(){return B.div(function(){return B.div(".board-tile.create-board-tile",{className:B.classify({"has-photo-background":e.state.background.isPhoto}),ref:function(t){return e.createBoardTileElem=t},style:C(e.state.background)},function(){return B.button(".hide-dialog-trigger.unstyled-button",{onClick:e.onHideDialogTriggerClick.bind(e),type:"button"},function(){return B.icon("close")}),B.div(function(){return e.renderTitleInput()}),e.state.isLoadingVisPermissions?B.p(".checking-vis-permissions",function(){return B.text(T(["checking visibility permissions"]))}):(e.state.orgsWithPermissions.length&&B.div(function(){return e.renderOrgChooserTrigger()}),B.div(function(){return e.renderVisChooserTrigger()}))}),e.renderBackgroundGrid()}),e.renderSubmitButton()}}(this))}),t.prototype.renderTitleInput=function(){return B.input(".subtle-input",{disabled:this.state.isSubmitting,placeholder:B.l("add board title"),onBlur:this.onTitleBlur.bind(this),onChange:this.onTitleChange.bind(this),ref:function(e){return function(t){return e.titleInputElem=t}}(this),value:this.state.title})},t.prototype.renderOrgChooserTrigger=function(){return B.button(".subtle-chooser-trigger.unstyled-button.org-chooser-trigger",{type:"button",onClick:this.onOrgChooserTriggerClick.bind(this),ref:function(e){return function(t){return e.orgTriggerElem=t}}(this)},function(e){return function(){return B.span(function(){return null!=e.state.org?B.text(e.state.org.model.get("displayName")):B.format("no team")})}}(this))},t.prototype.renderVisChooserTrigger=function(){
return B.button(".subtle-chooser-trigger.unstyled-button.vis-chooser-trigger",{type:"button",onClick:this.onVisChooserTriggerClick.bind(this),ref:function(e){return function(t){return e.visTriggerElem=t}}(this)},function(e){return function(){switch(e.state.vis){case"private":return B.icon("private"),B.text(T(["board perms","private","name"]));case"org":return B.icon("organization-visible"),B.text(T(["board perms","org","name"]));case"public":return B.icon("public"),B.text(T(["board perms","public","name"]))}}}(this))},t.prototype.renderBackgroundGrid=function(){var e;return e=0===this.state.photos.length?a.slice(0,8):this.state.photos.slice(0,4).concat(a.slice(0,4)),_.find(e,function(e){return function(t){return t.value===e.state.background.value}}(this))||(e=[this.state.background].concat(e.slice(1))),B.ul(".background-grid",{ref:function(e){return function(t){return e.backgroundGridElem=t}}(this)},function(t){return function(){return e.forEach(function(e){return B.li(".background-grid-item",function(){return B.button(".background-grid-trigger",{key:e.value,className:B.classify({"is-photo":e.isPhoto,selected:t.state.background.value===e.value}),onClick:function(){return t.setBackground(e)},style:C(e,{isSmall:!0}),title:e.isColor?e.value:void 0,type:"button"},function(){return t.state.background.value===e.value?B.icon("check"):void 0})})}),B.li(".background-grid-item",function(){return B.button(".background-grid-trigger",{onClick:t.onBackgroundChooserTriggerClick.bind(t),type:"button"},function(){return B.icon("overflow-menu-horizontal")})})}}(this))},t.prototype.renderSubmitButton=function(){return B.button(".primary",{className:B.classify({disabled:!this.canSubmit()}),disabled:!this.canSubmit(),ref:function(e){return function(t){return e.submitButtonElem=t}}(this),style:this.state.isSubmitting?{width:this.submitButtonWidth}:void 0,type:"submit"},function(e){return function(){return e.state.isSubmitting?B.span(".logo-loading.subtle.active"):B.format("create board")}}(this))},t.prototype.onOrgChooserTriggerClick=function(e){return this.state.isSubmitting||this.state.isOrgChooserVisible?void 0:(y.stop(e),this.setState({isOrgChooserVisible:!0}))},t.prototype.onVisChooserTriggerClick=function(e){return this.state.isSubmitting||this.state.isVisChooserVisible?void 0:(y.stop(e),this.setState({isVisChooserVisible:!0}))},t.prototype.onBackgroundChooserTriggerClick=function(e){return this.state.isSubmitting?void 0:(y.stop(e),this.setState({isBackgroundChooserVisible:!0}),L("New Board","Show Background Chooser"))},t.prototype.onHideDialogTriggerClick=function(e){return y.stop(e),this.hideDialog()},t.prototype.onTitleBlur=function(e){return this.setState({title:e.target.value.trim()})},t.prototype.onTitleChange=function(e){return this.setState({title:e.target.value})},t.prototype.onSubmit=function(e){var t,n,i,a,s,c;if(!this.state.isSubmitting)return y.stop(e),this.setState({isSubmitting:!0}),t={name:this.state.title,idOrganization:null!=(s=this.state.org)?s.model.id:void 0},a=_.filter(o.me().boardList.models,function(e){return e.owned()}),i=0===a.length||1===a.length&&a[0].isWelcomeBoard(),c=_.extend({},t,{prefs_permissionLevel:this.state.vis,prefs_selfJoin:null!=this.state.org&&"private"!==this.state.vis,defaultLists:i}),this.state.background.isPhoto?(c.prefs_background_url=this.state.background.value,n="photo"):this.state.background.isColor&&(c.prefs_background=this.state.background.value,n="color"),L("New Board","New"),this.isBackgroundDirty?L("New Board","Custom Background",n):L("New Board","Default Background"),o.me().boardList.create(t,{requestData:c,success:function(e){return function(e){var t,n,r,a,s;return a=e.id,V.call(n=o.me().get("idBoards"),a)<0&&o.me().set("idBoards",n.concat(e.id)),r=function(){return u.displayBoard({idBoard:e.id,openListComposer:!i,openCardComposerInFirstList:i})},t=null!=(s=e.get("prefs"))?s.backgroundImage:void 0,t?y.waitForImageLoad(t).then(r).catch(r):r()}}(this),error:function(e){return function(){return e.setState({isSubmitting:!1}),r.flash("could not create board","error","create error")}}(this)})},t.prototype.hideDialog=function(){return d.hide()},t.prototype.showOrgChooser=function(){return g.show({displayType:"mod-no-header",elem:this.orgTriggerElem,hidden:function(e){return function(){return!e.isActiveFormElement()&&e.orgTriggerElem.focus(),_.defer(function(){return e.setState({isOrgChooserVisible:!1})})}}(this),reactElement:b.createElement(h,{key:"org-chooser",orgs:this.state.orgsWithPermissions,selectedOrg:this.state.org,onSelect:function(e){return function(t){return e.setState({isOrgChooserVisible:!1}),g.hide(),e.setOrg(t),L("New Board","Change Org")}}(this)})})},t.prototype.showVisChooser=function(){return g.show({displayType:"mod-no-header",elem:this.visTriggerElem,hidden:function(e){return function(){return!e.isActiveFormElement()&&e.visTriggerElem.focus(),_.defer(function(){return e.setState({isVisChooserVisible:!1})})}}(this),reactElement:b.createElement(w,{key:"vis-chooser",selectedOrg:this.state.org,selectedVis:this.state.vis,onSelect:function(e){return function(t){return e.setState({isVisChooserVisible:!1}),g.hide(),e.setVis(t),L("New Board","Change Visibility",t)}}(this)})})},t.prototype.showBackgroundChooser=function(){var e,t,n;return t=this.backgroundGridElem.getBoundingClientRect(),e=t.left,n=t.top,g.show({clientx:e,clienty:n,getViewTitle:function(){return T(["view title","board background"])},hidden:function(e){return function(){return e.setState({isBackgroundChooserVisible:!1})}}(this),reactElement:b.createElement(i,{colors:a,key:"background-chooser",onColorChooserTriggerClick:function(e){return function(){return e.setState({isColorChooserVisible:!0})}}(this),onPhotoChooserTriggerClick:function(e){return function(){return e.setState({isPhotoChooserVisible:!0})}}(this),onSelect:this.setBackground.bind(this),photos:this.state.photos,selectedBackground:this.state.background}),willBePushedUp:function(e){return function(){return e.setState({isBackgroundChooserVisible:!0})}}(this),willBePushedDown:function(e){return function(){return e.setState({isBackgroundChooserVisible:!1})}}(this)})},t.prototype.showColorChooser=function(){return g.pushView({getViewTitle:function(){return T(["view title","change background colors"])},reactElement:b.createElement(s,{colors:a,key:"color-chooser",onSelect:this.setBackground.bind(this),selectedBackground:this.state.background}),willBePopped:function(e){return function(){return e.setState({isColorChooserVisible:!1})}}(this)})},t.prototype.showPhotoChooser=function(){return g.pushView({getViewTitle:function(){return T(["view title","change background photos"],{unsplashUrl:"https://unsplash.com?utm_source=trello&utm_medium=referral&utm_campaign=api-credit"})},hasSafeViewTitle:!0,reactElement:b.createElement(f,{key:"photo-chooser",onSelect:this.setBackground.bind(this),seedPhotos:this.state.photos,selectedBackground:this.state.background}),willBePopped:function(e){return function(){return e.setState({isPhotoChooserVisible:!1})}}(this)})},t.prototype.canSubmit=function(){return!this.state.isSubmitting&&!!this.state.title.trim()&&!this.state.isLoadingVisPermissions&&(null==this.state.org||this.state.org.allowedVis.indexOf(this.state.vis)>-1)},t.prototype.isActiveFormElement=function(){return["INPUT","BUTTON"].indexOf(document.activeElement.tagName)>-1},t.prototype.loadVisPermissions=function(){return this.setState({isLoadingVisPermissions:!0}),E().then(function(e){return function(t){var n;return n=t.map(function(e){var t;return t=["private","org","public"].filter(function(t){return e.canSetVisibility(t)}),{allowedVis:t,model:e}}),e.setState({isLoadingVisPermissions:!1,orgsWithPermissions:n}),e._setOrg(_.find(n,function(t){var n;return t.model.id===(null!=(n=e.props.defaultOrg)?n.id:void 0)}))}}(this))},t.prototype.loadPhotos=function(){return this.setState({isLoadingPhotos:!0}),O().then(function(e){return e.map(j)}).then(function(e){return function(t){var n;return n=e.isBackgroundDirty?e.state.background:t[0],e.setState({background:n,isLoadingPhotos:!1,photos:t})}}(this))},t.prototype._setOrg=function(e){var t;return t=this.state.vis,null==e&&"org"===t?t="private":null!=e&&(!this.isVisDirty&&e.allowedVis.indexOf("org")>-1?t="org":-1===e.allowedVis.indexOf(t)&&(t=e.allowedVis[0])),this.setState({org:e,vis:t})},t.prototype.setOrg=function(e){return this.state.isSubmitting?void 0:(this._setOrg(e),this.isOrgDirty=!0)},t.prototype._setVis=function(e){return this.setState({vis:e})},t.prototype.setVis=function(e){return this.state.isSubmitting?void 0:(this._setVis(e),this.isVisDirty=!0)},t.prototype._setBackground=function(e){return this.setState({background:e})},t.prototype.setBackground=function(e){return this.state.isSubmitting?void 0:(this._setBackground(e),this.isBackgroundDirty=!0)},t}(b.Component)},{}],345:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=function(e,t){function n(){this.constructor=e}for(var r in t)j.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},j={}.hasOwnProperty;h=e("bluebird"),g=e("underscore"),i=e(15),r=e(35),u=e(40),f=e(133),w=e(236),C=w.unsplashApi,k=w.toJson,b=e(343),_=b.Unsplash,s=_.DEFAULT_COLLECTION_ID,c=_.PAGE_SIZE,m=_.RAW_PARAMS,d=f.getMs({hours:1}),l=f.getMs({minutes:1}),y=function(){return t.exports.preloadPermissions.cache={}},v=g.once(function(){return r.me().organizationList.on("add remove",y)}),o=function(){function e(e,t){this.value=e,this.metadata=t}return e.prototype.isColor=!1,e.prototype.isPhoto=!1,e}(),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.isColor=!0,t}(o),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.isPhoto=!0,t}(o),t.exports={Color:a,Photo:p,createPhotoFromResponse:function(e){return new p(e.urls.raw+m,e)},createBackgroundStyle:function(e,t){return e.isColor?{backgroundColor:e.metadata.color}:e.isPhoto?{backgroundImage:"url('"+e.metadata.urls.small+"')"}:void 0},createColors:function(){return Object.keys(i).filter(function(e){return null!=i[e].color}).map(function(e){return new a(e,i[e])})},preloadPermissions:g.memoize(function(){return v(),setTimeout(y,l),h.all(r.me().organizationList.map(function(e){return null!=e.get("memberships")&&null!=e.get("products")&&e.isFeatureEnabled("restrictVis")?h.resolve(e):u.loadOrganizationMinimal(e.id)}))}),preloadPhotos:g.memoize(function(){return setTimeout(function(){return t.exports.preloadPhotos.cache={}},d),C.collections.getCollectionPhotos(s,1,c,"latest").then(k).then(function(e){return h.map(e.slice(0,4),function(e){return f.waitForImageLoad(e.urls.small)}).then(function(){return e})})}),preloadData:function(){return this.preloadPermissions(),this.preloadPhotos()}}},{}],346:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e("react"),a=e("underscore"),i=e(133),s=e(541)("create_board"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.displayName="OrgChooserComponent",t.prototype.componentDidMount=function(){return setTimeout(function(e){return function(){var t;return null!=(t=e.chooserElem)?t.focus():void 0}}(this),10)},t.prototype.render=s.renderable(function(){var e,t,n,r,o,a,u;return r=this.props,t=r.onSelect,n=r.orgs,o=r.selectedOrg,e=this.onNoTeamClick.bind(this),a=function(e){return function(t){return e.chooserElem=t}}(this),u=function(e){return function(t){return e.selectedElem=t}}(this),s.ul(".pop-over-list.org-chooser",{ref:a,tabIndex:0},function(){return s.li(function(){return s.a({href:"#",onClick:e,ref:null==o?u:void 0},function(){return s.format("no team"),null==o?s.icon("check"):void 0})}),n.forEach(function(e){var n,r;return n=0===e.allowedVis.length,r=null!=o&&e.model.id===o.model.id,s.li({key:e.model.id},function(){return s.a({className:s.classify({disabled:n}),href:"#",onClick:function(r){return n?void 0:(i.stop(r),t(e))}},function(){return s.text(e.model.get("displayName")),r?s.icon("check"):void 0})})})})}),t.prototype.onNoTeamClick=function(e){return i.stop(e),this.props.onSelect(null)},t}(o.Component)},{}],347:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),s=e("react"),u=e("underscore"),h=e(236),v=h.unsplashApi,g=h.toJson,f=e(541)(),c=e(343),p=e(345),m=c.Unsplash,o=m.DEFAULT_COLLECTION_ID,i=m.PAGE_SIZE,l=p.createBackgroundStyle,d=p.createPhotoFromResponse,t.exports=a=function(e){function t(e){this.state={background:null,hasMore:!0,isLoading:!1,page:1,photos:e.seedPhotos},t.__super__.constructor.call(this,e)}return b(t,e),t.prototype.displayName="PhotoChooserComponent",t.prototype.componentDidMount=function(){return this.createObserver(),this.observeMarker(),this.loadPhotos(1),setTimeout(function(e){return function(){var t;return null!=(t=e.chooserElem)?t.focus():void 0}}(this),10)},t.prototype.componentDidUpdate=function(){return this.observeMarker()},t.prototype.render=f.renderable(function(){var e,t,n,r,o,i,a,s;return o=this.state,e=o.background,t=o.hasMore,r=o.photos,i=this.props.selectedBackground,a=function(e){return function(t){return e.chooserElem=t}}(this),s=function(e){return function(t){return e.loadingElem=t}}(this),n=function(e){return function(t){return e.setState({background:t}),e.props.onSelect(t)}}(this),f.div(".background-chooser",{ref:a,tabIndex:0},function(){return f.ul(".background-grid",function(){return r.forEach(function(t){var r;return r=t.value===(null!=e?e.value:i.value),f.li(".background-grid-item",function(){return f.button(".background-grid-trigger.is-photo",{className:f.classify({selected:r}),key:t.value,onClick:function(){return n(t)},role:"button",style:l(t)},function(){return r?f.icon("check"):void 0})})})}),t?f.div(".logo-loading.active",{ref:s}):void 0})}),t.prototype.createObserver=function(){var e;if(null==this.observer)return e=function(e){return function(t){var n;return n=u.first(t),n.isIntersecting||n.intersectionRatio?e.loadNextPage():void 0}}(this),this.scrollContainerElem=r(this.chooserElem).closest(".pop-over-content").get(0),this.observer=new IntersectionObserver(e,{root:this.scrollContainerElem})},t.prototype.observeMarker=function(){return null!=this.observer&&null!=this.loadingElem?(this.observer.disconnect(),this.observer.observe(this.loadingElem)):void 0},t.prototype.loadNextPage=function(){var e;if(!this.state.isLoading)return e=this.state.page+1,this.setState({page:e}),this.loadPhotos(e)},t.prototype.loadPhotos=function(e){return this.setState({isLoading:!0}),v.collections.getCollectionPhotos(o,e,i,"latest").then(g).then(function(e){return e.map(d)}).then(function(t){return function(n){var r;return r=n.length===i,n=1!==e?t.state.photos.concat(n):n,t.setState({hasMore:r,isLoading:!1,photos:n})}}(this))},t}(s.Component)},{}],348:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e("react"),i=e(133),u=e(541)("board_menu_vis"),a=[{value:"private",icon:"private"},{value:"public",icon:"public"}],r=[{value:"private",icon:"private"},{value:"org",icon:"organization"},{value:"public",icon:"public"}],t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.displayName="VisChooserComponent",t.prototype.componentDidMount=function(){return setTimeout(function(e){return function(){var t;return null!=(t=e.chooserElem)?t.focus():void 0}}(this),10)},t.prototype.render=u.renderable(function(){var e,t,n,o,s,c,l;return o=this.props,t=o.onSelect,s=o.selectedOrg,c=o.selectedVis,n=null!=s?r:a,e=null!=s&&s.model.isFeatureEnabled("superAdmins"),l=function(e){return function(t){return e.chooserElem=t}}(this),u.ul(".pop-over-list.vis-chooser",{ref:l,tabIndex:0},function(){return n.forEach(function(n){var r,o;return r=null!=s&&-1===s.allowedVis.indexOf(n.value),o=n.value===c,u.li(function(){return u.a({className:u.classify({disabled:r}),href:"#",onClick:function(e){return r?void 0:(i.stop(e),t(n.value))}},function(){return u.icon(n.icon),u.format(n.value),o&&u.icon("check"),u.span(".sub-name",function(){return e?u.format(["permission subtext","with super admins",n.value],{orgName:s.model.get("displayName")}):null!=s?u.format(["permission subtext","with organization",n.value],{orgName:s.model.get("displayName")}):u.format(["permission subtext","without organization",n.value])})})})})})}),t}(o.Component)},{}],349:[function(e,t,n){var r,o,i,a,s,u,c;r=e(82),a=e(245),s=e(135),o=e("react"),u=e(541)(),i=e(107),c=e(51),t.exports=o.createClass({displayName:"BoardListAnnouncementComponent",render:u.renderable(function(){var e,t,n,r,o;return o=this.props,e=o.icon,t=o.message,n=o.onClick,r=o.onDismiss,u.div(".boards-page-announcement-container",{onClick:n},function(){return u.div(".boards-page-announcement",function(){return u.icon(e),u.text(" "),u.raw(i.description.formatInline(t)),u.div(".boards-page-announcement-dismiss",{onClick:r},function(){return u.icon("close")})})})}),shouldComponentUpdate:s})},{}],350:[function(e,t,n){var r,o;r=e("react"),o=e(541)("board_list_item_add"),t.exports=r.createClass({displayName:"BoardListItemAddComponent",render:o.renderable(function(){var e,t,n;return n=this.props,e=n.newBoard,t=n.preloadData,o.li(".boards-page-board-section-list-item",function(){return o.b(e,".board-tile.mod-add",{onMouseEnter:t},function(){return o.format("create-new-board-ellipsis")})})})})},{}],351:[function(e,t,n){var r,o,i,a,s,u,c;r=e(82),i=e(245),s=e(135),o=e("react"),u=e(541)("board_list_item"),c=e(51),a=function(e){var t;return t=r.browserStr,"safari"===t&&0===e.button},t.exports=o.createClass({displayName:"BoardListItemComponent",render:u.renderable(function(){var e,t,n,r,o,s,l,d,p,h,m,f,g,v,b,y,w,_,k;return v=this.props,h=v.isStarred,b=v.background,r=b.color,d=b.image,k=b.tiled,n=b.brightness,y=v.relUrl,g=v.orgname,m=v.name,w=v.showOptions,l=v.id,f=v.onStarClick,t=v.badgeComponents,_=v.tagComponents,s=v.hidden,o=v.hasUnseenActivity,p=v.isDraggable,e=this.getBackgroundStyle(),u.li({class:u.classify({hide:s,"boards-page-board-section-list-item":!0,"js-draggable":p})},function(){var s,d,p,v;if(s={"board-tile":!0,tile:k},!r)switch(n){case"unknown":s["mod-unknown-background"]=!0;break;case"light":s["mod-light-background"]=!0}return p=function(e){var t;return a(e)?(t=e.currentTarget,t.removeAttribute("href")):void 0},v=function(e){var t;return t=e.currentTarget,t.setAttribute("href",y)},d=function(){return c("Organization View","Boards Page","Click on Board")},u.link(y,{onMouseDown:p,onMouseUp:v,onClick:d,class:u.classify(s),style:e},function(){var e;return u.span(".board-tile-fade"),e={"board-tile-details":!0,"is-badged":!0,"is-sub-named":g},u.span({class:u.classify(e)},function(){u.span(".board-tile-details-name",{title:m,dir:"auto"},function(){return u.text(m)}),g&&u.span(".board-tile-details-sub-name",{title:g,dir:"auto"},function(){return u.text(g)})}),w&&u.span(".board-tile-options",function(){return o&&u.span(".board-tile-options-unread-indicator",{title:u.l("there-is-new-activity-on-this-board")}),u.icon("star",{class:u.classify({"is-starred":h,"board-tile-options-star-icon":!0}),title:u.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list"),onClick:function(e){return e.preventDefault(),e.stopPropagation(),f(l)}})}),u.span(".board-tile-badges",function(){return t.forEach(i(u,"addElement"))})}),u.div(".board-tags.u-clearfix",function(){return _.forEach(i(u,"addElement"))})})}),getBackgroundStyle:function(){var e,t,n,r,o;return r=this.props.background,t=r.color,n=r.image,o=r.tiled,e=r.brightness,t?{backgroundColor:t}:{backgroundImage:u.urlify(n)}},shouldComponentUpdate:s})},{}],352:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m;r=e(351),p=e(245),o=e("react"),a=e("react-dnd"),i=e("react-dom"),h=e("recup"),m=e("xtend"),s=o.createClass({displayName:"BoardListItemDndComponent",render:function(){var e,t,n,a,s;return s=this.props,t=s.connectDropTarget,e=s.connectDragSource,n=s.isDragging,n?h.render(function(){return h.li(".boards-page-board-section-list-item.mod-placeholder")}):(a=m(this.props,{ref:function(n){return t(i.findDOMNode(n)),e(i.findDOMNode(n))}}),o.createElement(r,a))}}),d={canDrop:function(){return!1},hover:function(e,t){return e.id!==t.getItem().id?e.onDragHover(t.getItem().id):void 0}},l=function(e,t){return{connectDropTarget:e.dropTarget()}},c={beginDrag:function(e){return{id:e.id}},endDrag:function(e){return e.onDragEnd()}},u=function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}},t.exports=a.DragSource("BoardTile",c,u)(a.DropTarget("BoardTile",d,l)(s))},{}],353:[function(e,t,n){var r,o,i;r=e("react"),i=e(541)("org_filtering"),o=e(135),t.exports=r.createClass({displayName:"BoardListItemTagAddComponent",render:i.renderable(function(){var e;return e=this.props.onClick,i.b(e,{class:"board-tags-item mod-add"},function(){return i.icon("add",{class:"board-tags-item-icon"})})}),shouldComponentUpdate:o})},{}],354:[function(e,t,n){var r,o,i;r=e("react"),i=e(541)(),o=e(135),t.exports=r.createClass({displayName:"BoardListItemTagComponent",render:i.renderable(function(){var e,t,n,r;return t=this.props,r=t.text,e=t.onClick,n=t.selected,i.b(e,{class:i.classify({"board-tags-item":!0,"mod-selected":n})},function(){return i.text(r)})}),shouldComponentUpdate:o})},{}],355:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(406),a=e(51),s=e("xtend"),r=e(35),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.events={mouseenter:"select",mouseleave:"deselect"},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,s(i.prototype.events,e||this.events))},t.prototype.select=function(){return this.$el.addClass("selected")},t.prototype.deselect=function(){return this.$el.removeClass("selected")},t.prototype.trackBoardClick=function(){var e;return e=this.model.isMember(r.me())?"Board (Member of)":"Board (Not a Member)",a("Search","Select Item",e)},t}(i)},{}],356:[function(e,t,n){var r,o,i,a,s;i=e("react"),o=e(669).OrganizationBoardsAd,s=e(541)("board_list"),a=e("underscore"),r=e(41),t.exports=i.createClass({displayName:"BoardListSectionComponent",getInitialState:function(){return{collapsed:!0}},render:s.renderable(function(){var e,t,n,o,i,u,c,l,d,p,h,m,f,g,v;return g=this.props,p=g.items,u=g.header,f=g.noSidebarMod,o=g.createNewItem,m=g.mayBeSorted,d=g.isStarredSection,l=g.isPersonalSection,v=g.showAd,c=g.isAdDismissed,n=this.state.collapsed,e=p.length,i=m?a.chain(p).sortBy(function(e){return-e.props.dateLastActivity}).filter(function(e,t){return!n||10>=t||!e.props.isLessActive}).sortBy(function(e){return e.props.name.toLowerCase()}).value():p,h=e-i.length,t=s.classify({"boards-page-board-section":!v,"mod-no-sidebar":f}),s.div({class:t},function(e){return function(){var t;return u&&s.addElement(u),v&&!r.get("dontUpsell")?s.div(".boards-page-layout",function(){return s.div(".boards-page-layout-sidebar",function(){return s.div(".boards-page-ad-section",function(){return c?void 0:s.addElement(e.orgAdComponent())})}),s.div(".boards-page-layout-list",function(){return s.ul(".boards-page-board-section-list",function(){var e,t,n;for(e=0,n=i.length;n>e;e++)t=i[e],s.addElement(t);o&&s.addElement(o)})})}):s.ul(".boards-page-board-section-list",function(){var e,t,n;for(e=0,n=i.length;n>e;e++)t=i[e],s.addElement(t);o&&s.addElement(o)}),t=function(){return e.setState({collapsed:!1})},i.length<p.length?s.b(t,".boards-page-show-all-boards.quiet-button",function(){return s.format("show-less-active-boards-count",{lessActiveCount:h})}):void 0}}(this))}),orgAdComponent:function(){var e;return e={billingUrl:this.props.billingUrl,dismissAd:this.props.dismissAd},i.createElement(o,e)}})},{}],357:[function(e,t,n){var r,o,i,a,s,u;r=e(356),i=e("react-dnd"),o=e("react"),a=o.createClass({displayName:"BoardListSectionDndComponent",render:function(){var e;return(e=this.props.connectDropTarget)(o.createElement("div",{},o.createElement(r,this.props)))}}),u={drop:function(){}},s=function(e,t){return{connectDropTarget:e.dropTarget()}},t.exports=i.DropTarget("BoardTile",u,s)(a)},{}],358:[function(e,t,n){var r,o;r=e("react"),o=e(541)("board_list"),t.exports=r.createClass({displayName:"BoardListSectionHeaderComponent",render:o.renderable(function(){var e,t,n,r,i,a,s,u,c;return a=this.props,n=a.logoHash,c=a.title,e=a.iconClass,s=a.smallIconClass,u=a.smallIconTitleKey,t=a.linkElements,n&&(r=window.logoDomain+"/"+n+"/30.png",i=window.logoDomain+"/"+n+"/170.png"),o.div(".boards-page-board-section-header",function(){return o.div(".boards-page-board-section-header-icon",function(){return n?o.img({class:"boards-page-board-section-header-icon-image",src:r,srcSet:r+" 1x, "+i+" 2x",alt:c+" logo"}):o.span({class:"icon-lg icon-"+e})}),o.h3(".boards-page-board-section-header-name",function(){return o.text(c)}),s&&o.span(".boards-page-board-section-header-small-icon",function(){return o.icon(s,{title:o.l(u)})}),t?o.div(".boards-page-board-section-header-options",function(){var e,n,r,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(o.addElement(r));return i}):void 0})})})},{}],359:[function(e,t,n){var r,o;r=e("react"),o=e(541)("board_list"),t.exports=r.createClass({displayName:"BoardlistSectionHeaderLinkComponent",render:o.renderable(function(){var e,t,n,r,i;return t=this.props,i=t.url,e=t.iconClass,n=t.titleKey,r=t.trackOnClick,o.link(i,".boards-page-board-section-header-options-item.dark-hover",{onClick:r},function(){return o.icon(e,{class:"boards-page-board-section-header-options-item-icon"}),o.span(".boards-page-board-section-header-options-item-name",function(){return o.format(n)})})})})},{}],360:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),a=e(549),i=e(133),u=e(544)("bc_upsell_ad"),l=e(51),s=e("underscore"),c=u.renderable(function(){return u.div(".power-ups-pane-upsell-ad-icon",function(){return u.img(".power-ups-pane-upsell-ad-icon-image",{src:"https://a.trellocdn.com/images/206e08d8125909718f3de89595bf7478/business-class-logo-mark-blue.svg"})}),u.div(".power-ups-pane-upsell-ad-details",function(){return u.h4(".power-ups-pane-upsell-ad-details-header",function(){return u.format("name")}),u.p(function(){return u.format("description")}),u.p(function(){return u.a(".quiet.js-show-details",{href:"/business-class?utm_source=trello&utm_medium=inapp&utm_content=power-ups-menu&utm_campaign=bc-upgrade",target:"_blank"},function(){return u.format("show-details")})})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.className="power-ups-pane-upsell-ad",t.prototype.events={"click .js-show-details":function(){return l("Power-Ups","BC Upsell Ad")}},t.prototype.renderOnce=function(){return this.$el.html(c())},t}(a)},{}],361:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;c=e(921),r=e(35),i=e(376),a=e(650),s=e(569),l=e(546),d=e(51),u=e(133),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="add to a team",t.prototype.events=u.extendEvents({"click .js-new-org":"newOrg"}),t.prototype.render=function(){var e,t,n,o,i,a;if(e=this.model.toJSON({org:!0}),i=this.model.owned()?r.me().organizationList.models:[],e.orgs=function(){var e,t,n;for(n=[],e=0,t=i.length;t>e;e++)o=i[e],n.push(o.toJSON());return n}(),e.hasOrgs=0!==e.orgs.length,e.idOrganization)for(a=e.orgs,t=0,n=a.length;n>t;t++)o=a[t],o.id===e.idOrganization&&(o.select=!0);return e.isPrivate=this.model.isPrivate(),e.allowsSelfJoin=this.model.allowsSelfJoin(),this.$el.html(c(e)),this.updateOrgOptions(),this},t.prototype.newOrg=function(e){var t;return d("Board Header","Add to a Team menu","New Org"),u.stop(e),t={boardToAddToOrg:this.model},s.pushView({view:new a({model:this.model,modelCache:this.modelCache,createOpts:t})})},t}(i)},{}],362:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;l=e("underscore"),r=e(35),i=e(7),p=e(102),a=e(40),s=e("bluebird"),u=e(133),c=e(549),d=e(104),h=e(544)("board_power_ups"),m=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){var e;return e=r.me(),this.menuType=this.options.menuType,this.listenTo(e.organizationList,"add remove reset change",this.frameDebounce(this.render)),this.createNewTeam=0===e.organizationList.length},t.prototype.events=function(){return{"click .js-team":"clickTeam","click .js-create-team":"clickCreateTeam","click .js-create":"clickCreateNewTeam","click .js-cancel":"clickCancelNewTeam"}},t.prototype.render=function(){return this.$el.html(h.render(function(e){return function(){var t,n;return e.createNewTeam?(t=e.model.memberList.length,h.div(".create-team",function(){return h.p(function(){return h.format("first-create-your-business-class-team")}),h.p(function(){return h.label(function(){var e;return h.format("team-name"),e=1===t?{value:h.l("names-projects",{name:r.me().get("fullName")},{raw:!0})}:2===t?{placeholder:h.l("eg-names-projects",{name:r.me().get("fullName")},{raw:!0})}:{},e.maxLength=100,h.input(".full.js-autofocus.js-name",e)}),t>1?h.label(".create-team-add-members",function(e){return function(){return h.input(".js-add-members",{type:"checkbox",checked:!0}),h.format("add-the-members-of-this-board-to-the-team")}}(this)):void 0}),h.div(function(){return h.button(".primary.js-create",function(){return h.format("create")}),h.a(".create-team-cancel.quiet-button.js-cancel",function(){return h.format("cancel")})}),h.hr()}),l.defer(function(){return e.$(".js-name").select().focus()})):(n=r.me().organizationList.sortBy(function(e){return e.get("displayName").toLowerCase()}),h.div(".assign-to-team",function(){return h.p(function(){return h.format("this-board-is-not-in-a-team-yet"),h.text(" "),h.format("please-select-a-team-or-create-a-new-team-to-upgrade")})}),n.length>0&&h.ul(".assign-to-team-list",function(){var t,r,o,i,a;for(a=[],r=0,o=n.length;o>r;r++)i=n[r],t=i.canAddBoard(e.model)?{class:"js-team","data-idOrganization":i.id}:{class:"disabled",title:h.l("team-restrictions-prevent-you-from-adding-this-board-to-this-team")},a.push(h.li(".assign-to-team-list-item",t,function(){return h.div(".assign-to-team-list-item-content",function(){return h.div(".assign-to-team-list-item-logo",function(){var e;return e=i.get("logoHash"),e?h.img({src:logoDomain+"/"+e+"/30.png"}):h.span(".icon.icon-lg.icon-organization")}),h.div(".assign-to-team-list-item-details",function(){return h.div(".assign-to-team-list-item-name",function(){return h.text(i.get("displayName")),i.isFeatureEnabled("plugins")?(h.text(" "),h.icon("business-class",{class:"icon-business-class-color"})):void 0}),h.div(".assign-to-team-list-item-member-count",function(){var e;return null!=(e=i.get("memberships"))?h.text(p("members",e.length)):void 0})})})}));return a}),h.div(".assign-to-team-create.js-create-team",function(){return h.div(".assign-to-team-create-content",function(){
return h.format("create-a-new-team")})}))}}(this))),this},t.prototype.clickTeam=function(e){var t;return t=this.$(e.currentTarget).attr("data-idOrganization"),this.model.trigger("added-to-team"),m(this.options.menuType+" Menu","Upsell Flow","Add To Existing Team"),s.fromNode(function(e){return function(n){return e.model.update("idOrganization",t,{waitForServer:!0},n)}}(this)).then(function(e){return function(){var n;return n=e.model.getOrganization(),"Collections"===e.options.menuType&&null!=n&&n.isFeatureEnabled("tags")?a.loadOrganizationMinimal(t).then(function(){return e.model.trigger("team-has-bc")}):i.navigate(i.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}}(this)).done()},t.prototype.clickCreateTeam=function(e){return this.createNewTeam=!0,this.render()},t.prototype.clickCancelNewTeam=function(e){return u.stop(e),this.model.trigger("cancel-add-to-team")},t.prototype.clickCreateNewTeam=function(e){var t,n;return n=this.$(".js-name").val(),/\S/.test(n)?(t={displayName:n},this.$(".js-create,.js-cancel").prop("disabled",!0).addClass("disabled"),r.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(e){return function(t){var n;return n=t.id,e.model.trigger("added-to-team"),e.model.update("idOrganization",n,{waitForServer:!0}),a.loadOrganizationMembersMinimal(n).then(function(){var n;return e.$(".js-add-members").prop("checked")?(n=e.model.getOrganization(),m("New Org","Create",e.menuType+" Sidebar (with members)",t.id),s.map(e.model.memberList.models,function(e){return n.isMember(e)?void 0:n.changeMemberRole(e,{type:"normal"})},{concurrency:3})):m("New Org","Create",e.menuType+" Sidebar (without members)",t.id)}).then(function(){return i.navigate(i.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}).done()}}(this)})):void 0},t}(c)},{}],363:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(35),o=e(639),u=e(652),c=e(569),l=e(133),d=e(549),s=e(7),b=e(51),p=e("underscore"),r=e("jquery"),g=e(544)("board_collections"),m=g.renderable(function(e,t){return e?g.ul(".select-tags-list",function(){var n,r,o,i;for(o=[],n=0,r=e.length;r>n;n++)i=e[n],o.push(g.li(".select-tags-list-item.js-tag-item",{"data-id-tag":i.id},function(){return g.a(".select-tags-list-item-name-link.js-toggle-tag",function(){return t&&g.icon("check",{class:"select-tags-list-item-name-link-check-icon"}),g.text(i.get("name"))})}));return o}):void 0}),h=g.renderable(function(e){return m(e.associated,!0),m(e.notAssociated,!1)}),v=g.renderable(function(e){var t,n,r,o,i,a,s;return n=e.board,r=e.collectionsEnabled,t=e.billingUrl,s=e.orgUrl,o=e.hasTags,a=e.onOldBC,i=e.hideExplainer,r?(i||g.div(".collections-info",function(){return g.span(".collections-explainer-close.js-close-explainer",function(){return g.icon("close")}),g.img(".collections-image",{src:"https://a.trellocdn.com/images/collections/04c368f4479f478b6705bbd4cc373387/business-class-feature-roadmap.png"}),g.p(function(){return g.format("collections-let-you-group-and-filter")}),g.p(".js-learn-more",function(){return g.format("learn-more-about-collections")})}),g.div(".collections-select-lists",function(){return o?(g.div(".has-collections",function(){return g.p(".js-team-page",function(){return g.format("visit-team-page-create-some",{orgUrl:s})}),g.a(".quiet-button.full.create-collection-btn.js-add-tag",{href:"#"},function(){return g.format("create-collection")})}),g.input(".js-collections-search",{type:"text",placeholder:g.l("search-collections"),autocomplete:"off"}),g.div(".js-filtered-collections")):g.div(".no-collections",function(){return g.p(function(){return g.format("no-collections")}),g.p(".js-team-page",function(){return g.format("visit-team-page-create-some",{orgUrl:s})}),g.a(".quiet-button.full.create-collection-btn.js-add-tag",{href:"#"},function(){return g.format("create-collection")})})})):void g.div(".collections-upsell",function(){return g.h4(".collections-upsell-header",function(){return g.format("a-focused-perspective")}),g.img(".collections-image",{src:"https://a.trellocdn.com/images/collections/04c368f4479f478b6705bbd4cc373387/business-class-feature-roadmap.png"}),g.p(function(){return g.format("collections-let-you-group-and-filter")}),g.p(function(){return a?g.format("to-unlock-collections-upgrade-old-bc"):g.format("to-unlock-collections-upgrade")}),g.div(".collections-upgrade-action",function(){return t?g.a(".button.primary.js-lets-do-this",{href:t},function(){return g.format("lets-do-this")}):g.a(".button.primary.js-add-team",{href:"#"},function(){return g.format("lets-do-this")})}),g.div(".collections-upgrade-action",function(){return g.a(".collections-upgrade-cancel.js-go-back",{href:"#"},function(){return g.format("no-thanks")})})})}),f=function(e){return r(e.target).closest(".js-tag-item")[0].getAttribute("data-id-tag")},t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.className="board-menu-collections-select",t.prototype.noPadding=!0,t.prototype.initialize=function(){var e;return this.sidebarView=this.options.sidebarView,this.organization=(null!=(e=this.options)?e.org:void 0)||this.model.getOrganization(),this.collectionsEnabled=null!=this.organization&&this.organization.isFeatureEnabled("tags"),this.listenTo(this.model,"change:idOrganization",this.refereshOrganization),this.listenTo(this.model,"change:idTags",this.render),this.listenTo(i.me(),"change:oneTimeMessagesDismissed",this.render),this.collectionsEnabled&&this.listenTo(this.organization.tagList,"add remove reset change",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-add-tag":"addTag","keyup .js-collections-search":"renderFilteredCollections","click .js-toggle-tag":function(e){return b("Board Menu","Collections Menu","Toggle Collections"),this.toggleTag(f(e))},"click .js-go-back":function(e){return this.sidebarView.popView(),b("Board Menu","Collections Menu","No Thanks Button")},"click .js-add-team":function(e){return l.stop(e),this.model.trigger("add-to-team"),b("Board Menu","Collections Menu","Lets Add To Team")},"click .js-lets-do-this":function(e){return b("Board Menu","Collections Menu","Lets Do This Button")},"click .js-close-explainer":function(e){return i.me().dismiss("CollectionsExplainer"),b("Board Menu","Collections Menu","Dismiss Collections Explainer")},"click .js-learn-more a":function(e){return b("Board Menu","Collections Menu","Clicks Learn More Link")},"click .js-team-page a":function(e){return b("Board Menu","Collections Menu","Clicks Team Page Link")}},t.prototype.viewTitleKey="pick tags",t.prototype.addTag=function(e){return l.stop(e),b("Board Menu","Collections Menu","Open Create Tag Menu"),c.toggle({elem:e.target,view:o,options:{model:this.organization,modelCache:this.modelCache,boardView:!0}})},t.prototype.toggleTag=function(e){return this.model.toggleTag(e)},t.prototype.filterTagsBySearch=function(e){var t;return t=this._searchVal().toLowerCase(),p.isEmpty(t)?e:p.filter(e,function(e){var n;return(null!=(n=e.get("name"))?n.toLowerCase().indexOf(t):void 0)>-1})},t.prototype.filterTagsByAssociation=function(e,t){return p.groupBy(e,function(e){return function(e){var n;return n=e.id,_.call(t,n)>=0?"associated":"notAssociated"}}(this))},t.prototype._searchVal=function(){var e,t;return null!=(e=null!=(t=this.$(".js-collections-search").val())?t.trim():void 0)?e:""},t.prototype.renderFilteredCollections=function(){var e,t;if(null!=(t=this.organization)?t.tagList.models.length:void 0)return e=this.filterTagsByAssociation(this.filterTagsBySearch(this.organization.tagList.models),this.model.getIdTags()),this.$(".js-filtered-collections").empty().append(h(e))},t.prototype.refereshOrganization=function(){var e,t;return e=this.modelCache.get("Organization",this.model.previous("idOrganization")),t=this.model.getOrganization(),null!=e&&this.stopListening(e.tagList),this.organization=t,this.collectionsEnabled=null!=this.organization&&this.organization.isFeatureEnabled("tags"),this.collectionsEnabled&&this.listenTo(this.organization.tagList,"add remove reset change",this.render),this.render()},t.prototype.render=function(){var e,t,n,r,o,a,u,c;return r=i.me(),n=r.isDismissed("CollectionsExplainer"),o=(null!=(u=this.organization)?u.isPremium():void 0)&&!this.collectionsEnabled,t=null!=(c=this.organization)?c.tagList.models.length:void 0,this.organization&&(a=s.getOrganizationUrl(this.organization),e=s.getOrganizationBillingUrl(this.organization)),this.$el.html(v({board:this.model,collectionsEnabled:this.collectionsEnabled,billingUrl:e,orgUrl:a,hasTags:t,onOldBC:o,hideExplainer:n})),this.renderFilteredCollections(),this},t}(d)},{}],364:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C=function(e,t){function n(){this.constructor=e}for(var r in t)x.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},x={}.hasOwnProperty;r=e("jquery"),g=e("underscore"),s=e(363),i=e(362),o=e(35),c=e(7),b=e(102),l=e(40),p=e("bluebird"),m=e(133),f=e(549),v=e(104),w=e(544)("board_collections"),k=e("xtend"),_=e(51),y=w.renderable(function(){return w.div(function(){return w.div(".spinner.loading")})}),h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.render=function(){return this.$el.html(y())},t}(f),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(w.render(function(e){return function(){return w.div(".count-explanation",function(){return w.p(function(){return w.format("ask-an-admin-to-add-this-board-to-a-team")})}),w.div(".board-admins",function(){return w.b(function(){return w.format("board-admins")}),w.ul(".admin-list",function(){return e.model.memberList.filter(function(t){return e.model.ownedByMember(t)}).forEach(function(e){return w.li(".admin-list-item",function(){return w.div(".admin-list-item-avatar",function(){var t;return t=e.get("avatarHash"),t?w.img({src:avatarDomain+"/"+t+"/30.png"}):w.span(".icon.icon-lg.icon-member")}),w.div(".admin-list-item-details",function(){return w.div(".admin-list-item-name",function(){return w.text(e.get("fullName"))}),w.div(".admin-list-item-username",function(){return w.text("@"+e.get("username"))})})})})})})}}(this)))},t}(f),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(w.render(function(e){return function(){return w.div(".count-explanation",function(){return w.p(function(){return w.format("only-team-members-can-enable-collections")})})}}(this)))},t}(f),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.viewTitleKey="collections",t.prototype.noPadding=!0,t.prototype.className="board-menu-content-frame board-collections-view",t.prototype.initialize=function(){return this.sidebarView=this.options.sidebarView,this.listenTo(this.model,"team-has-bc",function(e){return function(){return e.redirecting=!1,e.addToTeam=!1,e.render()}}(this)),this.listenTo(this.model,"added-to-team",function(e){return function(){return e.redirecting=!0,e.render()}}(this)),this.listenTo(this.model,"cancel-add-to-team",function(e){return function(){return e.addToTeam=!1,e.render()}}(this)),this.listenTo(this.model,"cancel-upgrade",function(e){return function(){return e.initialViewState=null,e.render()}}(this)),this.listenTo(this.model,"add-to-team",function(e){return function(){return e.initialViewState=null,e.addToTeam=!0,e.render()}}(this))},t.prototype.render=function(){var e,t,n,r,i,a,s,u,c;return this.$el.empty(),e=this.model,t=e.hasOrganization(),c=e.getOrganization(),i=o.me(),n=e.isMember(i),r=null!=c?c.isMember(i):void 0,a=!n&&!r,s=e.isPublic()&&(null!=c?c.isPublic():void 0),u=t&&(n&&!r||a&&s),this.redirecting?this.renderSpinner():this.addToTeam?this.renderAddToTeam():u?this.renderOnlyForTeamMembers():this.renderTagSelect(),this},t.prototype.renderOnlyForTeamMembers=function(){return this.appendSubview(this.subview(d,this.model)),this},t.prototype.renderSpinner=function(){return this.appendSubview(this.subview(h,this.model)),this},t.prototype.renderAddToTeam=function(){return this.model.hasOrganization()?(this.appendSubview(this.subview(d,this.model)),this):this.model.owned()?(l.loadMyOrganizations(),this.appendSubview(this.subview(i,this.model,{menuType:"Collections"}))):(this.appendSubview(this.subview(a,this.model)),this)},t.prototype.renderTagSelect=function(){return this.appendSubview(this.subview(s,this.model,{modelCache:this.modelCache,sidebarView:this.sidebarView}))},t}(f)},{}],365:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(558),i=e(549),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="labels",t.prototype.el=function(){var e;return e=this.subview(o,this.model,{board:this.model,popOverMethod:"toggle",className:"board-menu-content-frame",selectLabel:function(t){return function(n){return t.model.editable()?e.editLabel(n):void 0}}(this)}),e.render().el},t}(i)},{}],366:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A=function(e,t){function n(){this.constructor=e}for(var r in t)M.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},M={}.hasOwnProperty;r=e("jquery"),o=e(220),i=e(35),a=e(583),u=e(370),c=e(561),l=e(7),d=e(551),p=e(204),h=e(100),m=e(22),S=e(861),f=e(208),g=e(603),v=e(725),b=e(40),y=e(569),w=e(631),_=e(133),k=e(549),C=e("underscore"),T=e(109),E=e(546),x=e(850),O=e(51),j=e(104),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,e),T(v,g,d,t),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){var e;e=this.model.getOrganization(),null!=e&&this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.renderOrgMembers)),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(this.renderOrgMembers)),null!=e&&this.listenTo(e,"change:prefs",this.frameDebounce(this.render)),this.savedSearch=""},t.prototype.events={"click .js-board-members .js-select-member":"showMemberMenu","click .js-search-results .js-select-member":"didClickAddOtherMember","paste .js-search-input":"searchPaste","click .js-org-members .js-select-member":"didClickAddOrgMember","click .js-org-members .js-add-all-org-members":"didClickAddAllOrgMembers","click .js-org-members .js-more-org-members":"didClickViewMoreOrgMembers","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember","click .js-show-invitation-link":"showInvitationLink","click .js-invitation-link":"clickInvitationLink","click .js-deactivate-link":"deactivateInvitationLink"},t.prototype.render=function(){var e,t;return e={},e.placeholder=j("add member placeholder"),e.canAddMembers=this.model.canInviteMembers(),t=this.model.getOrganization(),null!=t&&(e.orgName=t.get("displayName")),e.canInviteMembers=e.canAddMembers&&!(null!=t?t.externalMembersDisabled():void 0),e.disableAddingExternalMembers=this.model.isMember(i.me())&&(null!=t?t.externalMembersDisabled():void 0),e.isBCOrgAdmin=null!=t?t.isPremOrgAdmin(i.me()):void 0,e.orgSettingsURL=null!=t?l.getOrganizationAccountUrl(t):"",e.editable=this.model.editable(),this.$el.html(S(e)),e.canAddMembers?this.setTimeout(function(e){return function(){return e.renderOrgMembers(),e.input=e.$(".js-search-input"),e.input.click(function(e){return _.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10):this.setTimeout(function(e){return function(){return e.renderBoardMembers()}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},t.prototype.loadOrgData=function(){var e;e=this.model.getOrganization(),null!=e&&this.model.editable()&&b.loadOrganizationMembersMinimal(e.id).then(function(e){return function(){e.renderOrgMembers()}}(this)).done()},t.prototype.renderBoardMembers=function(){var e,t,n,r,o,i;for(t=this.$(".js-board-members").hide(),e=t.find(".js-list").empty(),this.model.memberList.models.length>7&&e.addClass("collapsed"),i=this.model.memberList.models,n=0,r=i.length;r>n;n++)o=i[n],this.appendSubview(this.subview(w,o),e);t.show()},t.prototype.renderOrgMembers=function(){var e,t,n,r,o,i,a,s,u;n=this.$(".js-org-members").hide(),t=n.find(".js-list").empty(),e=n.find(".js-add-all-org-members").empty(),r=n.find(".js-more-org-members").addClass("hide"),s=this.model.getOrganization(),null!=s&&(i=this.model.orgMembersAvailable(),i.length>0&&(u=!1,i.length>7&&(u=!0,r.removeClass("hide")),a=i.slice(0,7),C.each(a,function(e){return function(e){var n;return n=e.toJSON(),(null!=s?s.isPremOrgAdmin(e):void 0)&&(n.className="no-option"),t.append(E.fill("select_member",n,{},{member:E.member}))}}(this)),o={count:i.length.toString()},e.text(j("add all org members",o)),n.show()))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,n,r,o,i,a;return o=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,r=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=C.compact(_.removeDomainFromEmailAddress(e.email).split(o)).join(" ").replace(r,""),e.fullName=_.toTitleCase(n),e.canAddAsObserver=null!=(i=this.model.getOrganization())?i.isFeatureEnabled("observers"):void 0,e.modelType="Board",t=null!=(a=this.model.getOrganization())?a.get("prefs").externalMembersDisabled:void 0,this.$(".js-no-results").toggleClass("hide",!t),t?void 0:this.$(".js-uninvited-search-results").append(x(e)).show()},t.prototype.showMemberMenu=function(e){var t,n;_.stop(e),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),y.pushView({view:new a({model:n,board:this.model,modelCache:this.modelCache})})},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(e){var t,n,r;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),r=this.input.val().toLowerCase().trim(),""===r)return void this.clearSearchResults();this.loadingEl.show(),t=this.model.getOrganization(),r.length>2?o({url:"/1/search/members/",type:"get",data:{idBoard:this.model.id,query:r,idOrganization:null!=t?t.id:void 0,onlyOrgMembers:null!=t?t.externalMembersDisabled():void 0},dataType:"json",success:function(e){return function(t){return e.renderSearchResults(r,t)}}(this)}):null!=t?(n=t.memberList.chain().filter(function(e){return C.any(_.getMemNameArray(e),function(e){return 0===e.indexOf(r)})}).map(function(e){return function(t){return C.extend(t.toJSON(),{active:!0,similarity:0,joined:e.model.hasActiveMembership(t)})}}(this)).value(),this.renderSearchResults(r,n)):this.renderSearchResults(r,[])}},t.prototype.keydownEvent=function(e){var t;t=h.getKey(e),t===m.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(_.stop(e),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(_.stop(e),this.$(".email-invite:first").click()):(t===m.ArrowUp||t===m.ArrowDown)&&(_.stop(e),_.navMenuList(this.$(".js-search-results .js-list"),"li",t))},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-search-results").hide(),this.$(".js-uninvited-search-results").empty().hide(),this.renderOrgMembers()},t.prototype.removeInvitation=function(e){var t;t=r(e.currentTarget).closest(".invitation").data("id"),p.prototype.delete({model:this.model,idInvitation:t,success:function(e){return function(){return O("Invitations","Delete Board Invite"),e.search}}(this)}),_.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===i.myId()||this.model.owned()},t.prototype.sendEmailInvite=function(e){var t,n,i,a;if(_.stop(e),n=this.$(".js-send-email-invite"),null==n.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),a=t.val().trim(),!_.validName(a))return _.setCaretAtEnd(t),void r(".js-name-error").show();i={fullName:a,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},this.$("#addAsObserver").is(":checked")&&(i.type="observer"),n.attr("disabled","disabled"),o({url:"/1/board/"+this.model.id+"/members",type:"put",dataType:"json",data:i,success:function(e){return function(t){var r;return r=new f(t,{modelCache:e.modelCache}),e.renderOrgMembers(),O("Invitations","Send Email Board Invite to New Member","Role: "+t.type),n.removeAttr("disabled"),y.hide()}}(this),error:function(e){return function(t,o){r(".pop-over-section.js-error").removeClass("hide").find(".error").html(t.responseText),e.$(".js-uninvited-search-results").empty().hide(),n.removeAttr("disabled"),e.input.focus().select(),O("Invitations","Error",t.responseText)}}(this)})}},t.prototype.addMember=function(e){var t;t=this.modelCache.get("Member",e),this.model.addMember(t),this.renderOrgMembers()},t.prototype.didClickAddOtherMember=function(e){var t,n,o;return _.stop(e),r(e.target).closest(".item.disabled").length>0?void 0:(t=r(null!=e?e.target:void 0).closest(".js-select-member").attr("idMember"),this.clearSearchResults(),o=this.model.getOrganization(),n=this.modelCache.get("Member",t),n&&(null!=o?o.isMember(n):void 0)?O("Invitations","Add Org Member to Board","Role: Member"):O("Invitations","Add Other Member to Board","Role: Member"),this.addMember(t))},t.prototype.didClickAddOrgMember=function(e){var t;return _.stop(e),O("Invitations","Add Org Member to Board (via List)","Role: Member"),t=r(null!=e?e.target:void 0).closest(".js-select-member").attr("idMember"),this.addMember(t)},t.prototype.didClickAddAllOrgMembers=function(e){var t,n;return _.stop(e),O("Invitations","Add All Org Members to Board"),n=this.model.orgMembersAvailable(),t=n.length.toString(),c.pushView("add all org members",{model:this.model,html:j("confirm.add all org members.text",{memberCount:t}),confirmBtnClass:"primary",fxConfirm:function(e){return function(t){var r,o,i,a;for(a=[],r=0,o=n.length;o>r;r++)i=n[r],a.push(e.model.addMember(i));return a}}(this)})},t.prototype.didClickViewMoreOrgMembers=function(e){_.stop(e),O("Invitations","View More Org Members"),y.pushView({view:new u({model:this.model,modelCache:this.modelCache})})},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t}(k)},{}],367:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e(170),o=e(285),a=e(227),c=e(548),u=e(549),l=e(109),d=e(88),m=e(546),f=e(51),h=e(544)("board_menu_activity"),p=h.renderable(function(e){var t;return t=e.subscribed,h.div(".board-menu-activity-subscription-state",function(){return t&&h.icon("subscribe"),h.format(t?"subscribed":"not-subscribed")}),t?h.div(".board-menu-activity-subscription-toggle.quiet.js-unsubscribe",function(){return h.format("unsubscribe")}):h.div(".board-menu-activity-subscription-toggle.quiet.js-subscribe",function(){return h.format("subscribe")})}),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className="board-menu-activity-subscription",t.prototype.initialize=function(){return this.listenTo(this.model,"change:subscribed",this.render)},t.prototype.events={"click .js-subscribe":function(e){return this.model.subscribe(!0)},"click .js-unsubscribe":function(e){return this.model.subscribe(!1)}},t.prototype.render=function(){return this.$el.html(p({subscribed:this.model.get("subscribed")})),this},t}(u),l(c,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.viewTitleKey="activity",t.prototype.viewIcon="activity",t.prototype.isTopLevelTab=!0,t.prototype.initialize=function(){this.mode="all",this.fullHistory=this.options.fullHistory,null==this.fullHistory&&(this.fullHistory=!1),this.actionListView=this.collectionSubview(o,new r(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{compact:!this.fullHistory,key:"boardmenuactivity",context:this.model}}),this.makeDebouncedMethods("renderMoreActionsLink"),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.getActions()),e.renderMoreActionsLinkDebounced()}}(this)),this.loadMoreActions()},t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-show-all":"showAll","click .js-show-comments":"showComments","click .js-more-actions":"loadMoreActions"},t.prototype.render=function(){return this.$el.html(m.fill("board_menu_activity",this.model.toJSON())),this.actionListView.setElement(this.$(".js-list-activity")[0]),this.renderActions(),this.renderMode(),this},t.prototype.renderActions=function(){return this.actionListView.render(),this.renderMoreActionsLink()},t.prototype.renderMoreActionsLink=function(){return this.$(".js-more-actions").toggle(this.hasMoreActions()),this},t.prototype.renderMode=function(){return this.$(".js-control-option").removeClass("is-active"),"all"===this.mode?(this.$(".js-list-activity").removeClass("is-only-comments"),this.$(".js-show-all").addClass("is-active")):(this.$(".js-list-activity").addClass("is-only-comments"),this.$(".js-show-comments").addClass("is-active")),this},t.prototype.showAll=function(e){this.mode="all",this.renderMode(),f("Board Menu","Activity","Show All")},t.prototype.showComments=function(e){this.mode="comments",this.renderMode(),f("Board Menu","Activity","Show Comments Only")},t.prototype.setExtraTarget=function(e){return this.$elExtra=e,this.renderExtra()},t.prototype.renderExtra=function(){var e;if(this.$elExtra)return e=this.subview(s,this.model),this.$elExtra.html(e.render().el)},t}(u)),t.exports=i},{}],368:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;r=e("jquery"),o=e(35),i=e(517),d=e(569),h=e(133),m=e(549),u=e(561),p=e(405),l=e(391),c=e(403),f=e(156),g=e("underscore"),y=e(546),w=e(51),b=e(104),v=e(766),s=e(41),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.viewTitleKey="more",t.prototype.isTopLevelTab=!0,t.prototype.initialize=function(e){return this.sidebarView=e.sidebarView,this.listenTo(this.model,{"change:subscribed":this.renderSubscribeState})},t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-open-collections":"openCollections","click .js-open-settings":"openSettings","click .js-open-stickers":"openStickers","click .js-open-labels":"openLabels","click .js-open-archive":"openArchivedItems","click .js-share":"shareBoard","click .js-email":"openEmailSettings","click .js-board-subscribe":"toggleSubscribe","click .js-copy-board":"copyBoard","click .js-close-board":"closeConfirm","click .js-leave-board":"leaveConfirm","click .js-short-url":"selectUrl","submit form":"cancel"},t.prototype.render=function(e){var t,n,r,a;return r=o.me(),n=this.model.toJSON(),n.canJoin=this.model.canJoin(),n.canInviteMembers=this.model.canInviteMembers(),n.confirmed=r.get("confirmed"),n.isLoggedIn=r.isLoggedIn(),a=this.model.getOrganization(),n.canCloseBoard=this.model.owned()||(null!=a?a.isFeatureEnabled("superAdmins"):void 0)&&(null!=a?a.owned():void 0),n.editableByMember=this.model.editableByMember(r),n.canLeaveBoard=(this.model.isMemberObserver(r)||this.model.editableByMember(r))&&r.getMembershipData(this.model).canRemove,n.canCloseOrLeave=n.canLeaveBoard||n.canCloseBoard,n.pLevelClass=i.getPermLevelIconClassForBoard(this.model),n.pLevelAltText=i.getPermLevelAltTextForBoard(this.model),n.helperText=b(["board perms",this.model.getPermLevel(),"short summary"]),t=null!=a?a.isFeatureEnabled("tags"):void 0,n.showCollections=t||!s.get("dontUpsell"),this.$el.html(v(n)),this.renderSubscribeState(),this},t.prototype.renderSubscribeState=function(){var e;e=this.model.toJSON(),this.$(".js-subscribed-state").html(y.fill("board_menu_subscribed_state",e))},t.prototype.openCollections=function(e){h.stop(e),this.sidebarView.pushView("collections"),w("Board Menu","Open Board Collections","Via Sidebar Menu")},t.prototype.openSettings=function(e){h.stop(e),this.sidebarView.pushView("settings"),w("Board Menu","Open Settings")},t.prototype.openLabels=function(e){h.stop(e),this.sidebarView.pushView("labels"),w("Board Menu","Open Labels")},t.prototype.openStickers=function(e){h.stop(e),this.sidebarView.pushView("stickers"),w("Board Menu","Open Stickers","Via More Menu")},t.prototype.openArchivedItems=function(e){h.stop(e),this.sidebarView.pushView("archive"),w("Board Menu","Open Archived Items")},t.prototype.shareBoard=function(e){h.stop(e),d.toggle({elem:this.$(e.target).closest(".js-share"),view:new p({model:this.model,modelCache:this.modelCache})}),w("Board Menu","Open Share, Print, and Export Menu")},t.prototype.openEmailSettings=function(e){h.stop(e),d.toggle({elem:this.$(e.target).closest(".js-email"),view:new l({model:this.model,modelCache:this.modelCache})}),w("Board Menu","Open Email Settings - Menu")},t.prototype.copyBoard=function(e){h.stop(e),r(e.target).hasClass("disabled")||(w("Board Menu","Open Copy Board"),d.toggle({elem:this.$(e.target).closest(".js-copy-board"),view:new c({model:this.model,copyBoard:!0,modelCache:this.modelCache})}))},t.prototype.toggleSubscribe=function(e){h.preventDefault(e),r(e.target).hasClass("disabled")||(this.model.subscribe(!this.model.get("subscribed")),w("Board Menu","Subscribe/Unsubscribe"))},t.prototype.closeConfirm=function(e){h.stop(e),w("Board Menu","Open Close Menu"),u.toggle("close board",{elem:r(e.target).closest("a"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.close(),w("Board","Close Board")}}(this)})},t.prototype.leaveConfirm=function(e){var t,n;h.stop(e),w("Board Menu","Open Leave Menu"),n=o.me(),t=n.removeMembershipConfirmationKey(this.model),u.toggle(t,{elem:r(e.target).closest("a"),confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.removeMember(n),w("Board","Leave Board")}}(this)})},t.prototype.selectUrl=function(e){return this.$(".js-short-url").focus().select()},t.prototype.cancel=function(e){return h.stop(e),!1},t}(m)},{}],369:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=function(e,t){function n(){this.constructor=e}for(var r in t)j.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},j={}.hasOwnProperty;r=e("jquery"),o=e(35),i=e(15),a=e(517),u=e(376),c=e(381),l=e(387),m=e(569),g=e(133),v=e(549),d=e(561),f=e(405),h=e(391),p=e(403),b=e(156),y=e("underscore"),_=e(544)("board_menu_settings_and_more"),C=e(51),w=e(104),k=_.renderable(function(e){var t,n,r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,k,C,x;return t=e.canChangeAddMembers,n=e.canChangeBackground,r=e.canChangeCardCovers,o=e.canChangeComments,i=e.canChangeOrg,a=e.canChangeSelfJoin,s=e.canClose,u=e.canEmailToBoard,c=e.canLeave,l=e.canRemoveOrg,d=e.cardCovers,p=e.commentsDisplay,h=e.editable,m=e.hasOrg,f=e.helperText,
g=e.invitationsDisplay,v=e.isPrivate,b=e.loggedIn,y=e.orgDisplayName,w=e.pLevelAltText,k=e.pLevelClass,C=e.selfJoin,x=e.shortUrl,_.div(function(){return _.ul(".board-menu-navigation",function(){return n&&_.li(".board-menu-navigation-item.mod-background",function(){return _.a(".board-menu-navigation-item-link.js-change-background",{href:"#"},function(){return _.span(".board-menu-navigation-item-link-icon.js-fill-background-preview"),_.format("change-background")})}),_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link.js-open-labels",{href:"#"},function(){return _.icon("label",{class:"board-menu-navigation-item-link-icon"}),_.format("labels")})}),_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link.js-open-collections",{href:"#"},function(){return _.img(".board-menu-navigation-item-link-icon.collection-icon-img",{src:"https://a.trellocdn.com/images/collections/5ebebc0a66b74d9246ce03c8c59b3a61/collections-grey.svg"}),_.format("collections")})}),_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link.js-open-archive",{href:"#"},function(){return _.icon("archive",{class:"board-menu-navigation-item-link-icon"}),_.format("archived-items")})})}),_.hr(),_.ul(".board-menu-navigation",function(){return u&&_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link.js-email",{href:"#"},function(){return _.icon("email",{class:"board-menu-navigation-item-link-icon"}),_.format("email-to-board-settings")})}),b&&_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link.js-copy-board",{href:"#"},function(){return _.icon("board",{class:"board-menu-navigation-item-link-icon"}),_.format("copy-board")})}),_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link.js-share",{href:"#"},function(){return _.icon("share",{class:"board-menu-navigation-item-link-icon"}),_.format("print-and-export")})})}),_.hr()}),_.ul(".board-menu-navigation",function(){return _.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link",{class:_.classify({"js-change-org":i||l,disabled:!(i||l)}),href:"#"},function(){return l?_.format("remove-from-organization"):_.format("change-organization-ellipsis"),y?_.span(".sub-name",function(){return _.text(y)}):void 0})}),_.hr(),_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link",{class:_.classify({"js-toggle-covers":r,disabled:!r})},function(){return d?(_.format("card-cover-images-enabled"),_.icon("check")):_.format("enable-card-cover-images"),_.span(".sub-name",function(){return _.format("show-images-on-front-of-cards")})})}),_.hr(),_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link",{class:_.classify({"js-change-comments":o,disabled:!o})},function(){return _.format("commenting-permissions-ellipsis-commentsdisplay",{commentsDisplay:p})})}),_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link",{class:_.classify({"js-change-add-members":t,disabled:!t})},function(){return _.format("invitations-permissions-ellipsis-invitationsdisplay",{invitationsDisplay:g})})}),_.hr(),_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link",{class:_.classify({"js-toggle-org-mem-join":a&&m&&!v,disabled:!a||!m||v})},function(){return _.check(C,"allow-org-members-to-join"),_.span(".sub-name",function(){return m?v?_.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-cant-be-private"):_.format("any-organization-member-can-join-this-board-without-being-invited"):v?_.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org-and-the-board-cant-be-private"):_.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org")})})}),(s||c)&&(_.hr(),_.ul(".board-menu-navigation",function(){return s&&_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link.js-close-board",{href:"#"},function(){return _.format("close-board-ellipsis")})}),c?_.li(".board-menu-navigation-item",function(){return _.a(".board-menu-navigation-item-link.js-leave-board",{href:"#"},function(){return _.format("leave-board-ellipsis")})}):void 0})),_.hr(),_.div(".board-menu-navigation-item-block",function(){return _.label({for:"id-short-url"},function(){return _.format("link-to-this-board")}),_.input(".js-short-url",{type:"text",readonly:"readonly",id:"id-short-url",value:x}),_.p(".quiet",function(){return _.span({class:"icon-sm icon-"+k,title:w}),_.text(f)})})})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.viewTitleKey="settings",t.prototype.viewIcon="gear",t.prototype.isTopLevelTab=!0,t.prototype.initialize=function(e){return this.sidebarView=e.sidebarView,this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-open-collections":"openCollections","click .js-open-stickers":"openStickers","click .js-open-labels":"openLabels","click .js-open-archive":"openArchivedItems","click .js-share":"shareBoard","click .js-email":"openEmailSettings","click .js-board-subscribe":"toggleSubscribe","click .js-copy-board":"copyBoard","click .js-close-board":"closeConfirm","click .js-leave-board":"leaveConfirm","click .js-short-url":"selectUrl","click .js-change-background":"changeBackground","click .js-toggle-covers":"toggleCovers","click .js-change-comments":"changeCommentingPerms","click .js-change-add-members":"changeAddMemberPerms","click .js-toggle-org-mem-join":"toggleSelfJoin","click .js-change-org":"changeOrg"},t.prototype.render=function(e){var t,n;return t=o.me(),n=this.model.getOrganization(),this.$el.html(k({canChangeAddMembers:this.model.owned(),canChangeBackground:this.model.editable(),canChangeCardCovers:this.model.owned(),canChangeComments:this.model.owned(),canChangeOrg:this.model.owned(),canChangeSelfJoin:this.model.owned(),canClose:this.model.owned()||(null!=n?n.isFeatureEnabled("superAdmins"):void 0)&&(null!=n?n.owned():void 0),canEmailToBoard:this.model.editableByMember(t),canLeave:(this.model.isMemberObserver(t)||this.model.editableByMember(t))&&t.getMembershipData(this.model).canRemove,canRemoveOrg:(null!=n?n.owned():void 0)&&!this.model.owned(),cardCovers:this.model.getPref("cardCovers"),commentsDisplay:w(["board pref perms",this.model.getCommentPerm()]),hasOrg:null!=n,helperText:w(["board perms",this.model.getPermLevel(),"short summary"]),invitationsDisplay:w(["board pref perms",this.model.getInvitePerm()]),isPrivate:this.model.isPrivate(),loggedIn:o.isLoggedIn(),orgDisplayName:null!=n?n.get("displayName"):void 0,pLevelClass:a.getPermLevelIconClassForBoard(this.model),pLevelAltText:a.getPermLevelAltTextForBoard(this.model),selfJoin:this.model.allowsSelfJoin(),shortUrl:this.model.get("shortUrl")})),this.renderBackgroundPreview(),this},t.prototype.openCollections=function(e){g.stop(e),this.sidebarView.pushView("collections"),C("Board Menu","Open Board Collections","Via Sidebar Menu")},t.prototype.openLabels=function(e){g.stop(e),this.sidebarView.pushView("labels"),C("Board Menu","Open Labels")},t.prototype.openStickers=function(e){g.stop(e),this.sidebarView.pushView("stickers"),C("Board Menu","Open Stickers","Via More Menu")},t.prototype.openArchivedItems=function(e){g.stop(e),this.sidebarView.pushView("archive"),C("Board Menu","Open Archived Items")},t.prototype.shareBoard=function(e){g.stop(e),m.toggle({elem:this.$(e.target).closest(".js-share"),view:new f({model:this.model,modelCache:this.modelCache})}),C("Board Menu","Open Share, Print, and Export Menu")},t.prototype.openEmailSettings=function(e){g.stop(e),m.toggle({elem:this.$(e.target).closest(".js-email"),view:new h({model:this.model,modelCache:this.modelCache})}),C("Board Menu","Open Email Settings - Menu")},t.prototype.copyBoard=function(e){g.stop(e),r(e.target).hasClass("disabled")||(C("Board Menu","Open Copy Board"),m.toggle({elem:this.$(e.target).closest(".js-copy-board"),view:new p({model:this.model,copyBoard:!0,modelCache:this.modelCache})}))},t.prototype.toggleSubscribe=function(e){g.preventDefault(e),r(e.target).hasClass("disabled")||(this.model.subscribe(!this.model.get("subscribed")),C("Board Menu","Subscribe/Unsubscribe"))},t.prototype.closeConfirm=function(e){g.stop(e),C("Board Menu","Open Close Menu"),d.toggle("close board",{elem:r(e.target).closest("a"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.close(),C("Board","Close Board")}}(this)})},t.prototype.leaveConfirm=function(e){var t,n;g.stop(e),C("Board Menu","Open Leave Menu"),n=o.me(),t=n.removeMembershipConfirmationKey(this.model),d.toggle(t,{elem:r(e.target).closest("a"),confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.removeMember(n),C("Board","Leave Board")}}(this)})},t.prototype.selectUrl=function(e){return this.$(".js-short-url").focus().select()},t.prototype.renderBackgroundPreview=function(){var e,t,n,r,o,a,s;return e=this.$(".js-fill-background-preview").css({"background-image":"","background-color":""}),null!=(null!=(r=i[this.model.getPref("background")])?r.tile:void 0)?n=this.model.getPref("backgroundImage"):null!=this.model.getPref("backgroundImageScaled")||null!=this.model.getPref("backgroundImage")?n=null!=(o=null!=(a=null!=(s=g.previewBetween(this.model.getPref("backgroundImageScaled"),90,60,600,400))?s.url:void 0)?a:this.model.get("fullSizeUrl"))?o:this.model.getPref("backgroundImage"):t=null!=this.model.getPref("backgroundColor")?this.model.getClientBackgroundColor(this.model.getPref("background")):this.model.getClientBackgroundColor("blue"),e.css({"background-image":"url("+n+")","background-color":t}),this},t.prototype.changeBackground=function(e){g.stop(e),this.sidebarView.pushView("background"),C("Board Menu","Open Change Background")},t.prototype.toggleCovers=function(e,t){g.stop(e),this.model.setPref("cardCovers",!this.model.getPref("cardCovers")),C("Board Menu","Settings","Enable/Disable Cover Images")},t.prototype.changeCommentingPerms=function(e){g.stop(e),m.toggle({elem:r(e.target).closest("a"),view:new l({model:this.model,modelCache:this.modelCache})}),C("Board Menu","Settings","Open Change Commenting Permissions")},t.prototype.changeAddMemberPerms=function(e){g.stop(e),m.toggle({elem:r(e.target).closest("a"),view:new c({model:this.model,modelCache:this.modelCache})}),C("Board Menu","Settings","Open Change Add Member Permissions")},t.prototype.toggleSelfJoin=function(e){g.stop(e),this.model.setPref("selfJoin",!this.model.getPref("selfJoin")),this.model.save(),C("Board Menu","Settings","Toggle Allow Org Join")},t.prototype.changeOrg=function(e){var t,n;g.stop(e),this.model.owned()?(m.toggle({elem:r(e.target).closest("a"),view:u,options:{model:this.model,modelCache:this.modelCache}}),C("Board Menu","Settings","Change Org")):(t=this.model.get("idOrganization"),null!=(n=this.modelCache.get("Organization",t))&&n.boardList.remove(this.model),this.model.update("idOrganization",""),m.hide(),C("Board Menu","Settings","Remove Org"))},t}(v)},{}],370:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("jquery"),i=e(100),a=e(22),h=e(861),s=e(603),u=e(569),c=e(133),l=e(549),d=e("underscore"),m=e(109),f=e(546),p=e(104),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),m(s,t),t.prototype.viewTitleKey="organization members",t.prototype.initialize=function(){var e;e=this.model.getOrganization(),null!=e&&this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.render))},t.prototype.events={"click .js-board-members .js-select-member":"didClickAddOrgMember",keyup:"keyupEvent","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"},t.prototype.renderOrgMembers=function(e){var t,n,r,o,i,a;for(i=[],i=e?this.modelCache.get("Member",e):this.model.orgMembersAvailable(),a=this.$(".js-board-members .js-list").empty().show(),n=0,r=i.length;r>n;n++)o=i[n],t=o.toJSON(),a.append(f.fill("select_member",t,{},{member:f.member}));this.$(".js-board-members .js-num-org-mem").empty().text(i.length)},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0}),e.orgName=null!=(t=this.model.getOrganization())?t.get("displayName"):void 0,e.canInvite=!0,e.editable=this.model.editable(),this.$el.html(h(e)),this.renderOrgMembers(),this.$(".js-board-members").removeClass("hide"),this},t.prototype.keyupEvent=function(e){var t,n,o,s,l;n=i.getKey(e),l=r(".js-search-input").val().trim(),n===a.Enter?(c.stop(e),this.$(".js-org-members .js-list .selected").length>0&&(t=this.$(".js-org-members .js-list .selected:first .js-select-member").attr("idMember"),o=this.modelCache.get("Member",t),this.model.addMember(o),this.$(".js-search-input").focus().select())):n===a.ArrowUp||n===a.ArrowDown?(c.stop(e),c.navMenuList(r(null!=(s=u.view)?s.el:void 0).find(".js-org-members .js-list"),".item",n)):l.length>0?(this.filterAndFillMembers(l),r(".js-org-members .js-list").removeClass("collapsed"),r(".js-add-all-org-members").addClass("hide")):(this.renderOrgMembers(),r(".js-org-members .js-list").addClass("collapsed"),r(".js-add-all-org-members").removeClass("hide"))},t.prototype.filterAndFillMembers=function(e){var t,n,r;n=d.pluck(this.model.orgMembersAvailable(),"id"),r=c.filterMembers(this.modelCache,e,n),r=r.slice(0,7),r.length>0?(this.renderOrgMembers(r),t=this.$(".js-org-members .js-list .item:first"),c.selectMenuItem(this.$(".js-org-members .js-list"),".item",t)):this.$(".js-org-members .js-list").html('<li><p class="empty"></p></li>').find("p").text(p("no matched memebers"))},t.prototype.didClickAddOrgMember=function(e){var t,n;return c.stop(e),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),this.model.addMember(n),this.render()},t}(l)},{}],371:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),o=e(517),a=e(7),s=e(569),u=e(133),c=e(549),p=e(546),d=e(104),l=e(770),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change visibility",t.prototype.tagName="ul",t.prototype.events={"click .js-select":"selectVis"},t.prototype.className="pop-over-list",t.prototype.render=function(){var e,t,n;return n=this.options.organization,n.canSetVisibility("private")||n.canSetVisibility("org")||n.canSetVisibility("public")?(e=this.model.getPref("permissionLevel"),this.$el.html(l({current:e,canChange:!0,mustChange:!n.canSetVisibility(e),hasSuperAdmins:n.isFeatureEnabled("superAdmins"),hasOrg:!0,orgName:n.get("displayName"),privateRestricted:!n.canSetVisibility("private"),orgRestricted:!n.canSetVisibility("org"),publicRestricted:!n.canSetVisibility("public")}))):(t={isOrgAdmin:n.owned(),orgSettingsUrl:a.getOrganizationAccountUrl(n),organization:n.toJSON()},this.$el.html(p.fill("cant_add_board_to_org",t))),this},t.prototype.selectVis=function(e){var t,n,o;return u.stop(e),t=r(e.target).closest(".js-select"),t.hasClass("disabled")||t.closest(".js-disabled").length?void 0:(o=t.attr("name"),this.options.idOrganizationSource&&null!=(n=this.modelCache.get("Organization",this.options.idOrganizationSource))&&n.boardList.remove(this.model),this.model.update({idOrganization:this.options.organization.id,"prefs/permissionLevel":o}),this.options.organization.boardList.add(this.model),s.hide())},t}(c)},{}],372:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I=function(e,t){function n(){this.constructor=e}for(var r in t)N.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},N={}.hasOwnProperty;r=e("jquery"),k=e("underscore"),o=e(35),a=e(373),u=e(561),c=e(7),l=e(106),j=e(245),T=e(104),d=e(26),E=e(267),m=e(532),f=e(531),p=e(392),h=e(707),g=e(536),O=e(537),v=e(569),b=e("bluebird"),y=e("react"),M=e(88),B=e(544)("plugin_item"),L=e(56),w=e(133),_=e(549),D=e("xtend"),s=e(41),A=function(e){var t,n,r,o,i,a,s,u,c,l,d;return a=e.loading,s=e.name,i=e.iconUrl,r=e.details,t=e.canEnable,c=e.supportsSettings,u=e.supportsAuth,o=e.hasPersonalSettings,l=e.upgradeUrl,n=e.canReadManifest,d=e.upsellEnabled,B.div(".power-up-item-header",function(){return B.div(".power-up-item-icon",function(){return i&&B.img(".power-up-item-icon-image.plugin-item-icon",{src:i,alt:s}),B.span(".power-up-item-new-icon",function(){return B.format("new")})}),B.div(".power-up-item-details",function(){return B.h4(".power-up-item-details-header",{class:B.classify({"js-show-details":n,quiet:!n})},function(){return a?B.format("loading"):s?B.text(s):B.format("unknown plugin")}),n?void 0:B.div(".quiet",function(){return B.format("unable-to-load-power-up")})}),B.div(".power-up-item-actions",function(){return t&&n?((o||c||u)&&B.a(".power-up-item-actions-button.mod-settings.js-show-settings",{href:"#"},function(){return B.icon("gear")}),d&&(l?B.a(".power-up-item-actions-button.mod-upgrade.button-link",{href:l},function(){return B.format("upgrade")}):B.a(".power-up-item-actions-button.mod-upgrade.button-link.js-add-to-team",{href:"#"},function(){return B.format("upgrade")})),B.a(".power-up-item-actions-button.mod-enable.button-link.primary.js-enable",{href:"#"},function(){return B.format("enable")}),B.a(".power-up-item-actions-button.mod-disable.button-link.negate.js-disable",{href:"#"},function(){return B.format("disable")}),B.a(".power-up-item-actions-button.mod-fake-enable.button-link.primary.js-fake-enable",{href:"#"},function(){return B.format("enable")})):void 0})}),B.div(".power-up-item-tagline.js-show-details",function(){return B.text(S(r))})},x=function(e){var t,n,r,o,i,a,s,u,c,l,d;return a=e.loading,s=e.name,i=e.iconUrl,r=e.details,t=e.canEnable,c=e.supportsSettings,u=e.supportsAuth,o=e.hasPersonalSettings,l=e.upgradeUrl,n=e.canReadManifest,d=e.upsellEnabled,B.div(".power-up-item-icon",function(){return i&&B.img(".power-up-item-icon-image.plugin-item-icon",{src:i,alt:s}),B.icon("check",{class:"power-up-item-enabled-icon"}),B.span(".power-up-item-new-icon",function(){return B.format("new")})}),B.div(".power-up-item-details",function(){return B.h4(".power-up-item-details-header",{class:B.classify({"js-show-details":n,quiet:!n})},function(){return a?B.format("loading"):s?B.text(s):B.format("unknown plugin"),n?B.icon("information",{class:"power-up-item-details-info-icon"}):void 0}),n?void 0:B.div(".quiet",function(){return B.format("unable-to-load-power-up")})}),B.div(".power-up-item-actions",function(){return t&&n&&((o||c||u)&&B.a(".power-up-item-actions-button.mod-settings.button-link.js-show-settings",{href:"#"},function(){return B.icon("gear")}),d&&(l?B.a(".power-up-item-actions-button.mod-upgrade.button-link",{href:l},function(){return B.format("upgrade")}):B.a(".power-up-item-actions-button.mod-upgrade.button-link.js-add-to-team",{href:"#"},function(){return B.format("upgrade")})),B.a(".power-up-item-actions-button.mod-enable.button-link.js-enable",{href:"#"},function(){return B.format("enable")}),B.a(".power-up-item-actions-button.mod-disable.button-link.js-disable",{href:"#"},function(){return B.format("disable")}),d)?B.a(".power-up-item-actions-button.mod-fake-enable.button-link.js-fake-enable",{href:"#"},function(){return B.format("enable")}):void 0})},P=B.renderable(function(e){var t,n,r,o,i,a,s,u,c,l,d,p,h,m,f;return u=e.loading,c=e.name,s=e.iconUrl,o=e.desc,i=e.details,d=e.source,t=e.canEnable,h=e.supportsSettings,p=e.supportsAuth,a=e.hasPersonalSettings,m=e.upgradeUrl,n=e.canReadManifest,f=e.upsellEnabled,r={loading:u,name:c,iconUrl:s,desc:o,details:i,source:d,canEnable:t,supportsSettings:h,supportsAuth:p,hasPersonalSettings:a,upgradeUrl:m,canReadManifest:n,upsellEnabled:f},(null!=(l=M("powerUpTaglines"))?l.get("showTaglines"):void 0)?A(r):x(r)}),C=function(e,t){return null==t&&(t=null),e.catch(m.Error.UnableToLoadManifest,function(){return t})},S=function(e){var t,n;return n=r(l.markdownAsHtml(e)).text(),t=n.split(/\.\s|\.{3}|/,1)[0].trim(),t.substring(0,95).trim()+""},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.initialize=function(e){this.plugin=e.plugin,this.io=f.get(this.plugin),this.initialData={loading:!0,canEnable:this.model.editable(),upgradeUrl:this.model.hasOrganization()?c.getBoardPowerUpsUpgradeUrl(this.model):void 0,upsellEnabled:!s.get("dontUpsell")},this.listenTo(this.model,"change:powerUps",this.frameDebounce(this.renderEnabledState)),this.listenTo(this.model.boardPluginList,"add remove reset",this.frameDebounce(this.renderEnabledState)),this.listenTo(o.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.renderEnabledState))},t.prototype.renderOnce=function(){return this.$el.html(P(this.initialData)),this.renderPluginData(),this.renderEnabledState(),this},t.prototype.renderPluginData=function(){return b.props({loading:!1,name:this.io.getName(),desc:C(this.io.getDescription(),this.io.manifestUrl),details:C(this.io.getDetails(),""),iconUrl:C(this.io.getIconUrl()),hasPersonalSettings:this.hasPersonalSettings(),supportsAuth:this.io.supports("show-authorization"),supportsSettings:this.io.supports("show-settings"),canReadManifest:this.io.canReadManifest()}).then(function(e){return function(t){return e.$el.html(P(D(e.initialData,t))),e.subscribe(e.model.boardPluginList.snoop(),e.renderEnabledState)}}(this)).done(),this},t.prototype.getEnabledState=function(){return this.model.isPluginEnabled(this.plugin.id)},t.prototype.renderEnabledState=function(){var e,t,n,r;return n=this.getEnabledState(),e=this.model.canEnableAdditionalPowerUps(),t=o.me().isDismissed("PowerUpsLimitFullAd"),r=d.hasOwnProperty(this.plugin.id)&&d[this.plugin.id]>Date.now()-12096e5,this.$el.toggleClass("is-enabled",n),this.$el.toggleClass("is-new",r),this.$el.toggleClass("needs-upgrade",!n&&!e&&t),this.$el.toggleClass("fake-enable",!n&&!e&&!t),this},t.prototype.hasPersonalSettings=function(){var e;return e=k.extend(o.me().getPluginData(this.io.id),this.model.getPluginData(this.io.id)),k.any(e,function(e){var t;return t=e.private,null!=t})},t.prototype.enable=function(){this.model.enablePlugin(this.plugin.id),L("Power-Up listing","enables","Power-Up","","","enable button",this.plugin.id)},t.prototype.disable=function(){this.model.disablePlugin(this.plugin.id),L("Power-Up listing","disables","Power-Up","","","disable button",this.plugin.id)},t.prototype.showDetails=function(e){var t,n;t=this.model,n=f.get(this.plugin),v.toggle({elem:e,getViewTitle:j(n,"getName"),reactElement:y.createElement(h,{io:n,model:t,key:this.plugin.id})}),L("Power-Up listing","opens","Power-Up","","","show-details",this.plugin.id)},t.prototype.showSettings=function(e){var t;return t=f.get(this.plugin),v.toggledBy(e)?void v.hide():(L("Power-Up listing","opens","Power-Up","","","show-settings",this.plugin.id),void b.props({supportsAuth:this.io.supports("show-authorization"),supportsSettings:this.io.supports("show-settings"),hasPersonalSettings:this.hasPersonalSettings()}).then(function(e){return function(t){return t.supportsAuth?g.one({timeout:1e3,plugin:e.plugin,command:"authorization-status",board:e.model}).then(function(e){return D(t,{authStatus:e})}):b.resolve(t)}}(this)).then(function(n){return function(r){var o;return o=function(t){return k.bind(t,n,e)},v.toggle({elem:e,getViewTitle:function(){return t.getName().then(function(e){return T(["view title","powerup settings"],{name:e})})},reactElement:y.createElement(p,D(r,{plugin:n.plugin,key:n.io.id,authorize:o(n.showAuthorization),removeData:o(n.clearData),showSettings:o(n.showPluginSettings)}))})}}(this)))},t.prototype.showAuthorization=function(e){L("Power-Up listing","opens","Power-Up","","","show-authorization",this.plugin.id),g.one({plugin:this.plugin,command:"show-authorization",board:this.model,el:e}).done()},t.prototype.showPluginSettings=function(e){L("Power-Up listing","opens","Power-Up","","","edit-settings",this.plugin.id),g.one({plugin:this.plugin,command:"show-settings",board:this.model,el:e}).done()},t.prototype.clearData=function(e){u.pushView("clear plugin data",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.clearPluginData(e.io.id),o.me().clearPluginData(e.io.id),L("Power-Up listing","clicks","Power-Up","","","remove-data",e.plugin.id),e.renderPluginData(),e.io.supports("remove-data").then(function(t){return t?g.one({plugin:e.plugin,command:"remove-data"}):void 0}).done()}}(this)})},t}(a)},{}],373:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(35),s=e(561),u=e(7),p=e(549),c=e(569),d=e(133),l=e(393),m=e(537),g=e(546),f=e(950),v=e(51),b=e(56),h=e("underscore"),a=e(41),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.initialize=function(e){this.powerUp=e.powerUp,this.listenTo(this.model,"change:powerUps",this.frameDebounce(this.renderEnabledState)),this.listenTo(this.model.boardPluginList,"add remove reset",this.frameDebounce(this.renderEnabledState)),this.listenTo(o.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.renderEnabledState)),this.subscribe(m(this.model),function(e){return function(){return e.renderEnabledState()}}(this))},t.prototype.className="power-up-item",t.prototype.events={"click .js-enable":function(e){return d.stop(e),c.hide(),this.enable()},"click .js-disable":function(e){return d.stop(e),c.hide(),this.disable(e.currentTarget)},"click .js-show-details":function(e){return d.stop(e),this.showDetails(e.currentTarget)},"click .js-show-settings":function(e){return d.stop(e),this.showSettings(e.currentTarget)}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e;return null==this.options.disableOnly&&this.model.hasOrganization()&&(e=u.getBoardPowerUpsUpgradeUrl(this.model)),this.$el.html(f({iconSrc:this.powerUp.iconSrc,canEnable:this.model.editable,upgradeUrl:e,displayName:this.powerUp.displayName,upsellEnabled:!a.get("dontUpsell"),details:g.fill(this.powerUp.aboutTemplate)})),this.renderEnabledState(),this},t.prototype.getEnabledState=function(){return this.model.isPowerUpEnabled(this.powerUp.name)},t.prototype.renderEnabledState=function(){var e,t,n,r;return r=this.getEnabledState(),t=this.options.disableOnly,e=this.model.canEnableAdditionalPowerUps(),n=o.me().isDismissed("PowerUpsLimitFullAd"),this.$el.toggleClass("is-enabled",r),this.$el.toggleClass("needs-upgrade",!r&&!e&&n),this.$el.toggleClass("fake-enable",!r&&!e&&!n),this},t.prototype.enable=function(){this.model.enablePlugin(this.powerUp.idPlugin),v("Power-Ups",this.powerUp.name,"Enable"),b("Power-Up listing","enables","Power-Up","","","enable button",this.powerUp.idPlugin)},t.prototype.isGrandfathered=function(){var e;return e=this.powerUp.name,_.call(this.model.get("powerUps"),e)>=0},t.prototype.disable=function(e){var t,n;this.isGrandfathered()?(n=function(e){return function(){return e.model.pull("powerUps",e.powerUp.name),v("Power-Ups",e.powerUp.name,"Disable"),b("Power-Up listing","disables","Power-Up","","","disable button",e.powerUp.idPlugin)}}(this),(null!=(t=this.model.getOrganization())?t.isFeatureEnabled("plugins"):void 0)?n():s.toggle("disable power up",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:n})):(this.model.disablePlugin(this.powerUp.idPlugin),v("Power-Ups",this.powerUp.name,"Disable"),b("Power-Up listing","disables","Power-Up","","","disable button",this.powerUp.idPlugin))},t.prototype.showDetails=function(e){return c.toggle({elem:e,view:new l({powerUp:this.powerUp,isGrandfathered:this.isGrandfathered()}),autoPosition:!0}),v("Power-Ups",this.powerUp.name,"Show Details"),b("Power-Up listing","opens","Power-Up","","","show-details",this.powerUp.idPlugin)},t.prototype.showSettings=function(e){return c.toggle({elem:e,view:this.powerUp.settingsView(this.model,this.isGrandfathered()),autoPosition:!0}),v("Power-Ups",this.powerUp.name,"Show Details"),b("Power-Up listing","opens","Power-Up","","","edit-settings",this.powerUp.idPlugin)},t}(p)},{}],374:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z,R,F,$,U=function(e,t){function n(){this.constructor=e}for(var r in t)q.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},q={}.hasOwnProperty,H=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),P=e("underscore"),o=e(35),a=e(362),s=e(372),u=e(373),d=e(719),p=e(720),i=e(360),m=e(7),D=e(102),f=e(23),g=e(24),v=e(40),b=e(532),y=e(531),N=e(958),O=e("bluebird"),A=e(133),M=e(549),B=e(721),L=e(104),R=e(544)("board_power_ups"),$=e("xtend"),V=e(88),F=e(51),h=e(41),I=[{name:"voting",iconSrc:"https://a.trellocdn.com/images/powerups/7a64373ca0f3e1858b4a9a3928d561d3/voting-icon.svg",aboutTemplate:"power_ups_about_voting",settingsView:function(e){return new B({model:e})},screenshots:["https://a.trellocdn.com/images/powerups/voting/screenshots/de063c1421497f609fef2e5b37797cff/2015-3-23-screenshot1.png"],idPlugin:g.voting},{name:"cardAging",iconSrc:"https://a.trellocdn.com/images/powerups/d33d5c107f425c21f7f3a19f602871ec/card-aging-icon.svg",aboutTemplate:"power_ups_about_card_aging",settingsView:function(e){return new p({model:e})},screenshots:["https://a.trellocdn.com/images/powerups/card-aging/screenshots/27972dcff7cab11886b671d6fcfc11ae/2015-3-23-screenshot1.png"],idPlugin:g.cardAging},{name:"calendar",iconSrc:"https://a.trellocdn.com/images/powerups/ff818ba7df38d8af7f68d26ae408f5eb/calendar-icon.svg",aboutTemplate:"power_ups_about_calendar",settingsView:function(e){return new d({model:e})},screenshots:["https://a.trellocdn.com/images/powerups/calendar/screenshots/e204a5ed5a8dc113760b185b4c7276c5/2015-3-23-screenshot1.png"],idPlugin:g.calendar}],w=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.events={"click .js-close-explainer":"closeExplainer","click .power-ups-explainer-learn-more":"trackLearnMore"},t.prototype.className="power-ups-explainer",t.prototype.render=function(){var e;return e=R.render(function(){return R.p(".power-ups-explainer-text",L("power-up explainer")),R.a(".power-ups-explainer-learn-more",{href:"/power-ups",target:"_blank"},function(){return R.format("learn-more")}),R.span(".power-ups-explainer-close.js-close-explainer",function(){return R.icon("close")})}),this.$el.html(e),this},t.prototype.closeExplainer=function(e){this.remove(),o.me().dismiss("PowerUpsPaneExplainer"),F("Board Menu","Dismiss Power-Ups Explainer")},t.prototype.trackLearnMore=function(){return F("Board Menu","Explainer Ad","Learn More Click")},t}(M),z=R.renderable(function(){return R.div(function(){return R.div(".spinner.loading")})}),S=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.render=function(){return this.$el.html(z()),this},t}(M),T=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(R.render(function(e){return function(){return R.div(".count-explanation",function(){return R.p(function(){return R.format("board-has-been-added-to-the-team",{boardName:e.model.get("name"),teamName:e.model.getOrganization().get("displayName")})}),R.p(function(){return R.format("team-has-business-class-so-this-board-has-unlimited-access-to-power-ups",{teamName:e.model.getOrganization().get("displayName")
})})})}}(this)))},t}(M),x=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(R.render(function(e){return function(){return R.div(".count-explanation",function(){return R.p(function(){return R.format("board-has-been-added-to-the-team",{boardName:e.model.get("name"),teamName:e.model.getOrganization().get("displayName")})}),R.p(function(){return R.format("upgrade-to-business-class-for-unlimited-power-ups-and-moreupgrade-to-business-class")})})}}(this)))},t}(M),_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(R.render(function(e){return function(){return R.div(".count-explanation",function(){return R.p(function(){return R.format("only-team-members-can-enable-power-ups")})})}}(this)))},t}(M),C=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.className="explainer power-ups-explainer power-ups-limit-reached",t.prototype.events={"click .js-upgrade-team":function(e){return F("Power-Ups Menu","Banner Ad","Get More Power-Ups Button")},"click .power-ups-limit-reached-learn-more":function(){return F("Power-Ups Menu","Banner Ad","Learn More Link")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=m.getBoardPowerUpsUpgradeUrl(this.model),e=o.me(),this.$el.html(R.render(function(e){return function(){return R.p(".power-ups-limit-reached-message",function(){return R.format("it-looks-like-youve-reached-your-power-ups-limit-for-this-board")}),R.p(".power-ups-limit-reached-button",function(){return e.model.hasOrganization()?R.a(".button.primary.js-upgrade-team",{href:t},function(){return R.format("get-more-power-ups")}):R.a(".button.primary.js-add-to-team",{href:"#"},function(){return R.format("get-more-power-ups")})}),R.a(".power-ups-limit-reached-learn-more",{href:"/business-class",target:"_blank"},function(){return R.format("learn-more")})}}(this)))},t}(M),k=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.className="explainer power-ups-explainer power-ups-limit-reached-full",t.prototype.events={"click .js-no-thanks":function(e){return o.me().dismiss("PowerUpsLimitFullAd")},"click .js-upgrade-team":function(e){return F("Power-Ups Menu","Full-Menu Ad","Get More Power-Ups Button")},"click .js-add-to-team":function(e){return F("Power-Ups Menu","Full-Menu Ad","Get More Power-Ups Button")},'click a[href="/business-class"]':function(){return F("Power-Ups Menu","Full-Menu Ad","Business Class Link")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t,n;return n=m.getBoardPowerUpsUpgradeUrl(this.model),e=o.me(),t=e.isInAnyBCOrganization(),this.$el.html(R.render(function(r){return function(){return R.div(".power-ups-limit-reached-full-content",function(){return R.p(".power-ups-limit-reached-message",function(){return R.format("it-looks-like-youve-reached-your-power-ups-limit-for-this-board")}),R.p(".power-ups-limit-reached-sub",function(){return e.isFeatureEnabled("threePlugins")?(R.format("as-a-trello-gold-member-you-can-turn-on-three-power-ups-per-board"),R.text(" "),R.format("business-class-teams-get-unlimited-power-ups")):t?R.format("with-the-legacy-version-of-business-class-you-can-turn-on-one-power-up-per-board"):r.model.hasOrganization()?R.format("business-class-teams-get-unlimited-power-ups"):(R.format("as-a-free-member-you-can-turn-on-one-power-up-per-board"),R.text(" "),R.format("business-class-teams-get-unlimited-power-ups"))}),R.p(".power-ups-limit-reached-sub",{style:"margin: 8px 40px"},function(){return t?R.format("to-unlock-more-upgrade-your-team-to-the-latest-version-of-business-class-today"):R.format("to-unlock-more-upgrade-to-business-class-today")}),R.p(".power-ups-limit-reached-button",function(){return r.model.hasOrganization()?R.a(".button.primary.js-upgrade-team",{href:n},function(){return R.format("lets-do-this")}):R.a(".button.primary.js-add-to-team",{href:"#"},function(){return R.format("lets-do-this")})}),R.div(".power-ups-limit-reached-no-thanks.js-no-thanks",function(){return R.format("no-thanks")})})}}(this)))},t}(M),j=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.events={"click .power-ups-request-let-us-know":function(e){return F("Board Menu","Request a Power-Up","Let Us Know Click")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e;return e="https://trello.typeform.com/to/DLUonY?source=app&member="+o.myId(),this.$el.html(R.render(function(t){return function(){return R.div(".power-ups-request",function(){return R.p(".quiet",function(){return R.format("dont-see-what-youre-looking-for-let-us-know",{url:e})})})}}(this)))},t}(M),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.initialize=function(){},t.prototype.className="power-up-items",t.prototype.render=function(){return this.appendSubview(this.subview(S,this.model)),O.props({powerups:P.map(I,function(e){return function(t){var n,r;return r=t.name,n=$(t,{displayName:L(["power ups",r,"name"]),description:L(["power ups",r,"description"])}),{displayName:n.displayName,view:e.subview(u,e.model,{powerUp:n},r)}}}(this)),plugins:O.try(function(e){return function(){var t;return t=P.pluck(I,"idPlugin"),v.loadBoardAvailablePlugins(e.model.id).filter(function(e){var n;return n=e.id,H.call(t,n)<0}).map(function(t){return y.get(t).getName().catch(b.Error.UnableToLoadManifest,function(){return t.get("url")}).then(function(n){return{displayName:n,view:e.subview(s,e.model,{plugin:t},t.id)}})})}}(this))}).then(function(e){return function(t){var n,r,o,i,a;return r=t.powerups,n=t.plugins,a=P.chain([r,n]).flatten().sortBy(function(e){return e.displayName.toLowerCase()}).pluck("view").value(),(null!=(o=V("powerUpTaglines"))?o.get("showTaglines"):void 0)&&e.$el.addClass("power-up-item-taglines-experiment-enabled"),e.ensureSubviews(a),(null!=(i=V("powerUpRequestCTA"))?i.get("showCTA"):void 0)?e.appendSubview(e.subview(j,e.model)):void 0}}(this)).done(),this},t}(M),E=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.className="power-ups-upgrade",t.prototype.initialize=function(){},t.prototype.events={"click .js-go-back":function(e){return F("Board Menu","Open Power-Ups","Dismiss Upsell"),this.model.trigger("cancel-upgrade")},"click .js-upgrade":function(e){return this.model.trigger("add-to-team")}},t.prototype.render=function(){var e,t,n,r,i;return t=o.me(),n=t.isInAnyBCOrganization(),r=this.model.hasOrganization(),i=m.getBoardPowerUpsUpgradeUrl(this.model),e=t.isFeatureEnabled("threePlugins"),this.$el.html(N({partOfTeam:r,upgradeUrl:i,hasGold:e,onOldBC:n})),this},t}(M),t.exports=l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.viewTitleKey="power ups",t.prototype.viewIcon="power-up",t.prototype.noPadding=!0,t.prototype.isTopLevelTab=!0,t.prototype.className="board-menu-content-frame power-ups-list",t.prototype.initialize=function(){return this.listenTo(this.model,"change:idOrganization change:powerUps",this.frameDebounce(this.render)),this.listenTo(this.model,"added-to-team",function(e){return function(){return e.redirecting=!0,e.render()}}(this)),this.listenTo(this.model,"cancel-add-to-team",function(e){return function(){return e.addToTeam=!1,e.render()}}(this)),this.listenTo(this.model,"cancel-upgrade",function(e){return function(){return e.initialViewState=null,e.render()}}(this)),this.listenTo(this.model,"add-to-team",function(e){return function(){return e.initialViewState=null,e.addToTeam=!0,e.render()}}(this)),this.listenTo(this.model.boardPluginList,"add remove reset",this.frameDebounce(this.render)),this.listenTo(o.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.render)),this.initialViewState=this.options.viewState,this.explainLimits=!1,this.redirecting=!1,this.upgradeToBC=!1,this.useFullAd=!1},t.prototype.events=function(){return{"click .js-fake-enable":function(e){return A.stop(e),this.useFullAd=!0,this.render()},"click .js-add-to-team":function(e){return A.stop(e),this.model.owned()?(this.addToTeam=!0,this.render()):window.location="/business-class"}}},t.prototype.render=function(){var e;return e=this.model.getOrganization(),this.$el.empty().removeClass("full-page-ad"),"upsell"===this.initialViewState?(this.renderUpgradeView(),this):(this.redirecting?this.renderSpinner():this.addToTeam?this.renderAddToTeam():this.renderPowerUpsList(),this)},t.prototype.renderSpinner=function(){return this.appendSubview(this.subview(S,this.model)),this},t.prototype.renderUpgradeView=function(){return this.appendSubview(this.subview(E,this.model))},t.prototype.renderAddToTeam=function(){return this.model.hasOrganization()?(this.appendSubview(this.subview(_,this.model)),this):(this.explainLimits=!0,v.loadMyOrganizations(),this.appendSubview(this.subview(a,this.model,{menuType:"Power-Ups"})))},t.prototype.renderPowerUpsList=function(){var e,t;if(t=!h.get("dontUpsell"),!this.model.canEnableAdditionalPowerUps()&&t)if(o.me().isDismissed("PowerUpsLimitFullAd"))this.appendSubview(this.subview(C,this.model));else{if(this.useFullAd)return this.appendSubview(this.subview(k,this.model)),this.$el.addClass("full-page-ad"),this;o.me().isDismissed("PowerUpsPaneExplainer")||this.appendSubview(this.subview(w,this.model))}else t&&(o.me().isDismissed("PowerUpsPaneExplainer")||this.appendSubview(this.subview(w,this.model)),this.explainLimits&&(e=this.model.getOrganization(),(null!=e?e.isFeatureEnabled("plugins"):void 0)?this.appendSubview(this.subview(T,this.model)):this.appendSubview(this.subview(x,this.model))));return this.appendSubview(this.subview(c,this.model))},t}(M)},{}],375:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(371),i=e(376),a=e(569),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(e){return this.disableNone=null!=e?e.disableNone:void 0,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.disableNone&&this.$(".js-submit").addClass("disabled").attr("disabled","disabled"),this},t.prototype.showOrgBoardVisPerms=function(e,t){return a.pushView({view:new r({model:this.model,organization:e,idOrganizationSource:t,modelCache:this.modelCache})})},t.prototype.submit=function(e){return t.__super__.submit.apply(this,arguments)},t.prototype.canAddToOrg=function(e){return!e.isFeatureEnabled("restrictVis")||e.canSetVisibility("org")},t.prototype.updateModel=function(e){return this.model.update({idOrganization:e,"prefs/permissionLevel":"org"})},t.prototype.orgSelected=function(){return t.__super__.orgSelected.apply(this,arguments),this.disableNone?""===this.$(".js-org").val()?this.$(".js-submit").addClass("disabled").attr("disabled","disabled"):this.$(".js-submit").removeClass("disabled").removeAttr("disabled"):void 0},t}(i)},{}],376:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e(35),o=e(371),a=e(561),s=e(650),u=e(40),c=e(569),l=e("bluebird"),d=e(133),p=e(549),m=e(546),f=e(51),h=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.viewTitleKey="change organization",t.prototype.events={"click .js-submit":"submit","change .js-org":"orgSelected","click .js-new-org":"newOrg"},t.prototype.render=function(){var e,t,n,o,i,a;if(e=this.model.toJSON({org:!0}),i=this.model.owned()?r.me().organizationList.models:[],e.orgs=function(){var e,t,n;for(n=[],e=0,t=i.length;t>e;e++)o=i[e],n.push(o.toJSON());return n}(),e.hasOrgs=0!==e.orgs.length,e.idOrganization)for(a=e.orgs,t=0,n=a.length;n>t;t++)o=a[t],o.id===e.idOrganization&&(o.select=!0);return e.isPrivate=this.model.isPrivate(),e.allowsSelfJoin=this.model.allowsSelfJoin(),this.$el.html(m.fill("popover_change_board_org",e)),this.updateOrgOptions(),this},t.prototype.showOrgBoardVisPerms=function(e,t){return c.pushView({view:new o({model:this.model,organization:e,idOrganizationSource:t,modelCache:this.modelCache})})},t.prototype.changeOrg=function(e,t){var n,r,o;return n=e!==t,n&&t&&null!=(r=this.modelCache.get("Organization",t))&&r.boardList.remove(this.model),o={},n&&(o.idOrganization=e),e&&(this.$(".js-make-org-visible").is(":checked")&&(o["prefs/permissionLevel"]="org"),this.$(".js-make-org-joinable").is(":checked")&&(o["prefs/selfJoin"]=!0)),this.model.update(o),n&&e&&this.modelCache.get("Organization",e).boardList.add(this.model),c.hide()},t.prototype.newOrg=function(e){var t;return f("Board Header","Add to a Team menu","New Org"),d.stop(e),t={boardToAddToOrg:this.model},c.pushView({view:new s({model:this.model,modelCache:this.modelCache,createOpts:t})})},t.prototype.canAddToOrg=function(e){return e.canAddBoard(this.model)},t.prototype.submit=function(e){var t,n,r;return this.$(".js-submit").prop("disabled",!0).toggleClass("disabled",!0),d.stop(e),f("Board","Change Org"),n=this.$(".js-org").val(),t=this.model.get("idOrganization"),r=this.modelCache.get("Organization",n),l.try(function(t){return function(){var o;return(o=r&&r.externalMembersDisabled())?u.loadOrganizationMembersData(n).then(function(){var n,o,i;return i=t.model.memberList.chain().filter(function(e){return!r.isMember(e)}).map(function(e){return e.get("fullName")}).value(),o=i.length,0!==o?(n=1===o?"external member not allowed":"external members not allowed",l.fromNode(function(s){return a.toggle(n,{elem:e.currentTarget,model:t.model,confirmBtnClass:"negate",templateData:{count:String(o),members:i.length>20?h.first(i,20).join(", ")+"":i.join(", "),team:r.get("displayName")},fxConfirm:function(){return s()},fxCancel:function(){return s(new Error("cancelled"))}})})):void 0}):void 0}}(this)).then(function(e){return function(){return(null!=r?r.isFeatureEnabled("restrictVis"):void 0)?u.loadOrganizationMembersData(n).then(function(){e.canAddToOrg(r)?e.changeOrg(n,t):e.showOrgBoardVisPerms(r,t)}).done():e.changeOrg(n,t)}}(this)).error(function(){}).done()},t.prototype.updateOrgOptions=function(){var e;e=""!==this.$(".js-org").val(),this.$(".js-make-org-visible,.js-make-org-joinable").closest(".js-check-div").toggleClass("hide",!e)},t.prototype.orgSelected=function(e){return this.updateOrgOptions()},t}(p)},{}],377:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(376),a=e(381),s=e(387),u=e(569),c=e(133),l=e(549),p=e(546),h=e(51),d=e(104),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="settings",t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-change-org:not(.disabled)":"changeOrg","click .js-toggle-covers:not(.disabled)":"toggleCovers","click .js-change-comments:not(.disabled)":"changeCommentingPerms","click .js-change-add-members:not(.disabled)":"changeAddMemberPerms","click .js-toggle-org-mem-join:not(.disabled)":"toggleSelfJoin"},t.prototype.initialize=function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0,url:!0,labels:!0}),e.cardCovers=e.prefs.cardCovers,t=this.model.getOrganization(),e.orgDisplayName=null!=t?t.get("displayName"):void 0,e.hasOrg=null!=(null!=t?t.id:void 0),e.commentsDisplay=d(["board pref perms",this.model.getCommentPerm()]),e.invitationsDisplay=d(["board pref perms",this.model.getInvitePerm()]),e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),(null!=t?t.owned():void 0)&&!this.model.owned()&&(e.setOrgNull=!0),this.$el.html(p.fill("board_menu_settings",e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.changeOrg=function(e){var t,n;c.stop(e),this.model.owned()?(u.toggle({elem:r(e.target).closest("a"),view:o,options:{model:this.model,modelCache:this.modelCache}}),h("Board Menu","Settings","Change Org")):(t=this.model.get("idOrganization"),null!=(n=this.modelCache.get("Organization",t))&&n.boardList.remove(this.model),this.model.update("idOrganization",""),u.hide(),h("Board Menu","Settings","Remove Org"))},t.prototype.toggleCovers=function(e,t){c.stop(e),this.model.setPref("cardCovers",!this.model.getPref("cardCovers")),h("Board Menu","Settings","Enable/Disable Cover Images")},t.prototype.changeCommentingPerms=function(e){c.stop(e),u.toggle({elem:r(e.target).closest("a"),view:new s({model:this.model,modelCache:this.modelCache})}),h("Board Menu","Settings","Open Change Commenting Permissions")},t.prototype.changeAddMemberPerms=function(e){c.stop(e),u.toggle({elem:r(e.target).closest("a"),view:new a({model:this.model,modelCache:this.modelCache})}),h("Board Menu","Settings","Open Change Add Member Permissions")},t.prototype.toggleSelfJoin=function(e){c.stop(e),this.model.setPref("selfJoin",!this.model.getPref("selfJoin")),this.model.save(),h("Board Menu","Settings","Toggle Allow Org Join")},t}(l)},{}],378:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N=function(e,t){function n(){this.constructor=e}for(var r in t)V.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},V={}.hasOwnProperty,z=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(157),i=e(170),a=e(285),s=e(35),u=e(15),c=e(366),d=e(376),h=e(389),f=e(564),b=e(588),v=e(586),y=e(40),l=e(368),w=e(569),_=e(118),k=e(133),C=e(549),j=e(156),S=e("underscore"),L=e(546),T=e(763),B=e(537),P=e(88),D=e(51),I=e(56),O=e(102),E=e(94),A=e(46),M=e(109),x=e(548),g=e(23),m=e(41),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return N(t,e),M(x,t),t.prototype.viewTitleKey=function(){var e;return(null!=(e=P("tabbedBoardMenu"))?e.get("tabbed"):void 0)?"people":"menu"},t.prototype.viewIcon="member",t.prototype.className="board-menu-content-frame",t.prototype.headerDisplayTypeClass="is-board-menu-default-view",t.prototype.isTopLevelTab=!0,t.prototype.initialize=function(e){var t,n;return this.sidebarView=e.sidebarView,this.showAllMembers=null!=(t=P("tabbedBoardMenu"))?t.get("tabbed"):void 0,this.numActionsToShow=15,this.makeDebouncedMethods("render","renderMembers"),this.listenTo(this.model.memberList,{"change:status":this.renderMembersDebounced,"add remove reset":this.renderDebounced}),this.listenTo(this.model,{"change:datePluginDisable":this.renderPowerUpDisableTimer,"change:memberships":this.renderDebounced,"change:prefs.canInvite":this.renderDebounced,"change:prefs.selfJoin":this.renderDebounced,"change:prefs.invitations":this.renderDebounced,"change:prefs.permissionLevel":this.renderDebounced,"change:powerUps":this.renderEnabledPowerUpCount,"change:idOrganization":this.renderDebounced}),this.listenTo(s.me(),{"change:idOrganizations":this.loadOrganizationMembersData}),this.listenTo(this.model.boardPluginList,{"add remove reset":this.renderEnabledPowerUpCount}),this.setOrganizationChangeListener(),this.subscribe(B(this.model),function(e){return function(){return e.renderEnabledPowerUpCount()}}(this)),(null!=(n=P("tabbedBoardMenu"))?n.get("tabbed"):void 0)?void 0:(this.actionListView=this.collectionSubview(a,new i([],{modelCache:this.modelCache}),{renderOpts:{limit:this.numActionsToShow,context:this.model,compact:!0,truncateComments:function(e){return function(t){return t.get("date")<e.model.get("dateLastView")}}(this),excludeTypes:["copyCommentCard"]}}),this.waitForId(this.model,function(e){return function(){return e.listenTo(e.modelCache,"add:Action:"+e.model.id+" remove:Action:"+e.model.id+" change:Action:"+e.model.id,e.frameDebounce(function(){return e.renderActionCount(),e.actionListView.collection.reset(e.getActions())})),e.actionListView.collection.reset(e.getActions())}}(this)))},t.prototype.events={"click .js-open-manage-board-members":"openAddMembers","click .js-show-extra-members":"showExtraMembers","click .js-hide-extra-members":"hideExtraMembers","click .js-join-board":"joinBoard","click .js-change-background":"changeBackground","click .js-open-power-ups":"showPowerUps","click .js-open-stickers":"openStickers","click .js-open-card-filter":"showCardFilter","click .js-open-activity":"openActivity","click .js-open-more":"openMore","click .js-power-up-disable-timer":"openPowerUpsLimitUpgrade","click .js-close-highlight-add-members":function(e){return s.me().dismiss(this._highlightAddMembersKey()),this.renderMembers()},"click .js-change-organization":function(e){return k.stop(e),w.toggle({elem:this.$(".js-change-organization"),view:d,options:{model:this.model,modelCache:this.modelCache}})},"click .js-change-visibility":function(e){return k.stop(e),w.toggle({elem:this.$(".js-change-visibility"),view:h,options:{model:this.model,modelCache:this.modelCache}})}},t.prototype.render=function(){var e,t,n,r,o,i;return n=s.me(),t=this.model.editable(),e={canJoin:this.model.canJoin(),canInviteMembers:this.model.canInviteMembers(),canAssign:t,canChangeBackground:t,canChangeOrganization:this.model.owned(),canEnablePowerUps:t,hasBCPowerUps:n.hasBCPowerUps(),hasGoldPowerUps:n.isFeatureEnabled("threePlugins"),hasOrg:this.model.hasOrganization(),org:null!=(r=this.model.getOrganization())?{displayName:r.get("displayName"),logoHash:r.get("logoHash"),isBusinessClass:r.isBusinessClass(),isEnterprise:r.isEnterprise()}:void 0,selfJoin:this.model.allowsSelfJoin(),useTabs:null!=(o=P("tabbedBoardMenu"))?o.get("tabbed"):void 0,visibility:this.model.getPermLevel()},this.$el.html(T(e)),this.renderMembers(),null!=(i=this.actionListView)&&i.setElement(this.$(".js-menu-action-list")[0]),this.renderActions(),this.renderActionCount(),this.renderEnabledPowerUpCount(),this.renderBackgroundPreview(),this.renderPowerUpDisableTimer(),this},t.prototype.renderBackgroundPreview=function(){var e,t,n,r,o,i,a;return e=this.$(".js-fill-background-preview").css({"background-image":"","background-color":""}),null!=(null!=(r=u[this.model.getPref("background")])?r.tile:void 0)?n=this.model.getPref("backgroundImage"):null!=this.model.getPref("backgroundImageScaled")||null!=this.model.getPref("backgroundImage")?n=null!=(o=null!=(i=null!=(a=k.previewBetween(this.model.getPref("backgroundImageScaled"),90,60,600,400))?a.url:void 0)?i:this.model.get("fullSizeUrl"))?o:this.model.getPref("backgroundImage"):t=null!=this.model.getPref("backgroundColor")?this.model.getClientBackgroundColor(this.model.getPref("background")):this.model.getClientBackgroundColor("blue"),e.css({"background-image":n?"url("+n+")":"","background-color":t}),this},t.prototype.getDateLastViewedActionsStorageKey=function(){return this.model.id?"timeLastViewedActions-"+this.model.id:null},t.prototype.setDateLastViewedActions=function(e){var t;null!=(t=this.getDateLastViewedActionsStorageKey())&&_.set(t,e.toISOString())},t.prototype.setDateLastViewedActionsAsNow=function(){this.setDateLastViewedActions(new Date)},t.prototype.getDateLastViewedActions=function(){var e,t;return null!=(t=this.getDateLastViewedActionsStorageKey())&&null!=(e=_.get(t))?new Date(e):null},t.prototype.renderActionCount=function(){var e,t,n,r,o,i,a,u,c,l;for(this.$(".js-unread-activity-count").empty(),o=this.getDateLastViewedActions(),c=50,null==o&&(o=new Date,this.setDateLastViewedActions(o)),a=function(e){return function(e){var t,n;return t=new Date(e.get("date"))>o,n=e.get("idMemberCreator")!==s.me().id,t&&n}}(this),t=0,l=this.model.getActions(),i=0,u=l.length;u>i;i++)e=l[i],a(e)&&t++;return t>0&&t<=this.numActionsToShow&&this.setDateLastViewedActionsAsNow(),n=t,t>=c&&(n=c+"+"),t>this.numActionsToShow&&this.$(".js-unread-activity-count").text(n),r={count:n,hasCount:t>this.numActionsToShow},this.$(".js-fill-activity-button").empty().append(L.fill("board_menu_more_activity_button",r)),this},t.prototype.renderPowerUpDisableTimer=function(){var e;return e=this.model.daysUntilPluginsDisable(),null!==e?this.$(".js-power-up-disable-timer").removeClass("hide").text(O("days remaining",e)):this.$(".js-power-up-disable-timer").addClass("hide")},t.prototype.getEnabledPowerUpCount=function(){return this.model.get("powerUps").length+this.model.boardPluginList.length},t.prototype.renderEnabledPowerUpCount=function(){var e,t,n;return t=s.me(),n=t&&g&&!t.isDismissed(g),n?(this.$(".js-enabled-power-up-count").text(""),this.$(".js-power-up-new").removeClass("hide")):(this.$(".js-power-up-new").addClass("hide"),e=this.getEnabledPowerUpCount(),e>0?this.$(".js-enabled-power-up-count").text(E(e)):this.$(".js-enabled-power-up-count").text("")),this},t.prototype.renderMembers=function(){var e,t,n,r,o,i,a,u,c,l,d,p,h,m,g,y,w,_,k,C,x,T,E,M,B,L,D,I;for(o=null!=this.model.get("idOrganization"),_=this.model.getOrganization(),I=this.model.orderedVisibleMembers(),S.any(I,function(e){return function(t){return e.model.ownedByMember(t)}}(this))||A(new Error("Board had no admins, id = "+this.model.id+", "+I.length+" visibleMembers")),y=s.me(),d=this.model.isMember(y)||this.model.isObserver(y)||(null!=_?_.isMember(y):void 0),r=d?S.groupBy(I,function(e){return function(t){var n;return n=e.model.getMembershipFor(t),e.model.isVirtual(t)?"invited":null==n?"other":n.deactivated?"deactivated":"observer"===n.memberType?"observer":null!=n.orgMemberType||null!=(null!=_?_.getMembershipFor(t):void 0)?"team":o?"other":"member"}}(this)):{member:S.filter(I,function(e){return function(t){var n;return n=e.model.getMembershipFor(t),!n.deactivated&&"observer"!==n.memberType}}(this))},M=[{selector:".js-list-members",list:r.member},{selector:".js-list-team-members",list:r.team},{selector:".js-list-invited-members",list:r.invited},{selector:".js-list-non-team-members",list:r.other},{selector:".js-list-observers",list:r.observer},{selector:".js-deactivated-members",list:r.deactivated}],a=1===S.keys(r).length&&(null!=r.member||null!=r.team),T=9,j.fSmall&&(T=7),E=3,m=T*E,u=T*(E+1),i=0,L=(null!=(k=P("tabbedBoardMenu"))?k.get("tabbed"):void 0)&&I.length<=10,l=0,h=M.length;h>l;l++)C=M[l],B=C.selector,g=C.list,null==g&&(g=[]),n=this.$(B),t=n.find(".js-list"),e=n.find(".js-heading"),n.toggleClass("is-hidden",0===g.length),e.toggleClass("is-hidden",a),n.toggleClass("is-partial-row",!L&&g.length<T),p=g.length>u,I=g,p&&!this.showAllMembers&&(i+=g.length-m,I=I.slice(0,m)),D=function(){var e,t,n;for(n=[],e=0,t=I.length;t>e;e++)w=I[e],L?n.push(this.subview(v,w,{board:this.model})):n.push(this.subview(b,w,{board:this.model}));return n}.call(this),t.length&&this.ensureSubviews(D,t);return this.$(".js-show-extra-members").text(O("show more members",i)),this.$(".js-show-extra-members-button").toggleClass("is-shown",!this.showAllMembers&&i>0),this.$(".js-hide-extra-members-button").toggleClass("is-shown",this.showAllMembers),c=(null!=(x=P("tabbedBoardMenu"))?x.get("tabbed"):void 0)&&!y.isDismissed(this._highlightAddMembersKey())&&1===this.model.memberList.length&&s.isMe(this.model.memberList.at(0)),this.$(".js-highlight-add-members").toggleClass("hide",!c),this.$(".js-simple-add-members").toggleClass("hide",c),this.defer(function(){return f.refreshDraggableSidebarMembers()}),this},t.prototype._highlightAddMembersKey=function(){return"highlight-add-members-"+this.model.id},t.prototype.showExtraMembers=function(e){k.stop(e),this.showAllMembers=!0,this.renderMembers()},t.prototype.hideExtraMembers=function(e){k.stop(e),this.showAllMembers=!1,this.renderMembers()},t.prototype.renderActions=function(){var e;return null!=(e=this.actionListView)&&e.render(),this},t.prototype.showPowerUps=function(e){var t,n;k.stop(e),n=s.me(),n&&g&&!n.isDismissed(g)&&n.dismiss(g),this.sidebarView.pushView("powerUps"),I("board view","opens","Power-Up listing","","","by clicking Power-Ups button in sidebar"),t=this.model.daysUntilPluginsDisable(),null!==t?D("Board Menu","Open Power-Ups","Power-Ups Timer Active"):D("Board Menu","Open Power-Ups")},t.prototype.showCardFilter=function(e){k.stop(e),this.sidebarView.pushView("filter"),D("Board Menu","Open Card Filter Menu")},t.prototype.openPowerUpsLimitUpgrade=function(e){k.stop(e),m.get("dontUpsell")||(this.sidebarView.pushView("powerUps",{viewState:"upsell"}),D("Board Menu","Open Powerups Upsell"))},t.prototype.openStickers=function(e){k.stop(e),this.sidebarView.pushView("stickers"),D("Board Menu","Open Stickers","Via Default Menu")},t.prototype.changeBackground=function(e){k.stop(e),this.sidebarView.pushView("background"),D("Board Menu","Open Change Background")},t.prototype.openActivity=function(e){k.stop(e),this.sidebarView.pushView("activity"),this.setDateLastViewedActionsAsNow(),D("Board Menu","View All Board Activity")},t.prototype.openMore=function(e){k.stop(e),this.sidebarView.pushView("more"),D("Board Menu","More Menu")},t.prototype.joinBoard=function(e){k.stop(e),this.$(".js-join-board").remove(),this.model.joinBoard(),D("Board Menu","Join Board via Sidebar")},t.prototype.openAddMembers=function(e){var t;k.stop(e),D("Board Menu","Add Members via Sidebar Button"),t=new c({model:this.model,modelCache:this.modelCache}),t.loadOrgData(),w.toggle({elem:r(e.target).closest(".js-open-manage-board-members"),view:t})},t.prototype.setOrganizationChangeListener=function(){var e;return e=this.model.getOrganization(),e?this.listenTo(this.model.getOrganization(),{"change:memberships":this.renderMembersDebounced}):void 0},t.prototype.loadOrganizationMembersData=function(){var e,t,n,r,o;return e=this.model.get("idOrganization"),r=s.me().previous("idOrganizations"),n=s.me().get("idOrganizations"),o=z.call(r,e)>=0,t=z.call(n,e)>=0,!o&&t?y.loadOrganizationMembersData(e).then(function(e){return function(){return e.renderMembersDebounced()}}(this)):void 0},t.prototype.remove=function(){return this.setDateLastViewedActionsAsNow(),t.__super__.remove.apply(this,arguments)},t}(C)},{}],379:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A=function(e,t){function n(){this.constructor=e}for(var r in t)M.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},M={}.hasOwnProperty;r=e("jquery"),o=e(297),a=e(365),s=e(367),p=e(378),S=e(774),c=e(374),d=e(377),l=e(369),u=e(368),i=e(364),m=e(82),f=e(380),v=e(386),g=e(385),b=e(22),y=e(569),w=e(397),_=e(118),k=e(547),C=e(133),x=e(549),j=e("underscore"),T=e(88),E=e(546),O=e(51),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,e),t.prototype.initialize=function(){var e,t,n;k.addHandler(this,{scope:"board_sidebar"}),this.defaultView=this.subview(p,this.model,{sidebarView:this}),this.viewStack=[{name:"default",view:this.defaultView}],(null!=(t=T("tabbedBoardMenu"))?t.get("tabbed"):void 0)&&(e=null!=(n=_.get(this._lastViewKey()))?n:"default",this.canRestoreTo(e)&&this.resetTo(e,{animate:!1,showSidebar:!1}))},t.prototype.events={"click .js-hide-sidebar":"hideSidebar","click .js-pop-widget-view":"popView","click .js-open-activity":function(e){return this.defaultView.openActivity(e)},"click .js-open-members":function(e){return this.resetTo("default")},"click .js-open-power-ups":function(e){return this.defaultView.showPowerUps(e)},"click .js-open-filter":function(e){return this.defaultView.showCardFilter(e)},"click .js-open-stickers":function(e){return this.defaultView.openStickers(e)},"click .js-open-settings":function(e){return C.stop(e),this.pushView("settingsAndMore"),
O("Board Menu","Settings and More Menu")},shortcut:"shortcut"},t.prototype.shortcut=function(e){switch(e){case b.F:return this.pushView("filter"),"F - Search and Filter Cards"}},t.prototype.className="board-menu-container",t.prototype.render=function(){var e;return this.$el.html(S({useTabs:null!=(e=T("tabbedBoardMenu"))?e.get("tabbed"):void 0,canAddPowerUps:this.model.editable(),canAddStickers:this.model.editable()})),this.renderView(),this},t.prototype._lastViewKey=function(){return"initialMenu_"+this.model.id},t.prototype.canRestoreTo=function(e){return"default"===e||"filter"===e||"archive"===e||"stickers"===e||"labels"===e||"activity"===e||"powerUps"===e||"more"===e||"settings"===e||"settingsAndMore"===e},t.prototype.sidebarSubviews=function(){return{default:p,filter:f,archive:o,stickers:w,labels:a,background:v,backgroundColors:g,backgroundPhotos:g,activity:s,powerUps:c,more:u,settings:d,settingsAndMore:l,collections:i}},t.prototype.hackySidebarLifetimeEvents={filter:{didBecomeVisible:function(e){var t;return t=e.$(".js-autofocus")[0],C.setCaretAtEnd(t)}},more:{didBecomeVisible:function(e){return e.selectUrl()}},archive:{didBecomeVisible:function(e){var t;return t=e.$(".js-autofocus")[0],C.setCaretAtEnd(t)}}},t.prototype.viewNamed=function(e,t){var n,r,o,i,a,s,u,c;for(a=this.viewStack,n=0,r=a.length;r>n;n++)if(s=a[n],i=s.name,u=s.view,e===i)return u;if(c=j.result(this,"sidebarSubviews")[e],null==c)throw new Error("Unknown sidebar view "+e);return o="filter"===e?this.model.filter:this.model,new c(j.extend({model:o,modelCache:this.modelCache,sidebarView:this,viewState:null!=t?t.viewState:void 0},t))},t.prototype.topSidebarView=function(){return j.last(this.viewStack).view},t.prototype.topSidebarViewOptions=function(){return j.last(this.viewStack).options},t.prototype.renderView=function(e,t){var n,o,i,a,s,u,c,l,d,p,h,m;return a=this.$(".js-board-menu-title"),s=this.$(".js-board-menu-title-icon").empty(),u=this.$(".js-board-menu-title-text").empty(),o=this.$(".js-board-menu-content-wrapper").empty().scrollTop(0),m=this.topSidebarView(),this.$(".js-tab").removeClass("selected"),this.$(".js-tab").filter("[data-name='"+j.last(this.viewStack).name+"']").addClass("selected"),o.toggleClass("no-padding",m.noPadding===!0),null!=m.headerDisplayTypeClass?this.$(".js-board-menu-title").addClass(m.headerDisplayTypeClass):this.$(".js-board-menu-title").removeClass("is-board-menu-default-view"),this.$(".js-board-menu-title").toggleClass("is-top-level-tab",!!((null!=(l=T("tabbedBoardMenu"))?l.get("tabbed"):void 0)&&m.isTopLevelTab)),n=m.render().$el,null!=e&&n.addClass(e),h=m.getViewTitle(),h?(a.addClass("is-in-frame"),u.append(h)):a.removeClass("is-in-frame"),c=m.viewIcon,c&&(null!=(d=T("tabbedBoardMenu"))?d.get("tabbed"):void 0)&&s.append(r('<span class="icon-lg">').addClass("icon-"+c)),o.append(n),i=this.$(".js-board-menu-title-extra").empty(),(null!=(p=T("tabbedBoardMenu"))?p.get("tabbed"):void 0)&&"function"==typeof m.setExtraTarget&&m.setExtraTarget(i),null!=t&&r(".board-menu-content-frame").one("transitionend webkitTransitionEnd",function(e){return function(e){return t(m)}}(this)),this.defer(function(t){return function(){return null!=e?n.removeClass(e):void 0}}(this)),m.delegateEvents(),this},t.prototype.pushView=function(e,t,n){var o,i,a,s,u,c,l,d,p,h,m,f,g;null==t&&(t={}),null==n&&(n={}),o=n.animate,f=n.showSidebar,null==o&&(o=!0),null==f&&(f=!0),g=this.viewNamed(e,t),(null!=(l=T("tabbedBoardMenu"))?l.get("tabbed"):void 0)&&this.canRestoreTo(e)&&("default"===e?_.unset(this._lastViewKey()):_.set(this._lastViewKey(),e)),a=null!=(d=null!=(p=this.hackySidebarLifetimeEvents)&&null!=(h=p[e])?h.didBecomeVisible:void 0)?d:function(){},u=g===this.topSidebarView(),c=this.model.viewState.get("showSidebar"),c?u?a(g):i=a:r(".board-menu").one("transitionend webkitTransitionEnd",function(e){return function(e){return a(g)}}(this)),f&&!c&&this.model.viewState.setShowSidebar(!0),u||(this.viewStack.push({name:e,view:g,options:t}),s=o?(null!=(m=T("tabbedBoardMenu"))?m.get("tabbed"):void 0)&&g.isTopLevelTab?"is-left-of-frame":"is-right-of-frame":void 0,this.renderView(s,i),y.hide())},t.prototype.popView=function(){var e,t;if(1!==this.viewStack.length){if(t=null!=(e=this.topSidebarViewOptions())?e.resetTo:void 0)return this.resetTo(t);this.topSidebarView().remove(),this.viewStack.pop(),this.renderView("is-left-of-frame"),y.hide(),O("Board Menu","Go Back a View")}},t.prototype.resetTo=function(e,t){var n;for(null==t&&(t={}),n=t.animate,null==n&&(n=!0);1!==this.viewStack.length;)this.viewStack.pop();e&&this.pushView(e,{},t),this.renderView(n?"is-left-of-frame":void 0),y.hide(),O("Board Menu","Reset to "+e+" view")},t.prototype.hideSidebar=function(){this.model.viewState.setShowSidebar(!1)},t}(x)},{}],380:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),i=e(100),a=e(22),s=e(133),u=e(549),c=e("underscore"),d=e(546),l=e(104),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="filter cards",t.prototype.viewIcon="filter",t.prototype.isTopLevelTab=!0,t.prototype.className="board-menu-content-frame",t.prototype.initialize=function(){return this.listenTo(this.model.board,"change:labelNames change:memberships",this.renderFilterOptions),this.listenTo(this.model,"change",this.renderFilterOptions)},t.prototype.events={"click .js-toggle-label-filter":"toggleLabelFilter","click .js-select-member":"toggleMemberFilter","click .js-show-all-labels":"showAllLabels","click .js-show-all-members":"showAllMembers","click .js-clear-all":"clearFilter","click .js-due-filter":"toggleDateFilter","click .js-mode-filter":"toggleModeFilter","mouseenter .js-filter-search-results li":"hoverSelect","mouseenter .js-clear-all":"clearAllSelected","mouseenter .js-show-all-members":"clearAllSelected","keydown .js-input":"keyDownEvent","keyup .js-input":"keyUpEvent"},t.prototype.render=function(){var e;return this.isFiltering=!1,e=this.model.toJSON(),this.$el.html(d.fill("filter_cards",e)),this.renderFilterOptions(),this},t.prototype.renderFilterOptions=function(){var e,t,n,r,o,i,a;return e=this.model.toJSON({board:!0,expanded:!0}),n=!c.isEmpty(e.labels),r=!c.isEmpty(e.members),t=this.model.get("title")&&(n||r),t?(e.limitMembers=!1,e.limitLabels=!1):(o=6,(null!=(i=this.model.get("limitMembers"))?i:!0)&&(e.members.length===o+1?e.limitMembers=!1:(e.remainingMembers=Math.max(0,e.members.length-o),e.members=c.first(e.members,o),e.limitMembers=e.remainingMembers>0)),(null!=(a=this.model.get("limitLabels"))?a:!0)&&(e.labels.length===o+1?e.limitLabels=!1:(e.remainingLabels=Math.max(0,e.labels.length-o),e.labels=c.first(e.labels,o),e.limitLabels=e.remainingLabels>0))),c.extend(e,{filtering:t,showHelper:!t,showLabels:!t||n,showMembers:!t||r,showDueTimes:!t,showMatchMode:!t,isFiltering:this.model.isFiltering(),labels:e.labels.map(function(e){var t;return t=e.color?l(["labels",e.color]):"",c.extend({defaultColorName:t},e)})}),this.$(".js-filter-search-results").html(d.fill("filter_cards_search_results",e,{},{member:d.member,select_member:d.select_member})),null===this.model.get("title")&&this.$(".js-input").val(""),this},t.prototype.keyDownEvent=function(e){var t,n,r,o;r=i.getKey(e),(r===a.Enter||r===a.ArrowUp||r===a.ArrowDown)&&(s.stop(e),o=".item, .label-list-item",t=this.$(o),n=t.filter(".selected").first(),r===a.Enter?n.find("a").click():(r===a.ArrowUp||r===a.ArrowDown)&&(0===n.length?t.first().addClass("selected"):s.navMenuList(this.$el,o,r)))},t.prototype.keyUpEvent=function(e){var t;return t=i.getKey(e),t!==a.Escape&&t!==a.Enter&&t!==a.ArrowUp&&t!==a.ArrowDown?this.model.save({title:this.$(".js-input").val(),limitMembers:!0,limitLabels:!0}):void 0},t.prototype.showAllMembers=function(e){s.stop(e),this.model.save("limitMembers",!1)},t.prototype.showAllLabels=function(e){s.stop(e),this.model.save("limitLabels",!1)},t.prototype._clearAndFocusInput=function(){return this.model.save({title:""}),this.$(".js-input").val("").focus()},t.prototype.toggleLabelFilter=function(e){var t,n;return s.stop(e),n=r(e.target).closest("a").attr("data-idlabel"),t=this.model.toJSON({expanded:!0}),c.isEmpty(t.labels)||this._clearAndFocusInput(),this.model.toggleIdLabel(n)},t.prototype.toggleMemberFilter=function(e){var t,n;return s.stop(e),n=r(e.target).closest("a").attr("idMember"),t=this.model.toJSON({expanded:!0}),c.isEmpty(t.members)||this._clearAndFocusInput(),s.stop(e),this.model.toggleMember(n)},t.prototype.toggleDateFilter=function(e){var t;return s.stop(e),t=r(e.target).closest("a").attr("time"),this.model.get("due")===t?this.model.save("due",null):this.model.save("due",t)},t.prototype.toggleModeFilter=function(e){var t;return s.stop(e),t=r(e.target).closest("a").attr("mode"),this.model.get("mode")!==t?this.model.save("mode",t):void 0},t.prototype.clearFilter=function(e){return this.model.clear()},t.prototype.clearAllSelected=function(){return this.$("li").removeClass("selected")},t.prototype.hoverSelect=function(e,t){return this.clearAllSelected(),s.selectMenuItem(r(e.currentTarget).closest("ul"),"li",r(e.currentTarget))},t}(u)},{}],381:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(388),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.viewTitleKey="add member permissions",t.prototype.getTemplate=function(){return"board_menu_invitations"},t.prototype.getPerm=function(){return"invitations"},t}(o)},{}],382:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h;s=e("react"),u=e("underscore"),o=void 0,t(function(){return o=e(222)}),i=e(15),d=s.DOM.div,h=e(51),c=[];for(p in i)l=i[p],"default"===l.type&&(c=c.concat({key:p,name:p,color:l.color}));a=function(e){var t,n,r;return r=e.setBackgroundColor,n=e.name,t=e.color,d({onClick:function(){return h("Board Menu","Change Background",n),r(n,t)},className:"board-backgrounds-section-tile"},d({className:"image",style:{backgroundColor:t}}))},n.exports=s.createClass({displayName:"ColorsView",render:function(){var e;return e=this.props.setBackgroundColor,d({},c.map(function(t){return s.createElement(a,u.extend({setBackgroundColor:e},t))}))}})},{}],383:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v;s=e("react"),p=s.DOM,c=p.div,l=p.input,m=p.span,d=e(104),u=e("underscore").debounce,h=e(236),v=h.unsplashApi,f=h.toJson,g=e(51),a=e(384),r=250,o=317099,i=function(){var e,t;return e=Math.ceil(screen.height/112*2),t=Math.ceil(1.5*e),t%2&&t++,t}(),t.exports=s.createClass({displayName:"PhotosView",getInitialState:function(){var e;return e=function(e){return{connectionError:!1,id:e,images:[],isLoading:!1,marker:null,maxPage:1,page:1}},{collections:[e(o),e("search")],defaultCollectionActive:!0,defaultCollectionShowTitle:!1,queueID:0,searchTerm:null}},componentWillMount:function(){return this.debouncedGetUnsplashBackgrounds=u(this.getUnsplashBackgrounds,r)},componentDidMount:function(){return this.getUnsplashBackgrounds(o)},render:function(){var e,t,n,r,i,a;return i=this.state,e=i.boardId,t=i.collections,n=i.defaultCollectionActive,r=i.defaultCollectionShowTitle,a=i.searchTerm,c({className:"board-backgrounds-photos"},c({className:"search-photos"},l({onChange:this.onSearchInputChange,placeholder:d(["background photos","photos"])}),m({className:"icon-lg icon-search"})),c({className:"board-backgrounds-list-observer",ref:this.bindObserver},a?this.renderList("search"):void 0,r?c({className:"collection-title"},d(["background photos","top picks"])):void 0,n?this.renderList(o):void 0))},renderList:function(e){var t,n,r,o,i,u,c,l;return t=this.props.boardId,n=this.state.collections,l=n.filter(function(t){return t.id===e})[0],r=l.connectionError,o=l.images,i=l.isLoading,u=l.maxPage,c=l.page,s.createElement(a,{boardId:t,collectionID:e,connectionError:r,images:o,isLoading:i,maxPage:u,page:c,registerMarker:this.registerMarker(e)})},onSearchInputChange:function(e){var t,n;return t=this.state.collections,n=e.target.value.trim(),this.setState({collections:t.map(function(e){return"search"===e.id&&(e.images=[],e.isLoading=!0),e}),defaultCollectionActive:!n,defaultCollectionShowTitle:!1,searchTerm:n}),n?this.debouncedGetUnsplashBackgrounds("search"):void 0},nextPage:function(e){var t,n;return t=this.state.collections,n=t.filter(function(t){return t.id===e})[0].page,this.getUnsplashBackgrounds(e,n+1)},updateCollection:function(e,t,n){var r,o,i;return r=this.state.collections.map(function(r){return r.id===e&&(r.connectionError=!1,r.images=r.images.concat(t),r.isLoading=!1,r.maxPage=n),r}),o=!0,i=!1,"search"===e&&(o=!r.filter(function(e){return"search"===e.id})[0].images.length,i=o),this.setState({collections:r,defaultCollectionActive:o,defaultCollectionShowTitle:i})},showErrorInCollection:function(e){return this.setState({collections:this.state.collections.map(function(t){return t.id===e&&(t.connectionError=!0,t.isLoading=!1),t})})},getUnsplashBackgrounds:function(e,t){var n,r,o,a;return null==t&&(t=1),o=this.state,n=o.collections,r=o.queueID,a=o.searchTerm,r++,this.setState({queueID:r,collections:n.map(function(n){return n.id===e&&(n.page=t,n.isLoading=!0),n})}),("search"===e?v.search.all(a,t,i).then(f).then(function(t){return function(n){var o;return o=n.photos,t.state.queueID===r?t.updateCollection(e,o.results,Math.ceil(o.total/i)):void 0}}(this)):v.collections.getCollectionPhotos(e,t,i,"latest").then(f).then(function(n){return function(r){var o;return o=t+1,r.length<i&&(o=t),n.updateCollection(e,r,o)}}(this))).catch(function(t){return function(){return t.showErrorInCollection(e)}}(this))},registerMarker:function(e){return function(t){return function(n){var r;if(n)return r=t.state.collections.map(function(t){return t.id===e&&(t.marker=n),t}),t.setState({collections:r}),t.observer?t.bindMarkers():void 0}}(this)},bindObserver:function(e){var t,n;if(!this.observer&&e)return n=this.state.collections,t=function(e){return function(t){var r,o,i,a,s,u;for(u=[],i=0,s=t.length;s>i;i++)o=t[i],a=o.isIntersecting||o.intersectionRatio,r=n.filter(function(e){return e.marker===o.target})[0],a&&!r.isLoading?u.push(e.nextPage(r.id)):u.push(void 0);return u}}(this),this.observer=new IntersectionObserver(t,{root:e}),this.bindMarkers()},bindMarkers:function(){var e,t,n,r,o;for(t=this.state.collections,this.observer.disconnect(),o=[],n=0,r=t.length;r>n;n++)e=t[n],e.marker?o.push(this.observer.observe(e.marker)):o.push(void 0);return o}})},{}],384:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m;s=e("react"),p=s.DOM,c=p.a,l=p.div,h=p.span,d=e(104),i=void 0,t(function(){return i=e(222)}),m=e(51),a="?w=2560&h=2048&q=90",o="?utm_source=trello&utm_medium=referral&utm_campaign=api-credit",u=8,n.exports=s.createClass({displayName:"PhotosList",getInitialState:function(){return{uploadingImageID:null}},shouldComponentUpdate:function(e,t){var n,r,o,i;return o=this.props,n=o.images,r=o.isLoading,i=this.state.uploadingImageID,n.length!==e.images.length||r!==e.isLoading||i!==t.uploadingImageID},render:function(){var e,t,n,r,o,i,a,s,u,c,p;return u=this.props,e=u.boardId,t=u.collectionID,n=u.connectionError,r=u.images,o=u.isLoading,a=u.maxPage,s=u.page,c=a>s,i=o?"logo-loading active":"logo-loading",p=r.map(this.thumbMap),c&&(p=this.addMarker(p)),l({className:"board-backgrounds-list"},p.length?p:"search"!==t||o||n?void 0:l({className:"no-results"},d(["background photos","no results"])),n?l({className:"error"},d(["background photos","connection error unsplash"])):void 0,l({className:i}))},thumbMap:function(e,t){var n;return n=this.state.uploadingImageID,l({className:"board-background-select",key:["thumb",t,e.id].join(":"),onClick:this.setUnplashBackground(e)},h({className:"background-box",style:{backgroundImage:"url("+e.urls.thumb+")"}},n===e.id?l({className:"uploading"},h({className:"spinner small u-float-left"}),d(["templates","board_background_selection","uploading-ellipsis"])):c({className:"attribution",href:e.user.links.html.replace(/^http\:\/\//,"https://")+o,target:"_blank",title:e.user.name,onClick:function(e){return e.stopPropagation()}},e.user.name)))},setUnplashBackground:function(e){return function(t){return function(){var n;return n=t.props.boardId,m("Board Menu","Change Background","unsplash-"+e.id),t.setState({uploadingImageID:e.id}),i({url:"/1/boards/"+n+"/prefs/background",type:"post",data:{url:e.urls.raw+a}}).finally(function(){return t.setState({uploadingImageID:null})})}}(this)},addMarker:function(e){var t,n;return n=this.props.registerMarker,t=l({key:"marker",className:"scroll-marker",ref:n}),e.splice(-u,0,t),e}})},{}],385:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(382),a=e(383),s=e("react"),u=e("react-dom"),c=e(549),i={colors:o,photos:a},l=function(e){var t,n,r;n={};for(t in e)r=e[t],t.indexOf("background")>-1&&(n[t]=r);return n},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey=function(){return"colors"===this.options.component?"change background colors":"change background photos"},t.prototype.viewTitleArguments={unsplashUrl:"https://unsplash.com?utm_source=trello&utm_medium=referral&utm_campaign=api-credit"},t.prototype.className="board-menu-content-frame",t.prototype.initialize=function(){this.listenTo(this.model,"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t;return t={boardId:this.model.id,backgroundPrefs:l(this.model.attributes.prefs)},"colors"===this.options.component&&(t.setBackgroundColor=function(e){return function(t,n){return e.model.set({prefs:{background:t,backgroundColor:n,backgroundImage:null,backgroundImageScaled:null}}).setPref("background",t)}}(this)),e=s.createElement(i[this.options.component],t),u.render(e,this.el),this},t}(c)},{}],386:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e(559),o=e(35),i=e(15),a=e(162),c=e(40),l=e(395),d=e(396),p=e(133),h=e(549),m=e("underscore"),v=e(546),b=e(51),f=e(104),u=e(41),g=e(960),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="change background",t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-bg-colors":"openBackgroundColors","click .js-bg-photos":"openBackgroundPhotos","change .js-upload-image":"setUploadImage",'click a[href="/business-class"]':function(){return b("Board Menu","Open Business Class Promo - via Change Background")}},t.prototype.initialize=function(e){var n;this.sidebarView=e.sidebarView,t.__super__.initialize.apply(this,arguments),this.makeDebouncedMethods("render","renderCustomBackgrounds"),this.listenTo(o.me().boardBackgroundList,"change add remove reset",this.renderCustomBackgroundsDebounced),(o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(n=this.model.getOrganization())?n.isFeatureEnabled("customBoardBackgrounds"):void 0))&&c.loadMemberCustomBackgrounds(o.myId()).done()},t.prototype.fillBackgroundList=function(e,t,n){var r;null==n&&(n=l),e.find(".js-select-background:not(.js-uploader)").remove(),this.appendSubviews(function(){var e,o,i;for(i=[],e=0,o=t.length;o>e;e++)r=t[e],i.push(this.subview(n,r,{board:this.model}));return i}.call(this),e)},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.enabled_additionalBackgrounds=o.me().isFeatureEnabled("additionalBoardBackgrounds")||(null!=(t=this.model.getOrganization())?t.isFeatureEnabled("additionalBoardBackgrounds"):void 0),e.enabled_customBoardBackgrounds=o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(n=this.model.getOrganization())?n.isFeatureEnabled("customBoardBackgrounds"):void 0),e.idMember=o.myId(),this.$el.html(v.fill("board_change_background",e)),this.renderCustomBackgrounds(),this},t.prototype.renderCustomBackgrounds=function(){var e,t,n,r,i;return n=o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(i=this.model.getOrganization())?i.isFeatureEnabled("customBoardBackgrounds"):void 0),e=this.$(".js-custom-list"),n?(r=this.modelCache.get("Member",o.myId()),t=r.boardBackgroundList.chain().filter(function(e){return"custom"===e.get("type")}).sortBy("id").reverse().value(),this.fillBackgroundList(e,t,d),e.find(".js-uploader").prependTo(e)):e.append(g({upsellEnabled:!u.get("dontUpsell")})),this},t.prototype.uploadBackgroundsAndAddPreviews=function(e){var t,n,i,a,s;for(s=[],n=i=0,a=e.length;a>i;n=++i)t=e[n],s.push(function(e){return function(n){var i,a,s;return s=new FileReader,i={file:t},p.validFileSize(t)?(a=new FormData,a.append("token",o.myToken()),a.append("file",t),s.onload=function(t){return e.modelCache.get("Member",o.myId()).boardBackgroundList.create({type:"custom",fullSizeUrl:t.target.result},{data:a,processData:!1,contentType:!1,error:function(t){return t.set("error","Failed"),e.setTimeout(function(){return t.destroy()},5e3)},success:function(t){var n;return n=e.model,m.extend(n.attributes.prefs,{backgroundColor:t.get("color"),backgroundImage:t.get("fullSizeUrl"),backgroundImageScaled:t.get("scaled"),backgroundTile:t.get("tile"),backgroundBrightness:t.get("brightness")}),n.setPref("background",t.id)}})},s.readAsDataURL(t)):void r.flash("file too large","error")}}(this)(n));return s},t.prototype.setUploadImage=function(e){var t,n;return p.stop(e),t=this.$(".js-upload-image"),b("Board Menu","Upload Custom Background"),null==t.prop("files")&&t.val()?void p.uploadFile(o.myToken(),t,function(){}):(n=t[0].files,void(n.length>0&&this.uploadBackgroundsAndAddPreviews(n)))},t.prototype.openBackgroundColors=function(e){p.stop(e),this.sidebarView.pushView("backgroundColors",{component:"colors"}),b("Board Menu","Open Background Colors")},t.prototype.openBackgroundPhotos=function(e){p.stop(e),this.sidebarView.pushView("backgroundPhotos",{component:"photos"}),b("Board Menu","Open Background Photos")},t}(h)},{}],387:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(388),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.viewTitleKey="commenting permissions",t.prototype.getTemplate=function(){return"board_menu_commenting"},t.prototype.getPerm=function(){return"comments"},t}(o)},{}],388:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),o=e(517),a=e(569),s=e(133),u=e(549),c=e(546),l=e(51),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="change permissions",t.prototype.initialize=function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.events={"click .js-select":"selectPerm"},t.prototype.render=function(){var e,t,n,r;return e=this.model.toJSON({prefs:!0,url:!0}),e.cardCovers=e.prefs.cardCovers,t=this.model.getOrganization(),e.hasOrg=null!=(null!=t?t.id:void 0),e.orgCanSee=e.hasOrg&&("public"===(n=this.model.getPref("permissionLevel"))||"org"===n),e.premium=null!=t?t.isFeatureEnabled("observers"):void 0,e.voting_showObservers=(e.premium||e.voting_observers)&&e.hasOrg,e.comments_showObservers=(e.premium||e.comments_observers)&&e.hasOrg,e.pLevelClass=o.getPermLevelIconClassForBoard(this.model),(null!=t?t.owned():void 0)?(e.orgOwner=!0,e.orgName=t.get("displayName"),this.model.owned()||(e.setOrgNull=!0)):this.model.owned()||(e.noEditOrg=!0),r=this.getTemplate(),this.$el.html(c.fillMenu(r,e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.selectPerm=function(e){var t,n,o;s.stop(e),l("Board","Change "+this.getPerm()),t=r(e.target).closest(".js-select"),t.hasClass("disabled")||t.closest(".js-disabled").length||(n=this.getPerm(),o=t.attr("name"),this.model.setPref(n,o),this.model.save(),a.popView())},t}(u)},{}],389:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(517),i=e(375),s=e(569),u=e(133),c=e(549),p=e(546),h=e(51),d=e(104),l=e(770),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey=function(){return this.model.owned()?"change visibility":"visibility"},t.prototype.tagName="ul",t.prototype.initialize=function(){this.listenTo(this.model,"change",this.render)},t.prototype.className="pop-over-list",t.prototype.events={"click .js-select":"selectVis"},t.prototype.render=function(){var e;return e=this.model.getOrganization(),this.$el.html(l({canChange:this.model.owned(),current:this.model.getPref("permissionLevel"),hasSuperAdmins:null!=e?e.isFeatureEnabled("superAdmins"):void 0,hasOrg:null!=e,orgName:null!=e?e.get("displayName"):void 0,privateRestricted:null!=e&&!(null!=e?e.canSetVisibility("private"):void 0),orgRestricted:null!=e&&!(null!=e?e.canSetVisibility("org"):void 0),publicRestricted:null!=e&&!(null!=e?e.canSetVisibility("public"):void 0)})),this},t.prototype.selectVis=function(e){var t,n;if(u.stop(e),t=r(e.target).closest(".js-select"),!t.hasClass("disabled")&&!t.closest(".js-disabled").length){if(n=t.attr("name"),"org"===n&&!this.model.getOrganization())return void s.pushView({view:i,options:{model:this.model,modelCache:this.modelCache,disableNone:!0}});this.model.setPref("permissionLevel",n),this.model.save(),h("Board","Change Board Visibility",n),s.popView()}},t}(c)},{}],390:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),o=e(561),a=e(133),s=e(549),u=e(546),c=e(51),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="background options",t.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},t.prototype.events={"click .js-delete-background":"deleteBackground","click .js-select-option":"selectOption"},t.prototype.render=function(){var e,t;return t=this.model.toJSON(),t.tile=this.model.get("tile"),e=this.model.get("brightness"),t.brightnessLight="light"===e,t.brightnessDark="dark"===e,this.$el.html(u.fill("board_background_options",t)),this},t.prototype.selectOption=function(e){var t,n;t=r(e.target).closest(".js-select-option"),null!=t.attr("data-board-brightness")?this.model.update("brightness",t.attr("data-board-brightness")):null!=t.attr("data-background-display-type")&&(n=t.attr("data-background-display-type"),this.model.update("tile","tile"===n))},t.prototype.deleteBackground=function(e){return a.stop(e),o.pushView("delete background",{elem:r(e.target).closest(".js-delete-background"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),e.remove(),c("Board Menu","Change Background","Delete Uploaded Background")}}(this)})},t}(s)},{}],391:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),d=e("underscore"),o=e(559),i=e(35),a=e(561),u=e(40),c=e(133),l=e(549),h=e(764),p=e(104),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="add cards via email",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.modelCache,"add:List remove:List change:List:closed reset:List",this.frameDebounce(this.render)),this.listenTo(this.model,"change:myPrefs",this.frameDebounce(this.render)),this.allowEmail=!0,null==this.model.getPref("emailKey")?this.model.generateEmailKey():void 0},t.prototype.events={"change .js-select-position":"updatePosition","change .js-select-list":"updateList","click .js-generate-address":"generateAddress","click .js-send-address":"sendAddressEmail","click .js-autofocus":"focusInput"},t.prototype.render=function(){var e,t,n,r,o,a;return this.model.canComment(i.me())?(t=this.model.getPref("idEmailList"),r=this.model.listList.models.map(function(e){return{id:e.id,name:e.get("name")}}),a=null!=(n=d.findWhere(r,{id:t}))?n.name:null!=(n=this.modelCache.get("List",t))&&n.get("closed")?(e=p("archived list",{listName:n.get("name")}),r.unshift({id:n.id,name:e}),e):(null!=t?u.loadArchivedLists(this.model.id).then(function(e){return function(){return null!=e.modelCache.get("List",t)?e.render():void 0}}(this)):void 0,p("unknown list placeholder")),null==t&&r.unshift({name:p("unknown list placeholder"),selected:!0}),this.$el.html(h({commentsEnabled:!0,email:null!=(o=this.model.getPref("fullEmail"))?o:"",lists:r.map(function(e){return{id:e.id,name:e.name,selected:e.id===t}}),listName:a,positionName:p(["email position",this.model.getPref("emailPosition")]),position:this.model.getPref("emailPosition")}))):this.$el.html(h({commentsEnabled:!1})),this},t.prototype.focusInput=function(e){r(e.target).focus().select()},t.prototype.updateValue=function(e,t){var n;return n=this.$el.find(e).val(),null!=n&&n!==this.model.getPref(t)?this.model.setPref(t,n):void 0},t.prototype.updatePosition=function(){return this.updateValue(".js-select-position","emailPosition")},t.prototype.updateList=function(){return this.updateValue(".js-select-list","idEmailList"),this.allowEmail=!0},t.prototype.generateAddress=function(e){c.stop(e),a.pushView("regenerate email address",{model:this.model,confirmBtnClass:"negate",popOnClick:!0,fxConfirm:function(e){return function(t){return e.model.set({"myPrefs/emailKey":null}),e.allowEmail=!0,e.model.generateEmailKey()}}(this)})},t.prototype.sendAddressEmail=function(e){c.stop(e),this.allowEmail&&(this.allowEmail=!1,this.model.api({method:"emailKey/message",type:"post"},function(e){return function(e){return e?o.show("could not send email","error","email",5e3):o.flash("email sent","confirm")}}(this)))},t}(l)},{}],392:[function(e,t,n){var r,o,i,a,s,u;r=e(536),o=e("react"),a=e(541)("plugin_auth"),u=e("xtend"),i=e("underscore"),s=a.renderable(function(e){var t,n,r,o,i,s,u,c;return o=null!=e?e:{},c=o.supportsSettings,u=o.supportsAuth,r=o.hasPersonalSettings,t=o.authStatus,n=o.authorize,i=o.removeData,s=o.showSettings,a.ul(".pop-over-list",function(){return!u||t&&t.authorized?(c&&a.li({onClick:s},function(){return a.a(function(){return a.format("edit-power-up-settings")})}),r?a.li({onClick:i},function(){return a.a(function(){return a.format("remove-personal-settings")})}):void 0):a.li({onClick:n},function(){return a.a(function(){return a.format("authorize-account")})})})}),t.exports=o.createClass({displayName:"PluginSettings",render:function(){return s(this.props)}})},{}],393:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(549),s=e(546),a=e(38).locales,r=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments);
}return u(t,e),t.prototype.initialize=function(e){this.powerUp=e.powerUp,this.isGrandfathered=e.isGrandfathered},t.prototype.getViewTitle=function(){return this.powerUp.displayName},t.prototype.render=function(){var e;return e={about:s.fill(this.powerUp.aboutTemplate),showScreenshots:r.matches(a[0],"en"),screenshots:this.powerUp.screenshots,displayName:this.powerUp.displayName,isGrandfathered:this.isGrandfathered},this.$el.html(s.fill("power_up_item_details",e)),this},t}(i)},{}],394:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(569),i=e(133),a=e(549),s=e(546),u=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="rename board",t.prototype.events={"click .js-rename-board":"rename","submit form":"rename"},t.prototype.render=function(e){var t;return t={},t.boardName=this.model.get("name"),this.$el.html(s.fill("popover_rename_board",t)),this},t.prototype.rename=function(e){var t,n;return i.stop(e),t=this.$(".js-board-name"),n=t.val().trim(),""===n?void t.focus().select():(u("Board","Successfully Rename Board"),this.model.update("name",n),void r.hide())},t}(a)},{}],395:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(133),i=e(549),a=e("underscore"),s=e(546),u=e(51),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:error",this.render)},t.prototype.className="board-background-select js-select-background",t.prototype.events={click:"selectBackground","click .js-background-attribution":"clickAttribution"},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.pending=null==this.getId()&&null==e.error,null==e.color&&(e.backgroundImageThumbnail=null!=(t=null!=(n=o.previewBetween(this.model.get("scaled"),90,60,600,400))?n.url:void 0)?t:this.model.get("fullSizeUrl")),this.$el.html(s.fill("board_background_selection",e)),this.$el.toggleClass("is-still-uploading-background",e.pending),this},t.prototype.clickAttribution=function(e){return e.stopPropagation(),u("Board Menu","Change Background","Clicked Attribution")},t.prototype.getId=function(){return this.model.get("name")},t.prototype.selectBackground=function(e){var t,n,r;o.stop(e),null!=this.getId()&&(t=this.options.board,a.extend(t.attributes.prefs,{backgroundColor:this.model.get("color"),backgroundImage:this.model.get("fullSizeUrl"),backgroundImageScaled:this.model.get("scaled"),backgroundTile:null!=(n=this.model.get("tile"))?n:!1,backgroundBrightness:null!=(r=this.model.get("brightness"))?r:"unknown"}),t.setPref("background",this.getId()),u("Board Menu","Change Background",this.getId()))},t}(i)},{}],396:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(390),o=e(569),i=e(395),s=e(133),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:id",this.render)},t.prototype.events={"click .js-options":"openOptions",click:"selectBackground"},t.prototype.openOptions=function(e){return s.stop(e),o.toggle({elem:this.$(".js-options"),view:new r({model:this.model,modelCache:this.modelCache})})},t.prototype.getId=function(){return this.model.id},t}(i)},{}],397:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C=function(e,t){function n(){this.constructor=e}for(var r in t)x.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},x={}.hasOwnProperty;r=e("jquery"),o=e(559),i=e(35),s=e(729),u=e(564),c=e(40),l=e("bluebird"),d=e(216),m=e(32),h=e(731),f=e(133),g=e(549),v=e("underscore"),_=e(546),k=e(51),y=e(104),b=e(79),a=e(41),w=e(960),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.viewTitleKey="stickers",t.prototype.viewIcon="sticker",t.prototype.className="board-menu-content-frame",t.prototype.isTopLevelTab=!0,t.prototype.initialize=function(){return b(i.isLoggedIn(),"Can't show the StickerPickerView when not logged in!"),this.me=i.me(),c.loadMemberCustomStickers(this.me.id).done(),this.listenTo(this.me.customStickerList,"change add remove reset",this.renderCustomStickers)},t.prototype.events={"change .js-upload-image":"setUploadImage",'click a[href="/business-class"]':function(){return k("Board Menu","Open Business Class Promo - via Sticker Picker")}},t.prototype.render=function(){return this.$el.html(_.fill("sticker_select")),this.renderStandardStickers(),this.renderPremiumStickers(),this.renderCustomStickers(),this.defer(function(){return u.refreshDraggableStickers()}),this},t.prototype._getStickers=function(e){var t;return t=m[e].premium,m[e].stickers.map(function(e){return new d(v.extend({premium:t},e),{modelCache:this.modelCache})})},t.prototype._loadStickers=function(e){var t,n,o;return o="sticker-list-loading",e.addClass(o),n=e.find(".sticker-select-image").get(),t=n.map(function(e){var t;return t=r(e),new l(function(e){return t.load(e),t.error(e)})}),l.all(t).then(function(){return e.removeClass(o)}).done()},t.prototype.renderStandardStickers=function(){var e,t;return e=this.$(".js-standard-sticker-list"),t=this._getStickers("standard").map(function(e){return function(t){return e.subview(h,t)}}(this)),this.appendSubviews(t,e),this._loadStickers(e),this},t.prototype.renderPremiumStickers=function(){var e,t,n,o,i,s,u,c,l;i=null!=(c=this.model.getOrganization())?c:null,e=this.$(".js-premium-stickers"),o=this.me.isFeatureEnabled("additionalStickers")||(null!=i?i.isFeatureEnabled("additionalStickers"):void 0);for(s in m)u=m[s].premium,u&&(t=r(_.fill("sticker_pack_selection_list",{displayName:y(["sticker packs",s])})),n=t.filter(".js-sticker-list"),l=this._getStickers(s).map(function(e){return function(t){return e.subview(h,t,{org:i})}}(this)),this.appendSubviews(l,n),this._loadStickers(n),e.append(t),o||n.append(w({upsellEnabled:!a.get("dontUpsell")})));return this},t.prototype.renderCustomStickers=function(){var e,t,n,r,o;return n=null!=(r=this.model.getOrganization())?r:null,e=this.$(".js-custom-sticker-list"),e.children().detach(),t=this.me.isFeatureEnabled("customStickers")||(null!=n?n.isFeatureEnabled("customStickers"):void 0),t?(o=this.me.customStickerList.map(function(e){return function(t){return e.subview(s,t,{org:n})}}(this)),this.appendSubviews(o,e)):e.append(w({upsellEnabled:!a.get("dontUpsell")})),e.append(_.fill("sticker_select_item_upload",{id:this.me.id})),this.defer(function(){return u.refreshDraggableStickers()}),this},t.prototype.setUploadImage=function(e){var t,n;return f.stop(e),t=this.$(".js-upload-image"),null==t.prop("files")&&t.val()?void f.uploadFile(i.myToken(),t,function(){}):(n=t[0].files,void(n.length>0&&this.uploadStickers(n)))},t.prototype.uploadStickers=function(e){v.each(e,function(e){return function(t){var n,r,a;return a=new FileReader,n={file:t},f.validFileSize(t)?(r=new FormData,r.append("token",i.myToken()),r.append("file",t),a.onload=function(t){var n;return n=t.target.result,e.me.customStickerList.create({url:n},{data:r,processData:!1,contentType:!1,error:function(t){return t.set("error","Failed"),e.setTimeout(function(){return t.destroy()},5e3)}})},a.readAsDataURL(t)):void o.flash("file too large","error")}}(this))},t}(g)},{}],398:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),i=e(569),a=e(133),s=e(549),u=e("underscore"),c=e(546),l=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="add list",t.prototype.events={"change .js-select-list-pos":"renderValue","click .js-add-list":"addList","submit form":"addList","click .js-cancel":"cancel"},t.prototype.initialize=function(e){return this.didAddList=e.didAddList,t.__super__.initialize.apply(this,arguments)},t.prototype.getLists=function(){return this.lists=this.model.listList,this.listsLength=this.lists.length+1},t.prototype.render=function(){var e;return e=this,this.$el.html(c.fill("popover_add_list")),this.setTimeout(function(e){return function(){return e.getClosestListPos(),e.getLists(),e.updateListList()}}(this),10),this},t.prototype.getClosestListPos=function(){var e,t,n;return t=r(".js-list"),n=[],this.closestListIdx=0,t.each(function(e){return function(o){var i;return i=parseInt(Math.abs(r(t[o]).offset().left+r(t[o]).width()/2-e.$el.offset().left),10),n.push(i)}}(this)),this.closestListIdx=u.indexOf(n,u.min(n)),e=r(t[this.closestListIdx]),e.length>0&&this.$el.offset().left>e.offset().left+e.width()/2&&this.closestListIdx<t.length?this.closestListIdx+=1:void 0},t.prototype.updateListList=function(){var e,t,n,o,i,a,s;for(s=this,e=r(s.el),n=e.find(".js-select-list-pos"),o=i=0,a=this.listsLength;a>=0?a>i:i>a;o=a>=0?++i:--i)r("<option>").val(o).text(o+1).appendTo(n);return t=n.find("option:last"),t=n.find("option:eq("+this.closestListIdx+")"),t.attr("selected","selected"),this.renderValue()},t.prototype.renderValue=function(){var e;e=parseInt(this.$(".js-select-list-pos").val(),10)+1,r(".js-pos-value").text(e.toString())},t.prototype.addList=function(e){var t,n,r,o,s;return a.stop(e),o=this.$(".js-list-name").val().trim(),""===o?void this.$(".js-list-name").focus().select():(t=this.$(".js-select-list-pos"),s=parseInt(t.find("option:selected").val(),10),r=s===this.listsLength-1?!1:!0,n="List"===o?!1:!0,i.hide(),void this.model.listList.create({name:o,pos:this.model.calcPos(s),closed:!1},{success:function(e){return function(t){return n&&r?l("Board","Add List","Successfully Add List - Changed Name, Changed Position"):n?l("Board","Add List","Successfully Add List - Changed Name, Default Position"):r?l("Board","Add List","Successfully Add List - Default Name, Changed Position"):l("Board","Add List","Successfully Add List - Default Name, Default Position"),e.didAddList(t)}}(this)}))},t.prototype.cancel=function(e){a.stop(e),i.hide(),l("Board Menu","Add List Menu","Click Cancel Button")},t}(s)},{}],399:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;a=e(561),s=e(83),l=e(133),c=e("bluebird"),f=e(544)("board_clean_up"),v=e(51),d=e(549),p=e("underscore"),g=f.renderable(function(e){var t,n,r,o,i;return t=e.ageCategories,i=e.lists,n=!p.isEmpty(i),r=!p.isEmpty(t),o=function(e,t){return t&&f.div(".board-clean-up-cards-options",function(){return f.span(".board-clean-up-cards-option.js-select-all",function(){return f.format("select-all")}),f.span(".board-clean-up-cards-option.js-select-none",function(){return f.format("select-none")})}),f.div(".board-clean-up-cards",function(){var n,r,o,i;for(i=[],r=0,o=e.length;o>r;r++)n=e[r],i.push(f.div(".board-clean-up-card",function(){return t&&f.div(function(){return f.span(".board-clean-up-checkbox.js-toggle-checkbox",{"data-checked":"checked","data-card":n.id},function(){return f.icon("check",{class:"board-clean-up-checkbox-check"})})}),f.a(".list-card",{href:n.get("url")},function(){return f.span(".board-clean-up-card-name",function(){return f.text(n.get("name"))})})}));return i})},f.div(".window-header.u-clearfix",function(){return f.span(".window-header-icon.icon-lg.icon-board"),f.div(".window-title",function(){return f.h2(".window-title-text",function(){return f.format("board-clean-up")})})}),f.div(".window-main-col.window-main-col-full",function(){return n&&(f.p(".board-clean-up-explanation",function(){return f.format("it-looks-like-you-have-some-lists-that-havent-been-updated-recently")}),f.table(".board-clean-up-table",function(){return f.tbody(function(){var e,t,n,r,a,u,c,l,d;for(f.tr(function(){return f.th(function(){return f.format("list")}),f.th(function(){return f.format("cards")}),f.th(function(){return f.format("last-updated")}),f.th(function(){})}),d=[],n=0,u=i.length;u>n;n++)l=i[n],r=l.id,c=l.listName,t=l.cards,e=l.cardCount,a=l.lastModified,f.tr(".board-clean-up-top",function(){return f.td(function(){return f.text(c)}),f.td(function(){return f.text(e)}),f.td(function(){return f.text(s.toDateString(a))}),f.td(".board-clean-up-button-cell",function(){return f.button(".board-clean-up-button.js-archive-list",{"data-list":r},function(){return f.format("archive-list")})})}),d.push(f.tr(".board-clean-up-bottom",function(){return f.td({colspan:4},function(){return o(t,!1)})}));return d})})),n&&r&&f.hr(),r&&(f.p(".board-clean-up-explanation",function(){return n?f.format("you-can-also-clean-things-up-by-archiving-cards-that-havent-been-updated-in-a-while"):f.format("you-can-clean-things-up-by-archiving-cards-that-havent-been-updated-in-a-while")}),f.table(".board-clean-up-table",function(){return f.tbody(function(){var e,n,r;f.tr(function(){return f.th(function(){return f.format("cards-updated")}),f.th(function(){return f.format("cards")}),f.th(function(){})}),r=[];for(n in t)e=t[n],f.tr(".board-clean-up-top.js-category-heading",{"data-category":n},function(){return f.td(function(){return f.format(["more-than",n])}),f.td(".js-card-count",function(){return f.text(e.length)}),f.td(".board-clean-up-button-cell",function(){return f.button(".board-clean-up-button.js-archive-category",{"data-category":n},function(){return f.format("archive-selected-cards")})})}),r.push(f.tr(".board-clean-up-bottom.js-category-cards",{"data-category":n},function(){return f.td({colspan:3},function(){return o(e,!0)})}));return r})})),n||r?void 0:f.p(".board-clean-up-explanation",function(){return f.format("it-doesnt-look-like-there-are-any-old-cards-to-clean-up")})})}),m=f.renderable(function(e){var t,n;return t=e.count,n=e.total,f.div(".window-header.u-clearfix",function(){return f.span(".window-header-icon.icon-lg.icon-board"),f.div(".window-title",function(){return f.h2(".window-title-text",function(){return f.format("board-clean-up")})})}),f.div(".window-main-col.window-main-col-full",function(){return f.div(".board-clean-up-progress",function(){return f.format("archiving",{count:t,total:n})})})}),o={threeMonths:{age:l.getMs({days:90})},month:{age:l.getMs({days:30})},week:{age:l.getMs({days:7})}},u=1e3,i=5,h=function(e,t){return function(n){return function(n,r){return r.getAttribute(e)===t}}(this)},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.initialize=function(){this.progress=null,this.aborted=!1,this.makeDebouncedMethods("render"),this.listenTo(this.model.listList,"add remove reset change:closed change:idBoard",this.renderDebounced),this.listenForCards()},t.prototype.events={"click .js-archive-category":"archiveCategory","click .js-archive-list":"archiveList","click .js-toggle-checkbox":function(e){var t;return t=this.$(e.currentTarget),t.is("[data-checked]")?t.removeAttr("data-checked"):t.attr("data-checked","checked"),this._updateCategory(t.closest(".js-category-cards").attr("data-category"))},"click .js-select-all":function(e){var t;return t=this.$(e.currentTarget).closest(".js-category-cards"),t.find(".js-toggle-checkbox").attr("data-checked","checked"),this._updateCategory(t.attr("data-category"))},"click .js-select-none":function(e){var t;return t=this.$(e.currentTarget).closest(".js-category-cards"),t.find(".js-toggle-checkbox").removeAttr("data-checked"),this._updateCategory(t.attr("data-category"))}},t.prototype._updateCategory=function(e){var t,n,r,o,i;return o=h("data-category",e),n=this.$(".js-category-heading").filter(o),t=this.$(".js-category-cards").filter(o),i=t.find(".js-toggle-checkbox:not([data-checked])"),r=t.find(".js-toggle-checkbox[data-checked]"),t.find(".js-select-all").toggleClass("hide",!i.length),t.find(".js-select-none").toggleClass("hide",!r.length),n.find(".js-card-count").text(r.length),n.find(".js-archive-category").toggleClass("hide",!r.length)},t.prototype.listenForCards=function(){return this.listenTo(this.modelCache,"add:Card remove:Card change:Card:closed change:Card:idList",this.renderDebounced)},t.prototype.stopListeningForCards=function(){return this.stopListening(this.modelCache)},t.prototype._ageCategories=function(){var e;return e=this.modelCache.find("Card",function(e){return function(t){return t.get("idBoard")===e.model.id&&t.isVisible()}}(this)),p.chain(o).pairs().map(function(t){var n,r,o,i;return o=t[0],i=t[1],n=i.age,r=e.filter(function(e){return Date.now()-s.parse(e.get("dateLastActivity"))>n}),[o,r]}).filter(function(e){var t,n;return n=e[0],t=e[1],t.length>0}).object().value()},t.prototype.render=function(){var e;return null!=this.progress?(this.$el.html(m(this.progress)),this):(e=this.model.listList.chain().filter(function(e){return e.isOpen()}).map(function(e){var t,n;return n=e.openCards().models,t=p.chain(n).sortBy(function(e){return e.get("dateLastActivity")}).reverse().first().value(),{id:e.id,listName:e.get("name"),cardCount:n.length,cards:n,lastModified:null!=t?t.get("dateLastActivity"):void 0}}).filter(function(e){return null!=e.lastModified&&s.parse(e.lastModified)<Date.now()-l.getMs({days:30})}).sortBy(function(e){return-e.cardCount}).first(5).value(),this.$el.html(g({ageCategories:this._ageCategories(),lists:e})),p.keys(o).forEach(function(e){return function(t){return e._updateCategory(t)}}(this)),this)},t.prototype.archiveCategory=function(e){var t,n,r;return l.stop(e),n=this.$(e.currentTarget).attr("data-category"),r={},this.$(".js-category-cards").filter(h("data-category",n)).find(".js-toggle-checkbox").each(function(e){return function(t,n){var o,i;o=e.$(n),i=o.attr("data-card"),r[i]=o.is("[data-checked]")}}(this)),t=this._ageCategories()[n].filter(function(e){return r[e.id]}),null!=t?a.toggle("archive cards",{elem:e.target,model:this.model,fxConfirm:function(e){return function(r){return v("Board Clean-Up","Archive By Age",n,t.length),e.stopListeningForCards(),e.progress={count:0,total:t.length},e.render(),e.aborted=!1,c.map(t,function(t){var n;if(!e.aborted)return n=Date.now(),c.fromNode(function(e){return t.close(e)}).then(function(){var e,t;return e=Date.now()-n,t=u-e,t>0?c.delay(t):void 0}).then(function(){return e.progress.count++,e.render()})},{concurrency:i}).catch(function(){}).then(function(){return e.progress=null,e.listenForCards(),e.render()}).done()}}(this)}):void 0},t.prototype.archiveList=function(e){var t,n;return l.stop(e),t=this.$(e.currentTarget).attr("data-list"),n=this.model.listList.get(t),v("Board Clean-Up","Archive List",void 0,n.openCards().models.length),n.close()},t.prototype.abort=function(){return this.aborted=!0,this.progress?v("Board Clean-Up","Abort Archive By Age",void 0,this.progress.total-this.progress.count):void 0},t}(d)},{}],400:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(523),a=e(106),s=e(133),u=e(546),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:name change:desc",this.renderDebounced)},t.prototype.events={"click .js-edit-desc":"editDesc"},t.prototype.render=function(){var e,t,n;return t=this.model.get("desc"),n=this.model.get("descData"),e={hasDesc:!!t},this.$el.html(u.fillFromModel("board_desc",this.model,e)),e.hasDesc&&r(this.el).find(".board-description>div.current").html(a.markdownAsHtml(t,{textData:n})),this},t.prototype.editDesc=function(e){s.stop(e),this.edit("desc")},t}(i)},{}],401:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(35),i=e(376),s=e(569),u=e(133),c=e(549),l=e(926),d=e(51),a=e(41),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.getViewTitle=function(){return this.model.getOrganization().get("displayName")},t.prototype.events={"click .js-change-org":"openChangeOrg","click .js-view-org":"viewOrg","click .js-upgrade-to-bc":"trackBcUpgrade"},t.prototype.render=function(){var e,t;return t=this.model.getOrganization(),e=t.toJSON(),e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),e.isOrgMember=t.isMember(r.me()),(null!=t?t.owned():void 0)&&!this.model.owned()&&(e.setOrgNull=!0),e.upsellEnabled=!a.get("dontUpsell"),this.$el.html(l(e)),this},t.prototype.openChangeOrg=function(e){var t,n;u.stop(e),this.model.owned()?(s.pushView({view:i,options:{model:this.model,modelCache:this.modelCache}}),d("Board Header","Change Org from Board Header Org Menu")):(t=this.model.get("idOrganization"),null!=(n=this.modelCache.get("Organization",t))&&n.boardList.remove(this.model),this.model.update("idOrganization",""),s.hide(),d("Board Header","Remove Org from Board Header Org Menu"))},t.prototype.viewOrg=function(){return d("Board Header","View Org From Board Header Org Menu")},t.prototype.trackBcUpgrade=function(){return d("Board Header","Org Menu","Upgrade to Business Class link")},t}(c)},{}],402:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z,R,F,$,U,q,H,W,K,G,J,Q,Y,Z,X,ee,te,ne,re=function(e,t){function n(){this.constructor=e}for(var r in t)oe.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},oe={}.hasOwnProperty;r=e("jquery"),s=e(361),o=e(398),i=e(35),a=e(15),u=e(399),c=e(400),l=e(517),d=e(401),p=e(379),h=e(645),g=e(419),v=e(167),b=e(442),y=e(447),w=e(389),_=e(561),k=e(7),C=e(563),x=e(564),j=e(89),S=e(36),T=e(22),E=e(280),O=e(566),A=e(24),M=e(578),B=e(581),P=e(607),L=e(40),D=e(227),I=e(710),N=e(569),V=e(394),z=e(118),R=e(547),F=e(133),$=e(549),U=e(156),q=e("underscore"),H=e(755),W=e(88),G=e(104),J=e(48),Q=e(136),X=e(546),K=e(757),Y=e(758),Z=e(537),ee=e(51),te=e(56),ne=e(759),f=500,t.exports=m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return re(t,e),t.prototype.className="board-wrapper",t.prototype.events={sortcommit:"sortCommit","click .js-rename-board":"renameBoard","click .js-open-org-menu":"openOrgMenu","click .js-add-board-to-team:not(.no-edit)":"addBoardToTeam","click .js-change-vis":"changeVis","click .js-open-desc":"openDesc","click .js-close-calendar":"toggleCalendar","click .js-calendar":"toggleCalendar","click .js-collection":"toggleOpenCollections","click .js-filter-cards-indicator":"openFilter","click .js-filter-card-clear":"clearFilters","click .js-board-header-subscribed":"openUnsubscribe","click .js-star-board":"toggleStarred","click .js-show-sidebar":"setSidebarShow","click .js-dismiss-warning":function(e){return z.set(this.$(e.currentTarget).attr("data-dismiss"),Date.now()),this.renderBoardWarnings()},"dblclick #board":"dblClickAddListMenu","click .js-reopen":"reopen","click .js-delete":"delete","click .js-clean-up":"showCleanUp",shortcut:"shortcut","prevent-scroll-selection":"preventScrollSelection"},t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.sidebarView=this.subview(p,this.model),this.makeDebouncedMethods("refreshOrganization","render","renderBoardBackground","renderBoardHeader","renderBoardHeaderCalendar","renderBoardHeaderDescription","renderBoardHeaderSubscribed","renderBoardWarnings","renderLists","renderPermissionLevel","updateControllerTitle"),this.listenTo(this.model,{"change:closed deleting":this.renderDebounced,"change:desc":this.renderBoardHeaderDescriptionDebounced,"change:idOrganization":this.refreshOrganizationDebounced,"change:memberships":this.renderPermissionLevelDebounced,"change:name":function(e){return function(){return e.renderBoardHeaderDebounced(),e.updateControllerTitleDebounced()}}(this),"change:powerUps":function(){return this.renderBoardHeaderCalendarDebounced(),this.model.isPowerUpEnabled("calendar")?void 0:this.closeCalendar()},"change:prefs.cardCovers":this.renderListsDebounced,"change:prefs.permissionLevel":function(e){return function(){return e.renderListsDebounced(),e.renderPermissionLevelDebounced()}}(this),"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness":function(e){return function(){return e.renderBoardBackgroundDebounced(!0)}}(this),"change:subscribed":this.renderBoardHeaderSubscribedDebounced,permChange:this.permChange,ownedChange:this.renderBoardHeaderDebounced,destroy:function(e){return function(){return k.displayErrorPage({errorType:"boardNotFound"})}}(this)}),this.listenTo(this.modelCache,["add:Card","remove:Card","change:Card:closed","change:Card:idBoard","add:List","remove:List","change:List:closed","change:List:idBoard"].join(" "),this.renderBoardWarningsDebounced),this.subscribe(Z(this.model),function(e){return function(){return e.renderBoardHeaderCalendarDebounced(),e.model.isPowerUpEnabled("calendar")?void 0:e.closeCalendar()}}(this)),this.listenTo(this.model.viewState,{"change:showSidebar":this.renderSidebarState,"change:sidebarDisplayType":this.renderSidebarDisplayType}),this.listenTo(i.me().boardStarList,"add remove reset",function(e){return function(){return e.renderBoardHeaderStarred()}}(this)),this.memberTypeMe=this.model.getMemberType(i.me()),this.refreshOrganization(),this.listScrollLeft=null,this.savingScroll=!1,this.calcState={},this.listenTo(this.model.filter,"change",this.renderFilteringStatus),R.addHandler(this,{scope:"board"}),this.listListView=this.collectionSubview(M,this.model.listList,{id:"board",model:this.model,className:"u-fancy-scrollbar js-no-higher-edits",resetCallback:function(e){return function(){return e.postListListRender()}}(this)}),this.listenTo(this.listListView,{mouseMoveListView:function(e){var t;return t=e.model,this.model.viewState.selectList(e.model)},mouseLeaveListView:function(e){var t;return t=e.model,this.model.viewState.selectList(null)},mouseMoveCardView:function(e,t){return this.ignoreMouseCardSelects||N.isVisible||x.sorting?void 0:this.model.viewState.selectCard(t.model)},mouseLeaveCardView:function(e,t){return this.ignoreMouseCardSelects||N.isVisible||x.sorting?void 0:this.model.viewState.selectCard(null)},moveCard:this.moveCardRequested,copyCard:this.copyCardRequested}),this._applySettings()},t.prototype._applySettings=function(){var e,t,n;if(null!=this.options.settings){switch(n=this.options.settings,t=n.menu,e=n.filter,t){case"closed":this.model.viewState.setShowSidebar(!1);break;case"filter":case"activity":this.setSidebarShow(),this.sidebarView.pushView(t);break;case"power-ups":this.model.editable()&&(this.setSidebarShow(),this.openPowerUps())}return e?this.model.filter.fromQueryString(e):void 0}},t.prototype.permChange=function(e){"none"===e?k.memberBoardsView():(this.render(),this.model.editable()||this.model.composer.save("vis",!1))},t.prototype.shortcut=function(e){var t,n,o,a,s,u;switch(n=this.model.editable(),a=i.isLoggedIn(),e){case T.Q:if(a)return this.model.filter.toggleQuietMode(),"Q - My cards";break;case T.X:return this.model.filter.clear(),"X - Clear All Filters";case T.W:return this.toggleSidebar(),"W - Toggle Board Sidebar";case T.Semicolon:return u=E.getShowText(),E.toggleText(),ee("Toggle Labels Text on Card Front",u?"Hide":"Show",this.model.id,"shortcut"),"; - Toggle Label Text";case T.ArrowDown:case T.J:return this.moveCard("down"),["Keyboard Nav","Down"];case T.ArrowUp:case T.K:return this.moveCard("up"),["Keyboard Nav","Up"];case T.ArrowRight:return this.moveCard("right"),["Keyboard Nav","Right"];case T.ArrowLeft:return this.moveCard("left"),["Keyboard Nav","Left"];case T.N:if(n&&(s=this.model.viewState.getList(),t=this.model.viewState.getCard(),null!=s))return o=null!=t?s.openCards().indexOf(t)+1:s.openCards().length,this.model.composer.save({list:s,index:o,vis:!0}),"N - Insert Card";break;case T.Escape:if(n)return x.sorting?x.abort():O.isEditing()||N.isVisible||C.isVisible||(this.model.composer.get("vis")?this.model.composer.save("vis",!1):this.model.viewState.get("listComposerOpen")?this.model.viewState.set("listComposerOpen",!1):this.sidebarView.popView()),k.showingCalendar(this)&&r(".calendar-day.active").removeClass("active"),!0}},t.prototype.openListComposer=function(){return this.model.viewState.openListComposer()},t.prototype.openCardComposerInFirstList=function(){return this.viewForList(this.model.listList.first()).openCardComposer()},t.prototype.scrollToList=function(e){F.scrollElementIntoView(this.$("#board")[0],this.viewForList(e).el,{horizontal:!0,animated:!0})},t.prototype.viewForList=function(e){return this.listListView.viewForModel(e)},t.prototype.scrollToCard=function(e){var t;return t=e.getList(),this.scrollToList(t),this.viewForList(t).scrollToCard(e)},t.prototype.preventScrollSelection=function(){var e,t;this.ignoreMouseCardSelects||(t=function(e){var t,n,r;return t=e.originalEvent,n=t.movementX,r=t.movementY,0!==n||0!==r},this.ignoreMouseCardSelects=!0,(e=function(n){return function(){return r(document).one("mousemove",function(r){t(r)?n.ignoreMouseCardSelects=!1:e()})}}(this))())},t.prototype.moveCard=function(e){var t,n,r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_;if(this.preventScrollSelection(),w=this.model.viewState.getCard(),null==w)return l=this.model.listList.find(function(e){return!e.openCards().isEmpty()}),void(null!=l&&l.selectFirstCardInList());if(_=w.getList(),g=_.openCards(),n=g.indexOf(w),o=function(e){return function(t,n,r,o){var i;if(i=t+n,e.model.filter.isFiltering)for(;i>=0&&r>i&&!o(i);)i+=n;return i}}(this),"up"===e||"down"===e){if(a="up"===e?-1:1,d=o(n,a,g.length,function(e){return function(t){return e.model.filter.satisfiesFilter(g.at(t))}}(this)),d>=0&&d<g.length)return t=g.at(d),this.scrollToCard(t),this.model.viewState.selectCard(t)}else if(("left"===e||"right"===e)&&(v=this.model.listList,u=v.indexOf(_),c="left"===e?-1:1,m=o(u,c,v.length,function(e){return function(t){return v.at(t).openCards().any(function(t){return e.model.filter.satisfiesFilter(t)})}}(this)),m>=0&&m<v.length)){for(h=v.at(m),f=h.openCards(),p=Math.min(n,f.length-1),b=[1,-1],y=[],i=0,s=b.length;s>i;i++){if(r=b[i],d=o(p-r,r,f.length,function(e){return function(t){return e.model.filter.satisfiesFilter(f.at(t))}}(this)),d>=0&&d<f.length){t=f.at(d),this.model.viewState.selectCard(t),this.scrollToCard(t);break}y.push(void 0)}return y}},t.prototype.renderClosed=function(){this.$el.html(H({name:this.model.get("name"),canReopen:this.model.owned(),canDelete:this.model.owned(),deleting:this.model.isDeleting()})),this.defaultBoardBackground()},t.prototype.renderOpen=function(){var e,t,n,o,a,s;for(e={},e.url=k.getBoardUrl(this.model),a=this.model.prefNames.concat(this.model.myPrefNames),t=0,n=a.length;n>t;t++)o=a[t],e[o+"_"+this.model.getPref(o)]=!0;e.canJoin=this.model.canJoin(),e.canInviteMembers=this.model.canInviteMembers(),e.confirmed=i.me().get("confirmed"),this.listListView.$el.detach(),this.$el.html(X.fillFromModel("board",this.model)),this.renderBoardHeader(),this.renderBoardWarnings(),this.renderBoardBackground(),this.model.viewState.get("showSidebar")&&this.$el.addClass("is-show-menu"),this.$el.toggleClass("tabbed-board-menu",!!(null!=(s=W("tabbedBoardMenu"))?s.get("tabbed"):void 0)),this.appendSubview(this.sidebarView,this.$(".js-fill-board-menu")),
this.renderSidebarState(),this.renderLists(),k.setLocation({title:e.name}),this.defer(function(e){return function(){return e.$("#board").unbind("mousedown.dragscrollable").dragscrollable({fxIgnore:function(e){var t,n,o,i;return t=r(e.target).closest("#board"),i=e.offsetY>t.height()-11,n=r(e.target).closest(".js-list-content").length>0,o=r(e.target).closest(".js-add-list").length>0,i||n||o}}),x.refreshListSortable()}}(this))},t.prototype.render=function(){return this.model.get("closed")?this.renderClosed():this.renderOpen(),this},t.prototype.renderFilteringStatus=function(){var e,t;return e=this.model.filter.isFiltering(),this.$(".js-filter-cards-indicator").toggleClass("hide",!e),this.$(".js-num-cards").toggleClass("hide",!e),this.$("#board").toggleClass("filtering",e),t=this.model.filter.toQueryString(),history.replaceState(null,null,location.pathname+t)},t.prototype.removeSidebarDisplayTypes=function(){this.$el.removeClass("sidebar-display-wide")},t.prototype.renderSidebarDisplayType=function(){var e;e=this.model.viewState.getSidebarDisplayType(),this.$el.addClass(e)},t.prototype.renderSidebarState=function(){this.renderSidebarDisplayType(),this.model.viewState.get("showSidebar")?this.showSidebar():this.hideSidebar()},t.prototype.toggleSidebar=function(){return this.model.viewState.setShowSidebar(!this.model.viewState.get("showSidebar"))},t.prototype.setSidebarShow=function(){this.model.viewState.setShowSidebar(!0)},t.prototype.showSidebar=function(){this.renderSidebarDisplayType(),clearTimeout(this._sidebarHideTimeout),this.$(".js-fill-board-menu").removeClass("hide"),this.defer(function(e){return function(){return e.$el.addClass("is-show-menu")}}(this))},t.prototype.hideSidebar=function(){this.$el.removeClass("is-show-menu"),clearTimeout(this._sidebarHideTimeout),this._sidebarHideTimeout=this.setTimeout(function(e){return function(){return e.$(".js-fill-board-menu").addClass("hide")}}(this),250)},t.prototype.refreshOrganization=function(){var e,t,n,r,o,i;if(n=this.modelCache.get("Organization",this.model.previous("idOrganization")),r=this.model.getOrganization(),null!=n&&this.stopListening(n),null!=r)for(i=["name","logoHash","displayName"],e=0,t=i.length;t>e;e++)o=i[e],this.listenTo(r,"change:"+o,this.frameDebounce(this.renderBoardHeader));return this.renderBoardHeader()},t.prototype.renderBoardHeader=function(){var e,t,n,r,o,a;return r=this.model.isPremOrgAdmin(i.me()),n=null!=(a=W("boardHeaderBadges"))?a.get("showHeaderBadges"):void 0,t={name:this.model.get("name"),canRename:r||this.model.owned(),isLoggedIn:i.isLoggedIn(),isAdmin:this.model.ownedByMember(i.me()),isPrivateTeam:this.model.hasOrganization()&&!this.model.getOrganization(),inBoardHeaderTest:n},o=this.model.getOrganization(),null!=o&&(t.orgDisplayName=o.get("displayName"),t.orgName=o.get("name"),e=o.get("logoHash"),e&&(t.orgLogoUrl=logoDomain+"/"+e+"/30.png",t.orgLogoUrl2x=logoDomain+"/"+e+"/170.png"),t.hasBusinessClass=o.isPremium(),t.isBusinessClass=o.isBusinessClass(),t.isEnterprise=null!=o?o.get("idEnterprise"):void 0),n&&this.$(".js-board-header").addClass("board-header-test"),this.$(".js-board-header").html(K(t)),this.renderPermissionLevel(),this.renderBoardHeaderDescription(),this.renderBoardHeaderCalendar(),this.renderBoardHeaderSubscribed(),this.renderBoardHeaderCollections(),this.renderFilteringStatus(),this.renderBoardHeaderStarred(),this.renderPluginButtons(),this},t.prototype.renderBoardWarnings=function(){var e,t,n,r,o;return t=this.modelCache.find("Card",function(e){return function(t){return t.get("idBoard")===e.model.id&&t.isVisible()}}(this)),e=this.$(".js-board-warnings"),o={tooManyCards:{test:function(e){return function(){return e.model.editable()&&t.length>f}}(this),key:"too-many-cards",minDismiss:F.dateBefore({months:6})}},n=function(e){return function(t){return"BoardWarning-"+t+"-"+e.model.id}}(this),r=q.chain(o).pairs().filter(function(e){var t,r,o,i,a;return o=e[0],i=e[1],a=i.test,r=i.minDismiss,a()?(t=z.get(n(o)),!t||r>t):void 0}).map(function(e){var t,r,o;return r=e[0],o=e[1],t=o.key,{name:r,key:t,dismiss:n(r)}}).first().value(),q.chain(o).pairs().filter(function(e){var t,r,o;return t=e[0],r=e[1],o=r.test,!o()&&null!=z.get(n(t))}).each(function(e){var t;return t=e[0],z.unset(n(t))}).value(),r?e.removeClass("hide").html(ne({canDismiss:z.enabled(),warning:r})):e.addClass("hide"),this},t.prototype.renderBoardHeaderCollections=function(){var e;return e=this.model.getOrganization(),e&&e.isFeatureEnabled("tags")&&this.$(".js-collection,.js-collection-divider").toggleClass("hide",!1),this},t.prototype.toggleOpenCollections=function(e){return F.stop(e),this.sidebarView.pushView("collections",{resetTo:"more"}),ee("Board Header","Collections Button","Toggle Collections Menu"),this},t.prototype.renderPluginButtons=function(){var e;return e=this.subview(I,this.model),this.appendSubview(e,this.$(".js-plugin-header-btns")),this},t.prototype.renderBoardHeaderStarred=function(){return this.$(".js-star-board").toggleClass("board-header-btn-enabled",this.model.isStarred()),this},t.prototype.toggleStarred=function(){var e;return e=i.me().boardStarList,null!=e.getBoardStar(this.model.id)?(e.unstarBoard(this.model.id),ee("Board Header","Unstar Board")):(e.starBoard(this.model.id),ee("Board Header","Star Board")),this},t.prototype.renderBoardHeaderCalendar=function(){var e;return e=this.model.isPowerUpEnabled("calendar"),this.$(".js-calendar").toggleClass("hide",!e),this},t.prototype.getAllBackgroundClasses=function(){return["body-custom-board-background","body-custom-board-background-tiled","body-light-board-background","body-dark-board-background","body-default-header"].join(" ")},t.prototype.defaultBoardBackground=function(){this.clearBoardBackground(),r("body").addClass("body-default-header")},t.prototype.clearBoardBackground=function(){var e,t;t=this.model.get("prefs"),e=this.getAllBackgroundClasses(),r("body").removeClass(e).css({"background-image":"","background-color":""})},t.prototype.renderBoardBackground=function(e){var t,n,o,i,s,u,c,l,d,p;return null==e&&(e=!1),this.clearBoardBackground(),i=this.model.get("prefs"),t=r("body"),null!=i.backgroundColor?(o=this.model.getClientBackgroundColor(i.background),t.css({"background-color":o}),j.setBackground({color:o})):(p=a.hasOwnProperty(i.background)&&null!=(s=null!=(u=F.smallestPreviewBiggerThan(i.backgroundImageScaled,640,480))?u.url:void 0)?s:i.backgroundImage,d=i.backgroundTile?p:null!=(c=null!=(l=F.smallestPreviewBiggerThan(i.backgroundImageScaled,64,64))?l.url:void 0)?c:i.backgroundImage,n=function(e){return function(){var e;switch(t.addClass("body-custom-board-background"),i.backgroundTile&&t.addClass("body-custom-board-background-tiled"),e=i.backgroundBrightness){case"light":t.addClass("body-light-board-background");break;case"dark":t.addClass("body-dark-board-background")}return t.css({"background-image":'url("'+p+'")'}),j.setBackground({url:d,tiled:i.backgroundTile})}}(this),e?F.waitForImageLoad(p).then(n):n())},t.prototype.renderBoardHeaderSubscribed=function(){var e;return e=this.model.get("subscribed"),this.$(".js-board-header-subscribed").toggleClass("hide",!e),this},t.prototype.renderBoardHeaderDescription=function(){var e,t,n;return e=this.$(".js-fill-desc"),(t=this.model.get("desc"))?(t?n=t:this.model.editable()&&(n=G("click to add a description")),e.attr("title",n),e.removeClass("hide"),this):(e.addClass("hide"),this)},t.prototype.renameBoard=function(e){F.stop(e),ee("Board Header","Open Rename Board From Title"),N.toggle({elem:r(e.target).closest("a"),view:new V({model:this.model,modelCache:this.modelCache})})},t.prototype.openOrgMenu=function(e){F.stop(e),ee("Board Header","Open Org Menu",r(e.target).closest(".js-open-org-menu").data("boardtype")),N.toggle({elem:r(e.target).closest("a"),view:new d({model:this.model,modelCache:this.modelCache})})},t.prototype.renderPermissionLevel=function(){var e,t,n;return e=this.$("#permission-level"),n={permIconClass:l.getPermLevelIconClassForBoard(this.model),permText:G(["board perms",this.model.getPermLevel(),"name"])},e.html(Y(n)),e.attr("title",l.getPermLevelAltTextForBoard(this.model)),t=this.model.canInvite(i.me()),this.$(".js-manage-board-members").toggle(t),this},t.prototype.postListListRender=function(){return J("render","rendering inline composer and calculating list layout"),this.renderFilteringStatus(),x.refreshListCardSortable()},t.prototype.renderLists=function(){return this.listListView.$el.toggleClass("js-list-sortable",this.model.editable()),this.$(".board-canvas").append(this.listListView.el),this.listListView.render(),this},t.prototype.sortCommit=function(e,t){return t.item.trigger("movelist",t)},t.prototype.changeVis=function(e){F.stop(e),ee("Board Header","Open Change Visibilty via Header"),N.toggle({elem:this.$(".js-change-vis"),view:w,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.addBoardToTeam=function(e){return F.stop(e),ee("Board Header","Open Add to a Team menu"),N.toggle({elem:this.$(".js-add-board-to-team"),view:s,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openDesc=function(e){F.stop(e),ee("Board Header","Edit Description Button via Header"),C.show({view:new c({model:this.model,modelCache:this.modelCache}),maxWidth:500})},t.prototype.toggleCalendar=function(){return this.calendarView?this.navigateToBoardEvent():this.navigateToCalendarEvent()},t.prototype.navigateToCalendarEvent=function(){return ee("Board Header","Open Calendar View via Header"),te("board view","opens","Power-Up","","","board-button",A.calendar),this.navigateToCalendar()},t.prototype.navigateToCalendar=function(){var e;return e=k.getBoardUrl(this.model.id,"calendar"),k.navigate(e,{trigger:!0})},t.prototype.navigateToBoardEvent=function(){return ee("Board Header","Close Calendar View via Header"),this.navigateToBoard()},t.prototype.navigateToBoard=function(){var e;return e=k.getBoardUrl(this.model.id),k.navigate(e,{trigger:!0})},t.prototype.isShowingCalendar=function(){return null!=this.calendarView},t.prototype.showMemberProfile=function(e){k.saveMemberBoardProfileLocation(e,this.model.id),C.show({view:new P({model:e,board:this.model,modelCache:this.modelCache}),maxWidth:500,hide:function(e){return function(){return k.setBoardLocation(e.model.id)}}(this)})},t.prototype.showCalendar=function(e){return this.model.isPowerUpEnabled("calendar")&&!this.isShowingCalendar()?(this.$(".calendar-btn").addClass("board-header-btn-enabled"),this.$("#board").addClass("hide"),this.calendarView=new g({model:this.model,modelCache:this.modelCache}),this.$(".board-canvas").append(this.calendarView.render(e).el),this.calendarView.addedToDOM()):void 0},t.prototype.closeDetailView=function(){C.hide(!0),this.closeCalendar(!1)},t.prototype.closeCalendar=function(e){null==e&&(e=!0),null!=this.calendarView&&(this.calendarView.remove(),this.calendarView=null,e&&this.navigateToBoard(),this.$(".calendar-btn").removeClass("board-header-btn-enabled"),this.$("#board").removeClass("hide"),this.$(".js-list-name-input").trigger("autosize.resize",!1))},t.prototype.openFilter=function(e){F.stop(e),ee("Board Header","Open Filtering via Header"),this.sidebarView.pushView("filter")},t.prototype.openPowerUps=function(e){return this.sidebarView.pushView("powerUps")},t.prototype.clearFilters=function(e){F.stop(e),ee("Board Header","Clear Filtering via Header"),this.model.filter.clear()},t.prototype.openUnsubscribe=function(e){F.stop(e),_.toggle("unsubscribe",{elem:r(e.target).closest(".js-board-header-subscribed")[0],model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return ee("Board Header","Unsubscribe"),e.model.subscribe(!1)}}(this)})},t.prototype.dblClickAddListMenu=function(e){F.stop(e),!this.model.viewState.get("listComposerOpen")&&this.model.isMember(i.me())&&0===r(e.target).closest(".js-list-content").length&&(ee("Board View","Open Add List Menu via Double Click"),N.show({clientx:e.clientX,clienty:e.clientY,view:new o({model:this.model,modelCache:this.modelCache,didAddList:function(e){return function(t){return e.scrollToList(t)}}(this)})}))},t.prototype.reopen=function(e){return F.stop(e),this.model.reopen()},t.prototype.delete=function(e){return F.stop(e),_.toggle("delete board",{elem:e.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.startDelete().then(function(){return ee("Board","Delete","Via Closed Board")}).done()}}(this)})},t.prototype.updateControllerTitle=function(){return k.title(this.model.get("name"))},t.prototype._insertCardPosition=function(e){var t;return t=this.model.viewState.getCard(),null!=t?{idList:t.get("idList"),index:t.getIndexInList()}:{idList:e,index:this.model.listList.get(e).cardList.length}},t.prototype.moveCardRequested=function(e,t){var n,r,o,i,a,s;return s=t.shortLink,r=t.idList,i=this._insertCardPosition(r),r=i.idList,o=i.index,n=null!=(a=S.getId("Card",s))?a:s,v.load(n,D.cardMinimal,this.modelCache).then(function(e){return function(t){return t.moveToList(e.model.listList.get(r),o)}}(this)).done()},t.prototype.copyCardRequested=function(e,t){var n,r,o,i,a,s;return s=t.shortLink,r=t.idList,i=this._insertCardPosition(r),r=i.idList,o=i.index,n=null!=(a=S.getId("Card",s))?a:s,v.load(n,D.cardMinimal,this.modelCache).then(function(e){return function(t){return t.copyTo({idList:r,pos:e.model.listList.get(r).calcPos(o,t)})}}(this)).done()},t.prototype.showCleanUp=function(e){var t;F.stop(e),ee("Board Header","Show Clean-Up"),t=new u({model:this.model,modelCache:this.modelCache}),C.show({view:t,maxWidth:800,hide:function(){return t.abort()}})},t}($)},{}],403:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T=function(e,t){function n(){this.constructor=e}for(var r in t)E.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},E={}.hasOwnProperty,O=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(559),i=e(35),a=e(15),s=e(517),u=e(7),l=e(650),p=e(101),h=e(40),f=e(404),g=e(569),v=e("bluebird"),b=e(118),y=e(133),w=e(549),_=e("underscore"),j=e(546),S=e(51),x=e(104),k=e(770),C=e(88),d="idLastOrganization",m="none",t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return T(t,e),t.prototype.viewTitleKey=function(){return this.options.copyBoard?"copy board":"create board"},t.prototype.events={'change select[name="org-id"]':"changeOrg","click .js-helper-add-org":"helperAddOrg","submit form":"submit","click .js-submit":"submit","click .js-create-org":"newOrg","click .js-change-vis":"openChangeVis","click .js-select":"selectVis"},t.prototype.getOrganization=function(){switch(this.model.typeName){case"Organization":return this.model;case"Board":return this.model.getOrganization();case"Member":return null}},t.prototype.getDefaultIdOrganization=function(e){var t,n,r,o,i,a;if(0===e.length)return null;if(this.options.useLastOrganization){if(1===e.length)return e[0];if(r=b.get(d,null),r===m)return null;if(null!=r&&O.call(e,r)>=0)return r;for(o=null,t=0,i=e.length;i>t;t++)n=e[t],(null==o||n>o)&&(o=n);return o}return null!=(o=null!=(a=this.getOrganization())?a.id:void 0)?o:null},t.prototype.render=function(){var e,t,n,r,o,a,s;return r=i.me(),n=this.getDefaultIdOrganization(r.organizationList.pluck("id")),o=r.organizationList.map(function(e){return _.extend(e.toJSON(),{selectOrg:e.id===n})}),t=null!=n,e={orgs:o,hasOrg:t,canAddToOrgs:0!==o.length,isCopyBoard:this.options.copyBoard,willRemovePowerUps:this.options.copyBoard&&this.model.powerUpsCount()>r.getPowerUpsLimit()},a=Math.floor(13*Math.random()).toString(),e.placeholder=x(["board name placeholder",a]),this.options.term&&(e.name=this.options.term),e.pLevel="private",this.options.copyBoard&&this.model.owned()?e.pLevel=this.model.get("prefs").permissionLevel:t&&(e.pLevel="org"),(null!=(s=this.options)?s.newOrgBoard:void 0)&&(e.hideOrg=!0),this.$el.html(j.fill("board_new",e)),this.renderBoardVisChooser(),this},t.prototype.renderBoardVisChooser=function(e){var t,n;return t=this.$('select[name="org-id"]').val(),n={isNewBoard:!0,canChange:!0},this.disableSubmit(),v.try(function(e){return function(){var n,r;return n=function(e){return"<p>"+x(e)+"</p>"},e.$(".js-vis-display").html(n("checking visibility permissions")),t?(r=e.modelCache.get("Organization",t),null!=r&&null!=r.get("memberships")&&null!=r.get("products")&&(null!=r?r.isFeatureEnabled("restrictVis"):void 0)?r:h.loadOrganizationMinimal(t)):void 0}}(this)).then(function(t){return function(r){var o;return null!=r&&(t.canChangeOrg(r,e)||(e=null),_.extend(n,{hasOrg:!0,orgName:r.get("displayName"),hasSuperAdmins:r.isFeatureEnabled("superAdmins"),privateRestricted:!t.canChangeOrg(r,"private"),orgRestricted:!t.canChangeOrg(r,"org"),publicRestricted:!t.canChangeOrg(r,"public")})),o=null!=r&&t.canChangeOrg(r,"org")?t.options.copyBoard&&t.model.isPrivate()?"private":"org":"private",n.current=null!=e?e:o,{org:r,visData:n}}}(this)).then(function(e){return function(t){var n,r,o,i;return o=t.org,i=t.visData,r=i.current,e.setPermissionLevel(r),e.$(".js-vis-chooser").html(k(i)),e.$(".js-vis-display").html(j.fill("board_new_vis",{visIconClass:s.getPermLevelIconClass(r),visDisplayText:x(["board perms",r,"name"])})),null!=o&&i.privateRestricted&&i.orgRestricted&&i.publicRestricted?(n=e.$(".js-no-valid-org-privs"),o.owned()?n.html(x("board create restriction admin",{urlSettings:"/"+o.get("name")+"/account"})):n.html(x("board create restriction not admin")),n.removeClass("hide"),e.$(".js-vis-chooser,.js-vis-display").addClass("hide")):e.enableSubmit()}}(this)).done(),this},t.prototype.enableSubmit=function(){return this.$(".js-submit").removeClass("disabled")},t.prototype.disableSubmit=function(){return this.$(".js-submit").addClass("disabled")},t.prototype.resetVisChooser=function(){this.$(".js-no-valid-org-privs").addClass("hide")},t.prototype.openChangeVis=function(e){y.stop(e),this.$(".js-vis-display").addClass("hide"),this.$(".js-vis-chooser").removeClass("hide")},t.prototype.selectVis=function(e){var t,n;y.stop(e),t=r(e.target).closest(".js-select"),t.hasClass("disabled")||(this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),n=t.attr("name"),this.renderBoardVisChooser(n),S("New Board","Change Visibility",n))},t.prototype.setPermissionLevel=function(e){return this.$('input[name="permissionLevel"]').val(e)},t.prototype.getPermissionLevel=function(){var e;return null!=(e=this.$('input[name="permissionLevel"]').val())?e:""},t.prototype.canChangeOrg=function(e,t){return e.canSetVisibility(t)},t.prototype.changeOrg=function(e){return this.resetVisChooser(),this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),S("New Board","Change Org"),this.renderBoardVisChooser()},t.prototype.helperAddOrg=function(e){y.stop(e),g.pushView({view:new f({model:this.model,modelCache:this.modelCache})}),S("New Board","Open Add Org Helper")},t.prototype.defaultBackgroundColor=function(){var e,t,n;return p.is("en")&&(n=new Date,t=n.getMonth(),e=n.getDate(),2===t&&17===e)?"green":"blue"},t.prototype.submit=function(e){var t,n,r,a,s,c,l,p,h,f,v,w,k,x;return y.stop(e),this.$(".js-submit").hasClass("disabled")?void 0:(t=this.$('input[name="name"]'),p=t.val().trim(),""===p?void t.focus().select():(s=null!=(w=this.$('select[name="org-id"]').val())?w:"",b.set(d,s?s:m),c={name:p,idOrganization:s},v=this.$('input[name="permissionLevel"]').val(),this.options.copyBoard||(x=""!==s&&"private"!==v),n=this.defaultBackgroundColor(),f=_.filter(i.me().boardList.models,function(e){return e.owned()}),l=!this.options.copyBoard&&(0===f.length||1===f.length&&f[0].isWelcomeBoard()),a=C("ghostLists").get("enabled"),r=l&&!a,k=_.extend({prefs_permissionLevel:v,prefs_selfJoin:x,defaultLists:r},c),this.options.copyBoard&&(k.idBoardSource=this.model.id,k.keepFromSource=this.$("input:checkbox:checked").map(function(){return this.name}).get().join()),this.options.copyBoard?S("New Board","Copy"):S("New Board","New"),h=i.me().boardList.create(c,{modelCache:this.modelCache,requestData:k,success:function(e){return function(t){var n,a;e.options.copyBoard&&o.hide("copying"),a=t.id,O.call(n=i.me().get("idBoards"),a)<0&&i.me().set("idBoards",n.concat(t.id)),u.displayBoard({idBoard:t.id,openListComposer:!e.options.copyBoard&&!r,openCardComposerInFirstList:r}).done()}}(this),error:function(){return o.flash("could not create board","error","create error")}}),this.options.copyBoard&&o.show("copying","info","copying"),g.hide()))},t.prototype.newOrg=function(e){y.stop(e),g.pushView({view:new l({model:this.model,modelCache:this.modelCache})}),S("New Board","Open Create Org")},t}(w)},{}],404:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(650),i=e(569),a=e(133),s=e(549),u=e(546),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="add an organization",t.prototype.events={"click .js-create-org":"newOrg"},t.prototype.render=function(){var e;return e=this,this.$el.html(u.fill("popover_helper_new_board_add_org")),this},t.prototype.newOrg=function(e){return a.stop(e),i.pushView({view:new r({model:this.model,modelCache:this.modelCache})})},t}(s)},{}],405:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(569),a=e(133),s=e(549),u=e(948),c=e(51),r=e(41),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="print and export",t.prototype.events={"click .js-print":"printModel","click .js-export-json":"exportJSON","click .js-export-csv":"exportCSV",'click a[href="/business-class"]':"businessClass"},t.prototype.render=function(){var e,t,n;return n=this,t=this.model.getOrganization(),e=this.model.toJSON(),e.hasCsvExport=!1,null!=t&&(null!=t?t.isFeatureEnabled("csvExport"):void 0)&&(e.hasCsvExport=!0,e.csvURL="/b/"+this.model.get("shortLink")+".csv"),(null!=t?t.isPremium():void 0)&&!(null!=t?t.isFeatureEnabled("csvExport"):void 0)&&(e.needsUpgradeForCsv=!0,e.upgradeUrl="/"+t.get("name")+"/billing"),e.jsonURL="/b/"+this.model.get("shortLink")+".json",e.upsellEnabled=!r.get("dontUpsell"),this.$el.html(u(e)),this},t.prototype.printModel=function(e){a.stop(e),c("Board Menu","Print and Export Menu","Print"),o.hide(),this.defer(function(){return window.print()})},t.prototype.exportJSON=function(e){return c("Board Menu","Print and Export Menu","Export JSON")},t.prototype.exportCSV=function(e){return c("Board Menu","Print and Export Menu","Export CSV")},t.prototype.businessClass=function(e){return c("Board Menu","Print and Export Menu","Click Business Class Link")},t}(s)},{}],406:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(35),i=e(7),a=e(284),s=e(133),u=e(549),d=e(51),c=e(544)("board_list_item"),l=c.renderable(function(e){var t,n,r,o,i,a,s,u,l,d;return a=e.isLoggedIn,s=e.name,u=e.orgname,d=e.url,i=e.current,l=e.recent,r=e.backgroundImageThumbnail,n=e.backgroundColor,t=e.backgroundBrightness,o=e.backgroundTile,c.div(".compact-board-tile-wrapper",function(){var e,p;return p={},r&&(p["background-image"]=c.urlify(r)),n&&(p["background-color"]=n),c.span({class:c.classify({"mod-tiled":o,"compact-board-tile-background":!0}),style:c.stylify(p)}),c.span(".compact-board-tile-fade"),e={"js-open-board":!0,current:i,"compact-board-tile-link":!0},t&&(e[t]=!0),c.a({class:c.classify(e),href:d},function(){return c.span(".compact-board-tile-link-thumbnail",{style:c.stylify(p)}),c.span({class:c.classify({"compact-board-tile-link-text":!0,details:!0,"has-sub-name":u})},function(){return c.span(".compact-board-tile-link-text-name",{title:s},function(){return c.text(s)}),u?c.span(".compact-board-tile-link-text-sub-name",{title:u},function(){return c.text(u)}):void 0}),a?c.span({class:"compact-board-tile-link-options"},function(){return c.span(".compact-board-tile-link-options-unread.js-unread",{title:c.l("there-is-new-activity-on-this-board")}),l&&c.icon("close",{class:"js-remove-board compact-board-tile-link-options-remove",title:c.l("click-to-remove-this-board-from-your-recent-boards")}),c.icon("star",{class:"compact-board-tile-link-options-star js-star-board",title:c.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list")})}):void 0})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.tagName="li",t.prototype.className="compact-board-tile",t.prototype.initialize=function(){var e;return this.listenTo(this.model,"change:prefs change:name change:idOrganization",this.frameDebounce(this.render)),this.listenTo(r.me().boardStarList,"add remove reset",this.frameDebounce(this.renderStarred)),this.listenTo(this.model,"change:dateLastActivity change:dateLastView",this.frameDebounce(this.renderUnread)),(null!=(e=this.options)?e.showOrgName:void 0)?(this.listenTo(this.model,"change:idOrganization",function(e){return function(){var t;return t=e.modelCache.get("Organization",e.model.previous("idOrganization")),null!=t&&e.stopListening(t,"change:displayName"),e.listenToOrgNameChange(),e.render()}}(this)),this.listenToOrgNameChange()):void 0},t.prototype.listenToOrgNameChange=function(){return null!=this.model.getOrganization()?this.listenTo(this.model.getOrganization(),"change:displayName",this.render):void 0},t.prototype.events={"click .js-open-board":"openBoard","click .js-star-board":"starBoard","click .js-remove-board":"removeRecent",moveto:"moveTo"},t.prototype.render=function(){var e,t,n,o,a,u;return t=this.model.toJSON({prefs:!0}),t.url=i.getBoardUrl(this.model),this.model.getPref("backgroundTile")?(t.backgroundTile=!0,t.backgroundImageThumbnail=this.model.getPref("backgroundImage")):t.backgroundImageThumbnail=null!=(n=null!=(o=s.smallestPreviewBiggerThan(this.model.getPref("backgroundImageScaled"),400,200))?o.url:void 0)?n:this.model.getPref("backgroundImage"),null==t.backgroundImageThumbnail&&(t.backgroundColor=this.model.getClientBackgroundColor("blue")),null!=this.model.getPref("backgroundColor")&&(e=this.model.getPref("background"),t.backgroundColor=this.model.getClientBackgroundColor(e)),t.backgroundBrightness=this.model.getPref("backgroundBrightness"),(null!=(a=this.options)?a.showOrgName:void 0)&&(t.orgname=null!=(u=this.model.getOrganization())?u.get("displayName"):void 0),t.isLoggedIn=r.isLoggedIn(),t.recent=this.options.recent,this.$el.html(l(t)),this.renderStarred(),this.renderUnread(),this},t.prototype.trackBoardClick=function(){return d("Header","Boards Menu","Opened Board")},t.prototype.openBoard=function(e){return a.getPinSidebar()||e.metaKey||e.ctrlKey||a.hideSidebar(),this.trackBoardClick()},t.prototype.starBoard=function(e){var t,n;s.stop(e),n=this.model.id,t=r.me().boardStarList,null==t.getBoardStar(n)?t.starBoard(n):t.unstarBoard(n)},t.prototype.removeRecent=function(e){return s.stop(e),a.pullBoard(this.model.id)},t.prototype.renderUnread=function(){var e;return e=this.model.hasUnseenActivity()&&!i.onBoardView(this.model.id),this.$(".js-unread").toggleClass("any",e),this.$el.toggleClass("has-unread-activity",e),this},t.prototype.moveTo=function(e,t){var n,o;o=t.item.closest(".js-board-list").find("li"),n=o.index(t.item),r.me().boardStarList.updateStarBoard(this.model.id,n)},t.prototype.renderStarred=function(){return null!=r.me().boardStarList.getBoardStar(this.model.id)?(this.$el.addClass("starred"),this.$(".icon-star").addClass("icon-star-active")):(this.$el.removeClass("starred"),this.$(".icon-star").removeClass("icon-star-active")),this},t}(u)},{}],407:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;d=e("underscore"),r=e(35),i=e(409),a=e(411),s=e(412),u=e(413),c=e(416),l=e(40),p=e(777),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.renderBoardsSections))},t.prototype.renderOnce=function(){return this.$el.html(p()),this.renderBoardsSections(),this},t.prototype.renderBoardsSections=function(){return this.renderStarredBoardsSection(),this.renderRecentBoardsSection(),this.renderAllBoardsSection(),this},t.prototype.renderAllBoardsSection=function(){var e,t,n,o,i,u,c,l;if(e=this.$(".js-all-boards"),n=function(){var e,n,r,o;for(r=this.model.boardList.models,o=[],e=0,n=r.length;n>e;e++)t=r[e],t.isOpen()&&o.push(t);return o}.call(this),0===n.length)u=function(e){return function(){return e.stopListening(r.me().boardList,"add reset",u),e.renderAllBoardsSection()}}(this),this.listenTo(r.me().boardList,"add reset",u);else for(this.appendSubview(this.subview(a,r.me(),{},"my-boards"),e),l=this.model.getSortedOrgs(),o=0,i=l.length;i>o;o++)c=l[o],this.appendSubview(this.subview(s,r.me(),{org:c},"group-"+c.id),e);return this},t.prototype.renderStarredBoardsSection=function(){return this.appendSubview(this.subview(c,r.me(),{},"starred-boards"),this.$(".js-starred-boards")),this},t.prototype.renderRecentBoardsSection=function(){return l.waitFor("boardsData",function(e){return function(){return e.appendSubview(e.subview(u,r.me(),{},"recent-boards"),e.$(".js-recent-boards"))}}(this)),this},t}(i)},{}],408:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;d=e("react"),r=e(35),i=e(302),s=e(403),a=e(344),u=e(563),c=e(40),l=e(569),p=e(284),f=e(88),h=e(133),m=e(549),g=e(778),v=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.initialize=function(){return this.listenTo(p,"change:pinBoardsListSidebar",function(){return this.updatePinned()})},t.prototype.events={"click .js-add-board":"addBoard","click .js-pin":"pinDrawer","click .js-unpin":"unpinDrawer","click .js-open-closed-boards":"openClosedBoards"},t.prototype.renderOnce=function(){return this.$el.html(g()),this.updatePinned(),this},t.prototype.addBoard=function(e){var t,n;h.stop(e),v("Boards Drawer","Add Board"),n=null!=(t=f("createBoardWithBackground"))?t.get("enabled"):void 0,n?u.show({displayType:"mod-no-chrome",opacity:.75,reactElement:d.createElement(a)}):l.toggle({elem:this.$(".js-add-board"),view:s,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.unpinDrawer=function(){return v("Boards Drawer","Unpin Drawer"),p.hidePinSidebar()},t.prototype.pinDrawer=function(){return v("Boards Drawer","Pin Drawer"),p.showPinSidebar()},t.prototype.updatePinned=function(){return this.$(".js-pin").toggleClass("hide",p.getPinSidebar()),this.$(".js-unpin").toggleClass("hide",!p.getPinSidebar())},t.prototype.openClosedBoards=function(e){h.stop(e),p.hideSidebar(),u.show({view:new i({model:r.me(),modelCache:this.modelCache})}),c.loadClosedBoards().done(),v("Boards Drawer","Open Closed Boards")},t}(m)},{}],409:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(100),a=e(569),s=e(133),u=e(549),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.events={
"mouseenter .sidebar-boards-list li":"hoverItem","mouseleave .sidebar-boards-list":"deselectBoards"},t.prototype.hoverItem=function(e){var t;t=r(e.target).closest("li"),s.selectMenuItem(r(".sidebar-boards-list"),"li",t)},t.prototype.deselectBoards=function(e){var t;t=r(".sidebar-boards-list li").removeClass("selected")},t.prototype.arrowKeyEvent=function(e){var t;t=i.getKey(e),s.navMenuList(r(".sidebar-boards-list"),"li:visible",t)},t.prototype.enterKeyEvent=function(e){var t;t=r(".sidebar-boards-list li.selected:visible:first a"),t.length>0&&(t.click(),a.hide())},t}(u)},{}],410:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(406),o=e(409),a=e(284),s=e(133),u=e("underscore"),c=e(245),l=e(779),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.initialize=function(e){var t;return t=e.searchText,this.searchText=t.map(function(e){return e.toLowerCase().trim()}),this.subscribe(this.searchText,this.renderResults),this.makeDebouncedMethods("renderResults"),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.renderResultsDebounced),this.listenTo(a,"change:idRecentBoards",this.renderResultsDebounced),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.renderResultsDebounced})},t.prototype.renderOnce=function(){return this.$el.html(l()),this.renderResults(),this},t.prototype.renderResults=function(){var e,t,n,o,i;for(e=this.$(".js-board-results"),e.empty(),i=this.getBoardsForTerm(this.searchText.get()),n=0,o=i.length;o>n;n++)t=i[n],this.appendSubview(this.subview(r,t,{showOrgName:!0}),e);return s.selectMenuItem(this.$(".sidebar-boards-list"),"li",this.$(".sidebar-boards-list li:first")),this},t.prototype.getBoardsForTerm=function(e){var t,n,r;return n=this.model.boardStarList.getBoardIds(),t=a.getRecentBoards(),r=s.buildFuzzyMatcher(e),u.chain(this.model.boardList.models).union(this.model.boardStarList.getBoards()).union(this.modelCache.get("Board",t)).compact().filter(function(e){return r(e.get("name"))}).filter(function(e){return e.isOpen()}).value().sort(function(e,r){var o,i,a,s,u,c,l,d;return o=e.id,h.call(n,o)>=0&&(i=r.id,h.call(n,i)<0)?-1:(a=r.id,h.call(n,a)>=0&&(s=e.id,h.call(n,s)<0)?1:(u=e.id,h.call(t,u)>=0&&(c=r.id,h.call(t,c)<0)?-1:(l=r.id,h.call(t,l)>=0&&(d=e.id,h.call(t,d)<0)?1:e.get("name")<r.get("name")?-1:e.get("name")>r.get("name")?1:0)))}).slice(0,7)},t}(o)},{}],411:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(415),i=e(104),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards)},t.prototype.getBoards=function(){var e,t,n,r,o;for(r=this.model.boardList.models,o=[],t=0,n=r.length;n>t;t++)e=r[t],!e.isOrgBoard()&&e.isOpen()&&o.push(e);return o},t.prototype.sectionId=function(){return"my-boards"},t.prototype.doesTruncate=function(){return!0},t.prototype.getHeaderInfo=function(){return{title:this.getTitle(),iconClass:"board"}},t.prototype.getTitle=function(){return i("board section title.personal boards")},t}(o)},{}],412:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(415),i=e(7),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards),this.listenTo(this.getOrg(),"change:name change:displayName change:logoHash",this.render)},t.prototype.getOrg=function(){return this.options.org},t.prototype.sectionId=function(){return"org-"+this.getOrg().get("id")},t.prototype.doesTruncate=function(){return!0},t.prototype.getBoards=function(){var e,t,n,r,o,i;for(r=this.model.boardList.models,i=[],t=0,n=r.length;n>t;t++)e=r[t],(null!=(o=e.getOrganization())?o.id:void 0)===this.getOrg().id&&e.isOpen()&&i.push(e);return i},t.prototype.getHeaderInfo=function(){var e,t,n;return t={},n=this.getOrg(),null!=n&&(t=n.toJSON(),t.isOrg=!0,t.url=i.getOrganizationUrl(n.get("name")),e=n.get("logoHash"),e&&(t.orgLogoUrl=logoDomain+"/"+e+"/30.png")),t},t.prototype.postRenderBoardsEvent=function(){this.renderBCStatus()},t.prototype.renderBCStatus=function(){this.$(".js-has-business-class").toggleClass("hide",!this.getOrg().isPremium())},t.prototype.getTitle=function(){return this.getOrg().get("displayName")},t}(o)},{}],413:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;o=e(35),a=e(415),s=e(40),u=e(227),c=e("bluebird"),l=e(284),d=e("underscore"),p=e(104),h=e(136),r=e(221),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(l,"change:idRecentBoards",function(){return this.debouncedRenderBoards()}),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.debouncedRenderBoards()}),this._idBoardsFetching=[]},t.prototype.sectionId=function(){return"recent-boards"},t.prototype.showOrgName=function(){return!0},t.prototype.isRecent=function(){return!0},t.prototype.getBoards=function(){var e;return e=o.me(),d.chain(l.getRecentBoards()).difference(this.model.boardStarList.getBoardIds()).tap(function(e){return function(t){return e.fetchUnknownBoards(t)}}(this)).map(function(e){return function(t){return e.modelCache.get("Board",t)}}(this)).compact().filter(function(t){return function(t){return t.isViewableBy(e)}}(this)).take(7).value()},t.prototype.fetchUnknownBoards=function(e){var t,n;return n=d.chain(e).difference(this._idBoardsFetching).reject(function(e){return function(t){return null!=e.modelCache.get("Board",t)}}(this)).value(),0!==n.length?(this._idBoardsFetching=this._idBoardsFetching.concat(n),t=n.map(function(e){return function(e){return s.loadBoardData(e,u.boardMinimal).catch(r.NotFound,r.Unauthorized,function(){return l.pullBoard(e)})}}(this)),c.all(t).then(function(e){return function(){e._idBoardsFetching=d.difference(e._idBoardsFetching,n),e.debouncedRenderBoards()}}(this)).done()):void 0},t.prototype.getHeaderInfo=function(){return{title:p("board section title.recent boards"),iconClass:"clock"}},t}(a)},{}],414:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;u=e("react"),i=e(403),o=e(344),a=e(563),s=e(569),d=e(88),c=e(133),l=e(549),p=e(780),h=e(51),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(e){var t;return t=e.searchText,this.searchText=t.map(function(e){return e.trim()})},t.prototype.events={"click .js-add-board-with-name":"addBoardWithName"},t.prototype.renderOnce=function(){return this.$el.html(p()),this.subscribe(this.searchText,function(e){return this.$(".js-add-board-with-name").format("add board named",{boardName:e})}),this},t.prototype.addBoardWithName=function(e){var t,n,r;c.stop(e),h("Boards Drawer","Add Board - With Name"),n=this.searchText.get(),r=null!=(t=d("createBoardWithBackground"))?t.get("enabled"):void 0,r?a.show({displayType:"mod-no-chrome",opacity:.75,reactElement:u.createElement(o,{defaultTitle:n})}):s.toggle({elem:this.$(".js-add-board-with-name"),view:i,options:{model:this.model,modelCache:this.modelCache,term:n}})},t}(l)},{}],415:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(406),i=e(284),s=e(549),u=e("underscore"),l=e(544)("boards_sidebar_section"),a=e(133),c=e(104),d=l.renderable(function(e){var t,n,r,o,i,a,s;return a=e.title,n=e.iconClass,s=e.url,r=e.isOrg,o=e.orgLogoUrl,t=e.displayName,i=e.sectionId,l.div(".sidebar-section-header.quiet.js-sidebar-section-header",function(){return null==r?a&&(n&&l.icon(n,{class:"sidebar-section-header-icon"}),l.span(".sidebar-section-header-title",function(){return l.text(a)})):l.a(".dark-hover",{href:s},function(){return o?l.img({class:"sidebar-section-header-icon",src:o,alt:t}):l.icon("organization",{class:"sidebar-section-header-icon"}),l.span(".sidebar-section-header-title.mod-clickable",function(){return l.text(t)}),l.icon("business-class",{class:"sidebar-section-header-bc-icon hide js-has-business-class"})}),i?(l.icon("remove",{class:"sidebar-section-header-toggle-icon dark-hover js-collapse-section hide"}),l.icon("add",{class:"sidebar-section-header-toggle-icon dark-hover js-expand-section hide"})):void 0}),l.div(".js-section-content",function(){return l.ul(".sidebar-boards-list.js-board-list"),l.div(function(){return l.a(".dark-hover.quiet-button.js-show-all-section-boards",{href:"#"})})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-collapse-section":"collapseSection","click .js-expand-section":"expandSection","click .js-show-all-section-boards":"showAllSectionBoards"},t.prototype.initialize=function(){return this.debouncedRenderBoards=this.debounce(this.renderBoards,10),this.debouncedPostRenderBoardsEvent=this.debounce(this.postRenderBoardsEvent,150),this.sectionId=this.sectionId(),this.initedSortable=!1,this.listenTo(i,"change:collapsedDrawerSections",function(){return this.renderCollapsed()}),this.listenTo(this.model.boardList,"add remove reset change:closed",this.debouncedRenderBoards),this.truncated=this.doesTruncate()},t.prototype.render=function(){var e;return e=this.getHeaderInfo(),e.sectionId=this.sectionId,this.$el.html(d(e)),this.renderBoards(),this.renderCollapsed(),this},t.prototype.getBoards=function(){return[]},t.prototype.getHeaderInfo=function(){return"Boards"},t.prototype.sectionId=function(){return null},t.prototype.showOrgName=function(){return!1},t.prototype.isRecent=function(){return!1},t.prototype.doesTruncate=function(){return!1},t.prototype.postRenderBoardsEvent=function(){},t.prototype.showAllSectionBoards=function(){this.truncated=!1,this.renderBoards()},t.prototype.collapseSection=function(e){return i.collapseSection(this.sectionId)},t.prototype.expandSection=function(e){return i.expandSection(this.sectionId)},t.prototype.renderCollapsed=function(){var e;e=i.isCollapsed(this.sectionId),this.$(".js-collapse-section").toggleClass("hide",e),this.$(".js-expand-section").toggleClass("hide",!e),this.$(".js-section-content").toggleClass("hide",e),this.$(".js-sidebar-section-header").toggleClass("bold",!e)},t.prototype.renderSubviews=function(e){var t,n,o;t=this.$(".js-board-list"),o=function(){var t,o,i;for(i=[],t=0,o=e.length;o>t;t++)n=e[t],i.push(this.subview(r,n,{showOrgName:this.showOrgName(),recent:this.isRecent()},"board-"+n.id));return i}.call(this),this.ensureSubviews(o,t)},t.prototype.renderBoards=function(){var e,t,n;return e=u.filter(this.getBoards(),function(e){return null!=e?e.isOpen():void 0}),e.length>0?(n=this.doesTruncate()?u.chain(e).sortBy(function(e){var t;return-new Date(null!=(t=e.get("dateLastActivity"))?t:a.idToDate(e.id))}).filter(function(e){return function(t,n){return!e.truncated||10>=n||!t.isLessActive()}}(this)).sortBy(function(e){return e.get("name").toLowerCase()}).value():e,t=e.length-n.length,this.$el.removeClass("hide"),this.renderSubviews(n),this.$(".js-show-all-section-boards").toggleClass("hide",0===t).text(c(["templates","boards_sidebar_section","show-less-active-boards-count"],{countString:t.toString()}))):this.$el.addClass("hide"),this.debouncedPostRenderBoardsEvent(),this},t}(s)},{}],416:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(415),i=e(82),a=e(564),s=e(104),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardStarList,"add remove reset change:pos",function(){return this.debouncedRenderBoards()})},t.prototype.getBoards=function(){return this.model.boardStarList.getBoards()},t.prototype.showOrgName=function(){return!0},t.prototype.sectionId=function(){return"starred-boards"},t.prototype.getHeaderInfo=function(){return{title:s("board section title.starred boards"),iconClass:"star"}},t.prototype.postRenderBoardsEvent=function(){var e;return i.isTouch()?void 0:(e=this.$(".js-board-list"),this.initedSortable?a.refreshIfInitialized(e):(this.initedSortable=!0,e.sortable({axis:"y",containment:"parent",delay:75,distance:7,forcePlaceholderSize:!0,items:"> li",placeholder:"placeholder",scroll:!0,helper:"clone",stop:function(e){return function(t,n){e.defer(function(){return n.item.trigger("moveto",n)})}}(this),tolerance:"pointer"})))},t}(r)},{}],417:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S=function(e,t){function n(){this.constructor=e}for(var r in t)T.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},T={}.hasOwnProperty;r=e("jquery"),o=e(35),a=e(408),i=e(407),s=e(410),u=e(414),l=e(7),d=e("hearsay"),p=e(100),h=e(22),m=e(40),f=e(110),g=e(227),v=e(569),b=e(284),y=e(547),w=e(133),_=e(549),k=e("underscore"),C=e(245),j=e(776),x=e(104),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.UNREAD_POLL_RATE_ACTIVE=w.getMs({minutes:5}),t.prototype.UNREAD_POLL_RATE_IDLE=w.getMs({minutes:60}),t.prototype.className=function(){return"boards-drawer"},t.prototype.initialize=function(){this.searchText=this.slot(""),this.isSearching=this.searchText.map(C.compose(C.not,k.isEmpty)).distinct(),Object.defineProperty(this,"$searchInput",{get:function(){return this.$(".js-search-boards")}}),this.listenTo(b,"change:showBoardsListSidebar",function(){return this.renderSidebarState(),this.ensureUnreadData(),b.getShowSidebar()||b.getPinSidebar()?this.defer(function(e){return function(){return e.focusInput()}}(this)):this.searchText.set("")}),this.listenTo(b,"change:pinBoardsListSidebar",function(){return this.renderSidebarState(),this.updatePinned(),this.updateHeight(),this.ensureUnreadData()}),y.addHandler(this,{scope:"header"}),this.ensureUnreadData(),this.filteredBoardsView=this.subview(s,this.model,{searchText:this.searchText}).render(),this.allBoardsView=this.subview(i,this.model).render(),this.activeBoardsSubview=d.if(this.isSearching,d.const(this.filteredBoardsView),d.const(this.allBoardsView)),this.searchingButtonsView=this.subview(u,this.model,{searchText:this.searchText}).render(),this.boardsButtonsView=this.subview(a,this.model).render(),this.activeButtonsSubview=d.if(this.isSearching,d.const(this.searchingButtonsView),d.const(this.boardsButtonsView)),this.subscribe(l.currentModel.distinct(),function(){return b.getPinSidebar()?void 0:b.hideSidebar()})},t.prototype.events={"keyup .js-search-boards":"keyEvent","input .js-search-boards":function(){return this.searchText.set(this.$searchInput.val())},shortcut:"shortcut"},t.prototype.renderOnce=function(){return this.$el.html(j()),this.renderSidebarState(),this.updatePinned(),r(window).bind(["resize",this.uniqueId()].join("."),this.debounce(function(e){return function(){return e.updateHeight()}}(this),300)),this.subscribeChanges(this.activeBoardsSubview,{out:function(e){return e.$el.detach()},in:function(e){return this.$(".js-board-drawer-boards").append(e.el)}}),this.subscribeChanges(this.activeButtonsSubview,{out:function(e){return e.$el.detach()},in:function(e){return this.$(".js-board-drawer-buttons").append(e.el)}}),this},t.prototype.remove=function(){return r(window).unbind(["resize",this.uniqueId()].join(".")),t.__super__.remove.apply(this,arguments)},t.prototype.ensureUnreadData=function(){var e;if(e=function(e){return function(){return"active"===f.getStatus()?e.UNREAD_POLL_RATE_ACTIVE:e.UNREAD_POLL_RATE_IDLE}}(this),null!=this._lastPoll&&Date.now()-this._lastPoll>1.5*e()&&(this.refreshUnreadData(),this._lastPoll=Date.now()),b.getShowSidebar()||b.getPinSidebar()){if(null==this._unreadTimeout)return this._unreadTimeout=this.setTimeout(function(e){return function(){return e.refreshUnreadData(),e._unreadTimeout=null,e._lastPoll=Date.now(),e.ensureUnreadData()}}(this),e())}else if(null!=this._unreadTimeout)return clearTimeout(this._unreadTimeout),this._unreadTimeout=null},t.prototype.shortcut=function(e){switch(e){case h.B:return b.getPinSidebar()?this.focusInput():b.getShowSidebar()?b.hideSidebar():b.showSidebar(),!0}},t.prototype.clearSearch=function(){this.$searchInput.val("")},t.prototype.focusInput=function(){return this.$searchInput.focus().select()},t.prototype.refreshUnreadData=function(){var e,t,n,r,i;for(m.loadMyBoardsUnreadData().done(),r=o.me(),i=b.getRecentBoards(),e=0,n=i.length;n>e;e++)t=i[e],r.boardList.get(t)||r.boardStarList.getBoardStar(t)||m.loadBoardData(t,g.boardUnread).done()},t.prototype.renderSidebarState=function(){return b.getShowSidebar()||b.getPinSidebar()?(this.$el.addClass("is-shown"),v.hide()):(this.$el.removeClass("is-shown"),this.clearSearch()),this},t.prototype.updateHeight=function(){var e;return e=b.getPinSidebar()?r(window).height()-50:r(window).height()-64,this.$(".board-drawer-content").css({"max-height":e})},t.prototype.updatePinned=function(){return this.$el.toggleClass("boards-drawer-pinned",b.getPinSidebar()),this.updateHeight()},t.prototype.keyEvent=function(e){var t;return t=p.getKey(e),t===h.ArrowUp||t===h.ArrowDown?(this.activeBoardsSubview.get().arrowKeyEvent(e),void this.focusInput()):void(t===h.Enter&&(this.activeBoardsSubview.get().enterKeyEvent(e),this.focusInput()))},t}(_)},{}],418:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(447),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.onCalendar=!0,t}(o)},{}],419:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty,b=[].slice;r=e("jquery"),o=e(431),a=e(422),s=e(276),u=e(425),c=e(83),l=e(569),d=e(133),p=e(549),h=e(156),f=e(546),m=e("moment"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className="calendar-wrapper",t.prototype.events={"click .js-week-view":"switchToWeekViewFromMonth","click .js-month-view":"switchToMonthViewFromWeek","click .js-left-arrow":"navigatePrevious","click .js-right-arrow":"navigateNext","click .js-today":"navigateToday","click .js-open-card-composer":"openComposer"},t.prototype.initialize=function(){return this.monthView=this.subview(a,this.model),this.weekView=this.subview(u,this.model),this.localState=new s({id:"calendar"+this.model.id}),this.localState.fetch(),this.model.viewState.clearSelectedCard()},t.prototype.render=function(e){var t;return null==e&&(e=new Date),t=c.getDaysOfWeek(e).map(function(e){return m(e).format("ddd")}),this.$el.html(f.fill("calendar_toolbar",{days:t})),this.localState.getMode()===u.prototype.VIEWSTATE_PREF_STR?this.showView(this.weekView,e):this.showView(this.monthView,e),this},t.prototype.remove=function(){return this.stopSubscriptions(),this.model.viewState.clearSelectedCard(),t.__super__.remove.apply(this,arguments)},t.prototype.openComposer=function(e){var t,n,i;return d.stop(e),t=r(e.target).closest(".day-cell, .day-column"),i=new Date(parseInt(t.attr("name"))),n=new o({model:this.model.composer,modelCache:this.modelCache}),n.setDate(i),l.show({clientx:e.clientX,clienty:e.clientY,view:n})},t.prototype.showView=function(e,t){var n;return this.currentSubView=e,n=this.$(".calendar-header").removeClass("week-view month-view").addClass(this.currentSubView.HEADER_CLASS_NAME),this.$(".calendar-content").empty().append(this.currentSubView.render(t).el),this.model.viewState.clearSelectedCard(),this.localState.setMode(this.currentSubView.VIEWSTATE_PREF_STR),this.currentSubView.delegateEvents(),this.currentSubView.updateRoute()},t.prototype.switchToWeekViewFromMonth=function(){return this.showView(this.weekView,this.monthView.currentCenterWeek),this.addedToDOM()},t.prototype.switchToMonthViewFromWeek=function(){return this.showView(this.monthView,this.weekView.currentWeek),this.addedToDOM()},t.prototype.setSubscriptions=function(){this.stopSubscriptions(),this.currentSubView===this.monthView?this.monthView.setSubscriptions():(r(h).on("windowClassChange."+this.uniqueId(),function(e){return function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],e.weekSmallWindowResizeCheck.apply(e,t)}}(this)),this.weekView.setSubscriptions())},t.prototype.stopSubscriptions=function(){return this.weekView.stopSubscriptions(),this.monthView.stopSubscriptions(),r(h).off("."+this.uniqueId())},t.prototype.delegateEvents=function(){var e;return t.__super__.delegateEvents.apply(this,arguments),null!=(e=this.currentSubView)?e.delegateEvents():void 0},t.prototype.addedToDOM=function(){return this.setSubscriptions(),this.currentSubView.addedToDOM()},t.prototype.navigateToday=function(){return this.currentSubView.navigateToday()},t.prototype.navigatePrevious=function(){return this.currentSubView.navigatePrevious()},t.prototype.navigateNext=function(){return this.currentSubView.navigateNext()},t.prototype.weekSmallWindowResizeCheck=function(e,t){return h.fSmall&&this.currentSubView===this.weekView?this.switchToMonthViewFromWeek():void 0},t}(p)},{}],420:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),i=e(83),a=e(564),s=e(569),u=e(133),c=e(549),l=e("underscore"),h=e(546),p=e("moment"),d=e(102),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.events={sortreceive:"sortReceive",sortstop:"sortStop","click .js-expand-day:not(.active)":"expand","click .js-toggle-day":"clickToggleDay"},t.prototype.initialize=function(e){return this.data=e.data,this.getCardView=e.getCardView,this.$el.attr("name",i.getMidnightInt(this.data.day)),this.cardsDue=this.data.cardsDueOnDate},t.prototype.remove=function(){return delete this.getCardView,t.__super__.remove.apply(this,arguments)},t.prototype.render=function(e){var t,n,r;return null==e&&(e={}),t=this.data.day,n=i.isFirstOfMonth(t)||i.isLastOfMonth(t),r={date:p(t).format(n?"llll":"D"),isToday:p().isSame(t,"day")},l.extend(e,r),this.$el.html(h.fill("calendar_day",e,{editable:this.model.editable()})),this.renderCardsAndHeaders(),this},t.prototype.renderCardsAndHeaders=function(){return this.updateHeader(),this.renderCardsAndListHeaders()},t.prototype.cardListMap=function(){return l.groupBy(this.cardsDue,function(e){return e.getList().id})},t.prototype.updateHeader=function(){var e;return e=this.cardsDue.length,this.$(".day-cards-header").empty(),e>0?this.$(".day-cards-header").text(d("cards",e)):void 0},t.prototype.renderCardsAndListHeaders=function(){var e,t,n,o,i,s,u,c,l,d,p,m;e=this.$(".calendar-day-list"),e.empty(),s=[],m=this.cardListMap();for(p in m)if(f.call(m,p))for(i=m[p],u={listID:p,listName:this.model.getList(p).get("name")},c=h.fill("calendar_day_list_header",u),s.push(c),l=0,d=i.length;d>l;l++)t=i[l],n=this.getCardView(t),n.$el.hasClass("ui-sortable-helper")||(o=n.render().el,r(o).attr("name",t.cid),n.delegateEvents(),s.push(o));return e.append(s),this.model.editable()?a.refreshIfInitialized(this.$(".js-calendar-sortable")):void 0},t.prototype.sortReceive=function(e,t){var n;return n=function(e){var t;return t=document.elementFromPoint(e.left,e.top),r(".calendar-drag-area")[0].contains(t)},n(t.offset)?t.item.trigger("moveToCalendarDay",[t,this]):(a.abort(),a.refreshIfInitialized(this.$(".js-calendar-sortable")))},t.prototype.sortStop=function(e,t){return t.item.trigger("moveInCalendarDay",[t,this])},t.prototype.clickToggleDay=function(e){return this.$(".calendar-day").hasClass("active")?this.contract(e):this.expand(e)},t.prototype.expand=function(e){var t;return u.stop(e),a.sorting?void 0:(r(".calendar-day.active").removeClass("active"),t=this.$(".calendar-day").addClass("active"),s.hide())},t.prototype.contract=function(e){return u.stop(e),this.$(".calendar-day").removeClass("active"),s.hide()},t}(c)},{}],421:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(420),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.tagName="td",t.prototype.className="day-cell",t.prototype.initialize=function(e){return this.scrollIntoView=e.scrollIntoView,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return t.__super__.render.call(this,{monthView:!0})},t.prototype.expand=function(){var e;return t.__super__.expand.apply(this,arguments),e=this.$(".calendar-day"),this.scrollIntoView({top:this.$el.prop("offsetTop"),height:e.outerHeight()})},t}(r)},{}],422:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("jquery"),o=e(421),a=e(423),s=e(7),u=e(83),c=e(564),l=e(569),d=e(133),p=e(156),h=e("underscore"),f=e(546),m=e("moment"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className=d.extendParentClassName("calendar-month"),t.prototype.WEEK_WRAPPER_ELEMENT="tr",t.prototype.VIEWSTATE_PREF_STR="month",t.prototype.HEADER_CLASS_NAME="month-view",t.prototype.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS=5,t.prototype.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD=5,t.prototype.MINIMUM_WEEKS_KEPT_IN_DOM=20,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=o,this.today=new Date,this.currentMonthCells=[],this.scrollLock=!1,this.weeksKeptInDOM=this.MINIMUM_WEEKS_KEPT_IN_DOM,this.makeDebouncedMethods("shadeDaysUpdateHeader")},t.prototype.render=function(e){var t;return null==e&&(e=this.today),this.$el.html(f.fill("calendar_month")),this.renderBaseWeek(e),this.currentCenterWeek=e,this.currentMonth=u.getFirstOfMonth(e),t=Math.floor(this.weeksKeptInDOM/2),this.renderWeeks(t),this.renderWeeks(-1*t),this.shadeDays(),this.setSubscriptions(),this},t.prototype.getDayView=function(e,n){return t.__super__.getDayView.call(this,e,h.extend({scrollIntoView:this.scrollIntoView.bind(this)},n))},t.prototype.addedToDOM=function(){return t.__super__.addedToDOM.apply(this,arguments),this.calculateVariables(),this.windowResizeCheck(),this.updateHeader(),this.scrollToDay(this.currentCenterWeek)},t.prototype.updateRoute=function(){var e,t,n;return t=u.dateToObj(this.currentMonth),n=t.year,e=t.month,e=d.lpad(e,2,"0"),s.setBoardLocation(this.model.id,"calendar",[n,e],{replace:!0})},t.prototype.setSubscriptions=function(){return this.stopSubscriptions(),r(p).on("windowClassChange."+this.uniqueId(),this.windowClassChangeCheck.bind(this)),r(window).on("resize."+this.uniqueId(),function(e){return function(){return e.windowResizeCheck()}}(this)),r(".calendar-month").on("scroll."+this.uniqueId()+" ",function(e){return function(){return e.scrollCheck()}}(this))},t.prototype.stopSubscriptions=function(){return r(p).off("."+this.uniqueId()),r(window).off("."+this.uniqueId()),r(".calendar-month").off("."+this.uniqueId())},t.prototype.windowClassChangeCheck=function(e,t){var n;return p.fSmall?(r(".calendar-day.active").removeClass("active"),n=new Date(this.currentCenterWeek),this.calculateVariables(),this.windowResizeCheck(),this.scrollCheck(),this.scrollToDay(n)):void 0},t.prototype.calculateVariables=function(){var e;return this.tableSpacing=null!=(e=parseInt(this.$(".calendar-table").css("border-spacing")))?e:5,this.dayCellHeight=this.$(".day-cell").prop("clientHeight")+this.tableSpacing},t.prototype.windowResizeCheck=function(){var e,t,n,o,i;i=r(window).outerHeight(),n=r("#header").outerHeight(),e=r("#board-header").outerHeight(),t=r(".calendar-header").outerHeight(),this.calendarContentHeight=i-(n+e+t),o=Math.ceil(this.calendarContentHeight/this.dayCellHeight),this.weeksKeptInDOM=Math.max(5*o,this.MINIMUM_WEEKS_KEPT_IN_DOM)},t.prototype.updateHeader=function(){var e;return e=""+m(this.currentMonth).format("MMMM YYYY"),r(".js-calendar-header").text(e)},t.prototype.renderBaseWeek=function(e){var t;return t=this.weekRowEl(e),r(".calendar-month").off("."+this.uniqueId()),this.$(".calendar-table").append(t),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.renderWeeks=function(e){var t,n;return e>0&&(t=m(this.lastRenderedSaturday).add(e,"weeks").toDate(),this.renderUpToDay(t)),0>e?(n=m(this.firstRenderedWeek).add(e,"weeks").toDate(),this.renderUpToDay(n)):void 0},t.prototype.renderUpToDay=function(e){var t,n,r,o,i;for(t=this.$(".calendar-table"),n=u.getEndOfWeek(e),o=[];this.lastRenderedSaturday<n;)this.lastRenderedSaturday=m(this.lastRenderedSaturday).add(1,"weeks").toDate(),o.push(this.weekRowEl(this.lastRenderedSaturday));for(t.append(o),r=u.getStartOfWeek(e),i=[];this.firstRenderedWeek>r;)this.firstRenderedWeek=m(this.firstRenderedWeek).subtract(1,"weeks").toDate(),i.unshift(this.weekRowEl(this.firstRenderedWeek));return t.prepend(i),this.scroll(this.dayCellHeight*i.length),this.deleteExcessWeeks(),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.deleteExcessWeeks=function(){var e,t,n,o,i,a,s,u,c,l,d,p,h;if(e=r(".week"),e.length>this.weeksKeptInDOM){if(h=this.$(".calendar-table").outerHeight(),p=r(".calendar-month").prop("scrollTop"),o=h/2>p){for(l=[],n=i=s=e.length-1,u=this.weeksKeptInDOM;u>=s?u>=i:i>=u;n=u>=s?++i:--i)l.push(r(e[n]).remove());return l}for(t=e.length-this.weeksKeptInDOM,this.scroll(-1*this.dayCellHeight*t),d=[],n=a=0,c=t;c>=0?c>a:a>c;n=c>=0?++a:--a)d.push(r(e[n]).remove());return d}},t.prototype.scrollToDay=function(e,t){var n,r,o,i,a,s,c,l;return this.scrollLock?void 0:(i=this.calendarContentHeight/2/this.dayCellHeight,l=m(e).startOf("week"),o=l.clone().subtract(Math.ceil(i),"weeks").toDate(),a=l.clone().add(Math.ceil(i),"weeks").toDate(),this.firstRenderedWeek<=o&&this.lastRenderedWeek>=a?(c=l.clone().subtract(Math.floor(i),"weeks").toDate(),r=u.getMidnightInt(c),n=this.$("[name='"+r+"']"),s=n.prop("offsetTop"),this.scrollTo(s-this.tableSpacing+1,t)):(this.render(e),this.addedToDOM(),this.delegateEvents()),this.updateRoute())},t.prototype.completeAnimatedScroll=function(){return this.enableRenderNewDays()},t.prototype.scrollIntoView=function(e){
var t,n,o,i,a,s;return s=e.top,o=e.height,n=s+o,t=r(".calendar-month"),a=t.scrollTop(),i=a+t.height(),a>s?this.scroll(s-a-this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):n>i?this.scroll(n-i+this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):void 0},t.prototype.scroll=function(e,t){var n,o;return n=r(".calendar-month"),o=n.prop("scrollTop"),this.scrollTo(o+e,t)},t.prototype.scrollTo=function(e,t){var n;return n=r(".calendar-month"),t?(this.scrollLock=!0,n.animate({scrollTop:e},{duration:t,complete:function(e){return function(){return e.completeAnimatedScroll()}}(this)})):n.scrollTop(e)},t.prototype.navigatePrevious=function(){return this.scrollMonth(-1)},t.prototype.navigateNext=function(){return this.scrollMonth(1)},t.prototype.scrollMonth=function(e){var t;return this.scrollLock?void 0:(t=m(this.currentMonth).add(e,"months").startOf("month").add(15,"days").toDate(),this.scrollToDay(t,this.SCROLL_ANIMATION_TIME))},t.prototype.enableRenderNewDays=function(){return this.checkRenderDays(),this.scrollLock=!1},t.prototype.scrollCheck=function(){var e,t,n,o,i,a,s,c,d,p,h,f;return l.hide(),e=r(".calendar-month"),n=e.outerHeight(),d=e.prop("scrollTop"),this.scrollLock||this.checkRenderDays(),o=n/2,f=Math.floor((d+o)/this.dayCellHeight),c=m(this.firstRenderedWeek).add(f,"weeks").toDate(),m(this.currentCenterWeek).isSame(c,"day")||(this.currentCenterWeek=c,i=u.getEndOfWeek(this.currentCenterWeek),(this.currentMonth.getMonth()!==this.currentCenterWeek.getMonth()||this.currentMonth.getMonth()!==i)&&(i.getMonth()===this.today.getMonth()?this.currentMonth=u.getFirstOfMonth(i):this.currentMonth=u.getFirstOfMonth(this.currentCenterWeek),this.shadeDaysUpdateHeaderDebounced()),this.updateRoute()),p=u.getMidnightInt(this.today),t=this.$("[name='"+p+"']"),h=t.prop("offsetTop"),a=h<(s=o+d)&&s<h+this.dayCellHeight,r(".today-button").toggleClass("on-today",a)},t.prototype.shadeDaysUpdateHeader=function(){return this.updateHeader(),this.shadeDays()},t.prototype.checkRenderDays=function(){var e,t,n,o,i,a,s;return e=r(".calendar-month"),t=e.outerHeight(),a=e.prop("scrollTop"),s=this.$(".calendar-table").outerHeight(),n=s-t-a,i=this.dayCellHeight*this.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS,i>n&&(o=!0,this.renderWeeks(this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),i>a&&(o=!0,this.renderWeeks(-1*this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),o&&this.model.editable()?this.defer(function(){return c.refreshCalendarCardSortable()}):void 0},t.prototype.shadeDays=function(){var e,t,n,o,i,a,s,u,c;for(e=this.$(".day-cell"),s=this.currentMonthCells,n=0,i=s.length;i>n;n++)t=s[n],r(t).removeClass("current-month");for(this.currentMonthCells=h.filter(e,this.cellInCurrentMonth,this),u=this.currentMonthCells,c=[],o=0,a=u.length;a>o;o++)t=u[o],c.push(r(t).addClass("current-month"));return c},t.prototype.cellInCurrentMonth=function(e){var t;return t=parseInt(r(e).attr("name")),new Date(t).getMonth()===this.currentMonth.getMonth()},t}(a)},{}],423:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),o=e(418),a=e(83),s=e(564),u=e(549),c=e("underscore"),l=e("moment"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.className="u-fancy-scrollbar calendar-drag-area",t.prototype.SCROLL_ANIMATION_TIME=400,t.prototype.initialize=function(){var e;return e=this.listenToListChanges.bind(this),this.model.listList.each(e),this.listenTo(this.model.listList,"add remove",e)},t.prototype.addedToDOM=function(){return this.model.editable()?this.defer(function(){return s.refreshCalendarCardSortable()}):void 0},t.prototype.delegateEvents=function(){var e,n,r,o,i;for(t.__super__.delegateEvents.apply(this,arguments),o=this.subviewsOfType(this.DAY_VIEW_TYPE),i=[],n=0,r=o.length;r>n;n++)e=o[n],i.push(e.delegateEvents());return i},t.prototype.setSubscriptions=function(){throw new Error("CalendarView::setSubscriptions is an abstract method")},t.prototype.stopSubscriptions=function(){throw new Error("CalendarView::stopSubscriptions is an abstract method")},t.prototype.listenToListChanges=function(e){return this.listenTo(e.cardList,"add remove",function(e){var t;return this.cardsWithDueDates([e]).length>0?(t=new Date(e.get("due")),this.renderCardsOnDates([t])):void 0}),this.listenTo(e.cardList,"change:due",function(e,t){var n,r,o,i,a;return a=e.previousAttributes().due,o=e.get("due"),i=new Date(null!=a?a:null),t=new Date(null!=o?o:null),l(i).isSame(t,"day")?void 0:(r=function(){var e,t,r,i;for(r=[a,o],i=[],e=0,t=r.length;t>e;e++)n=r[e],null!=n&&i.push(new Date(n));return i}(),this.renderCardsOnDates(r))}),this.listenTo(e.cardList,"reset",function(e,t){var n,r,o,i;return o=e.models,i=t.previousModels,r=c.difference(o,i).concat(c.difference(i,o)),this.renderCardsOnDates(function(){var e,t,o;for(o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(new Date(n.get("due")));return o}())})},t.prototype.navigateToday=function(){return this.scrollToDay(this.today,this.SCROLL_ANIMATION_TIME)},t.prototype.getCardView=function(e){return this.subview(o,e,e.cid)},t.prototype.cardsWithDueDates=function(e){return e.filter(function(e){return null!=e.get("due")})},t.prototype.cardsDueOnDate=function(e,t){return this.cardsWithDueDates(e).filter(function(e){return l(e.get("due")).isSame(t,"day")})},t.prototype.cardSubviews=function(){var e,t,n;return n=this.subviewsOfType(this.DAY_VIEW_TYPE),e=c.flatten(function(){var e,r,i;for(i=[],e=0,r=n.length;r>e;e++)t=n[e],i.push(t.subviewsOfType(o));return i}())},t.prototype.calculateFirstAndLastWeeksFromDOM=function(){var e;return e=this.$(".week"),this.firstRenderedWeek=new Date(parseInt(e.first().attr("name"))),this.lastRenderedWeek=new Date(parseInt(e.last().attr("name"))),this.lastRenderedSaturday=a.getEndOfWeek(this.lastRenderedWeek)},t.prototype.renderCardsOnDates=function(e){var t,n,r,o,i,s,u;if(this.$(".week").length>0){for(u=[],i=0,s=e.length;s>i;i++)n=e[i],this.firstRenderedWeek<n&&n<this.lastRenderedSaturday&&(t=this.cardsDueOnDate(this.model.openCards(),n),r=a.getMidnightInt(n),o=this.existingSubview(this.DAY_VIEW_TYPE,this.model,r),o.cardsDue=t,u.push(o.renderCardsAndHeaders()));return u}},t.prototype.renderDayViews=function(e){var t,n,r,o;for(o=[],n=0,r=e.length;r>n;n++)t=e[n],o.push(this.getDayView(t).render().el);return o},t.prototype.getDayView=function(e,t){var n;return n={day:e,cardsDueOnDate:this.cardsDueOnDate(this.model.openCards(),e)},this.subview(this.DAY_VIEW_TYPE,this.model,c.extend({data:n,getCardView:this.getCardView.bind(this)},t),a.getMidnightInt(e))},t.prototype.weekRowEl=function(e){var t,n;return n=this.renderDayViews(a.getDaysOfWeek(e)),t=r(document.createElement(this.WEEK_WRAPPER_ELEMENT)),t.attr("name",a.getMidnightInt(a.getStartOfWeek(e))).addClass("week").append(n),t},t}(u)},{}],424:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(420),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.className="day-column",t}(r)},{}],425:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),o=e(423),i=e(424),s=e(7),u=e(83),c=e(564),l=e(133),p=e(546),d=e("moment"),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className=l.extendParentClassName("calendar-week"),t.prototype.WEEK_WRAPPER_ELEMENT="div",t.prototype.VIEWSTATE_PREF_STR="week",t.prototype.HEADER_CLASS_NAME="week-view",t.prototype.WEEKS_KEPT_IN_DOM=5,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=i,this.today=new Date,this.scrollLock=!1},t.prototype.render=function(e){return null==e&&(e=this.today),this.$el.html(p.fill("calendar_week")),this.currentWeek=u.getStartOfWeek(e),this.appendWeekEl(this.currentWeek),this.prependWeekEl(d(this.currentWeek).subtract(1,"weeks").toDate()),this.appendWeekEl(d(this.currentWeek).add(1,"weeks").toDate()),this},t.prototype.addedToDOM=function(){return t.__super__.addedToDOM.apply(this,arguments),this.weekWidth=r(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek),this.updateToolbar()},t.prototype.updateRoute=function(){var e,t,n,r;return n=u.dateToObj(this.currentWeek),r=n.year,t=n.month,e=n.day,t=l.lpad(t,2,"0"),e=l.lpad(e,2,"0"),s.setBoardLocation(this.model.id,"calendar",[r,t,e],{replace:!0})},t.prototype.setSubscriptions=function(){return r(window).on("resize."+this.uniqueId(),function(e){return function(){return e.resizeCheck()}}(this)),r(".board-menu").on("transitionend."+this.uniqueId()+" webkitTransitionEnd."+this.uniqueId(),function(e){return function(){return e.resizeCheck()}}(this))},t.prototype.stopSubscriptions=function(){return r(window).off("."+this.uniqueId()),r(".board-menu").off("."+this.uniqueId())},t.prototype.resizeCheck=function(){return this.weekWidth=r(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek)},t.prototype.resizeWeekCanvas=function(){var e;return e=this.$(".week").length,r(".week-horizontal-canvas").width(this.weekWidth*e),r(".week").width(this.weekWidth)},t.prototype.updateToolbar=function(){var e,t,n,o,i;return i=d(u.getEndOfWeek(this.currentWeek)),t=d(this.currentWeek),n=t.format("LL")+" - "+i.format("LL"),r(".js-calendar-header").text(n),e=r(".today-button"),o=d(this.today).isSame(this.currentWeek,"week"),e.toggleClass("on-today",o)},t.prototype.appendWeekEl=function(e){var t,n;return n=this.$(".week-horizontal-canvas"),n.append(this.weekRowEl(e)),this.resizeWeekCanvas(),t=this.$(".week"),t.length>this.WEEKS_KEPT_IN_DOM&&(t.first().remove(),this.scrollLeft(-1*this.weekWidth)),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.prependWeekEl=function(e){var t,n;return n=this.$(".week-horizontal-canvas"),n.prepend(this.weekRowEl(e)),t=this.$(".week"),t.length>this.WEEKS_KEPT_IN_DOM&&t.last().remove(),this.resizeWeekCanvas(),this.scrollLeft(this.weekWidth),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.navigatePrevious=function(){return this.navigateWeek({backwards:!0})},t.prototype.navigateNext=function(){return this.navigateWeek({backwards:!1})},t.prototype.navigateWeek=function(e){var t,n,r,o,i;return n=(null!=e?e:{}).backwards,this.scrollLock?void 0:(i=n?-1:1,t=n?this.$(".week").first():this.$(".week").last(),this.currentWeek=d(this.currentWeek).add(i,"weeks"),o=t.attr("name"),r=new Date(parseInt(o)),d(this.currentWeek).isSame(r,"day")&&(n?this.prependWeekEl(d(this.currentWeek).subtract(1,"weeks").toDate()):this.appendWeekEl(d(this.currentWeek).add(1,"weeks").toDate()),this.model.editable()&&this.defer(function(){return c.refreshCalendarCardSortable()})),this.scrollToDay(this.currentWeek,this.SCROLL_ANIMATION_TIME))},t.prototype.scrollLeft=function(e,t){var n,o;return n=r(".calendar-week"),o=n.prop("scrollLeft"),this.scrollLeftTo(o+e,t)},t.prototype.scrollLeftTo=function(e,t){var n;return n=r(".calendar-week"),t?(this.scrollLock=!0,n.animate({scrollLeft:e},{duration:t,complete:function(e){return function(){return e.completeAnimatedScroll()}}(this)})):n.scrollLeft(e)},t.prototype.scrollToDay=function(e,t){var n,r,o;return this.firstRenderedWeek<e&&e<this.lastRenderedSaturday?(o=u.getMidnightInt(u.getStartOfWeek(e)),n=this.$(".week[name='"+o+"']"),r=n.prop("offsetLeft"),this.scrollLeftTo(r,t),this.currentWeek=new Date(o),this.updateToolbar()):(this.render(e),this.addedToDOM(),this.delegateEvents()),this.updateRoute()},t.prototype.completeAnimatedScroll=function(){return this.scrollLock=!1},t}(o)},{}],426:[function(e,t,n){var r,o,i;i=null!=(o=window.URL)?o:window.webkitURL,r=null!=navigator.getUserMedia?navigator.getUserMedia.bind(navigator):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia.bind(navigator):null,t.exports=new(function(){function e(){this.stream=null}return e.prototype.supportsGetUserMedia=function(){return null!=r},e.prototype.connected=function(){return null!=this.stream},e.prototype.getStream=function(){return this.stream},e.prototype.getStreamUrl=function(){return i.cre},e.prototype.getError=function(){return this.error},e.prototype.connect=function(e){var t,n;return null!=this.stream?e(null,this.stream):(this.error=null,t=function(t){return function(n){return t.error=n,t.stream=null,e("Could not connect")}}(this),n={video:!0},r(n,function(t){return function(n){return t._setRawStream(n),t.stream=i.createObjectURL(n),e(null,t.stream)}}(this),t))},e.prototype._setRawStream=function(e){return this.stop(),this.rawStream=e},e.prototype.stop=function(){var e,t,n,r;return null!=this.rawStream&&("function"==typeof(e=this.rawStream).stop&&e.stop(),"function"==typeof(t=this.rawStream).getTracks&&null!=(n=t.getTracks())&&null!=(r=n[0])&&"function"==typeof r.stop&&r.stop()),this.stream=null,this.rawStream=null},e}())},{}],427:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),i=e(569),a=e(549),s=e(546),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="crop photo",t.prototype.events=function(){return{"click .js-done":"done","click .js-back":"back"}},t.prototype.setImage=function(e){return this.url=e},t.prototype.render=function(){return this.$el.html(s.fill("crop_photo")),this.$(".crop-image").attr("src",this.url).css({"max-width":4096,"max-height":4096}).crop({width:270,height:270}).on("mousewheel",function(e){var t;return t=r(this).data("crop"),e.originalEvent.wheelDelta<0?t.zoomIn():t.zoomOut()}).on("crop",function(e){return function(t){return e.cropX=t.cropX,e.cropY=t.cropY,e.cropW=t.cropW,e.cropH=t.cropH}}(this)),this},t.prototype.done=function(){var e,t,n;return n=this.$(".crop-image")[0],e=r("<canvas>").attr({width:270,height:270}),t=e[0].getContext("2d"),t.drawImage(n,this.cropX,this.cropY,this.cropW,this.cropH,0,0,270,270),this.options.savePhoto(e[0].toDataURL("image/png")),i.hide()},t.prototype.back=function(){return i.popView()},t}(a)},{}],428:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),o=e(426),i=e(427),a=e(569),u=e(549),l=e(546),c=e(104),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.events={"click .js-connect-camera":"connectCamera","click .js-snap":"snap"},t.prototype.willBePopped=function(){return o.stop()},t.prototype.viewTitleKey="take a photo",t.prototype.render=function(){var e,t,n;return e={connected:o.connected()},n=o.getError(),null!=n&&("PermissionDeniedError"===n.name?e.error=c(["member profile error","could not connect to camera"]):null!=n.name?e.error=n.name:e.error=n),this.$el.html(l.fill("take_photo",e)),o.connected()&&(t=this.$(".video")[0],t.src=o.getStream(),t.play()),this},t.prototype.getData=function(){return this.connectCamera()},t.prototype.connectCamera=function(){return o.connect(function(e){return function(t){return e.render()}}(this))},t.prototype.snap=function(){var e,t,n,s;return s=this.$(".video")[0],e=r("<canvas>").attr({width:640,height:480}),t=e[0].getContext("2d"),t.drawImage(s,0,0,640,480),n=new i({model:this.model,modelCache:this.modelCache,savePhoto:this.options.savePhoto}),n.setImage(e[0].toDataURL("image/png")),o.stop(),a.pushView({view:n,hardToClose:!0})},t}(u)},{}],429:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=function(e,t){function n(){this.constructor=e}for(var r in t)j.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},j={}.hasOwnProperty;w=e("underscore"),v=e("react"),C=e(541)("canonical_board"),k=e(237),r=k.Board,o=k.BoardLists,i=k.BoardName,u=k.Card,c=k.ErrorMessage,p=k.List,g=k.PlaceholderBoardTile,b=k.TeamName,h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.displayName="LoadingCanonicalBoard",t.prototype.render=C.renderable(function(){return C.tag(g,{numLists:5})}),t}(v.Component),l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.displayName="GenericErrorCanonicalBoard",t.prototype.render=C.renderable(function(){var e;return e=this.props.errorText,C.div(".canonical-board-error",function(t){return function(){return C.tag(r,{className:"canonical-board-error-alert-taco",hasError:!0},function(){return C.tag(c,function(){return C.format("generic error",{message:e})})})}}(this))}),t}(v.Component),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.displayName="ConfusedTacoCanonicalBoard",t.prototype.render=C.renderable(function(){return C.div(".canonical-board-error",function(e){return function(){return C.tag(r,{className:e.props.className,hasError:!0},function(){return C.tag(c,function(){return C.format(e.props.error)}),C.tag(o,function(){return[3,1,3,2,1].forEach(function(e){return C.tag(p,function(){return w.times(e,function(){return C.tag(u)})})})})})}}(this))}),t}(v.Component),f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.displayName="NotFoundCanonicalBoard",t.prototype.render=C.renderable(function(){return C.tag(s,{className:"canonical-board-error-confused-taco",error:"board not found error"})}),t}(v.Component),m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.displayName="NetworkErrorCanonicalBoard",t.prototype.render=C.renderable(function(){return C.tag(s,{className:"canonical-board-error-confused-taco",error:"network error"})}),t}(v.Component),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.displayName="InvalidCardCanonicalBoard",t.prototype.render=C.renderable(function(){return C.tag(s,{className:"canonical-board-error-confused-taco",error:"invalid board error"})}),t}(v.Component),y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.displayName="UnauthorizedCanonicalBoard",t.prototype.render=C.renderable(function(){return C.tag(s,{className:"canonical-board-error-bouncer-taco",error:"unauthorized board error"})}),t}(v.Component),_=function(e){var t;return t=Math.max(1,Math.max.apply(null,e.map(function(e){return e.cardList.length}))),e.map(function(e){var n,r;return n=e.cardList.length,r=n/t,r>.7&&n>=3?3:r>.3&&n>=2?2:1})},a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.displayName="CanonicalBoard",t.prototype.render=C.renderable(function(){var e,t,n;return e=this.props.board,n=e.listList.slice(0,5),0===n.length&&(n=[{cardList:{length:1}}]),t=e.get("prefs").backgroundTopColor?e.get("prefs").backgroundTopColor:"dark"===e.get("prefs").backgroundBrightness?"#333":"light-gray-50",C.div(function(a){return function(){return C.div(".canonical-board",function(){return C.a(".canonical-board-link",{href:e.get("url")},function(){return C.tag(r,{bgColor:e.get("prefs").backgroundColor,bgImage:e.get("prefs").backgroundImage,headerBgColor:t},function(){return C.tag(i,function(){return C.text(e.get("name"))}),C.tag(o,function(){var e;return e=_(n),n.map(function(t,n){return C.tag(p,function(){var t,r,o,i;for(i=[],t=r=0,o=e[n];o>=0?o>r:r>o;t=o>=0?++r:--r)i.push(C.tag(u));return i})})})})})})}}(this))}),t}(v.Component),t.exports={CanonicalBoard:a,GenericErrorCanonicalBoard:l,InvalidCanonicalBoard:d,LoadingCanonicalBoard:h,NetworkErrorCanonicalBoard:m,NotFoundCanonicalBoard:f,UnauthorizedCanonicalBoard:y}},{}],430:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z,R=function(e,t){function n(){this.constructor=e}for(var r in t)F.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},F={}.hasOwnProperty;w=e(83),A=e("react"),V=e(541)("canonical_card"),N=e(238),r=N.ArchivedBadge,o=N.AttachmentsBadge,i=N.Avatar,a=N.Board,s=N.BoardAndListName,c=N.Card,l=N.CardBadges,d=N.CardCover,p=N.CardLabel,h=N.CardLabels,m=N.CardLink,f=N.CardMembers,g=N.CardTitle,v=N.ChecklistBadge,b=N.CommentsBadge,_=N.DescriptionBadge,k=N.DueDateBadge,E=N.NotificationBadge,O=N.PlaceholderCard,M=N.SubscribedBadge,B=N.ThemeProvider,P=N.TrelloAttachmentsBadge,D=N.VotesBadge,z={archivedIcon:"https://a.trellocdn.com/images/canonical-card/07222c7374edc19d8dd90805619124cc/archived-icon.svg",attachmentIcon:"https://a.trellocdn.com/images/canonical-card/1cfee90d567b657e6d589c5ea649798e/attachment-icon.svg",checklistIconComplete:"https://a.trellocdn.com/images/canonical-card/c2d9cae64cc0ecddaba63584f0aeabaf/checklist-icon-complete.svg",checklistIconIncomplete:"https://a.trellocdn.com/images/canonical-card/45bbfd3100c4e4ea9957dc3a58473bf0/checklist-icon-incomplete.svg",commentIcon:"https://a.trellocdn.com/images/canonical-card/488a6237f42e1c428b2746e2c5fc25bb/comment-icon.svg",descriptionIcon:"https://a.trellocdn.com/images/canonical-card/d490b4a6ff5f2799fac02f8e172b2529/description-icon.svg",dueDateIcon:"https://a.trellocdn.com/images/canonical-card/38bca72300926a576d5b1434a7a51a36/duedate-icon.svg",dueDateIconComplete:"https://a.trellocdn.com/images/canonical-card/ae9932d5b43424dc9f9191b367b13739/duedate-complete-icon.svg",joinIcon:"https://a.trellocdn.com/images/canonical-card/0297c32ebceac637541833b846569df4/join-icon.svg",notificationIcon:"https://a.trellocdn.com/images/canonical-card/34d2bcee39a632187325303ebe866aa3/notification-icon.svg",subscribeIcon:"https://a.trellocdn.com/images/canonical-card/8d579b9e56640fe5ff62a79707595e4a/subscribe-icon.svg",trelloAttachmentIcon:"https://a.trellocdn.com/images/canonical-card/5eb536632630ab0ae830699c686ab15c/trello-attachment-icon.svg",voteIcon:"https://a.trellocdn.com/images/canonical-card/77ada3615b3c7c1781b4a91c6690c393/vote-icon.svg"},I={"business-blue":"business-blue-500","light-gray":"light-gray-500",black:"near-black",blue:"trello-blue-500",green:"green-500",lime:"lime-500",orange:"orange-500",pink:"pink-500",purple:"purple-500",red:"red-500",sky:"sky-500",yellow:"yellow-500"},j=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return R(t,e),t.prototype.displayName="LoadingCanonicalCard",t.prototype.render=V.renderable(function(){return V.tag(O)}),t}(A.Component),C=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return R(t,e),t.prototype.displayName="GenericErrorCanonicalCard",t.prototype.render=V.renderable(function(){var e;return e=this.props.errorText,V.div(".canonical-card-error",function(t){return function(){return V.tag(B,{theme:z},function(){return V.tag(a,{bgColor:"light-gray-300"},function(){return V.tag(c,{className:"canonical-card-error-card"},function(){return V.tag(d,{bgColor:"light-gray-100",height:40,img:"https://a.trellocdn.com/images/canonical-card/c0c2af9001bc577cd570f06de235b713/alert-taco.svg",className:"error-card-cover",width:38}),V.tag(g,function(){return V.format("generic error",{message:e})})})})})}}(this))}),t}(A.Component),L=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return R(t,e),t.prototype.displayName="UnauthorizedCanonicalCard",t.prototype.render=V.renderable(function(){return V.div(".canonical-card-error",function(e){return function(){return V.tag(B,{theme:z},function(){return V.tag(a,{bgColor:"light-gray-300"},function(){return V.tag(c,{className:"canonical-card-error-card"},function(){return V.tag(d,{bgColor:"light-gray-100",height:48,img:"https://a.trellocdn.com/images/canonical-card/5ee77a1458fc988cc9bcbaf0577db13a/bouncer-taco.svg",className:"unauthorized-card-cover"}),V.tag(g,function(){return V.format("unauthorized card error")})})})})}}(this))}),t}(A.Component),y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return R(t,e),t.prototype.displayName="ConfusedTacoCanonicalCard",t.prototype.render=V.renderable(function(){return V.div(".canonical-card-error",function(e){return function(){return V.tag(B,{theme:z},function(){return V.tag(a,{bgColor:"light-gray-300"},function(){return V.tag(c,{className:"canonical-card-error-card"},function(){return V.tag(d,{bgColor:"light-gray-100",height:40,img:"https://a.trellocdn.com/images/canonical-card/1d592218314218997168e8c80d9bfea7/confused-taco.svg",className:"error-card-cover",width:38}),V.tag(g,function(){return V.format(e.props.error)})})})})}}(this))}),t}(A.Component),T=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return R(t,e),t.prototype.displayName="NotFoundCanonicalCard",t.prototype.render=V.renderable(function(){return V.tag(y,{error:"card not found error"})}),t}(A.Component),S=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return R(t,e),t.prototype.displayName="ServerErrorCanonicalCard",t.prototype.render=V.renderable(function(){return V.tag(y,{error:"network error"})}),t}(A.Component),x=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return R(t,e),t.prototype.displayName="InvalidCardCanonicalCard",t.prototype.render=V.renderable(function(){return V.tag(y,{error:"invalid card error"})}),t}(A.Component),u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return R(t,e),t.prototype.displayName="CanonicalCard",t.prototype.render=V.renderable(function(){var e,t,n,u,c,d,y,C,x,j,S;return S=this.props,t=S.board,u=S.canRemove,c=S.card,y=S.labels,C=S.list,x=S.members,j=S.numNotifications,e=c.get("badges"),d=c.get("closed"),n=t.get("prefs").backgroundBottomColor?t.get("prefs").backgroundBottomColor:"dark"===t.get("prefs").backgroundBrightness?"#333":"light-gray-300",V.div(function(u){return function(){return V.div(".canonical-card",function(){return V.tag(B,{theme:z},function(){return V.tag(a,{bgColor:t.get("prefs").backgroundColor,bgImage:t.get("prefs").backgroundImage,headerBgColor:n},function(){return V.tag(m,{href:c.get("url")},function(){return y.length>0&&V.tag(h,function(){return y.forEach(function(e){var t;return t=e.get("color"),null!==t?V.tag(p,{color:I[t]},function(){return V.text(e.get("name")||" ")}):void 0})}),V.tag(g,function(){return V.text(c.get("name"))}),V.tag(l,function(){var t,n;return j>0&&V.tag(E,{numUnread:j}),e.subscribed&&V.tag(M),e.votes>0&&V.tag(D,{numVotes:e.votes}),null!==e.due&&V.tag(k,{dueDate:new Date(e.due),isComplete:e.dueComplete},function(){return V.text(w.toDateString(e.due))}),e.description&&V.tag(_),e.comments>0&&V.tag(b,{numComments:e.comments}),n=e.attachmentsByType?e.attachmentsByType.trello.board+e.attachmentsByType.trello.card:0,t=e.attachments-n,t>0&&V.tag(o,{numAttachments:t}),n>0&&V.tag(P,{numAttachments:n}),e.checkItems>0&&V.tag(v,{numItems:e.checkItems,numComplete:e.checkItemsChecked}),d?V.tag(r,function(){return V.format("archived card badge label")}):void 0}),x.length>0?V.tag(f,function(){var e,n,r,o,a;for(a=[],n=x.length-1;n>=0;n+=-1)r=x[n],e=r.get("avatarHash"),a.push(V.tag(i,{deactivated:"deactivated"===(null!=(o=t.getOrganization())?o.getMemberType(r):void 0),img:e&&[window.avatarDomain,e,"30.png"].join("/"),initials:r.get("initials")}));return a}):void 0}),V.tag(s,{boardName:t.get("name"),listName:C.get("name"),title:V.l("board")+": "+t.get("name")+", "+V.l("list")+": "+C.get("name")})})})})}}(this))}),t}(A.Component),t.exports={CanonicalCard:u,GenericErrorCanonicalCard:C,InvalidCanonicalCard:x,LoadingCanonicalCard:j,NetworkErrorCanonicalCard:S,NotFoundCanonicalCard:T,UnauthorizedCanonicalCard:L}},{}],431:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),i=e(100),a=e(22),s=e(569),u=e(133),c=e(549),l=e("underscore"),p=e(546),d=e(104),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="calendar-card-composer",t.prototype.initialize=function(){return this.board=this.model.getBoard()},t.prototype.events={"change .js-select-list":"updatePositionList","change .js-select-position":"renderValues","click .js-add-card":"addCard",keydown:"keydownEvent"},t.prototype.viewTitleKey="add card",t.prototype.setDate=function(e){return this.date=e,this.date.setHours(12)},t.prototype.remove=function(){var e;return e={title:this.$(".js-card-title").val(),idList:this.$(".js-select-list").val(),pos:this.$(".js-select-position").val()},this.model.set(e).save(),t.__super__.remove.apply(this,arguments)},t.prototype.render=function(){var e;return e={title:this.model.get("title")},this.$el.html(p.fill("popover_card_from_calendar",e)),this.updateListList(),this.updatePositionList(),this.defer(function(e){return function(){return u.setCaretAtEnd(e.$(".js-card-title")[0])}}(this)),this},t.prototype.keydownEvent=function(e){i.getKey(e)===a.Enter&&this.addCard(e)},t.prototype.addCard=function(e){var t,n,o,i;return u.stop(e),(n=r.trim(this.$(".js-card-title").val()))?(s.hide(),this.model.clearItems(),this.model.set("pos","bottom"),o=this.selectedList(),i=parseInt(this.$(".js-select-position").val()),t={closed:!1,dateLastActivity:new Date,due:this.date.toString(),idList:o.id,pos:o.calcPos(i),name:n},o.cardList.create(t)):void 0},t.prototype.updateListList=function(){var e,t;return e=this.$(".js-select-list"),e.empty(),t=this.board.listList.models,l.each(t,function(t){return r("<option>").val(t.id).text(t.get("name")).appendTo(e)}),e.val(this.model.get("idList")),e.val()||e.find("option").first().prop("selected",!0),this.renderValues()},t.prototype.updatePositionList=function(){var e,t,n,o,i;return e=this.$(".js-select-position"),n=this.selectedList(),e.empty(),null!=n&&(o=n.cardList.length,t=function(){i=[];for(var e=0;o>=0?o>=e:e>=o;o>=0?e++:e--)i.push(e);return i}.apply(this),l.each(t,function(n){var o;return o=function(){switch(n){case 0:return" (Top)";case t.length-1:return" (Bottom)";default:return""}}(),r("<option>").val(n).text(n+1+o).appendTo(e)}),e.val(this.model.get("pos")),e.val()||e.find("option").last().prop("selected",!0)),this.renderValues()},t.prototype.selectedList=function(){var e;return e=this.$(".js-select-list").val(),l.findWhere(this.board.listList.models,{id:e})},t.prototype.renderValues=function(){var e,t,n,o;n=this.selectedList(),e=this.$(".js-list-value"),t=this.$(".js-pos-value"),null!=n?(e.text(n.get("name")),o=parseInt(this.$(".js-select-position").val()),t.text(o+1)):(e.empty().append(r("<i></i>").text(d("no lists"))),t.empty().append(r("<i></i>").text(d("n/a")))),this.$(".js-add-card,.js-card-title").prop("disabled",null==n)},t}(c)},{}],432:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S=function(e,t){function n(){this.constructor=e}for(var r in t)T.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},T={}.hasOwnProperty;r=e("jquery"),o=e(82),s=e(433),u=e(434),c=e(435),l=e(436),d=e(561),p=e(7),w=e(144),h=e(100),m=e(22),k=e(105),f=e(569),g=e("bluebird"),v=e(133),b=e(549),y=e("underscore"),x=e(546),j=e(51),_=e(104),C=e(863),i=k("CardComposer",["TooManyCards"]),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.className="card-composer",t.prototype.initialize=function(){return this.listenTo(this.model,"change:idLabels change:idMembers",this.renderSelectedItems),this.listenTo(this.model,"change:vis",this.frameDebounce(this.renderVisibility)),this.listenTo(this.model.labelList,"add remove reset change",this.frameDebounce(this.renderSelectedItems))},t.prototype.events={"click .js-add-card":"submitCard","click .js-cancel":"clearAndHide","click .js-cc-menu":"openMenu",keyup:"keyupEvent",paste:"pasteEvent",keydown:"keydownEvent"},t.prototype.render=function(e,t){var n,r;return r=this,n=this.model.toJSON({board:!0}),this.renderVisibility(),this.$el.html(x.fill("card_composer_inline",n)),this.renderSelectedItems(),this.defer(function(e){return function(){return v.setCaretAtEnd(e.$(".js-card-title")[0]),"function"==typeof t?t():void 0}}(this)),this.$(".js-card-title").autosize(),this},t.prototype.renderVisibility=function(){return this.$el.toggleClass("hide",!this.model.get("vis")),this},t.prototype.clearTextField=function(){
return this.model.save("title",""),this.$(".js-card-title").val("").trigger("autosize.resize")},t.prototype.submitCard=function(e){var t,n,o,a;return e&&v.stop(e),f.hide(),a=r.trim(this.$(".js-card-title").val()),""===a?void this.$el.find(".js-card-title").focus().select():(t=y.compact(a.split(/\r\n|\r|\n/)),n=t.length,o=n.toString(),void g.try(function(t){return function(){if(n>100)throw new i.TooManyCards;return n>1?new g(function(t){return d.toggle("create many cards",{elem:r(e.target),html:_("confirm.create many cards.text",{count:o}),confirmText:_("confirm.create many cards.confirm",{count:o}),fxConfirm:function(e){return function(e){return t(!0)}}(this),fxCancel:function(e){return function(e){return t(!1)}}(this)})}):!1}}(this)).then(function(n){return function(r){var o;return n.clearTextField(),o=e.shiftKey===!0,r?n.createMultipleCards(t,o):n.createCard(a,{openCard:o,selectCard:!0,removeNewLines:!0}),n.clearItems()}}(this)).catch(i.TooManyCards,function(t){return function(){return d.toggle("too many cards",{elem:r(e.target),html:_("confirm.too many cards.text",{count:o}),fxConfirm:function(e){return f.hide()}})}}(this)).done())},t.prototype.createCard=function(e,t){var n,r,o,i,a,s,u,c,l,d;c=null!=t?t:{},u=c.openCard,d=c.selectCard,l=c.removeNewLines,e=e.trim(),this.$el.trigger("prevent-scroll-selection"),l&&(e=e.replace(/(\r\n|\n|\r)/gm," ")),a=y.clone(this.model.get("idMembers")),i=y.pluck(this.model.labelList.models,"id"),""!==e&&(s={name:e,pos:this.model.getList().calcPos(this.model.get("index")),closed:!1,idLabels:i,idMembers:a,dateLastActivity:Date.now()},this.model.moveToNext(),n=i.length>0,o=this.model.getList().cardList.create(s,{success:function(e){return function(e){n&&a.length>0?j("Card Composer","Card Added","With Members and Labels"):a.length>0?j("Card Composer","Card Added","With Members"):n?j("Card Composer","Card Added","With Labels"):j("Card Composer","Card Added","No items included")}}(this),modelCache:this.modelCache}),r=this.model.getBoard(),r.filter.addNewCard(o),d&&r.viewState.selectCard(o),u&&p.showCardDetail(o,{runMethod:o.shouldSuggestDescription()?"expandDesc":void 0}))},t.prototype.createMultipleCards=function(e,t){var n,r,o,i,a;for(i=e.length,n=r=0,o=e.length;o>r;n=++r)a=e[n],e.length-1===n?this.createCard(a,{openCard:t,selectCard:!0}):this.createCard(a);j("Card Composer","Added Mulitple Cards",i)},t.prototype.pasteEvent=function(){this.$(".js-card-title").focus().keyup().trigger("autosize.resize")},t.prototype.keydownEvent=function(e){var t,n,o,i,a,l,d,p;return a=h.getKey(e),t=this.$(".js-card-title"),i=r(e.target).closest(".js-card-title").hasClass("js-card-title"),o=r(e.target).closest(".js-add-card").hasClass("js-add-card"),!i&&!o||f.isVisible||a!==m.Enter?void((a===m.Tab||a===m.Enter)&&(t.focus(),p=v.getWordFromCaret(t[0]),l=r(null!=(d=f.view)?d.el:void 0),n=!1,f.view instanceof u?(l.find(".js-members-list .item.selected:first .js-select-member").first().click(),n=!0):f.view instanceof s?(l.find(".js-select-label.selected").first().click(),n=!0):f.view instanceof c?l.find(".js-pos-results").length>0&&(l.find(".js-pos-results li.selected:first a").first().click(),n=!0):a===m.Tab&&""===t.val()&&(v.stop(e),this.hide(),e.shiftKey?r(this.el).closest(".js-list").find(".editable:first .current").click():r(this.el).closest(".js-list").next().find(".editable:first .current").click()),n&&(v.stop(e),v.insertSelection(t,"",p.start,p.end),this.model.set("title",t.val())),this.renderSelectedItems(),f.hide())):(v.stop(e),void this.submitCard(e))},t.prototype.keyupEvent=function(e){var t,n,i,a,l,d,p,g,b,w,_,k,C,x,j;if(t=this.$(".js-card-title"),g=h.getKey(e),g!==m.Tab&&g!==m.Enter){if(g===m.Escape)return v.stop(e),f.hide(),void t.focus();if(h.isArrow(g))return v.stop(e),w=r(null!=(k=f.view)?k.el:void 0),void(f.view instanceof u?v.navMenuList(w.find(".js-members-list"),".item",g):f.view instanceof s?v.navMenuList(w,".js-select-label",g):f.view instanceof c&&w.find(".js-pos-results").length>0&&v.navMenuList(w.find(".js-pos-results"),"li",g));if(!o.isTouch()&&r(e.target).closest(".js-card-title").hasClass("js-card-title")){if(j=v.getWordFromCaret(t[0]),d=/^@\S/.test(j.str.substring(0,2)),l=/^\#\S/.test(j.str.substring(0,2)),p=/^\^\S/.test(j.str.substring(0,2)),C=j.str.substring(1).toLowerCase(),!(d||l||p))return this.model.set("title",this.$(".js-card-title").val()),f.hide();if(g===m.Shift||g===m.Alt||g===m.Control);else{if(d)return x=new u({model:this.model,modelCache:this.modelCache}),i=y.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id"),a=v.filterMembers(this.modelCache,C,i),a.length>0?(x.populate(a,!0),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),n=r(x.el).find(".js-members-list .item:first"),v.selectMenuItem(r(x.el).find(".js-members-list"),".item",n)):f.hide();if(l)return x=new s({model:this.model,modelCache:this.modelCache}),b=this.model.getBoard().filterLabels(C),b.length>0?(x.populate(b),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),n=r(x.el).find(".edit-labels-pop-over .js-select-label:first"),v.selectMenuItem(r(x.el).find(".edit-labels-pop-over"),"li",n)):f.hide();if(p)return x=new c({model:this.model,modelCache:this.modelCache}),_=x.filterPos(C),_.hasData?(x.populateResults(_),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),n=r(x.el).find(".js-pos-results li:first"),v.selectMenuItem(r(x.el).find(".js-pos-results"),"li",n)):f.hide()}}}},t.prototype.renderSelectedItems=function(){var e,t,n,r,o,i,a,s,u,c,l,d,p,h;for(o=this.model.get("idMembers"),r=!y.isEmpty(o),t=this.$(".js-list-card-composer-members").empty(),p=this.modelCache.get("Member",o),i=0,c=p.length;c>i;i++)d=p[i],t.append("<div class='member js-remove-member' idMember='"+d+"'>"+C(d.toJSON())+"</div>");for(u=this.model.get("labels"),n=!y.isEmpty(u),e=this.$(".js-list-card-composer-labels").empty(),h=this.model.labelList.models,a=0,l=h.length;l>a;a++)s=h[a],y.isEmpty(s.get("color"))||e.append("<div class='card-label card-label-"+s.get("color")+" mod-card-front' title='"+w(s.get("name"))+"' >"+w(s.get("name"))+"</div>");this.$(".js-clear-all-items").toggle(n||r)},t.prototype.openMenu=function(e){return v.stop(e),j("Card Composer","Open Selector Menu"),f.toggle({elem:e.target,view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.clearItems=function(e){return this.model.clearItems()},t.prototype.hide=function(e){this.model.save("vis",!1)},t.prototype.clearAndHide=function(e){return this.clearItems(),this.hide()},t.prototype.scrollIntoView=function(){var e,t;return t=this.$el.offset().top,e=this.$el.closest(".list-cards"),e.scrollTop(t+this.$el.height())},t}(b)},{}],433:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),i=e(133),a=e(549),s=e("underscore"),u=e(546),c=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="select labels",t.prototype.tagName="ul",t.prototype.className="edit-labels-pop-over",t.prototype.events={"mouseenter .item":"hoverLabelSelect","click .card-label":"addOrRemoveLabel"},t.prototype.populate=function(e){this.populatedLabelList=e},t.prototype.render=function(){var e,t,n,r,o,a,c,l;return l=this,a=[],e=this.model.getLabels(),o=null!=(c=this.populatedLabelList)?c:this.model.getBoard().getLabels(),a=function(){var t,i,a;for(a=[],t=0,i=o.length;i>t;t++)r=o[t],n=s.include(e,r),a.push({id:r.id,color:r.get("color"),name:r.get("name"),isActive:n});return a}(),t={labels:a},this.$el.html(u.fill("select_labels",t)),i.selectMenuItem(this.$(".edit-labels-pop-over"),".js-select-label",this.$(".js-select-label").first()),this},t.prototype.hoverLabelSelect=function(e){return i.selectMenuItem(this.$(".edit-labels-pop-over"),".js-select-label",r(e.target).closest(".js-select-label"))},t.prototype.addOrRemoveLabel=function(e){var t,n;i.stop(e),t=r(e.target).closest(".js-select-label"),t.toggleClass("active"),n=t.attr("data-idlabel"),this.model.toggleLabel(this.modelCache.get("Label",n))?c("Card Composer","Add Label"):c("Card Composer","Remove Label")},t}(a)},{}],434:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),i=e(100),a=e(22),s=e(629),u=e(133),c=e(549),l=e("underscore"),p=e(546),h=e(51),d=e(104),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="select members",t.prototype.events={"mouseenter .item":"hoverMemberSelect","click .item":"addOrRemoveMember",keyup:"keyupEvent"},t.prototype.populate=function(e,t){return this.data={idMems:null!=e?e:l.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id")},this.data.showSearch=!(this.data.idMems.length<=5||t)},t.prototype.render=function(){var e;return e=this,this.$el.html(p.fill("popover_member_searcher",this.data)),this.fillMems(this.data.idMems),this.$(".js-filter-emoji").length>0&&this.setTimeout(function(e){return function(){return e.$(".js-filter-emoji").focus().select()}}(this),20),this.$(".js-filter-members").length>0&&this.setTimeout(function(e){return function(){return e.$(".js-filter-members").focus().select()}}(this),20),this},t.prototype.fillMems=function(e){var t,n,r,o,i,a;for(t=this.$(".js-members-list"),t.empty(),a=e.slice(0,5),n=0,o=a.length;o>n;n++)r=a[n],i=this.modelCache.get("Member",r),this.appendSubview(this.subview(s,i,{card:this.model}),t)},t.prototype.filterAndFillMembers=function(e){var t,n,r;n=l.pluck(this.model.getBoard().memberList.models,"id"),r=u.filterMembers(this.modelCache,e,n),r.length>0?(this.fillMems(r),t=this.$(".js-members-list .item:first"),u.selectMenuItem(this.$(".js-members-list"),".item",t)):this.$(".js-members-list").html('<li><p class="empty"></p></li>').find("p").text(d("no matched members"))},t.prototype.hoverMemberSelect=function(e){var t;return t=r(e.target).closest(".item"),u.selectMenuItem(this.$(".js-members-list"),".item",t)},t.prototype.keyupEvent=function(e){var t,n;n=i.getKey(e),t=r(".js-filter-members").val().trim().toLowerCase(),n===a.Tab||n===a.Enter?(u.stop(e),this.$(".js-members-list .item.selected:first .js-select-member").first().click()):n===a.ArrowUp||n===a.ArrowDown?(u.stop(e),u.navMenuList(this.$(".js-members-list"),".item",n)):this.filterAndFillMembers(t)},t.prototype.addOrRemoveMember=function(e){var t,n,o;u.stop(e),o=r(e.target).closest(".item"),o.toggleClass("active"),n=o.find(".username").text(),t=o.find("[idMember]").attr("idMember"),this.model.toggle("idMembers",t)?h("Card Composer","Add Member"):h("Card Composer","Remove Member")},t}(c)},{}],435:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),i=e(569),a=e(133),s=e(549),u=e("underscore"),l=e(546),d=e(51),c=e(104),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="select position",t.prototype.events={"change .js-select-list":"changeList","change .js-select-position":"changePosition","mouseenter .js-pos-results li":"hoverPosResultsSelect","click .js-select-pos-keyword":"selectPosResult","click .js-select-pos-pos":"selectPosResult","click .js-select-pos-list":"selectPosResult"},t.prototype.populateResults=function(e){return this.data={filtered:!0,keywordList:e.keywordList.map(function(e){return function(t){return{value:t,indexString:t,listName:e.model.get("list").get("name")}}}(this)),indexList:e.indexList.map(function(e){return function(t){return{value:t,indexString:String(t),listName:e.model.get("list").get("name")}}}(this)),listList:e.listList.map(function(e){return function(t){return{value:t.get("id"),indexString:String(e.model.get("index")+1),listName:t.get("name")}}}(this))}},t.prototype.render=function(){var e;return this.data?this.$el.html(l.fill("popover_filter_pos_results",this.data)):(e={hideBoard:!0},this.$el.html(l.fill("move_card_controls",e)),this.updateListList()),this},t.prototype.hoverPosResultsSelect=function(e){var t;return t=r(e.target).closest("li"),a.selectMenuItem(this.$(".js-pos-results"),"li",t)},t.prototype.selectPosResult=function(e){var t,n,o,s,u,c;a.stop(e),u=r(e.target).closest("a"),c=u.attr("name"),s=this.model.getList(),n=s.openCards().length,t=n+1,u.hasClass("js-select-pos-keyword")?"top"===c?(this.model.set("index",0),d("Card Composer","Select Position in List by Autocomplete",'Top of List - Used "Top"')):"bottom"===c&&(this.model.set("index",t),d("Card Composer","Select Position in List by Autocomplete",'Bottom of List - Used "Bottom"')):u.hasClass("js-select-pos-pos")?(this.model.set("index",parseInt(c,10)-1),d("Card Composer","Select Position in List by Autocomplete","Selected Position - Used Number")):u.hasClass("js-select-pos-list")&&(o=n===this.model.get("pos"),this.model.set("list",this.model.getBoard().getList(c)),o?(this.model.set("index",n),d("Card Composer","Select List by Autocomplete","Bottom")):d("Card Composer","Select List by Autocomplete","Not Bottom")),i.hide()},t.prototype.filterPos=function(e){var t,n,r,o,i,s,c,l,d,p,h;for(h=RegExp("^"+a.escapeForRegex(e)),l=RegExp("^"+a.escapeForRegex(e)+"$"),t=this.model.getList().openCards(),n={keywordList:function(){var e,t,n,r;for(n=["top","bottom"],r=[],e=0,t=n.length;t>e;e++)i=n[e],h.test(i)&&r.push(i);return r}(),indexList:function(){var e,n,o;for(o=[],r=e=1,n=t.length+1;n>=1?n>=e:e>=n;r=n>=1?++e:--e)l.test(String(r))&&o.push(r);return o}(),listList:[]},d=this.model.getBoard().listList.models,o=0,s=d.length;s>o;o++)c=d[o],p=u.compact(c.get("name").toLowerCase().split(/\s+/)),u.find(p,function(e){return h.test(e)})&&n.listList.push(c);return n.hasData=!u.isEmpty(n.keywordList)||!u.isEmpty(n.indexList)||!u.isEmpty(n.listList),n},t.prototype.updateListList=function(){var e,t,n,o,i,a,s,l,d,p;for(l=this.model.getList(),i=l.id,n=this.model.getBoard(),t=this.$(".js-select-list"),t.empty(),p=u.sortBy(n.listList.models,function(e){return e.get("pos")}),a=0,s=p.length;s>a;a++)l=p[a],d=l.get("name"),o=l.id===i?c("selected list",{listName:d}):d,e=r("<option>").val(l.id).text(o),t.append(e),l.id===i&&(e.attr("selected","selected"),this.$(".js-list-value").text(d));return this.updatePositionList()},t.prototype.updatePositionList=function(){var e,t,n,o,i,a,s,u,c,l,d;if(t=this.$(".js-select-list"),n=this.$(".js-select-position"),s=t.find("option:selected").val(),n.empty(),c=this.model.getList(),l=this.model.getBoard().listList.get(s),o=c.cardList,this.model.get("index")>o.length&&this.model.set("index",o.length),0===o.length)return e=r("<option>").val("0").text("1").appendTo(n),void this.$(".js-pos-value").text("1");for(a=u=0,d=o.length;d>=0?d>=u:u>=d;a=d>=0?++u:--u)i=String(a+1),e=r("<option>").val(a).text(i).appendTo(n),a===this.model.get("index")&&e.attr("selected","selected");this.$(".js-pos-value").text(this.model.get("index").toString())},t.prototype.changeList=function(){var e,t,n,r,o,a,s;r=this.model.get("index"),t=this.model.getList().openCards().length,o=t===r,e=this.$(".js-select-list"),n=e.find("option:selected").val(),s=this.model.getBoard().getList(n),this.model.set("list",s),a=s.openCards().length,o?(this.model.set("index",a),d("Card Composer","Change Position by Click","Change List - Bottom")):(this.model.set("index",Math.min(a,r)),d("Card Composer","Change Position by Click","Change List - Not Bottom")),i.hide()},t.prototype.changePosition=function(){var e,t;e=this.$(".js-select-position"),t=parseInt(e.find("option:selected").val(),10),this.model.set("index",t),d("Card Composer","Change Position by Click","Change Position in List"),i.hide()},t}(s)},{}],436:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(553),o=e(443),i=e(435),s=e(569),u=e(133),c=e(549),l=e(546),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="options",t.prototype.events={"click .js-mem-selector":"openMemSelector","click .js-label-selector":"openLabelSelector","click .js-pos-selector":"openPosSelector"},t.prototype.render=function(){var e;return e=this,this.$el.html(l.fill("popover_selector_menu")),this},t.prototype.openMemSelector=function(e){return u.stop(e),s.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openLabelSelector=function(e){return u.stop(e),s.pushView({view:r,options:{model:this.model,modelCache:this.modelCache,hideOnSelect:!1}})},t.prototype.openPosSelector=function(e){return u.stop(e),s.pushView({view:i,options:{model:this.model,modelCache:this.modelCache}})},t}(c)},{}],437:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e("jquery"),o=e(559),a=e(303),d=e(939),p=e(267),u=e("bluebird"),s=e(569),c=e(133),l=e(549),h=e(787),m=e("xtend"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(e){var t;return t=e.links,this.links=t,this.listenTo(this.model.attachmentList,"add remove reset",this.render)},t.prototype.viewTitleKey="attach links",t.prototype.events={"click .js-attach:not([disabled])":"attach"},t.prototype.render=function(){var e,t;return this.model.canAttach()?(e=function(){var e,n,r,o;for(r=this.links,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(m(t,{domain:p(t.url).host,attached:this.model.attachmentList.any(function(e){return e.get("url")===t.url})}));return o}.call(this),this.$el.html(h(e)),this):(this.$el.html(d()),this)},t.prototype.attach=function(e){var t,n,i;return t=r(e.currentTarget),i=t.attr("data-url"),n=t.attr("data-text"),t.attr("disabled","disabled"),u.fromNode(function(e){return function(t){return e.model.uploadUrl({url:i,name:n},t)}}(this)).catch(a,function(){return o.show("unable to attach link","error","linkattachment",5e3)})},t}(l)},{}],438:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P=function(e,t){function n(){this.constructor=e}for(var r in t)L.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},L={}.hasOwnProperty;r=e("jquery"),o=e(559),i=e(222),s=e(35),u=e(166),c=e(167),p=e(97),m=e(303),S=e(939),h=e(100),f=e(569),g=e("bluebird"),v=e(118),b=e(516),y=e(453),w=e(133),_=e(549),k=e("underscore"),A=e(544)("attachment_type_picker"),B=e(51),j=e(104),T=e(136),x=e(245),C=e(253),O=e(528),E=e(153),l=e(41),d=C("AttachmentTypePickerView::FileTooLarge"),M=A.renderable(function(e){var t,n,r,o,i,a;r=e.hasLargeAttachments,o=e.id,n=e.googleDriveReady,a=e.tipKey,i=e.tipData,t=e.defaultName,null==a&&(a="tip-you-can-drag-and-drop-files-and-links-onto-cards-to-upload-them"),null==i&&(i={}),A.div(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},function(){r?A.format("that-file-size-exceeds-the-250mb-limit"):l.get("dontUpsell")?A.div(".gold-promo",function(){A.format("that-file-size-exceeds-the-10mb-limit")}):A.div(".gold-promo",function(){A.format("that-file-size-exceeds-the-10mb-limit-but-if-you-upgrade-to"),A.icon("trello-gold","trello-gold-you-can-upload-files-up-to-250mb")})}),A.ul(".pop-over-list",function(){A.li(".uploader",function(){return A.a(".fakefile",{href:"#"},function(){return A.format("computer")}),A.form(".realfile",{action:"/1/card/"+o+"/attachments",method:"post",enctype:"multipart/form-data"},function(){return A.input({type:"hidden",name:"token",value:""}),A.input({type:"hidden",name:"format",value:"http"}),A.input(".js-attach-file",{type:"file",name:"file",tabindex:"-1",multiple:""})})}),A.li(function(){return A.a(".js-attach-card",{href:"#"},function(){return A.format("trello")})}),A.li(function(){return A.a(".js-google-drive-attachment",{href:"#",class:A.classify({disabled:!n})},function(){return A.format("google-drive")})}),A.li(function(){return A.a(".js-dropbox-attachment",{href:"#"},function(){return A.format("dropbox")})}),A.li(function(){return A.a(".js-box-attachment",{href:"#"},function(){return A.format("box")})}),A.li(function(){return A.a(".js-one-drive-attachment",{href:"#"},function(){return A.format("onedrive")})})}),A.hr(),A.label({for:"addLink"},function(){A.format("attach-a-link")}),A.input(".attachment-add-link-input.js-attachment-url.js-autofocus",{type:"text",id:"addLink",placeholder:A.l("paste-any-link-here-ellipsis")}),A.div(".js-name-link.hide",function(){return A.label({for:"nameLink"},function(){A.format("link-name")}),A.input(".attachment-add-link-input.js-attachment-name",{type:"text",id:"nameLink",value:t})}),A.input(".js-add-attachment-url",{style:"margin: 0;",type:"submit",value:A.l("attach")}),A.hr(),A.p(".quiet.u-bottom",function(){A.format(a,i)})}),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return P(t,e),t.prototype.viewTitleKey="attach from",t.prototype.initialize=function(){return this.listenTo(p,"loaded",this.render)},t.prototype.events={"click .js-google-drive-attachment:not(.disabled)":"openGoogleDriveFilePicker","click .js-dropbox-attachment":"openDropboxFilePicker","click .js-one-drive-attachment":"openOneDriveFilePicker","click .js-box-attachment":"openBoxFilePicker","click .js-attach-card":"attachCard","change .js-attach-file":"startUpload","click .js-add-attachment-url":"addUrl","keydown .js-attachment-url":"keydown","keydown .js-attachment-name":"keydown","input .js-attachment-url":"toggleAttachmentNameInput",'click a[href^="/gold"]':function(){return B("Attachment","Open Trello Gold Promo - via Attachment Upload Limit")},'click a[href^="/business-class"]':function(){return B("Card Detail","Attachments BC Ad")}},t.prototype._scripts={dropbox:"https://www.dropbox.com/static/api/1/dropbox.js",box:"https://app.box.com/js/static/select.js",oneDrive:"https://js.live.net/v7.0/OneDrive.js"},t.prototype.getCard=function(){return this.model instanceof c?this.model:this.model.getCard()},t.prototype.getData=function(){var e,t,n;t=this._scripts;for(e in t)n=t[e],this._loadOnce(n,function(){})},t.prototype.render=function(){var e,t,n,r;return this.getCard().canAttach()?(t=null!=(n=this.getCard().getBoard())?n.getOrganization():void 0,e={id:this.getCard().id,hasLargeAttachments:(null!=(r=s.me())?r.isFeatureEnabled("largeAttachments"):void 0)||(null!=t?t.isFeatureEnabled("largeAttachments"):void 0),googleDriveReady:p.loaded,defaultName:this.options.defaultName},null!=t&&t.isFeatureEnabled("plugins")||(e.tipKey="tip-you-can-attach-other-things-with-power-ups",e.tipData={url:"/power-ups?utm_source=trello&utm_medium=inapp&utm_content=attachments-menu&utm_campaign=power-ups"}),this.$el.html(M(e)),this):(this.$el.html(S()),this)},t.prototype.startUpload=function(e){var t,n,i,a;return t=r(e.target),n=this.$(".js-file-too-large").hide(),i=k.toArray(t[0].files),a=i.length>0?k.any(i,function(e){return!s.me().canUploadAttachment(e)})?g.reject(d()):g.resolve(i).each(function(e){return function(t){var n;return n=t.name||O(),T(e.getCard(),"upload",t,n).then(function(t){return e.trigger("attach",{mimeType:t.mimeType,name:e.options.defaultName||n,url:t.url})})}}(this)):T(w,"uploadFile",s.myToken(),t),a.then(function(){return B("Card Detail","Upload Attachment Complete - Via Picker"),o.show("finished uploading","info","AjaxQueueUpload",2e3),f.hide()}).catch(d,function(){return n.show(),B("Card Detail","Attachment","Upload Error - File Too Large")}).catch(m,function(e){return function(){return e.render(),B("Card Detail","Attachment","Upload Error - Limit Exceeded")}}(this)).done()},t.prototype._loadOnce=function(e,t){return null==window._loadedScripts&&(window._loadedScripts={}),window._loadedScripts[e]?t():r.getScript(e,function(n){return function(){return window._loadedScripts[e]=!0,t()}}(this))},t.prototype.attachLinks=function(e,t,n){return t?(this.$(".js-limit-exceeded").toggleClass("hide",!0),f.pushView({view:y}),g.resolve(t).call("map",null!=n?n:function(e){return e}).each(function(t){return function(n){var r;return r=k.pick(n,"url","mimeType","name"),t.trigger("attach",r),g.fromNode(function(e){return t.getCard().uploadUrl(r,e)}).then(function(t){return B("Card Detail","Upload "+e)})}}(this)).then(function(){return f.hide()}).catch(m,function(e){return function(){return f.popView(),e.render(),B("Card Detail","Attachment","Upload Error - Limit Exceeded")}}(this)).done()):void 0},t.prototype.openGoogleDriveFilePicker=function(e){return w.stop(e),T(gapi,"load","picker").then(function(){var e;return e=p.validToken(),T(p,"authorize",e)}).then(function(e){return function(t){var n,o;return n=new google.picker.DocsView,n.setIncludeFolders(!0),o=(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(n).setOAuthToken(t).setCallback(function(t){return e.attachLinks("Google drive file",t.docs,x.id)}).build(),o.setVisible(!0),r("iframe.picker-frame[src*=authserviceid]").attr("src",function(){return r(this).attr("src").replace(/authserviceid/g,"fixgoogle")})}}(this)).done()},t.prototype.openDropboxFilePicker=function(e){w.stop(e),this._loadOnce(this._scripts.dropbox,function(e){return function(){Dropbox.init({appKey:window.dropboxClientAppKey}),Dropbox.choose({linkType:"preview",iframe:!0,success:function(t){return e.attachLinks("Dropbox file",t,function(e){return{url:e.link,name:e.name}})}}),r('iframe[src^="https://www.dropbox.com/chooser"]').parent().css("overflow","auto")}}(this))},t.prototype.openOneDriveFilePicker=function(e){w.stop(e),this._loadOnce(this._scripts.oneDrive,function(e){return function(){g.try(function(){return new g(function(e,t){var n;return n=window.OneDrive,n.open({clientId:window.oneDriveClientId,action:"share",multiSelect:!0,openInNewWindow:!0,success:function(t){return e(t.value)},cancel:function(){return e([])},error:function(e){return t(e)},advanced:{redirectUri:siteDomain+"/onedrive_callback_7.html"}})})}).then(function(t){return e.attachLinks("OneDrive file",t,function(e){return{url:e.webUrl,name:e.name}})}).done()}}(this))},t.prototype.openBoxFilePicker=function(e){return w.stop(e),this._loadOnce(this._scripts.box,function(e){return function(){var t,n;return t=new BoxSelect({clientId:window.boxClientId,linkType:"shared",multiselect:!0}),n=function(r){return t.unregister(t.SUCCESS_EVENT_TYPE,n),e.attachLinks("Box file",r,x.id)},t.success(n),t.launchPopup()}}(this))},t.prototype.keydown=function(e){return h.isSubmitEvent(e)?this.addUrl():void 0},t.prototype.addUrl=function(e){var t,n;n=this.$(".js-attachment-url").val().split(/\s+/),t=this.$(".js-attachment-name").val(),/\S/.test(t)||(t=void 0),n=k.filter(n,function(e){return/\S/.test(e)}),!k.isEmpty(n)&&n.length<10&&this.attachLinks("link",n,function(e){return{url:e,name:t}})},t.prototype.attachCard=function(e){var t;return t=new b({model:this.model,card:this.model,modelCache:this.modelCache,button:!0,callback:function(e){return function(t){var n;return t instanceof c?(n=t.get("url"),e.attachLinks("card",[{url:n}])):t instanceof u?(n=t.get("url"),e.attachLinks("board",[{url:n}])):void 0}}(this)}),f.pushView({view:t})},t.prototype.toggleAttachmentNameInput=function(e){var t,n,o,i;return i=r(e.currentTarget).val(),o=E(i).type,n="board"===o||"card"===o,t=!/\S/.test(i),this.$(".js-name-link").toggleClass("hide",n||t)},t}(_)},{}],439:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e(35),i=e(7),a=e(100),s=e(22),u=e(40),c=e(569),l=e(452),d=e(133),p=e(549),m=e(109),g=e(546),v=e(51),f=e(267),h=e(245),t.exports=m(l,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="copy card",t.prototype.initialize=function(e){var t;return this.onCopy=null!=(t=e.onCopy)?t:function(){}},t.prototype.showCurrentPosition=!0,t.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData",'keydown textarea[name="name"]':"keydownEvent","click .js-submit":"submit","submit form":"submit"},t.prototype.render=function(){var e,t,n,o,i,a,s,u,c,l,d,p;for(t=this.model.toJSON(),t.numChecklists=this.model.checklistList.length,t.numMembers=t.idMembers.length,t.numLabels=null!=(c=null!=(l=t.idLabels)?l.length:void 0)?c:0,t.numAttachments=t.badges.attachments,t.numComments=t.badges.comments,t.numStickers=t.stickers.length,t.hasChecklists=t.numChecklists>0,t.hasMembers=t.idMembers.length>0,t.hasLabels=t.numLabels>0,t.hasAttachments=t.badges.attachments>0,t.hasComments=t.badges.comments>0,t.hasStickers=t.stickers.length>0,t.hasStuff=t.numChecklists+t.idMembers.length+t.numLabels+t.badges.attachments+t.badges.comments+t.stickers.length>0,t.loading=this.loading,t.organizations=r.me().getOpenBoardsByOrg(!0),d=t.organizations,n=0,i=d.length;i>n;n++)for(s=d[n],p=s.boards,o=0,a=p.length;a>o;o++)e=p[o],e.id===this.model.get("idBoard")&&(e.selected=!0);return u={move_card_controls:g.move_card_controls},this.$el.html(g.fill("card_copy",t,{editable:this.model.editable()},u)),this.updateBoardData(),this},t.prototype.getData=function(){return this.loading=!0,u.loadCardCopyData(this.model.get("idBoard"),this.model.id).finally(function(e){return function(){return e.loading=!1,e.render()}}(this)).done()},t.prototype.keydownEvent=function(e){a.getKey(e)===s.Enter&&(d.stop(e),this.submit(e))},t.prototype.submit=function(e){var t,n,r,o;return d.stop(e),r=this.$('textarea[name="name"]'),""===r.val().trim()?void r.focus().select():(n=["due"],o=this.$("input:checkbox:checked").get().map(h.get("name")),t=n.concat(o),void this.model.copyTo({name:r.val().trim(),idList:this.$(".js-select-list").find("option:selected").val(),pos:this.$(".js-select-position").find("option:selected").val(),keepFromSource:t}).then(function(e){return function(){return c.hide(),e.onCopy(),v("Card","Copy Card")}}(this)))},t}(p))},{}],440:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e(517),o=e(439),a=e(561),s=e(83),u=e(563),h=e(144),c=e(569),l=e(133),d=e(549),m=e(546),f=e(51),p=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.viewTitleKey="more",t.prototype.events={"click .js-copy-card":"copyCard","click .js-delete":"deleteCard","click .js-short-url, .js-email, .js-embed":function(e){return this.focusInput(e.currentTarget)},"click .js-print":"printModel","click .js-export-json":"exportJSON"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:shortUrl",this.render)},t.prototype.copyCard=function(e){f("Card Detail","Card Copy Button","Via More Menu"),c.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.focusInput=function(e){return this.$(e).focus().select()},t.prototype.getShortLinkData=function(){null==this.model.get("shortUrl")&&this.model.fetch({fields:["shortUrl"]})},t.prototype.deleteCardConfirm=function(e){a.pushView("delete card",{model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return u.hide(),e.model.destroy(),f("Card","Delete")}}(this)})},t.prototype.render=function(){var e,t;return t={dateAdded:l.idToDate(this.model.id).toISOString(),
jsonURL:"/"+this.model.typeName.toLowerCase()+"/"+this.model.id+"/"+l.makeSlug(this.model.get("name"))+".json"},e=this.model.getBoard(),null!=e&&p.extend(t,{pLevelClass:r.getPermLevelIconClassForBoard(e),pLevelAltText:r.getPermLevelAltTextForBoard(e)}),t.embed=['<blockquote class="trello-card">','<a href="'+h(this.model.get("url"))+'">'+h(this.model.get("name"))+"</a>","</blockquote>",'<script src="'+window.trelloForWebsites+'/embed.min.js"></script>'].join(""),this.$el.html(m.fillFromModel("card_detail_more_menu",this.model,t,{meta:m.card_menu_meta})),this.getShortLinkData(),s.update(this.el),this.focusInput(this.$(".js-autofocus")[0]),this},t.prototype.deleteCard=function(e){l.stop(e),f("Card Detail","Delete Button","Via More Menu"),this.deleteCardConfirm()},t.prototype.printModel=function(e){l.stop(e),c.hide(),f("Card Detail","Print","Via More Menu"),this.defer(function(){return window.print()})},t.prototype.exportJSON=function(e){return f("Card Detail","Export JSON")},t}(d)},{}],441:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z,R,F,$,U,q,H,W,K,G,J,Q,Y,Z,X,ee,te,ne,re,oe,ie,ae,se,ue,ce,le,de,pe,he,me,fe,ge,ve,be,ye,we,_e,ke,Ce,xe,je,Se,Te,Ee,Oe,Ae,Me,Be,Pe,Le=function(e,t){function n(){this.constructor=e}for(var r in t)De.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},De={}.hasOwnProperty,Ie=[].slice,Ne=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(285),i=e(454),a=e(559),s=e(306),u=e(304),c=e(438),l=e(510),d=e(35),p=e(511),h=e(512),m=e(82),ie=e(516),f=e(439),g=e(440),b=e(553),y=e(443),w=e(444),_=e(445),k=e(458),C=e(513),x=e(561),j=e(7),S=e(448),T=e(83),E=e(563),e(519),O=e(564),A=e(522),M=e(523),B=e(449),be=e(88),P=e("hearsay"),L=e(307),D=e(100),I=e(22),N=e(205),V=e(557),z=e(566),R=e(24),F=e(303),$=e(282),U=e(623),q=e(39),H=e(40),W=e(110),K=e(703),G=e(705),J=e(533),Q=e(536),Y=e(716),Z=e(569),X=e("bluebird"),Ae=e(88),ee=e(732),te=e(118),ne=e(107),re=e(310),oe=e(312),ae=e(133),se=e(156),ue=e("underscore"),ge=e(245),ve=e(525),ke=e(48),Ce=e(109),Me=e(51),Be=e(56),xe=e("moment"),ye=e(104),_e=e(102),Te=e(528),Pe=e(550),je=e(136),he=e(790),de=e(792),le=e(791),pe=e(794),we=e(854),me=e(795),fe=e(813),Oe=e(137),Se=e(153),Ee=e(537),ce=function(e){return"["+e.get("name")+"]("+e.get("url")+") "},t.exports=Ce(p,C,_,v=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Le(t,e),t.prototype.className="card-detail-window u-clearfix",t.prototype.defaultActionLimit=50,t.prototype.maxActionLimit=1e3,t.prototype.maximumCommentLength=16384,t.prototype.maxDescLength=1800,t.prototype.addListCloseEventListener=function(){var e,t,n;e=this.model.previous("idList"),e&&(this.stopListening(this.modelCache,"add:List:"+e),n=this.modelCache.get("List",e),this.stopListening(n,"change:closed")),t=function(e){return function(){return e.renderArchivedDebounced(),e.listenTo(e.model.getList(),{"change:closed":e.renderArchivedDebounced})}}(this),this.model.getList()?t():this.listenToOnce(this.modelCache,"add:List:"+this.model.get("idList"),t)},t.prototype.initialize=function(){var e,t;this.fEditingName=!1,this.makeDebouncedMethods("render","renderAddAttachments","renderCover","renderStickers","renderName","renderDescription","renderArchived","renderLabels","renderList","renderVotes","renderDueDate","renderSubscribe","renderAttachments","renderMembers","renderAging"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:desc":this.renderDescriptionDebounced,"change:closed":this.renderArchivedDebounced,"change:labels":this.renderLabelsDebounced,"change:limits":this.renderAddAttachmentsDebounced,"change:idList":function(e){return function(){return e.renderListDebounced(),e.addListCloseEventListener()}}(this),"change:idMembersVoted":this.renderVotesDebounced,"change:due change:dueComplete":this.renderDueDateDebounced,"change:subscribed":this.renderSubscribeDebounced,"change:dateLastActivity":this.renderAgingDebounced,"change:idAttachmentCover":function(){return this.renderCoverDebounced()},destroy:this.closeDialog}),this.addListCloseEventListener(),this.listenTo(this.model.labelList,"add remove reset change",function(e){return function(){return e.renderLabelsDebounced()}}(this)),this.listenTo(this.model.memberList,{"add remove reset":this.renderMembersDebounced}),this.listenTo(this.model.memberVotedList,{"add remove reset":this.renderVotesDebounced}),this.listenTo(this.model.checklistList,{"add reset":this.renderChecklists,remove:this.removeChecklist,sort:this.sortChecklists}),this.listenTo(this.model.attachmentList,{"add remove reset":this.renderAttachmentsDebounced,sort:this.renderAttachments}),this.listenTo(this.model.stickerList,{"add remove reset change sort":this.renderStickersDebounced}),this.listenTo(this.model.memberEditingList,{"add remove reset change:action":this.renderEditing}),e=this.model.getBoard(),this.listenTo(e,{"change:labelNames":this.renderLabelsDebounced,"change:labels":this.renderLabelsDebounced,"change:prefs":function(e){var t,n;return t=function(t){var n,r;return(null!=(n=e.get("prefs"))?n[t]:void 0)!==(null!=(r=e.previous("prefs"))?r[t]:void 0)},t("cardCovers")&&this.renderCover(),n=t("cardAging")||t("comments")||t("voting"),n&&0===this.$(".editing").length?this.renderDebounced():void 0}}),this.subscribe(Ee(e,this.model),function(e){return function(){return e.renderAttachments()}}(this)),this.getData(),this.numAttachmentsProcessing=this.slot(0),this.numTrelloAttachmentsProcessing=this.slot(0),this.watch("numAttachmentsProcessing",this.renderAttachmentsDebounced),this.watch("numTrelloAttachmentsProcessing",this.renderAttachmentsDebounced),this.fHideFullDescription=(null!=(t=this.model.get("desc"))?t.length:void 0)>this.maxDescLength,this.actionListView=this.collectionSubview(o,this.model.actionList,{renderOpts:{context:this.model,compact:!1}}),this.markNotificationsReadOnActive(),this.listenTo(q,"add:Notification",this.markNotificationsReadOnActive),this.listenTo(z,"cancelEdits",this.saveCommentDraft),r(window).on("beforeunload.CardDetailView-"+this.model.cid,ge(this,"saveCommentDraft",!0)),this.pluginThumbTrackCache={}},t.prototype.remove=function(){this.saveCommentDraft(!0),r(window).off(".CardDetailView-"+this.model.cid),t.__super__.remove.apply(this,arguments)},t.prototype.markNotificationsReadOnActive=function(){"active"!==W.getStatus()||W.getHidden()?this.listenToOnce(W,"setStatus visibilitychange",this.markNotificationsReadOnActive):this.markRelatedNotificationsRead()},t.prototype.markRelatedNotificationsRead=function(){var e,t,n,r,o;for(e=function(e){return function(t){var n,r;return t.get("unread")&&(null!=(n=t.get("data"))&&null!=(r=n.card)?r.id:void 0)===e.model.id}}(this),o=this.modelCache.all("Notification"),t=0,n=o.length;n>t;t++)r=o[t],e(r)&&r.markRead()},t.prototype.events={"click .js-edit-labels":"editLabelsSidebar","click .js-change-card-members":"changeMembersSidebar","click .js-add-checklist-menu":"addChecklistSidebar","click .js-add-due-date":"dueDateSidebar","click .js-attach":"openAttachPicker","click .js-attach-trello-attachment":"openAttachTrelloPicker","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-subscribe":"subscribeToCard","click .js-unsubscribe":"unsubscribeFromCard","click .js-vote":"vote","click .js-unvote":"unvote","click .js-archive-card":"archiveCard","click .js-unarchive-card":"unarchiveCard","click .js-delete-card":"deleteCardSidebar","click .js-more-menu":"showMoreMenu","keydown  .js-card-detail-title-input":"nameKeyDownEvent","focus    .js-card-detail-title-input":function(e){return this.startNameEditing({focus:!1})},"blur     .js-card-detail-title-input":"stopNameEditing","click .js-open-card-cover-in-viewer":"openCoverInViewer","click .js-open-move-from-header":"openMoveFromHeader","click .js-details-edit-members":"editMembersMain","click .js-details-edit-labels":"editLabelsMain","click .js-edit-label .card-label":"editLabelsMainSingleLabel","click .js-details-edit-due-date":"showDueDateBadgeMenu","click .js-details-toggle-due-date-complete":"toggleDueDateComplete","click .js-show-votes":"showVotes","click .js-edit-desc":"editDesc","click .js-desc-content.is-hide-full":"showFullDescription","click .js-member-on-card-menu":"openMemberOnCardMenu","click .js-format-help":"openFormatHelp","click .js-view-some-attachments":"showFewerAttachments","click .js-view-all-attachments":"showMoreAttachments","click .js-view-some-trello-attachments":"showFewerTrelloAttachments","click .js-view-all-trello-attachments":"showMoreTrelloAttachments","click .js-show-all-actions":"showAllActions","keydown .js-new-comment-input":"keydownCommentEvent","input .js-new-comment-input":"commentInputEvent","mutated .js-new-comment-input":"commentInputEvent","click .js-add-comment:not(:disabled)":"submitComment","click .js-comment-subscribe":"subscribeOnComment","click .js-attach-comment":"attachComment","click .js-truncate-comment":"truncateComment","click .js-new-comment":"inputComment","focus .js-new-comment-input":"inputComment","keyup .js-new-comment-input":"keyAutoMention",click:"clickAwayFromComment","click .js-new-comment .js-comment-add-attachment":"commentAddAttachment","click .js-new-comment .js-comment-mention-member":"commentMentionMember","click .js-new-comment .js-comment-add-emoji":"commentAddEmoji","click .js-new-comment .js-comment-add-card":"commentAddCard","click .js-show-details":"showDetails","click .js-hide-details":"hideDetails","click a[href]":"interceptHighlightLink","dd-enter:files":"dragenter","dd-leave:files":"dragleave","dd-drop:files":"dropFiles","dd-enter:url":"dragenter","dd-leave:url":"dragleave","dd-drop:url":"dropUrl","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl","sortstop .js-checklist-list":"sortStop","sortstop .js-attachment-list":"sortStopAttachments",shortcut:"shortcut",replyToAction:"replyToAction"},t.prototype.shortcut=function(e){var t,n,r,o,i,a,s;switch(t=this.model.getBoard(),n=this.model.editable(),o=d.isLoggedIn(),e){case I.Space:if(n&&t.hasActiveMembership(d.me()))return this.model.toggleMember(d.myId()),["Space - Toggle Assigning Self","Card Detail"];break;case I.A:case I.M:if(n)return this.changeMembersSidebar(),["A - Assign Members","Card Detail"];break;case I.E:if(n)return this.editDesc(),["E - Edit Description","Card Detail"];break;case I.L:if(n)return this._openEditLabelsSidebar({hideOnSelect:!1}),["L - Edit Labels","Card Detail"];break;case I.D:if(n)return null!=this.model.get("due")?this.showDueDateBadgeMenu():this.dueDateSidebar(),["D - Due Dates","Card Detail"];break;case I.C:if(n)return this.archiveCard(),["C - Archive Card"];break;case I.T:if(n)return this.editTitle(),"T - Edit Title";break;case I.AngleRight:case I.Period:if(n)return this.model.moveToNextList(e===I.AngleRight?"top":"bottom"),"> - Move to Next List";break;case I.AngleLeft:case I.Comma:if(n)return this.model.moveToPrevList(e===I.AngleLeft?"top":"bottom"),"< - Move to Previous List";break;case I._0:case I._1:case I._2:case I._3:case I._4:case I._5:case I._6:case I._7:case I._8:case I._9:if(n)return r=function(e){return function(t){return e._openEditLabelsSidebar({searchInit:t,hideOnSelect:!0})}}(this),V.setLabelFromKey(e,this.model,r),"0-9 - Toggle Specific Label";break;case I.V:if(t.canVote(d.me()))return this.model.toggleVote(),"V - Vote";break;case I.S:if(o)return s=this.model.get("subscribed"),this.model.subscribe(!s),["S - Subscribe",s?"Unsubscribe":"Subscribe"];break;case I.J:if(null!=(i=this.model.nextCard()))return j.showCardDetail(i,{isNavigating:!0}),"J - Down";break;case I.K:if(null!=(a=this.model.prevCard()))return j.showCardDetail(a,{isNavigating:!0}),"K - Up"}},t.prototype.incrementNumAttachmentsProcessing=function(e){return null==e&&(e=1),this.numAttachmentsProcessing.update(ge.add(e))},t.prototype.decrementNumAttachmentsProcessing=function(e){return null==e&&(e=1),this.numAttachmentsProcessing.update(ge.sub(e))},t.prototype.incrementNumTrelloAttachmentsProcessing=function(e){return null==e&&(e=1),this.numTrelloAttachmentsProcessing.update(ge.add(e))},t.prototype.decrementNumTrelloAttachmentsProcessing=function(e){return null==e&&(e=1),this.numTrelloAttachmentsProcessing.update(ge.sub(e))},t.prototype.getData=function(){this.loading=!0,this.$(".js-loading-card-actions").show(),this.waitForId(this.model,function(e){return function(){var t;return t=e.fShowAllActions?e.maxActionLimit:e.defaultActionLimit,X.try(function(){return!d.isLoggedIn()||d.me().getShowDetails()?H.loadCardDetails(e.model.id,t):H.loadCardHideDetails(e.model.id,t)}).finally(function(){return e.loading=!1,e.$(".js-loading-card-actions").hide()}).then(function(){return e.renderShowAllActionsButton(),e.scrollToHighlight()}).done()}}(this))},t.prototype.scrollToHighlight=function(){var e,t,n;e=Date.now(),cancelAnimationFrame(this.scrollInterval),t=null,(n=function(r){return function(){var o,i;E.scrolledSince(e)||(null!=(o=r.$(".mod-highlighted")[0])&&(t||(i=o.getBoundingClientRect(),t=i.top<0?"top":i.top+i.height>window.innerHeight?"bottom":null),"top"===t?o.scrollIntoView(!0):"bottom"===t&&o.scrollIntoView(!1),e=Date.now()),r.scrollInterval=r.requestAnimationFrame(n))}}(this))()},t.prototype.render=function(){var e,t;return this.fShowAllAttachments=!1,this.fShowAllTrelloAttachments=!1,this.fShowAllActions=!1,e=ue.extend(this.model.toJSON(),{canAttach:this.model.canAttach(),canComment:this.model.getBoard().canComment(d.me()),canVote:this.model.getBoard().canVote(d.me()),canSubscribe:d.isLoggedIn(),canToggleDetails:d.isLoggedIn(),hasAttachments:this.model.attachmentList.length>0,me:d.me().toJSON(),loading:this.loading,editable:this.model.editable(),commentAndSubscribe:be("commentAndSubscribe").get("enabled"),subscribeOnComment:d.me().isSubscribeOnCommentEnabled()}),e.showActions=e.canVote||e.canSubscribe,this.$el.html(he(e)),this.actionListView.setElement(this.$(".js-list-actions")[0]),this.commentInput=this.$(".js-new-comment-input")[0],this.renderCover().renderStickers().renderName().renderDescription().renderList().renderActionList().renderMembers().renderArchived().renderChecklists().renderSubscribe().renderVotes().renderDueDate().renderAttachments().renderAddAttachments().renderLabels().renderAging().renderEditing().renderPluginBadges().renderPluginButtons(),e.canComment&&this.recallDrafts(),this.$(".js-card-detail-title-input").autosize({append:!1}),this.$(".js-new-comment-input").autosize(),"chrome"!==(t=m.browserStr)&&this.defer(ue.bind(this.fixSidebar,this)),T.update(this.el),this},t.prototype._commentDraftKey=function(){return"draft_"+this.model.id+"_comment"},t.prototype.recallDrafts=function(){var e;return e=te.get(this._commentDraftKey()),e&&this.$(".js-new-comment-input").val(e),this.renderCommentSubmitAbility(),t.__super__.recallDrafts.apply(this,arguments)},t.prototype.saveCommentDraft=function(e){var t,n;null==e&&(e=!1),t=this.$(".js-new-comment-input"),0!==t.length&&(n=t.val(),n?(te.set(this._commentDraftKey(),n),e&&(Me("Card Detail","Comment","Save Comment Draft"),Be("Card Detail","save","comment draft","","","when closing a card",""))):te.unset(this._commentDraftKey()))},t.prototype.saveCardName=function(){var e,t,n;e=this.$(".js-card-detail-title-input"),n=e.val(),t=this.model.get("name"),n=n.replace(/\s+/g," ").trim(),n!==t&&(n.length>16384||0!==n.trim().length&&this.model.update("name",n))},t.prototype.nameKeyDownEvent=function(e){D.getKey(e)===I.Enter&&(ae.stop(e),this.stopNameEditing()),D.getKey(e)===I.Escape&&(ae.stop(e),this.stopNameEditing())},t.prototype.startNameEditing=function(e){var t;null==e&&(e={}),this.fEditingName||(t=this.$(".js-card-detail-title-input"),this.fEditingName=!0,t.addClass("is-editing"),e.focus&&t.focus().select())},t.prototype.stopNameEditing=function(e){var t;this.fEditingName&&(this.fEditingName=!1,t=this.$(".js-card-detail-title-input").removeClass("is-editing"),t.blur(),Oe(),this.saveCardName())},t.prototype.setRelativeSidebarPos=function(){return this.fFixed=!1,this.fRelative=!0,this.$(".window-sidebar").css({left:"",top:"",position:"relative"})},t.prototype.setFixedSidebarLeftPos=function(){var e,t;return this.fFixed?(t=parseFloat(r(".window").offset().left),e=t+r(".window").width()-this.$(".window-sidebar").outerWidth(),this.$(".window-sidebar").css({left:e})):void 0},t.prototype.setFixedSidebarPos=function(){return this.fFixed=!0,this.fRelative=!1,this.setFixedSidebarLeftPos(),this.$(".window-sidebar").css({top:0,position:"fixed"})},t.prototype.fixSidebar=function(){var e,t,n,o,i;e=r(".window-overlay").off("scroll.fixSidebar"),this.fFixed=!1,this.fRelative=!1,t=parseInt(r(".window").css("margin-top")),n=parseInt(this.$(".window-sidebar").css("padding-top")),i=function(o){return function(){var i,a,s,u,c,l;s=o.$(".window-header").outerHeight(),a=null!=(u=o.$(".window-cover:visible").outerHeight())?u:0,i=null!=(c=o.$(".window-archive-banner:visible").outerHeight())?c:0,l=t+s+a+i+n,e.scrollTop()<=l||se.fSmall||o.$(".window-sidebar").height()>r(window).height()?o.fRelative||o.setRelativeSidebarPos():o.fFixed||o.setFixedSidebarPos()}}(this),o=this.throttle(i,32),e.on("scroll.fixSidebar",o)},t.prototype.editDesc=function(e){ae.stop(e),this.showFullDescription(),this.edit("desc")},t.prototype.expandDesc=function(e){ae.stop(e),this.showFullDescription(),this.edit("desc",!1)},t.prototype.showFullDescription=function(e){this.fHideFullDescription=!1,r(".js-desc-content").removeClass("is-hide-full")},t.prototype.editTitle=function(e){this.startNameEditing({focus:!0})},t.prototype.archiveCard=function(e){this.model.close(),Me("Card Detail","Sidebar","Archive Button")},t.prototype.unarchiveCard=function(e){Me("Card Detail","Sidebar","Re-Open Button"),this.model.reopen()},t.prototype.deleteCardSidebar=function(e){x.toggle("delete card",{elem:e.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return E.hide(),e.model.destroy(),Me("Card","Delete")}}(this)}),Me("Card Detail","Sidebar","Open Delete Confirm")},t.prototype.showMoreMenu=function(e){ae.stop(e),Z.toggle({elem:this.$(".js-more-menu"),view:g,options:{model:this.model,modelCache:this.modelCache}}),Me("Card Detail","Sidebar","Open More Menu")},t.prototype.openCoverInViewer=function(e){var t;ae.stop(e),this.showCover()&&(t=this.model.attachmentList.get(this.model.get("idAttachmentCover")),l.isActive()||(l.show({model:this.model,attachmentModel:t}),Me("Card Detail","Open Attachment Viewer via Cover",t.getType())))},t.prototype.openMoveMenu=function(e){Z.toggle({elem:e,view:w,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openMoveFromHeader=function(e){ae.stop(e),this.openMoveMenu(this.$(".js-open-move-from-header"),20),Me("Card Detail","Move Button (via Header)")},t.prototype.moveCard=function(e){ae.stop(e),this.openMoveMenu(this.$(".js-move-card"),35),Me("Card Detail","Sidebar","Open Move Menu")},t.prototype.copyCard=function(e){ae.stop(e),Z.toggle({elem:this.$(".js-copy-card"),view:f,options:{model:this.model,modelCache:this.modelCache}}),Me("Card Detail","Sidebar","Open Copy Menu")},t.prototype.openLabelsPopOver=function(e,t){Z.toggle({elem:e,view:b,options:ue.extend({model:this.model,modelCache:this.modelCache},t)})},t.prototype.editLabelsMainSingleLabel=function(e){ae.stop(e),this.openLabelsPopOver(this.$(e.target).closest(".card-label")),Me("Card Detail","Edit Labels Main Column - Single Label")},t.prototype.editLabelsMain=function(e){ae.stop(e),this.openLabelsPopOver(this.$(".js-details-edit-labels")),Me("Card Detail","Edit Labels Main Column - Plus Button")},t.prototype.editLabelsSidebar=function(e){return ae.stop(e),Me("Card Detail","Sidebar","Edit Labels Button"),this._openEditLabelsSidebar()},t.prototype._openEditLabelsSidebar=function(e){return this.openLabelsPopOver(this.$(".js-edit-labels"),e)},t.prototype.showVotes=function(e){ae.stop(e),Z.toggle({elem:this.$(".js-show-votes"),view:U,options:{model:this.model,modelCache:this.modelCache}}),Me("Card Detail","Header Vote Button"),Be("card detail","opens","Power-Up","","","card-detail-badge",R.voting)},t.prototype.doClicks=function(){return!O.sorting},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},t.prototype.checkShowCover=function(){var e,t;e=this.showCover(),t=this.model.hasStickers(),e?this.$(".js-card-cover-box").removeClass("hide window-cover-stickers-only").addClass("is-covered"):t?this.$(".js-card-cover-box").removeClass("hide is-covered").addClass("window-cover-stickers-only"):this.$(".js-card-cover-box").addClass("hide")},t.prototype.clearCover=function(){var e;return this.$(".js-card-cover-box").css({"background-color":"","background-image":""}),e=["dialog-close-button-light","dialog-close-button-dark"],r(".dialog-close-button").removeClass(e.join(" "))},t.prototype.renderAddAttachments=function(){var e;return e=!this.model.canAttach(),this.$(".js-attach,.js-attach-trello-attachment,.js-attach-link").toggleClass("disabled",e),this},t.prototype.renderCover=function(){var e,t,n,o,i,a,s,u,c,l,d,p,h,f,g,v,b,y,w,_;return this.clearCover(),this.showCover()&&(i=this.model.attachmentList.get(this.model.get("idAttachmentCover")),o=40,t=160,n=730,null!=i&&(m.isHighDPI()?(f=2*n,h=2*t):(f=n,h=t),v=i.get("previews"),g=null!=(y=ae.previewBetween(v,0,h,f,1/0))?y:ae.biggestPreview(v),c=null!=g?g.url:i.get("url"),e=this.$(".js-card-cover-box"),null!=(l=i.get("edgeColor"))&&(w=l.match(/[0-9a-f]{2}/gi).map(function(e){return parseInt(e,16)}),b=w[0],d=w[1],s=w[2],e.css("background-color","rgb("+b+", "+d+", "+s+")"),a=(b+d+s)/3,a>150?u="dark":105>a&&(u="light"),null!=u&&r(".dialog-close-button").addClass("dialog-close-button-"+u)),p=Math.max(o,Math.min(null!=(_=null!=g?g.height:void 0)?_:t,t)),this.$(".js-card-cover-box").css({"background-image":'url("'+c+'")',height:p,"background-size":(null!=g?g.height:void 0)<p?"initial":"contain"}))),this.checkShowCover(),this},t.prototype.renderPluginButtons=function(){var e;return e=this.subview(K,this.model),this.appendSubview(e,this.$(".js-plugin-buttons")),this},t.prototype.renderPluginBadges=function(){var e;return e=this.subview(G,this.model),this.appendSubview(e,this.$(".js-plugin-badges")),this},t.prototype.renderStickers=function(){var e,t,n,r,o;return e=this.$(".js-display-stickers").empty(),r=this.model.stickerList.models,t=r.length>0,t&&(o=function(){var e,t,o;for(o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(this.subview(ee,n,{board:this.model}));return o}.call(this),this.appendSubviews(o,e)),this.checkShowCover(),this},t.prototype.renderName=function(){var e,t;return t=this.model.get("name"),e=this.model.getBoard().get("name"),this.$(".js-title-helper").text(t),this.fEditingName||this.$(".js-card-detail-title-input").val(t).trigger("autosize.resize",!1),j.title(ye("card detail title",{cardName:t,boardName:e},{raw:!0})),this},t.prototype.renderDescription=function(){var e,t,n,o;return t=this.model.get("desc"),n=ne.description.format(null!=t?t:"",{textData:this.model.get("descData")}).output,e=this.$(".js-card-desc"),e.empty().append(n).data("unmarkeddown",t),ve(e[0],this.model.getBoard()),o=!/^\s*$/.test(n),this.$(".js-show-with-desc").toggleClass("hide",!o),this.$(".js-hide-with-desc").toggleClass("hide",o),r(".js-desc-content").toggleClass("is-hide-full",this.fHideFullDescription),this},t.prototype.renderList=function(){var e;return e=this.model.getList(),null!=e&&this.$(".js-current-list").removeClass("hide").html(de({listName:e.get("name"),editable:this.model.editable()})),this},t.prototype.renderArchived=function(){var e,t,n,r,o;return e=this.model.get("closed")===!0,t=(null!=(n=this.model.getList())?n.get("closed"):void 0)===!0,r=e,o=!e&&t,this.$(".js-archive-banner").toggleClass("hide",!r),this.$(".js-archived-list-banner").toggleClass("hide",!o),this.$(".js-archive-card").toggleClass("hide",e),this.$(".js-unarchive-card").toggleClass("hide",!e),this.$(".js-delete-card").toggleClass("hide",!e),this},t.prototype.showAllActions=function(e){return this.fShowAllActions=!0,this.renderShowAllActionsButton(),this.getData()},t.prototype.renderShowAllActionsButton=function(){var e,t,n,r;return r=!d.isLoggedIn()||d.me().getShowDetails(),e=this.model.actionList.filter(function(e){return r?!0:e.isCommentLike()}),n=e.length>=this.defaultActionLimit,t=this.fShowAllActions||!n,this.$(".js-show-all-actions").toggleClass("hide",t)},t.prototype.renderActionList=function(){var e;return e=!d.isLoggedIn()||d.me().getShowDetails(),this.actionListView.setShowDetails(e),this.waitForId(this.model,function(e){return function(){return e.actionListView.render()}}(this)),this.$(".js-show-details").toggleClass("hide",e),this.$(".js-hide-details").toggleClass("hide",!e),this},t.prototype.renderMembers=function(e){var t,n,r,o;return t=this.$(".js-card-detail-members-list").empty(),o=this.model.memberList.filterDeactivated({model:this.model.getBoard()}).models,r=function(){var e,t,r;for(r=[],e=0,t=o.length;t>e;e++)n=o[e],r.push(this.getMemberOnCardHtml(n));return r}.call(this).join(""),t.html(r),this.model.editable()&&t.append(le({klass:"js-details-edit-members"})),this.$(".js-card-detail-members").toggleClass("hide",0===o.length),this},t.prototype.renderLabels=function(){var e,t,n,r,o;return t=this.model.getLabels().sort(N.compare),e=this.$(".js-card-detail-labels-list").empty(),o=function(){var e,o,i;for(i=[],e=0,o=t.length;o>e;e++)r=t[e],n=this.model.dataForLabel(r),n.extraClasses=["mod-card-detail"],this.model.editable()&&n.extraClasses.push("mod-clickable"),i.push(we(n));return i}.call(this),e.append(o),this.model.editable()&&e.append(le({klass:"js-details-edit-labels"})).addClass("js-edit-label"),this.$(".js-card-detail-labels").toggleClass("hide",0===t.length),this},t.prototype.renderSubscribe=function(){var e,t,n;return e=this.$(".js-subscribe-sidebar-button"),t={subscribed:this.model.get("subscribed")||(null!=(n=this.model.get("badges"))?n.subscribed:void 0)},e.html(pe(t)),this.$(".js-subscribed-indicator-header").toggleClass("hide",!t.subscribed),this},t.prototype.renderAging=function(){var e,t,n,r;return n=this.model.getBoard(),t=n.isPowerUpEnabled("cardAging"),e=this.$(".js-card-detail-age-badge").removeClass(this.model.getAllAgingClasses()),t&&(r=this.model.getAgingData(),e.removeData("date").attr("dt",this.model.get("dateLastActivity")),"pirate"===r.mode&&e.addClass(r.agingClassesToAdd),T.update(this.$(".js-card-detail-age"))),this.$(".js-card-detail-age").toggleClass("hide",!t),this},t.prototype.renderDueDate=function(){var e,t,n,r,o,i;return n=this.model.get("due"),r=this.model.get("dueComplete"),n?(i=xe(n).calendar(),o=A.relativeInfoForDueDate(n,r),null!=o&&(i+=" ("+o+")"),t=[],t.push(A.classForDueDate(n,r)),this.model.editable()&&t.push("is-clickable"),e=this.$(".js-card-detail-due-date-badge").removeClass(function(e,t){return(t.match(/is-due-\S+/g)||[]).join(" ")}).addClass(t.join(" ")).attr("title",A.titleForDueDate(n,r)),e.find(".js-date-text").text(i).toggleClass("js-details-edit-due-date",this.model.editable()),e.find(".js-card-detail-due-date-badge-complete").toggleClass("js-details-toggle-due-date-complete",this.model.editable()),this.$(".js-card-detail-due-date").removeClass("hide"),this):(this.$(".js-card-detail-due-date").addClass("hide"),this)},t.prototype.renderVotes=function(){var e,t,n,r,o,i,a;return t={voted:this.model.voted(),canVote:this.model.getBoard().canVote(d.me())},e=this.$(".js-vote-sidebar-button"),e.html(me(t)),n=null!=(r=null!=(o=this.model.get("badges"))?o.votes:void 0)?r:0,n&&this.$(".js-card-detail-votes-badge").text(_e("votes",n)).toggleClass("is-voted",null!=(i=null!=(a=this.model.get("badges"))?a.viewingMemberVoted:void 0)?i:!1),this.$(".js-card-detail-votes").toggleClass("hide",0===n),this},t.prototype.sortChecklists=function(){var e;return e=this.$(".js-checklist-list"),ae.withoutAlteringSelection(function(t){return function(){return t.model.checklistList.forEach(function(n){var r;return r=t.existingSubview(k,n),e.append(r.el)})}}(this)),this},t.prototype.removeChecklist=function(e){return this.deleteSubview(this.existingSubview(k,e))},t.prototype.renderChecklists=function(){var e,t,n,o;return ke("render","rendering checklists"),e=this.$(".js-checklist-list").empty(),o=function(){var e,n,r,o;for(r=this.model.checklistList.models,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(this.subview(k,t,{card:this.model}));return o}.call(this),this.appendSubviews(o,e),O.refreshIfInitialized(e),(null!=(n=this.model)?n.editable():void 0)&&this.$(".js-checklist-list").sortable({axis:"y",handle:".window-module-title",delay:75,distance:7,tolerance:"pointer",placeholder:"checklist placeholder",items:".checklist",start:function(e,t){var n;return n=r(t.helper).outerHeight(),r(t.placeholder).height(n)}}),this},t.prototype.showFewerAttachments=function(e){ae.stop(e),this.fShowAllAttachments=!1,this.renderAttachments()},t.prototype.showMoreAttachments=function(e){ae.stop(e),this.fShowAllAttachments=!0,this.renderAttachments()},t.prototype.showFewerTrelloAttachments=function(e){ae.stop(e),this.fShowAllTrelloAttachments=!1,this.renderAttachments()},t.prototype.showMoreTrelloAttachments=function(e){ae.stop(e),this.fShowAllTrelloAttachments=!0,this.renderAttachments()},t.prototype.renderAttachments=function(){var e,t;return null!=(t=this._renderAttachmentsPromise)&&t.cancel(),e=ue.clone(this.model.attachmentList.models).reverse(),this._renderAttachmentsPromise=X.all([X.all(e.map(s.getAttachmentData)),X.try(function(t){return function(){return Q.all({timeout:5e3,command:"attachment-sections",card:t.model,board:t.model.getBoard(),options:{entries:J.attachments(e)}})}}(this)).cancellable()]).spread(function(t){return function(n,r){var o,i,a,s,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,D,I,N,V,z;for(m={},z={},I=function(){var e,t,n,o,i,a,s;for(s=[],e=0,n=r.length;n>e;e++)if(B=r[e],(null!=B&&null!=(i=B.claimed)?i.length:void 0)>0){for(a=B.claimed,t=0,o=a.length;o>t;t++)f=a[t],m[f.id]=!0;D=B.id||B.title,(ue.isFunction(D)||z[D])&&(D=ue.uniqueId("attachment-section_")),z[D]=!0,P=this.subview(Y,this.model,{},D),P.updateSection(B),s.push(P)}return s}.call(t),V=t.getTrelloAttachments(e,n,m),V.forEach(function(e){var t;return t=e.attachment,m[t.id]=!0}),_=ue.chain(r).pluck("idPlugin").uniq().value(),C=0,x=_.length;x>C;C++)w=_[C],Be("card details","views","Power-Up","","","attachment-sections",w);c=t.$(".js-plugin-sections"),t.ensureSubviews(I,c),k=4,T=0,M=[];for(y in e){if(d=e[y],T===k||T===e.length)break;M.push(d),m.hasOwnProperty(d.id)||T++}return j=ue.reject(e,function(e){return m[e.id]}),g=T>0,v=T<j.length,i=t.$(".js-attachments-section"),l=t.$(".js-trello-attachments-section"),o=i.find(".js-attachment-list"),N=(A=t.numTrelloAttachmentsProcessing.get())?ue.times(Math.min(3,A),function(e){return t.subview(L,t.model,null,"processing-trello-attachment-"+e)}):[],V.length>0&&(S=(V.length-k).toString(),S>0?t.fShowAllTrelloAttachments?(l.find(".js-show-more-trello-attachments").addClass("hide"),l.find(".js-show-fewer-trello-attachments").removeClass("hide")):(V=V.splice(0,k),l.find(".js-show-more-trello-attachments").removeClass("hide"),l.find(".js-show-fewer-trello-attachments").addClass("hide"),l.find(".js-view-all-trello-attachments").text(ye("view all trello attachments",{hiddenCount:S}))):(l.find(".js-show-more-trello-attachments").addClass("hide"),l.find(".js-show-fewer-trello-attachments").addClass("hide")),N=N.concat(V.map(function(e){var n,r;return n=e.attachment,r=e.attachmentData,"trello card"===r.type?t.subview(oe,n,{cardUrl:r.url}):t.subview(re,n,{boardUrl:r.url})}))),t.ensureSubviews(N,t.$(".js-trello-attachments-list")),l.toggleClass("hide",ue.isEmpty(N)),t.enableAttachmentSorting(o),b=(j.length-k).toString(),i.find(".js-view-all-attachments").text(ye("view all attachments",{hiddenCount:b})),a=i.find(".js-show-fewer-attachments").addClass("hide"),s=i.find(".js-show-more-attachments").addClass("hide"),
O=(E=t.numAttachmentsProcessing.get())?ue.times(Math.min(3,E),function(e){return t.subview(L,t.model,null,"processing-"+e)}):[],h=g?(p=e,v?t.fShowAllAttachments?a.removeClass("hide"):(s.removeClass("hide"),p=M):void 0,p.map(function(e){var n;return n=m.hasOwnProperty(e.id),t.subview(u,e,{isHidden:n,onReply:function(){return t.replyToAttachment(e)},onPluginThumbnail:function(e){return t.pluginThumbTrackCache[e]?void 0:(t.pluginThumbTrackCache[e]=!0,Be("card details","views","Power-Up","","","attachment-thumbnail",e))}})})):[],I=Ie.call(O).concat(Ie.call(h)),t.ensureSubviews(I,o),i.toggleClass("hide",ue.isEmpty(I))}}(this)).catch(X.CancellationError,function(){}),this._renderAttachmentsPromise.done(),this},t.prototype.renderEditing=function(){var e,t,n,r;return r=this.model.memberEditingList.models,e={members:function(){var e,o,i;for(i=[],e=0,o=r.length;o>e;e++)t=r[e],d.isMe(t)||null==t.get("editing")||(n=t.toJSON(),n.icon=function(){switch(t.get("editing").action){case"commenting":return"comment";case"editing":return"edit";default:return"edit"}}(),i.push(n));return i}()},this.$(".js-editing-members").empty().append(fe(e)).toggleClass("hide",0===e.members.length),this},t.prototype.sortStop=function(e,t){ae.stopPropagation(e),t.item.trigger("movechecklist",[t])},t.prototype.sortStopAttachments=function(e,t){return ae.stopPropagation(e),t.item.trigger("moveattachment",[t])},t.prototype.keydownEvent=function(e){return t.__super__.keydownEvent.apply(this,arguments),d.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"editing"})},t.prototype.keydownCommentEvent=function(e){var t;return d.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"commenting"}),t=D.getKey(e),t!==I.Tab||!r(e.target).hasClass("new-comment-input")||!this.model.editable()||Z.view instanceof h||""!==r(e.target).val()||(ae.stop(e),this.submitComment(e)),D.isForceSubmitEvent(e)&&!this._isCommentTooLong()?this.submitComment(e):this.checkInsert(e)},t.prototype._isCommentTooLong=function(){return this.$(".js-new-comment-input").val().length>this.maximumCommentLength},t.prototype.renderCommentSubmitAbility=function(e){var t,n,r;return n=this._isCommentTooLong(),r=0===this.$(".js-new-comment-input").val().length,t=r||n,this.$(".js-add-comment").prop("disabled",t),this.$(".js-comment-subscribe").toggleClass("is-visible",!t&&!this.model.isSubscribed()),this.$(".comment-too-long-warning").toggleClass("is-shown",n),this.$(".comment-too-long-warning").find(".js-attach-comment").toggle("undefined"!=typeof Blob&&null!==Blob),this},t.prototype.renderCommentAndSubscribeBox=function(e){return this.$(".js-comment-subscribe").toggleClass("is-subscribed"),this},t.prototype._cancelEditing=function(){return d.me().editing({idBoard:this.model.getBoard().id})},t.prototype.commentInputEvent=function(e){return this.renderCommentSubmitAbility(),this},t.prototype.clearComment=function(){var e;return e=r(this.commentInput),e.val("").css("height",""),this.renderCommentSubmitAbility()},t.prototype.submitComment=function(e){var t,n;return Me("Card Detail","Comment","Submit Comment"),ae.stop(e),t=r(this.commentInput),n=t.val(),this.clearComment(),this._cancelEditing(),this.model.addComment(n),d.me().isSubscribeOnCommentEnabled()&&!this.model.isSubscribed()&&be("commentAndSubscribe").get("enabled")&&this.model.subscribe(!0),z.cancelEdits(),this.collapseComment(),this.renderCommentSubmitAbility(),Z.hide(),!1},t.prototype.subscribeOnComment=function(e){var t;return ae.stop(e),t=d.me(),t.isSubscribeOnCommentEnabled()?Me("Card Detail","Comment and Subscribe","Disable"):Me("Card Detail","Comment and Subscribe","Enable"),this.renderCommentAndSubscribeBox(),t.toggleSubscribeOnComment(),!1},t.prototype.clearEdits=function(){return this._cancelEditing(),t.__super__.clearEdits.apply(this,arguments)},t.prototype.commitEdits=function(){return this._cancelEditing(),t.__super__.commitEdits.apply(this,arguments)},t.prototype.stopEditing=function(){return this._cancelEditing(),t.__super__.stopEditing.apply(this,arguments)},t.prototype.truncateComment=function(e){var t;return t=this.$(".js-new-comment-input"),t.val(t.val().substr(0,this.maximumCommentLength)),this.$(".js-new-comment-input").autosize(),this.renderCommentSubmitAbility()},t.prototype.attachComment=function(e){var t;return t=new Blob([this.$(".js-new-comment-input").val()],{type:"text/plain"}),this.incrementNumAttachmentsProcessing(),this.model.upload(t,"comment.txt",this.callback(function(e){return function(){return e.decrementNumAttachmentsProcessing()}}(this))),this.clearComment(),z.cancelEdits(),this.collapseComment()},t.prototype.inputComment=function(e){var t;t=this.$(".js-new-comment"),z.cancelEdits(this.commentInput),t.addClass("is-focused")},t.prototype.clickAwayFromComment=function(e){var t,n;if(!Z.isVisible&&(n=e.target,t=this.$(".js-new-comment"),!r(n).closest(t).length||0!==n.children.length))return this.collapseComment()},t.prototype.collapseComment=function(){return this.$(".js-new-comment").removeClass("is-focused")},t.prototype.replyToAction=function(e,t){var n,r,o,i,a,s,u;i=this.modelCache.get("Member",t.get("idMemberCreator")),u=null!=i?i.get("username"):void 0,n=this.$(this.commentInput),s=t.isCommentLike()&&null!=u?(z.cancelEdits(this.commentInput),RegExp("@"+u+"(\\W|$)").test(n.val())?(n.focus(),null):"@"+u+" "):t.isAddAttachment()&&null!=(r=this.model.attachmentList.get(null!=(a=t.get("data").attachment)?a.id:void 0))?(o=ce(r),d.isMe(i)?o:["@"+u,o].join(" ")):void 0,s&&(n.addClass("is-focused"),ae.insertSelection(n,s),n.trigger("autosize.resize"))},t.prototype.replyToAttachment=function(e){var t;return z.cancelEdits(this.commentInput),t=this.$(this.commentInput),t.addClass("is-focused"),ae.insertSelection(t,ce(e)),t.trigger("autosize.resize")},t.prototype.getCard=function(){return this.model},t.prototype.getTextInput=function(){return this.$(".js-new-comment-input")},t.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},t.prototype.openEditMembersPopOver=function(e){Z.toggle({elem:e,view:y,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.editMembersMain=function(e){ae.stop(e),this.openEditMembersPopOver(this.$(".js-details-edit-members")),Me("Card Detail","Edit Members via Main Column")},t.prototype.changeMembersSidebar=function(e){ae.stop(e),this.openEditMembersPopOver(this.$(".js-change-card-members")),Me("Card Detail","Sidebar","Open Manage Member Menu")},t.prototype.addChecklistSidebar=function(e){return ae.preventDefault(e),Z.toggle({elem:e.target,view:i,options:{model:this.model,modelCache:this.modelCache,cardView:this}}),Me("Card Detail","Add Checklist Button","Open Add Checklist Menu"),!1},t.prototype.showDueDateBadgeMenu=function(e){ae.stop(e),Z.toggle({elem:this.$(".js-details-edit-due-date"),view:S,options:{model:this.model,modelCache:this.modelCache}}),Me("Card Detail","Due Date Badge","Open Due Date Menu")},t.prototype.toggleDueDateComplete=function(e){var t;return t=!this.model.get("dueComplete"),this.model.update({dueComplete:t}),Me("Card Detail","Due Date Badge",t?"Marked Complete":"Marked Incomplete")},t.prototype.openAttachPicker=function(e){var t,n;return ae.stop(e),t=r(e.target).closest(".js-attach"),Z.toggle({elem:t,view:c,options:{model:this.model,modelCache:this.modelCache}}),n=r(t).hasClass("inline")?"Inline":"Sidebar",Me("Card Detail","Open Attachment Type Picker","Via "+n+" Button"),!1},t.prototype.openAttachTrelloPicker=function(e){var t;return ae.stop(e),t=r(e.target).closest(".js-attach-trello-attachment"),Me("Card Detail","Open Trello Attachment Picker","Via Trello Attachments Section"),Z.toggle({elem:t,view:ie,options:{model:this.model,modelCache:this.modelCache,card:this.model,button:!0,callback:function(e){return function(t){var n;return n=t.get("url"),X.fromNode(function(t){return e.model.uploadUrl(n,t)}).catch(F,function(){return a.show("unable to attach card or board","error","trelloattachment",5e3)}).then(function(){return Z.popView()})}}(this)}}),!1},t.prototype.dueDateSidebar=function(e){return ae.preventDefault(e),Z.toggle({elem:this.$(".js-add-due-date"),view:S,options:{model:this.model,modelCache:this.modelCache}}),Me("Card Detail","Sidebar","Open Due Date Menu"),!1},t.prototype.subscribeToCard=function(e){return this.model.subscribe(!0),Me("Card Detail","Sidebar","Subscribe"),this.renderCommentSubmitAbility(),!1},t.prototype.unsubscribeFromCard=function(e){return this.model.subscribe(!1),Me("Card Detail","Sidebar","Unsubscribe"),this.renderCommentSubmitAbility(),!1},t.prototype.vote=function(e){return ae.preventDefault(e),this.model.vote(!0),Me("Card Detail","Sidebar","Vote"),Be("card detail","opens","Power-Up","","","card-button",R.voting),!1},t.prototype.unvote=function(e){return ae.preventDefault(e),Me("Card Detail","Sidebar","Unvote"),Be("card detail","opens","Power-Up","","","card-button",R.voting),this.model.vote(!1),!1},t.prototype.openFormatHelp=function(e){return Me("Card Detail","Formatting Help"),Z.toggle({elem:this.$(".js-format-help"),view:B,options:{model:this.model,modelCache:this.modelCache},keepEdits:!0}),!1},t.prototype.dragenter=function(e){var t,n,o;if(this.model.editable())return o=!this.model.canAttach(),t=r(".window-overlay").scrollTop()+200,n=o?".dropzone-limited":".dropzone",this.$(n).css({"padding-top":t+"px"}),this.$el.addClass("is-drophover").toggleClass("is-limited",o)},t.prototype.dragleave=function(e){return this.$el.removeClass("is-drophover")},t.prototype.dropFiles=function(e){var t,n,r;if(this.model.canAttach()&&(Me("Card Detail","Drop Attachment Upload"),t=e.detail,!Pe(this.model.getBoard(),t)))return this.incrementNumAttachmentsProcessing(t.length),n=q.lock("card drop files"),r=0,X.resolve(t).each(function(e){return function(t){var n;return n=t.name||Te(),je(e.model,"upload",t,n).finally(e.callback(function(){return r++,e.decrementNumAttachmentsProcessing()}))}}(this)).catch(function(){return a.show("unable to upload file","error","upload",5e3)}).finally(function(e){return function(){return r!==t.length&&e.decrementNumAttachmentsProcessing(t.length-r),q.unlock(n)}}(this)).done(),e.stopPropagation()},t.prototype.dropUrl=function(e){var t,n,r;if(this.model.canAttach())return Me("Card Detail","Drop Attachment Url"),r=e.detail,t="board"===(n=Se(r).type)||"card"===n,t?this.incrementNumTrelloAttachmentsProcessing():this.incrementNumAttachmentsProcessing(),this.model.uploadUrl(r,this.callback(function(e){return function(){return t?e.decrementNumTrelloAttachmentsProcessing():e.decrementNumAttachmentsProcessing()}}(this))),e.stopPropagation()},t.prototype.focusChecklistAdd=function(e){return this.existingSubview(k,e).focusNewTaskInput()},t.prototype.closeDialog=function(){return E.hide()},t.prototype.highlight=function(e,t){var n,r,o,i;if(null!=(o=/^([a-z]+)-([a-f0-9]{24})$/.exec(e)))switch(n=o[0],i=o[1],r=o[2],i){case"action":case"comment":this.actionListView.setHighlight(r),this.model.actionList.get(r)||this.showAllActions(),t&&this.scrollToHighlight()}},t.prototype.interceptHighlightLink=function(e){var t,n,r,o,i;e.target.href&&(i=ae.relativeUrl(e.target.href),n=j.getCardUrl(this.model),null!=(o=RegExp("^"+n+"\\#([^\\#]+)$").exec(i))&&(t=o[0],r=o[1],r&&(ae.stop(e),r===location.hash.substr(1)?(history.replaceState(null,null,location.pathname),this.actionListView.setHighlight(null)):(history.replaceState(null,null,location.pathname+"#"+r),this.highlight(r,!0)))))},t.prototype.showDetails=function(e){return ae.stop(e),d.me().setShowDetails(!0),this.getData(),this.renderActionList()},t.prototype.hideDetails=function(e){return ae.stop(e),d.me().setShowDetails(!1),this.getData(),this.renderActionList()},t.prototype.enableAttachmentSorting=function(e){var t;return(null!=(t=this.model)?t.editable():void 0)?e.sortable({axis:"y",handle:[".attachment-thumbnail-details",".attachment-thumbnail-preview"].join(","),delay:75,distance:7,tolerance:"pointer",helper:"clone",placeholder:"attachment-thumbnail placeholder",items:".attachment-thumbnail",start:function(e,t){var n;return n=r(t.helper).outerHeight(),r(t.placeholder).height(n)}}):void 0},t.prototype.getTrelloAttachments=function(e,t,n){var r;return r=["trello board","trello card"],e.map(function(e){return function(e,o){var i,a;return i=t[o],i.isKnownService&&(a=i.type,Ne.call(r,a)>=0)&&!n[e.id]?{attachment:e,attachmentData:i}:null}}(this)).filter(function(e){return function(e){return null!==e}}(this))},t}(M))},{}],442:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("jquery"),o=e(82),a=e(447),s=e(518),u=e(564),c=e(571),d=e(549),p=e("underscore"),f=e(48),l=e("bluebird"),m=e(245),h=function(e,t){var n;for(e=p.clone(e),n=[];e.length>0;)n.push(e.splice(0,t));return n},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.viewType=a,t.prototype.getModels=function(){return this.collection.models},t.prototype.render=function(){return f("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),this.options.deferCards?c.enqueue("deferredCardList_"+this.cid,function(e){return function(){return e.progressiveRender()}}(this)):this.progressiveRender(),this},t.prototype.progressiveRender=function(){var e;return e=Math.max(10,Math.ceil(window.innerHeight/32)),l.resolve(h(this.getModels(),e)).each(function(e){return function(t){var n;return e.appendSubviews(function(){var e,r,o;for(o=[],e=0,r=t.length;r>e;e++)n=t[e],o.push(this.subview(this.viewType,n));return o}.call(e)),new l(m(e,"defer"))}}(this)).tap(function(e){return function(){var t;"chrome"!==(t=o.browserStr)&&"firefox"!==t&&"opera"!==t&&"windows"===o.osStr&&(e.defer(function(){return r("#board").css("bottom",1)}),e.setTimeout(function(){return r("#board").css("bottom",0)},150))}}(this)).done()},t.prototype.insertSubview=function(e,t,n){var r;return null==n&&(n=this.$el),f("render","inserting "+e.$el.find("h2").text()+" at position "+t),"number"==typeof t?t=0>=t?n.children().eq(0):t<n.children().length?n.children().eq(t):void 0:t instanceof d&&(t=t.$el),r=e.model,e.$el.is(":empty")?(e.delegateEvents(),e.render()):n.hasClass("hide")||r.getBoard().filter.satisfiesFilter(r)||e.renderFiltered(),(null!=t?t.length:void 0)>0?e.$el.insertBefore(t):n.append(e.$el),u.refreshIfInitialized(this.$el)},t}(s)},{}],443:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),o=e(35),i=e(167),s=e(100),u=e(22),c=e(39),l=e(40),d=e("bluebird"),p=e(629),h=e(133),m=e(549),f=e("underscore"),g=e(945),v=e(51),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){return this.showAllOrgMembers=!1,this.updateSearch=f.debounce(this.updateSearch,100),this.makeDebouncedMethods("renderMems"),null!=this.model.memberList&&this.listenTo(this.model.memberList,"add remove reset",function(e){return function(){return e.updateOrdering(),e.renderMemsDebounced()}}(this)),this.updateOrdering()},t.prototype.events={"click .js-select-member":"selectMem","click .js-show-org-members":"showOrgMembers","mouseenter .pop-over-member-list .item":"hoverMemberSelect",input:"updateSearch",keydown:"keydownEvent"},t.prototype.updateOrdering=function(){var e;return this._onCardMembers={},this._onListMembers={},this._onBoardMembers={},e=function(e,t){return t.memberList.forEach(function(t){return e[t.id]=!0})},this.model instanceof i&&e(this._onCardMembers,this.model),this.model.getList().cardList.forEach(e.bind(null,this._onListMembers)),this.model.getBoard().listList.forEach(function(t){return function(n){return n.cardList.forEach(e.bind(null,t._onBoardMembers))}}(this))},t.prototype.render=function(){var e;return e=this.model.getBoard(),this.$el.html(g({includeOrgMembers:null!=e.getOrganization()&&e.canInviteMembers()})),this.renderMems()},t.prototype.getSearch=function(){return this.$(".js-search-mem").val().trim()},t.prototype.filteredMembers=function(e,t){var n;return n=RegExp("^"+h.escapeForRegex(t.toLowerCase())),f.chain(e).filter(function(e){return function(e){var t;return t=h.getMemNameArray(e),f.find(t,function(e){return n.test(e)})}}(this)).first(8).value()},t.prototype.filteredBoardMembers=function(e){var t,n,r,i;return n=this.model.getBoard(),r=this.model.getList(),t=n.memberList.filterDeactivated({force:!0}),i=t.sortBy(function(e){return function(t){var n;return n=o.isMe(t)?0:e._onCardMembers[t.id]?1:e._onListMembers[t.id]?2:e._onBoardMembers[t.id]?3:4,n+t.get("fullName")}}(this)),e?this.filteredMembers(i,e):i},t.prototype.filteredOrgMembers=function(e){var t;return this.showOrgSection()?(t=this.model.getBoard().getOrganization(),null==this.orgMembersPromise&&(this.orgMembersPromise=l.loadOrganizationMembersData(t.id)),this.orgMembersPromise.then(function(n){return function(r){var o,i;return o=(i=t.memberList.filterDeactivated({force:!0})).without.apply(i,n.model.getBoard().memberList.models),e?n.filteredMembers(o,e):o}}(this))):[]},t.prototype.hasSearch=function(){return""!==this.getSearch()},t.prototype.showOrgSection=function(){var e;return e=this.model.getBoard().getOrganization(),null!=e&&(this.showAllOrgMembers||this.hasSearch())},t.prototype.renderMems=function(){var e,t,n,r,o,i;return i=this.getSearch(),e=this.filteredBoardMembers(i),t=this.filteredOrgMembers(i),r={".js-board-members":e,".js-org-members":t},o=this.showOrgSection(),this.$(".js-show-org-members").toggleClass("hide",o),this.$(".js-org-members").toggleClass("hide",!o),null!=(n=this._renderMemsPromise)&&n.cancel(),this._renderMemsPromise=d.each(f.keys(r),function(e){return function(t){var n,o,i;return i=e.$(t),0!==i.length?(n=i.find(".js-loading"),o=i.find(".js-no-results"),n.removeClass("hide"),o.addClass("hide"),d.resolve(r[t]).then(function(t){var r,a,s;return n.addClass("hide"),r=i.find(".js-mem-list"),r.toggleClass("collapsed",t.length>9),o.toggleClass("hide",t.length>0),s=function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)a=t[e],r.push(this.subview(p,a,{showUnconfirmed:!0,card:this.model}));return r}.call(e),e.ensureSubviews(s,r)})):void 0}}(this)).cancellable().then(function(e){return function(){var t;return e.hasSearch()&&(t=e.$el.find(".item").first(),t.length>0)?h.selectMenuItem(e.$el,".item",t):void 0}}(this)).done(),this},t.prototype.hoverMemberSelect=function(e){return h.selectMenuItem(this.$el,".item",e.currentTarget)},t.prototype.keydownEvent=function(e){var t;t=s.getKey(e),t===u.Tab||t===u.Enter?(h.stop(e),this.$(".js-mem-list .item.selected:first .js-select-member").first().click(),this.$(".js-search-mem").val(""),this.focusSearch(),this.renderMems()):(t===u.ArrowUp||t===u.ArrowDown)&&(h.stop(e),h.navMenuList(this.$el,".item",t))},t.prototype.updateSearch=function(e){return this.renderMems(),this.focusSearch()},t.prototype.selectMem=function(e){var t,n,o,i,a,s;h.stop(e),s=this.model,n=r(e.currentTarget),t=n.closest(".item"),i=n.attr("idMember"),t.hasClass("active")?(s.removeMember(i),t.removeClass("active"),v("Card","Change Member","Remove Member")):(o=this.model.getBoard(),a=c.get("Member",i),d.try(function(){return o.hasActiveMembership(a)?void 0:d.fromNode(function(e){return o.addMember(a,e),v("Card","Add Member to Board and Card")})}).then(function(){return s.addMember(i),t.addClass("active"),v("Card","Change Member","Add Member")}).done()),this.focusSearch()},t.prototype.focusSearch=function(){this.$(".js-search-mem").focus()},t.prototype.showOrgMembers=function(e){this.showAllOrgMembers=!0,this.renderMems()},t}(m)},{}],444:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e(220),o=e(35),a=e(563),s=e(36),u=e(569),c=e(452),l=e(549),d=e(109),p=e(546),h=e(51),t.exports=d(c,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="move card",t.prototype.initialize=function(e){var t;return t=e.onCommit,this.onCommit=null!=t?t:function(){},this.listenTo(o.me().boardList,"add remove reset",this.render)},t.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData","click .js-submit":"commitChange"},t.prototype.render=function(){var e,t,n,r,i,a,s,u,c,l;for(t={organizations:o.me().getOpenBoardsByOrg(!0)},c=t.organizations,n=0,i=c.length;i>n;n++)for(s=c[n],l=s.boards,r=0,a=l.length;a>r;r++)e=l[r],e.id===this.model.get("idBoard")&&(e.selected=!0);return u={move_card_controls:p.move_card_controls},this.$el.html(p.fill("popover_move_card",t,{},u)),this.updateBoardData(),this},t.prototype.commitChange=function(e){var t,n,o,i,s,c,l,d;t=this.$(".js-select-board"),n=this.$(".js-select-list"),o=this.$(".js-select-position"),i=t.find("option:selected").val(),s=n.find("option:selected").val(),d=o.find("option:selected").val(),c=parseInt(o.find("option:selected").prop("index"),10),i===this.model.getBoard().id?(l=this.model.getBoard().listList.get(s),this.model.moveToList(l,c),h("Card","Move Menu","Same Board")):null!=i&&null!=s&&null!=d&&(h("Card","Move Menu","Changed Board"),this.model.getList().cardList.remove(this.model),a.hide(),r({url:"/1/cards/"+this.model.id,type:"put",data:{idList:s,idBoard:i,pos:d},success:function(e){return function(t){return e.model.board=null,e.model.set("idBoard",t.idBoard),e.model.set("idList",t.idList),e.model.set("pos",t.pos)}}(this)})),this.onCommit(),u.hide()},t}(l))},{}],445:[function(e,t,n){var r,o,i,a,s;r=e(584),i=e(569),a=e(133),s=e(888),t.exports=o=function(){function e(){}return e.prototype.openMemberOnCardMenu=function(e){var t,n,o,s;a.stop(e),n=this.$(e.target).closest(".member"),o=n.attr("data-idmem"),s=this.modelCache.get("Member",o),t=this.model,i.toggle({elem:n,view:r,options:{model:s,modelCache:this.modelCache,card:t}})},e.prototype.getMemberOnCardHtml=function(e){var t,n,r;return n=e.toJSON(),t=this.model.getBoard(),n.isVirtual=(null!=(r=t.getOrganization())?r.isVirtual(e):void 0)||t.isVirtual(e),n.isDeactivated=t.isDeactivated(e),s(n)},e}()},{}],446:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h;r=e(82),o=e(83),i=e(522),a=e(205),h=e(546),s=e("underscore"),l=e(854),p=e(544)("badge"),c=e(104),d=e(88),u=p.renderable(function(e){var t,n,r,a,s,u,l,d,h,m,f,g,v,b;return t=e.archived,n=e.attachments,r=e.attachmentsByType,a=e.checkItems,s=e.checkItemsChecked,u=e.comments,l=e.description,d=e.due,h=e.dueComplete,m=e.notifications,f=e.subscribed,v=e.viewingMemberVoted,b=e.votes,m&&p.div(".badge.is-unread-notification",{title:c("badge.notifications")},function(){return p.span(".badge-icon.icon-sm.icon-notification"),p.span(".badge-text",function(){return p.text(m)})}),f&&p.div(".badge.is-icon-only",{title:c("badge.subscribed")},function(){return p.span(".badge-icon.icon-sm.icon-subscribe")}),b>0&&p.div(".badge",{title:c("badge.votes"),class:p.classify({"is-voted":v})},function(){return p.span(".badge-icon.icon-sm.icon-vote"),p.span(".badge-text",function(){return p.text(b)})}),d&&p.div(".badge",{title:i.titleForDueDate(d,h),class:i.classForDueDate(d,h)},function(){return p.span(".badge-icon.icon-sm.icon-clock"),p.span(".badge-text",function(){return p.text(o.toDateString(d))})}),l&&p.div(".badge.is-icon-only",{title:c("badge.description")},function(){return p.span(".badge-icon.icon-sm.icon-description")}),u>0&&p.div(".badge",{title:c("badge.comments")},function(){return p.span(".badge-icon.icon-sm.icon-comment"),p.span(".badge-text",function(){return p.text(u)})}),g=r?r.trello.board+r.trello.card:0,n-=g,n>0&&p.div(".badge",{title:c("badge.attachments")},function(){return p.span(".badge-icon.icon-sm.icon-attachment"),p.span(".badge-text",function(){return p.text(n)})}),g>0&&p.div(".badge",{title:c("badge.trello attachments")},function(){return p.span(".badge-icon.icon-sm.icon-board"),p.span(".badge-text",function(){return p.text(g)})}),a>0&&p.div(".badge",{title:c("badge.checkitems"),class:p.classify({"is-complete":s===a})},function(){return p.span(".badge-icon.icon-sm.icon-checklist"),p.span(".badge-text",function(){return p.text(s),p.text("/"),p.text(a)})}),t?p.div(".badge",{title:c("badge.archived.title")},function(){return p.span(".badge-icon.icon-sm.icon-archive"),p.span(".badge-text",function(){return p.text(c("badge.archived.text"))})}):void 0}),t.exports={renderCover:function(){var e,t,n,o,i,a,s,u,c,l;return this.showCover()&&(n=this.model.attachmentList.get(this.model.get("idAttachmentCover"))),null!=n?(s=r.isHighDPI()?600:300,u=null!=(c=n.smallestPreviewBiggerThan(s))?c:n.biggestPreview(),i=null!=u?u.url:n.get("url"),e=this.$(".js-card-cover"),e.css({"background-color":null!=(l=n.get("edgeColor"))?l:"transparent","background-image":'url("'+i+'")'}).toggleClass("is-no-preview-size",null==u),null!=u&&(t=this.$(".js-card-stickers"),a=Math.min(u.height,260),o=245*u.height/u.width,a>=o?(e.css({height:o,"background-size":"cover"}),t.css("height",o)):(e.css({height:a,"background-size":"contain"}),t.css("height",a)))):this.$(".js-card-cover").css({"background-image":"","background-color":"",height:""}).removeClass("is-no-preview-size"),this.$el.toggleClass("is-covered",null!=n),this},getBadgesHtml:function(){var e,t;return e=null!=(t=this.model.get("badges"))?t:{},u({subscribed:e.subscribed,description:e.description,comments:e.comments,attachments:e.attachments,attachmentsByType:e.attachmentsByType,checkItems:e.checkItems,checkItemsChecked:e.checkItemsChecked,votes:e.votes,viewingMemberVoted:e.viewingMemberVoted,due:this.model.get("due"),dueComplete:this.model.get("dueComplete"),notifications:s.filter(this.modelCache.all("Notification"),function(e){return function(t){var n,r;return t.get("unread")&&null!=e.model.id&&(null!=(n=t.get("data"))&&null!=(r=n.card)?r.id:void 0)===e.model.id}}(this)).length,archived:this.model.get("closed")})},renderBadges:function(){var e,t;return e=null!=(t=this.model.get("badges"))?t:{},this.el.querySelector(".js-badges").innerHTML=this.getBadgesHtml(),this},renderMembers:function(e){var t,n,r,o;return t="",o=this.model.getBoard().getOrganization(),r=function(){var e,t,r;for(t=this.model.memberList.models,r=[],e=t.length-1;e>=0;e+=-1)n=t[e],r.push(this.getMemberOnCardHtml(n));return r}.call(this),this.$(".js-list-card-members").empty().append(r.join("")),this},labelsData:function(){return s.chain(this.model.getLabels()).sort(a.compare).map(function(e){return function(t){return e.model.dataForLabel(t)}}(this)).filter(function(e){return!s.isEmpty(e.color)}).value()},renderLabels:function(){var e,t,n;return n=function(){var n,r,o,i;for(o=this.labelsData(),i=[],n=0,r=o.length;r>n;n++)t=o[n],e=t,e.extraClasses=["mod-card-front"],i.push(l(e));return i}.call(this),this.$(".js-card-labels").empty().append(n),this}}},{}],447:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z,R,F,$,U,q,H=function(e,t){function n(){this.constructor=e}for(var r in t)W.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},W={}.hasOwnProperty;r=e("jquery"),o=e(559),i=e(35),a=e(82),s=e(553),u=e(443),l=e(445),d=e(446),p=e(7),h=e(448),m=e(83),e(519),f=e(564),v=e(22),b=e(557),y=e(280),w=e(698),_=e(569),k=e(571),C=e("bluebird"),j=e(451),x=e("promise-queue"),S=e(732),T=e(547),E=e(133),O=e(549),A=e("underscore"),D=e(48),I=e(109),$=e(546),U=e(51),N=e("moment"),L=e(104),q=e(550),z=e(528),F=e(143),V=e(136),P=e(245),R=e(537),M=e(796),g=new x(1),B=function(e){g.add(function(){return new C(function(t){e.hookDroppable(),A.defer(t)})})},t.exports=I(l,c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return H(t,e),A.extend(t.prototype,d),t.prototype.className="list-card js-member-droppable",t.prototype.tagName="a",t.prototype.filterDeactivated=!0,t.prototype.showMemberStatus=!1,t.prototype.applyBoardCardFilter=!0,t.prototype.events={moveto:"moveTo",movein:"moveIn",moveToCalendarDay:"moveToCalendarDay",moveInCalendarDay:"moveInCalendarDay","click .js-open-quick-card-editor":"openQuickCardEditor","click .js-member-on-card-menu":"openMemberOnCardMenu","click .card-label.mod-card-front":"labelClick",click:"showDetail",mouseenter:function(){return this.trigger("mouseEnterCardView")},mousemove:function(){return this.trigger("mouseMoveCardView")},mouseleave:function(){return this.trigger("mouseLeaveCardView")},"mouseenter .card-label.mod-card-front":"labelMouseEnter","mouseleave .card-label.mod-card-front":"labelMouseLeave","dd-enter:files":"dragenter","dd-leave:files":"dragleave","dd-drop:files":"dropFiles","dd-enter:url":"dragenter","dd-leave:url":"dragleave","dd-drop:url":"dropUrl",shortcut:"shortcut","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl"},t.prototype.initialize=function(){var e,t,n,r;for(r=["filterDeactivated","showMemberStatus","applyBoardCardFilter"],e=0,t=r.length;t>e;e++)n=r[e],null!=this.options[n]&&(this[n]=this.options[n]);k.enqueue("initialize_"+this.cid,function(e){return function(t){var n,r;return r=t.delayed,r&&e.render(),e.makeDebouncedMethods("renderName","renderLabels","renderCover","renderFiltered","renderPowerUpEffects","renderStickers","renderBadges","renderDueComplete"),e.listenTo(e.model,{"change:name":e.renderNameDebounced,"change:labels":e.renderLabelsDebounced,"change:idAttachmentCover":e.renderCoverDebounced,"change:name change:labels change:idLabels change:due change:dueComplete":e.renderFilteredDebounced,"change:dueComplete":e.renderDueComplete,"change:dateLastActivity":e.renderPowerUpEffectsDebounced,"change:badges change:due change:dueComplete change:subscribed":e.renderBadgesDebounced,keyboardMove:e.scrollIntoView}),e.listenTo(e.modelCache,"add:Notification remove:Notification change:Notification",e.renderBadgesDebounced),e.listenTo(m,"renderInterval",e.renderBadgesDebounced),e.listenTo(e.model.memberList,"add remove reset",e.frameDebounce(function(){return this.renderMembers(),this.renderFiltered()})),e.listenTo(e.model.labelList,"add remove reset change",e.renderLabelsDebounced),e.listenTo(e.model.stickerList,{"add remove reset change sort":e.renderStickersDebounced}),n=e.model.getBoard(),e.listenTo(n,"change:powerUps change:prefs.cardAging",e.renderPowerUpEffectsDebounced),e.subscribe(R(n,e.model),function(){return e.renderPowerUpEffectsDebounced()}),e.listenTo(n.filter,"change",e.renderFilteredDebounced),e.listenTo(n,"change:labels",e.renderLabelsDebounced),e.listenTo(n,"change:memberships",e.renderMembers),e.listenTo(n.viewState,"active-card-changed",e.renderActiveState),e.listenTo(e,"mouseEnterCardView",function(){return B(this)})}}(this))},t.prototype.renderActiveState=function(){var e;null!=this.$el&&(e=this.model.getBoard().viewState.isCardSelected(this.model),this.$el.toggleClass("active-card",e),e?T.addHandler(this,{scope:"card"}):T.removeHandler(this))},t.prototype.shortcut=function(e){var t,n,r,o,a;switch(r=i.isLoggedIn(),t=this.model.editable(),o=this.onCalendar,e){case v.Enter:return this.showDetail(),"Enter - Open Card";case v.E:if(t)return this.openQuickCardEditor(),"E - Open Quick Card Editor";break;case v.T:return p.showCardDetail(this.model,{runMethod:"editTitle"}),"T - Open Card and Edit Title";case v.D:if(t)return this.showPopOver(h),["D - Due Dates","On Board View"];break;case v.L:if(t)return this.showPopOver(s,{hideOnSelect:!1}),["L - Edit Labels","On Board View"];break;case v._0:case v._1:case v._2:case v._3:case v._4:case v._5:case v._6:case v._7:case v._8:case v._9:if(t)return n=function(e){
return function(t){return e.showPopOver(s,{searchInit:t,hideOnSelect:!0})}}(this),b.setLabelFromKey(e,this.model,n),"0-9 - Toggle Specific Label";break;case v.A:case v.M:if(t)return this.showPopOver(u),["A - Assign Members","Board View"];break;case v.Space:if(t&&this.model.getBoard().hasActiveMembership(i.me()))return this.model.toggleMember(i.myId()),"Space - Toggle Assigning Self";break;case v.C:if(t)return this.model.close(),"C - Archive Card";break;case v.AngleRight:case v.Period:if(t&&!o)return this.model.moveToNextList(e===v.AngleRight?"top":"bottom"),"> - Move to Next List";break;case v.AngleLeft:case v.Comma:if(t&&!o)return this.model.moveToPrevList(e===v.AngleLeft?"top":"bottom"),"< - Move to Previous List";break;case v.V:if(r)return this.model.toggleVote(),"V - Vote";break;case v.S:if(r)return a=this.model.get("subscribed"),this.model.subscribe(!a),["S - Subscribe",a?"Unsubscribe":"Subscribe"]}},t.prototype.showPopOver=function(e,t){return null==t&&(t={}),_.toggle({elem:this.$(".js-card-menu"),view:e,options:A.extend({model:this.model,modelCache:this.modelCache,hideOnSelect:!0},t)})},t.prototype.render=function(){var e,t,n,r,o,i,a;for(D("render","rendering card "+this.model.get("name")),t=this.model.toJSON(),t.showCover=this.showCover(),t.showEditor=this.model.editable()&&!this.options.hideMenu,this.model.hasStickers()&&(t.hasStickers=!0),t.labels=this.labelsData(),e=this.model.getBoard(),t.members=[],i=this.model.memberList.models,n=i.length-1;n>=0;n+=-1)r=i[n],o=r.toJSON(),o.isVirtual=(null!=(a=e.getOrganization())?a.isVirtual(r):void 0)||e.isVirtual(r),o.isDeactivated=e.isDeactivated(r),t.members.push(o);return this.$el.toggleClass("js-archive-card",this.model.get("closed")),this.showCover()&&this.model.hasCover()&&this.$el.addClass("is-covered"),this.model.hasStickers()&&this.$el.addClass("is-stickered"),this.el.innerHTML=M(t),this.renderFiltered(),this.renderBadges(),this.renderPluginBadges(),this.renderDueComplete(),k.enqueue("render_"+this.cid,function(e){return function(){return e.renderActiveState(),e.renderCover(),e.renderStickers(),e.renderPowerUpEffects(),e.waitForId(e.model,function(){return e.renderLink()}),e._droppableHookedSinceRender=!1,B(e)}}(this)),this},t.prototype.hookDroppable=function(){var e;a.isTouch()||null!=this.$el&&(this._droppableHookedSinceRender||(this._droppableHookedSinceRender=!0,a.isTouch()||(e=this.throttle(function(){return r(".board-canvas")[0].getBoundingClientRect()},100,{trailing:!1}),this.$el.droppable({refreshPositions:!0,inBounds:function(t){var n,r,o;return n=e(),n.left<=(r=t.pageX)&&r<n.right&&n.top<=(o=t.pageY)&&o<n.bottom},accept:function(e){return function(t){var n;return t.is(".js-list-draggable-board-members .member")?!0:t.is(".js-draggable-sticker")?!(null!=(n=e.model)&&"function"==typeof n.isOverLimit?n.isOverLimit("stickers"):void 0):!1}}(this),hoverClass:"active-card",drop:function(e){return function(t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y;n.draggable.hasClass("member")?(s=n.draggable.data("id"),a=n.draggable.clone(),u=e.model.memberList.detect(function(e){return e.id===s}),u||(e.model.addMember(s),U("Card","Add Member by Board Sidebar"))):n.draggable.hasClass("js-draggable-sticker")&&(h=n.draggable.data("sticker"),i=r=o=1,f=n.helper.offset(),g={top:e.$el.offset().top+i,left:e.$el.offset().left+r},v=e.$el.outerWidth()-r-o,l=f.left-g.left,d=f.top-g.top,c=l/v*100,m=e.$(".js-card-stickers").height(),b=e.$el.hasClass("is-stickered")||e.$el.hasClass("is-covered")?d/m*100:0,b>m&&(b=m),y=E.getElemTransformMatrix(n.helper.find(".sticker-select-fixed")),p=null!=y?E.getMatrixDegrees(y)%360:0,e.addNewStickerToList(h,c,b,p))}}(this)}))))},t.prototype.addNewStickerToList=function(e,t,n,r){var o,i;o=null!=(i=e.id)?i:e.get("image"),U("Card","Sticker",o),this.model.stickerList.create({image:o,left:F(t),top:F(n),rotate:r,zIndex:this.model.stickerList.nextZIndex(),imageUrl:e.get("url"),imageScaled:e.get("scaled")},{modelCache:this.modelCache})},t.prototype.showStickers=function(){return!this.onCalendar},t.prototype.renderStickers=function(e){var t,n,r,o,i;return this.showStickers()?(n=this.$(".list-card-stickers-area"),t=this.$(".js-card-stickers").empty(),r=this.model.hasStickers(),r?(this.$el.addClass("is-stickered"),n.removeClass("hide"),i=function(){var e,t,n,r;for(n=this.model.stickerList.models,r=[],e=0,t=n.length;t>e;e++)o=n[e],r.push(this.subview(S,o));return r}.call(this),this.appendSubviews(i,t)):(this.$el.removeClass("is-stickered"),n.addClass("hide")),this):void this.$el.removeClass("is-stickered")},t.prototype.renderName=function(){var e,t;return e=this.model.toJSON(),t=$.fill("card_title_on_card_front",e),this.$(".js-card-name").html(t),this},t.prototype.renderLink=function(){var e;return e=p.getCardUrl(this.model),this.$el.attr("href",e),this},t.prototype.renderPluginBadges=function(){var e;return e=this.$(".js-plugin-badges"),this.ensureSubviews([this.subview(w,this.model)],e),this},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()&&!this.onCalendar},t.prototype.renderFiltered=function(e){var t,n;if(null==this.options.dontFilter)return null==this._visible&&(this._visible=!0),t=this.model.getBoard(),n=null==t||!p.onBoardView(t.id)||!this.applyBoardCardFilter||t.filter.satisfiesFilter(this.model),this._visible!==n&&(this.$el.toggleClass("hide",!n).height(n?"":0),this._visible=n),this},t.prototype.renderDueComplete=function(){return this.$el.toggleClass("is-due-complete",this.model.get("dueComplete"))},t.prototype.renderPowerUpEffects=function(){var e,t;return e=this.model.getBoard(),this.$el.removeClass(this.model.getAllAgingClasses()),e.isPowerUpEnabled("cardAging")&&!this.model.get("closed")?(t=this.model.getAgingData(),this.$el.addClass(t.agingClassesToAdd)):void 0},t.prototype.openQuickCardEditor=function(e){return E.stop(e),_.hide(),j.open(this),U("Card Front","Open Quick Card Editor"),this},t.prototype.labelClick=function(e){var t,n;if(!e||!(e.ctrlKey||e.metaKey||e.shiftKey))return n=y.getShowText(),U("Toggle Labels Text on Card Front",n?"Hide":"Show",null!=(t=this.model.getBoard())?t.id:void 0,"click-label"),e.preventDefault(),e.stopPropagation(),y.toggleText()},t.prototype.labelMouseEnter=function(e){return this.$el.addClass("card-labels-hover")},t.prototype.labelMouseLeave=function(e){return this.$el.removeClass("card-labels-hover")},t.prototype.moveToCalendarDay=function(e,t,n){var r;return n.getCardView(this.model).delegateEvents(),r=new Date(n.data.day),this.model.changeDueDateMaintainTime(r),n.updateHeader(),n.renderCardsAndListHeaders()},t.prototype.moveInCalendarDay=function(e,t,n){return n.getCardView(this.model).delegateEvents(),n.renderCardsAndListHeaders()},t.prototype.moveTo=function(e,t,n,r){var o,i;return 0===t.item.parents(".js-list").length?void(null!=n&&n.renderCards()):(o=t.item.parents(".js-list").find(".list-card:not(.placeholder,.js-composer)"),i=o.index(t.item),r||t.item.remove(),void this.model.moveToList(n.model,i))},t.prototype.moveIn=function(e,t,n){n.model.id===this.model.get("idList")&&this.moveTo(e,t,n,!0)},t.prototype.showDetail=function(e){return e&&(e.ctrlKey||e.metaKey||e.shiftKey)||!this.doClicks()?void 0:(E.stop(e),p.showCardDetail(this.model,{runMethod:this.model.shouldSuggestDescription()?"expandDesc":void 0}))},t.prototype.dragenter=function(e){var t,n,r;if(this.model.editable())return t=this.$el.outerHeight(),r=!this.model.canAttach(),n=r?".list-card-dropzone-limited":".list-card-dropzone",this.$(n).css({height:t+"px","line-height":t+"px"}),this.$el.addClass("is-drophover").toggleClass("is-limited",r)},t.prototype.dragleave=function(e){return this.$el.removeClass("is-drophover")},t.prototype.dropFiles=function(e){var t;return this.model.canAttach()?(t=e.detail,q(this.model.getBoard(),t)?void 0:(C.resolve(t).each(function(e){return function(t){var n;return n=t.name||z(),V(e.model,"upload",t,n)}}(this)).catch(function(){return o.show("unable to upload file","error","upload",5e3)}).done(),e.stopPropagation())):void E.stop(e)},t.prototype.dropUrl=function(e){var t;return this.model.canAttach()?(t=e.detail,this.model.uploadUrl(t),e.stopPropagation()):void E.stop(e)},t.prototype.doClicks=function(){return!f.sorting},t.prototype.scrollIntoView=function(){var e,t,n,r;return e=this.$el.closest("#board"),t=this.$el.closest(".js-list"),n=t[0].getBoundingClientRect(),r=n.left+n.width-window.innerWidth,this.$el.closest(".js-list-cards").scrollTop(this.$el.position().top),n.left<0?e.animate({scrollLeft:t.position().left},150):r>0?e.animate({scrollLeft:e.scrollLeft()+r},150):void 0},t}(O))},{}],448:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k=function(e,t){function n(){this.constructor=e}for(var r in t)C.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},C={}.hasOwnProperty;i=e(83),a=e(24),u=e(569),c=e(133),l=e(549),d=e(156),p=e("underscore"),b=e(810),w=e(51),_=e(56),g=e("moment"),s=e("pikaday"),f=e(104),r=e(41),h=function(){return{previousMonth:f("prev month button text"),nextMonth:f("next month button text"),months:g.months("MMMM"),weekdays:g.weekdays("dddd"),weekdaysShort:g.weekdaysMin("dddd")}},y="LT",v=[y,"h:mm A"],m=function(e){return g(e,v).isValid()},t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return k(t,e),t.prototype.viewTitleKey="change due date",t.prototype.tagName="form",t.prototype.className="dpicker-widget u-clearfix",t.prototype.events={"click .js-remove-date":"removeDueDate","input .js-dpicker-time-input":"validateTimeInput","change .js-dpicker-time-input":"normalizeTimeInput",'click a[href="/business-class"]':function(){return w("Card Detail","Click Business Class Link","Date Picker PopOver")},submit:function(e){return e.preventDefault(),this.submitDueDate()},"click .js-enable-calendar-powerup":function(e){return e.preventDefault(),this.enableCalendarPowerUp()}},t.prototype.initialize=function(){return this.listenTo(this.model.getBoard(),"change:powerUps",this.renderCalendarPowerUp)},t.prototype.getSelectedDueDateMoment=function(){var e,t;return e=this.picker.getMoment(),e.isValid()?(e.year()<1e3&&e.add(2e3,"years"),t=this.selectedTimeMoment(),e.hour(t.hour()).minute(t.minute())):null},t.prototype.submitDueDate=function(){var e;return e=this.getSelectedDueDateMoment(),null!=e?this.setDueDate(e.toDate()):this.removeDueDate()},t.prototype.setDueDate=function(e){return t.lastDueDate=e,this.model.update("due",e.getTime()),u.hide()},t.prototype.removeDueDate=function(){return this.model.get("due")&&this.model.update("due",null),u.hide()},t.prototype.renderCalendarPowerUp=function(){var e,t,n,r,o;t=this.$(".js-cal-enabled").addClass("hide"),e=this.$(".js-enable-cal").addClass("hide"),n=this.model.getBoard(),r=n.isPowerUpEnabled("calendar"),o=n.owned()&&!r,r?t.removeClass("hide"):o&&e.removeClass("hide")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,n,o,i,a;return e=this.model.getBoard(),a=g().startOf("day").add(1,"days").hour(12).toDate(),n=null!=(o=null!=(i=this.model.getDueDate())?i:t.lastDueDate)?o:a,this.$el.html(b({canChangePowerUps:e.owned(),canEnableAdditionalPowerUps:e.canEnableAdditionalPowerUps(),upsellEnabled:!r.get("dontUpsell")})),this.picker=new s({field:this.$(".js-dpicker-date-input")[0],container:this.$(".js-dpicker-cal")[0],bound:!1,format:"l",firstDay:g.localeData().firstDayOfWeek(),i18n:h()}),this.picker.setDate(n),this.$timeInput().val(g(n).format(y)),this.renderCalendarPowerUp(),this},t.prototype.validateTimeInput=function(){return this.$timeInput().toggleClass("input-error",!this.isTimeInputValid())},t.prototype.normalizeTimeInput=function(){return this.$timeInput().val(this.selectedTimeMoment().format(y)),this.validateTimeInput()},t.prototype.selectedTimeMoment=function(){return this.isTimeInputValid()?g(this.$timeInput().val(),v):g().hours(12).minutes(0)},t.prototype.$timeInput=function(){return this.$(".js-dpicker-time-input")},t.prototype.isTimeInputValid=function(){return m(this.$timeInput().val())},t.prototype.enableCalendarPowerUp=function(){var e;e=a.calendar,this.model.getBoard().enablePlugin(e),w("Card Detail","Enable Calendar via Due Date Menu"),_("card detail","enables","Power-Up","","","due date",e)},t}(l)},{}],449:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(549),i=e(546),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="formatting help",t.prototype.render=function(){return this.$el.html(i.fill("formatting_help")),this},t}(o)},{}],450:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(447),i=e(549),a=e(546),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(e){return this.showBoard=e.showBoard,this.cardView=this.subview(r,this.model,{filterDeactivated:!1,showMemberStatus:!1})},t.prototype.className="card-grid-container",t.prototype.render=function(){var e;return e={listName:this.model.getList().get("name"),boardName:this.model.getBoard().get("name"),showBoard:this.showBoard},this.$el.html(a.fill("member_cards_card",e)),this.appendSubview(this.cardView,this.$(".js-card")),this},t}(i)},{}],451:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C=function(e,t){function n(){this.constructor=e}for(var r in t)x.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},x={}.hasOwnProperty;r=e("jquery"),o=e(439),i=e(553),a=e(443),s=e(444),u=e(445),c=e(446),l=e(448),d=e(100),p=e(22),h=e(569),f=e(730),g=e(547),v=e(133),b=e(549),y=e("underscore"),_=e(546),k=e(51),w=e(109),t.exports=w(u,m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),y.extend(t.prototype,c),t.prototype.className="quick-card-editor",t.open=function(e){var n,r,o;return this.close(),n=e.$el,r=n.offset(),o={width:n.width(),left:r.left,top:r.top},this.current=new t({model:e.model,modelCache:e.modelCache}).render(o)},t.close=function(){var e;return null!=(e=this.current)&&e.closeEditor(),this.current=null},t.prototype.initialize=function(){return this.makeDebouncedMethods("renderStickers","renderLabels"),this.listenTo(this.model,{"change:labels":this.renderLabelsDebounced,"change:idLabels":this.renderLabelsDebounced}),this.listenTo(this.model.labelList,"add remove reset change",function(e){return function(){return e.renderLabelsDebounced()}}(this)),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(this.renderMembers)),this.listenTo(this.model.stickerList,"add remove reset change sort",function(){return this.renderStickersDebounced()})},t.prototype.events={"keydown .js-edit-card-title":"quickCardEditKeydown","click .js-save-edits":"saveEdits","click .js-stop":"stopCard","click .js-edit-labels":"editLabels","click .js-edit-members":"editMembers","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-edit-due-date":"editDueDate","click .js-archive":"archive",click:"checkCloseEditor","click .js-close-editor":"closeEditor"},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},t.prototype.showStickers=function(){return!0},t.prototype.shortcut=function(e){switch(e){case p.Escape:return this.checkCloseEditor(),["Esc - Close Quick Card Editor","Quick Card Editor"];case p.Enter:return this.save(),["Enter - Save Quick Card Edits","Quick Card Editor"]}},t.prototype.render=function(e){var t,n,o,i;return n=this.model.toJSON(),n.labels=this.model.getLabels(),n.showCover=this.showCover(),n.hasStickers=this.model.hasStickers(),n.quickEdit=!0,n.members=[],n.left=this.cLeft=e.left,n.top=this.cTop=e.top,n.width=this.cWidth=e.width,t=this.cWidth+this.cLeft+160,o=r(window).height(),i=r(window).width(),t>i&&(n.leftButtons=!0,this._usingLeftButtons=!0),this.$el.html(_.fill("quick_card_editor",n,{})),this.renderStickers().renderCover().renderLabels().renderBadges().renderMembers().checkShowCover(),r("body").append(this.$el),this.calcHeight(),this.focusInput(),g.addHandler(this,{scope:"quick_card_editor",modal:!0}),this.defer(function(e){return function(){return e.$(".quick-card-editor-buttons").addClass("fade-in")}}(this)),this.$(".js-edit-card-title").autosize(),this},t.prototype.calcHeight=function(){var e,t,n,o,i,a,s;a=r(window).height(),s=r(window).width(),o=this.$(".quick-card-editor-card").outerHeight(),this.cTop+o>a&&(i=a-o-8,this.$(".quick-card-editor-card").css({top:i})),e=this.$(".quick-card-editor-buttons"),t=e.outerHeight(),n=e.offset(),t+n.top>a&&e.css({top:-36})},t.prototype.renderStickers=function(){var e,t,n;return this.$(".sticker.moving, .sticker.rotating").length>0?this:(e=this.$(".js-card-stickers").empty(),n=function(){var e,n,r,o;for(r=this.model.stickerList.models,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(this.subview(f,t));return o}.call(this),this.appendSubviews(n,e),this.$(".list-card").toggleClass("is-stickered",this.model.hasStickers()),this)},t.prototype.checkShowCover=function(){return this.$(".list-card").toggleClass("is-covered",this.showCover()).toggleClass("is-stickered",this.model.hasStickers()),this},t.prototype.focusInput=function(){return this.$(".js-edit-card-title").focus().select()},t.prototype.showPopOver=function(e,t,n,o){null==o&&(o={}),v.stop(e),h.toggle({elem:r(e.target).closest("a"),view:new t(y.extend({model:this.model,modelCache:this.modelCache},o)),alignRight:this._usingLeftButtons}),k("Quick Card Editor",n)},t.prototype.editLabels=function(e){return this.showPopOver(e,i,"Open Label Edit")},t.prototype.editMembers=function(e){return this.showPopOver(e,a,"Open Member Edit")},t.prototype.copyCard=function(e){return this.showPopOver(e,o,"Open Copy Card",{onCopy:this.closeEditor.bind(this)})},t.prototype.editDueDate=function(e){return this.showPopOver(e,l,"Open Due Date Edit")},t.prototype.moveCard=function(e){var t;return t=this.closeEditor.bind(this),this.showPopOver(e,s,"Open Move Card",{onCommit:t})},t.prototype.archive=function(e){v.stop(e),this.model.close(),this.closeEditor(),k("Quick Card Editor","Archive")},t.prototype.quickCardEditKeydown=function(e){return d.getKey(e)===p.Enter?this.saveEdits(e):void 0},t.prototype.saveEdits=function(e){var t;v.stop(e),t=this.$(".js-edit-card-title").val().trim(),t===this.model.get("name")?this.closeEditor():""!==t?(this.model.update({name:t}),this.closeEditor(),k("Quick Card Editor","Save Name")):this.$(".js-edit-card-title").focus().select()},t.prototype.checkCloseEditor=function(e){h.isVisible?h.hide():this.$(".sticker.editing").length>0?this.stopEditingStickers():this.closeEditor(e)},t.prototype.closeEditor=function(e){this.remove(),h.hide(),k("Quick Card Editor","Close")},t.prototype.stopEditingStickers=function(){var e,t,n,r;for(n=y.clone(this.model.stickerList.models),e=0,t=n.length;t>e;e++)r=n[e],r.trigger("stopEditing")},t.prototype.stopCard=function(e){v.stopPropagation(e),h.hide()},t}(b))},{}],452:[function(e,t,n){var r,o,i,a,s,u,c;r=e("jquery"),o=e(40),i=e(227),s=e(133),u=e("underscore"),c=e(104),t.exports=a=function(){function e(){}return e.prototype.renderValues=function(){var e,t,n,o,i,a,s;n=this.$(".js-select-board option:selected").val(),o=this.$(".js-select-list option:selected").val(),s=parseInt(this.$(".js-select-position option:selected").prop("index"),10)+1,e=this.modelCache.get("Board",n),t=e.get("name"),i=u.find(e.listList.models,function(e){return function(e){return e.id===o}}(this)),this.$(".js-board-value").text(t),null!=i?(a=i.get("name"),s=s.toString(),this.$(".js-list-value").text(a),this.$(".js-pos-value").text(s),this.$(".js-select-list,.js-select-position,.js-commit-position,.js-submit").removeAttr("disabled")):(this.$(".js-list-value").empty().append(r("<i></i>").text(c("no lists"))),this.$(".js-pos-value").empty().append(r("<i></i>").text(c("n/a"))),this.$(".js-select-list,.js-select-position,.js-commit-position,.js-submit").attr("disabled","disabled"))},e.prototype.updateBoardData=function(){var e,t,n,r,a,s,u;if(e=this.$(".js-select-board"),n=e.find("option:selected").val(),t={},n===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),u=this._boardData.listList.models,r=0,a=u.length;a>r;r++)s=u[r],s.cardCount=this._boardData.listList.get(s.id).openCards().length;this.updateListList()}else null!=n&&(this.$(".js-submit").attr("disabled","disabled"),o.loadBoardData(n,i.cardsAndListsMinimal).then(function(e){return function(){return e._boardData=e.modelCache.get("Board",n),e.updateListList()}}(this)).done())},e.prototype.updateListList=function(){var e,t,n,o,i,a,s,u,c,l,d,p;for(t=this.$(".js-select-board"),n=this.$(".js-select-list").empty(),i=t.find("option:selected").val(),a=this.model.getList().id,s=i===this.model.getBoard().id?a:null!=(d=this._boardData.listList.at(0))?d.id:void 0,p=this._boardData.listList.models,u=0,c=p.length;c>u;u++)l=p[u],e=r("<option>").val(l.id).appendTo(n),o=l.id===a?e.format("current list",{listName:l.get("name")}):e.text(l.get("name")),l.id===s&&e.attr("selected","selected");return this.updatePositionList()},e.prototype.updatePositionList=function(){var e,t,n,o,i,a,s,u,l,d,p,h,m,f,g,v;if(t=this.$(".js-select-list"),n=this.$(".js-select-position").empty(),s=t.find("option:selected").val(),null==s)return void this.renderValues();for(d=null!=(m=this._boardData.listList.get(s))?m:this._boardData.listList.at(0),g=(null!=d?d.id:void 0)===this.model.getList().id,p=this._boardData.listList.get(s).cardList.length,g?(o=this.model.getList().openCards().indexOf(this.model),v=o,this.showCurrentPosition||(p-=1)):(o=-1,v=p),a=l=0,f=p;f>=0?f>=l:l>=f;a=f>=0?++l:--l)u=String(a+1),i=a===o?c("current position",{index:u}):u,h=0===a?"top":a===p?"bottom":d.calcPos(a),e=r("<option>").val(h).text(i).appendTo(n),a===v&&e.attr("selected","selected");this.$(".js-pos-value").text(String(v)),this.renderValues()},e}()},{}],453:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(549),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.viewTitleKey="sending links",t.prototype.render=function(){return this.$el.html('<div class="spinner loading"></div>'),this},t}(o)},{}],454:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;i=e(569),a=e(133),s=e(549),u=e("underscore"),l=e(801),d=e(51),o=e(39),c=function(e){return function(t,n){return t.get(e).localeCompare(n.get(e))}},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="add checklist",t.prototype.initialize=function(e){this.cardView=e.cardView},t.prototype.events={"click .js-add-checklist":"addChecklist","submit form":"addChecklist","change .js-checklist-copy-source":"changeSource","input .js-checklist-title":function(e){return this.$(".js-checklist-title").attr("data-changed",!0)}},t.prototype.render=function(){var e;return e=this.modelCache.find("Card",function(e){return function(t){return t.get("idBoard")===e.model.getBoard().id&&t.isOpen()&&t.checklistList.length>0}}(this)).sort(c("name")).map(function(e){return{name:e.get("name"),checklists:e.checklistList.chain().clone().sort(c("name")).map(function(e){return{id:e.id,name:e.get("name")}}).value()}}),this.$el.html(l({checklistCards:e})),this},t.prototype.addChecklist=function(e){var t,n,r,o,s;return a.stop(e),s=this.$(".js-checklist-title").val(),o=this.$(".js-checklist-copy-source").val(),0===s.length?void this.$(".js-checklist-title").focus().select():(n=""!==o?"Copied Checklist Items":"No Checklist Items Copied",r="Checklist"===s?"Default Title (Checklist), "+n+")":"Renamed Title, "+n+")",d("Checklist","Create",""+r),t=this.model.checklistList.create({name:s,idChecklistSource:o,idCard:this.model.id}),this.cardView.focusChecklistAdd(t),void i.hide())},t.prototype.changeSource=function(e){var t,n,r,i,a;return t=this.$(".js-checklist-title"),n=t.attr("data-default"),t.attr("data-changed")&&t.val()&&t.val()!==n?void 0:(r=this.$(".js-checklist-copy-source").val(),i=r&&null!=(a=o.get("Checklist",r))?a.get("name"):n,t.val(i).removeAttr("data-changed"))},t}(s)},{}],455:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(457),i=e(518),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewType=o,t}(i)},{}],456:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;o=e(83),i=e(569),a=e("bluebird"),s=e(133),u=e(549),c=e("underscore"),l=e(544)("check_item_menu"),p=e(51),d=l.renderable(function(e){var t;return t=e.editable,l.ul(".pop-over-list",function(){return t?(l.li(function(){return l.a(".js-convert-to-card",{href:"#"},function(){return l.format("convert-to-card")})}),l.li(function(){return l.a(".js-delete",{href:"#"},function(){return l.format("delete")})})):void 0})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="check item",t.prototype.events={"click .js-convert-to-card":"convertToCard","click .js-delete":"delete"},t.prototype.render=function(){return this.$el.html(d({editable:this.model.editable()})),this},t.prototype.convertToCard=function(e){s.stop(e),this.model.run("convertToCard"),this.model.getChecklist().checkItemList.remove(this.model),p("Checklist","Convert Checklist Item to Card"),i.hide()},t.prototype.delete=function(e){s.stop(e),this.model.destroy(),p("Checklist","Delete Single Checklist Item"),i.hide()},t}(u)},{}],457:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(511),a=e(513),o=e(456),s=e(523),u=e(569),c=e(107),l=e(133),d=e(525),p=e(109),h=e(546),m=e(51),t.exports=p(r,a,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.className="checklist-item",t.prototype.allowNewlines=!1,t.prototype.initialize=function(){return this.listenTo(this.model,{"change:name":this.renderName,"change:state":this.renderState}),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"keyup .js-checkitem-input":"keyAutoMention","click .js-toggle-checklist-item":"toggleState","click .js-open-menu":"openMenu","click .js-open-mention-selector":"commentMentionMember","click .js-open-emoji-selector":"commentAddEmoji",movecheckitem:"moveCheckItem"},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.selfMention=!0,t.prototype.render=function(){var e,t;return t=this,e=this.model,this.$el.html(h.fill("checklist_item",{},{editable:this.model.editable()})),this.renderName(),this.renderState(),this.recallDrafts(),this},t.prototype.getTextInput=function(){return this.$(".js-checkitem-input")},t.prototype.getMentionTarget=function(){return this.$(".js-open-mention-selector")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-open-emoji-selector")[0]},t.prototype.renderName=function(e){var t,n,r;n=this.model.get("name"),this.$(".js-checkitem-row").data("unmarkeddown",n),r=c.checkItems.format(n,{textData:this.model.get("nameData")}).output,t=this.$(".js-checkitem-name"),t.empty().append(r),d(t[0],this.model.getBoard())},t.prototype.renderState=function(e){var t;t=this.model.toJSON(),t.checked="complete"===t.state,this.$el.toggleClass("checklist-item-state-complete",t.checked)},t.prototype.toggleState=function(e){var t,n;this.model.editable()&&(t="complete"===this.model.get("state"),n=t?"incomplete":"complete","complete"===n?(this.$el.addClass("checklist-item-fade-out"),this.setTimeout(function(e){return function(){return e.model.update("state",n),e.$el.removeClass("checklist-item-fade-out")}}(this),200)):(this.$el.removeClass("checklist-item-fade-out"),this.model.update("state",n)),m("Checklist","Toggle Checklist Item State",n))},t.prototype.moveCheckItem=function(e,t,n,r){var o,i,a;if(r||this.model.getChecklist()===n)return o=t.item.parent().children(),i=o.index(t.item),a=n.calcPos(i,this.model),r?(this.model.update({pos:a,idChecklist:n.id}),this.model.collection.remove(this.model),n.checkItemList.add(this.model)):this.model.update("pos",a),n.checkItemList.sort({silent:!0}),m("Checklist","Reorder Checklist Item")},t.prototype.commitEdits=function(e){return u.hide(),0===this.$(".js-checkitem-input").val().length?this.model.destroy():t.__super__.commitEdits.apply(this,arguments)},t.prototype.openMenu=function(e){return l.stop(e),u.toggle({elem:e.target,view:o,options:{model:this.model,modelCache:this.modelCache},keepEdits:!0})},t}(s))},{}],458:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T=function(e,t){function n(){this.constructor=e}for(var r in t)E.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},E={}.hasOwnProperty;r=e("jquery"),o=e(35),i=e(511),a=e(512),s=e(455),c=e(513),l=e(561),d=e(564),p=e(523),h=e(514),m=e(100),f=e(566),g=e(282),v=e(569),b=e("bluebird"),y=e(133),w=e("underscore"),k=e(48),C=e(109),j=e(546),S=e(51),_=e(104),x=e(136),t.exports=C(i,c,u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return T(t,e),t.prototype.className="checklist",t.prototype.initialize=function(){return this.makeDebouncedMethods("renderCheckedState"),this.listenTo(this.model.checkItemList,{"add remove reset change:state":function(){return this.renderProgress(),this.renderCheckedStateDebounced()}}),this.listenTo(g,{"change:idCollapsedChecklists":this.renderCheckedStateDebounced}),this.listenTo(this.model,{"change:name":this.renderName})},t.prototype.events={"keydown .js-new-checklist-item-input":"keydownChecklistEvent","click .js-add-checklist-item":"submitTask","click .js-cancel-checklist-item":"cancelItemEditing","click .js-new-checklist-item-input":"focusNewTaskInput","click :not(.focus) .js-new-checklist-item-input":function(e){return r(e.currentTarget).select()},"click .js-confirm-delete":"confirmDeleteChecklist","click .js-hide-checked-items":"hideCheckedItems","click .js-show-checked-items":"showCheckedItems","sortstop .js-checklist-items-list":"sortStop","sortreceive .js-checklist-items-list":"sortReceive",movechecklist:"moveChecklist","keyup .js-new-checklist-item-input":"keyAutoMention","click .js-open-mention-selector":"commentMentionMember","click .js-open-emoji-selector":"commentAddEmoji"},t.prototype.render=function(){var e,t;return k("render","rendering checklist state "+this.model.get("name")),this.$el.html(j.fillFromModel("checklist",this.model)),e=this.$(".js-checklist-items-list"),(null!=(t=this.getCard())?t.editable():void 0)&&e.sortable({axis:"y",delay:"75",distance:"7",tolerance:"pointer",placeholder:"checklist-item placeholder",items:".checklist-item",connectWith:".js-checklist-items-list",start:function(e,t){var n;return d.sorting=!0,n=r(t.helper).outerHeight(),r(t.placeholder).height(n)},stop:function(e){return function(){return e.defer(function(){return d.sorting=!1})}}(this)}),this.$newCheckItemInput=this.$(".js-new-checklist-item-input").autosize(),
this.renderName(),this.renderCheckItems(),this.renderCheckedState(),this},t.prototype.renderName=function(){return this.$("div.checklist-title[attr=name] .current").text(this.model.get("name")),this},t.prototype.renderProgress=function(){var e,t,n,r;return t=this.model.getCompletedCount(this.getCard()),n=this.model.checkItemList.length,r=n>0?Math.round(100*t/n):0,e=t===n&&n>0,this.$(".js-checklist-progress-bar").width(r+"%"),this.$(".js-checklist-progress-percent").text(r+"%"),this.$(".js-checklist-progress-bar").toggleClass("checklist-progress-bar-current-complete",e),this},t.prototype.renderCheckItems=function(){var e,t;return e=this.$(".js-checklist-items-list"),t=this.collectionSubview(s,this.model.checkItemList,{el:e}),t.render(),d.refreshIfInitialized(e),this.renderProgress(),this},t.prototype.isChecklistCollapsed=function(){return g.inSet("idCollapsedChecklists",this.model.id)},t.prototype.renderCheckedState=function(e){var t,n,r,o;return r=this.model.checkItemList.length,n=this.model.getCompletedCount(this.getCard()),o=r>0,t=r===n&&r>0,this.$(".js-show-checked-items").text(_("show checked items",{count:n.toString()})),this.$(".js-completed-message").addClass("hide"),0!==n&&o?this.isChecklistCollapsed()?(this.$el.addClass("hide-completed-items"),this.$(".js-show-checked-items").removeClass("hide"),this.$(".js-hide-checked-items").addClass("hide"),this.$(".js-completed-message").toggleClass("hide",!t)):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items").addClass("hide"),this.$(".js-hide-checked-items").removeClass("hide")):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items").addClass("hide"),this.$(".js-hide-checked-items").addClass("hide")),this},t.prototype.hideCheckedItems=function(e){y.stop(e),g.pushCollapsedChecklist(this.model.id),S("Checklist","Hide Checked Items")},t.prototype.showCheckedItems=function(e){y.stop(e),g.pullCollapsedChecklist(this.model.id),S("Checklist","Show Checked Items")},t.prototype.getCard=function(){return this.options.card},t.prototype.selfMention=!0,t.prototype.cancelItemEditing=function(e){return r(e.target).closest(".js-new-checklist-item").find(".js-new-checklist-item-input").val(""),f.cancelEdits(),!1},t.prototype.focusNewTaskInput=function(e){f.cancelEdits(this.$newCheckItemInput),this.$newCheckItemInput.focus(),this.$(".js-new-checklist-item").addClass("focus")},t.prototype.keydownChecklistEvent=function(e){if(r(e.target).hasClass("js-new-checklist-item-input")){if(v.view instanceof h||v.view instanceof a)return this.checkInsert(e);if(m.isSubmitEvent(e))return this.submitTask(e)}},t.prototype.getTextInput=function(){return this.$(".js-new-checklist-item-input")},t.prototype.getMentionTarget=function(){return this.$(".js-open-mention-selector")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-open-emoji-selector")[0]},t.prototype.submitTask=function(e){var t,n,r,i;return y.stop(e),r=this.$newCheckItemInput.val().trim(),/^\s*$/.test(r)?(y.stop(e),this.focusNewTaskInput(),!1):(i=w.compact(r.split(/\r\n|\r|\n/)),t=this.model,b.using(t.modelCache.getLock(),function(e){return function(){return b.resolve(i).each(function(e){var n;return n=t.checkItemList.length>0?t.checkItemList.last().get("pos")+y.spacing:y.spacing,n+=Math.floor(1024*Math.random()),x(t.checkItemList,"create",{name:e.trim(),pos:n,nameData:{emoji:o.me().allCustomEmoji()}}).catch(function(){})})}}(this)).done(),this.$newCheckItemInput.val("").trigger("autosize.resize"),this.focusNewTaskInput(),n=1===i.length?"Single Item":"Multiple Items",S("Checklist","Add Checklist Item",n),void v.hide())},t.prototype.sortStop=function(e,t){y.stopPropagation(e),t.item.trigger("movecheckitem",[t,this.model,!1])},t.prototype.sortReceive=function(e,t){y.stopPropagation(e),t.item.trigger("movecheckitem",[t,this.model,!0])},t.prototype.confirmDeleteChecklist=function(e){var t;y.stop(e),t=this.model.get("name"),l.toggle("delete checklist",{elem:this.$(e.target).closest(".js-confirm-delete"),model:this.model,title:_("confirm.delete checklist.title",{checklistName:t}),confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return S("Checklist","Delete Checklist"),e.model.destroy()}}(this)})},t.prototype.moveChecklist=function(e,t){var n,r,o;n=this.model.getCard(),null!=n&&(r=t.item.parent().children(),o=r.index(t.item),this.model.update("pos",n.calcChecklistPos(o,this.model)),this.model.collection.sort({silent:!0}),S("Checklist","Reorder Checklist"))},t}(p))},{}],459:[function(e,t,n){var r,o;r=e("react"),o=e(541)("enterprise_dashboard_team_of_member"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n;return t=this.props.item,e=t.name,n=t.shortLink,o.a({href:"/b/"+n,title:e},function(){return o.div(".popover-item .u-clearfix",function(){return o.span(".popover-item-name",function(){return o.text(e)})})})})})},{}],460:[function(e,t,n){var r,o,i;o=e(102),r=e("react"),i=e(541)("enterprise_dashboard_bulk_actions"),t.exports=r.createClass({render:i.renderable(function(){var e,t,n,r,a,s;return a=this.props,e=a.count,n=a.onClose,r=a.onTeamsPopoverClick,t=a.hasTeams,s=a.totalCount,i.div(function(n){return function(){return i.div(".enterprise-bulk-actions .enterprise-button-bar",{class:i.classify({"has-selected-items":n.props.hasSelectedItems&&!n.props.loading})},function(){return i.div(".v-centered",function(){return e>0&&i.span(function(){return i.text(o("selected",e))}),i.span(".select-links",function(){return n.props.allItemsAreSelected||i.a(".select-all.clickable",{onClick:n.props.onSelectAll},function(){return i.format("select-all")}),n.props.hasSelectedItems?i.a(".clear-all.clickable",{onClick:n.props.onClearAll},function(){return i.format("clear")}):void 0})}),e>0?i.div(".options",function(){return t?i.b(r,".option.button-link.role-button",{class:i.classify({disabled:!n.props.hasSelectedItems}),disabled:!n.props.hasSelectedItems},function(){return i.format("teams")}):void 0}):void 0})}}(this))})})},{}],461:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p;o=e(221),i=e(222),a=e(35),s=e("bluebird"),u=e("underscore"),r={COMMON:{unknown:"unknown","email restricted":"restricted","not found":"not-found","unauthorized permission requested":"unauthorized"},ADD:{"must first transfer account":"add:must-transfer","must reactivate":"add:must-reactivate","already invited":"add:existing","already in organization":"add:existing",success:"add:added","no enterprise licenses":"add:no-licenses"},REMOVE:{success:"remove:removed","remove deactivated member from only":"remove:deactivated","not enough admins":"remove:not-enough-admins"},DEACTIVATE:{success:"deactivate:deactivated","cannot deactivate yourself":"deactivate:cannot-deactivate-yourself","not enough admins":"deactivate:not-enough-admins"}},d=function(e){return u.groupBy(e,"status")},l=function(e,t){var n,o,i;return o=e.message.toLowerCase(),n=u.extend({},r.COMMON,t),i=u.find(n,function(e,t){return o.indexOf(t)>-1}),i||r.COMMON.unknown},c=function(e,t,n,r){return i(e).then(function(e){var o;return o=t.success,r(n,o,e),o}).catch(o,function(e){var o;return o=l(e,t),r(n,o),o}).then(function(e){return{status:e,member:n}})},p=function(e,t,n,o,i){return s.map(t,function(t){return function(t){var i;return i={method:"delete",url:"/1/organizations/"+e.get("name")+"/members/"+t.id},(e.getMembershipFor(t).deactivated||o)&&(i.url=i.url+"/all"),c(i,r.REMOVE,t,n)}}(this),{concurrency:i})},t.exports.addToTeam=function(e,t,n,o){var i;return i=o.concurrency,s.map(t,function(t){return function(t){var o;return o={method:"post",url:"/1/organizations/"+e.get("name")+"/memberships",data:{idMember:t.id,type:"normal"}},c(o,r.ADD,t,n)}}(this),{concurrency:i}).then(d)},t.exports.removeFromTeam=function(e,t,n,r){var o,i,s,c;return i=r.concurrency,c=r.removeFromBoards,s=u.filter(t,function(t){return"admin"!==e.getMemberType(t.toBackbone())}),o=u.difference(t,s),o=u.sortBy(o,function(e){return a.isMe(e)}),p(e,s,n,c,{concurrency:i}).then(function(t){return p(e,o,n,c,1).then(function(e){var n;return n=t.concat(e),d(n)})})},t.exports.deactivateFromTeam=function(e,t,n,o){var i;return i=o.concurrency,s.map(t,function(t){return function(t){var o;return o={method:"put",url:"/1/organizations/"+e.id+"/members/"+t.id+"/deactivated",data:{value:!0}},c(o,r.DEACTIVATE,t,n)}}(this),{concurrency:i}).then(d)}},{}],462:[function(e,t,n){var r,o,i,a;r=e("react"),i=e(256),a=e(541)("enterprise_dashboard_bulk_actions_option"),o=e("underscore"),t.exports=r.createClass({getInitialState:function(){return{showingMembersList:!1}},render:a.renderable(function(){var e,t,n,r,s,u;return u=this.props,n=u.label,e=u.actionName,t=u.disabledMessage,r=u.members,s=u.onClick,a.a({class:a.classify({disabled:0===r.length}),onClick:s},function(s){return function(){return a.span(function(){return a.text(n)}),a.span(".sub-name",function(){var n,u;switch(n=o.map(r,function(e){return"@"+e.username}),!1){case 0!==n.length:return a.text(t);case!(n.length<=3):return u=i(n,", "," "+a.l("and")+" "),a.text(e+" "+u);default:return n=o.first(n,2),a.format("more-than-three-usersnames",{actionName:e,usernames:n.join(", ")}),a.text(" "),a.span(".bulk-list-option-other-members-link",{onClick:function(e){return s.setState({showingMembersList:!s.state.showingMembersList}),e.stopPropagation()}},function(){return a.format("others",{count:r.length-2}),a.text(" "),s.state.showingMembersList?a.format("hide"):a.format("show-all")})}}),a.div(".explanation-members-wrapper",{class:a.classify({disabled:!s.state.showingMembersList})},function(){return a.div(".quiet.bulk-list-option-explanation-members",{onClick:function(e){return e.stopPropagation()}},function(){var e,t,n,o;for(o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(a.div(function(){return a.text(n.fullName+" ("+n.username+")")}));return o})})}}(this))})})},{}],463:[function(e,t,n){var r,o,i,a;r=e(464),i=e(465),o=e("react"),a=e(541)(),t.exports=o.createClass({getInitialState:function(){return{state:"running"}},componentWillReceiveProps:function(e){return e.processed===e.total?this.setState({state:"done"}):void 0},render:a.renderable(function(){return"running"===this.state.state?a.addElement(o.createElement(i,{total:this.props.total,processed:this.props.processed})):a.addElement(o.createElement(r,{results:this.props.results,modelLabel:this.props.modelLabel,modelName:this.props.modelName,onDoneClick:this.props.onDoneClick,enterpriseDisplayName:this.props.enterpriseDisplayName}))})})},{}],464:[function(e,t,n){var r,o,i;r=e("react"),i=e(541)("enterprise_dashboard_bulk_actions_progress_done"),o=e("underscore"),t.exports=r.createClass({render:i.renderable(function(){var e,t,n,r,a,s;return a=this.props,s=a.results,t=a.modelLabel,n=a.modelName,r=a.onDoneClick,e=a.enterpriseDisplayName,i.div(function(){var a,u,c,l;for(i.h5(function(){return i.text(" "+t+": "+n)}),c=o.keys(s),a=0,u=c.length;u>a;a++)l=c[a],s[l].length>0&&(i.div(".dash-bulk-add-results-heading",function(){return i.format(["status",l],{enterpriseDisplayName:e})}),i.div(".dash-bulk-add-results-list",function(){var e,t,n,r,o;for(r=s[l],o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(i.div(".dash-bulk-add-results-list-item",function(){return i.text(e.member.fullName+" ("+e.member.username+")")}));return o}));return i.div(function(){return i.button({class:"primary full",onClick:r},function(){return i.format("done")})})})})})},{}],465:[function(e,t,n){var r,o;r=e("react"),o=e(541)(),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r;return n=this.props,r=n.total,e=n.processed,t=r>0?e+"/"+r:"",o.div(function(){return o.div(".spinner.loading"),o.div(".dash-bulk-add-progress",function(){return o.text(t)})})})})},{}],466:[function(e,t,n){var r,o,i,a,s,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(462),o=e("react"),a=e(102),s=e(541)("enterprise_dashboard_bulk_actions_team_options_list"),i=e("underscore"),t.exports=o.createClass({getInitialState:function(){return{members:null}},componentDidMount:function(){return this.props.getSelectedMembers.then(function(e){return function(t){var n,r,o;return o=e._filterOnTeamMembers(t),r=i.difference(t,o),n=e._filterActiveMembers(o),e.setState({members:{onTeamMembers:o,notOnTeamMembers:r,activeMembers:n}})}}(this))},_filterActiveMembers:function(e){return i.filter(e,function(e){return function(t){var n;return n=e.props.team.toBackbone(),t=t.toBackbone(),!n.isVirtual(t)&&!n.isDeactivated(t)}}(this))},_filterOnTeamMembers:function(e){return i.filter(e,function(e){return function(t){var n;return n=e.props.team.id,u.call(i.pluck(t.organizations,"id"),n)>=0}}(this))},render:s.renderable(function(){return null==this.state.members?s.div(function(){return s.div(".spinner.loading")}):s.div(".bulk-action-options-list",function(e){return function(){return s.ul(".pop-over-list",function(){return s.li(function(){return s.addElement(o.createElement(r,{label:s.l(["add-to-team","label"],{teamDisplayName:e.props.team.displayName},{raw:!0}),actionName:s.l(["add-to-team","actionName"]),disabledMessage:a("members already in team",e.state.members.onTeamMembers.length),members:e.state.members.notOnTeamMembers,onClick:function(){return 0!==e.state.members.notOnTeamMembers.length?e.props.eventHandlers.runBulkActionAdd(e.state.members.notOnTeamMembers):void 0}}))}),s.li(function(){return s.addElement(o.createElement(r,{label:s.l(["deactivate-from-team","label"],{teamDisplayName:e.props.team.displayName},{raw:!0}),actionName:s.l(["deactivate-from-team","actionName"]),disabledMessage:s.l(["deactivate-from-team","disabledMessage"]),members:e.state.members.activeMembers,onClick:function(){return 0!==e.state.members.activeMembers.length?e.props.eventHandlers.runBulkActionDeactivate(e.state.members.activeMembers):void 0}}))}),s.li(function(){return s.addElement(o.createElement(r,{label:s.l(["remove-from-team","label"],{teamDisplayName:e.props.team.displayName},{raw:!0}),actionName:s.l(["remove-from-team","actionName"]),disabledMessage:a("members not in team",e.state.members.notOnTeamMembers.length),members:e.state.members.onTeamMembers,onClick:function(){return 0!==e.state.members.onTeamMembers.length?e.props.eventHandlers.runBulkActionRemove(e.state.members.onTeamMembers,e.refs.bulkHardRemove.checked):void 0}})),e.state.members.onTeamMembers.length>0?s.span(".check-div.quiet.u-clearfix.bulk-hard-remove",function(){return s.input(".bulk-hard-remove",{type:"checkbox",id:"bulkHardRemove",defaultChecked:!0,ref:"bulkHardRemove"}),s.label({htmlFor:"bulkHardRemove"},function(){return s.format("remove-from-all-team-boards")})}):void 0})})}}(this))})})},{}],467:[function(e,t,n){var r,o,i,a,s,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};s=e("underscore"),r=function(){function e(e){this.attr=e,this.bool=void 0}return e.prototype.toggle=function(){return this.bool=!this.bool},e.prototype.getValue=function(){return this.bool},e.prototype.hasValue=function(){return null!=this.bool},e.prototype.update=function(e){return this.bool=e},e.prototype.clear=function(){return this.bool=void 0},e.prototype.toStr=function(){return null==this.bool?"":this.attr+" eq "+this.bool},e}(),a=function(){function e(e){this.attr=e,this.values=[]}return e.prototype.update=function(e){return this.values.push(e)},e.prototype.getValue=function(){return this.values},e.prototype.hasValue=function(){return this.values.length>0},e.prototype.clearOne=function(e){var t;return t=this.values.indexOf(e),-1!==t?this.values.splice(t,1):void 0},e.prototype.clear=function(){return this.values=[]},e.prototype.toggle=function(e){return u.call(this.values,e)>=0?this.clearOne(e):this.update(e)},e.prototype.toStr=function(){return s.map(this.values,function(e){return function(t){return e.attr+' eq "'+t+'"'}}(this)).join(" or ")},e}(),i=function(){function e(e){this.searchFields=e,this.term=""}return e.prototype.update=function(e){return this.term=e},e.prototype.getValue=function(){return this.term},e.prototype.hasValue=function(){return""!==this.term},e.prototype.clear=function(){return this.term=""},e.prototype.toggle=function(){throw new Error("Can't toggle a TextSearchExpression.")},e.prototype.toStr=function(){var e;return this.term?(e=s.chain(this.searchFields).filter(function(e){return function(t){return null==t.useIfTermMatches||t.useIfTermMatches(e.term)}}(this)).pluck("fieldName").value(),s.map(e,function(e){return function(t){return t+' co "'+e.term+'"'}}(this)).join(" or ")):""},e}(),t.exports=o=function(){function e(e){this.expressions={search:new i(e),teams:new a("organizations.id"),userType:new a("userType"),hasTransferred:new r("ownedByEnterprise")}}return e.prototype.update=function(e,t){return this.expressions[e].update(t)},e.prototype.clearAll=function(){var e,t,n,r,o;for(r=s.keys(this.expressions),o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(this.clear(n));return o},e.prototype.clear=function(e){return this.expressions[e].clear()},e.prototype.toggle=function(e,t){return this.expressions[e].toggle(t)},e.prototype.toString=function(){return s.reduce(s.values(this.expressions),function(e,t){var n;return n=t.toStr(),n&&e.push("("+n+")"),e},[]).join(" and ")},e.prototype.getState=function(){return s.mapObject(this.expressions,function(e){return e.getValue()})},e.prototype.getActiveFilters=function(){return s.filter(s.keys(this.expressions),function(e){return function(t){return e.expressions[t].hasValue()}}(this))},e}()},{}],468:[function(e,t,n){var r,o,i,a=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("react"),i=e(541)("enterprise_dashboard_filters"),o=e("underscore"),t.exports=r.createClass({render:i.renderable(function(){var e,t,n,r;return r=this.props,n=r.hasTeams,e=r.activeFilters,t=r.clickHandlers,e=o.without(e,"search"),i.div(function(r){return function(){return i.hr(),i.div(".enterprise-filters .enterprise-button-bar",function(){return i.div(".v-centered",function(){return i.format("filter-by")}),i.div(".options",function(){return i.b(t.team,".option.button-link.role-button",{class:i.classify({primary:a.call(e,"teams")>=0}),disabled:!n},function(){return i.format("teams")}),i.b(t.userType,".option.button-link.role-button",{class:i.classify({primary:a.call(e,"userType")>=0})},function(){return i.format("user-type")}),i.b(t.hasTransferred,".option.button-link.role-button",{class:i.classify({primary:a.call(e,"hasTransferred")>=0})},function(){return i.format("transferred")})}),i.b(t.clear,".option.last-option.button-link.role-button.primary",{class:i.classify({disabled:0===e.length}),disabled:0===e.length},function(){return i.format("clear-filters")})}),i.hr()}}(this))})})},{}],469:[function(e,t,n){var r,o;r=e("react"),o=e(541)("enterprise_dashboard_popover"),t.exports=r.createClass({render:o.renderable(function(){return o.div(".u-clearfix",function(e){return function(){return o.a(".dash-clear-filter",{href:"#",onClick:function(){return e.props.onClick()}},function(){return o.format("deselect")})}}(this))})})},{}],470:[function(e,t,n){var r,o;r=e("react"),o=e(541)("enterprise_dashboard_single_line_filter"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r,i;return i=this.props,e=i.checkedStatus,t=i.eventHandlers,n=i.item,r=n.name,o.a(".popover-item .u-clearfix",{href:"#",onClick:function(e){return e.preventDefault(),t.onClick(n)}},function(){return o.span(".popover-item-name",function(){return o.format(r)}),null!=e&&e.isActive(n)?o.span(".dash-filter-marker .on",function(){return o.icon("check",{class:"light"})}):void 0})})})},{}],471:[function(e,t,n){var r,o,i,a,s,u,c=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(473),a=e(480),i=e("react"),u=e(541)("enterprise_dashboard_popover"),s=e("underscore"),r=10,t.exports=i.createClass({getInitialState:function(){var e;return e=s.reduce(s.values(this.props.items),function(e,t){return e.concat(t)},[]),{isCollapsed:!0,allItems:e,searchMatches:e}},onSearchTermChange:function(e){return this.setState({searchMatches:s.filter(this.state.allItems,function(t){return t.isSearchMatch(e)})})},paginate:function(e){var t,n;return t=s.filter(e,function(e){return function(t){return c.call(e.state.searchMatches,t)>=0}}(this)),n=s.filter(s.values(this.props.items),function(e){return e.length>0}),this.state.isCollapsed?s.first(t,r/n.length):t},render:u.renderable(function(){return u.div(".enterprise-pop-over",function(e){return function(){var t,n,c;e.state.allItems.length>r&&u.addElement(i.createElement(a,{onChange:s.debounce(e.onSearchTermChange,300),placeholder:u.l(["search",e.props.modelName])})),null!=e.props.buttonData&&u.addElement(i.createElement(e.props.buttonData.componentClass,{onClick:e.props.buttonData.onClick})),c=e.props.items;for(t in c)n=c[t],n.length>0&&u.div(function(){return u.h3(".popover-group-header",function(){return u.format(t)}),u.addElement(i.createElement(o,{items:e.paginate(n),itemComponent:e.props.itemComponent,itemEventHandlers:e.props.itemEventHandlers,itemInlineButtons:e.props.itemInlineButtons,isPopOver:!0}))});return e.state.searchMatches.length>r?u.div(function(){return u.a(".quiet-button",{href:"#",style:{marginTop:"8px"},onClick:function(){return e.setState({isCollapsed:!e.state.isCollapsed})}},function(){return u.span(function(){return e.state.isCollapsed?u.format(["show-other",e.props.modelName]):u.format(["hide-other",e.props.modelName])})})}):void 0}}(this))})})},{}],472:[function(e,t,n){var r,o,i,a,s,u,c,l,d;r=e(241).Events,a=e(477),o=e(467),u=e("bluebird"),d=e(479),l=e("underscore"),s=function(){function e(e){this._hash=l.reduce(e,function(e,t){var n,r,o,i,a;for(a=t.get("memberships"),n=0,r=a.length;r>n;n++)o=a[n],null==e[i=o.idMember]&&(e[i]=[]),e[o.idMember].push(t);return e},{})}return e.prototype.get=function(e){var t;return null==(t=this._hash)[e]&&(t[e]=[]),this._hash[e]},e}(),t.exports.Member=i=function(){function e(t){var n,r,i,u,c;for(this.enterprise=t,this._mainPaginatedList=new a(this.enterprise),this.paginatedList=this._mainPaginatedList,this.orgsPerMember=new s(this.enterprise.organizationList.models),this.filterStringBuilder=new o(d.Member.prototype.API_SEARCH_FIELDS),this.renderables={},u=this.enterprise.memberList.models,n=0,r=u.length;r>n;n++)i=u[n],c=new d.Member(i,this.orgsPerMember.get(i.get("id"))),this.renderables[c.id]=c;this.sortField=e.prototype.DEFAULT_SORT_FIELD,this.sortOrder=e.prototype.DEFAULT_SORT_ORDER,this.resetState()}return l.extend(e.prototype,r),e.prototype.DEFAULT_SORT_FIELD="fullName",e.prototype.DEFAULT_SORT_ORDER="ascending",e.prototype.resetState=function(){return this.filterStringBuilder.clearAll(),this.updateFilter("search","")},e.prototype._isUsingDefaultSorting=function(){return this.sortField===e.prototype.DEFAULT_SORT_FIELD&&this.sortOrder===e.prototype.DEFAULT_SORT_ORDER},e.prototype.search=function(){var e;if(null!=(e=this.incomingPaginatedList)&&e.abortLoad(),0===this.filterStringBuilder.getActiveFilters().length&&this._isUsingDefaultSorting()){if(this.incomingPaginatedList=this._mainPaginatedList,this.incomingPaginatedList.totalLength>0)return this._swapInNewList(),void this.trigger("loaded")}else this.incomingPaginatedList=new a(this.enterprise,{filterStringBuilder:this.filterStringBuilder,sortField:this.sortField,sortOrder:this.sortOrder});return this.loadNextPage()},e.prototype.sort=function(e,t){return this.sortField=e,this.sortOrder=t,this.search()},e.prototype.getSortField=function(){return this.sortField},e.prototype.getSortOrder=function(){return this.sortOrder},e.prototype.updateFilter=function(e,t){return this.filterStringBuilder.update(e,t),this.search()},e.prototype.toggleFilter=function(e,t){return this.filterStringBuilder.toggle(e,t),this.search()},e.prototype.clearFilter=function(e){return this.filterStringBuilder.clear(e),this.search()},e.prototype.getFilterValueMap=function(){return this.filterStringBuilder.getState()},e.prototype.getActiveFilters=function(){return this.filterStringBuilder.getActiveFilters()},e.prototype._addLoadedRenderables=function(e){var t,n,r,o,i;for(i=[],t=0,n=e.length;n>t;t++)r=e[t],null==this.renderables[r.get("id")]&&(o=new d.Member(r,this.orgsPerMember.get(r.get("id"))),o.selected=this.paginatedList.loadAsSelected,i.push(this.renderables[o.id]=o));return i},e.prototype._swapInNewList=function(){return this.paginatedList!==this.incomingPaginatedList?(this.paginatedList=this.incomingPaginatedList,this.deselectAllItems()):void 0},e.prototype.loadNextPage=function(){return this.incomingPaginatedList.hasNext?(this.trigger(this.incomingPaginatedList===this.paginatedList?"loadingNext":"loading"),this.incomingPaginatedList.loadNext().tap(function(e){return function(t){return e._addLoadedRenderables(t),e._swapInNewList(),e.trigger("loaded")}}(this)).catch(u.CancellationError,function(){}).catch(function(e){return function(t){return e._swapInNewList(),e.trigger("loadError")}}(this))):u.resolve([])},e.prototype.hasNextPage=function(){return this.paginatedList.hasNext},e.prototype.items=function(){return l.map(this.paginatedList.items,function(e){return function(t){return e.renderables[t.get("id")]}}(this))},e.prototype.deselectAllItems=function(){return l.forEach(this.renderables,function(e){return e.selected=!1})},e.prototype.itemSelected=function(e,t){var n,r,o,i,a,s,u;if(e!==this.previousSelectedItem){if(!t||null==this.previousSelectedItem)return this.previousSelectedItem=e;for(i=this.items(),r=i.indexOf(e),o=i.indexOf(this.previousSelectedItem),n=a=s=r,u=o;u>=s?u>=a:a>=u;n=u>=s?++a:--a)i[n].selected=e.selected}},e.prototype.selectedItemsLength=function(){var e;return e=this._selectedRenderables().length,this.paginatedList.loadAsSelected&&(e+=this.paginatedList.lengthOfPending),e},e.prototype._selectedRenderables=function(){return l.filter(this.items(),function(e){return e.selected})},e.prototype.selectedItems=function(){return this.paginatedList.loadAsSelected?this.paginatedList.loadAll(this._addLoadedRenderables.bind(this)).then(this._selectedRenderables.bind(this)):u.resolve(this._selectedRenderables())},e.prototype._setSelected=function(e){var t,n,r,o,i;if(null!=this.paginatedList){for(this.paginatedList.loadAsSelected=e,r=this.items(),o=[],t=0,n=r.length;n>t;t++)i=r[t],o.push(i.selected=e);return o}},e.prototype.selectAll=function(){return this._setSelected(!0)},e.prototype.deselect=function(){return this._setSelected(!1)},e.prototype.lengthOfSearch=function(){return this.paginatedList.totalLength},e.prototype.lengthOfLoaded=function(){return this.paginatedList.items.length},e.prototype.totalLength=function(){return this._mainPaginatedList.totalLength},e}(),t.exports.Team=c=function(){function e(e){this.allItems=e.organizationList.models,this.resetState()}return l.extend(e.prototype,r),e.prototype.resetState=function(){var e,t,n,r,o;for(this.renderables={},r=this.allItems,t=0,n=r.length;n>t;t++)e=r[t],o=new d.Team(e),this.renderables[o.id]=o;return this.updateFilter("search","")},e.prototype.updateFilter=function(e,t){var n;return n=l.filter(this.allItems,function(e){return function(n){var r;return r=e.renderables[n.get("id")],r.isSearchMatch(t)}}(this)),this._items=l.map(n,function(e){return function(t){return e.renderables[t.get("id")]}}(this)),this.trigger("loaded")},e.prototype.loadNextPage=function(){return u.resolve([])},e.prototype.hasNextPage=function(){return!1},e.prototype.items=function(){return this._items},e.prototype.lengthOfSearch=function(){return this._items.length},e.prototype.lengthOfLoaded=function(){return this._items.length},e.prototype.totalLength=function(){return this.allItems.length},e.prototype.getActiveFilters=function(){return[]},e}()},{}],473:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;u=e("react"),c=e(541)("enterprise_list_component"),r=0,i=1,a=2,o=3,t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.LOADING_STATES={LOADED:r,LOADING_NEW:i,LOADING_NEXT:a,LOADING_ERROR:o},t.prototype.render=c.renderable(function(){var e,t,n,s,l,d,p;return p=this.props,s=p.itemInlineButtons,n=p.itemEventHandlers,t=p.itemComponent,e=p.isPopOver,d=p.loadingState,l=p.items,c.div({class:c.classify({"is-loading":d===i})},function(p){return function(){return c.div(".spinner.loading.search-spinner",{class:c.classify({hide:d!==i})}),d===o?c.div(".dashboard-list-item.dashboard-list-error",function(){return c.format("loading-error")}):d===r&&0===l.length&&c.div(".dashboard-list-item.dashboard-list-none",function(){return c.format("no-results")}),c.ul({class:c.classify({"pop-over-list":e})},function(){return l.forEach(function(e){return c.li(function(r){return function(){return c.addElement(u.createElement(t,{item:e,eventHandlers:n,checkedStatus:s}))}}(this))})}),d===a?c.div(".spinner.loading.pagination-spinner"):void 0}}(this))}),t}(u.Component)},{}],474:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e("react"),i=e(541)("enterprise_list_header_component"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=i.renderable(function(){return i.div(".title",function(e){return function(){return i.h2(function(){return i.text(e.props.title)}),e.props.allCount>0?i.div(".subtitle",function(){return e.props.isFiltering?i.format("showing-x-of-y",{count:e.props.count,total:e.props.allCount}):i.format("total-count",{count:e.props.allCount}),e.props.isSortable&&i.a({onClick:function(t){return t.stopPropagation(),t.preventDefault(),e.props.onSortClick(t.currentTarget)}},function(){return i.span(".dash-sorting",function(){return i.format([e.props.sortField,e.props.sortOrder]),i.icon("dropdown-menu")})}),e.props.isFiltering?i.a(".show-all.clickable",{onClick:e.props.onShowAll},function(){return i.format("show-all")}):void 0}):void 0}}(this))}),t}(o.Component)},{}],475:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(480),o=e("react"),a=e(541)("enterprise_dashboard_main_content"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=a.renderable(function(){return a.div(".enterprise-dash-layout",function(e){return function(){return a.div(".enterprise-dash-layout-sidebar",function(){return a.div(".js-sidebar-content")}),a.div(".enterprise-dash-layout-list",function(){return a.div(".indented-title.u-clearfix",function(){return a.div(".js-list-header-content .list-header"),a.addElement(o.createElement(i,{onChange:e.props.onSearchTermChange,clearValue:e.props.clearSearchValue,placeholder:a.l(["search",e.props.selectedTab]),debounce:!0}))}),a.div(".js-filters-content"),a.div(".js-bulk-actions-content"),a.div(".js-list-content.enterprise-dash-list")})}}(this))}),t}(o.Component)},{}],476:[function(e,t,n){var r,o;r=e("react"),o=e(541)("enterprise_dashboard_member_item_component"),t.exports=r.createClass({getInitialState:function(){return{selected:this.props.item.selected}},render:o.renderable(function(){var e,t,n,r,i,a,s,u,c,l,d,p,h;return l=this.props,n=l.eventHandlers,u=l.item,a=u.initials,r=u.fullName,h=u.username,e=u.avatarDomain,t=u.avatarHash,p=u.type,s=u.isDeactivated,i=u.hasTransferred,c=u.organizations,d=u.selected,o.div(".dashboard-list-item.u-clearfix",{class:o.classify({"multiple-select-state-selected":d}),onClick:function(e){return function(t){return u.selected=!u.selected,e.setState({selected:u.selected}),n.onSelectCheckboxClick(u,{selectRange:t.shiftKey})}}(this)},function(l){return function(){return o.div(".multiple-select-checkbox",function(){
return o.icon("check",{class:"multiple-select-checkbox-check"})}),o.div(".member .member-no-menu",{class:o.classify({"member-deactivated":s})},function(){return t?o.img(".member-avatar",{height:"32",width:"32",src:[e,t,"50.png"].join("/"),srcSet:[e,t,"50.png 1x"].join("/")+", "+[e,t,"50.png 2x"].join("/"),alt:r+" ("+h+")",title:r+" ("+h+")"}):o.span(".member-initials",{title:r+" ("+h+")"},function(){return o.text(a)})}),o.div(".details",function(){return o.p(".name-line",function(){return o.span(".full-name",function(){return o.text(r)})}),o.p(".u-bottom.quiet",function(){return h?o.span(".quiet.u-inline-block",function(){return o.format("at-username",{username:h})}):void 0})}),o.div(".options",function(){return null!=p&&o.p(".option.status.quiet",function(){return o.format(p)}),s&&o.p(".option.status.quiet",function(){return o.format("deactivated")}),i||o.p(".option.status.quiet",function(){return o.format("not-transferred")}),c.length>0?o.a(".option.status.quiet-button.role-button",{href:"#",onClick:function(e){return e.stopPropagation(),e.preventDefault(),n.onPopoverClick(e.currentTarget,u)}},function(){return o.format("team-count",{count:c.length})}):o.p(".option.status.quiet.no-team",function(){return o.format("not-in-team")})})}}(this))})})},{}],477:[function(e,t,n){var r,o;o=e("bluebird"),t.exports=r=function(){function e(e,t){var n,r,o;null==t&&(t={}),this.enterprise=e,this.filter=null!=(n=t.filterStringBuilder)?n.toString():void 0,this.items=[],this.totalLength=0,this.lengthOfPending=0,this.loadAsSelected=!1,this.nextPageStartIndex=1,this.hasNext=!0,this.sortField=null!=(r=t.sortField)?r:"fullName",this.sortOrder=null!=(o=t.sortOrder)?o:"ascending"}return e.prototype.PAGE_SIZE=50,e.prototype._load=function(t){var n;return n={startIndex:t,count:e.prototype.PAGE_SIZE,sortBy:this.sortField,sortOrder:this.sortOrder},this.filter&&(n.filter=this.filter),this._loadPromise=this.enterprise.loadPageOfMembers(n).spread(function(e){return function(t,n){var r,o,i,a;for(a=n.totalResults,r=0,o=t.length;o>r;r++)i=t[r],e.items.push(i);return e.totalLength=a,e.lengthOfPending=e.totalLength-e.items.length,t}}(this))},e.prototype.loadNext=function(){return this.hasNext?this._load(this.nextPageStartIndex).tap(function(e){return function(t){return e.nextPageStartIndex+=t.length,e.hasNext=e.items.length<e.totalLength}}(this)):o.resolve([])},e.prototype.loadAll=function(t){var n,r;return this.hasNext?(n=function(){var n,o,i,a,s;for(s=[],r=n=o=this.nextPageStartIndex,i=this.totalLength,a=e.prototype.PAGE_SIZE;a>0?i>=n:n>=i;r=n+=a)s.push(this._load(r).tap(t));return s}.call(this),o.all(n).then(function(e){return function(){e.nextPageStartIndex=e.totalLength+1,e.hasNext=!1,e.lengthOfPending=0}}(this))):o.resolve([])},e.prototype.abortLoad=function(){var e;return null!=(e=this._loadPromise)?e.cancellable().cancel():void 0},e}()},{}],478:[function(e,t,n){var r,o;r=e("react"),o=e(541)("enterprise_dashboard_team_filter"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r,i,a,s;return s=this.props,e=s.checkedStatus,n=s.eventHandlers,r=s.item,a=r.name,i=r.logoHash,t=r.displayName,o.a(".popover-item .u-clearfix",{href:"#",onClick:function(e){return e.preventDefault(),n.onClick(r)}},function(){return i?o.img(".popover-item-image",{src:[logoDomain,i,"30.png"].join("/")}):o.span(".popover-item-image.icon-lg.icon-organization"),o.span(".popover-item-name",function(){return o.text(t)}),null!=e&&e.isActive(r)?o.span(".dash-filter-marker .on",function(){return o.icon("check",{class:"light"})}):void 0})})})},{}],479:[function(e,t,n){var r,o,i,a,s,u,c,l=[].slice,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};c=e(125),u=e("underscore"),s=e(133),i=function(){function e(){var e,t,n,r,o;for(e=1<=arguments.length?l.call(arguments,0):[],this.selected=!1,this.source=e[0],this.id=e[0].get("id"),o=this.ATTRIBUTES,n=0,r=o.length;r>n;n++)t=o[n],this[t]=e[0].get(t);this._parseAttributes.apply(this,e)}return e.prototype._parseAttributes=function(){},e.prototype.isSearchMatch=function(e){return u.any(this.SEARCH_FIELDS,function(t){return function(n){return-1!==t[n].toLowerCase().indexOf(e.toLowerCase())}}(this))},e.prototype.toBackbone=function(){return this.source},e}(),t.exports.Board=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.SEARCH_FIELDS=["name"],t.prototype.ATTRIBUTES=["name","shortLink"],t}(i),t.exports.Team=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.SEARCH_FIELDS=["displayName","name"],t.prototype.ATTRIBUTES=["logoHash","name","displayName"],t.prototype._parseAttributes=function(e){return this.boards=e.boardList.filter(function(e){return!e.get("closed")}),this.memberCount=e.get("memberships").length},t}(i),t.exports.Member=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.API_SEARCH_FIELDS=[{fieldName:"username"},{fieldName:"fullName"},{fieldName:"emails.value",useIfTermMatches:function(e){return s.checkEmail(e,"A-Z")}}],t.prototype.SEARCH_FIELDS=["username","fullName","email"],t.prototype.ATTRIBUTES=["active","avatarHash","fullName","id","initials","username","email"],t.prototype._parseAttributes=function(e,t){return this.organizations=t,this.isDeactivated=!e.get("active"),this.hasTransferred=h.call(e.get("roles"),"enterprise.owned")>=0,this.avatarDomain=window.avatarDomain,this.type=h.call(e.get("roles"),"enterprise.admin")>=0?"admin":h.call(e.get("roles"),"organization.admin")>=0?"team-admin":"collaborator"===e.get("userType")?"collaborator":"ghost"===e.get("memberType")?"virtual":e.get("confirmed")?void 0:"unconfirmed"},t.prototype.orgAdded=function(e){return this.organizations.push(e),this.isDeactivated=!1,this.type="ghost"===this.toBackbone().get("memberType")?"virtual":this.toBackbone().get("confirmed")?void 0:"unconfirmed"},t.prototype.orgRemoved=function(e){return this.organizations?this.organizations=c(this.organizations,e):void 0},t}(i)},{}],480:[function(e,t,n){var r,o,i,a;i=e(109),r=e("react"),o=e(115),a=e(541)("enterprise_dashboard_search"),t.exports=i(o,r.createClass({getInitialState:function(){return{searchHasFocus:!1,query:""}},componentWillReceiveProps:function(e){return e.clearValue?(this.refs["search-input"].value="",this.setState({query:""})):void 0},onQueryChange:function(e){return this.props.onChange(e)},onClearClick:function(){return this.refs["search-input"].value="",this.setState({query:""}),this.props.onChange("")},componentWillMount:function(){return this.debouncedOnQueryChange=this.debounce(this.onQueryChange,300)},componentWillUnmount:function(){return this.cancelScheduled()},render:a.renderable(function(){return a.div(".enterprise-search-wrapper",function(e){return function(){return a.input(".enterprise-search-input",{class:a.classify({"js-autofocus":e.props.autofocus!==!1}),type:"text",ref:"search-input",placeholder:e.props.placeholder,onFocus:function(t){return e.setState({searchHasFocus:!0})},onBlur:function(t){return e.setState({searchHasFocus:!1})},onChange:function(t){var n;return n=t.target.value.trim(),e.setState({query:n}),e.props.debounce?e.debouncedOnQueryChange(n):e.onQueryChange(n)}}),""!==e.state.query?a.span(".enterprise-search-close-icon.icon-lg.icon-close.light",{class:a.classify({active:e.state.searchHasFocus}),onClick:e.onClearClick}):void 0}}(this))})}))},{}],481:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;a=e(102),r=e("react"),i=e(104),s=e(541)("enterprise_dashboard_sidebar"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.render=s.renderable(function(){var e,t,n,r,o,u,c,l,d,p,h,m,f;return d=this.props,m=d.teamsCount,o=d.membersCount,p=d.selectedTab,c=d.onSidebarTabClick,n=d.enterpriseMembersCount,t=d.enterpriseMaxMembers,l=d.outsideCollaboratorsCount,h=d.ssoUsersCount,e=d.deactivatedCount,u=d.nearMaxMembers,r=d.exceedingMaxMembers,f=d.userTypesLoaded,s.div(function(){return s.div(".enterprise-dash-sidebar",function(){var d;return s.div(".header",function(){return s.format("enterprise-administration")}),s.hr(),d=/^en/.test(window.locale),s.ul(function(){return s.li(function(){return s.b(function(){return c("teams")},".link",{class:s.classify({"is-active":"teams"===p})},function(){return s.text(i(["view title","teams"]))})}),s.li(function(){return s.b(function(){return c("members")},".link",{class:s.classify({"is-active":"members"===p})},function(){return s.text(i(["view title","members"]))})})}),s.div(".enterprise-dash-stats",{class:s.classify({"seat-limit-near":u,"seat-limit-exceeded":r})},function(){return f?(s.p(function(){var e,i;return e=function(e){var r,i;return r=a("seats",t),i=a("seats",t-n),o=d?1===n?"one billable team member":n+" billable team members":a("members",n),s.format(e,{membersCount:o,seatsCount:r,unusedSeatsCount:i})},null!=t?(i=t-n,e(r?"member-count-exceeding-seat-limit":0===i?"member-count-at-seat-limit":u?"member-count-nearing-seat-limit":"member-count-with-seat-limit")):e("member-count")}),d&&e&&s.p(function(){return s.text(a("deactivated count",e))}),l||h?s.p(function(){return l&&h?s.format("collaborators-and-sso-users-count",{outsideCollaboratorsCount:a("outside collaborators",l),ssoUsersCount:a("sso users",h)}):l?s.format("collaborators-count",{outsideCollaboratorsCount:a("outside collaborators",l)}):h&&s.format("sso-users-count",{ssoUsersCount:a("sso users",h)}),s.format("theyre-free")}):void 0):void s.div(".spinner",{title:"Loading statistics"})})})})}),t}(r.Component)},{}],482:[function(e,t,n){var r,o,i,a,s,u;o=e(473),a=e(480),i=e("react"),u=e(541)("enterprise_dashboard_popover"),s=e("underscore"),r=5,t.exports=i.createClass({getInitialState:function(){return{isCollapsed:!0,searchMatches:this.props.items}},paginatedItems:function(){return this.state.isCollapsed?s.first(this.state.searchMatches,r):this.state.searchMatches},onSearchTermChange:function(e){return this.setState({searchMatches:s.filter(this.props.items,function(t){return t.isSearchMatch(e)})})},render:u.renderable(function(){return u.div(function(e){return function(){return e.props.items.length>r&&u.addElement(i.createElement(a,{onChange:s.debounce(e.onSearchTermChange,300),placeholder:u.l(["search",e.props.modelName])})),null!=e.props.buttonData&&u.addElement(i.createElement(e.props.buttonData.componentClass,{onClick:e.props.buttonData.onClick})),u.div(function(){return u.addElement(i.createElement(o,{items:e.paginatedItems(),itemComponent:e.props.itemComponent,itemEventHandlers:e.props.itemEventHandlers,itemInlineButtons:e.props.itemInlineButtons,isPopOver:!0}))}),e.state.searchMatches.length>r?u.div(function(){return u.a(".quiet-button",{href:"#",style:{marginTop:"8px"},onClick:function(){return e.setState({isCollapsed:!e.state.isCollapsed})}},function(){return u.span(function(){return e.state.isCollapsed?u.format(["show-other",e.props.modelName]):u.format(["hide-other",e.props.modelName])})})}):void 0}}(this))})})},{}],483:[function(e,t,n){var r,o;r=e("react"),o=e(541)("enterprise_dashboard_team_item_component"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r,i,a,s,u;return u=this.props,n=u.eventHandlers,r=u.item,s=r.name,i=r.logoHash,t=r.displayName,a=r.memberCount,e=r.boards,o.div(".dashboard-list-item",function(){return o.div(".member",function(){return o.a({href:"/"+s,title:s},function(){return i?o.img(".member-avatar",{src:[logoDomain,i,"30.png"].join("/")}):o.span(".team-of-member-image.icon-lg.icon-organization")})}),o.a({href:"/"+s,title:s},function(){return o.div(".details",function(){return o.p(".name-line.name-without-details",function(){return o.span(".full-name",function(){return o.text(t)})})})}),o.div(".options",function(){return e.length>0?o.b(function(e){return n.onPopoverClick(e,r)},".option.button-link.role-button",function(){return o.format("boards",{count:e.length})}):o.p(".option.status.quiet",function(){return o.format("boards",{count:e.length})}),o.p(".option.status.quiet",function(){return o.format("members",{count:a})})})})})})},{}],484:[function(e,t,n){var r,o;r=e("react"),o=e(541)("enterprise_dashboard_team_of_member"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r;return r=this.props.item,n=r.name,t=r.logoHash,e=r.displayName,o.a({href:"/"+n,title:n},function(){return o.div(".popover-item .u-clearfix",function(){return t?o.img(".popover-item-image",{src:[logoDomain,t,"30.png"].join("/")}):o.span(".popover-item-image.icon-lg.icon-organization"),o.span(".popover-item-name",function(){return o.text(e)})})})})})},{}],485:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z,R,F,$,U,q=function(e,t){function n(){this.constructor=e}for(var r in t)H.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},H={}.hasOwnProperty,W=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(459),a=e(460),l=e(468),c=e(469),d=e(471),w=e(475),b=e(473),y=e(474),_=e(476),p=e(565),h=e(472),k=e(569),i=e(560),M=e(482),C=e(478),A=e(470),x=e(463),s=e(466),S=e("react"),T=e("react-dom"),E=e(540),O=e(481),B=e(543),P=e(483),L=e(484),D=e(133),S=e("react"),I=e(549),r=e("jquery"),z=e(104),R=e(109),V=e(461),$=e(479),U=e(816),j=e("bluebird"),N=e("underscore"),F=b.LOADING_STATES,m=F.LOADED,g=F.LOADING_NEW,v=F.LOADING_NEXT,f=F.LOADING_ERROR,t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return q(t,e),R(B,t),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.itemLists={members:new h.Member(this.model),teams:new h.Team(this.model)},this.selectedTab="members",this._initLoadingIndicators()},t.prototype.remove=function(){var e;return null!=(e=this.infiniteScroll)?e.destroy():void 0},t.prototype._initTab=function(){return k.hide(),N.invoke(this.itemLists,"resetState"),this.infiniteScroll.reset()},t.prototype._initInfiniteScroll=function(){return this.infiniteScroll=new p(this.listRoot),this.infiniteScroll.on("nearEnd",function(e){return function(){return e.getActiveList().loadNextPage()}}(this))},t.prototype.getActiveList=function(){return this.itemLists[this.selectedTab]},t.prototype.render=function(){return this.$el.html(U({displayName:this.model.get("displayName"),enforcesSso:this.model.get("prefs").ssoOnly})),this.tabChanged&&this._initTab(),this.renderStatic(),this.renderDynamic(),this._initInfiniteScroll(),this._loadUserTypes(),this.tabChanged=!1,this},t.prototype._renderSection=function(e,t,n){var r;return this.$(t).append(e),r=S.createElement(E,{},n),T.render(r,e)},t.prototype.renderStatic=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this._renderSection(this.reactRoot,".js-content",this.getMainContentComponent())},t.prototype._renderMembersTabOnlySections=function(){return this.$(".js-filters-content").empty(),this.$(".js-bulk-actions-content").empty(),"members"===this.selectedTab?(null==this.filtersRoot&&(this.filtersRoot=document.createElement("div")),this._renderSection(this.filtersRoot,".js-filters-content",this.getFiltersComponent()),this.loadingState!==g?(null==this.bulkActionsRoot&&(this.bulkActionsRoot=document.createElement("div")),this._renderSection(this.bulkActionsRoot,".js-bulk-actions-content",this.getBulkActionsComponent())):void 0):void 0},t.prototype.renderDynamic=function(){return null==this.sidebarRoot&&(this.sidebarRoot=document.createElement("div")),this._renderSection(this.sidebarRoot,".js-sidebar-content",this.getSidebarComponent()),null==this.listHeaderRoot&&(this.listHeaderRoot=document.createElement("div")),this._renderSection(this.listHeaderRoot,".js-list-header-content",this.getListHeaderComponent()),null==this.listRoot&&(this.listRoot=document.createElement("div")),this._renderSection(this.listRoot,".js-list-content",this.getListComponent()),this._renderMembersTabOnlySections()},t.prototype.rerender=function(){return this.renderDynamic()},t.prototype.bulkAddToTeam=function(e,t,n){var r;return r=function(t){return function(t,r,o){return n(),"add:added"===r?(e.addMembership(o),t.orgAdded(e)):void 0}}(this),V.addToTeam(e,t,r,{concurrency:5})},t.prototype.bulkRemoveFromTeam=function(e,t,n,r){var o;return o=function(t){return function(t,n){var o;return r(),"remove:removed"===n?(o=e.getMembershipFor(t.toBackbone()),e.removeMembership(o),t.orgRemoved(e)):void 0}}(this),V.removeFromTeam(e,t,o,{removeFromBoards:n,concurrency:5})},t.prototype.bulkDeactivateFromTeam=function(e,t,n){var r;return r=function(t){return function(t,r){return n(),"deactivate:deactivated"===r?e.setOnMembership(t.toBackbone(),{deactivated:!0}):void 0}}(this),V.deactivateFromTeam(e,t,r,{concurrency:5})},t.prototype.displayBulkTeamOptions=function(e,t){return k.pushView({elem:e,alignRight:!0,getViewTitle:function(){return z(["view title","team bulk actions options"],{teamDisplayName:t.displayName},{raw:!0})},reactElement:S.createElement(s,{team:t,getSelectedMembers:this.itemLists.members.selectedItems(),eventHandlers:{runBulkActionAdd:function(n){return function(r){var o;return o=new i(e,t.toBackbone().get("displayName"),n.model.get("displayName"),r.length,"add"),n.bulkAddToTeam(t.toBackbone(),r,function(){return o.incrementProcessed()}).then(function(e){return o.done(e),n.rerender()})}}(this),runBulkActionRemove:function(n){return function(r,o){var a;return a=new i(e,t.toBackbone().get("displayName"),n.model.get("displayName"),r.length,"remove"),n.bulkRemoveFromTeam(t.toBackbone(),r,o,function(){return a.incrementProcessed()}).then(function(e){return a.done(e),n.rerender()})}}(this),runBulkActionDeactivate:function(n){return function(r){var o;return o=new i(e,t.toBackbone().get("displayName"),n.model.get("displayName"),r.length,"deactivate"),n.bulkDeactivateFromTeam(t.toBackbone(),r,function(){return o.incrementProcessed()}).then(function(e){return o.done(e),n.rerender()})}}(this)},key:"bulk-add-teams"})})},t.prototype.getMainContentComponent=function(){return S.createElement(w,{selectedTab:this.selectedTab,clearSearchValue:this.tabChanged||this.resetSearch,onSearchTermChange:this.search.bind(this)})},t.prototype.search=function(e){return this.getActiveList().updateFilter("search",e)},t.prototype._loadUserTypes=function(){return this.model.loadUserTypes().then(function(e){return function(){return e.rerender()}}(this))},t.prototype._initLoadingIndicators=function(){var e,t,n,r,o;for(this._setLoadingState(g),r=N.values(this.itemLists),o=[],e=0,n=r.length;n>e;e++)t=r[e],this.listenTo(t,"loading",this.onListLoading),this.listenTo(t,"loadingNext",this.onListLoadingNext),this.listenTo(t,"loaded",this.onListLoaded),o.push(this.listenTo(t,"loadError",this.onListLoadingError));return o},t.prototype._setLoadingState=function(e){return e===m||e===g||e===v||e===f?(this.loadingState=e,this.rerender()):void 0},t.prototype.onListLoading=function(){return this._setLoadingState(g)},t.prototype.onListLoadingNext=function(){return this._setLoadingState(v)},t.prototype.onListLoaded=function(){return this._setLoadingState(m),this.infiniteScroll.reset()},t.prototype.onListLoadingError=function(){return this._setLoadingState(f),this.infiniteScroll.reset()},t.prototype.onTeamsOfMemberPopoverClick=function(e,t){var n,r,o,i,a,s,u;if(t.organizations.length>0){for(r={active:[],deactivated:[]},s=t.organizations,o=0,i=s.length;i>o;o++)a=s[o],u=new $.Team(a),n=a.getMembershipFor(t.toBackbone()).deactivated?"deactivated":"active",r[n].push(u);k.toggle({elem:e,getViewTitle:function(){return z(["view title","teams"])},reactElement:S.createElement(d,{modelName:"teams",items:r,itemComponent:L,key:t.username+"-teams"})})}},t.prototype.onBoardsOfTeamPopoverClick=function(e,t){t.boards.length>0&&k.toggle({elem:e,getViewTitle:function(){return z(["view title","boards"])},reactElement:S.createElement(M,{modelName:"boards",items:t.boards.map(function(e){return new $.Board(e)}),itemComponent:o,key:t.name+"-boards"})})},t.prototype.onSelectMemberClick=function(e,t){var n;return n=t.selectRange,this.getActiveList().itemSelected(e,n),this.rerender()},t.prototype.getListComponent=function(){var e;return e={loadingState:this.loadingState,items:this.getActiveList().items(),itemEventHandlers:{onSelectCheckboxClick:this.onSelectMemberClick.bind(this)}},"members"===this.selectedTab?(e.itemEventHandlers.onPopoverClick=this.onTeamsOfMemberPopoverClick,e.itemComponent=_):(e.itemEventHandlers.onPopoverClick=this.onBoardsOfTeamPopoverClick,e.itemComponent=P),S.createElement(b,e)},t.prototype.getSidebarComponent=function(){return S.createElement(O,{userTypesLoaded:null!=this.model.get("userTypes"),teamsCount:this.itemLists.teams.totalLength(),membersCount:this._getTotalUsersCount(),enterpriseMembersCount:this._getEnterpriseMembersCount(),outsideCollaboratorsCount:this._getOutsideCollaboratorsCount(),ssoUsersCount:this._getSsoUsersCount(),enterpriseMaxMembers:this._getMaxMembers(),deactivatedCount:this._getDeactivatedCount(),nearMaxMembers:this._isNearMaxMembers(),exceedingMaxMembers:this._isExceedingMaxMembers(),selectedTab:this.selectedTab,onSidebarTabClick:function(e){return function(t){return e.selectedTab=t,e.tabChanged=!0,e.render()}}(this)})},t.prototype.getBulkActionsComponent=function(){return S.createElement(a,{count:this.itemLists.members.selectedItemsLength(),totalCount:this.itemLists.members.lengthOfSearch(),onTeamsPopoverClick:function(e){return function(t){e.model.organizationList.models.length>0&&k.toggle({elem:t,maxWidth:410,alignRight:!0,getViewTitle:function(){return z("add or remove from team")},reactElement:S.createElement(M,{modelName:"teams",items:e.model.organizationList.map(function(e){return new $.Team(e)}),itemComponent:C,itemEventHandlers:{onClick:function(n){return e.displayBulkTeamOptions(t,n)}},key:"bulk-teams"})})}}(this),hasTeams:this.itemLists.teams.totalLength()>0,allItemsAreSelected:this.itemLists.members.selectedItemsLength()===this.itemLists.members.lengthOfSearch(),allVisibleItemsAreSelected:this.itemLists.members.selectedItemsLength()>=this.itemLists.members.items().length,onSelectAll:function(e){return function(){return e.itemLists.members.selectAll(),e.rerender()}}(this),onClearAll:function(e){return function(){return e.itemLists.members.deselect(),e.rerender()}}(this),hasSelectedItems:this.itemLists.members.selectedItemsLength()>0})},t.prototype.getListHeaderComponent=function(){var e,t,n;return n=this.getActiveList(),S.createElement(y,{isFiltering:this.getActiveList().getActiveFilters().length>0,title:D.capitalize(this.selectedTab),count:n.lengthOfSearch(),allCount:n.totalLength(),error:this.loadingState===f,isSortable:"members"===this.selectedTab,sortField:"function"==typeof(e=this.getActiveList()).getSortField?e.getSortField():void 0,sortOrder:"function"==typeof(t=this.getActiveList()).getSortOrder?t.getSortOrder():void 0,onSortClick:function(e){return function(t){k.toggle({elem:t,getViewTitle:function(){return z(["view title","sort by"])},reactElement:S.createElement(M,{items:[{name:"A-Z",sortField:"fullName",sortOrder:"ascending"},{name:"Z-A",sortField:"fullName",sortOrder:"descending"},{name:"least-recently-active",sortField:"dateLastActive",sortOrder:"ascending"},{name:"most-recently-active",sortField:"dateLastActive",sortOrder:"descending"}],itemComponent:A,itemEventHandlers:{onClick:function(t){var n,r;return n=t.sortField,r=t.sortOrder,k.hide(),e.getActiveList().sort(n,r),e.rerender()}},itemInlineButtons:{isActive:function(t){var n,r;return n=t.sortField,r=t.sortOrder,e.getActiveList().getSortField()===n&&e.getActiveList().getSortOrder()===r}},key:"sort-by-activity"})})}}(this),onShowAll:function(e){return function(){return e.search(),e.resetSearch=!0,e._clearFiltersExceptSearch(),e.getActiveList().clearFilter("search"),e.renderStatic(),e.resetSearch=!1}}(this)})},t.prototype._getTotalUsersCount=function(){var e;return null!=(e=this.model.get("userTypes"))?e.all:void 0},t.prototype._getEnterpriseMembersCount=function(){var e;return null!=(e=this.model.get("userTypes"))?e.member:void 0},t.prototype._getDeactivatedCount=function(){var e;return null!=(e=this.model.get("userTypes"))?e.none:void 0},t.prototype._getOutsideCollaboratorsCount=function(){var e;return null!=(e=this.model.get("userTypes"))?e.collaborator:void 0},t.prototype._getSsoUsersCount=function(){var e;return null!=(e=this.model.get("userTypes"))?e.saml:void 0},t.prototype._getMaxMembers=function(){return this.model.getPref("maxMembers")},t.prototype._isNearMaxMembers=function(){var e,t;return t=this._getMaxMembers(),null==t?!1:(e=this._getEnterpriseMembersCount(),t-e<=Math.min(Math.ceil(.05*t),20))},t.prototype._isExceedingMaxMembers=function(){var e;return e=this._getMaxMembers(),null!=e&&e<this._getEnterpriseMembersCount()},t.prototype._clearFiltersExceptSearch=function(){var e,t,n,r,o;for(k.hide(),r=["teams","userType","hasTransferred"],o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(this.getActiveList().clearFilter(e));return o},t.prototype.getFiltersComponent=function(){var e;return e=function(e){return function(t,n,r){var o,i,a,s,u;return a=r.items,i=r.itemComponent,u=r.optionIsActive,s=r.onFilterOptionClick,o=W.call(e.getActiveList().getActiveFilters(),t)>=0,{elem:n,alignRight:!0,getViewTitle:function(){return z(["view title",t])},hideHeader:!0,displayType:"filter-popover",reactElement:S.createElement(M,{modelName:t,isActive:o,buttonData:o?{componentClass:c,onClick:function(){return k.hide(),e.getActiveList().clearFilter(t),e.rerender()}}:void 0,items:a,itemComponent:i,itemInlineButtons:{isActive:u},itemEventHandlers:{onClick:s},key:t+"-filter"})}}}(this),S.createElement(l,{hasTeams:this.itemLists.teams.totalLength()>0,activeFilters:this.getActiveList().getActiveFilters(),clickHandlers:{team:function(t){return function(n){var r;t.model.organizationList.models.length>0&&(r=function(){return e("teams",n,{items:t.model.organizationList.map(function(e){return new $.Team(e)}),itemComponent:C,onFilterOptionClick:function(e){return t.getActiveList().toggleFilter("teams",e.id),t.rerender(),k.load(r())},optionIsActive:function(e){var n;return n=e.id,W.call(t.getActiveList().getFilterValueMap().teams,n)>=0}})},k.toggle(r()))}}(this),userType:function(t){return function(n){var r;r=function(){return e("userType",n,{items:[{name:"member"},{name:"collaborator"},{name:"saml"},{name:"none"}],itemComponent:A,onFilterOptionClick:function(e){return t.getActiveList().toggleFilter("userType",e.name),t.rerender(),k.load(r())},optionIsActive:function(e){var n;return n=e.name,W.call(t.getActiveList().getFilterValueMap().userType,n)>=0}})},k.toggle(r())}}(this),hasTransferred:function(t){return function(n){var r;r=function(){return e("hasTransferred",n,{items:[{name:"transferred"},{name:"not-transferred"}],itemComponent:A,optionIsActive:function(e){var n;return n=t.getActiveList().getFilterValueMap().hasTransferred,null==n?!1:"transferred"===e.name?n:!n},onFilterOptionClick:function(e){var n,o;return o=t.getActiveList().getFilterValueMap().hasTransferred,null==o?t.getActiveList().updateFilter("hasTransferred","transferred"===e.name):(n=o?"transferred"===e.name:"not-transferred"===e.name,n?t.getActiveList().clearFilter("hasTransferred"):t.getActiveList().updateFilter("hasTransferred","transferred"===e.name)),t.rerender(),k.load(r())}})},k.toggle(r())}}(this),clear:function(e){return function(){return e._clearFiltersExceptSearch(),e.rerender()}}(this)}})},t}(I)},{}],486:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),o=e(82),a=e(570),s=e(133),u=e(549),c=e(819),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.events={"click .js-login":"login"},t.prototype.login=function(e){var t,n;return s.stop(e),n=o.isEmbeddedDocument()?"/embed/login":this.model.url,t="/login?"+r.param({returnUrl:n}),o.isEmbeddedDocument()?new a(t).open():window.location=t},t.prototype.render=function(){return this.$el.html(c(this.model)),this},t}(u)},{}],487:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty,m=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(83),i=e(133),a=e(509),d=e("moment"),u=e(843),s=e(842),c=e(844),l=e(845),t.exports=r=function(e){function t(e){var n;n=e.enterprise,t.__super__.constructor.apply(this,arguments),this.enterprise=n}var n;return p(t,e),n="AccountTransferRequired",t.prototype.events={"click .js-dismiss-account-transfer":"dismiss","click .js-begin-transfer":"beginTransfer"},t.prototype.dismiss=function(e){return i.stop(e),this.model.dismiss(n,function(e){return function(){return e.render()}}(this))},t.prototype.beginTransfer=function(e){return i.stop(e),window.location="/enterprise/"+this.enterprise.get("name")+"/transfer-account"},t.prototype._remainingDays=function(){var e;return e=o.parse(this.enterprise.get("prefs").mandatoryTransferDate),o.getDaysUntil(e)},t.prototype.renderCollapsed=function(){var e,t;return t=this._remainingDays(),e=0>=t,this.$el.html(u({remainingDays:t,overdue:e,enterpriseName:this.enterprise.get("name")}))},t.prototype.renderBig=function(){var e,t;return this.$el.html(s({targetDate:o.toDateString(this.enterprise.get("prefs").mandatoryTransferDate),enterpriseName:this.enterprise.get("name"),isAdmin:(e=this.model.id,m.call(null!=(t=this.enterprise.get("idAdmins"))?t:[],e)>=0)}))},t.prototype.renderDelayed=function(){return this.$el.html(c({enterpriseName:this.enterprise.get("name")}))},t.prototype.renderRemainingDays=function(){var e,t;return t=this._remainingDays(),t>1&&5>=t?this.$el.addClass("mod-medium-urgent"):1>=t&&this.$el.addClass("mod-urgent"),this.enterprise.get("ssoDateDelayed")&&(e=this.model.id,m.call(this.enterprise.get("idAdmins"),e)>=0)?this.renderDelayed():this.model.isDismissed(n)?this.renderCollapsed():this.renderBig()},t.prototype.renderMissedDate=function(){return this.$el.addClass("mod-urgent"),this.$el.html(l())},t.prototype.render=function(){return null!=this.enterprise?this.renderRemainingDays():this.renderMissedDate(),this},t}(a)},{}],488:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(158),s=e(118),u=e(549),p=e(825),h=e(51),d=e("moment"),l=e(38).locales,a=e(101),c=e(245),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return this.listenTo(o,"add remove reset",this.frameDebounce(this.render))},t.prototype.viewTitleKey="announcements",t.prototype.events={"click .js-blog":"clickBlog","click .js-t":"clickTwitter","click .js-fb":"clickFacebook","click .js-g":"clickGoogle","click a":"openAnnouncementLink"},t.prototype.render=function(){var e,t,n,r;for(t=o.forLocale(l[0]),n=0,r=t.length;r>n;n++)e=t[n],e.isUnread()&&e.markRead();return s.set("tacoShow",d().add(1,"hours").valueOf()),this.$el.html(p(t.map(c.method("toJSON")))),this},t.prototype.clickBlog=function(){return h("Header","Announcements Menu","Trello Blog")},t.prototype.clickTwitter=function(){return h("Header","Announcements Menu","Twitter Link");
},t.prototype.clickFacebook=function(){return h("Header","Announcements Menu","Facebook Link")},t.prototype.clickGoogle=function(){return h("Header","Announcements Menu","Google+ Link")},t.prototype.openAnnouncementLink=function(e){return r(e.target).closest("a").is(".js-blog, .js-t, .js-fb, .js-g, .js-close-popover")?void 0:h("Info","Announcements","Open Announcement Link")},t}(u)},{}],489:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(82),u=e(51),i=e(509),a=e(544)("browser_will_be_unsupported"),s=a.renderable(function(){return a.p(".u-bottom",function(){var e;return e=r.browserVersionStr,console.log(e),/^explorer-10/.test(e)?(a.format("trello-is-ending-support-for-ie-10"),a.text(" "),a.format("please-upgrade-to-ie-11-or-newer",{url:"https://support.microsoft.com/en-us/help/17621/internet-explorer-downloads"})):/^safari-[678]/.test(e)?(/^safari-6/.test(e)?a.format("trello-is-ending-support-for-safari-6"):/^safari-7/.test(e)?a.format("trello-is-ending-support-for-safari-7"):a.format("trello-is-ending-support-for-safari-8"),a.text(" "),a.format("please-upgrade-to-safari-9-or-newer",{url:"https://support.apple.com/downloads/safari"})):void 0})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.events={"click a":function(e){return u("Unsupported Browser Banner","Clicked Upgrade",r.browserVersionStr)}},t.prototype.render=function(){return this.$el.html(s()),this},t}(i)},{}],490:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(561),i=e(631),t.exports=o=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.template="confirm_merge"}return a(t,e),t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.appendSubview(this.subview(i,this.model),this.$(".js-member")),this},t}(r)},{}],491:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(220),i=e(509),a=e(546),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){var e,t,n,o;n={gmail:/@(gmail|googlemail).com$/,yahoo:/@(yahoo|ymail).com$/,live:/@(hotmail|live).com$/,mac:/@(me|mac).com$/},e={gmail:"http://gmail.com",yahoo:"http://mail.yahoo.com",live:"http://live.com",mac:"https://www.icloud.com/"};for(t in n)if(o=n[t],o.test(this.model.get("email"))){this.emailInboxUrl=e[t];break}return null==this.emailInboxUrl?r({url:"/checkYourEmail",data:{email:this.model.get("email")},dataType:"json",success:function(e){return function(t){return null==t.error?(e.emailInboxUrl=t.url,e.render()):void 0}}(this)}):void 0},t.prototype.render=function(){var e;return e=this.model.toJSON(),null!=this.emailInboxUrl&&(e.emailInboxUrl=this.emailInboxUrl,e.knownEmailProvider=!0),this.$el.html(a.fill("header_warning_banner",e)),this},t}(i)},{}],492:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;l=e("react"),i=e(403),o=e(344),a=e(650),s=e(563),c=e(569),h=e(88),d=e(133),p=e(549),f=e(546),g=e(51),r=e(41),m=e(824),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="create",t.prototype.events={"click .js-new-board":"newBoard","click .js-new-org":"newOrg","click .js-new-bc-org":"newBCOrg"},t.prototype.render=function(){return this.$el.html(m({upsellEnabled:!r.get("dontUpsell")})),this},t.prototype.newBoard=function(e){var t,n;return g("Header","Add Menu","New Board"),d.stop(e),n=null!=(t=h("createBoardWithBackground"))?t.get("enabled"):void 0,n?s.show({displayType:"mod-no-chrome",opacity:.75,reactElement:l.createElement(o)}):c.pushView({view:new i({model:this.model,modelCache:this.modelCache,useLastOrganization:!0})})},t.prototype.newOrg=function(e){return g("Header","Add Menu","New Org"),d.stop(e),c.pushView({view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.newBCOrg=function(e){var t;return g("Header","Add Menu","New Business Class Org"),t={isBusinessClass:!0},d.stop(e),c.pushView({view:new a({model:this.model,modelCache:this.modelCache,createOpts:t})})},t}(p)},{}],493:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;i=e(133),o=e(572),a=e(549),s=e(546),u=e(51),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="header-back-button",t.prototype.events={"click .js-back-menu":"backPressed","mouseenter .js-back-menu":"showTooltip","mouseleave .js-back-menu":"hideTooltip"},t.prototype.render=function(){return this.$el.html(s.fill("header_back_menu_button")),this},t.prototype.backPressed=function(){return u("Header","Back to Home Menu","Clicked")},t.prototype.showTooltip=function(){var e;return e=this.$(".js-back-menu"),o.show(e.attr("aria-label"),e,!1,o.STYLE.MENU)},t.prototype.hideTooltip=function(){return o.hide()},t}(a)},{}],494:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(284),i=e(133),a=e(549),s=e(546),u=e(51),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="header-boards-button",t.prototype.events={"click .js-boards-menu":"toggleBoardsSidebar"},t.prototype.render=function(){return this.$el.html(s.fill("header_boards_menu_button")),this},t.prototype.toggleBoardsSidebar=function(e){i.stop(e),u("Header","Boards Menu","Toggle Boards Menu"),o.getShowSidebar()?o.hideSidebar():o.showSidebar()},t}(a)},{}],495:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty,b=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(220),a=e(497),s=e(501),h=e(104),u=e(569),c=e("react"),m=e(88),f=e(828),l=e(133),d=e(549),p=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.CHANNELS=["stable","beta","alpha"],t.prototype.viewTitleKey="switch channels",t.prototype.events={"click .js-select":"selectChannel","click .js-select-dev":"showDev","click .js-remove-cookie":"removeCookie","click .js-view-exp-details":"viewExperimentDetails","click .js-remove-all-exps":"removeAllExperiments"},t.prototype.initialize=function(){var e,t;return e=this.model.get("channels"),this.channels=function(){var n,r,o,i;for(o=this.CHANNELS,i=[],n=0,r=o.length;r>n;n++)t=o[n],b.call(e.allowed,t)>=0&&i.push({name:t,displayName:l.capitalize(t),active:t===e.active});return i}.call(this),this.isDev=e.dev},t.prototype.selectChannel=function(e){var t;return t=e.target.name,o({url:"/1/members/me/channels/active",type:"PUT",data:{value:t},success:function(e){return function(){return e.model.get("channels").active=t,u.hide(),document.location.reload()}}(this)})},t.prototype.removeCookie=function(e){return l.stop(e),r.cookie("head",null,{path:"/"}),this.render()},t.prototype.removeAllExperiments=function(e){var t;l.stop(e);for(t in window.abTests)r.cookie("force_"+t,null,{path:"/",expires:-1});return document.location.reload()},t.prototype.render=function(){var e,t,n;return e=!!r.cookie("head"),n=window.TrelloVersion,t=p.chain(window.abTests).pairs().map(function(e){var t,n;return n=e[0],t=e[1],t=m(n),{name:n,inExperiment:t.inExperiment,selectedVariation:t.get("variation")}}).sortBy(function(e){return e.name.toLowerCase()}).value(),this.$el.html(f({channels:this.channels,cookie:e,version:n,dev:this.isDev,tests:t})),this},t.prototype.viewExperimentDetails=function(e){l.stop(e),u.pushView({getViewTitle:function(){return h(["view title","experiment config"])},reactElement:c.createElement(a,{key:"header-experiment-details",experimentName:this.$(e.currentTarget).attr("data-name")})})},t.prototype.showDev=function(e){return l.stop(e),u.pushView({view:s}),this},t}(d)},{}],496:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;u=e("underscore"),r=e(7),c=e(104),i=e(40),a=e("bluebird"),s=e(549),l=e(48),d=e(829),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.getViewTitle=function(){return"Trello Enterprise"},t.prototype.initialize=function(){return a.map(this.model.get("idEnterprisesAdmin"),function(e){return function(t){var n;return null!=(n=e.modelCache.get("Enterprise",t))?n:i.loadEnterprise(t)}}(this)).then(function(e){return function(t){return e.enterprises=t,e.render()}}(this))},t.prototype.render=function(){var e;return l("render","rendering HeaderEnterpriseAdminDashboardMenuView"),null!=this.enterprises?this.enterprises.length>0?(e=u.map(this.enterprises,function(e){return function(e){return{title:e.get("displayName"),url:r.getEnterpriseAdminDashboardUrl(e.get("name"))}}}(this)),this.$el.html(d(e))):this.$el.text("You are not an admin of any enterprise"):this.$el.text("Loading..."),this},t}(s)},{}],497:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),c=e(104),u=e(88),i=e("react"),l=e(541)("header_experiment_menu"),a=e(133),s=e("underscore"),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.displayName="HeaderExperimentDetails",t.prototype._cookieName=function(){return"force_"+this.props.experimentName},t.prototype.onVariationOverride=function(e,t){return a.stop(e),r.cookie(this._cookieName(),t,{path:"/",expires:30}),document.location.reload()},t.prototype.onVariationRemove=function(e){return a.stop(e),r.cookie(this._cookieName(),null,{path:"/",expires:-1}),document.location.reload()},t.prototype.render=l.renderable(function(){var e,t,n,r,o,i;return r=this.props.experimentName,n=u(r),e=n.get("variation"),t=window.abTests[r],i=[{name:"control",weight:t.defaultWeight}],t.variations.forEach(function(e){return i.push({name:e.name,weight:e.weight})}),o=s.chain(i).map(function(e){return e.weight}).reduce(function(e,t){return e+t},0).value(),i.forEach(function(t){return t.active=t.name===e,t.percentage=Math.round(1e4*t.weight/o)/100}),l.div(".header-experiment-config",function(n){return function(){return l.h3(function(){return l.format("experiment-name")}),l.p(function(){return l.text(r)}),l.h3(function(){return l.format("current-active-variation")}),l.p(function(){return l.text(e)}),l.h3(function(){return l.format("experiment-allocation")}),l.p(function(){return l.text(100*t.experimentAllocation+"%")}),l.h3(function(){return l.format("variation-allocation")}),l.ul(function(){return i.map(function(e){var t,n;return t=e.name,n=e.percentage,l.li(function(){return l.text(t+": ("+n+"%)")})})}),l.hr(),l.h3(function(){return l.format("override-variation")}),l.p(function(){return l.format("override-variation-note")}),l.ul(".header-experiment-overrides",function(){return i.map(function(e){var t,r;return t=e.active,r=e.name,l.li(function(){return l.button({class:l.classify({primary:!0,"button-link":!0,disabled:t}),disabled:t,onClick:function(e){return n.onVariationOverride(e,r)}},function(){return l.text(r),t?(l.text(" "),l.icon("check")):void 0})})})}),l.hr(),l.h3(function(){return l.format("remove-experiment-cookie")}),l.p(function(){return l.format("remove-experiment-cookie-note")}),l.button({class:l.classify({negate:!0,"button-link":!0,"header-experiment-remove-btn":!0}),onClick:function(e){return n.onVariationRemove(e)}},function(){return l.format("remove-experiment-cookie")})}}(this))}),t}(i.Component),t.exports=o},{}],498:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(549),a=e(830),s=e(982),u=e(51),i=e(91),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="information",t.prototype.events={"click .js-new-tip":"newTipEvent","click .js-tip":"clickTip","click .js-meta-page-link":"clickMetaPage","click .js-meta-page-more-link":"showMoreLinks"},t.prototype.initialize=function(){return this.remainingTips=i.slice(0),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(a()),this.newTip(),this},t.prototype.getFreshTip=function(){var e,t;return this.remainingTips.length<1&&(this.remainingTips=i.slice(0)),e=Math.floor(Math.random()*this.remainingTips.length),t=this.remainingTips[e],this.remainingTips.splice(e,1),t},t.prototype.newTipEvent=function(){u("Header Tips","Get a new tip."),this.newTip()},t.prototype.newTip=function(){var e;return e=this.getFreshTip(),this.$(".js-fill-tip").empty().append(s(e)),u("Header Tips",e.id,"Viewed"),this},t.prototype.clickTip=function(e){var t;return t=this.$(e.currentTarget).attr("data-tipid"),u("Header Tips",t,"Clicked")},t.prototype.clickMetaPage=function(e){var t;return t=this.$(e.currentTarget).attr("data-metapagename"),u("Header","Information Menu",t)},t.prototype.showMoreLinks=function(e){return this.$(".js-more-menu-button").addClass("hide"),this.$(".js-more-menu").removeClass("hide"),u("Header","Information Menu","Show More Links")},t}(o)},{}],499:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k=function(e,t){function n(){this.constructor=e}for(var r in t)C.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},C={}.hasOwnProperty;r=e("jquery"),o=e(35),a=e(597),i=e(595),u=e(7),l=e(503),g=e(104),d=e(569),p=e("react"),h=e(133),m=e(549),b=e(48),f=e(245),y=e(833),v=e(38).locales,s=e(41),w=f(e(51),"Header","User Menu"),_=function(e){return function(){return w(e)}},t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return k(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.frameDebounce(this.render))},t.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},t.prototype.events={"click .js-profile":_("Profile"),"click .js-cards":_("Cards"),"click .js-billing":_("Billing"),"click .js-account":_("Settings"),"click .js-help":function(e){return _("Help"),o.isLoggedIn()?(h.stop(e),d.show({getViewTitle:function(){return g(["view title","help"])},maxWidth:500,clientx:r(window).width()-500,clienty:40,elem:e.currentTarget,reactElement:p.createElement(l,{key:"help"})})):void 0},"click .js-shortcuts":_("Shortcuts"),"click .js-change-locale":"changeLocale","click .js-logout":"logout"},t.prototype.render=function(){var e;return b("render","rendering HeaderMemberMenuView"),e={profileUrl:u.getMemberProfileUrl(),cardsUrl:u.getMemberCardsUrl(),billingUrl:u.getMemberBillingUrl(),accountUrl:u.getMemberAccountUrl(),canLogOut:o.canLogIn(),hasAccount:this.model.hasMemberOrOrgAccount(),upsellEnabled:!s.get("dontUpsell")},this.$el.html(y(e)),this},t.prototype.changeLocale=function(e){w("Change Locale"),h.stop(e),d.pushView({view:new i({model:this.model,modelCache:this.modelCache,onChange:function(e,t){return t===e?d.popView():document.location.reload()}})})},t.prototype.logout=function(e){return o.canLogIn()?(o.logoutPost(),w("Log Out")):(d.pushView({view:new a({model:this.model,modelCache:this.modelCache})}),h.stop(e))},t}(m)},{}],500:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B=function(e,t){function n(){this.constructor=e}for(var r in t)P.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},P={}.hasOwnProperty;r=e(35),i=e(43),a=e(7),s=e(562),u=e(563),c=e(492),l=e(495),h=e(499),d=e(496),f=e(635),p=e(498),g=e(40),v=e(210),b=e(569),y=e("bluebird"),w=e("react"),S=e(88),_=e(119),k=e(133),C=e(549),x=e("underscore"),E=e(104),O=e(48),j=e(345),M=e(51),o=e(41),A=e(863),T=e(840),t.exports=m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return B(t,e),t.prototype.className="header-user",t.prototype.initialize=function(){var e;return this.listenTo(this.modelCache,"add:Notification change:Notification remove:Notification",this.renderUnreadNotifications),this.listenTo(this.model,"change:showNps",this.renderUnreadNotifications),this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username",this.renderAvatar),this.idLastNotification=null!=(e=x.chain(this.modelCache.all("Notification")).pluck("id").compact().sort().last().value())?e:"",this.listenTo(this.modelCache,"add:Notification",this.showDesktopNotification),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-open-header-info-menu":"viewInfoMenu","click .js-open-header-notifications-menu":"viewNotificationsMenu","click .js-open-enterprise-dashboard-menu":"viewEnterpriseDashboardMenu","click .js-open-header-member-menu":"viewMemberMenu","mouseenter .js-open-add-menu":"preloadCreateBoardData","click .js-open-add-menu":"openAddMenu","click .js-open-channel-picker":"viewChannelPicker"},t.prototype.render=function(){var e,t;return O("render","rendering header"),t=r.isLoggedIn(),e={hasCrown:this.model.isFeatureEnabled("crown"),showChannelPicker:t&&(this.model.get("channels").allowed.length>1||"trello.com"!==location.hostname),escapedReturnUrl:k.escapedReturnUrl(),isEnterpriseAdmin:this.model.isEnterpriseAdmin(),isLoggedIn:t,upsellEnabled:!o.get("dontUpsell")},this.$el.html(T(e)),this.renderUnreadNotifications(),this.renderAvatar(),this.renderMemberName(),this},t.prototype.renderMemberName=function(){var e;return this.$(".js-member-name").text(null!=(e=this.model.get("fullName"))?e:this.model.get("username"))},t.prototype.renderAvatar=function(){return O("render","rendering avatar"),this.$(".member").html(A(this.model.toJSON())),this},t.prototype.renderUnreadNotifications=function(){var e;return e=v.unreadCount(this.modelCache),this.$(".js-open-header-notifications-menu").toggleClass("new-notifications",e>0).toggleClass("other-notifications",0===e&&this.model.shouldShowSurvey()),a.title(),this},t.prototype.viewInfoMenu=function(e){M("Header","Information Menu","Open Information Menu"),k.stop(e),b.toggle({elem:this.$(".js-open-header-info-menu"),view:p,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.viewEnterpriseDashboardMenu=function(e){var t;k.stop(e),M("Header","Enterprise Dashboard Menu","Open Enterprise Dashboard Menu"),t=new d({model:r.me(),modelCache:this.modelCache}),b.toggle({elem:this.$(".js-open-enterprise-dashboard-menu"),view:t})},t.prototype.viewNotificationsMenu=function(e){k.stop(e),M("Header","Notifications Menu","Open Notifications Menu"),this.model.shouldShowSurvey()&&this.model.trackShowSurvey(),b.toggle({elem:this.$(".js-open-header-notifications-menu"),hidden:x.bind(this.model.clearAllNotifications,this.model),maxWidth:450,displayType:"mod-notifications",getViewTitle:function(){return E("view title.notifications")},reactElement:w.createElement(f,{key:"header-notifications",member:this.model,noteUrl:"/"+this.model.get("username")+"/notifications",showSurvey:this.model.shouldShowSurvey(),onDismissSurvey:function(e){return function(){return e.model.dismissSurvey()}}(this),submitSurvey:function(e){return function(t){return e.model.submitSurvey(t)}}(this)}),options:{model:this.model,modelCache:this.modelCache}})},t.prototype.preloadCreateBoardData=function(e){var t,n;return n=null!=(t=S("createBoardWithBackground"))?t.get("enabled"):void 0,n?j.preloadData():void 0},t.prototype.openAddMenu=function(e){k.stop(e),M("Header","Add Menu","Open"),b.toggle({elem:this.$(".js-open-add-menu"),view:new c({model:r.me(),modelCache:this.modelCache})})},t.prototype.viewMemberMenu=function(e){var t;k.stop(e),M("Header","User Menu","Open User Menu"),t=new h({model:r.me(),modelCache:this.modelCache}),b.toggle({elem:this.$(".js-open-header-member-menu"),view:t})},t.prototype.viewChannelPicker=function(e){k.stop(e),b.toggle({elem:this.$(".js-open-channel-picker"),view:new l({model:r.me(),modelCache:this.modelCache})})},t.prototype.showDesktopNotification=function(e){return!s.enabled()||e.id<=this.idLastNotification?void 0:(this.idLastNotification=e.id,y.try(function(){var t;return t=Date.now()-_.serverToClient(e.get("date")),t<k.getMs({minutes:1})?e:g.loadNotification(e.id)}).then(function(e){return e.get("unread")?new s(e):void 0}).done())},t}(C)},{}],501:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(133),a=e(549),s=e(546),u=e("xtend"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="select client version",t.prototype.LATEST_VERSION={"0.0":!0},t.prototype.events={"change .js-select-head":"updateHead","change .js-select-version":"updateVersion"},t.prototype.initialize=function(){var e,t;return this.active=function(){try{return JSON.parse(r.cookie("head"))}catch(e){}}()||{},this.active.version&&(this.active.version=[null!=(e=this.active.version)?e:0,null!=(t=this.active.patch)?t:0].join(".")),r.getJSON("/web/deployments").done(function(e){return function(t){return e.deployments=t,e.render()}}(this))},t.prototype.render=function(){return null!=this.deployments?this.$el.html(s.fill("header_version_picker",{active:this.formatActive(),heads:[null].concat(this.listHeads()),versions:[null].concat(this.listVersions())})):this.$el.text("Loading..."),this},t.prototype.formatVersion=function(e){return"0.0"===e?"latest":e},t.prototype.formatActive=function(){return{name:this.active.name,version:this.formatVersion(this.active.version)}},t.prototype.listHeads=function(){var e,t,n,r;t=this.deployments,n=[];for(e in t)r=t[e],n.push({displayName:e,value:e,selected:this.active.name===e});return n},t.prototype.listVersions=function(){var e,t,n,r,o;t=this.deployments[this.active.name],n=u(this.LATEST_VERSION,t),r=[];for(o in n)e=n[o],r.push({displayName:this.formatVersion(o),value:o,selected:this.active.version===o,active:e});return r},t.prototype.updateHead=function(e){return this.active.name=r(e.target).val(),this.active.version=null,this.render()},t.prototype.updateVersion=function(e){var t,n,o,i;return this.active.version=r(e.target).val(),this.render(),o=this.active.version.split("."),i=o[0],n=o[1],t={name:this.active.name,version:i,patch:n},parseInt(i)>=0?(r.cookie("head",JSON.stringify(t),{path:"/"}),document.location.reload()):void 0},t}(a)},{}],502:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(158),o=e(488),i=e(160),a=e(35),c=e(569),l=e(118),d=e(133),p=e(549),h=e("underscore"),v=e(546),b=e(51),f=e(104),g=e(38).locales,u=e(101),m=e(245),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("renderTacoState"),this.listenTo(i,"add remove reset",this.renderTacoStateDebounced),this.listenTo(r,"add remove reset change:unread",this.renderTacoStateDebounced),this.updateAllAnnouncements=h.debounce(this.updateAllAnnouncements,6e4,!0),this.setInterval(function(e){return function(){return e.renderTacoState()}}(this),3e4)},t.prototype.events={click:"openAnnouncement",mouseover:"updateAllAnnouncements"},t.prototype.render=function(){return this.$el.html(v.fill("woof_header")),this.renderTacoState(),this},t.prototype.renderTacoState=function(){var e,t,n,r;n={alert:"woof-alert",unread:"woof-up",recentlyRead:"woof-crouch",none:"woof-hide"},e=this.$(".header-btn");for(r in n)t=n[r],e.removeClass(t);_.call(h.pluck(i.toJSON(),"type"),"downtime")>=0?(e.find(".js-phrase").text(f("announcements.maintenance")),e.addClass(n.alert)):e.find(".js-phrase").text(f("announcements.new stuff")),e.addClass(this.interestingAnnouncementCount()>0?n.unread:l.get("tacoShow")>Date.now()?n.recentlyRead:n.none)},t.prototype.interestingAnnouncementCount=function(){return i.forLocale(g[0]).filter(m.method("isUnread")).length},t.prototype.updateAllAnnouncements=function(){return r.fetch()},t.prototype.openAnnouncement=function(e){d.stop(e),this.updateAllAnnouncements(),c.toggle({elem:this.$(".header-btn"),view:new o({model:a.me(),modelCache:this.modelCache})}),b("Header","Announcement","Unread",this.interestingAnnouncementCount())},t}(p)},{}],503:[function(e,t,n){var r,o;r=e("react"),o=e(541)(),t.exports=r.createClass({displayName:"HelpOverlay",componentDidMount:function(){return window.addEventListener("message",this.receiveMessage)},componentWillUnmount:function(){return window.removeEventListener("message",this.receiveMessage)},receiveMessage:function(e){var t,n,r,o;if(e.source===this.refs.iframe.contentWindow)switch(n=e.data,r=n.type,o=n.value,r){case"resize":if(this.refs.loading.style.display="none",t=parseFloat(this.refs.iframe.style.height),!this.refs.iframe.style.height||o>t&&50>t-o)return this.refs.iframe.style.height=o+"px"}},render:o.renderable(function(){return o.div(function(){return o.div(".spinner.loading",{ref:"loading"}),o.iframe(".help-embedded-iframe",{ref:"iframe",src:"/contact?compact=1&trello=1&url="+encodeURIComponent(location.href)+"&source=from%20in%20app"})})})})},{}],504:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),o=e(559),i=e(220),a=e(35),s=e(166),u=e(490),c=e(563),d=e(40),p=e(133),h=e(509),m=e("underscore"),g=e(831),v=e(51),f=e(104),t.exports=l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.events={"click .js-join-model":"joinModel","click .js-ignore-invite":"ignoreInvite","click .js-create-new-account":"createNewAccount"},t.prototype.className="header-banner mod-warning mod-invited",t.prototype.initialize=function(){return this.boardOrOrg=this.options.idBoard?this.modelCache.get("Board",this.options.idBoard):this.modelCache.get("Organization",this.options.idOrganization),d.loadMemberEmail(this.getGhost().id).then(function(e){return function(t){var n;if(null!=(n=t.get("email")))return i({url:"/1/search/members/",type:"get",data:{query:n},dataType:"json",success:function(t){return m.isEmpty(t)||"normal"!==t[0].memberType?void 0:e.hasAccount=!0}})}}(this)).finally(function(e){return function(){return e.render()}}(this)).done()},t.prototype.getInviteToken=function(){return p.inviteTokenFor(this.boardOrOrg.id)},t.prototype.getMemberAdder=function(){var e;return e=this.getInviteToken().split("-")[1],this.modelCache.get("Member",e)},t.prototype.getGhost=function(){var e;return e=this.getInviteToken().split("-")[0],this.modelCache.get("Member",e)},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.isLoggedIn=a.isLoggedIn(),this.boardOrOrg instanceof s?(e.isBoard=!0,e.modelName=this.boardOrOrg.get("name")):e.modelName=this.boardOrOrg.get("displayName"),e.modelType=this.boardOrOrg.typeName,n=this.getMemberAdder(),null!=n&&(e.memberAdder=n.toJSON(),e.isInviter=a.isMe(n)),t=this.getGhost(),e.ghost=null!=t?t.toJSON():void 0,e.signupUrl="/signup?"+r.param({reauthenticate:!0,returnUrl:location.pathname,email:null!=t?t.get("email"):void 0,fullName:null!=t?t.get("fullName"):void 0}),this.$el.html(g(e)),this},t.prototype.joinModel=function(e){var t;return p.stop(e),a.isLoggedIn()?(t=this.getGhost().get("email"),u.toggle("add email",{elem:r(e.target),model:this.model,html:f("confirm.add email.text",{ghostEmail:t}),data:this.model.toJSON(),fxConfirm:function(e){return function(){var t,n,r;return r=e.options.idBoard?"board":"organization",t=null!=(n=e.options.idBoard)?n:e.options.idOrganization,i({url:"/associate-json/"+r+"/"+t+"/"+p.inviteTokenFor(t),dataType:"json",type:"post",success:function(t){return null==t.error?(e.deleteTokenCookie(),window.location.reload()):void 0}})}}(this)})):void 0},t.prototype.deleteTokenCookie=function(){var e;return r.cookie("invite-token-"+(null!=(e=this.options.idBoard)?e:this.options.idOrganization),null,{path:"/"})},t.prototype.hideHeader=function(){return r(this.el).hide(),p.calcBoardLayout()},t.prototype.ignoreInvite=function(e){var t,n,r,i,a;return p.stop(e),null!=(t=this.getGhost())?(a=this.options.idBoard?"board":"organization",n=null!=(i=this.options.idBoard)?i:this.options.idOrganization,this.boardOrOrg.memberList.remove(this.getGhost(),{invite:!0}),this.hideHeader(),this.deleteTokenCookie(),r=function(){switch(a){case"board":return"rejected board invite";case"organization":return"rejected org invite"}}(),o.show(r,"error",null,5e3)):void 0},t.prototype.createNewAccount=function(e){return v("Header","Login/Signup Menu","Open Login/Signup Menu: Create New")},t}(h)},{}],505:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;a=e(79),o=e(509),d=e(544)(),c=e(245),p=c(e(51),"Header","New Locale Banner"),l=e(33),i=e("underscore"),u=e("locale").banners,s=e(80),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(e){this.locale=e.locale},t.prototype.events={"click .js-switch-language":function(){return p("Set locale to "+this.locale),this.setLocale()},"click .js-dismiss":function(){return p("Dismiss "+this.locale),this.dismiss(function(){})}},t.prototype.setLocale=function(){return this.model.setPref("locale",this.locale,function(e){return function(){return e.dismiss(function(){return document.location.reload()})}}(this))},t.prototype.dismiss=function(e){return this.model.dismissLanguageBannerFor(this.locale,function(t){return function(){return t.remove(),e()}}(this))},t.prototype.render=function(){var e,t,n,r,o;return o=this.locale.replace(/-/,"_"),e=null!=(n=null!=(r=u[this.locale])?r:u[o])?n:u[o.substr(0,o.indexOf("_"))],a(null!=e,"Attempt to show a NewLocaleBanner with an unrecognized locale"),t=i.find(l,function(e){return function(t){return t.code===e.locale}}(this)),a(null!=t,"Attempt to show a NewLocaleBanner with an unrecognized language"),this.$el.html(d.render(function(){return d.text(e.mainText.replace("{language}",t.name)),d.text(" "),d.a({href:"#",class:"quiet primary js-switch-language"},e.switchText),d.text(" - "),d.a({href:"#",class:"quiet js-dismiss"},e.dismissText)})),this},t}(o)},{}],506:[function(e,t,n){
var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(7),i=e(509),s=e(546),a=e(104),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t,n,o,i,u;return n=this.model.toJSON(),i=this.model.get("prefs"),t="public"===i.voting,e="public"===i.comments,o=t&&e?"subscribe vote comment":t?"subscribe vote":e?"subscribe comment":"subscribe",n.interactionText=a(["public interactions",o]),/^en/.test(window.locale)&&(n.interactionText="Visually collaborate with anyone, anywhere."),u=encodeURIComponent(r.getBoardUrl(this.model)),n.signupUrl="/signup?returnUrl="+u+"&source=public-board-banner",n.tourUrl="/tour?board="+u+"&source=public-board-banner",this.$el.html(s.fill("header_public_board",n)),this},t}(i)},{}],507:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),o=e(35),i=e(597),a=e(569),u=e(133),c=e(509),l=e(546),d=e(51),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",function(e){return function(){return e.$el.toggle(!o.canLogIn()),r(window).triggerHandler("resize")}}(this))},t.prototype.events={"click .js-change-password":"changePassword"},t.prototype.render=function(){return this.$el.html(l.fill("header_warning_password",this.model.toJSON())),this},t.prototype.changePassword=function(e){return u.stop(e),a.toggle({elem:this.$(".js-change-password"),view:new i({model:this.model,modelCache:this.modelCache})}),d("Header","Password Banner","Open Change Password Menu")},t}(c)},{}],508:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(509),i=e(546),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=function(){return this.$el.html(i.fill("header_two_factor_backups_banner")),this},t}(o)},{}],509:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(549),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.className="header-banner mod-warning",t}(r)},{}],510:[function(e,t,n){var r,o;r=e("jquery"),o=e(305),t.exports={clear:function(){this.isActive()&&(this.viewer.$el.off("remove.attachment-viewer",this._handleViewRemove),this.viewer.close(),this.viewer=null)},isActive:function(){return null!=this.viewer},_handleViewRemove:function(){return this.viewer=null},show:function(e){this.clear(),this.viewer=new o(e),this.viewer.$el.on("remove.attachment-viewer",this._handleViewRemove.bind(this)),r("body").append(this.viewer.render().el)}}},{}],511:[function(e,t,n){var r,o,i,a,s,u,c,l;r=e("jquery"),i=e(82),a=e(100),s=e(22),u=e(569),c=e(133),l=e("underscore"),t.exports=o=function(){function e(){}return e.prototype.checkInsert=function(e){var t,n,o,l,d,p,h,m;if(d=a.getKey(e),u.isVisible&&!i.isTouch())if(e.shiftKey&&(d===s.ArrowUp||d===s.ArrowDown)||e.altKey&&(d===s.ArrowUp||d===s.ArrowDown));else if(d===s.Escape)c.stop(e),u.hide();else for(n=[{listClass:".js-available-members",itemClass:".js-select-member"},{listClass:".js-available-emoji",itemClass:".js-select-emoji"},{listClass:".js-card-list",itemClass:".js-select-card"}],o=0,p=n.length;p>o;o++)if(m=n[o],h=m.listClass,l=m.itemClass,t=r(".pop-over").find(h),t.length>0){if(d===s.Enter||d===s.Tab)return c.stop(e),t.find(".item:first").hasClass("selected")&&(this.keyAutoMention(e),t=r(".pop-over").find(h)),t.find(".item.selected:first "+l).first().click(),u.hide(),!1;if(d===s.ArrowUp||d===s.ArrowDown)return c.stop(e),c.navMenuList(t,".item",d),!1}},e.prototype.keyAutoMention=function(e){var t,n,r;if(!i.isTouch()){if(a.isArrow(a.getKey(e))||a.getKey(e)===s.Enter)return;return a.getKey(e)===s.Escape?void(u.isVisible&&c.stop(e)):(r=c.getWordFromCaret(this.getTextInput()),/^@\S/.test(r.str.substring(0,2))?(t=this.getAutoMentionerView("input"),0===t.filterMentionablesForMatches(r.str.substring(1).toLowerCase()).length?void u.hide():(u.show({elem:this.getMentionTarget(),view:t,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus()))):/^:[a-z0-9_]+$/.test(r.str)?(n=this.getEmojiCompleterView("input"),u.show({elem:this.getEmojiTarget(),view:n,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus())):this.setTimeout(function(){return u.hide()},5))}},e}()},{}],512:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w=function(e,t){function n(){this.constructor=e}for(var r in t)_.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},_={}.hasOwnProperty,k=[].slice;r=e("jquery"),o=e(35),a=e(100),s=e(22),g=e(104),u=e(569),d=e(631),l=e(628),p=e(118),h=e(133),m=e(549),f=e("underscore"),b=e(546),y=e(51),c="recentMentions",v=p.get(c)||[],t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.viewTitleKey="mention",t.prototype.initialize=function(){var e,t,n;return(e=null!=(t=this.getCard())&&null!=(n=t.getBoard())?n.getOrganization():void 0)?this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.render)):void 0},t.prototype.events={"mouseenter .js-select-member":"hoverItem","click .js-select-member:not(.disabled)":"insertMember","click .js-select-all-card-members":"selectAllCardMembers","mouseenter .js-select-all-card-members":"deselectMember","click .js-select-all-board-members":"selectAllBoardMembers","mouseenter .js-select-all-board-members":"deselectMember","click .js-select-all-commenters":"selectAllCommenters","mouseenter .js-select-all-commenters":"deselectMember",keydown:"keydownEvent","keyup .js-filter-mentionables":"keyupEvent"},t.prototype.render=function(){var e,t,n,r,o,i;return i=this,t=this.getMentionables(),this.cardMentionables=t.cardMentionables,this.boardMentionables=t.boardMentionables,this.commenterMentionables=t.commenterMentionables,this.allMentionables=t.allMentionables,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0),e.showAllCardMembers=0<(n=this.cardMentionables.length)&&12>n,e.showAllBoardMembers=0<(r=this.boardMentionables.length)&&12>r,e.showAllCommenters=0<(o=this.commenterMentionables.length)&&12>o,this.$el.html(b.fill("popover_auto_mentioner",e)),this.$mentionablesList=this.$(".js-available-members"),e.button&&(this.$(".js-select-all-card-members .mem-count").text("("+this.cardMentionables.length+")"),this.$(".js-select-all-board-members .mem-count").text("("+this.boardMentionables.length+")"),this.$(".js-select-all-commenters .mem-count").text("("+this.commenterMentionables.length+")"),(e.showAllCardMembers||e.showAllBoardMembers||e.showAllCommenters)&&this.$(".js-select-multiple-options").removeClass("hide")),this.options.button?this.fillMentionables(this.allMentionables):this.options.input&&this.filterMentionables(),this},t.prototype.getCard=function(){return this.options.card},t.prototype.getTextInput=function(){return r(this.options.target)},t.prototype.getMentionables=function(){var e,t,n,r,i,a,s,u,c,l,d,p,m,b,y,w;return m=o.myId(),i=this.getCard(),n=i.getBoard(),d=function(e){return function(t,r){return null==r&&(r={}),f.chain(t).reject(function(t){return t===m&&!e.options.selfMention||n.isDeactivated(e.modelCache.get("Member",t))}).sortBy(function(e){var t;return t=v.indexOf(e),-1===t?v.length:t}).map(function(t){return f.extend({},r,{id:t,names:h.getMemNameArrayFromId(e.modelCache,t),type:"member"})}).value()}}(this),a=d(i.getIdCardMems()),r=d(n.getIdBoardMems()),s=n.isPublic()?d(i.getIdCommenters()):[],y=null!=(b=n.getOrganization())?(l=[],c=[],e=b.memberList.filter(function(e){return!b.isDeactivated(e)}),n.isPrivate()?b.isFeatureEnabled("superAdmins")?(p=f.groupBy(e,function(e){return function(e){return b.ownedByMember(e)?"admin":"not-admin"}}(this)),l=f.pluck(p.admin,"id"),c=f.pluck(p["non-admin"],"id")):c=f.pluck(e,"id"):l=f.pluck(e,"id"),k.call(d(l)).concat(k.call(d(c,{disabled:!0,extraText:g(["mention member","board not team visible"])})))):[],u=[{type:"extra",text:"card",names:["all","card"],extraText:g(["automentioner","all-members-on-card"])},{type:"extra",text:"board",names:["all","board"],extraText:g(["automentioner","all-members-on-board"])}],w=f.uniq(k.call(a).concat(k.call(r),k.call(s),k.call(y)),function(e){return e.id}),t=w.concat(u),{cardMentionables:a,boardMentionables:r,commenterMentionables:s,orgMentionables:y,allMentionables:t}},t.prototype.clearMentionables=function(){return this.$mentionablesList.empty()},t.prototype.keydownEvent=function(e){var t;((t=a.getKey(e))===s.Enter||t===s.Tab)&&(h.stop(e),this.$mentionablesList.find(".item.selected:first .js-select-member").click())},t.prototype.keyupEvent=function(e){var t;if(t=a.getKey(e),t===s.Enter||t===s.Tab||t===s.ArrowLeft||t===s.ArrowRight);else{if(t!==s.ArrowUp&&t!==s.ArrowDown)return this.filterMentionables();h.stop(e),h.navMenuList(this.$mentionablesList,".item",t)}},t.prototype.filterMentionables=function(e){var t,n,o,i;return this.clearMentionables(),this.options.button?o=r(".js-filter-mentionables").val().trim().toLowerCase():this.options.input&&(t=this.getTextInput(),i=h.getWordFromCaret(t),o=i.str.substring(1).toLowerCase()),n=this.filterMentionablesForMatches(o),this.options.input&&0===n.length?void this.setTimeout(function(){return u.hide()},5):(this.fillMentionables(n),h.selectMenuItem(this.$mentionablesList,".item",this.$mentionablesList.find(".item").first()))},t.prototype.filterMentionablesForMatches=function(e){var t;return t=RegExp("^"+h.escapeForRegex(e)),f.filter(this.getMentionables().allMentionables,function(e){return f.any(e.names,function(e){return t.test(e)})})},t.prototype.hoverItem=function(e){var t;return t=r(e.target).closest(".item"),h.selectMenuItem(this.$mentionablesList,".item",t)},t.prototype.deselectMember=function(e){return this.$mentionablesList.find(".item").removeClass("selected")},t.prototype._membersFromIds=function(e){return f.compact(f.map(e,function(e){return function(t){return e.modelCache.get("Member",t)}}(this)))},t.prototype.fillMentionables=function(e){var t,n,r,o,i,a,s,u,c,p,h;for(e=f.groupBy(e,"type"),n=(e.member||[]).map(function(e){return function(t){var n,r,o;return o=t.id,n=t.disabled,r=t.extraText,{member:e.modelCache.get("Member",o),disabled:n,extraText:r}}}(this)),this.$mentionablesList.empty(),i=0,s=n.length;s>i;i++)p=n[i],c=p.member,t=p.disabled,o=p.extraText,this.appendSubview(this.subview(d,c,{disabled:t,extraText:o}),this.$mentionablesList);if(null!=e.extra)for(h=e.extra,a=0,u=h.length;u>a;a++)r=h[a],this.$mentionablesList.append(new l(r).render().el);this.$(".js-empty-list").toggleClass("hide",f.keys(e).length>0)},t.prototype.insertMember=function(e){var t,n,o,i;h.stop(e),y("Card Detail","Mention Member Autocomplete","Insert"),n=r(e.currentTarget).attr("autocompleteText"),this.saveRecent(r(e.currentTarget).attr("idMember")),t=this.getTextInput(),this.options.input?(i=h.getWordFromCaret(t),h.insertSelection(t,"@"+n+" ",i.start,i.end)):(o=h.getCaretPosition(t),null!=o&&(i={start:o,end:o}),h.insertSelection(t,"@"+n+" ",null!=i?i.start:void 0,null!=i?i.end:void 0)),u.hide()},t.prototype.selectAllCardMembers=function(e){var t,n;h.stop(e),y("Card Detail","Mention Member Autocomplete","Insert - All Card Members"),t=this.getTextInput().focus(),n="@card ",h.insertSelection(t,n),u.hide()},t.prototype.selectAllBoardMembers=function(e){var t,n;h.stop(e),y("Card Detail","Mention Member Autocomplete","Insert - All Board Members"),t=this.getTextInput().focus(),n="@board ",h.insertSelection(t,n),u.hide()},t.prototype.selectAllCommenters=function(e){var t,n,r,o,i,a,s;for(h.stop(e),y("Card Detail","Mention Member Autocomplete","Insert - All Commenters"),t=this.getTextInput().focus(),r="",a=this._membersFromIds(this.commenterMentionables),n=0,o=a.length;o>n;n++)i=a[n],s=i.get("username"),r+="@"+s+" ";h.insertSelection(t,r),u.hide()},t.prototype.saveRecent=function(e){var t;return t=p.get(c)||[],t=f.chain([e].concat(k.call(t))).uniq().first(16).value(),p.set(c,t),v=t},t}(m)},{}],513:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h;r=e("jquery"),o=e(438),i=e(512),s=e(514),u=e(40),c=e(569),l=e(516),d=e(133),h=e(51),p={},t.exports=a=function(){function e(){}return e.prototype.openEmojiCompleter=function(e){return d.stop(e),c.pushView({view:this.getEmojiCompleterView("button")})},e.prototype.openAutoMentioner=function(e){return d.stop(e),c.pushView({view:this.getAutoMentionerView("button")}),h("Card Detail","Mention Autocomplete","Open Menu - With Click")},e.prototype.getAutoMentionerView=function(e){var t,n,r;return t=this.getCard(),null!=(n=null!=(r=t.getBoard())?r.getOrganization():void 0)&&(!p[n.id]||Date.now()-p[n.id]>3e5)&&(p[n.id]=Date.now(),u.loadOrganizationMembersData(n.id)),new i({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,selfMention:this.selfMention,modelCache:this.modelCache})},e.prototype.getEmojiCompleterView=function(e){var t;return t=this.getCard(),new s({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getTrelloCompleterView=function(){var e;return e=this.getCard(),new l({model:e,button:!0,target:this.getTextInput(),card:e,modelCache:this.modelCache})},e.prototype.commentAddAttachment=function(e){var t,n,i,a,s,u;d.stop(e),t=r(e.target).closest(".comment-box").find("textarea"),s=t.prop("selectionStart"),a=t.prop("selectionEnd"),i=t.val().substring(s,a),n=this.getCard(),u=new o({model:this.model,modelCache:this.modelCache,defaultName:i}),u.on("attach",function(e){var n,r,o;return o=e.url,n=e.name,n=n||i,r=n?"["+n+"]("+o+")":o,d.insertSelection(t,r+" ",s,a),t.trigger("autosize.resize")}),c.toggle({elem:r(e.currentTarget),keepEdits:!0,view:u,options:{model:n,modelCache:this.modelCache}}),h("Card Detail","Comment Box - Open Attachment Type Picker")},e.prototype.commentMentionMember=function(e){d.stop(e),c.toggle({elem:r(e.currentTarget),keepEdits:!0,view:this.getAutoMentionerView("button")}),h("Card Detail","Comment Box - Mention Members")},e.prototype.commentAddEmoji=function(e){d.stop(e),c.toggle({elem:r(e.currentTarget),keepEdits:!0,view:this.getEmojiCompleterView("button")}),h("Card Detail","Comment Box - Add Emoji")},e.prototype.commentAddCard=function(e){d.stop(e),c.toggle({elem:r(e.currentTarget),keepEdits:!0,view:this.getTrelloCompleterView()}),h("Card Detail","Comment Box - Add Card")},e}()},{}],514:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w=function(e,t){function n(){this.constructor=e}for(var r in t)_.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},_={}.hasOwnProperty,k=[].slice;r=e("jquery"),o=e(35),s=e(515),u=e(100),c=e(22),l=e(40),d=e(569),h=e(133),m=e(549),f=e("underscore"),b=e(546),y=e(51),p=e("emoji-map"),g=e(104),v=e(934),i=e(41),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.viewTitleKey="emoji",t.prototype.events={"mouseenter .js-select-emoji":"hoverItem","click .js-select-emoji":"selectEmoji",keydown:"keydownEvent","keyup .js-filter-emoji":"keyupEvent","click .js-upload-emoji":"openEmojiUploader"},t.prototype.initialize=function(){this._customEmoji={},o.me().isFeatureEnabled("customEmoji")&&(this.listenTo(o.me().customEmojiList,"change add remove reset",this.updateCustomEmoji),this.updateCustomEmoji())},t.prototype.render=function(){var e,t;return t=this,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0),e.upsellEnabled=!i.get("dontUpsell")||o.me().isFeatureEnabled("customEmoji"),this.$el.html(v(e)),this.$emojiList=this.$(".js-available-emoji"),this.options.input&&this.filterEmoji(this.getInput()),this.options.button&&this.fillDefaultEmojiList(),this},t.prototype.keyupEvent=function(e){var t,n;return n=u.getKey(e),n===c.ArrowUp||n===c.ArrowDown?(h.stop(e),void h.navMenuList(this.$emojiList,".item",n)):n!==c.Enter&&n!==c.Tab?(t=this.getInput(),this.filterEmoji(t)):void 0},t.prototype.keydownEvent=function(e){var t,n;return((n=u.getKey(e))===c.Enter||n===c.Tab)&&(h.stop(e),t=this.$emojiList.find(".item.selected:first .js-select-emoji"),t.length>0)?t.click():void 0},t.prototype.updateCustomEmoji=function(){return this._customEmoji=f.object(o.me().customEmojiList.map(function(e){return[e.get("name"),e.get("url")]})),this.render()},t.prototype.getTextInput=function(){return r(this.options.target)},t.prototype.getInput=function(){var e,t;return this.options.button?this.$(".js-filter-emoji").val():(e=this.getTextInput(),t=h.getWordFromCaret(e),t.str.substring(1))},t.prototype.filterEmoji=function(e){return this.clearEmojiList(),this.fillEmojiList(e)?h.selectMenuItem(this.$emojiList,".item",this.$emojiList.find(".item").first()):void 0},t.prototype.renderEmojiList=function(e){var t,n,r,o,i;for(r=0,o=e.length;o>r;r++)n=e[r],t={name:n,image:null!=(i=this._customEmoji[n])?i:p[n]},this.$emojiList.append(b.fill("select_emoji",t));return this},t.prototype.fillDefaultEmojiList=function(e){var t;t=["thumbsup","smile","warning","sunglasses","ballot_box_with_check","facepalm"],this.renderEmojiList(t)},t.prototype.fillEmojiList=function(e){var t,n;return n=e.replace(/\W+/g,""),""===e?(this.fillDefaultEmojiList(),!1):/[A-Z]/.test(n)&&this.options.input?(d.hide(),!1):(n=n.toLowerCase(),this.$(".js-upload-emoji").text(g("upload emoji named",{emojiName:n})).attr("data-emojiname",n),this.$(".js-no-matching-emoji-helper").text(g("no matching emoji helper",{emojiName:n})),t=this.getEmojiSuggestions(n).slice(0,6),t.length>0?(this.$(".js-results").removeClass("hide"),this.$(".js-no-results").addClass("hide"),this.renderEmojiList(t)):(this.$(".js-results").addClass("hide"),this.$(".js-no-results").removeClass("hide")),0!==t.length)},t.prototype.clearEmojiList=function(){return this.$emojiList.empty()},t.prototype.getEmojiSuggestions=function(e){var t,n,r,o,i,a,s,u,c;if(s=RegExp("^"+h.escapeForRegex(e)),t=function(){var e;e=[];for(i in this._customEmoji)s.test(i)&&e.push(i);return e}.call(this),c=function(){var e;e=[];for(i in p)s.test(i)&&e.push(i);return e}(),null==this._sortOverride)for(u=["thumbsup","smile","warning","sunglasses","facepalm","question","thumbsdown","wink","smiley","smile_cat","bowtie","heart","laughing","bug","cry","dancer","dancers","clap","shipit","white_check_mark","star","arrow_down","point_down","point_up","point_left","metal"],this._sortOverride={},o=r=0,a=u.length;a>r;o=++r)n=u[o],this._sortOverride[n]=o+1;return f.uniq(k.call(t).concat(k.call(c))).sort(function(e){return function(t,n){var r,o;return r=e._sortOverride[t],o=e._sortOverride[n],r&&!o?-1:o&&!r?1:(r&&o&&(t=r,n=o),n>t?-1:t>n?1:0)}}(this))},t.prototype.hoverItem=function(e){var t;return t=r(e.target).closest(".item"),h.selectMenuItem(this.$emojiList,".item",t)},t.prototype.selectEmoji=function(e){var t;h.stop(e),t=r(e.target).closest(".js-select-emoji").find(".emoji-name").text(),this.insertEmoji(t),d.hide()},t.prototype.insertEmoji=function(e){var t,n,r;return t=this.getTextInput(),this.options.input?r=h.getWordFromCaret(t):(n=h.getCaretPosition(t),null!=n&&(r={start:n,end:n})),h.insertSelection(t,":"+(""+e).trim()+": ",null!=r?r.start:void 0,null!=r?r.end:void 0),y("Emoji Select",e)},t.prototype.openEmojiUploader=function(e){var t;h.stop(e),t=this.$(e.target).attr("data-emojiname"),d.pushView({keepEdits:!0,view:s,options:{model:o.me(),emojiName:t,completerView:this}}),y("Card Detail","Open Custom Emoji Uploader")},t}(m)},{}],515:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),o=e(559),i=e(35),s=e(569),u=e(133),c=e(549),d=e(546),l=e(104),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="upload emoji",t.prototype.events=function(){return{"click .js-upload-emoji":"uploadEmoji","change .js-upload-emoji-file":"fileChange","input .js-emoji-name":"nameChange"}},t.prototype.initialize=function(e){var t,n,r,o,i;for(this.completerView=e.completerView,this.hasGold=this.model.isFeatureEnabled("customEmoji"),this.hasBCGold=!1,o=this.model.organizationList.models,i=[],t=0,n=o.length;n>t&&(r=o[t],this.hasBCGold=r.isFeatureEnabled("goldMembers"),!this.hasBCGold);t++)i.push(void 0);return i},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON(),e.emojiName=this.options.emojiName,e.hasGold=this.hasGold,e.hasBCGold=this.hasBCGold,e.canUpload=this.hasGold||this.hasBCGold,this.$el.html(d.fill("popover_emoji_uploader",e)),this._validate(),this.renderEmoji(),this},t.prototype.getName=function(){return this.$(".js-emoji-name").val().trim().toLowerCase().replace(/\s+/g,"_")},t.prototype.renderEmoji=function(){var e,t,n,r,o;return this.$(".js-emoji-preview-name").text(":"+(this.getName()||"???")+":"),e=this.$(".js-emoji-preview"),t=this.$(".js-upload-emoji-file"),n=null!=(o=t.prop("files"))?o[0]:void 0,/^image\/.*/.test(null!=n?n.type:void 0)?(r=new FileReader,r.onload=function(e){return function(t){return e.$(".js-emoji-conversion").removeClass("hide"),e.$(".js-emoji-preview").attr("src",t.target.result)}}(this),r.readAsDataURL(n)):this.$(".js-emoji-conversion").addClass("hide"),this},t.prototype.fileChange=function(e){var t,n,o,i,a,s,u;return n=this.$(".js-emoji-name"),t=this.$(".js-upload-emoji-file"),""===n.val()&&(i=r(e.target),o=null!=(s=t.prop("files"))?s[0]:void 0,null!=o?a=o.name:t.val()&&(a=null!=(u=/[^\/]+$/.exec(t.val()))?u[0]:void 0),null==a&&(a=""),a=a.split(".")[0],a=a.toLowerCase().replace(/[^a-z0-9_]/g,""),n.val(a),this.$(".js-emoji-name").focus().select()),this.renderEmoji(),this._validate()},t.prototype.nameChange=function(e){return this.renderEmoji(),this._validate()},t.prototype._validate=function(e){var t,n,r,o,i,a;return r=this.getName(),t=this.$(".js-upload-emoji-file"),o=/^[a-z0-9_\s]+$/.test(r),n=(null!=(i=t.prop("files"))?i.length:void 0)>0||t.val(),a=o&&n&&(this.hasGold||this.hasBCGold),this.$(".js-invalid-name").toggleClass("hide",o||""===r),this.$(".js-upload-emoji").toggleClass("disabled",!a)},t.prototype.uploadEmoji=function(e){var t,n,a,c,l,d,p;if(u.stop(e),!r(".js-upload-emoji").hasClass("disabled")){if(this.$(".error").addClass("hide"),t=this.$(".js-upload-emoji-file"),a=null!=(p=t.prop("files"))?p[0]:void 0,c=this.getName(),l=function(e){return function(){return e.completerView.insertEmoji(c),s.hide()}}(this),!a&&t.val())return void u.uploadFile(i.myToken(),t,l);if(null!=a&&!u.validFileSize(a))return void o.flash("file too large","error");if(null!=a&&c)return d=new FileReader,n=new FormData,n.append("token",i.myToken()),n.append("file",a),n.append("name",c),d.onload=function(e){return function(t){return e.model.customEmojiList.create({url:t.target.result,name:c},{data:n,processData:!1,contentType:!1,success:l,error:function(){return this.$(".error").removeClass("hide")}})}}(this),d.readAsDataURL(a)}},t}(c)},{}],516:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j=function(e,t){function n(){this.constructor=e}for(var r in t)S.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},S={}.hasOwnProperty,T=[].slice;r=e("jquery"),i=e(166),a=e(167),s=e(100),u=e(22),b=e(939),c=e(40),w=e(153),l=e(569),d=e("bluebird"),p=e(114),f=e(133),g=e(549),v=e("underscore"),y=e(136),_=e(968),k=e(969),h=e(284),C=e(949),x=e(51),o=e(221),t.exports=m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.viewTitleKey="add card or board",t.prototype.events={"mouseenter .js-select-card,.js-select-board":"hoverItem","click .js-select-card":"selectCard","click .js-select-board":"selectBoard",keydown:"keydownEvent","keyup .js-search":"keyupEvent","input .js-search":"updateSearch"},t.prototype.initialize=function(){return this.items=[],this.debouncedSearch=this.debounce(this.search,350).bind(this),this.search("")},t.prototype.render=function(){var e,t;return t=this,e={},this.model.canAttach()?(this.$el.html(C(e)),d.resolve(this._lastRenderPromise).then(function(e){return function(){return e.renderItems()}}(this)).done(),this):(this.$el.html(b()),this)},t.prototype.renderItems=function(){var e,t,n,r,o,s,u,c,l,d,p,h;return this.$(".js-loading").addClass("hide"),c=this.items.filter(function(e){return e instanceof a}),o=this.items.filter(function(e){return e instanceof i}),t=this.$(".js-card-list").empty(),e=this.$(".js-board-list").empty(),c.length>0&&(u=function(){var e,t,r;for(r=[],e=0,t=c.length;t>e;e++)s=c[e],l=s.toJSON(),n=s.getBoard(),null!=n&&(l.boardName=n.get("name")),r.push(k(l));return r}(),t.append(u)),o.length>0&&(r=function(){var e,t,r;for(r=[],e=0,t=o.length;t>e;e++)n=o[e],l=n.toJSON(),null!=(h=n.getOrganization())&&(l.orgName=h.get("displayName")),r.push(_(l));return r}(),e.append(r)),this.items.length>0&&f.selectMenuItem(this.$el,".item",this.$el.find(".item").first()),p=!this._lastQuery&&0===c.length,d=!this._lastQuery&&0===o.length,this.$(".js-card-results").toggleClass("hide",p),this.$(".js-board-results").toggleClass("hide",d),this.$(".js-no-card-results").toggleClass("hide",c.length>0),this.$(".js-no-board-results").toggleClass("hide",o.length>0),this},t.prototype.keyupEvent=function(e){var t;t=s.getKey(e),(t===u.ArrowUp||t===u.ArrowDown)&&(f.stop(e),f.navMenuList(this.$el,".item",t))},t.prototype.updateSearch=function(e){var t;return t=this.$(".js-search").val(),this.debouncedSearch(t)},t.prototype.keydownEvent=function(e){var t,n;return((n=s.getKey(e))===u.Enter||n===u.Tab)&&(f.stop(e),t=this.$el.find(".item.selected:first .js-select-card,$.js-select-board"),t.length>0)?t.click():void 0},t.prototype.getTextInput=function(){return r(this.options.target)},t.prototype._renderSettledItems=function(e,t){return e===this._lastQuery?this._lastRenderPromise=d.resolve(t).then(function(e){return v.isArray(e)?e:[e]}).catch(o,function(){return[]}).tap(function(e){return function(t){return e.items=t,e.renderItems()}}(this)).finally(function(e){return function(){return e._lastRenderPromise=null}}(this)):void 0},t.prototype.search=function(e){var t,n,r,i,a,s,u,l,m;if(e!==this._lastQuery){if(this._lastQuery=e,this.$(".js-card-results").addClass("hide"),this.$(".js-board-results").addClass("hide"),this.$(".js-loading").removeClass("hide"),""===e)return t=5,a=v.chain(p.get("card",t+1)).without(this.model.id).first(t).value(),i=v.chain(h.getRecentBoards()).without(this.model.get("idBoard")).first(t).value(),u=d.props({recentCards:d.map(a,function(e){return function(t){var n;return null!=(n=e.modelCache.get("Card",t))?n:c.loadCardData(t).catch(o,function(){return null})}}(this)),recentBoards:d.map(i,function(e){return function(t){var n;return null!=(n=e.modelCache.get("Board",t))?n:c.loadBoardMinimal(t).catch(o,function(){return null})}}(this))}).then(function(e){var t,n;return n=e.recentCards,t=e.recentBoards,v.compact(T.call(n).concat(T.call(t)))}),void this._renderSettledItems(e,u);if(s=w(e.trim()),"card"===s.type)return void this._renderSettledItems(e,c.loadCardData(s.shortLink));if("board"===s.type)return void this._renderSettledItems(e,c.loadBoardMinimal(s.shortLink));if(f.isShortId(e)&&(r=this.options.card,n=null!=r?r.getBoard():void 0,null!=n))return void(null!=(l=n.getCard(e))?this._renderSettledItems(e,l):this._renderSettledItems(e,c.loadCardData(n.id,e)));m={query:e,board_fields:"name,idOrganization,url",modelTypes:"cards,boards",partial:!0,card_board:!0},c.loadSearchData(m).nodeify(function(t){return function(n,r){var o,i;return null==n?(i=v.chain(r.cards).map(function(e){return t.modelCache.get("Card",e.id)}).sortBy(function(e){return e.get("idBoard")===t.model.get("idBoard")?0:1}).value(),o=v.chain(r.boards).map(function(e){return t.modelCache.get("Board",e.id)}).sortBy(function(e){return e.get("id")===t.model.get("idBoard")?1:0}).value(),t._renderSettledItems(e,T.call(i).concat(T.call(o)))):(t.items=[],t.renderItems())}}(this))}},t.prototype.hoverItem=function(e){var t;return t=r(e.target).closest(".item"),f.selectMenuItem(this.$el,".item",t)},t.prototype.selectCard=function(e){var t,n;f.stop(e),n=this.$(e.target).closest(".js-select-card").attr("data-id"),t=this.modelCache.get("Card",n),null!=t&&this.insertItem(t)},t.prototype.selectBoard=function(e){var t,n;f.stop(e),n=this.$(e.target).closest(".js-select-board").attr("data-id"),t=this.modelCache.get("Board",n),null!=t&&this.insertItem(t)},t.prototype.insertItem=function(e){var t,n,r,o;return this.options.callback?void this.options.callback(e):(r=e.get("url"),t=this.getTextInput(),n=f.getCaretPosition(t),null!=n&&(o={start:n,end:n}),f.insertSelection(t,r+" ",null!=o?o.start:void 0,null!=o?o.end:void 0),x("Card Detail",e instanceof a?"Comment Box - Added Card":"Comment Box - Added Board","via menu"))},t}(g)},{}],517:[function(e,t,n){var r,o;o=e(104),r={getPermLevelAltText:function(e){return o(["board perms",e,"short summary"])},getPermLevelAltTextForBoard:function(e){return r.getPermLevelAltText(e.getPermLevel())},getPermLevelIconClass:function(e){return"org"===e?"organization-visible":e},getPermLevelIconClassForBoard:function(e){return r.getPermLevelIconClass(e.getPermLevel())}},t.exports=r},{}],518:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].slice;r=e("jquery"),i=e(549),a=e("underscore"),s=e(48),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return this.listenPropagators={},this.listenTo(this.collection,{sort:this.sort,add:this.addModel,remove:this.removeModel,reset:this.reset}),t.__super__.initialize.apply(this,arguments)},t.prototype.getModels=function(){return this.collection.models},t.prototype.subview=function(){var e,n,r;return r=t.__super__.subview.apply(this,arguments),null==(e=this.listenPropagators)[n=r.cid]&&(e[n]=this.listenTo(r,"all",function(e){return function(){var t,n;return n=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],e.trigger.apply(e,[n,r].concat(l.call(t)))}}(this))),r},t.prototype.addModel=function(e,t){var n;s("render","adding "+this.collection.model.name+" to "+this.viewType.name),n=this.subview(this.viewType,e),this.el&&this.insertSubview(n,a.indexOf(this.getModels(),e))},t.prototype.removeModel=function(e,t){return s("render","removing "+this.collection.model.name+" from "+this.viewType.name),this.removeSubview(this.viewForModel(e))},t.prototype.reset=function(e,t){var n,r,o,i,a,s,u,c;for(u=t.previousModels,o={},c=e.models,n=0,i=c.length;i>n;n++)s=c[n],o[s.cid]=!0;for(r=0,a=u.length;a>r;r++)s=u[r],o[s.cid]||this.removeModel(s);return this.sort()},t.prototype.sort=function(){var e,t,n,r,o;for(o=this.getModels(),t=e=0,n=o.length;n>e;t=++e)r=o[t],this.moveSubviewToPosition(this.subview(this.viewType,r),t)},t.prototype.render=function(){var e;return s("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),this.appendSubviews(function(){var t,n,r,o;for(r=this.getModels(),o=[],t=0,n=r.length;n>t;t++)e=r[t],
o.push(this.subview(this.viewType,e));return o}.call(this)),this},t.prototype.viewForModel=function(e){return this.existingSubview(this.viewType,e)},t.prototype.removeSubview=function(e){return this.deleteSubview(e)},t.prototype.insertSubview=function(e,t,n){null==n&&(n=this.$el),s("render","inserting "+e.$el.find("h2").text()+" at position "+t),"number"==typeof t?t=0>=t?n.children().eq(0):t<n.children().length?n.children().eq(t):void 0:t instanceof i&&(t=t.$el),e.$el.is(":empty")&&(e.delegateEvents(),e.render()),(null!=t?t.length:void 0)>0?e.$el.insertBefore(t):n.append(e.$el)},t.prototype.moveSubviewToPosition=function(e,t,n){var o,i,a,u,c;if(null==n&&(n=this.$el),e.$el.is(":empty"))return void this.insertSubview(e,t,n);for(c=n.children(".placeholder,.card-composer"),i=0,u=c.length;u>i;i++)a=c[i],r(a).index()<=t&&t++;o=e.$el.index(),o!==t&&(s("render","moving "+e.$el.find("h2").text()+" into position "+t),0===t?n.prepend(e.$el):t>=n.children().length?n.append(e.$el):e.$el.insertAfter(n.children().eq(t-1)))},t}(i)},{}],519:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m;r=e("underscore"),o=e(124),p=e(130),d=e(520),s=d.getTypes,a=d.getDropped,l=function(e,t){document.addEventListener(e,t)},h=function(e,t,n,r){var o,i,a;for(o=0,i=n.length;i>o;o++)a=n[o],p(e,t+":"+a,r)},i=function(e){var t;return e?(t=i(e.parentElement),t.push(e),t):[]},u=[],c=null,m=function(e,t){var n,r,a,s,l,d,p,m,f;if(clearTimeout(c),!(u.length>0&&u[u.length-1]===e)){for(p=i(e),a=o(p,u,function(e,t){return e===t}),m=u.slice(a),r=0,l=m.length;l>r;r++)n=m[r],h(n,"dd-leave",t,{bubbles:!1});for(f=p.slice(a),s=0,d=f.length;d>s;s++)n=f[s],h(n,"dd-enter",t,{bubbles:!1});return u=p}},l("dragenter",function(e){return m(e.target,s(e.dataTransfer)),e.preventDefault()}),l("dragover",function(e){var t;return t=s(e.dataTransfer),t.length>0&&(e.dataTransfer.dropEffect="copy"),m(e.target,t),e.preventDefault()}),l("dragleave",function(e){var t;return t=s(e.dataTransfer),c=setTimeout(function(){return m(null,t)},200)}),l("dragend",function(e){return m(null,[])}),l("drop",function(e){var t;t=s(e.dataTransfer),a(e).then(function(n){var r,o;for(o in n)r=n[o],p(e.target,"dd-drop:"+o,{detail:r});return m(null,t)}),e.preventDefault()})},{}],520:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w;r=e("bluebird"),o=e("underscore"),w=e(151),p=function(e){var t;return t=function(){switch(e.kind){case"file":return"files";case"string":switch(e.type){case"text/uri-list":return"url";case"text/plain":return"text"}}}(),t||"unknown"},g=function(e){return o.chain(e.items).map(p).compact().uniq().value()},h=function(e){switch(e){case"Files":case"application/x-moz-file":return"files";case"Url":case"text/x-moz-url":case"text/uri-list":return"url";case"Text":case"text/plain":return"text";default:return"unknown"}},v=function(e){return o.chain(e.types).map(h).compact().uniq().value()},f=function(e){return e.files.length>0?["files"]:[]},l=function(e){return r.all(o.toArray(e.items).map(function(e){var t;return t=p(e),"text"===t||"url"===t?new r(function(n){return e.getAsString(function(e){return n({type:t,content:e})})}):"files"===t?{type:t,content:e.getAsFile()}:null}))},u=function(e){return o.map(e.files,function(e){return{type:"files",content:e}})},c=function(e){var t;return t=e.types,null==t&&(t=e.getData("Text")?["Text"]:[]),o.map(t,function(t){var n,r;return r=h(t),"text"!==r&&"url"!==r||!(n=e.getData(t))?null:{type:r,content:n}})},i=function(e){return r.all(a.map(function(t){return t(e)})).then(function(e){return o.chain(e).flatten().compact().each(function(e){"text"===e.type&&w(e.content)&&(e.type="url")}).reject(function(e){return"url"===e.type&&!w(e.content)}).groupBy("type").mapObject(function(e,t){return"files"===t?o.pluck(e,"content"):e[0].content}).value()})},y=function(){return/mac/i.test(navigator.platform)&&/safari/i.test(navigator.userAgent)},b=function(e){var t;return t=window.DataTransfer||window.Clipboard,t?t.prototype.hasOwnProperty(e)||"types"===e&&y()||!window.DataTransfer&&"files"===e&&y():!1},m=b("items")?g:b("types")?v:b("files")?f:function(){return[]},a=b("items")?[l]:o.compact([b("files")?u:void 0,b("getData")&&b("types")?c:void 0]),s=function(e){return i(e.dataTransfer)},d=function(e){return null!=e.clipboardData?i(e.clipboardData):null!=window.clipboardData?i(window.clipboardData):r.resolve({})},t.exports={getTypes:m,getDropped:s,getPasted:d}},{}],521:[function(e,t,n){var r,o;r=e("jquery"),t.exports=o=function(){function e(){}return e.prototype.checkLength=function(e){var t,n,o,i;i=r(e.target).val(),o=this.maxLength||16384,t=0===i.length||/^\s*$/.test(i),n=!t&&i.length>o,null!=this.preventSubmit?this.preventSubmit(n,t):this._preventSubmit(n,t)},e.prototype._preventSubmit=function(e,t){return this.$(".js-too-long-warning").toggleClass("hide",!e),this.$(".js-is-empty-warning").toggleClass("hide",!t),this.$('input[type="submit"]').prop("disabled",t||e)},e}()},{}],522:[function(e,t,n){var r,o,i,a,s;s=e("moment"),r=e("underscore"),i=e(104),o=function(e,t){var n,o,i,a,s;for(i=0,a=t.length;a>i;i++){if(o=t[i],!r.isArray(o))return o;if(n=o[0],s=o[1],n>=e)return s}throw new Error("no matching dispatch value for "+e+"!")},a=function(e){var t,n,r;return t=e.complete,r=e.incomplete,n=null,function(e,i){return i?t():(null==n&&(n=r()),o(s(e).diff(s(),"hours",!0),n))}},t.exports={classForDueDate:a({complete:function(){return"is-due-complete"},incomplete:function(){return[[-36,"is-due-past"],[0,"is-due-now"],[24,"is-due-soon"],"is-due-future"]}}),titleForDueDate:a({complete:function(){return i("badge.due.complete")},incomplete:function(){return[[-36,i("badge.due.overdue")],[0,i("badge.due.recently overdue")],[1,i("badge.due.less than an hour")],[24,i("badge.due.less than a day")],i("badge.due.later")]}}),relativeInfoForDueDate:a({complete:function(){return null},incomplete:function(){return[[-36,i("badge.due.overdue short")],[0,i("badge.due.recently overdue short")],[24,i("badge.due.due soon short")],null]}})}},{}],523:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;r=e("jquery"),o=e(512),i=e(564),s=e(514),v=e(138),u=e(100),c=e(22),l=e(566),d=e(569),p=e(118),h=e(133),m=e(549),f=e("underscore"),y=e(48),w=e(546),b=e(104),g=e(94),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.allowNewlines=!0,t.prototype._draftKey=function(e){return"draft_"+this.model.id+"_"+e},t.prototype._saveDraft=function(e,t){return p.set(this._draftKey(e),t)},t.prototype._recallDraft=function(e){return p.get(this._draftKey(e))},t.prototype._discardDraft=function(e){return p.unset(this._draftKey(e))},t.prototype.editField=function(e){var t,n,o;return n=r(e.target).closest("a"),n.length>0&&"#"!==n.attr("href")||i.sorting||(t=r(e.target).closest(".editable"),0===t.length||v(t))?void 0:(h.stop(e),d.hide(),o=t.attr("attr"),this.edit(o))},t.prototype.edit=function(e,t){var n,r,o,i,a,s,u,c,d;null==t&&(t=!0),e.indexOf(".")>-1&&(d=e.split("."),e=d[1]),n=this.$("[attr="+e+"]"),c=this.$(".js-no-higher-edits [attr="+e+"]"),r=n.not(c),0!==r.length&&(l.cancelEdits(),i=r.find(".edit:first"),0!==i.length&&(a=r.find(".field:first"),u=a.is("textarea"),s=a.parent().is(".card-detail-edit"),o=r.find(".current"),i.append(w.fill("edit_controls")),i.hasClass("delete")||i.find(".delete").remove(),i.hasClass("convert")||i.find(".convert").remove(),i.hasClass("options-menu")||i.find(".options-menu").remove(),i.hasClass("add-members")||i.find(".add-members").remove(),r.addClass("editing"),""===a.val()&&a.val(h.traverse(this.model.attributes,null!=d?d:e)),this.waitForId(this.model,function(t){return function(){return a.data("draftKey",t._draftKey(e))}}(this)),y("editable",this.model),t&&a.focus().select(),a.autosize({append:!1})))},t.prototype.recallDrafts=function(){var e,t,n;return n=this,e=this.$("[attr]"),t=this.$(".js-no-higher-edits [attr]"),e.not(t).each(function(e){return function(t,o){var i,a,s,u;i=r(o),s=i.attr("attr"),null!=e.model.id&&(u=n._recallDraft(s),null!=u&&(a=i.find(".field:first"),a.val(u),e.defer(function(){return i.find(".edits-warning").show()})))}}(this))},t.prototype.stopEditing=function(e){return h.stop(e),l.cancelEdits(),!1},t.prototype.clearEdits=function(e){var t,n;return h.stop(e),t=r(e.target).closest(".editable[attr]"),n=t.attr("attr"),null!=n&&this._discardDraft(n),t.find(".field").val(""),t.find(".edits-warning").hide(),t.find(".edits-error").hide(),l.cancelEdits(),!1},t.prototype.validate=function(){var e,t,n,o,i,a,s,u,c;for(s=this.$(".editing.non-empty .field"),n=0,i=s.length;i>n;n++)if(e=s[n],/^\s*$/.test(r(e).val()))return!1;for(u=this.$(".editing .field"),o=0,a=u.length;a>o;o++)if(e=u[o],t=(null!=(c=r(e).val())?c:"").length,t>16384)return r(".editing").find(".edits-error").text(b("text too long",{over:g(t-16384)})).show(),!1;return!0},t.prototype.keydownEvent=function(e){var t;t=u.getKey(e),l.isEditing()&&(d.view instanceof s||d.view instanceof o?"function"==typeof this.checkInsert&&this.checkInsert(e):u.isForceSubmitEvent(e)||t===c.Enter&&(!r(e.target).is("textarea")||r(e.currentTarget).hasClass("single-line"))&&!e.shiftKey?(h.stop(e),this.commitEdits(e)):t!==c.Enter||this.allowNewlines||h.stop(e))},t.prototype.commitEdits=function(e){var t,n,o,i;return h.stop(e),t=r(e.target).closest(".editable.editing[attr]"),t.find(".edits-error").hide(),this.validate()?(i=this,o=this.model,n=this.customSet,t.remove("input[type=submit]"),t.removeClass("editing").each(function(){var e,n;return e=r(this).attr("attr"),n=r(this).find(".field").val(),i.allowNewlines||(n=n.replace(/[\r\n]+/g," ")),0===r.trim(n).length&&(n=""),o.get(e)===n?i._discardDraft(e):o.update(e,n,function(n){null!=n?t.find(".edits-error").text(n.message).show():i._discardDraft(e)})}).find(".field").val(""),t.find(".edits-warning").hide(),!0):void 0},t.prototype.clickSetting=function(e){var t,n,o,i;t=r(e.target),t.hasClass("disabled")||t.closest(".js-disabled").length||(n=t.attr("href"),n&&"#"!==n||(o=t.closest(".pref").attr("name"),o&&(i=t.attr("value"),i=function(){switch(i){case"true":return!0;case"false":return!1;default:return i}}(),this.model.setPref(o,i),this.model.save(),h.stop(e))))},t.prototype.delegateEvents=function(e){var n;return n={"click .current":"editField","click .js-cancel-edit":"clearEdits","click .js-discard-edits":"clearEdits","click .js-view-edits":"editField","click .js-save-edit":"commitEdits","keydown .field":"keydownEvent","click input":h.stopPropagation,"click textarea":h.stopPropagation},null!=this.model.setPref&&(n["click a"]="clickSetting"),t.__super__.delegateEvents.call(this,f.extend(n,e||this.events))},t}(m)},{}],524:[function(e,t,n){var r,o,i,a,s,u,c;u=e(104),o=e(569),i=e("react"),c=e(541)("file_link_handler"),a=e(133),s=e("underscore"),r=i.createClass({displayName:"FileLinkComponent",render:function(){var e;return e=this.props.url,c.render(function(){return c.div(function(){return c.p(function(){return c.format("browsers-prevent-file-links")}),c.input(".js-autofocus",{type:"text",value:e,readOnly:!0,onFocus:function(e){return s.defer(function(){return e.target.select()})}})})})}}),t.exports=function(e){return o.show({elem:e,getViewTitle:function(){return u(["view title","open file link"])},reactElement:i.createElement(r,{key:"FileLinkComponent",url:e.href})})}},{}],525:[function(e,t,n){var r,o,i,a,s,u,c,l;o=e(37),u=e(105),i=e(536),a=e("bluebird"),c=e(265),s=e("underscore"),r=u("FriendlyLink",["BoardRequired"]),l=c.renderable(function(e){var t,n;return t=e.icon,n=e.text,c.img(".known-service-icon",{src:t}),c.text(n)}),t.exports=function(e,t){var n;if(null==t)throw r.BoardRequired();return n="A"===e.tagName?[e]:s.toArray(e.querySelectorAll("a")),a.map(n,function(e){var n,r;return r=e.href,(n=e.textContent)===r||n===decodeURIComponent(r)?i.one({command:"format-url",board:t,options:{url:r}}).catch(i.Error.NotHandled,function(){return null}).then(function(n){return null!=(null!=n?n.text:void 0)?n:o.interpret(e.href,t.modelCache)}).then(function(t){return null!=t?(e.classList.add("known-service-link"),e.innerHTML=l(t)):void 0}):void 0}).done()}},{}],526:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m;o=e(7),i=e(524),p=e(152),a=e(566),s=e(39),u=e(569),m=e(141),c=e(284),l=e(133),r=e("jquery"),d=function(e){var t,n,a,s;if(t=r(e.target).closest("a"),n=t.attr("href"),n&&"#"!==n){if(0===n.indexOf("file://"))l.preventDefault(e),i(t[0]);else if(0===n.indexOf("/")||0===n.indexOf(siteDomain+"/")){if(s=n.replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),a=s!==location.pathname.slice(1),window!==window.top&&h(s))return l.preventDefault(e),void window.open(s);p(n)&&null==t.attr("target")&&(l.preventDefault(e),a&&o.navigate(s,{trigger:!0}))}}else l.preventDefault(e)},h=function(e){var t,n,r,i,a,u;if(null==(n=o.getCurrentBoard()))return!1;if(i=/^([bc])\/([^\/]+)/.exec(e),null==i)return!0;switch(t=i[0],r=i[1],u=i[2],r){case"b":return u!==n.get("shortLink");case"c":return(null!=(a=s.get("Card",u))?a.getBoard():void 0)!==n;default:return!0}},t.exports=function(e){var t,n,i;if(n=o.getCurrentBoard(),i=n&&o.getCurrentBoardView(),u.isVisible&&!u.hardToClose&&0===r(e.target).closest(".pop-over").length&&r(e.target).closest("body").length>0)u.hide();else{if(r(e.target).is("input")||r(e.target).is("textarea")||e.target.attributes["data-reactid"])return void l.stopPropagation(e);u.isVisible&&r(e.target).closest(".pop-over").length>0||(c.get("showBoardsListSidebar")&&0===r(e.target).closest(".boards-drawer").length?c.hideUnpinnedSidebar():r(".new-comment").hasClass("focus")?r(".new-comment").removeClass("focus").find("textarea").blur():(null!=n?n.viewState.get("listComposerOpen"):void 0)?null!=n&&n.viewState.set("listComposerOpen",!1):(null!=n?n.composer.get("vis"):void 0)&&!r(e.target).closest(".card-composer").length>0?n.composer.save("vis",!1):a.isEditing()?a.cancelEdits():o.showingCalendar(i)&&0===r(e.target).closest(".calendar-day").length?r(".calendar-day.active").removeClass("active"):r("input, textarea").blur())}t=r(e.target).closest("a"),t.length&&m(e)&&d(e)}},{}],527:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(39),o=e("react"),i=e("xtend"),t.exports=function(e){return function(t){function n(e){n.__super__.constructor.apply(this,arguments),this.listeners=[]}return a(n,t),n.prototype.listenTo=function(e,t){return r.on(e,t),this.listeners.push({events:e,callback:t})},n.prototype.componentWillUnmount=function(){return this.listeners.forEach(function(e){var t,n;return n=e.events,t=e.callback,r.off(n,t)})},n.prototype.render=function(){var t;return t=i(this.props,{listenTo:this.listenTo.bind(this)}),o.createElement(e,t)},n}(o.Component)}},{}],528:[function(e,t,n){var r,o;o=e("moment"),r=e(104),t.exports=function(){var e,t;return t=o(),e=r("pasted file name",{date:t.format("l"),time:t.format("LTS")}),e+".png"}},{}],529:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A=[].slice;m=e("underscore"),r=e(35),i=e(167),a=e(7),o=e(166),u=e(208),l=e(214),p=e("bluebird"),j=e(105),c=e(39),O=e("xtend"),d=j("PluginHandlerContext",["InvalidSignature","InvalidType","NotSerializable"]),y={},C=function(e){var t;return null!=(t=a.getCurrentBoard())&&t.id===e},f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWYXZ",S=function(e){var t,n,r,o;for(null==e&&(e=16),t=[],n=r=0,o=e;o>=0?o>r:r>o;n=o>=0?++r:--r)t.push(f[Math.floor(Math.random()*f.length)]);return t.join("")},k={},v={card:{type:i,serialize:function(e){return{value:e.id}},deserialize:function(e){var t;return t=c.get("Card",e),null!=t&&C(t.get("idBoard"))?t:null}},board:{type:o,serialize:function(e){return{value:e.id}},deserialize:function(e){return C(e)?c.get("Board",e):null}},member:{type:u,serialize:function(e){return{value:e.id}},deserialize:function(e){return r.isMe(e)?c.get("Member",e):null}},el:{type:Element,serialize:function(e){var t;return t=S(),y[t]=e,{value:t,disposer:function(){return delete y[t]}}},deserialize:function(e){return y[e]}}},h="__insecure_signature",s=S(64),_=function(e){var t;return t=m.chain(e).pairs().sortBy(function(e){var t,n;return t=e[0],n=e[1],t}).filter(function(e){var t;return t=e[0],t!==h}).object().value(),[s,JSON.stringify(t),s].join("\n").split("").reduce(function(e,t){return e.map(function(e){return 31*e+t.charCodeAt(0)&4294967295})},[0,1,2,3]).map(function(e){return("00000000"+e.toString(16)).substr(-8,8)}).join("")},E=function(e){return e[h]=_(e),e},g=function(e){return _(e)===e[h]},x=function(e){return m.isString(e)||m.isNumber(e)||m.isBoolean(e)||m.isNull(e)||m.isUndefined(e)?!0:m.isFunction(e)||m.isRegExp(e)||m.isDate(e)?!1:m.isArray(e)?m.every(e,x):m.isObject(e)?x(m.values(e)):!1},T=function(e){var t;return t=[],p.try(function(){return E(m.mapObject(e,function(e,n){var r,o,i,a;if(null!=(r=v[n])){if(!(e instanceof r.type)){if(null==e)return null;throw d.InvalidType("value in context did not have the expected type")}return i=r.serialize(e),a=i.value,o=i.disposer,null!=o&&t.push(o),a}if(x(e))return e;throw d.NotSerializable("the value for "+n+" was not serializable")}))}).disposer(function(){var e,n,r;for(n=0,r=t.length;r>n;n++)(e=t[n])()})},b=function(e){if(!e||!g(e))throw d.InvalidSignature("Context signature check failed. This usually means that the Power-Up modified the context between calls to Trello.");return m.mapObject(e,function(e,t){var n;return null!=e&&v.hasOwnProperty(t)&&null!=(n=v[t])?n.deserialize(e):e})},w=function(){var e;return e=1<=arguments.length?A.call(arguments,0):[],E(O.apply(null,e))},t.exports={Error:d,serialize:T,deserialize:b,extend:w}},{}],530:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z,R;r=e("jquery"),S=e("underscore"),o=e(35),a=e(7),D=e(151),I=e(152),N=e(136),s=e(100),u=e(22),f=e(39),g=e(40),v=e(699),b=e(529),y=e(567),w=e(533),_=e(712),k=e(713),C=e(714),x=e(569),V=e(535),j=e("bluebird"),z=e(56),R=e("xtend"),c="Invalid context, missing board",l="Invalid context, missing card",d="Invalid context, missing el (or attempt to use el after initial request)",p="Invalid context, missing list",h="Invalid context, missing member",i="Card not found or not on current board",m="Invalid context, missing organization",B=function(e,t,n){var r,o,a,s,u,m,f;if(a=t.context,u=t.idCard,r=a.board,o=a.card,s=a.el,m=a.list,f=a.member,(null!=n?n.board:void 0)&&null==r)throw e.NotHandled(c);if((null!=n?n.el:void 0)&&null==s)throw e.NotHandled(d);if((null!=n?n.list:void 0)&&null==m)throw e.NotHandled(p);if((null!=n?n.member:void 0)&&null==f)throw e.NotHandled(h);if(null!=u){if(null==r)throw e.NotHandled(c);if(null==(o=r.getCard(u)))throw e.NotHandled(i)}if((null!=n?n.card:void 0)&&null==o)throw e.NotHandled(l);return R(t,{context:R(a,{card:o})})},L=function(e,t){var n,r;return n=t.el,null!=n&&(x.contains(n)||x.toggledBy(n))?!0:null!=(r=P(e))&&x.contains(r)?!0:!1},M=null,O=function(){null!=M&&M.remove(),M=null},A=null,T=0,E=function(){r(window).off("resize.plugin-board-bar"),null==A||A.isRemoved||(A.remove(),A=null)},t.exports=function(e){var t,n,i,s;return i=e.idPlugin,t=e.allowRestricted,s=function(e){return S.mapObject(e,function(t){return function(n,r){var o,i,a;if(null==(o=null!=r?r.context:void 0))throw n.NotHandled("Missing context");if(a=function(e){var t,r,i;return t=e.command,i=e.el,r=e.options,j.using(b.serialize({el:i}),function(e){return n.request(t,R(r,{context:b.extend(o,e)})).then(function(e){return function(e){return V(e,a)}}(this))})},r=V(r,a),i=b.deserialize(o),null==i)throw n.NotHandled("Invalid context");return t.call(e,n,R(r,{context:i}))}})},n={data:function(e,t){var n,r,a,s,u,c;return u=B(e,t,{board:!0}).context,n=u.board,r=u.card,a=null!=r?r.getPluginData(i):void 0,s=null!=(c=o.me())?c.getPluginData(i):void 0,R(n.getPluginData(i),a,s)},set:function(e,t){var n,r,a,s,u,c,l,d;if(s=B(e,t,{board:!0}),u=s.context,n=u.board,r=u.card,c=s.scope,d=s.visibility,a=s.data,"private"!==d&&"shared"!==d)throw e.NotHandled("Invalid value for visibility");if(!S.isString(a))throw e.NotHandled("Invalid value for data");if(l=function(){switch(c){case"card":return r||function(){throw e.NotHandled("Card scope not available without card context")}();case"board":return n;case"member":return o.me()||function(){throw e.NotHandled("No active member")}();case"organization":return n.getOrganization()||function(){throw e.NotHandled("Unable to save plugin data at the organization level because the member is not in the organization")}();default:throw e.NotHandled("Invalid value for scope")}}(),"shared"===d){if(!("card"!==c&&"board"!==c||(null!=l?l.editable():void 0)))throw e.NotHandled("Scope not editable by active member");if("organization"===c&&!l.hasActiveMembership(o.me()))throw e.NotHandled("Scope not editable by active member")}l.setPluginData(i,d,a)},navigate:function(e,t){var n,r;if(n=t.url,!D(n))throw e.NotHandled("Not a supported url");if(!I(n))throw e.NotHandled("Navigation only allowed to Trello client URLs");r=n.replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),r!==location.pathname.slice(1)&&(z("Power-Up","requests","Plugin handler","","","navigate",i),a.navigate(r,{trigger:!0}))},showCard:function(e,t){var n;return n=B(e,t,{card:!0}).context.card,z("Power-Up","requests","Plugin handler","","","showCard",i),O(),y.close(),a.showCardDetail(n)},popup:function(e,t){var n,r,o,a,s,u,c,l;if(c=B(e,t,{board:!0}),a=c.context,l=c.title,o=c.content,r=c.callback,n=a.board,s=a.el,z("Power-Up","requests","Plugin handler","","","popup",i),u=function(){var t;switch(t={model:n,title:l,content:o,callback:r},o.type){case"iframe":return new k(t);case"list":return new C(t);default:throw e.NotHandled("Uknown type for popup")}},L(e,a))x.pushView({view:u()});else{if(null==s)throw e.NotHandled(d);x.toggle({elem:s,view:u()})}},"close-popup":function(e,t){var n;n=t.context,z("Power-Up","requests","Plugin handler","","","close-popup",i),L(e,n)?x.hide():"undefined"!=typeof console&&null!==console&&console.error("Error: No popover in context. Are you using the correct t?")},"pop-popup":function(e,t){var n;n=t.context,z("Power-Up","requests","Plugin handler","","","pop-popup",i),L(e,n)&&x.popView()},overlay:function(e,t){var n,o,a,s;a=B(e,t,{board:!0}),s=a.context,n=s.board,o=a.content,z("Power-Up","requests","Plugin handler","","","overlay",i),O(),M=new _({model:n,content:o}),r("body").append(M.render().el)},"close-overlay":function(e){z("Power-Up","requests","Plugin handler","","","close-overlay",i),null!=M?O():"undefined"!=typeof console&&null!==console&&console.warn("Warning: No overlay is being displayed")},modal:function(e,t){var n,r,o,a,s;o=B(e,t,{board:!0}),a=o.context,n=a.board,r=o.content,z("Power-Up","requests","Plugin handler","","","modal",i),r.title||(r.title=(null!=(s=f.get("Plugin",i))?s.get("name"):void 0)||""),y.open({model:n,content:r})},"close-modal":function(e){return z("Power-Up","requests","Plugin handler","","","close-modal",i),y.close()},"board-bar":function(e,t){var n,o,a,s,u,c;a=B(e,t,{board:!0}),s=a.context,n=s.board,o=a.content,z("Power-Up","requests","Plugin handler","","","board-bar",i),o.title||(o.title=(null!=(u=f.get("Plugin",i))?u.get("name"):void 0)||""),E(),A=new v({model:n,content:o}),r(".board-main-content").append(A.render().el),T=o.height||200,c=function(){var e,t,n,o;return e=r(".plugin-board-bar iframe"),e.length?(n=e.height(),t=r(".board-main-content").height(),o=.4*t-48,n>o?e.height(o+"px"):T>n?e.height(Math.min(T,o)+"px"):void 0):void 0},c(),r(window).on("resize.plugin-board-bar",S.debounce(function(){return c()},300))},"close-board-bar":function(e){z("Power-Up","requests","Plugin handler","","","close-board-bar",i),null!=A?E():"undefined"!=typeof console&&null!==console&&console.warn("Warning: No board bar is being displayed")},resize:function(e,t){var n,o,i;if(n=t.height,o=P(e),!o)throw e.NotHandled("Could not find iframe to resize");return r(o).parents(".plugin-modal>.fullscreen").length?void("undefined"!=typeof console&&null!==console&&console.warn("Warning: Fullscreen modals cannot be resized with t.sizeTo")):void(n&&(r(o).parents(".plugin-board-bar").length?(T=n,i=.4*r(".board-main-content").height()-48,o.style.height=Math.min(n,i)+"px"):o.style.height=n+"px"))},card:function(e,t){var n,r,o,i;return o=B(e,t,{card:!0}),i=o.context,n=i.card,r=o.fields,w.card(n,r)},cards:function(e,t){var n,r,o,i;return o=B(e,t,{board:!0}),i=o.context,n=i.board,r=o.fields,w.cards(n.openCards(),r)},list:function(e,t){var n,r;return n=t.context,r=t.fields,j.try(function(){var e,t;return null!=(t=n.list)?t:null!=(e=n.card)?null!=(t=e.getList())?t:g.getCardList(e.id):null}).then(function(t){if(null==t)throw e.NotHandled(p);return w.list(t,r)})},lists:function(e,t){var n,r,o,i;return o=B(e,t,{board:!0}),i=o.context,n=i.board,r=o.fields,w.lists(n.listList.models,r)},member:function(e,t){var n,r,o,i;return o=B(e,t,{member:!0}),i=o.context,r=i.member,n=o.fields,w.member(r,n)},board:function(e,t){var n,r,o,i;return o=B(e,t,{board:!0}),i=o.context,n=i.board,r=o.fields,w.board(n,r)},"attach-to-card":function(e,t){var n,r,o,a,s,u;return a=B(e,t,{card:!0}),s=a.context,n=s.card,u=a.url,o=a.name,r=a.mimeType,z("Power-Up","requests","Plugin handler","","","attach-to-card",i),N(n,"uploadUrl",{url:u,name:o,mimeType:r}).return()},organization:function(e,t){var n,r,o,i;if(o=B(e,t,{board:!0}),i=o.context,n=i.board,r=o.fields,null!=n.hasOrganization()&&null!=n.getOrganization())return w.organization(n.getOrganization(),r);throw e.NotHandled(m)}},t&&S.extend(n,{"request-token":function(e,t){var n,o,a,s;if(n=t.context,a=t.name,o=t.key,s=t.scope,z("Power-Up","requests","Plugin handler","","","request-token",i),!o)throw e.NotHandled("Missing API key");if(!a)throw e.NotHandled("Missing app name");if(!s)throw e.NotHandled("Missing scope");return new j(function(t){var n,i;return i=function(n){var r;if(r=/<pre>\s*([0-9a-f]+)\s*<\/pre>/.exec(n),!r)throw e.NotHandled("Failed to fetch token");return t(r[1])},n=function(t){var n,o;if(n=/input type="hidden" name="requestKey" value="([0-9a-f]+)"/.exec(t),o=/input type="hidden" name="signature" value="([0-9a-f\/]+)"/.exec(t),!n||!o)throw e.NotHandled("Unable to get required parameters");return r.post("/1/token/approve",{approve:"Allow",requestKey:n[1],signature:o[1]},i)},r.get("/1/authorize?expiration=never&response_type=token&name="+encodeURIComponent(a)+"&scope="+encodeURIComponent(s)+"&key="+encodeURIComponent(o),n)})}}),s(n)},P=function(e){var t;return t=document.querySelectorAll("iframe.plugin-iframe"),S.find(t,function(t){return t.contentWindow===e.source})}},{}],531:[function(e,t,n){var r,o,i,a,s,u,c,l;c=e(105),r=e(214),o=e(530),i=e(532),u=e(539),l=e("xtend"),s=c("PluginCache",["InconsistentUrlForId","InvalidArgument"]),a=function(){function e(){this.pluginFromUrl={},this.pluginFromId={}}return e.prototype.Error=s,e.prototype.get=function(e){var t,n,a;if(!(e instanceof r))throw s.InvalidArgument("expected a plugin");if(n=e.id,a=n===u.id&&null!=u.url?u.url:e.get("url"),null!=(t=this.fromId(n))){if(t.manifestUrl!==a)throw s.InconsistentUrlForId("the cached plugin is using a different url");return t}return e=new i(n,e.get("name"),a,o({idPlugin:n,allowRestricted:/^https:\/\/[\w-]+\.(?:staging\.)?trello\.services\/manifest\.json$/.test(a)||/^http:\/\/localhost:\d+\/[\w-]+\/manifest\.json$/.test(a)})),this.pluginFromUrl[a]=this.pluginFromId[n]=e,e},e.prototype.fromUrl=function(e){return this.pluginFromUrl[e]},e.prototype.fromId=function(e){return this.pluginFromId[e]},e.prototype.drop=function(e){var t;return null!=(t=this.pluginFromId[e])?(delete this.pluginFromUrl[t.manifestUrl],delete this.pluginFromId[e],t.drop()):void 0},e}(),t.exports=new a},{}],532:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=[].slice,g=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),c=e("underscore"),l=e(127),d=e(105),o=e(224),p=e(267),s=e("bluebird"),u=e(271),a=d("Plugin",["InvalidManifestUrl","UnableToLoadManifest","NotHandled","Timeout"]),h=function(e,t){return l(t,function(t,n){return"url"===n&&c.isString(t)?t.replace(/^\.\//,e):void 0})},m=function(e){var t;return t=p(e).set("hash",null).set("query",null),t.set("pathname",t.pathname.replace(/[^\/]+$/,"")),t.href},t.exports=i=function(){function e(e,t,n,r){if(this.id=e,this.name=t,this.manifestUrl=n,this.handlers=r,null==this.manifestUrl)throw a.InvalidManifestUrl("invalid url")}return e.Error=a,e.prototype.readFromManifest=function(){var e,t,n,r,o,i,a;for(o=2<=arguments.length?f.call(arguments,0,t=arguments.length-1):(t=0,[]),e=arguments[t++],a=this._loadManifest(),n=0,i=o.length;i>n;n++)r=o[n],a=a.get(r);return a.then(function(t){return c.isUndefined(t)?e:t})},e.prototype.getName=function(){return this.readFromManifest("name","").catch(a.UnableToLoadManifest,function(e){return function(){return e.name}}(this))},e.prototype.getDescription=function(){return this.readFromManifest("description","")},e.prototype.getDetails=function(){return this.readFromManifest("details","")},e.prototype.getImages=function(){return this.readFromManifest("images",[])},e.prototype.getRecommend=function(){return this.readFromManifest("recommend",{})},e.prototype.getIconUrl=function(){return this.readFromManifest("icon","url",null)},e.prototype._loadManifest=function(){return null!=this._manifest?this._manifest:this._manifest=s.try(function(e){return function(){return new s(function(t,n){return r.ajax({url:e.manifestUrl,dataType:"json",timeout:1e4}).done(t).fail(function(t,r){return"undefined"!=typeof console&&null!==console&&console.error("Unable to load manifest. Error="+r+" Url="+e.manifestUrl),n(a.UnableToLoadManifest())})})}}(this)).then(function(e){return function(t){return h(m(e.manifestUrl),t)}}(this))},e.prototype._getIo=function(){return null!=this._io?this._io:this._io=this.readFromManifest("connectors","iframe","url",null).then(function(e){return function(t){return new o(t,e.handlers)}}(this))},e.prototype.request=function(e,t,n){return new s(function(e){return u.onVisible(e)}).then(function(r){return function(){return r._getIo().call("request",e,t,n).catch(o.Error.NotHandled,function(){throw a.NotHandled()}).catch(o.Error.Timeout,function(e){throw a.Timeout(e.message)})}}(this))},e.prototype.supports=function(e){return this.readFromManifest("capabilities",[]).then(function(t){return g.call(t,e)>=0}).catch(a.UnableToLoadManifest,function(){return!1})},e.prototype.canReadManifest=function(){return this._loadManifest().then(function(){return!0}).catch(a.UnableToLoadManifest,function(){return!1})},e.prototype.drop=function(){return this._getIo().then(function(e){return null!=e?e.drop():void 0})},e}()},{}],533:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("underscore"),i=e(105),r=i("PluginModelSerializer",["InvalidField"]),a=function(e,t,n){if(o.any(n,function(e){return k.call(t,e)<0}))throw r.InvalidField();return o.pick(e,n)},s=function(e,t,n,i){return null==i&&(i={}),o.isEqual(["all"],o.values(n))&&(n=t),o.chain(n).map(function(n){var o;if(k.call(t,n)<0)throw r.InvalidField();return o=null!=i[n]?i[n](e,n):e.get(n),[n,o]}).object().value()},w=function(e,t){return null==t&&(t=["bytes","height","scaled","url","width"]),a(e,["bytes","height","scaled","url","width"],t)},_=function(e,t){return e.map(o.partial(w,o,t))},u=function(e,t){return null==t&&(t=["id","url","name","edgeColor","previews"]),s(e,["id","url","name","edgeColor","previews"],t,{previews:function(){var t;return _(null!=(t=e.get("previews"))?t:[])}})},c=function(e,t){return e.map(o.partial(u,o,t))},l=function(e,t){var n;return null==t&&(t=["id","name"]),n=["id","name","url","shortLink","members","dateLastActivity","idOrganization"],
s(e,n,t,{members:function(){return b(e.memberList,["all"])}})},y=function(e,t){return null==t&&(t=["id"]),s(e,["id","name"],t)},d=function(e,t){var n;return null==t&&(t=["id","name"]),n=["attachments","badges","closed","cover","dateLastActivity","desc","due","dueComplete","id","idList","idShort","labels","members","name","shortLink","url"],s(e,n,t,{attachments:function(){return c(e.attachmentList)},cover:function(){var t,n;return null!=(n=e.get("idAttachmentCover"))&&null!=(t=e.attachmentList.get(n))?u(t):null},labels:function(){return m(e.labelList)},members:function(){return b(e.memberList,["all"])}})},p=function(e,t){return null==t&&(t=["id","name"]),e.map(o.partial(d,o,t))},h=function(e,t){return null==t&&(t=["name","color"]),s(e,["name","color"],t)},m=function(e,t){return e.map(o.partial(h,o,t))},f=function(e,t){return null==t&&(t=["id","name"]),s(e,["id","name","cards"],t,{cards:function(){return p(e.cardList.models,["all"])}})},g=function(e,t){return null==t&&(t=["id","name"]),e.map(o.partial(f,o,t))},v=function(e,t){return null==t&&(t=["id","fullName","username"]),s(e,["id","fullName","username","initials","avatar"],t,{avatar:function(){var t;return t=e.get("avatarHash"),t?[window.avatarDomain,t,"170.png"].join("/"):null}})},b=function(e,t){return e.map(o.partial(v,o,t))},t.exports={Error:r,attachment:u,attachments:c,board:l,card:d,cards:p,list:f,lists:g,member:v,organization:y}},{}],534:[function(e,t,n){var r;r=e("xtend"),t.exports=function(e){return r(e,{locale:window.locale})}},{}],535:[function(e,t,n){var r,o,i;r=e(127),o=e(534),i=e("xtend"),t.exports=function(e,t){return r(e,function(e){var n,r,a;return null!=e&&null!=(a=e._callback)?(n=function(e,n){return function(r){return null==r&&(r={}),t(i(r,{command:"callback",options:{action:n,callback:e,options:o(r.options)}}))}},r=n(a,"run"),r.retain=n(a,"retain"),r.release=n(a,"release"),r):void 0})}},{}],536:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S;f=e("underscore"),r=e(35),k=e(105),a=e(39),s=e(40),u=e(214),l=e(532),d=e(531),c=e(529),C=e(534),x=e(535),m=e("bluebird"),S=e("xtend"),h=k("PluginRunner",["NotHandled","InvalidPlugin","Timeout"]),o=5e3,i=1e4,g={},w=function(e){return null==g[e]&&(g[e]=s.loadBoardEnabledPlugins(e),g[e].delay(i).then(function(){return delete g[e]})),g[e]},_=function(e,t){return m.try(function(){var n,r;if(t instanceof u)return t;if(!f.isString(t))throw h.InvalidPlugin("invalid plugin specifier");if(r=t,null!=(n=a.get("Plugin",r)))return n;if(null==e)throw h.InvalidPlugin("unable to find plugin");return w(e.id).then(function(){if(null!=(n=a.get("Plugin",r)))return n;throw h.InvalidPlugin("plugin not available to board")})})},y=function(e){var t,n,r;return r=e.plugins,n=e.plugin,t=e.board,r=null!=r?r:null!=n?[n]:null!=t?t.idPluginsEnabled():[],m.map(r,function(e){return function(e){return _(t,e)}}(this))},b=function(e){var t,n,o,i,a,s;return t={member:r.me(),permissions:{board:(null!=e&&null!=(i=e.board)?i.editable():void 0)?"write":"read"}},null!=(n=null!=e&&null!=(a=e.board)?a.hasOrganization():void 0)&&(t.organization=n),null!=(o=null!=e&&null!=(s=e.board)?s.getOrganization():void 0)&&(t.permissions.organization=(null!=o?o.hasActiveMembership(r.me()):void 0)?"write":"read"),null!=e.card&&(t.permissions.card=e.card.editable()?"write":"read"),S(t,f.pick(e,["board","card","command","el","options"]))},v=function(e){var t;return t=e.options},j=function(e){if(0===e.length)throw h.NotHandled("no plugin handles this command");return e[0]},p=function(){function e(){}return e.prototype.Error=h,e.prototype.processCallbacks=function(e,t,n){return x(e,function(e){return function(r){var o;return o=S(n,r),e._run([t],b(o),v(o)).then(j).catch(h.NotHandled,function(e){throw h.NotHandled("attempt to run callback on plugin "+t.plugin.id+" ("+t.io.name+") failed")})}}(this))},e.prototype._run=function(e,t,n,r){var i,a,s,u;return null==r&&(r=o),s=t.command,i=t.board,a=t.card,u=t.member,m.using(c.serialize(t),function(t){return function(o){return m.filter(e,function(e){var t;return t=e.io,t.supports(s)}).map(function(e){var c,d,p;return p=e.plugin,d=e.io,c=S(n,{context:o}),d.request(s,C(c),r).then(function(n){return{response:t.processCallbacks(n,e,{board:i,card:a,member:u}),idPlugin:p.id}}).catch(l.Error.NotHandled,l.Error.Timeout,function(){return null})}).filter(function(e){return null!=e}).map(function(e){var t,n;return n=e.response,t=e.idPlugin,Array.isArray(n)&&n.every(f.isObject)?f.map(n,function(e){return S(e,{idPlugin:t})}):f.isObject(n)?S(n,{idPlugin:t}):n})}}(this))},e.prototype._runFromOptions=function(e){var t,n,r;return r=y(e),n=b(e),t=v(e),m.resolve(r).map(function(e){return{plugin:e,io:d.get(e)}}).then(function(r){return function(o){return r._run(o,n,t,e.timeout)}}(this))},e.prototype.all=function(e){return this._runFromOptions(e).then(f.flatten)},e.prototype.one=function(e){return this._runFromOptions(e).then(j)},e}(),t.exports=new p},{}],537:[function(e,t,n){var r,o,i,a,s,u;i=e("underscore"),r=e(35),a=e(126),o=e("hearsay"),u={},s=function(e,t){var n,s,u;return u=e.snoopIdPluginsEnabled().map(function(n){var a;return 0===n.length?o.const({}):(a=n.map(function(n){return t?o.combine(r.me().snoopPluginData(n),e.snoopPluginData(n),t.snoopPluginData(n)):o.combine(r.me().snoopPluginData(n),e.snoopPluginData(n))}),o.combine.apply(o,a).map(function(e){return i.object(n,e)}))}).latest(),s=u.distinct(i.isEqual),n=a(s),n.use(),n},t.exports=function(e,t){var n,r;return t?null!=u[n=e.id+t.cid]?u[n]:u[n]=s(e,t):null!=u[r=e.id]?u[r]:u[r]=s(e)}},{}],538:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e("react"),i=e(541)(""),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=i.renderable(function(){var e;return e=this.props.items,i.ul(".pop-over-list",function(){return e.forEach(function(e){return i.li({onClick:e.onClick},function(){return i.addElement(e.content)})})})}),t}(o.Component),t.exports=r},{}],539:[function(e,t,n){var r,o;r=e(118),o=r.getRaw("powerUpPreviewUrl"),t.exports=null!=o?{id:"55a5d917446f51777421000d",url:o}:{}},{}],540:[function(e,t,n){var r,o,i,a,s,u;r=e("react-dnd-html5-backend"),o=e(569),i=e("react"),u=e(526),a=e("react-dnd"),s=i.createClass({displayName:"ReactRootComponent",render:function(){return i.createElement("div",{className:"js-react-root",onClick:this.dismissPopover},this.props.children)},dismissPopover:function(e){e.isDefaultPrevented()||u(e)}}),t.exports=a.DragDropContext(r)(s)},{}],541:[function(e,t,n){var r,o,i,a,s,u,c=[].slice;r=e(7),u=e(545),s=e(141),a=e("recup"),i=e(264),o=e("underscore"),t.exports=u(i(a,{b:function(){var e,t,n,r,o,i;if(o=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],i=this.normalizeArgs(e),t=i.attrs,n=i.contents,null!=t.href)throw Error("Can't specify an href on a `b` tag");if(t.href="#",null!=t.onClick)throw Error("onClick must be a positional argument to `b`");return r=t.disabled,t.onClick=function(e){return e.preventDefault(),r?void 0:o(e.currentTarget)},this.a(t,n)},link:function(){var e,t,n,o,i,a;if(a=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],i=this.normalizeArgs(e),t=i.attrs,n=i.contents,null!=t.href)throw Error("Can't specify an href on a `link` tag");return t.href=a,o=t.onClick,t.onClick=function(e){s(e)&&(e.preventDefault(),"function"==typeof o&&o(),r.navigate(a,{trigger:!0}))},this.a(t,n)},radio:function(e,t,n,r){var i,a;return a=function(i){var a;i.target.checked&&(a={},a[t]=n,e.setState(a),o.isFunction(r)&&r())},i=o.isEqual(e.state[t],n),this.input({type:"radio",name:t,value:n,checked:i,onChange:a})},statelessRenderable:function(e,t){return o.extend(this.renderable(t,{displayName:e}))}}))},{}],542:[function(e,t,n){var r,o;o=function(){function e(){this.viewsToBeRemoved=[]}return e.prototype.enqueue=function(e){var t,n,r,o;for(r=[],t=0,n=e.length;n>t;t++)o=e[t],o.$el.detach(),r.push(this.viewsToBeRemoved.push(o));return r},e.prototype.processQueue=function(){var e,t,n,r;for(n=Date.now(),e=0,t=[];Date.now()-n<10&&this.viewsToBeRemoved.length>0;)r=this.viewsToBeRemoved.shift(),r.remove(),t.push(e++);return t},e}(),t.exports=r=new o,setInterval(function(){return r.processQueue()},10)},{}],543:[function(e,t,n){var r,o;o=e(51),t.exports=r=function(){function e(){}return e.prototype.switchSection=function(e){return this.$(".js-content").addClass("hide").detach(),this.$(".js-loading-page").removeClass("hide"),this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e.target).addClass("active"),o(this.model.typeName+" View","Tab Navigation","Open "+this.$(e.target)[0].getAttribute("data-tab")+" Page")},e}()},{}],544:[function(e,t,n){var r,o;o=e(545),r=e(75),t.exports=o(r)},{}],545:[function(e,t,n){var r,o,i,a,s,u,c,l={}.hasOwnProperty,d=[].slice;r=e("underscore"),o=e(80),i=e(104),s=e(264),c=e("xtend"),u=function(e){var t,n;return r.object(function(){var r;r=[];for(t in e)l.call(e,t)&&(n=e[t],r.push([t,n.toString()]));return r}())},a={format:function(){this.raw(this.l.apply(this,arguments))},formatText:function(){return this.text(this.l.apply(this,arguments))},classify:function(e){var t,n;return function(){var r;r=[];for(t in e)n=e[t],n&&r.push(t);return r}().join(" ")},urlify:function(e){return e=e.replace("'","\\'").replace('"','\\"').replace("(","\\(").replace(")","\\)"),"url('"+e+"')"},stylify:function(e){var t,n;return function(){var r;r=[];for(t in e)n=e[t],n&&r.push(t+": "+n+";");return r}().join("")},optionSelected:function(e,t,n){return e&&(t=r.extend({selected:"selected"},t)),this.option(t,n)},check:function(e,t){this.format(t),this.text(" "),e&&(this.icon("check"),this.text(" "))},icon:function(e,t,n){var r,o,i;null==n&&(n={}),"object"==typeof t&&(n=t,t=void 0),r=null!=(i=n.class)?i:"",o=c(n,{class:("icon-sm icon-"+e+" "+r).trim()}),this.span(o),null!=t&&(this.raw("&nbsp;"),this.format(t))}},t.exports=function(e){var t;return t=s(e,a),function(e){return s(t,{l:function(t,n,r){return t=o.normalizeKeyPath(t),i(["templates",e].concat(d.call(t)),u(n),r)}})}}},{}],546:[function(e,t,n){var r,o,i,a,s;r=e(35),a=e(544)(),s=e(848),o=e("underscore"),i={mustacheRenderWithHelpers:function(e,t,n,i){var s;return null==n&&(n={}),null==i&&(i={}),s=o.extend({__ed:n.editable,__own:n.owned,__loggedIn:r.isLoggedIn(),__siteDomain:siteDomain,__avatarDomain:avatarDomain,__logoDomain:logoDomain},t),a.mustacheRender(e,s,i)},mustacheRenderModel:function(e,t,n,r){var a;return null==r&&(r={}),a={editable:"function"==typeof t.editable?t.editable():void 0,owned:"function"==typeof t.owned?t.owned():void 0},n=o.extend(t.toJSON(),n),i.mustacheRenderWithHelpers(e,n,a,r)},fill:function(e,t,n,r){var o;if(null==t&&(t={}),null==n&&(n={}),null==r&&(r={}),o=s[e],null==o)throw new Error("Could not find template "+e+"!");return i.mustacheRenderWithHelpers(o,t,n,r)},fillFromModel:function(e,t,n,r){var o;if(null==n&&(n={}),null==r&&(r={}),o=s[e],null==o)throw new Error("Could not find template "+e+"!");return i.mustacheRenderModel(o,t,n,r)},fillMenu:function(e,t,n){return i.fill("menu_base",{content:this.fill(e,t,n)})}},t.exports=e(264)(s,i)},{}],547:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=[].slice;r=e("jquery"),o=e(82),i=e(100),a=e(22),s=e(120),c=e(133),l=e("underscore"),m=e(48),g=e(51),f=e(520),h=f.getTypes,p=f.getPasted,v=e(129),d=e(245),t.exports=u=new(function(){function e(){var e,t,n,o;for(this._handlers={},this.clear(),o=["keydown","keypress","paste"],t=0,n=o.length;n>t;t++)e=o[t],r(document).bind(e,this[e].bind(this));s.on("pasteImage",function(e){return function(t){return e.triggerPasted("files",[t])}}(this))}var t;return e.prototype.precedence={global:0,default:1,header:2,board:3,board_sidebar:3,list:4,card:5,search_box:6,dialog:10,dialog_view:12,plugin_modal:20,popover:30,popover_view:32,attachment_viewer:100,quick_card_editor:100},e.prototype._isKeyEligible=function(e){var t;return t=i.getKey(e),!(o.isTouch()||t===a.Unknown||t!==a.Escape&&r(e.target).is("input:visible,textarea:visible,select:visible")||e.ctrlKey||e.altKey||e.metaKey)},e.prototype.addHandler=function(e,t){var n,r,o,i;return i=t.scope,o=t.precedence,r=t.modal,null==o&&(o=this.precedence[i]),null==o&&(m("userinput","Missing precedence for "+i),o=this.precedence.default),null==r&&(r=!1),null==(n=this._handlers)[i]&&(n[i]={}),this._handlers[i]={target:e,scope:i,precedence:o,modal:r},m("userinput","Adding handler for "+i)},e.prototype.removeHandlerScope=function(e){var t,n;t=[];for(n in this._handlers)n===e&&(m("userinput","Removing handlers for "+n),t.push(delete this._handlers[n]));return t},e.prototype.removeHandler=function(e){var t,n,r,o;n=this._handlers,r=[];for(o in n)t=n[o].target,e===t&&(m("userinput","Removing handler for "+o),r.push(delete this._handlers[o]));return r},e.prototype.clear=function(){var e,t;m("userinput","Removing all non-global handlers"),e=[];for(t in this._handlers)"global"!==t&&(m("userinput","Removing handler for "+t),e.push(delete this._handlers[t]));return e},t=function(e,t){var n,r,o,i;for(i=[],n=0,o=e.length;o>n&&(r=e[n],i.push(r),!t(r));n++);return i},e.prototype._sortedHandlers=function(){var e;return e=l.sortBy(l.values(this._handlers),function(e){return-e.precedence}),t(e,d.get("modal"))},e.prototype._triggerOnTargets=function(){var e,t,n,r,o,i,a;for(t=arguments[0],e=2<=arguments.length?b.call(arguments,1):[],i=this._sortedHandlers(),r=0,o=i.length;o>r;r++)if(a=i[r].target,n=null!=(null!=a?a[t]:void 0)?a[t].apply(a,e):null!=(null!=a?a.triggerHandler:void 0)?a.triggerHandler(t,e):void 0)return(l.isString(n)||l.isArray(n))&&this._track(n),!0;return!1},e.prototype.keydown=function(e){var t;t=i.getKey(e),t===a.Escape&&c.stop(e),this._isKeyEligible(e)&&this._triggerOnTargets("shortcut",t,e)&&c.stop(e)},e.prototype.keypress=function(e){var t;t=i.getKey(e),this._isKeyEligible(e)&&this._triggerOnTargets("shortcut",t,e)&&c.stop(e)},e.prototype.paste=function(e){p(e.originalEvent).then(function(t){return function(n){var r,o,i,a,u;if(!l.isEmpty(n)&&(!n.text&&!n.url||"INPUT"!==(i=e.target.tagName)&&"TEXTAREA"!==i||s.isClipboard(e.target)))for(a=["url","text","files"],r=0,o=a.length;o>r;r++)if(u=a[r],n[u]){t.triggerPasted(u,n[u]);break}}}(this))},e.prototype.triggerPasted=function(e,t){var n;return n=l.compact(this._sortedHandlers().map(function(e){var t;return null!=(t=e.target)?t.el:void 0})),v(n,"userinput-paste:"+e,{detail:t})},e.prototype._track=function(e){return null!=e?(l.isArray(e)||(e=[e]),g.apply(null,["Keyboard Shortcuts"].concat(b.call(e)))):void 0},e}())},{}],548:[function(e,t,n){var r,o,i;r=e(157),o=e(40),t.exports=i=function(){function e(){}return e.prototype.limit=50,e.prototype.nextPage=1,e.prototype.shortLoad=!1,e.prototype.loading=!1,e.prototype.idModels=null,e.prototype.loadMoreActions=function(){return this.loading?void 0:(this.loading=!0,this.waitForId(this.model,function(e){return function(){var t;return o.loadMoreActionData(e.model.typeName.toLowerCase(),e.model.id,e.nextPage,e.limit,e.idModels,null!=(t="function"==typeof e.getActionsFilter?e.getActionsFilter():void 0)?t:"all").finally(function(){return e.loading=!1}).then(function(t){return e.shortLoad=t.length<e.limit,e.renderActions(),++e.nextPage}).done()}}(this)))},e.prototype.hasMoreActions=function(){return!this.loading&&!this.shortLoad&&this.getActions().length>=this.limit},e.prototype.getActions=function(){var e,t,n;return e=null!=(t="function"==typeof this.getFilteringModels?this.getFilteringModels():void 0)?t:[],(n=this.model).getActions.apply(n,e)},e}()},{}],549:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty,y=[].slice;r=e("jquery"),o=e(241),i=e(86),a=e("hearsay"),u=e(115),l=e(547),h=e("underscore"),g=e(109),m=e(104),f=e(46),s=e("bluebird"),c=e(542),d={NONE:0,SOME:1,LOTS:2},t.exports=g(i,u,p=function(e){function t(e){this._subviews={},this.modelCache=null!=e?e.modelCache:void 0,this.handleDOMRemove=function(e){return function(){return e._delegated=!1}}(this),t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype._rendered=!1,t.VIGOR=d,t.prototype.vigor=d.LOTS,t.prototype.render=function(){var e;if(e=1<=arguments.length?y.call(arguments,0):[],null==this.renderOnce)return this;if(this._rendered)switch(this.vigor){case d.NONE:return this;case d.SOME:return f(Error("rendered more than once: "+this.constructor.name)),this;default:throw Error("You cannot render me more than once!")}return this._rendered=!0,this.renderOnce.apply(this,e),this},t.prototype.getViewTitle=function(){var e,t,n;return null==this.viewTitleKey?"":(t=h.result(this,"viewTitleKey"),e=null!=(n=h.result(this,"viewTitleArguments"))?n:{},m(["view title",t],e))},t.prototype.subview=function(e,t,n,r){return null==n&&(n={}),null==r&&(r=e.prototype.uniqueId()+"_"+t.cid),r in this._subviews||(this._subviews[r]=new e(h.extend({model:t,modelCache:this.modelCache},n))),this._subviews[r]},t.prototype.existingSubview=function(e,t,n){if(null==n&&(n=e.prototype.uniqueId()+"_"+t.cid),!(n in this._subviews))throw new Error("existingSubview called before subview was created");return this._subviews[n]},t.prototype.existingSubviewOrUndefined=function(e,t,n){return null==n&&(n=e.prototype.uniqueId()+"_"+t.cid),this._subviews[n]},t.prototype.collectionSubview=function(e,t,n,r){var o,i;return null==n&&(n={}),null==r&&(r=e.prototype.uniqueId()),i=null!=(o=this._subviews)[r]?o[r]:o[r]=new e(h.extend({collection:t,modelCache:this.modelCache},n)),null!=n.el&&i.el!==n.el&&i.setElement(n.el),i},t.prototype.subviewsOfType=function(e){var t,n,r,o;n=this._subviews,r=[];for(t in n)b.call(n,t)&&(o=n[t],o instanceof e&&r.push(o));return r},t.prototype.deleteSubview=function(e,t){if(null==t&&(t=e.constructor.prototype.uniqueId()+"_"+e.model.cid),e!==this._subviews[t])throw new Error("incorrect key for subview in deleteSubview");return e.remove(),delete this._subviews[t]},t.prototype.removeSubviews=function(){var e;e=h.values(this._subviews),this._subviews={},c.enqueue(e)},t.prototype.deleteSubviewsOfType=function(e){var t,n,r,o;for(r=this.subviewsOfType(e),t=0,n=r.length;n>t;t++)o=r[t],this.deleteSubview(o)},t.prototype.remove=function(){return this.unsubscribe(),this.stopUsing(),this.removeSubviews(),this.cancelScheduled(),l.removeHandler(this),t.__super__.remove.apply(this,arguments)},t.prototype.frameDebounce=function(e,t){var n;return null==t&&(t=this),n=!1,function(){n||(n=!0,this.requestAnimationFrame(function(){n=!1,e.call(t)}))}},t.prototype.makeDebouncedMethods=function(){var e,t,n,r;for(r=1<=arguments.length?y.call(arguments,0):[],e=0,t=r.length;t>e;e++)n=r[e],this[n+"Debounced"]=this.frameDebounce(this[n])},t.prototype.delegateEvents=function(){var e,n,r;if(!this._delegated){this.$el.on("remove",this.handleDOMRemove),t.__super__.delegateEvents.apply(this,arguments),n=this._subviews;for(e in n)r=n[e],r.delegateEvents();this._delegated=!0}},t.prototype.undelegateEvents=function(){var e,n,r;if(this._delegated){this.$el.off("remove",this.handleDOMRemove),t.__super__.undelegateEvents.apply(this,arguments),n=this._subviews;for(e in n)r=n[e],r.undelegateEvents();this._delegated=!1}},t.prototype.appendSubview=function(e,t){return this.appendSubviews([e],t)},t.prototype.appendSubviews=function(e,t){var n,r,o;for(null==t&&(t=this.$el),n=0,r=e.length;r>n;n++)o=e[n],o.delegateEvents();return t.append(function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)o=e[t],r.push(o.render().el);return r}())},t.prototype.ensureSubview=function(e,t){return this.ensureSubviews([e],t)},t.prototype.ensureSubviews=function(e,t){var n,o,i,a,s,u,c,l,d,p,m,f,g,v,b;for(null==t&&(t=this.$el),o=t[0],i=h.clone(o.childNodes),u=s=0,p=i.length;p>s;u=++s)if(n=i[u],!h.find(e,function(e){return e.el===n})){a=!1,g=this._subviews;for(d in g)b=g[d],b.el!==n||a||(this.deleteSubview(b,d),a=!0);if(!a)throw new Error("Could not find view associated with element to remove")}for(c=0,m=e.length;m>c;c++)v=e[c],h.find(i,function(e){return v.el===e})||(v.delegateEvents(),v.render());for(u=l=0,f=e.length;f>l;u=++l)v=e[u],v.el!==o.childNodes[u]&&(0===u?r(o).prepend(v.el):r(e[u-1].el).after(v.el))},t.prototype.uniqueId=function(){return this.hasOwnProperty("_uniqueId")||(this._uniqueId=h.uniqueId("view")),this._uniqueId},t}(o.View)),h.extend(p.prototype,a.mixin)},{}],550:[function(e,t,n){var r,o,i,a;r=e(559),o=e(35),i=e("underscore"),a=function(e){var t,n,i,a;return t=o.me().isFeatureEnabled("largeAttachments"),i=e.getOrganization(),a=null!=i&&i.isFeatureEnabled("largeAttachments"),n=t||a?"file size exceeds 250mb":"file size exceeds 10mb",r.show(n,"error","upload",5e3)},t.exports=function(e,t){var n,r,s;for(i.isArray(t)||(t=[t]),r=0,s=t.length;s>r;r++)if(n=t[r],!o.me().canUploadAttachment(n))return a(e),!0;return!1}},{}],551:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),o=e(221),i=e(222),s=e(133),u=e(549),c=e(51),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype._secretUrl=function(){return this.model.url()+"/invitationSecret"},t.prototype.showInvitationLink=function(e){return this.$(".js-show-invitation-link").addClass("hide"),this.$(".js-invitation-link-container").removeClass("hide"),i({method:"post",url:this._secretUrl()}).get("secret").then(function(e){return function(t){var n;return n=e.model.get("url").replace(/(\/b\/[^\/]+|\/[^\/]+$)(.*)$/,"/invite$1/"+t+"$2"),e.$(".js-invitation-link").val(n).focus().select()}}(this)).done()},t.prototype.clickInvitationLink=function(e){return r(".js-invitation-link").select()},t.prototype.deactivateInvitationLink=function(e){return this.$(".js-show-invitation-link").removeClass("hide"),this.$(".js-invitation-link-container").addClass("hide"),this.$(".js-invitation-link").val(""),i({method:"delete",url:this._secretUrl()}).done()},t.prototype.copyInvitationLink=function(e){return r(".js-invitation-link").select(),document.execCommand("copy")},t}(u)},{}],552:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;o=e(221),i=e(35),a=e(82),f=e(104),u=e(100),g=e(103),c=e(40),l=e(570),d=e("bluebird"),b=e(544)("invitation_link"),p=e(133),h=e(549),w=e("xtend"),m=e("underscore"),r=e("jquery"),v=function(e){return/^\*@[^\*]+$/.test(e)?e.replace(/^\*@/,""):null},y=b.renderable(function(e){var t,n,r,o,i,a,s,u,c,l,d,p;i=e.isLoggedIn,o=e.isConfirmed,a=e.isValidEmail,l=e.returnUrl,r=e.inviter,s=e.name,c=e.requiredDomain,n=e.firstDomain,t=e.emailRestrictions,u=e.pendingEmail,p=e.willJoinOnConfirm,d=e.transferUrl,b.div(".invitation-link-description",function(){return b.format("youve-been-invited",{inviterName:r.fullName,name:s})}),u?b.p(".invitation-link-explanation",function(){return b.format("waiting-for-you-to-click-on-the-link-we-sent-to-email",{email:u})}):i?a?o?b.div(".invitation-link-options",function(){return b.button(".button.primary.js-join",function(){return b.format("join")})}):(b.p(".invitation-link-explanation.js-you-need-to-confirm",function(){return b.format("before-you-can-join-you-ll-need-to-confirm-your-email-address")}),p||(b.p(".invitation-link-explanation.js-will-join-on-confirm.hide",function(){return b.format("youll-be-added-as-soon-as-you-confirm-your-email")}),b.div(".invitation-link-options",function(){return b.button(".button.primary.js-join-on-confirm",function(){return b.format("join-after-i-confirm-my-email")})}))):(c?(b.p(".invitation-link-explanation",function(){return b.format("to-join-this-team-you-need-to-confirm-an-email-from-domain",{domain:c})}),b.h2(".add-email-to-your-account-heading",function(){return b.format("add-email-to-your-account")}),b.div(".invitation-link-add-email",function(){return b.input(".invitation-link-add-email-prefix.js-email-prefix-to-add",{placeholder:b.l("yourname"),"data-domain":c}),b.span(".invitation-link-add-email-domain",function(){return b.text("@"+c)})})):(b.p(".invitation-link-explanation",function(){return b.format("to-join-this-team-you-need-to-confirm-an-email-matching-one-of-the-following")}),b.ul(function(){var e,n,r,o;for(o=[],e=0,n=t.length;n>e;e++)r=t[e],o.push(b.li(function(){return b.text(r)}));return o}),b.h2(".add-email-to-your-account-heading",function(){return b.format("add-email-to-your-account")}),b.div(".invitation-link-add-email",function(){var e;return e=n?b.l("yourname-at-domain",{domain:n}):void 0,b.input(".invitation-link-add-email.js-email-to-add",{placeholder:e})})),b.div(".invitation-link-options",function(){return b.div(function(){return b.a(".button.primary.js-add-email",{href:"#"},function(){return b.format("add-email")})}),b.div(".invitation-link-switch-accounts",function(){return b.a(".quiet",{href:"/login?reauthenticate=1&returnUrl="+encodeURIComponent(l)},function(){return b.format("switch-accounts")})})})):(b.p(".invitation-link-explanation",function(){return b.format("before-you-can-join-you-ll-need-a-trello-account")}),(c||t.length>0)&&(c?b.p(function(){return b.format("note-this-team-requires-you-log-in-with-an-email-from-domain",{domain:c})}):(b.p(function(){return b.format("note-this-team-requires-you-log-in-with-an-email-matching-one-of-the-following")}),b.ul(function(){var e,n,r,o;for(o=[],e=0,n=t.length;n>e;e++)r=t[e],o.push(b.li(function(){return b.text(r)}));return o}))),b.div(".invitation-link-options",function(){return b.button(".button.primary.js-signup",function(){return b.format("sign-up")}),b.button(".button.js-login",function(){return b.format("log-in")})}),b.div(".invitation-link-options-learn-more",function(){return b.a(".quiet",{href:"/tour",target:"tour"},function(){return b.format("learn-more-about-trello")})})),b.p(".error.js-deactivated.hide",function(){return b.format("unfortunately-this-invitation-link-has-been-deactivated")}),b.p(".error.js-only-team-members.hide",function(){return b.format("only-team-members-can-join-this-board")}),b.div(".error.js-must-join-enterprise.hide",function(){return b.p(function(){return b.format("before-you-can-join-this-team-you-must-join-the-enterprise-it-belongs-to")}),b.p(function(){return b.a(".button.primary",{href:d},function(){return b.format("transfer-account")})})}),b.p(".error.js-error.hide",function(){})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.className="invitation-link",t.prototype.events={"click .js-join":function(e){return this._disableJoin(),this.fxJoin().catch(o.NotFound,function(e){return function(t){return e.$(".js-deactivated").removeClass("hide")}}(this)).catch(o.Other,function(e){return function(t){if(/organization restricts invites/.test(t.message))return e.$(".js-only-team-members").removeClass("hide");throw t}}(this)).catch(o.Conflict,function(e){return function(t){return e.$(".js-must-join-enterprise").removeClass("hide")}}(this)).catch(o,function(e){return function(t){var n;return n=g(t),e.$(".js-error").text(n).removeClass("hide")}}(this)).done()},"click .js-add-email":function(e){var t;return this.$(".js-email-to-add,.js-email-prefix-to-add").prop("disabled",!0),this.$(".js-add-email").prop("disabled",!0).addClass("disabled"),t=this._getEmail(),this.model.run("logins",{email:t},function(e){return function(n){e.pendingEmail=t,e.render()}}(this))},"input .js-email-to-add":"updateButton","input .js-email-prefix-to-add":"updateButton","keydown .js-email-prefix-to-add,.js-email-to-add":function(e){return u.isSubmitEvent(e)?this.$(".js-add-email:not(:disabled)").click():void 0},"click .js-join-on-confirm":function(e){return this._queueAutoJoin(),this.$(".js-join-on-confirm,.js-you-need-to-confirm").addClass("hide"),this.$(".js-will-join-on-confirm").removeClass("hide")},"click .js-signup":function(e){var t,n,o;return this._queueAutoJoin(),t=this._requiredDomain(),o=t?b.l("yourname-at-domain",{domain:t}):"",n="/signup?"+r.param({returnUrl:a.isEmbeddedDocument()?"/embed/signup":this._returnUrl(),confirmReturnUrl:this._returnUrl(),email:o}),a.isEmbeddedDocument()?new l(n).open():window.location=n},"click .js-login":function(e){var t,n;return this._queueAutoJoin(),n=a.isEmbeddedDocument()?"/embed/login":this._returnUrl(),t="/login?"+r.param({returnUrl:n}),a.isEmbeddedDocument()?new l(t).open():window.location=t}},t.prototype._disableJoin=function(){return this.$(".js-join").addClass("disabled").prop("disabled",!0)},t.prototype.initialize=function(e){var t;return this.fxJoin=e.fxJoin,this.fxQueueJoin=e.fxQueueJoin,this.inviter=e.inviter,this.name=e.name,this.emailRestrictions=e.emailRestrictions,this.transferUrl=e.transferUrl,this.willJoinOnConfirm=e.willJoinOnConfirm,null!=(t=i.me())?this.listenTo(t,"change:confirmed change:logins",function(e){return function(){return e.$(".js-join").addClass("disabled"),setTimeout(function(){return window.location.reload()},1e3)}}(this)):void 0},t.prototype.updateButton=function(){var e;return e=this._isValidEmail(this._getEmail()),this.$(".js-add-email").prop("disabled",!e).toggleClass("disabled",!e)},t.prototype._queueAutoJoin=function(){return this.fxQueueJoin()},t.prototype._getEmail=function(){var e,t;return e=this.$(".js-email-to-add"),t=this.$(".js-email-prefix-to-add"),e.length?e.val():t.length?t.val()+"@"+t.attr("data-domain"):void 0},t.prototype._isValidEmail=function(e){return 0===this.emailRestrictions.length?!0:m.any(this.emailRestrictions,function(t){return RegExp("^"+p.escapeForRegex(t).replace(/\\\*/g,"[^@]*")+"$").test(e)})},t.prototype._returnUrl=function(){return window.location.pathname},t.prototype._requiredDomain=function(){return 1===this.emailRestrictions.length&&v(this.emailRestrictions[0])},t.prototype.render=function(){var e,t,n,r,o,a;return o=i.me(),n=i.isLoggedIn(),t=null!=o?o.get("confirmed"):void 0,r=n&&m.chain(o.get("logins")).pluck("email").any(this._isValidEmail.bind(this)).value(),a=this._requiredDomain(),e=m.chain(this.emailRestrictions).map(v).compact().first().value(),this.$el.html(y({emailRestrictions:this.emailRestrictions,requiredDomain:a,firstDomain:e,inviter:this.inviter,name:this.name,isConfirmed:t,isLoggedIn:n,isValidEmail:r,pendingEmail:this.pendingEmail,returnUrl:this._returnUrl(),transferUrl:this.transferUrl,willJoinOnConfirm:this.willJoinOnConfirm})),this.updateButton(),this.defer(function(e){return function(){return e.$(".js-email-prefix-to-add,.js-email-to-add").focus().select()}}(this)),this},t}(h)},{}],553:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(558),i=e(569),a=e(549),s=e(51),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="labels",t.prototype.el=function(){return this.labelsView=this.subview(o,this.model,{board:this.model.getBoard(),selectLabel:this.toggleLabel.bind(this),renderOn:[{source:this.model.labelList,events:"add remove reset change"},{source:this.model,events:"change:labels, change:idLabels"}],popOverMethod:"pushView",searchInit:this.options.searchInit}),this.labelsView.render().el},t.prototype.toggleLabel=function(e){s(this.model.typeName,"Card Labels Menu","Change Label"),this.model.toggleLabel(this.modelCache.get("Label",e)),this.options.hideOnSelect&&i.popView()},t}(a)},{}],554:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){
for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(205),i=e(555),a=e(569),s=e(549),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="create label",t.prototype.el=function(){var e,t;return e=this.options.color,t=this.options.name,l.call(r.colors,t)>=0&&(e=t,t=""),new i({model:{name:t},submitTextKey:"create",color:e,onSubmit:function(e){return function(t,n){var r;return"function"==typeof(r=e.options).onSubmit&&r.onSubmit(t,n),a.popView()}}(this)}).render().el},t}(s)},{}],555:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(205),i=e(133),a=e(549),s=e("underscore"),c=e(546),u=e(104),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.tagName="form",t.prototype.className="edit-label",t.prototype.events={"click .js-palette-color":"pickColor","click .js-submit":"submit",submit:"submit"},t.prototype.initialize=function(e){return this.accessoryView=e.accessoryView,this.color=e.color,this.onSubmit=e.onSubmit,this.submitTextKey=e.submitTextKey,t.__super__.initialize.apply(this,arguments)},t.prototype.renderOnce=function(){var e,t,n;return t=function(){var t,n,o,i;for(o=r.colors.concat(null),i=[],t=0,n=o.length;n>t;t++)e=o[t],i.push({color:e,selected:e===this.color});return i}.call(this),n={label:{name:this.model.name},colors:t},n.submitText=u(this.submitTextKey),this.$el.html(c.fill("label_edit_component",n)),null!=this.accessoryView&&this.$(".js-accessory-view-holder").append(this.accessoryView.render().el),this},t.prototype.pickColor=function(e){var t;return i.stop(e),this.$(".js-palette-select").hide(),t=this.$(e.target).closest(".js-palette-color"),this.color=t.attr("data-color"),t.find(".js-palette-select").show()},t.prototype.submit=function(e){var t;return i.stop(e),t=this.$(".js-label-name").val().trim(),s.isEmpty(t)&&s.isEmpty(this.color)?void 0:this.onSubmit(t,s.isEmpty(this.color)?null:this.color)},t}(a)},{}],556:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(561),o=e(555),a=e(569),s=e(133),u=e(549),l=e(51),c=e(104),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return d(t,e),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.tagName="input",t.prototype.className="negate",t.prototype.attributes=function(){return{type:"submit",value:c("delete")}},t.prototype.events={click:function(e){return s.stop(e),this.options.onClick()}},t}(u),t.prototype.viewTitleKey="change label",t.prototype.el=function(){return new o({model:this.model.toJSON(),submitTextKey:"save",onSubmit:function(e){return function(t,n){var r;return e.model.update({color:n,name:t}),"function"==typeof(r=e.options).onSubmit&&r.onSubmit(),a.popView()}}(this),color:this.model.get("color"),accessoryView:new n({onClick:this.confirmDeleteLabel.bind(this)})}).render().el},t.prototype.confirmDeleteLabel=function(){return r.pushView("delete label",{model:this.model,confirmBtnClass:"negate",popOnClick:!0,popDepth:2,fxConfirm:function(e){return function(t){var n;return e.model.destroy(),"function"==typeof(n=e.options).onSubmit&&n.onSubmit(),l("Label","Delete")}}(this)})},t}(u)},{}],557:[function(e,t,n){var r,o,i,a;r=e(22),o=e(205),a=e("underscore"),t.exports=i=function(){function e(){}return e.keyboardIndex=[a.last(o.colors)].concat(a.initial(o.colors)),e.keyNumberForColor=function(e){var t;return t=this.keyboardIndex.indexOf(e),t>=0?""+t:null},e.colorForKey=function(e){var t;return t=e-r._0,this.keyboardIndex[t]},e.setLabelFromKey=function(e,t,n){var r,o;o=this.colorForKey(e),r=t.getBoard().labelsForColors()[o],1===(null!=r?r.length:void 0)?t.toggleLabelColor(o):"function"==typeof n&&n(o)},e}()},{}],558:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e("jquery"),o=e(35),i=e(100),a=e(22),s=e(205),u=e(554),c=e(556),l=e(557),p=e(569),h=e(133),m=e(549),f=e("underscore"),v=e(546),b=e(51),g=e(104),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return y(t,e),n=12,t.prototype.labelsToShow=n,t.prototype.events={"click .js-select-label":"clickLabel","click .js-toggle-color-blind-mode":"toggleColorBlindMode","click .js-edit-label":"clickEditLabel","click .js-add-label":"clickAddLabel","click .js-show-more":"showMore","input .js-label-search":"renderLabels","keyup .js-label-search":"keyUp","mouseover .card-label":"hoverLabel"},t.prototype.initialize=function(e){var n,r,i,a,s;for(this.selectLabel=e.selectLabel,this.board=e.board,this.modelCache=e.modelCache,this.renderOn=e.renderOn,this.popOverMethod=e.popOverMethod,this.searchInit=e.searchInit,this.makeDebouncedMethods("render","renderLabels"),this.listenTo(o.me(),{"change:prefs":this.renderDebounced}),this.listenTo(this.board.labelList,{"add remove reset change":this.renderLabelsDebounced}),a=null!=(i=this.renderOn)?i:[],n=0,r=a.length;r>n;n++)s=a[n],this.listenTo(s.source,s.events,this.renderLabelsDebounced);return this._keepVisible={},t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e,t,n,r;return t=this.board.labelColors(),n={editable:this.board.editable()},e={colors:t,isColorBlindEnabled:o.isLoggedIn()&&o.me().get("prefs").colorBlind,searchInit:null!=(r=this.searchInit)?r:""},this.searchInit=null,this.$el.html(v.fill("popover_change_labels",e,n)),this.renderLabels()},t.prototype.renderLabels=function(){var e,t,n,r,o,i,a,s,u,c,l;return i=this.board.labelsForColors(),r=this._filteredLabels(),e=f.map(r,function(e){return function(t){return e.model.dataForLabel(t)}}(this)),c=function(e){return function(t){return t.isActive||e._keepVisible[t.id]}}(this),o=e.length>this.labelsToShow?(n=e.filter(c),s=this.labelsToShow-n.length,f.chain(e).filter(function(e){return function(e){return c(e)||s-->0}}(this)).first(this.labelsToShow).value()):e,this.$(".js-show-more").toggleClass("hide",o.length===e.length),t={labels:o},a={editable:this.board.editable()},this.$(".js-labels-list").empty().append(v.fill("select_labels",t,a)),u=this._searchVal(),l=f.isEmpty(u)||r.length>0?g("create new label.unnamed"):g("create new label.named",{name:u}),this.$(".js-add-label").text(l),!f.isEmpty(u)&&r.length>0&&this.selectFirstLabelInList(),this},t.prototype.highlightElement=function(e){return h.selectMenuItem(this.$(".js-labels-list"),".card-label",e)},t.prototype.getHighlightedElement=function(){return this.$(".js-labels-list .card-label.selected").first()},t.prototype.selectFirstLabelInList=function(e){this.highlightElement(this.$(".js-labels-list .card-label").first())},t.prototype.toggleColorBlindMode=function(e){var t;t=o.me(),t.toggleColorBlindMode(),b(this.model.typeName,"Labels Menu","Toggle Color Blind Friendly Mode.")},t.prototype.clickEditLabel=function(e){var t,n;return h.stop(e),t=r(e.target).closest(".js-edit-label"),n=t.attr("data-idLabel"),this.editLabel(n)},t.prototype.selectLabelViaElem=function(e){var t;return t=e.attr("data-idLabel"),this._keepVisible[t]=!0,this.selectLabel(t)},t.prototype.clickLabel=function(e){var t;return h.stop(e),t=r(e.target).closest(".js-select-label"),this.selectLabelViaElem(t)},t.prototype.findElementForLabel=function(e){return this.$(".js-edit-label").filter(function(t){return function(t,n){return r(n).attr("data-idLabel")===e}}(this))},t.prototype.editLabel=function(e){var t,n;return t=this.findElementForLabel(e),n=this.modelCache.get("Label",e),p[this.popOverMethod]({elem:t,view:c,options:{model:n,board:this.board,modelCache:this.modelCache}})},t.prototype.clickAddLabel=function(e){var t;h.stop(e),t=this._searchVal(),p[this.popOverMethod]({elem:this.$(".js-add-label"),view:u,options:{board:this.board,name:t,color:this._nextColor(),onSubmit:function(e){return function(t,n){return e.model.createLabel(t,n),e.clearSearch()}}(this)}})},t.prototype.showMore=function(){return this.labelsToShow+=n,this.renderLabels()},t.prototype.hoverLabel=function(e){this.highlightElement(r(e.target).closest(".card-label"))},t.prototype.keyUp=function(e){var t,n,r;return n=i.getKey(e),n===a.ArrowUp||n===a.ArrowDown?(h.stop(e),void h.navMenuList(this.$(".js-labels-list"),".card-label",n)):n===a.Enter?(r=this._filteredLabels(),r.length>0?(t=this.getHighlightedElement(),t.length>0&&(this.selectLabelViaElem(t),this.clearSearch()),b(this.model.typeName,"Labels Menu","Add By Filter")):this.clickAddLabel()):void 0},t.prototype.clearSearch=function(){return this.$(".js-label-search").val(""),this.renderLabels()},t.prototype._nextColor=function(){var e,t;return t=f.chain(this.board.getLabels()).map(function(e){return e.get("color")}).uniq().value(),null!=(e=f.difference(s.colors,t)[0])?e:""},t.prototype._searchVal=function(){var e,t;return null!=(e=null!=(t=this.$(".js-label-search").val())?t.trim():void 0)?e:""},t.prototype._filteredLabels=function(){var e;return e=this._searchVal().toLowerCase(),f.chain(this.board.getLabels()).filter(function(t){var n,r;return f.isEmpty(e)||(null!=(n=t.get("name"))?n.toLowerCase().indexOf(e):void 0)>-1||0===(null!=(r=t.get("color"))?r.toLowerCase().indexOf(e):void 0)||t.get("color")===l.keyboardIndex[parseInt(e)]}).value()},t}(m)},{}],559:[function(e,t,n){var r,o,i,a,s,u,c=[].slice;r=e("jquery"),o=e("underscore"),a=e(48),s=e(231),u=e(546),i=e(104),t.exports=new(function(){function e(){var e,t,n,r;r=null,n=function(e){return function(){var t;return clearTimeout(r),e.hide("connection"),t=i("alerts.could not connect"),e.showHtml(u.fill("connect_failed",{msg:t}),"error","connectionDead")}}(this),s.on("connect_failed",n),s.on("reconnect_failed",n),t=function(e){return function(){return clearTimeout(r),e.hide("connection"),e.hide("connectionDead")}}(this),e=function(e){return function(){return clearTimeout(r),r=setTimeout(function(){return r=null,e.show("reconnecting","error","connection")},500)}}(this),s.on("reconnect",t),s.on("connecting",e)}return e.prototype._alerts={},e.prototype._hide=function(e){var t;return t=this._alerts[e],(null!=t?t.timeout:void 0)&&clearTimeout(t.timeout),delete this._alerts[e],r("#notification_"+e).remove(),this._showHideContainer()},e.prototype._show=function(e,t,n,o,i){var s,u;return a("alerts","show",e,t,n,o,i),this._hide(o),i&&(u=setTimeout(function(e){return function(){return e.hide(o)}}(this),i)),this._alerts[o]={timeout:u},s=r("<div>").attr("id","notification_"+o).addClass("app-alert-item mod-"+n).appendTo("#notification"),t?s.html(e):s.text(e),this._showHideContainer()},e.prototype._showHideContainer=function(){return r("#notification").toggle(!o.isEmpty(this._alerts))},e.prototype.show=function(){var e,t,n,r;return n=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],Array.isArray(n)?(r=n,n=r[0],t=r[1]):t={},this.showLiteralText.apply(this,[i(["alerts",n],t)].concat(c.call(e)))},e.prototype.showLiteralText=function(e,t,n,r){return this._show(e,!1,t,n,r)},e.prototype.showHtml=function(e,t,n,r){return this._show(e,!0,t,n,r)},e.prototype.flash=function(e,t,n){return this.show(e,t,n,2e3)},e.prototype.hide=function(e){return a("alerts","hide",e),this._hide(e)},e.prototype.hideAll=function(){var e,t;t=[];for(e in this._alerts)t.push(this.hide(e));return t},e}())},{}],560:[function(e,t,n){var r,o,i,a,s,u,c=[].slice;i=e(569),s=e("react"),a=e(463),u=e(104),o="enterprise_dashboard_bulk_actions_progress_display",t.exports=r=function(){function e(e,t,n,r,o){this.element=e,this.modelName=t,this.enterpriseDisplayName=n,this.total=r,this.action=o,this.processed=0,this.results=[],this.currentViewTitle=this._getLocalizedString([this.action,"running"]),this.modelLabel=this._getLocalizedString(["modelLabel"]),this._showProgressDisplayPopover()}return e.prototype.incrementProcessed=function(){return this.processed=this.processed+1,this._showProgressDisplayPopover()},e.prototype.done=function(e){return this.results=e,this.currentViewTitle=this._getLocalizedString([this.action,"done"]),this._showProgressDisplayPopover()},e.prototype._getLocalizedString=function(e){return u(["templates",o].concat(c.call(e)))},e.prototype._showProgressDisplayPopover=function(){return i.show({alignRight:!0,elem:this.element,getViewTitle:function(e){return function(){return e.currentViewTitle}}(this),reactElement:s.createElement(a,{processed:this.processed,total:this.total,modelLabel:this.modelLabel,modelName:this.modelName,results:this.results,enterpriseDisplayName:this.enterpriseDisplayName,onDoneClick:function(){return i.hide()},key:"bulk-action-progress-display-component"})})},e}()},{}],561:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(569),i=e(133),a=e(549),s=e("underscore"),c=e(546),u=e(104),t.exports=r=function(e){function t(e){var n,r,o,i,a,u,c,l;this.model=e.model,l=e.text,c=e.html,this.elem=e.elem,this.top=e.top,o=e.confirmText,r=e.confirmBtnClass,n=e.cancelText,this.title=e.title,this.template=e.template,this.templateData=e.templateData,i=e.data,u=e.fxConfirm,a=e.fxCancel,this.popOnClick=e.popOnClick,this.popDepth=e.popDepth,null==this.template&&(this.template="confirm"),this.confirm=this._handleClick(u),this.cancel=a?this._handleClick(a):function(){},this.data=s.extend({text:l,html:c,confirmText:o,confirmBtnClass:r,cancelText:n},null!=i?i:{}),null==this.templateData&&(this.templateData={}),t.__super__.constructor.apply(this,arguments)}var n,r;return l(t,e),n=function(e,t){var n,r,o;r=s.clone(e);for(n in t)d.call(t,n)&&(o=t[n],n in r||(r[n]=o()));return r},r=function(e,t){var r;return r=n(t,{title:function(){return u(["confirm",e,"title"],t.templateData)},html:function(){return u(["confirm",e,"text"],t.templateData)},confirmText:function(){return u(["confirm",e,"confirm"],t.templateData)}}),"fxCancel"in r&&!("cancelText"in r)&&(r.cancelText=u(["confirm",e,"cancel"],t.templateData)),r},t.toggle=function(e,t){return t=1===arguments.length?e:r(e,t),o.toggle({elem:t.elem,top:t.top,view:this,options:t})},t.pushView=function(e,t){return t=1===arguments.length?e:r(e,t),o.pushView({view:this,options:t})},t.prototype.getViewTitle=function(){return this.title},t.prototype.events={"click .js-confirm":"confirm","click .js-cancel":"cancel"},t.prototype.render=function(){return this.$el.html(c.fill(this.template,this.data,{},{member:c.member})),this},t.prototype._handleClick=function(e){return function(t){return function(n){return i.stop(n),t.popOnClick?o.popView(t.popDepth):o.hide(),"function"==typeof e&&e(n),t.remove(),!1}}(this)},t}(a)},{}],562:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h;o=e(7),a=e(84),u=e("bluebird"),c=e(118),l=e(107),d=e("underscore"),h=e("xtend"),r=e(41),s=null!=(p=window.Notification)?p:{permission:"denied"},t.exports=i=function(){function e(t){this.model=t,(e.enabled()||window.fluid)&&this.model.get("unread")&&(this.localNotification()?this.show():setTimeout(this.show.bind(this),i))}var t,n,i,l;return n=100,i=1e3,t=1e4,e.enabled=function(){return"granted"===s.permission},e.denied=function(){return"denied"===s.permission},e.notEnabled=function(){return"default"===s.permission},e.requestPermission=function(){return new u(function(e,t){var n;return n=s.requestPermission,n?n(function(n){return"denied"===n?t(n):e(n)}):t("denied")})},e.prototype.show=function(){return this.getLock(function(e){return function(){var n,o,i,a,u,c;return a=e.render(),c=a.title,n=a.body,o=a.icon,u=a.tag,window.fluid?window.fluid.showGrowlNotification({title:c,priority:1,sticky:!1,description:n,icon:o}):(i=new s(c,{body:n,icon:o,tag:u}),i.model=e.model,i.addEventListener("click",e.clickHandler.bind(e)),r.get("dontDismissNotifications")?void 0:setTimeout(function(){return i.close()},t))}}(this))},l=function(e){switch(e.type){case"relDate":return e.current;case"comment":case"attachmentPreview":return"";default:return e.text}},e.prototype.render=function(){var e,t,n,r,o,i,s;return n=new a("notification").getEntities(this.model.get("display")),s=d.chain(n).map(l).compact().value().join("").trim(),t=d.find(n,function(e){return"comment"===e.type}),e=null!=t?t.text:"",o=this.model.getMember(),r="/favicon.ico",(null!=o?o.avatarHash:void 0)&&(r=[window.avatarDomain,o.avatarHash,"50.png"].join("/")),i=this.model.id,{title:s,body:e,icon:r,tag:i}},e.prototype.clickHandler=function(e){var t,n,r;return t=this.model.get("data"),this.model.markRead(),e.target.close(),this.localNotification()?(this.model.navigateToView()||o.memberNotificationsView(),window.focus()):(r=this.model.getUrlOfTarget(),n=window.open(r),null!=n?n.focus():window.location=r)},e.prototype.localNotification=function(){var e;return e=this.model.get("data"),d.any(d.invoke([function(){var t;return o.onBoardView(null!=(t=e.board)?t.id:void 0)},function(){var t;return o.onOrganizationView(null!=(t=e.organization)?t.id:void 0)},function(){return 0===location.pathname.indexOf(o.getMemberNotificationsUrl())}],"call"))},e.prototype.getLock=function(e){var r,o;return r="notification_lock_"+this.model.id,c.get(r)?void 0:(o=Math.random(),c.set(r,o),setTimeout(function(t){return function(){return c.get(r)===o?e():void 0}}(this),n),setTimeout(function(e){return function(){return c.unset(r)}}(this),t))},e}()},{}],563:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v;r=e("jquery"),l=e("react"),d=e("react-dom"),o=e(7),a=e(22),s=e(566),u=e(567),c=e(569),p=e(284),h=e(547),m=e(133),f=e(156),g=e("underscore"),v=e(546),t.exports=i=new(function(){function e(){}var t,n,b,y;return y=e,n=null,t=null,b=null,e.prototype.shortcut=function(e){switch(e){case a.Escape:return this.hide(),["Esc - Hide Dialog","Dialog"]}},e.prototype.init=function(){n=r(".window"),t=n.find(".window-wrapper"),t.addClass("js-tab-parent"),this.scrolltop=0,this.isVisible=!1,this.displayType=null,this.lastScroll=0,r(".window-overlay").on("scroll mousedown keydown",function(e){return function(t){return e.lastScroll=Date.now()}}(this))},e.prototype.scrolledSince=function(e){return this.lastScroll>e},e.prototype.calcPos=function(e){var t,r;r=f.fSmall?"auto":null!=e?e:this._lastArgs.maxWidth,n.css({width:r}),null!=(null!=(t=this.view)?t.setFixedSidebarLeftPos:void 0)&&i.isVisible&&this.view.setFixedSidebarLeftPos(),i.isVisible||n.show()},e.prototype.show=function(e){var a;if(this._lastArgs=e,this.isVisible&&this.hide(e.isNavigating),s.cancelEdits(),c.hide(),u.close(),p.hideUnpinnedSidebar(),b=e.hide,this.scrolltop=r(window).scrollTop(),r("body").addClass("window-up"),null!=(a=o.getCurrentBoard())&&a.composer.save("vis",!1),r("body").find(".js-disable-on-dialog:not([disabled])").addClass("disabled-for-dialog").attr("disabled","disabled"),null!=e.displayType&&(n.addClass(e.displayType),this.displayType=e.displayType),null!=e.opacity&&(r(".window-overlay").css("background-color","rgba(0, 0, 0, "+e.opacity+")"),this.opacity=e.opacity),t.empty().append(v.fill("dialog_close_button")),null!=e.maxWidth?this.calcPos(e.maxWidth):this.calcPos(""),e.view)this.view=e.view,t.append(this.view.el),this.view.render(),this.view.delegateEvents(),h.addHandler(this.view,{scope:"dialog_view"});else if(e.html)this.view=null,t.append(e.html);else if(e.reactElement){if(!l.isValidElement(e.reactElement))throw new Error("Dialog args.reactElement has to be a react element");this.dr=d.render(e.reactElement,t[0])}this.isVisible=!0,this.lastScroll=0,g.defer(function(e){return function(){return r(".window").css({height:1e5}),r(".window-overlay").scrollTop(1),r(".window-overlay").scrollTop(0),r(".window").css({height:""})}}(this)),n.find(".js-autofocus:first,.focus-dummy").focus().select(),n.find("input[type=submit]").click(function(e){m.preventDefault(e)}),n.find(".js-close-window").click(function(e){m.stop(e),i.hide(null,!0)}),h.addHandler(this,{scope:"dialog",modal:!0})},e.prototype.hide=function(e,o){(this.isVisible&&!s.isEditing()&&!r(".new-comment").hasClass("focus")||o)&&(this._lastArgs=null,"function"==typeof b&&b(e),b=null,n.removeClass(this.displayType),this.displayType=null,r(".window-overlay").css("background-color",""),this.opacity=null,null!=this.view&&(h.removeHandler(this.view),this.view.remove(),this.view=null),null!=this.dr&&(d.unmountComponentAtNode(t[0]),this.dr=null),h.removeHandler(this),n.hide(),r("body").removeClass("window-up"),g.defer(function(e){return function(){return r(window).scrollTop(e.scrolltop),e.scrolltop=0}}(this)),this.isVisible=!1,r(".window-overlay").off("scroll.fixSidebar"),r(".disabled-for-dialog").removeAttr("disabled"),c.hide(),this.clear())},e.prototype.clear=function(){t.width(""),t.empty()},e}()),r(function(){return i.init()})},{}],564:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=[].slice;r=e("jquery"),o=e(82),i=e(7),u=e(569),c=e(571),l=e(284),d=e(133),p=e("underscore"),C=e(51),_=function(e,t){var n,r,o;return o=e.x,n=t.left,r=t.right,o>=n&&r>o},y=function(e,t,n){var r,o,i,a;return a=e.top,o=e.left,r=e.bottom,i=e.right,{top:a+n,bottom:r-n,left:o+t,right:i-t}},g=function(e){return{x:e.pageX,y:e.pageY}},h=function(){var e;return e=1<=arguments.length?x.call(arguments,0):[],function(){var t,n,r;for(n=0,r=e.length;r>n;n++)t=e[n],null!=t&&t.apply(this,arguments)}},k=function(e,t){return h(t,e)},a=function(){function e(e){this.scrollBoard=e.scrollBoard,this.scrollLists=e.scrollLists,this.commitEvent=e.commitEvent,this.cancelMethod=e.cancelMethod,this._queue=[]}return e.prototype.hasMousedLeft=!1,e.prototype.hasMousedRight=!1,e.prototype.stopped=!1,e.prototype.aborted=!1,e.prototype.start=function(e,t){this.$helper=t.helper,this.$target=r(e.target),this.initialMousePosition=g(e),this.lockModelCache(),l.hideSidebar(),this.startTrackingMouse(),this.hidePopoversForSomeReason(),this.boardElement=r("#board")[0],this.boardCanvasElement=r(".board-canvas")[0],this.cachedHoveredList=this.getHoveredListForPoint(this.initialMousePosition),(this.scrollLists||this.scrollBoard)&&this.startAutoscrolling(),s.sorting=!0,this.onStop(function(){return p.defer(function(){return s.sorting=!1})})},e.prototype.lockModelCache=function(){var e,t;if(t=i.getCurrentModelCache(),null==t)throw new Error("Attempt to use DragInfo on a page with no modelCache!");return e=t.lock("DragSort.startSort"),this.onStop(function(){return t.unlock(e)})},e.prototype.hidePopoversForSomeReason=function(){0===this.$target.closest(".pop-over").length&&u.hide()},e.prototype.startAutoscrolling=function(){var e,t;return e=Math.floor(1e3/60),t=setInterval(this.autoscroll.bind(this),e),this.onStop(function(){return clearInterval(t)})},e.prototype.getHoveredListForPoint=function(e){var t,n,o,i;for(i=r(".js-list"),n=0,o=i.length;o>n;n++)if(t=i[n],_(e,t.getBoundingClientRect()))return r(t).find(".list-cards")[0];return null},e.prototype.startTrackingMouse=function(){var e,t;return t=p.throttle(function(e){return function(t){return e.stopped?void 0:e.cachedHoveredList=e.getHoveredListForPoint(t)}}(this),100),e=20,r(document).on("mousemove.dragsort",function(n){return function(r){var o;o=g(r),o.x<n.initialMousePosition.x-e&&(n.hasMousedLeft=!0),o.x>n.initialMousePosition.x+e&&(n.hasMousedRight=!0),t(o)}}(this)),this.onStop(function(){return r(document).off("mousemove.dragsort")})},e.prototype.onStop=function(e){return this._queue.push(e)},e.prototype.stop=function(e,t){var n,r,o,i;for(this.stopped=!0,i=this._queue,r=0,o=i.length;o>r;r++)n=i[r],n.call(this);delete this._queue,this.aborted||this.$target.trigger(this.commitEvent,t)},e.prototype.scrollDeltaForOverhang=function(e){return.1*e},e.prototype.autoscrollBoard=function(){var e,t,n,r,o,i;n=this.$helper[0].getBoundingClientRect(),e=n.left,r=n.right,i=y(this.boardCanvasElement.getBoundingClientRect(),100,0),t=i.left-e,t>0&&this.hasMousedLeft&&(this.boardElement.scrollLeft-=this.scrollDeltaForOverhang(t)),o=r-i.right,o>0&&this.hasMousedRight&&(this.boardElement.scrollLeft+=this.scrollDeltaForOverhang(o))},e.prototype.autoscrollLists=function(){var e,t,n,r,o,i;n=this.$helper[0].getBoundingClientRect(),o=n.top,e=n.bottom,r=y(this.cachedHoveredList.getBoundingClientRect(),0,50),i=r.top-o,i>0&&(this.cachedHoveredList.scrollTop-=this.scrollDeltaForOverhang(i)),t=e-r.bottom,t>0&&(this.cachedHoveredList.scrollTop+=this.scrollDeltaForOverhang(t))},e.prototype.autoscroll=function(){this.scrollBoard&&this.autoscrollBoard(),this.scrollLists&&null!=this.cachedHoveredList&&this.autoscrollLists()},e.prototype.abort=function(){var e;return this.aborted=!0,null!=(e=r.ui.ddmanager.current)&&(e.currentContainer=e),this.$target[this.cancelMethod]("cancel")},e}(),m=null,w=function(e,t){return t=p.defaults({},t,{distance:7,scroll:!1}),e.scrollLists&&(t.custom={refreshContainers:function(){var e,t,n,o;this.containers=function(){var i,a,s,u,c,l,d;for(c=this.containers,d=[],i=0,s=c.length;s>i;i++)if(e=c[i],r.contains(document,e.element[0])){for(t=e.element.closest(".js-list")[0],o=t.getBoundingClientRect(),l=["left","top","width","height"],a=0,u=l.length;u>a;a++)n=l[a],e.containerCache[n]=o[n];d.push(e)}return d}.call(this)}}),t.start=k(t.start,function(t,n){if(null!=m)throw new Error("Attempt to start a drag event while another is in progress!");m=new a(e),m.start(t,n)}),t.stop=k(t.stop,function(e,t){d.stopPropagation(e),m.stop(e,t),m=null}),t},f=function(e){return{width:e.outerWidth(),height:e.outerHeight()}},b=function(e,t,n){var i,a;o.isTouch()||(i=null,a=!("helper"in n)||"original"===n.helper,n.start=k(n.start,function(e,r){var o,s,u,c;a&&"appendTo"in n&&(r.helper.appendTo(n.appendTo),i.sortable("refreshPositions",!0)),u=(null!=(s=t.calcSize)?s:f)(r.item),c=u.width,o=u.height,r.placeholder.width(c),r.placeholder.height(o)}),t=p.extend({commitEvent:"sortcommit",cancelMethod:"sortable"},t),n=w(t,n),c.enqueue(function(){return i=r(e),i.sortable(n)}))},v=function(e,t,n){o.isTouch()||(t=p.extend({commitEvent:"dragcommit",cancelMethod:"draggable"},t),n=w(t,n),c.enqueue(function(){return r(e).draggable(n)}))},t.exports=s={refreshListSortable:function(){return b(".js-list-sortable",{scrollBoard:!0,scrollLists:!1,calcSize:function(e){var t;return t=e.children(".list"),{width:t.outerWidth(),height:t.outerHeight()}}},{handle:".list-header",tolerance:"pointer",placeholder:"list-wrapper placeholder",items:".js-list",appendTo:"body"})},refreshCalendarCardSortable:function(){return b(".js-calendar-sortable",{scrollBoard:!1,scrollLists:!1},{connectWith:".js-calendar-sortable",placeholder:"list-card placeholder-none",items:".list-card:not(.placeholder-none, .hide, .js-composer)",appendTo:".calendar-drag-area",over:function(e,t){return r(e.target).closest(".calendar-day").addClass("drop")},out:function(e,t){return r(e.target).closest(".calendar-day").removeClass("drop")}})},refreshListCardSortable:function(){return b(".js-sortable",{scrollBoard:!0,scrollLists:!0},{connectWith:".js-sortable",placeholder:"list-card placeholder",items:".list-card:not(.placeholder, .hide, .js-composer)",appendTo:"body"})},refreshDraggableSidebarMembers:function(){return v(".js-list-draggable-board-members .member:not(.js-member-deactivated)",{scrollBoard:!0,scrollLists:!0},{revert:"invalid",revertDuration:150,appendTo:"body",zIndex:100,helper:"clone",start:function(e,t){C("Board Menu","Drag Member from Sidebar"),r(".list-card.active-card").removeClass("active-card")}})},refreshDraggableStickers:function(){return v(".js-draggable-sticker:not(.disabled)",{scrollBoard:!0,scrollLists:!0},{revert:"invalid",revertDuration:150,appendTo:"body",zIndex:100,helper:"clone",start:function(e,t){var n;C("Board Menu","Drag Sticker from Sidebar"),n=20*Math.random()-10,t.helper.find(".sticker-select-fixed").css({transform:"rotate("+n+"deg)","-webkit-transform":"rotate("+n+"deg)"})}})},abort:function(){if(null==m)throw new Error("Abort called while not dragging!");return m.abort()},refreshIfInitialized:function(e){return(null!=e?e.hasClass("ui-sortable"):void 0)?e.sortable("refresh"):void 0}}},{}],565:[function(e,t,n){var r,o,i,a;o=e(241).Events,r=e("jquery"),a=e("underscore"),t.exports=i=function(){function e(e,t){var n;this.options=a.extend({scrollableContainer:"#content",threshold:.75,debounce:50},null!=t?t:{}),this.$scrollableContainer=r(this.options.scrollableContainer),this.$listElement=r(e),this.reset(),n=a.debounce(this._onScroll.bind(this),this.options.debounce),this.$scrollableContainer.scroll(n)}return a.extend(e.prototype,o),e.prototype.destroy=function(){return this.$scrollableContainer.off("scroll")},e.prototype._scrollBottom=function(){return this.$scrollableContainer.height()-(this.$listElement.offset().top-this.containerOffset)},e.prototype._listHeight=function(){return this.$listElement.height()},e.prototype._onScroll=function(){var e;if(!this.locked)return e=this._scrollBottom(),e/this._listHeight()>this.options.threshold?(this.locked=!0,this.trigger("nearEnd")):this.previousScrollBottom=e},e.prototype.reset=function(){return this.locked=!1,this.containerOffset=this.$scrollableContainer.offset().top,this.previousScrollBottom=this._scrollBottom(),this._onScroll()},e}()},{}],566:[function(e,t,n){var r,o,i,a;r=e("jquery"),o=e(241),i=e(118),a=e("underscore"),t.exports=new(function(){function e(){}return a.extend(e.prototype,o.Events),e.prototype.cancelEdit=function(e){return e.find(".edit-controls:not(.keep)").remove(),e.removeClass("editing is-editing is-focused focus"),e.blur()},e.prototype.cancelEdits=function(e){var t;return r(".edit-controls:not(.keep)").remove(),r(".editing").removeClass("editing"),r(".is-editing").removeClass("is-editing"),r(".is-focused").removeClass("is-focused"),r(".checklist-new-item").removeClass("focus"),r("input").not(e||"none").blur(),r("textarea").not(e||"none").blur(),this.trigger("cancelEdits"),t=r(".editable"),t.length>0?t.each(function(e){var t,n,o,a,s,u,c;return o=r(".editable")[e],c=r(o).find(".edits-warning:first"),t=r(o).find(".current:first"),a=r(o).find(".field:first"),n=a.data("draftKey"),s=null!=(u=t.data("unmarkeddown"))?u!==a.val():a.val()!==t.text(),s&&""!==a.val()&&null!=n?(i.set(n,a.val()),c.show()):void 0}):void 0},e.prototype.isEditing=function(){return r(".editing").length+r(".checklist-new-item.focus").length+r(".is-focused").length>0},e}())},{}],567:[function(e,t,n){var r,o,i,a,s,u,c,l,d;r=e("jquery"),o=e(563),i=e(22),s=e(711),u=e(569),c=e(284),l=e(547),d=e(133),t.exports=a=new(function(){function e(){}return e.modalView=null,e.prototype.shortcut=function(e){switch(e){case i.Escape:return this.close(),["Esc - Hide Plugin Modal","Plugin Modal"]}},e.prototype.isOpen=function(){return null!=this.modalView},e.prototype.open=function(e){var t,n;n=e.model,t=e.content,u.hide(),c.hideUnpinnedSidebar(),o.isVisible&&o.hide(!0),null!=this.modalView&&this.close(),this.modalView=new s({model:n,content:t}),r(".pop-over").before(this.modalView.render().el),this.modalView.$el.find("a[data-index].plugin-chrome-header-action").click(function(e){var n,o;o=parseInt(r(e.currentTarget).attr("data-index"),10),n=t.actions[o],null!=n&&"function"==typeof n.callback&&n.callback({el:e.currentTarget})}),this.modalView.$el.find(".js-close-plugin-chrome").click(function(e){d.stop(e),a.close()}),this.modalView.$el.click(function(e){r(e.target).closest(".plugin-chrome-wrapper").length||r(".pop-over.is-shown").length||a.close()}),l.addHandler(this,{scope:"plugin_modal",modal:!0})},e.prototype.close=function(){null!=this.modalView&&(this.modalView.close(),this.modalView=null)},e}())},{}],568:[function(e,t,n){var r,o,i,a,s,u;a=e(245),o=e("react"),r=e("bluebird"),s=e(541)("popover"),u=e("xtend"),i=e("underscore"),t.exports=o.createClass({displayName:"Popover",
getInitialState:function(){return{title:""}},componentDidMount:function(){return this.updateTitle(this.props)},componentWillReceiveProps:function(e){var t;return null!=(t=this._titlePromise)&&t.cancel(),this.updateTitle(e)},updateTitle:function(e){return null!=e.getViewTitle?this._titlePromise=r.resolve(e.getViewTitle()).cancellable().then(function(e){return function(t){return e.isMounted()?e.setState({title:t}):void 0}}(this)).catch(r.CancellationError,function(){}):void 0},componentWillUnmount:function(){var e;return null!=(e=this._titlePromise)?e.cancel():void 0},render:s.renderable(function(){var e,t,n,r,u;return u=this.props,t=u.hideHeader,n=u.onBack,r=u.onClose,e=u.children,s.div(function(u){return function(){return t||s.div(".pop-over-header.js-pop-over-header",function(){return null!=n&&s.a(".pop-over-header-back-btn.icon-sm.icon-back.is-shown",{onClick:n,href:"#"}),s.span(".pop-over-header-title",function(){return u.props.hasSafeViewTitle?s.raw(u.state.title):s.text(u.state.title)}),s.a(".pop-over-header-close-btn.icon-sm.icon-close",{onClick:r,href:"#"})}),s.div(function(){var t,n,r;return r={className:"pop-over-content js-pop-over-content u-fancy-scrollbar js-tab-parent"},t=function(e,t){return i.chain(null!=t?t.split(" "):void 0).union(e.split(" ")).value().join(" ")},n=function(e,n){return o.cloneElement(n,{className:t("js-popover-pushed hide",n.props.classNames)})},e=i.chain(e).initial().map(a(n,"js-popover-pushed hide")).value().concat(i.last(e)),s.addElement(o.createElement("div",r,e))})}}(this))})})},{}],569:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b;r=e("jquery"),o=e(82),v=e(245),i=e(22),a=e(566),s=e(568),u=e("bluebird"),m=e(549),c=e("react"),l=e("react-dom"),p=e(547),h=e(133),f=e(156),d=e(111),b=e("xtend"),g=e("underscore"),t.exports=new(function(){function e(){this.argsStack=[],this.position={},this.isVisible=!1,this.hardToClose=!1,r(function(e){return function(){return t=r(".pop-over")}}(this))}var t,n,u,h;return t=null,n=null,u=null,h=null,e.prototype.shortcut=function(e,t){switch(e){case i.Escape:return this.popView(),t.stopImmediatePropagation(),["Esc - Pop Pop-over View","Pop Over"]}},e.prototype.contains=function(e){return r.contains(t[0],e)},e.prototype.toggledBy=function(e){return g.any(this.argsStack,function(t){return t.elem===e})},e.prototype.onWindowResize=function(){return this.isVisible?this.load(this.argsStack.pop()):void 0},e.prototype.calcPos=function(e){var n,o,i,a,s,u,c,l,d,p,h,m,v,b,y,w;return w=r(window).width(),y=r(window).height(),null!=e.maxWidth?e.maxWidth>w?t.width(w-16):t.width(e.maxWidth):t.width(""),s=w,b=y,h=t.outerWidth(),a=null!=e.elem&&r(e.elem).is(":visible"),a?(v=null!=e.top?e.top:null!=e.elem?r(e.elem).outerHeight()+6:35,n=e.alignRight?r(e.elem).offset().left+r(e.elem).outerWidth()-h:r(e.elem).offset().left,i=r(e.elem).offset().top+v):null!=e.clientx&&null!=e.clienty&&(n=e.clientx,i=e.clienty),u=b-68,e.hideHeader||(u-=t.find(".js-pop-over-header").outerHeight()),null!=e.clientx&&null!=e.clienty||a&&g.include(["block","inline-block","inline","table-cell","flex"],r(null!=e?e.elem:void 0).css("display"))?(p=i>0?i:5,l=t.outerHeight(),c=p+l,(f.fLarge||f.fExtraLarge)&&(m=y+r(window).scrollTop(),c>m&&(p=m-l-8),l>m-44&&(p=44)),d=n>0?n:5,o=d+h+16,o>s&&(d=s-(h+5)),{left:d,top:p,contentHeight:u}):void 0},e.prototype.load=function(e){var n,r,o,i;if(this.view=e.view,this.hardToClose=e.hardToClose,t.addClass(e.displayType),!c.isValidElement(e.reactElement))throw new Error("PopOver args.reactElement has to be a react element");return n=(null!=(i=g.last(this.argsStack))?i.keepInDOM:void 0)?(r=g.chain(this.argsStack).filter(function(e){return e.keepInDOM}).pluck("reactElement").value(),r.concat(e.reactElement)):[e.reactElement],o={key:"PopOver",onBack:this.argsStack.length>0?function(e){return function(){return e.popView()}}(this):null,onClose:v(this,"hide"),getViewTitle:e.getViewTitle,hasSafeViewTitle:e.hasSafeViewTitle,hideHeader:e.hideHeader},this.por=l.render(c.createElement(s,o,n),t[0]),g.defer(function(n){return function(){var r;return n.position=null!=(r=n.calcPos(e))?r:n.position,t.css({left:n.position.left,top:n.position.top}),t.find(".js-pop-over-content").css({maxHeight:n.position.contentHeight}),t.addClass("is-shown")}}(this)),this.argsStack.push(e)},e.prototype.extractViewArgs=function(e){var t,n;if(null!=e.reactElement)return e;if(null==e.view&&(e={view:e}),g.isFunction(e.view)&&(e.view=new e.view(null!=(n=e.options)?n:{})),!(e.view instanceof m))throw new Error("PopOver args.view has to be a backbone instance");return t=function(e,t){return g.isFunction(e[t])?v(e,t):void 0},e.reactElement=c.createElement(d,{key:e.view.cid,view:e.view}),b({maxWidth:e.view.maxWidth,displayType:e.view.displayType,keepInDOM:e.view.keepInDOM,hideHeader:e.view.hideHeader,getViewTitle:t(e.view,"getViewTitle"),hasSafeViewTitle:e.view.hasSafeViewTitle,willBePushedDown:t(e.view,"willBePushedDown"),willBePopped:t(e.view,"willBePopped")},e)},e.prototype.show=function(e){e.keepEdits||a.cancelEdits(e.elActive),this.reset(),this.load(this.extractViewArgs(e)),g.defer(function(e){return function(){if(t.find(".js-autofocus").length>0){if(o.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return t.find(".js-autofocus:first").focus().select()}}}(this)),this.isVisible=!0,"function"==typeof e.shown&&e.shown(t),u=e.hidden,this.positionInterval=setInterval(this.checkPosition.bind(this),150),p.addHandler(this,{scope:"popover",modal:!0})},e.prototype.checkPosition=function(){var e,n,o,i,a;return this.isVisible?(o=t.offset().top,a=r(window).scrollTop(),o!==a?(i=r(window).height(),n=t.outerHeight(),a>o&&i>=n?void t.css({top:a}):o+n>a+i&&(e=a+Math.max(0,i-n),e!==o)?t.css({top:e}):void 0):void 0):void clearInterval(this.positionInterval)},e.prototype.pushView=function(e){var n;if(this.clearDisplayTypes(),n=g.last(this.argsStack),null!=n&&"function"==typeof n.willBePushedDown&&n.willBePushedDown(),this.load(this.extractViewArgs(e)),t.find(".js-autofocus").length>0){if(o.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return setTimeout(function(e){return function(){return t.find(".js-autofocus:first").focus().select()}}(this),10)}},e.prototype.popView=function(e){var n,r,i,a,s,u,c;for(null==e&&(e=1),this.clearDisplayTypes(),r=i=0,s=e;s>=0?s>i:i>s;r=s>=0?++i:--i)if(a=g.last(this.argsStack),null!=a&&"function"==typeof a.willBePopped&&a.willBePopped(),null!=a&&null!=(u=a.reactElement.props)&&null!=(c=u.view)&&c.remove(),this.argsStack.pop(),null==g.last(this.argsStack))return void this.hide();if(n=this.argsStack.pop(),null!=n&&"function"==typeof n.willBePushedUp&&n.willBePushedUp(),this.load(n),t.find(".js-autofocus").length>0){if(o.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return setTimeout(function(e){return function(){return t.find(".js-autofocus:first").focus().select()}}(this),10)}},e.prototype.toggle=function(e){var t;return t=function(e,t){return e&&t&&r(e)[0]===r(t)[0]},g.last(this.argsStack)&&t(g.last(this.argsStack).elem,e.elem)?this.hide():this.show(e)},e.prototype.hide=function(){return clearInterval(this.positionInterval),t.removeClass("is-shown"),this.reset(),l.unmountComponentAtNode(t[0])},e.prototype.reset=function(){var e,n,r,o,i;for(this.clearDisplayTypes(),r=this.argsStack,n=r.length-1;n>=0;n+=-1)e=r[n],"function"==typeof e.willBePopped&&e.willBePopped(),null!=(o=e.reactElement.props)&&null!=(i=o.view)&&i.remove();return p.removeHandlerScope("popover_view"),p.removeHandler(this),this.view=null,this.argsStack=[],this.isVisible=!1,this.hardToClose=!1,"function"==typeof u&&u(t),u=null},e.prototype.clearDisplayTypes=function(){var e;return e=["mod-mini-profile","mod-avdetail","mod-search-over","mod-notifications","mod-no-header"],t.removeClass(e.join(" "))},e}())},{}],570:[function(e,t,n){var r;t.exports=r=function(){function e(e,t,n,r){null==t&&(t="Trello"),null==n&&(n=450),null==r&&(r=700),this.url=e,this.windowName=t,this.width=n,this.height=r}return e.prototype.open=function(){var e,t;return e=window.screenX+(window.innerWidth-this.width)/2,t=window.screenY+(window.innerHeight-this.height)/2,this.popup=window.open(this.url,this.windowName,"width="+this.width+",height="+this.height+",top="+t+",left="+e)},e}()},{}],571:[function(e,t,n){var r,o=[].slice;r=e("underscore"),t.exports=new(function(){function e(){this.holding=!1,this.fxs={},this._unnamed=0}return e.prototype.hold=function(){return this.holding=!0},e.prototype.enqueue=function(){var e,t,n,r;e=2<=arguments.length?o.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],r=e[0],null==r&&(r="unnamed_"+this._unnamed++),this.holding?this.fxs[r]=t:t({immediate:!0,delayed:!1})},e.prototype.release=function(){var e;this.holding=!1,e=this.fxs,this.fxs={},r.defer(function(){var t,n;for(n in e)(t=e[n])({immediate:!1,delayed:!0})})},e}())},{}],572:[function(e,t,n){var r,o,i;r=e("jquery"),i=e(546),t.exports=o=new(function(){function e(){this.tooltip=null}return e.prototype.show=function(e,t,n,o){var a,s,u,c,l,d;return null==n&&(n=!0),null==o&&(o=this.STYLE.DEFAULT),r(window).on("click",t[0],this.windowClick),clearTimeout(this.emptyTimer),"function"==typeof e.renderOnce&&(e=e.renderOnce().$el.html()),a=r(i.fill("tooltip_content",{tooltipHtml:e,closeable:n,style:o})),s=r("."+this.TOOLTIP_CONTAINER).attr("class",this.TOOLTIP_CONTAINER),o!==this.STYLE.DEFAULT&&s.addClass("tooltip-"+o),s.html(a),this.tooltip={tooltipHtml:e,$anchor:t,$elem:a},d=t.offset(),c=d.left,l=d.top,u=t.outerHeight(),s.css({left:Math.max(c-5,5),top:Math.max(l+u,5)}),a.addClass("active")},e.prototype.windowClick=function(e){var t;return t=r(e.target),e.target!==e.data&&0===t.closest(".js-tooltip-content").length||0!==t.closest(".js-tooltip-close-button").length?o.hide():void 0},e.prototype.hide=function(){var e;return this.tooltip=null,e=r("."+this.TOOLTIP_CONTAINER),e.find(".tooltip-content").removeClass("active"),this.emptyTimer=setTimeout(function(t){return function(){return e.empty()}}(this),300),r(window).off("click",this.windowClick)},e.prototype.STYLE={DEFAULT:"default",MENU:"menu",BILLING:"billing"},e.prototype.TOOLTIP_CONTAINER="tooltip-container",e}())},{}],573:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g;o=e(35),i=e(82),u=e(100),c=e(22),d=e(569),h=e("react"),f=e(541)("list_add"),m=e(133),g=e(51),r=e("jquery"),a=[f.l("add-second-ghost-card"),f.l("add-first-ghost-card")],s="GhostListDismissed",l=512,p=100,t.exports=h.createClass({displayName:"InlineGhostListComposerComponent",getInitialState:function(){return{listComposerOpen:!1,ghostListComposerOpen:!1,secondListDismissed:!1,thirdListDismissed:!1,listName:"",listPlaceholderShown:!1}},hideSecondList:function(e){return m.stop(e),this.setState({secondListDismissed:!0}),o.me().dismiss(s+"-2"),d.hide(),g("Board View","Ghost List","2nd List Dismissed")},hideThirdList:function(e){return m.stop(e),this.setState({thirdListDismissed:!0}),o.me().dismiss(s+"-3"),d.hide(),g("Board View","Ghost List","3rd List Dismissed")},isListPreviouslyDismissed:function(e){return o.me().isDismissed(s+"-"+e)},toggleListComposer:function(e){return function(t){return function(n){return m.stop(n),t.setState({listComposerOpen:e}),d.hide()}}(this)},updateListTitle:function(e){return m.stop(e),this.setState({listName:e.target.value,listPlaceholderShown:!0})},suggestCardCreation:function(){return setTimeout(function(){return r(".js-card-title").attr("placeholder",a.pop())},p)},focusListInput:function(){return setTimeout(function(){return r(".list-name-input").focus().select()},p)},openGhostListComposer:function(e){return function(t){return function(n){return!t.state.listName&&e&&m.stop(n),e?t.setState({ghostListComposerOpen:!t.state.ghostListComposerOpen||t.state.listName}):t.setState({ghostListComposerOpen:t.state.listName}),t.focusListInput()}}(this)},ghostListHeader:function(e){var t,n,r,o;return n=f.l("save"),o=this.state.listPlaceholderShown||"explorer-10"!==(t=i.browserVersionStr)&&"explorer-11"!==t?this.state.listName:e,r=e.length>32||n.length>8?".small":"",f.form({onSubmit:this.addList},function(t){return function(){return f.input(".list-name-input"+r,{type:"text",name:"name",placeholder:e,autoComplete:"off",dir:"auto",maxLength:l,onChange:t.updateListTitle,value:o}),f.div(".list-add-controls.u-clearfix",function(){return f.input(".primary.mod-list-add-button.js-save-edit"+r,{type:"submit",value:n})})}}(this))},suggestGhostCardCreation:function(e){return 1===e?(r(".js-open-card-composer").click(),setTimeout(function(e){return function(){return e.suggestCardCreation(),r(".js-add-card").click(e.suggestCardCreation),r(".card-composer").keydown(function(t){var n,o,i;return i=u.getKey(t),o=r(t.target).closest(".js-card-title").hasClass("js-card-title"),n=r(t.target).closest(".js-add-card").hasClass("js-add-card"),!o&&!n||d.isVisible||i!==c.Enter?void 0:e.suggestCardCreation()})}}(this),p)):void 0},addList:function(e){var t,n,o,i,a;return m.stop(e),a=this.props.model,t=r(".list-name-input"),o=a.listList,i=o.length+1,n=this.state.listName.trim(),""===n?void t.focus().select():(a.listList.create({name:n,pos:a.calcPos(i),closed:!1},{success:function(e){return function(e){return g("Board View","Add List - via Inline List Composer"),g("Board View","Ghost List Composer","Add List",i)}}(this)}),t.val(""),this.setState({listComposerOpen:i>3,listName:"",listPlaceholderShown:!1,ghostListComposerOpen:!1}),void this.suggestGhostCardCreation(i))},componentDidMount:function(){return this.isListPreviouslyDismissed(2)&&this.setState({secondListDismissed:!0}),this.isListPreviouslyDismissed(3)&&this.setState({thirdListDismissed:!0}),this.focusListInput(),setTimeout(function(e){return function(){return r("#board").click(e.openGhostListComposer(!1))}}(this),p)},render:f.renderable(function(){var e,t,n,r,o,i,a,s,u;return i=this.props.model,o=i.listList.length,a=this.state,s=a.secondListDismissed,u=a.thirdListDismissed,t=a.ghostListComposerOpen,r=this.state.listComposerOpen===!0?"":"is-idle",e=0===o?"":"is-hidden",n=o>=3||e&&s&&u||2===o&&u?"":"is-hidden",f.div(function(i){return function(){var a,c,d,p,h;return n||f.div(".js-add-list.list-wrapper.mod-add",{class:[r,n].join(" ")},function(){return f.form({onSubmit:i.addList},function(){return f.span(".placeholder.js-open-add-list",{onClick:i.toggleListComposer(!0)},function(){return f.format("add-a-list-ellipsis")}),f.input(".list-name-input",{type:"text",name:"name",placeholder:f.l("add-a-list-ellipsis"),autoComplete:"off",dir:"auto",maxLength:l,onChange:i.updateListTitle}),f.div(".list-add-controls.u-clearfix",function(){return f.input(".primary.mod-list-add-button.js-save-edit",{type:"submit",value:f.l("save")}),f.a(".icon-lg.icon-close.dark-hover.js-cancel-edit",{href:"#",onClick:i.toggleListComposer(!1)})})})}),e||f.div(".js-list.ghost-list.add-ghost-list.first-ghost-list",{class:e},function(){return f.div(".list",function(){return f.div(".ghost-list-header.u-clearfix",function(){return f.div(".js-add-list.mod-add",function(){return i.ghostListHeader(f.l("add-first-ghost-list"))})}),f.div(".list-cards",function(){return f.span(".list-card",{style:{height:"80px"}},function(){return f.div(".list-card-details")}),f.span(".list-card",{style:{height:"40px"}},function(){return f.div(".list-card-details")})})})}),c=2>o&&!s?"":"is-hidden",c||(a=e&&t?"add-ghost-list":"",h=e?i.openGhostListComposer(!0):void 0,f.div(".js-list.ghost-list",{class:[c,a].join(" "),onClick:h},function(){return f.div(".list",function(){return f.div(".ghost-list-header.u-clearfix",function(){return e&&t?i.ghostListHeader(f.l("add-second-ghost-list")):f.a(".icon-lg.icon-close.dark-hover.u-float-right",{onClick:i.hideSecondList})}),f.div(".list-cards",function(){return f.span(".list-card",{style:{height:"40px"}},function(){return f.div(".list-card-details")}),f.span(".list-card",{style:{height:"80px"}},function(){return f.div(".list-card-details")}),f.span(".list-card",{style:{height:"120px"}},function(){return f.div(".list-card-details")}),f.span(".list-card",{style:{height:"40px"}},function(){return f.div(".list-card-details")}),f.span(".list-card",{style:{height:"80px"}},function(){return f.div(".list-card-details")})})})})),p=3>o&&!u?"":"is-hidden",p?void 0:(d=(c||s)&&t?"add-ghost-list":"",h=c||s?i.openGhostListComposer(!0):void 0,f.div(".js-list.ghost-list",{class:[p,d].join(" "),onClick:h},function(){return f.div(".list",function(){return f.div(".ghost-list-header.u-clearfix",function(){return(c||s)&&t?i.ghostListHeader(f.l("add-third-ghost-list")):f.a(".icon-lg.icon-close.dark-hover.u-float-right",{onClick:i.hideThirdList})}),f.div(".list-cards",function(){return f.span(".list-card",{style:{height:"80px"}},function(){return f.div(".list-card-details")}),f.span(".list-card",{style:{height:"40px"}},function(){return f.div(".list-card-details")})})})}))}}(this))})})},{}],574:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),a=e("react"),s=e("react-dom"),u=e(540),l=e("recup"),c=e(549),o=e(573),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.className="ghost-list-container",t.prototype.getReactRoot=function(){return a.createElement(u,{},this.getComposer())},t.prototype.renderReactSection=function(){return s.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.render=function(){return null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$el.append(this.$reactRoot),this.renderReactSection(),this.model.editable()&&this.$el.removeClass("fade hide"),this},t.prototype.getComposer=function(){return l.render(function(e){return function(){return l.div(function(){return l.createElement(o,{model:e.model})})}}(this))},t.prototype.remove=function(){return s.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(c)},{}],575:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),i=e(569),a=e(133),s=e(549),u=e(546),c=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="js-add-list list-wrapper mod-add is-idle",t.prototype.initialize=function(){return this.listenTo(this.model.viewState,"change:listComposerOpen",this.frameDebounce(this.renderListComposer))},t.prototype.events={"click .js-open-add-list":"setOpen","click .js-cancel-edit":"setClose",submit:"addList"},t.prototype.render=function(){var e;return e=this.model.toJSON({board:!0}),this.$el.html(u.fill("list_add",e)),this.renderListComposer(),this.model.editable()&&this.$el.removeClass("fade hide"),this},t.prototype.setOpen=function(e){a.stop(e),this.model.viewState.set("listComposerOpen",!0)},t.prototype.setClose=function(e){a.stop(e),this.model.viewState.set("listComposerOpen",!1)},t.prototype.renderListComposer=function(){return this.model.viewState.get("listComposerOpen")?this.renderOpen():this.renderClose()},t.prototype.renderOpen=function(e){a.stop(e),this.$el.removeClass("is-idle"),this.defer(function(e){return function(){return e.$(".list-name-input").blur().focus().select()}}(this)),i.hide()},t.prototype.renderClose=function(e){a.stop(e),this.$el.addClass("is-idle")},t.prototype.addList=function(e){var t,n,r,o;return a.stop(e),t=this.$(".list-name-input"),r=this.model.listList,o=r.length+1,n=t.val().trim(),""===n?void t.focus().select():(this.model.listList.create({name:n,pos:this.model.calcPos(o),closed:!1},{success:function(e){return function(e){return c("Board View","Add List - via Inline List Composer")}}(this)}),t.val(""),void this.renderOpen())},t}(s)},{}],576:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),i=e(569),a=e(549),s=e("underscore"),u=e(546),c=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="move all cards in list",t.prototype.events={"click .js-select-list":"selectList"},t.prototype.render=function(){var e,t,n,r,o,i;for(t=this.model.toJSON(),t.lists=[],i=this.model.getBoard().listList.models,n=0,r=i.length;r>n;n++)o=i[n],e=s.clone(o.toJSON()),e.id===this.model.id&&(e.current=!0),t.lists.push(e);return this.$el.html(u.fill("list_bulk_card_move",t)),this},t.prototype.selectList=function(e){var t,n,o,a,u,l,d;if(t=r(e.target).closest(".js-select-list"),d=t.attr("name"),!t.hasClass("disabled")){for(l=this.modelCache.get("List",d),c("Card","Moved in Bulk via List Menu"),o=s.clone(this.model.openCards().models),a=0,u=o.length;u>a;a++)n=o[a],n.moveToList(l,1e3);i.hide()}},t}(a)},{}],577:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(100),o=e(22),a=e(569),s=e(133),u=e(549),c=e(546),l=e(51),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="copy list",t.prototype.tagName="form",t.prototype.events={"click .js-submit":"submit",submit:"submit",'keydown textarea[name="name"]':"keydownEvent"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(c.fill("list_copy",e,{editable:this.model.editable()})),this},t.prototype.keydownEvent=function(e){r.getKey(e)===o.Enter&&(s.stop(e),this.submit(e))},t.prototype.submit=function(e){var t,n,r,o;return s.stop(e),r=this.$('textarea[name="name"]'),""===r.val().trim()?void r.focus().select():(t=this.model.getBoard(),n=t.listList.calcPos(this.model.getIndexInList()+1,this.model,!0),o={idListSource:this.model.id,idBoard:this.model.get("idBoard"),pos:n,name:r.val().trim(),closed:!1},t.listList.create(o),a.hide(),void l("List","Copy List"))},t}(u)},{}],578:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e(35),o=e(518),i=e(564),a=e(574),s=e(575),c=e(581),l=e(571),m=e(79),f=e(88),d=e(133),h=e("underscore"),p=1e4,t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.viewType=c,t.prototype.initialize=function(e){return this.resetCallback=e.resetCallback,t.__super__.initialize.apply(this,arguments),m(null!=this.resetCallback),this.listenTo(this.collection,{reset:this.resetCallback,"change:idBoard":this.boardChange})},t.prototype.isFirstBoard=function(){var e,t,n;return t=r.me(),e=t.get("idBoards"),n=h.filter(e,function(e){return!t.accountNewerThan(d.idToDate(e))&&d.idToDate(e)-d.idToDate(r.myId())>p}),1===n.length},t.prototype.render=function(){var e,t;return e=Math.max(3,Math.ceil(window.innerWidth/270)),t=this.getModels().map(function(t){return function(n,r){return t.subview(t.viewType,n,{deferCards:r>=e})}}(this)),this.model.editable()&&(this.isFirstBoard()&&f("ghostLists").get("enabled")?t.push(this.subview(a,this.model)):t.push(this.subview(s,this.model))),this.ensureSubviews(t),this.resetCallback()},t.prototype.boardChange=function(e,t){return t!==this.collection.board.get("id")?(this.collection.remove(e),i.refreshIfInitialized(this.$el)):void 0},t.prototype.addModel=function(){return t.__super__.addModel.apply(this,arguments),this.resetCallback()},t.prototype.removeSubview=function(){t.__super__.removeSubview.apply(this,arguments),i.refreshListCardSortable()},t.prototype.insertSubview=function(e){t.__super__.insertSubview.apply(this,arguments),e.$el.find(".ui-sortable").length>0?i.refreshIfInitialized(this.$el):i.refreshListCardSortable()},t}(o)},{}],579:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty,_=[].slice;r=e(561),o=e(576),i=e(577),s=e(580),u=e(569),c=e("bluebird"),l=e(133),d=e(549),g=e(860),b=e(51),p=e("underscore"),h=function(e){var t,n,r,o,i,a,s,u,c;for(a=e.list,u=e.posBefore,s=e.posAfter,r=e.count,c=[],n=o=0,i=a.length;i>o;n=++o)t=a[n],c.push({card:t,pos:u+(n+1)*(s-u)/(a.length+1)});return c},f=function(e,t){var n,r;return r=e.length-1,p.flatten(function(){var o;for(o=[];r>=0;){for(n=r,r--;r>=0&&t[e[r].id]>t[e[n].id];)r--;o.push(h({list:e.slice(r+1,n),posBefore:r>=0?t[e[r].id]:0,posAfter:t[e[n].id]}))}return o}())},m=function(e,t){var n,r;return n=0,p.flatten(function(){var o;for(o=[];n<e.length;){for(r=n,n++;n<e.length&&t[e[n].id]<t[e[r].id];)n++;o.push(h({list:e.slice(r+1,n),posBefore:t[e[r].id],posAfter:n<e.length?t[e[n].id]:t[e[r].id]+l.spacing*(n-r)}))}return o}())},v=function(e,t){var n,r,o,i;return r=t.fx,i=t.updatesPerMinute,n=t.concurrency,o=n*(6e4/i),c.map(e,function(e){var t;return t=Date.now(),c.resolve(r(e)).then(function(){var e;return e=o-(Date.now()-t),e>0?c.delay(e):void 0})},{concurrency:n})},t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="list actions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:subscribed",this.frameDebounce(this.render))},t.prototype.events={"click .js-add-card":"addCard","click .js-move-list":"moveList","click .js-copy-list":"copyList","click .js-list-subscribe":"toggleSubscribe","click .js-move-cards":"moveCards","click .js-archive-cards":"archiveCards","click .js-sort-by-due-date":"sortByDueDate","click .js-sort-newest-first":"sortNewestFirst","click .js-sort-oldest-first":"sortOldestFirst","click .js-close-list":"closeList"},t.prototype.render=function(){var e;return e=this.model.cardList.length>1,this.$el.html(g({editable:this.model.editable(),subscribed:this.model.get("subscribed"),canSortByDueDate:e&&this.model.cardList.any(function(e){return function(e){return e.get("due")}}(this)),canSortByAge:e})),this},t.prototype.addCard=function(e){l.stop(e),u.hide(),this.model.getBoard().composer.save({list:this.model,index:0,vis:!0}),b("List Menu","Add Card"),b("Card Composer","Open","Via List Menu")},t.prototype.moveList=function(e){l.stop(e),b("List Menu","Open Move List Popover"),u.pushView({view:new s({model:this.model,modelCache:this.modelCache})})},t.prototype.copyList=function(e){l.stop(e),b("List Menu","Open Copy List Popover"),u.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.toggleSubscribe=function(e){l.preventDefault(e),this.model.get("subscribed")?(this.model.subscribe(!1),b("List Menu","Subscribe","Unsubscribe")):(this.model.subscribe(!0),b("List Menu","Subscribe","Subscribe"))},t.prototype.moveCards=function(e){l.stop(e),b("List Menu","Open Move All Cards in List"),u.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.archiveCards=function(e){l.stop(e),b("List Menu","Open Archive All Cards in List"),r.pushView("archive all cards",{model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){var n,r,o,i;for(u.hide(),i=p.clone(e.model.cardList.models),r=0,o=i.length;o>r;r++)n=i[r],n.set({closed:!0});return e.model.run("archiveAllCards",{},e.listViewListen)}}(this)})},t.prototype.sortByDueDate=function(e){return l.stop(e),u.hide(),b("List Menu","Sort Cards By Date"),this.applySort(function(e){var t,n;return t=e.get("due"),n=e.get("dueComplete"),[t?n?"1":"0":"2",null!=t?t:""].join(":")})},t.prototype.sortNewestFirst=function(e){return l.stop(e),u.hide(),b("List Menu","Sort Newest First"),this.applySort(function(e){return e.id},{reverse:!0})},t.prototype.sortOldestFirst=function(e){return l.stop(e),u.hide(),b("List Menu","Sort Oldest First"),this.applySort(function(e){return e.id})},t.prototype.applySort=function(e,t){var n,r,o,i,a,s,u,l,d,h;if(null==t&&(t={}),!(this.model.cardList.length<=1)){for(i=this.model.cardList.sortBy(e),t.reverse&&i.reverse(),a=p.chain(i).map(function(e){return[e.id,e.get("pos")]}).object().value(),n=10,r=p.chain(function(){h=[];for(var e=0;n>=0?n>=e:e>=n;n>=0?e++:e--)h.push(e);return h}.apply(this)).map(function(e){return function(e){return Math.round((i.length-1)*e/n)}}(this)).uniq().map(function(e){return _.call(f(i.slice(0,+e+1||9e9),a)).concat(_.call(m(i.slice(e),a)))}).sortBy(function(e){return e.length}).first().value(),s=0,u=r.length;u>s;s++)d=r[s],o=d.card,l=d.pos,o.set("pos",l);return c.using(this.modelCache.getLock(),function(){return v(r,{fx:function(e){var t,n;return t=e.card,n=e.pos,c.fromNode(function(e){return t.update("pos",t.get("pos"),e)})},updatesPerMinute:60,concurrency:5})})}},t.prototype.closeList=function(e){var t,n;return l.stop(e),n=this,t=this.model,b("List Menu","Archive List"),u.hide(),t.close(),!1},t}(d)},{}],580:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e("jquery"),o=e(35),a=e(40),s=e(227),u=e(569),c=e(133),l=e(549),d=e("underscore"),h=e(546),m=e(51),p=e(104),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="move list",t.prototype.tagName="form",t.prototype.events={"change .js-select-list-pos":"renderValues","change .js-select-board":"updateBoardData","click .js-commit-position":"commitChange",submit:"commitChange"},t.prototype.render=function(){var e,t,n,r,i,a,s,u,c,l,d;for(d=this,s=d.model,t={organizations:o.me().getOpenBoardsByOrg(!0)},c=t.organizations,n=0,i=c.length;i>n;n++)for(u=c[n],l=u.boards,r=0,a=l.length;a>r;r++)e=l[r],e.id===s.get("idBoard")&&(e.selected=!0);return this.$el.html(h.fill("popover_move_list",t)),this.updateBoardData(),this},t.prototype.renderValues=function(){var e,t,n,o,i;e=r(this.el),o=e.find(".js-select-board option:selected").val(),i=parseInt(e.find(".js-select-list-pos option:selected").text(),10),t=this.modelCache.get("Board",o),n=t.get("name"),e.find(".js-board-value").text(n),e.find(".js-pos-value").text(String(i))},t.prototype.updateBoardData=function(){var e,t,n,o,i,u,c,l;if(e=r(this.el),n=e.find(".js-select-board"),o=n.find("option:selected").val(),o===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),l=this._boardData.listList.models,i=0,u=l.length;u>i;i++)c=l[i],c.cardCount=this._boardData.listList.get(c.id).openCards().length;this.updateListList()}else t=e.find(".select-list,.select-position"),t.attr("disabled","disabled"),a.loadBoardData(o,s.listsMinimal).then(function(e){return function(){return e._boardData=e.modelCache.get("Board",o),e.updateListList(),t.removeAttr("disabled")}}(this)).done()},t.prototype.updateListList=function(){var e,t,n,o,i,a,s,u,c,l,h,m,f,g;for(g=this,l=g.model,t=this.$(".js-select-list-pos"),t.empty(),h=this._boardData.listList.models,u=this._boardData.id===this.model.getBoard().id,u?(o=d.indexOf(h,this.model),n=h.length):(o=-1,n=h.length+1),a=c=0,f=n;f>=0?f>c:c>f;a=f>=0?++c:--c)s=String(a+1),i=a===o?p("current position",{index:s}):s,m=this._boardData.listList.calcPos(a,l),e=r("<option>").val(m).text(i).appendTo(t),a===o&&e.attr("selected","selected");return this.renderValues()},t.prototype.commitChange=function(e){var t,n,r;c.stop(e),t=this.$(".js-select-list-pos"),r=parseInt(t.find("option:selected").val(),10),n=this.$(".js-select-board option:selected").val(),this.model.getBoard().composer.save("vis",!1),n===this.model.getBoard().id?(this.model.update({pos:r}),m("List Menu","Move Menu","Successfully Moved")):null!=n&&null!=r&&(this.model.update({
idBoard:n,pos:r}),m("List Menu","Move Menu","Changed Board")),u.hide()},t}(l)},{}],581:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N=function(e,t){function n(){this.constructor=e}for(var r in t)V.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},V={}.hasOwnProperty;r=e("jquery"),o=e(35),i=e(82),a=e(432),s=e(442),u=e(7),e(519),c=e(564),w=e(549),p=e(579),f=e(569),v=e(120),O=e(153),A=e(267),m=e(536),g=e("bluebird"),b=e(547),y=e(133),_=e("underscore"),S=e(48),T=e(109),P=e(546),x=e(856),L=e(51),D=e(56),j=e(102),I=e(550),M=e(528),l=e(100),d=e(22),C=e(104),k=e(245),E=e(136),B=e(137),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return N(t,e),t.prototype.className="js-list list-wrapper",t.prototype.events={"click .js-open-list-menu":"openMenu","mousedown .list-cards":"eventStopPropagation","click .js-open-card-composer":"openCardComposer","keydown  .js-list-name-input":"keyDownEvent","blur     .js-list-name-input":"stopEditing","click  .js-editing-target":"startEditing",movelist:"moveList",sortreceive:"sortReceive",sortcommit:"sortCommit","dd-drop:files":"dropFiles","dd-drop:text":"dropText","dd-drop:url":"dropUrl",mouseenter:"mouseenter",mouseleave:"mouseleave",mousemove:"mousemove","userinput-paste:text":"dropText","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl"},t.prototype.initialize=function(){var e,n,o,i,a;for(t.__super__.initialize.apply(this,arguments),this.fEditingName=!1,this.makeDebouncedMethods("toggleComposerLink","renderComposer","renderCardCount","renderName"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:subscribed":this.renderSubscribed}),this.listenTo(this.model.cardList,{"add remove change:idList change:closed reset":this.renderCardCountDebounced}),this.listenTo(this.model.getBoard(),"permChange",this.renderEditable),this.listenTo(this.model.getBoard().composer,{"change:list change:index change:vis":this.renderComposerDebounced,"change:list change:vis":this.toggleComposerLinkDebounced}),this.cardListView=this.collectionSubview(s,this.model.cardList,{className:"list-cards u-fancy-scrollbar u-clearfix js-list-cards",deferCards:this.options.deferCards}),r(window).on("resize."+this.uniqueId(),k(this,"hackFlexboxForSadBrowsers")),a=["mouseEnterCardView","mouseLeaveCardView","mouseMoveCardView"],n=function(e){return function(t){return e.listenTo(e.cardListView,t,function(e){return this.trigger(t,e)})}}(this),o=0,i=a.length;i>o;o++)e=a[o],n(e)},t.prototype.render=function(){return S("render","rendering list "+this.model.get("name")),this.cardListView.$el.detach(),this.$el.html(x({name:this.model.get("name"),subscribed:this.model.get("subscribed"),loggedIn:o.isLoggedIn()})),this.cardListView.$el.insertAfter(this.$(".js-list-header")),this.cardListView.render(),this.cardListView.$el.toggleClass("js-sortable",this.model.editable()),this.toggleComposerLinkDebounced(),this.renderComposerDebounced(),this.renderCardCount(),this.renderEditable(),this.hackFlexboxForSadBrowsers(),_.defer(function(e){return function(){return e.$(".js-list-name-input").autosize({append:!1})}}(this)),this},t.prototype.remove=function(){return r(window).off("."+this.uniqueId()),t.__super__.remove.apply(this,arguments)},t.prototype.renderName=function(){return this.$(".js-list-name-assist").text(this.model.get("name")),this.fEditingName||this.$(".js-list-name-input").val(this.model.get("name")).trigger("autosize.resize",!1),this},t.prototype.renderSubscribed=function(){return this.$(".js-list-subscribed").toggleClass("hide",!this.model.get("subscribed")),this.$(".js-list-header").toggleClass("is-subscribe-shown",this.model.get("subscribed")),this.$(".js-list-name-input").trigger("autosize.resize",!1),this},t.prototype.renderEditable=function(){var e;return e=this.model.editable(),this.$(".js-list-cards").toggleClass("js-sortable",e),e?this.$(".js-list-name-input").removeAttr("disabled"):this.$(".js-list-name-input").attr("disabled","disabled"),this.$(".js-open-card-composer").toggleClass("hide",!e),this},t.prototype.hackFlexboxForSadBrowsers=function(){var e;("explorer-10"===(e=i.browserVersionStr)||"explorer-11"===e)&&this.defer(function(e){return function(){var t,n,o,i,a;return t=e.$el,a=e.$(".list-header").outerHeight(),o=e.$(".open-card-composer").outerHeight(),n=r("#board").height(),i=n-a-o-20,e.$(".list-cards").css({"max-height":i})}}(this))},t.prototype.saveListName=function(e){var t,n,r;t=this.$(".js-list-name-input"),n=this.model.get("name"),r=t.val(),r=r.replace(/\s+/g," ").trim(),r!==n&&(r.length>16384||0!==r.trim().length&&this.model.update("name",r))},t.prototype.keyDownEvent=function(e){return l.getKey(e)===d.Enter?(y.stop(e),void this.stopEditing()):l.getKey(e)===d.Escape?void this.stopEditing():void 0},t.prototype.startEditing=function(e){y.stop(e),this.fEditingName||c.sorting||(this.fEditingName=!0,this.$(".js-editing-target").addClass("is-hidden"),_.defer(function(e){return function(){return e.$(".js-list-name-input").focus().select().addClass("is-editing")}}(this)))},t.prototype.stopEditing=function(e){var t;this.fEditingName&&(this.$(".js-editing-target").removeClass("is-hidden"),t=this.$(".js-list-name-input").removeClass("is-editing"),t.is(":focus")&&t.blur(),B(),this.fEditingName=!1,this.saveListName())},t.prototype.toggleComposerLink=function(){return this.$(".js-open-card-composer").toggleClass("hide",this.composerOpen()||!this.model.editable())},t.prototype.composerOpen=function(){var e,t;return e=null!=(t=this.model.getBoard())?t.composer:void 0,null!=e&&e.get("vis")&&e.get("list")===this.model},t.prototype.renderComposer=function(){var e,t;return this.composerOpen()&&(e=this.model.getBoard().composer,t=u.getCurrentBoardView().subview(a,e),this.insertComposerAtIndex(e.get("index"),t),t.scrollIntoView(),_.debounce(t.delegateEvents(),150)),this},t.prototype.insertComposerAtIndex=function(e,t){var n,r;0===e?this.$(".list-cards").prepend(t.render().el):(r=e-1,n=this.$(".list-card").not(".js-composer"),r>=n.length&&(r=n.length-1),n.eq(r).after(t.render().el))},t.prototype.renderCardCount=function(){return this.$(".js-num-cards").text(j("cards",this.model.openCards().length))},t.prototype.openCardComposer=function(e){var t;y.stop(e),f.hide(),t=this.model.getBoard(),t.composer.save({list:this.model,index:this.model.openCards().length,vis:!0}),L("Card Composer","Open","Via Bottom of List")},t.prototype.triggerOnItem=function(e,t,n){y.stopPropagation(e),this.defer(function(e){return function(){return t.item.trigger(n,[t,e])}}(this))},t.prototype.sortReceive=function(e,t){this.triggerOnItem(e,t,"moveto")},t.prototype.sortCommit=function(e,t){this.triggerOnItem(e,t,"movein")},t.prototype.openMenu=function(e){var t;return t=this,c.sorting?void 0:(y.preventDefault(e),L("List Menu","Open List Menu"),f.toggle({elem:e.currentTarget,view:new p({model:this.model,modelCache:this.modelCache})}),!1)},t.prototype.moveList=function(e,t){var n,r;y.stop(e),n=t.item.parent().children(),r=n.index(t.item),this.model.move(r)},t.prototype.eventStopPropagation=function(e){y.stopPropagation(e)},t.prototype.scrollToCard=function(e){var t;t=this.cardListView.viewForModel(e),y.scrollElementIntoView(this.$(".js-list-cards")[0],t.el,{vertical:!0,animated:!0})},t.prototype.mouseenter=function(e){return this.trigger("mouseEnterListView"),b.addHandler(this,{scope:"list"})},t.prototype.mouseleave=function(e){return this.trigger("mouseLeaveListView"),b.removeHandler(this,{scope:"list"})},t.prototype.mousemove=function(e){return this.trigger("mouseMoveListView")},t.prototype.dropText=function(e){var t;if(this.model.editable())return t=e.detail,this.model.uploadText(t)},t.prototype.dropUrl=function(e){var t,n,r,o,i;if(this.model.editable()){if(e.stopPropagation(),i=e.detail,o=O(i),"card"===o.type)return n=v.isCut(i)?"moveCard":"copyCard",void this.trigger(n,{shortLink:o.shortLink,idList:this.model.id});r=A(i),null!=(t=r.host)&&m.one({timeout:2e3,command:"card-from-url",list:this.model,board:this.model.getBoard(),options:{url:i}}).catch(m.Error.NotHandled,function(){return{}}).then(function(e){return function(n){var r,o;return o=C("loading from domain",{domain:t}),r=_.pick(n,"name","desc"),(null!=n?n.idPlugin:void 0)&&D("board view","creates","Power-Up","","","card-from-url",n.idPlugin),E(e.model,"uploadUrl",i,r,o)}}(this)).done()}},t.prototype.dropFiles=function(e){var t;if(this.model.editable()&&(t=e.detail,!I(this.model.getBoard(),t)))return g.resolve(t).each(function(e){return function(t){var n;return n=t.name||M(),E(e.model,"upload",t,n)}}(this)).catch(function(){}).done()},t}(w)},{}],582:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(587),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.renderMenu=function(){},t}(o)},{}],583:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e(590),o=e(559),i=e(35),s=e(596),u=e(561),c=e(7),l=e(587),d=e(569),p=e(133),h=e("underscore"),m=e(104),f=e(46),g=e(546),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.className="board-member-menu",t.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board,"change:prefs",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-remove-member":"removeMember","click .js-add-to-team":"addMemberToTeam","click .js-change-role":"changeRole"},t.prototype.renderMenu=function(){var e,t,n,r;return t=h.extend(this.model.toJSON(),"function"==typeof(e=this.board).premiumFeatures?e.premiumFeatures():void 0,this.model.getMembershipData(this.board)),r=this.board.getOrganization(),t.boardProfileUrl=c.getMemberBoardProfileUrl(this.model.get("username"),this.board.id),n=this.board.getMemberType(this.model),t.canInviteMemberToTeam=r&&this.canInviteMemberToTeam(r),t.isGhost="virtual"===n,t.type=m(["member types",n]),("superadmin"===n||"deactivated"===n)&&(t.canChangeRole=!1),this.$el.append(g.fillMenu("member_on_board_menu",t,{editable:this.board.editable(),owned:this.board.owned()})),this},t.prototype.canInviteMemberToTeam=function(e){var t,n,r,o,a,s;return e.hasActiveMembership(this.model)?!1:(a=i.me(),o=e.ownedByMember(a),n=e.belongsToRealEnterprise(),t=e.get("idEnterprise"),r=(null!=(s=a.get("idEnterprisesAdmin"))?s.indexOf(t):void 0)>=0,o||n&&r)},t.prototype.changeRole=function(e){p.stop(e),d.pushView({view:new s({model:this.model,parent:this.board,modelCache:this.modelCache})})},t.prototype.removeMember=function(e,t){return p.stop(e),u.pushView(this.model.removeMembershipConfirmationKey(this.board),{confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.board.removeMember(e.model),d.hide()}}(this)})},t.prototype.showError=function(e){var t;return f(new Error("Unknown server error message '"+e+"'")),t=m(["server error","unknown"]),o.showLiteralText(t,"error","alert",5e3)},t.prototype.addMemberToTeam=function(e,t){var n,o,i;p.stop(e),i=this.board.getOrganization(),o=i.belongsToRealEnterprise(),n=i.isBusinessClass(),o||n?d.pushView({view:new r({isBC:n,isEnterprise:o,model:this.model,org:i})}):i.addMember(this.model).then(function(e){return function(){return d.hide()}}(this)).catch(function(e){return function(t){return e.showError(t.message),d.hide()}}(this))},t}(l)},{}],584:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(587),i=e(569),a=e(546),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.events={"click .js-remove-member":"removeMember"},t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.card=this.options.card},t.prototype.renderMenu=function(){return this.$el.append(a.fillMenu("member_on_card_menu",this.model.toJSON(),{editable:this.card.editable()})),this},t.prototype.removeMember=function(e){var t;i.hide(),t=this.model.id,this.card.removeMember(t)},t}(o)},{}],585:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(569),i=e(549),a=e(884),s=e(51),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.getViewTitle=function(){return this.model.get("fullName")},t.prototype.displayType="mod-avdetail",t.prototype.events={"click .js-profile":"showProfile"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(a(e)),this},t.prototype.showProfile=function(){s("Mini Profile","Large Avatar - Click Profile")},t}(i)},{}],586:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(588),s=e(544)(),i=e(133),a=e(549),u=s.renderable(function(e){var t;return t=e.fullName,s.div(".member-full-name-avatar.js-avatar"),s.div(".member-full-name-name",function(){return s.text(t)})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="member-full-name",t.prototype.initialize=function(e){this.board=e.board,this.listenTo(this.model,"change:fullName",this.render)},t.prototype.events=function(){return{click:function(e){return i.stop(e),this.$(e.target).closest(".js-avatar").length?void 0:this.$(".js-avatar .js-member").click()}}},t.prototype.render=function(){var e,t;return this.$el.html(u({fullName:this.model.get("fullName")})),e=this.$(".js-avatar"),t=this.subview(o,this.model,{board:this.options.board}),this.ensureSubview(t,e),this},t}(a)},{}],587:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(35),o=e(592),i=e(598),a=e(585),u=e(40),c=e(569),l=e(133),d=e(549),p=e("underscore"),h=e(897),m=e(51),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},t.prototype.displayType="mod-mini-profile",t.prototype.delegateEvents=function(e){var n;return n={"click .js-profile":"showProfile","click .js-edit-profile":"editProfile","click .js-view-large":"viewLarge","click .js-change-av":"changeAvatar"},t.__super__.delegateEvents.call(this,p.extend(n,e||this.events))},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.isMe=r.isMe(this.model),e.showEmail=null!=e.email&&!e.isMe,null!=e.email||"ghost"!==this.model.get("memberType")||this.loaded||this.loadEmail(),this.$el.html(h(e)),this.renderMenu(),this},t.prototype.loadEmail=function(){return u.loadMemberEmail(this.model.id).then(function(e){return function(){return e.loaded=!0}}(this)).done()},t.prototype.showProfile=function(){m("Mini Profile","Click Profile")},t.prototype.editProfile=function(e){l.stop(e),m("Mini Profile","Click Edit Profile"),c.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.viewLarge=function(e){l.stop(e),m("Mini Profile","View Large Avatar"),c.pushView({view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAvatar=function(e){l.stop(e),m("Mini Profile","Change Avatar"),c.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},t}(d)},{}],588:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),o=e(583),i=e(564),s=e(569),u=e(133),c=e(549),l=e(79),d=e(48),p=e(863),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="member js-member",t.prototype.events={click:"showMenu"},t.prototype.initialize=function(e){this.board=e.board,l(null!=this.model,"You cannot have a deleted member as a board member!"),this.listenTo(this.model,"change",this.render),this.listenTo(this.board,"change:memberships",this.render)},t.prototype.render=function(){var e,t,n;return d("render","rendering "+this.constructor.name+" "+this.model.get("fullName")),e=this.model.toJSON(),t=function(e){return function(t){var n;return n=t.getMembershipFor(e.model),"admin"===(null!=n?n.memberType:void 0)}}(this),e.isBoardAdmin=t(this.board)||(null!=(n=this.board.getOrganization())?n.isPremOrgAdmin(this.model):void 0),e.isGhost="ghost"===this.model.get("memberType"),e.isDeactivated=this.board.isDeactivated(this.model),this.$el.html(p(e)),this.model.isFeatureEnabled("crown")&&this.$el.addClass("has-crown"),this.$el.toggleClass("member-deactivated js-member-deactivated",e.isDeactivated),e.isGhost&&this.$el.addClass("member-virtual"),this.$el.data("id",this.model.id),this},t.prototype.showMenu=function(e){this.doClicks()&&(u.stop(e),s.toggle({elem:e.currentTarget,view:new o({board:this.board,model:this.model,modelCache:this.modelCache})}))},t.prototype.doClicks=function(){return!i.sorting},t}(c)},{}],589:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(559),i=e(569),a=e(133),s=e(549),l=e(546),d=e(51),u=e(104),c=e(46),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="add email",t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){return this.$el.html(l.fill("popover_add_email")),this},t.prototype.showError=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"the email address is already in use":return"address in use";case"this email is already on this account":return"on account";case"invalid email address":return"invalid email address";default:return c(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),this.$("#account-error").text(u(["email error",t])).show()},t.prototype.saveChanges=function(e){var t;return a.preventDefault(e),t=this.$('[name="email"]').val(),this.model.run("logins",{email:t},function(e){return function(t){t?e.showError(t.message):(i.popView(),o.flash("email sent","confirm"),d("Member","Added Email Address"))}}(this))},t}(s)},{}],590:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(559),i=e(569),a=e(133),s=e(549),u=e(924),c=e(104),l=e(103),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="add to team",t.prototype.events={"click .js-add-to-team":"addToTeam"},t.prototype.render=function(){var e;return e=c(["products",this.options.isBC?"bc":"enterprise"]),this.$el.html(u({teamType:e})),this},t.prototype.showError=function(e){var t;return t=l(e),o.showLiteralText(t,"error","alert",5e3)},t.prototype.addToTeam=function(e){return a.preventDefault(e),this.$(".js-add-to-team").attr("disabled",!0).addClass("disabled"),this.options.org.addMember(this.model).then(function(e){return function(){return i.hide()}}(this)).catch(function(e){return function(t){return e.showError(t.message),i.hide()}}(this))},t}(s)},{}],591:[function(e,t,n){var r,o;r=e("react"),o=e(541)("boards_page_add_org_button"),t.exports=r.createClass({displayName:"MemberBoardsAddOrgComponent",render:o.renderable(function(){var e;return e=this.props.onClick,o.div(".boards-page-board-section.u-clearfix",function(){return o.b(e,".quiet-button.u-float-left",function(){return o.format("create-a-new-organization-ellipsis")})})})})},{}],592:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty,y=[].slice;r=e("jquery"),o=e(220),i=e(35),a=e(426),m=e(103),u=e(569),c=e(428),l=e(133),d=e(549),f=e(546),g=e(51),h=e(104),p=e(148),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="change avatar",t.prototype.initialize=function(){return this.listenTo(this.model,"change:avatarSource change:uploadedAvatarHash",this.frameDebounce(this.render))},t.prototype.events={"change .js-upload-avatar":"startUpload","click .js-use-gravatar":"useGravatar","click .js-use-uploaded-avatar":"useUploadedAvatar","click .js-take-photo":"takePhoto","click .js-no-avatar":"clearAvatar"},t.prototype.render=function(){var e,t,n,r,o;return o=this,t=this.model.toJSON({prefs:!0}),t["avatarSource_"+t.avatarSource]=!0,t.canTakePhoto=a.supportsGetUserMedia(),this.$el.html(f.fill("avatar_change",t)),n=this.$(".js-grav"),e=n.find("img"),r="https://secure.gravatar.com/avatar/"+(this.model.get("gravatarHash")+".png?s=50&r=PG&d=404")+("&_="+Math.random()),l.waitForImageLoad(r).then(function(){return n.show()}),this},t.prototype.startUpload=function(e){var t,n,a,s,u,c,d;return u=this.model,s=r(e.target),a=null!=(c=s[0])&&null!=(d=c.files)?d[0]:void 0,t=this.$(".js-error").hide(),null==a||l.validFileSize(a)?(g("Member","Avatar","Use Uploaded - New"),!a&&s.val()?l.uploadFile(i.myToken(),s,this.uploadResult.bind(this)):null!=a?(n=new FormData,n.append("token",i.myToken()),n.append("file",a),o({url:s.closest("form").attr("action"),data:n,type:"post",processData:!1,contentType:!1,error:function(e){return function(t){return e.uploadResult(new Error(m(t)))}}(this),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(y.call(arguments)))}}(this),timeout:12e4})):void 0):(t.text(h("images can not be larger than 10mb")).show(),void g("Member","Avatar","Upload Error - File Too Large"))},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?t.show().text(e):void 0},t.prototype.useUploadedAvatar=function(e){return g("Member","Avatar","Use Uploaded - Existing"),this.model.update("avatarSource","upload"),u.popView()},t.prototype.useGravatar=function(e){return g("Member","Avatar","Use Gravatar"),this.model.update("avatarSource","gravatar"),u.popView()},t.prototype.clearAvatar=function(e){return g("Member","Avatar","Use Initials"),this.model.update("avatarSource","none"),u.popView()},t.prototype.takePhoto=function(e){var t;return t=function(e){return function(t){var n,r;return n=p(t),r=new FormData,r.append("token",i.myToken()),r.append("file",n,"avatar.png"),o({url:"/1/member/"+e.model.id+"/avatar",data:r,type:"post",processData:!1,contentType:!1,error:function(e,t,n,r){var o,i;return i=e.status,o=e.responseText,413!==i?r():void 0},timeout:6e4})}}(this),u.pushView({view:new c({model:this.model,modelCache:this.modelCache,savePhoto:t})}),g("Member","Avatar","Take Photo")},t}(d)},{}],593:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(569),a=e(549),s=e(546),u=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="send emails",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.events={"click li a":"changeFreq"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(s.fill("popover_set_email_freq",e)),this},t.prototype.changeFreq=function(e){var t;t=parseInt(r(e.target).closest("a").attr("value")),u("Member","Changed Email Frequency",this.model.getPref("minutesBetweenSummaries"),t),this.model.setPref("minutesBetweenSummaries",t).save(),i.popView()},t}(a)},{}],594:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e(559),o=e(222),i=e(35),s=e(100),m=e(104),f=e(46),u=e(40),c=e(569),l=e("bluebird"),g=e(544)("change_email"),b=e(51),d=e(133),p=e(549),v=g.renderable(function(e){var t;return t=e.currentEmail,g.p(".error.account-error"),g.label(function(){return g.format("current-email")}),g.div(".js-current-email",function(){return g.text(t)}),g.br(),g.label(function(){return g.format("new-email"),g.input(".full.js-new-email.js-autofocus")}),g.button(".primary.full.js-save-changes.disabled",{disabled:!0},function(){return g.format("change-email")})}),h=g.renderable(function(e){var t;return t=e.email,g.p(function(){return g.format("we-sent-an-email-to-the-address-you-entered",{email:t})}),g.p(function(){return g.format("click-the-link-in-the-email")})}),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="change email",t.prototype.className="member-change-email",t.prototype.events={"click .js-save-changes":"saveChanges","keydown .js-new-email":function(e){return s.isSubmitEvent(e)?this.$(".js-save-changes").click():void 0},"input .js-new-email":function(e){var t,n,r;return n=this.$(".js-new-email").val(),r=/@[^\.]+\.[^\.]+/.test(n),r&&this._loginsPromise.then(function(e){return function(){var t;return n===e.$(".js-new-email").val()?(t=e.model.loginList.any(function(e){return e.get("email")===n}),e.$(".js-send-confirmation").toggleClass("hide",t),e.$(".js-update-email").toggleClass("hide",!t)):void 0}}(this)),t=!r,this.$(".js-save-changes").prop("disabled",t).toggleClass("disabled",t)}},t.prototype.initialize=function(){return this._loginsPromise=u.loadMemberLogins("me")},t.prototype.render=function(){var e,t;return t=i.me(),e=t.get("email"),this.$el.html(v({currentEmail:e})),this._loginsPromise.then(function(e){return function(){return e.$(".js-current-email").text(t.get("email"))}}(this)),this},t.prototype.showError=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"the email address is already in use":return"address in use";case"this email is already on this account":return"on account";case"invalid email address":return"invalid email address";default:return f(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),this.$(".account-error").text(m(["email error",t])).show()},t.prototype.saveChanges=function(e){var t,n;return d.preventDefault(e),t=this.$(".js-save-changes"),n=this.$(".js-new-email").val(),t.prop("disabled",!0).addClass("disabled"),this._loginsPromise.then(function(e){return function(){var r;return r=e.model.loginList.find(function(e){return e.get("email")===n}),r?(e.model.set("email",n),o({url:"/1/members/me/logins/"+r.id+"/primary",type:"put"}).then(function(e){return r.set("primary",!0),c.popView()}).done()):e.model.run("logins",{email:n,primary:!0},function(r){r?(t.prop("disabled",!1).removeClass("disabled"),e.showError(r.message)):(e.$el.html(h({email:n})),b("Member","Changed Email Address"))})}}(this))},t}(p)},{}],595:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(101),a=e(33),s=e(544)(),i=e(549),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="change locale",t.prototype.events={"click .js-select-locale":function(e){return this.selectLocale(e.currentTarget.getAttribute("data-locale"))}},t.prototype.initialize=function(e){return this.onChange=e.onChange,this.listenTo(this.model,"change:prefs.locale",this.render)},t.prototype.selectLocale=function(e){var t;t=this.model.getPref("locale"),this.model.setPref("locale",e,function(n){return function(){return n.onChange(e,t)}}(this))},t.prototype.render=function(){var e,t;return e=this.model.getLocale(),t=function(t,n){s.li(function(){s.a(".js-select-locale",{href:"#","data-locale":t},function(){s.text(n),t===e&&(s.text(" "),s.icon("check"))})})},this.$el.html(s.render(function(){return s.ul(".pop-over-list",function(){var e,n,r,i,s,u;for(n=0,r=a.length;r>n;n++)u=a[n],e=u.code,i=u.name,s=o.normalizeLocale(e),t(s,i)})})),this},t}(i)},{}],596:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e("jquery"),o=e(220),i=e(35),s=e(561),u=e(569),c=e(133),l=e(549),d=e("underscore"),h=e(546),m=e(51),p=e(104),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="change permissions",t.prototype.initialize=function(){this.parent=this.options.parent,this.listenTo(this.parent,"change:memberships",this.render)},t.prototype.events={"click .js-make-admin":"makeAdmin","click .js-make-member":"makeMember","click .js-make-observer":"makeObserver"},t.prototype.render=function(){var e,t,n,r,o,i,a;for(a=this,e=this.model.getMembershipData(this.parent),e.showObserver=this.parent.hasObservers(),e.canMakeAdmin=this.model.get("confirmed"),r=function(){if("Organization"===this.parent.typeName)return"org roles";if("Board"===this.parent.typeName)return"board roles";throw new Error("A fragile abstraction has broken")}.call(this),o=this.parent.getAvailableRoles(),t=0,n=o.length;n>t;t++)i=o[t],e["roleText_"+i]=p([r,i,"text"]);return null==e.roleText_admin&&(e.roleText_admin=e.roleText_superadmin),this.$el.html(h.fill("popover_change_roles",e)),this},t.prototype.apiChangeRole=function(e){this.$el.find("ul a").addClass("disabled"),this.parent.changeMemberRole(this.model,{type:e}).done(),u.hide()},t.prototype.getMemberType=function(){return this.parent.getExplicitMemberType(this.model)},t.prototype.isAdminAndMe=function(){return"admin"===this.getMemberType()&&i.isMe(this.model)},t.prototype.makeAdmin=function(e){c.stop(e),r(e.target).closest("a").hasClass("disabled")||"admin"!==this.getMemberType()&&this.apiChangeRole("admin")},t.prototype.makeMember=function(e){c.stop(e),r(e.target).closest("a").hasClass("disabled")||"normal"!==this.getMemberType()&&(this.isAdminAndMe()?s.pushView("demote admin to normal member",{fxConfirm:function(e){return function(t){return e.apiChangeRole("normal")}}(this)}):this.apiChangeRole("normal"))},t.prototype.makeObserver=function(e){c.stop(e),r(e.target).closest("a").hasClass("disabled")||"observer"!==this.getMemberType()&&(this.isAdminAndMe()?s.pushView("demote admin to observer",{fxConfirm:function(e){return function(t){return e.apiChangeRole("observer")}}(this)}):this.apiChangeRole("observer"))},t}(l)},{}],597:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;
return-1};o=e(569),i=e(133),a=e(549),u=e(546),c=e(51),s=e(104),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.frameDebounce(this.render))},t.prototype.viewTitleKey=function(){return p.call(this.model.get("loginTypes"),"password")<0?"set password":"change password"},t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0,hasPassword:!0}),this.$el.html(u.fill("popover_change_set_password",e)),this},t.prototype.getValue=function(e){return this.$("[name="+e+"]").val()},t.prototype.showPasswordError=function(e){return this.$("#password-error").text(s(["password error",e])).show()},t.prototype.saveChanges=function(e){var t,n,r;return i.preventDefault(e),this.$("#password-error").hide(),r=this.getValue("oldpassword"),t=this.getValue("password"),n=this.getValue("password2"),t||n?void(t!==n?this.showPasswordError("must match"):this.model.run("updatePassword",{oldPassword:r,newPassword:t},function(e){return function(t){return null==t?(c("Member","Changed Password"),void o.popView()):void e.showPasswordError(function(){switch(t.message.trim()){case"invalid value for newPassword":return"not long enough";case"The old password was incorrect":return"old password";default:return"unknown"}}())}}(this))):void 0},t}(a)},{}],598:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),i=e(7),a=e(569),s=e(133),u=e(549),d=e(546),p=e(51),c=e(104),l=e(46),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change name and bio",t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(d.fill("popover_change_user_info",e)),this},t.prototype.getValue=function(e){return this.$("[name="+e+"]").val()},t.prototype.showError=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"username is taken":return"username taken";case"username must be at least 3 characters":return"username too short";case"username is invalid: only lowercase letters, underscores, and numbers are allowed":return"username invalid";case"full name must be at least 1 character":return"full name too short";case"initials must contain 1-4 characters":return"initials wrong length";default:return l(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),this.$("#account-error").text(c(["member profile error",t])).show()},t.prototype.saveChanges=function(e){var t,n,o,u,c,l,d;for(l=this,s.preventDefault(e),t={},this.$("#account-error").hide(),c=["fullName","initials","username","bio"],n=0,o=c.length;o>n;n++)u=c[n],t[u]=r.trim(this.getValue(u));t.username=t.username.toLowerCase().replace(/[^a-z0-9_]/g,""),t.initials=t.initials.toUpperCase(),d=i.getMemberProfileUrl(this.model.get("username"))===i.location,this.model.update(t,{waitForServer:!0},function(e){return function(t){t?e.showError(t.message):(a.popView(),d&&i.setLocation({location:i.getMemberProfileUrl(e.model.get("username"))}),p("Member","Successfully Change User Info"))}}(this))},t}(u)},{}],599:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e("react"),a=e(541)("boards_page_gold_banner"),i=e(257),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.displayName="GoldBanner",t.prototype.render=a.renderable(function(){var e,t,n,r,o,s,u;return o=this.props,e=o.hasGold,t=o.invitedMemberNames,n=o.localizedMonthsOfCreditMessage,r=o.onDismissBanner,e?(u="welcome heading-upgrade",s=[{key:"tip-power-ups",props:{url:"https://trello.com/power-ups?utm_source=welcome-banner&utm_medium=inapp&utm_term=gold-subscribe"}},{key:"tip-board backgrounds",props:{url:"http://help.trello.com/article/818-changing-board-backgrounds?utm_source=welcome-banner&utm_medium=inapp&utm_term=gold-subscribe"}},{key:"tip-premium stickers",props:{url:"http://help.trello.com/article/817-trello-gold-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=gold-subscribe"}}]):(u="welcome heading-recommendation",s=[{key:"tip-these people joined",props:{invited_members:t.join(", ")}},{key:"tip-account settings",props:{url:"/my/account?utm_source=welcome-banner&utm_medium=inapp&utm_term=gold-recommend"}},{key:"tip-learn trello gold",props:{url:"http://help.trello.com/article/817-trello-gold-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=gold-recommend"}}]),a.div(".gold-banner",function(t){return function(){return a.button(".icon-lg.icon-close",{onClick:r}),a.div(".gold-banner-content",function(){return a.div(".gold-banner-welcome-section",function(){return a.h1(".gold-banner-welcome-heading",function(){return a.format(u)}),a.p(".gold-banner-welcome-subheading",function(){return e?a.format("welcome subheading-upgrade"):a.text(n)})}),a.ol(".gold-banner-tip-list",function(){return i.map(s,function(e,t){return a.li(".gold-banner-tip-list-item",function(){return a.span(".gold-banner-tip-list-item-bullet",{"aria-hidden":!0}),a.span(".gold-banner-tip-list-item-text",function(){return e.hasOwnProperty("props")?a.format(e.key,e.props):a.format(e.key)})})})})})}}(this))}),t}(o.Component),t.exports=r},{}],600:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),o=e(35),s=e(599),c=e("react"),l=e("react-dom"),d=e(540),p=e(549),h=e("underscore"),f=e("recup"),v=e(546),m=e(102),g=e(19),i=g.GOLD_RECOMMENDATION,a=g.GOLD_UPGRADE,t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.initialize=function(){return this.listenTo(o.me(),{"change:oneTimeMessagesDismissed":this.frameDebounce(this.render)})},t.prototype.getReactRoot=function(){return c.createElement(d,{},this.getGoldBanner())},t.prototype.renderReactSection=function(){return l.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.render=function(){return null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$el.append(this.$reactRoot),this.renderReactSection(),this},t.prototype.getGoldBanner=function(){var e,t,n,r,u,c,l,d;return l=this.options,e=l.banner,n=l.idNuxBannersToDismiss,r=e.invitedMemberNames,u=e.numCreditMonths,d=e.type,t=(n||[]).concat([d]),c=function(e){return function(){return t.forEach(function(t){return e.model.dismiss(t)})}}(this),f.render(function(e){return function(){return o.isMe(e.model)?d!==a||e.model.isDismissed(a)?d!==i||e.model.isDismissed(i)?f.div():f.div(function(){return f.createElement(s,{hasGold:!1,invitedMemberNames:r,onDismissBanner:c,localizedMonthsOfCreditMessage:m("months of trello gold on us",u)})}):f.div(function(){return f.createElement(s,{hasGold:!0,onDismissBanner:c})}):f.div()}}(this))},t.prototype.remove=function(){return l.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(p)},{}],601:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(220),o=e(561),i=e(83),s=e(133),u=e(549),c=e("underscore"),d=e(546),l=e(104),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.className="member-login",t.prototype.events={"click .js-primary":"setPrimary","click .js-remove":"confirmDeleteLogin"},t.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.dateAdded=s.idToDate(e.id).toISOString(),this.$el.html(d.fill("member_login",e)),i.update(this.el),this},t.prototype.setPrimary=function(e){return r({url:"/1/members/me/logins/"+this.model.id+"/primary",type:"put",success:function(e){return function(t){return e.model.set("primary",!0)}}(this)})},t.prototype.confirmDeleteLogin=function(e){return s.stop(e),this.model.hasConflict()?void this.trigger("requestSetPassword"):o.toggle("delete credential",this.popover({html:l("confirm.delete credential.text",{email:this.model.get("email")}),confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.deleteLogin()}}(this)}))},t.prototype.popover=function(e){return c.extend({elem:this.$(".js-remove")},e)},t.prototype.deleteLogin=function(){return r({url:"/1/members/me/logins/"+this.model.id,type:"delete",success:function(e){return function(t){return e.model.trigger("destroy",e.model,e.model.collection)}}(this)})},t}(u)},{}],602:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S=function(e,t){function n(){this.constructor=e}for(var r in t)T.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},T={}.hasOwnProperty;C=e("underscore"),r=e("jquery"),o=e(589),i=e(35),a=e(592),u=e(594),s=e(593),c=e(595),l=e(597),d=e(598),p=e(562),m=e(604),f=e(615),g=e(616),v=e(617),b=e(621),y=e(622),w=e(624),_=e(569),k=e(133),x=e(546),j=e(51),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:loginTypes change:prefs change:tokens change:credentials",this.frameDebounce(this.renderMainContent))},t.prototype.events={"click .js-change-avatar":"changeAvatar","click .js-change-name-and-bio":"changeUserInfo","click .js-change-password":"changePassword","click .js-change-email":"changeEmail","click .js-change-locale":"changeLocale","click .js-configure-2fa":"configure2FA","click .js-change-email-freq":"changeEmailFreq","click .js-allow-desktop-notifications":"allowDesktopNote","click .js-toggle-cb-mode":"toggleCB","click .js-confirm-delete-member":"deleteConfirm","click .js-add-email":"addEmail","click .js-mobile-temp-password":"mobileTempPassword"},t.prototype.renderMainContent=function(){var e,t,n,r;return n=this.model.toJSON({prefs:!0,hasPassword:!0}),n["avatarSource_"+n.avatarSource]=!0,n.canAllowDesktopNotifications=p.notEnabled(),n.cbEnabled=this.model.get("prefs").colorBlind,n.showMobileLoginPassword=C.any(this.model.get("credentials"),function(e){return"saml"===e.type}),this.$(".js-content").html(x.fill("member_account",n,{editable:i.isMe(this.model)})),this.$(".js-member-applications").html(this.subview(m,this.model).render().el),this.$(".js-member-sessions").html(this.subview(b,this.model).render().el),t=this.$(".js-credentials-section"),e=this.$(".js-credentials-list"),e.empty(),this.model.get("logins").length>0&&(r=this.collectionSubview(v,this.model.loginList,{model:this.model}),this.appendSubview(r,e)),this.$(".js-content").prepend(this.subview(g,this.model,{allowDismiss:!1}).render().el),this.setActiveView(".js-member-account"),this},t.prototype.changeUserInfo=function(e){return k.stop(e),j("Member View","Settings Page","Open Change User Info Menu"),_.toggle({elem:this.$(".js-change-name-and-bio"),view:new d({model:this.model,modelCache:this.modelCache})})},t.prototype.addEmail=function(e){return k.stop(e),j("Member View","Settings Page","Open Add Email Menu"),_.toggle({elem:r(e.target),view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.mobileTempPassword=function(e){return k.stop(e),j("Member View","Settings Page","Generate Temporary Mobile Password"),this.model.getMobileTempPassword(function(t){return _.toggle({elem:r(e.target),view:new w({tempPassword:t})})})},t.prototype.changeAvatar=function(e){return k.stop(e),j("Member View","Settings Page","Open Change Avatar Menu"),_.toggle({elem:this.$(".js-change-avatar"),view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.changePassword=function(e){return k.stop(e),j("Member View","Settings Page","Open Change Password Menu"),_.toggle({elem:this.$(".js-change-password"),view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.changeEmail=function(e){return k.stop(e),j("Member View","Settings Page","Open Change Email Menu"),_.toggle({elem:this.$(".js-change-email"),view:new u({model:this.model,modelCache:this.modelCache})})},t.prototype.configure2FA=function(e){return j("Member View","Settings Page","Configure 2FA")},t.prototype.changeLocale=function(e){var t;return k.stop(e),j("Member View","Settings Page","Change Language"),t=function(e,t){return e!==t?document.location.reload():void 0},_.toggle({elem:this.$(".js-change-locale"),view:new c({model:this.model,modelCache:this.modelCache,onChange:t})})},t.prototype.changeEmailFreq=function(e){return k.stop(e),j("Member View","Settings Page","Open Change Frequency Menu"),_.toggle({elem:this.$(".js-change-email-freq"),view:new s({model:this.model,modelCache:this.modelCache})})},t.prototype.allowDesktopNote=function(e){k.stop(e),j("Member View","Settings Page","Allow Desktop Notifications"),p.requestPermission().finally(function(e){return function(){return e.render()}}(this))},t.prototype.toggleCB=function(e){k.stop(e),j("Member View","Settings Page","Toggle Color Blind Mode"),this.model.toggleColorBlindMode()},t.prototype.deleteConfirm=function(e){k.stop(e),j("Member View","Settings Page","Open Delete Account Confirmation Menu"),_.toggle({elem:this.$(".js-confirm-delete-member"),view:new f({model:this.model,modelCache:this.modelCache})})},t}(y)},{}],603:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),o=e(35),a=e(569),s=e(630),u=e(632),c=e(133),l=e(549),d=e(51),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.hoverMember=function(e){var t;return t=r(e.target).closest(".item"),c.selectMenuItem(this.$(".pop-over-member-list"),".item",t)},t.prototype.openOption=function(e){var t,n,i,l;c.stop(e),d("Invitations","Open Role Selector"),l=r(e.target).closest(".js-select-member").find(".username").text(),i=this.modelCache.findOne("Member","username",l),n=!1,r(e.target).closest(".item.js-email-invite").length>0&&(n=!0,t=r(e.target).closest(".js-email-invite").find(".full-name").attr("name")),i?a.pushView({view:new s({modelCache:this.modelCache,model:i,parent:this.model,onSendInvite:this.willBePopped.bind(this),canMakeAdmin:i.get("confirmed")})}):a.pushView({view:new u({model:o.me(),modelCache:this.modelCache,parent:this.model,email:t,onSendInvite:this.willBePopped.bind(this),canMakeAdmin:!1})})},t}(l)},{}],604:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(634),i=e(549),a=e(546),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=function(){var e,t,n,r,i;return e=this.model.toJSON({prefs:!0}),i=null!=(t=e.tokens)?t:[],e.hasTokens=i.length>0,this.$el.html(a.fill("member_application_list",e)),r=function(){var e,t,r;for(r=[],e=0,t=i.length;t>e;e++)n=i[e],r.push(this.subview(o,this.model,n,n.id));return r}.call(this),this.appendSubviews(r,this.$(".js-list-member-applications")),this},t}(i)},{}],605:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(135),o=e("react"),a=e(541)("member"),t.exports=r=function(e){function t(e){t.__super__.constructor.call(this,e)}return s(t,e),t.prototype.displayName="MemberAvatar",t.prototype.shouldComponentUpdate=i,t.prototype.render=a.renderable(function(){var e,t,n,r,o,i,s,u,c;return u=this.props,e=u.avatarHash,c=u.username,t=u.fullName,n=u.initials,o=u.isDeactivated,r=u.isBoardAdmin,i=u.isOrganizationAdmin,s=u.onClick,a.div(function(){var s,u,l;return l=t+" ("+c+")",e?(s=[window.avatarDomain,e,"30.png"].join("/"),u=[window.avatarDomain,e,"50.png"].join("/"),a.img({class:"member-avatar",height:"30",width:"30",src:s,srcSet:s+" 1x, "+u+" 2x",alt:l,title:l})):null!=n&&a.span(".member-initials",{title:l},function(){return a.text(n)}),o||(r&&a.span(".member-type.admin",{title:a.l("this-member-is-an-admin-of-this-board")}),i&&a.span(".member-type.admin",{title:a.l("this-member-is-an-admin-of-this-organization")})),a.span(".member-gold-badge",{title:a.l("this-member-has-trello-gold")})})}),t}(o.Component)},{}],606:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N=function(e,t){function n(){this.constructor=e}for(var r in t)V.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},V={}.hasOwnProperty;r=e("jquery"),o=e(74),a=e(218),s=e(35),c=e(317),l=e(318),d=e(319),p=e(561),h=e(7),f=e(320),m=e(323),i=e(322),T=e(330),E=e(331),C=e(329),v=e(25),b=e(622),y=e(40),w=e(226),_=e(294),k=e(569),u=e(314),x=e("react"),j=e("react-dom"),S=e(540),O=e(332),M=e(104),A=e(245),B=e("moment"),P=e(113),D=e(546),I=e(51),L=e("recup"),t.exports=g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return N(t,e),t.prototype.renderMainContent=function(){return I("Member Billing Page","Open"),this.$(".js-content").empty(),null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-billing"),this.renderBanner(),this},t.prototype.renderReactSection=function(){return j.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){var e;return x.createElement(S,{},o.hasAccount(null!=(e=this.model.get("paidAccount"))?e.standing:void 0)?this.getBillingComponent():this.getSignUpForGoldComponent())},t.prototype.getBillingComponent=function(){var e;return e=O(this.model,v,{type:"gold",productName:M("products.gold"),productIconClass:"trello-gold",detailsUrl:"/gold",onRenewClick:A(this,"renew"),cancelProduct:A(this,"cancel"),onSwitchToYearly:A(this,"switchToYearly"),didntGetAuthStatus:function(e){return function(){return y.loadMemberAccountData(e.model.get("username")).done()}}(this),didGetAuthStatus:function(e){return function(){return y.loadMemberAccountData(e.model.get("username")).done()}}(this),onChangeBillingContactClick:A(this,"changeBillingContactPopover"),reactivateProduct:A(w,"reactivate",this.model),changeCreditCard:A(w,"changeCreditCard",this.model),createPaidAccount:A(w,"createAccount",this.model),paidAccountPoll:A(a,{url:this.model.urlRoot+"/"+this.model.id+"?paid_account=true"}),onClickChangeCC:A(this,"changeCreditCardPopover"),onChangeAdditionalDetailsClick:A(this,"changeAdditionalDetailsPopover")}),x.createElement(u,e)},t.prototype.getSignUpForGoldComponent=function(){return L.render(function(e){return function(){return L.div(function(){var t;return L.createElement(_,{stringsKey:"gold",subtitleCount:1,infoUrl:"/gold",epilogueCount:0,icon:"trello-gold"}),t=v.currentPriceObjectForModel(e.model),L.div(".billing",function(){var n,r,o,u,c,l;return L.createElement(f,{defaultProduct:t.yearly.productNumber,monthlyProduct:t.monthly,yearlyProduct:t.yearly,onSubmit:A(w,"createAccount",e.model),doPoll:A(a,{url:e.model.urlRoot+"/"+e.model.id+"?paid_account=true"}),buttonKey:"upgrade-me",contentBuilders:[P(C,{productName:"Trello Gold",monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.yearly.productNumber,billingStrategy:t.billingStrategy}),P(m),P(i),P(T,{monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.yearly.productNumber,billingStrategy:t.billingStrategy}),P(E)],extraData:{billingContactFullName:null!=(n=null!=(r=e.model.get("paidAccount"))?r.contactFullName:void 0)?n:s.me().get("fullName"),billingContactEmail:null!=(o=null!=(u=e.model.get("paidAccount"))?u.contactEmail:void 0)?o:s.me().get("email"),billingContactLocale:null!=(c=null!=(l=e.model.get("paidAccount"))?l.contactLocale:void 0)?c:s.me().getPref("locale")},didntGetAuthStatus:function(){return y.loadMemberAccountData(e.model.get("username")).done()},didGetAuthStatus:function(){return h.memberBoardsView()}})})})}}(this))},t.prototype.renderBanner=function(){var e,t,n,r,o,i;if(this.model.get("idPremOrgsAdmin").length>0&&(e=this.model.organizationList.filter(function(e){return!e.paysWithPurchaseOrder()}),e.length>0))for(n=D.fill("member_billing_org_link_list"),this.$(".js-content").prepend(n),r=0,o=e.length;o>r;r++)i=e[r],t=i.toJSON(),i.isPremium()&&i.owned()&&(t.billingLink=h.getOrganizationBillingUrl(i),this.$(".js-org-link-list").append(D.fill("member_billing_org_link",t)));return this},t.prototype.cancel=function(){return I("Member View","Billing Page","Cancel Gold"),w.cancel(this.model).then(function(e){return function(t){return I("Member","Successfully Canceled Paid Account"),e.model.set(t)}}(this))},t.prototype.renew=function(){return I("Member View","Billing Page","Renew Expiring Gold Subscription"),w.renew(this.model).then(function(e){return function(t){return I("Member","Successfully Renewed Expiring Yearly Gold Subscription"),e.model.set(t)}}(this)).done()},t.prototype.switchToYearly=function(e){return p.toggle("yearly billing switch",{elem:e,model:this.model,confirmBtnClass:"primary",fxConfirm:function(e){return function(t){return w.changeProduct(e.model,v.currentProducts.yearly).then(function(t){return I("Organization","Successfully Switched Business Class to Yearly Billing"),e.model.set(t)}).done()}}(this)})},t.prototype.changeBillingContactPopover=function(e){return I("Member View","Billing Page","Open Change Billing Contact Info"),k.toggle({elem:e,view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.changeCreditCardPopover=function(e){return I("Member View","Billing Page","Open Change Credit Card"),k.toggle({elem:e,view:new d({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAdditionalDetailsPopover=function(e){return I("Member View","Billing Page","Open Change Additional Details"),k.toggle({elem:e,view:new c({model:this.model,modelCache:this.modelCache})})},t.prototype.remove=function(){return j.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(b)},{}],607:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(157),o=e(170),i=e(285),s=e(227),c=e(548),u=e(549),l=e(109),d=e(546),t.exports=l(c,a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActions"},t.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board.memberList,"add remove reset",this.frameDebounce(this.render)),this.actionListView=this.collectionSubview(i,new o(this.model.getActions(this.board),{modelCache:this.modelCache}),{renderOpts:{context:this.model,readOnly:!0}}),this.listenTo(this.modelCache,"add:Action:"+this.model.id+" remove:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.model.getActions(e.board),{silent:!0}),e.renderActions()}}(this)),this.idModels=[this.board.id],this.nextPage=0,this.loadMoreActions()},t.prototype.render=function(){return this.$el.html(d.fill("board_member_profile",this.model.toJSON())),this.actionListView.setElement(this.$(".list-actions")[0]),this.renderActions()},t.prototype.renderActions=function(){return this.actionListView.render(),this.$(".js-more-actions").toggle(this.hasMoreActions()),this},t.prototype.getActionsFilter=function(){return s.memberActions},t}(u))},{}],608:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z,R,F,$,U,q,H=function(e,t){function n(){this.constructor=e}for(var r in t)W.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},W={}.hasOwnProperty;P=e("underscore"),r=e("jquery"),o=e(35),i=e(349),a=e(350),s=e(351),u=e(352),c=e(356),l=e(357),d=e(358),p=e(359),h=e(591),m=e(16),f=e(7),v=e(403),g=e(344),b=e(650),y=e(83),D=e(245),z=e(104),L=e(345),C=e(616),_=e(600),j=e(626),w=e(563),S=e(569),T=e("bluebird"),E=e("react"),O=e("react-dom"),A=e(540),F=e("recup"),I=e(88),$=e(546),U=e(51),q=e(56),M=e(133),B=e(549),x=e(39),R=e(136),V=e(132),N=e(131),t.exports=k=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return H(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset change:memberships",this.frameDebounce(this.renderBanner)),this.listenTo(this.model.organizationList,"add remove reset change:name change:displayName change:logoHash change:products",this.frameDebounce(this.renderReactSection)),this.listenTo(this.model.boardList,"add remove reset change:name change:idOrganization change:dateLastActivity change:dateLastView",this.frameDebounce(this.renderReactSection)),this.listenTo(this.model.boardStarList,"add remove reset change:pos",this.renderReactSection),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderReactSection),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderBanner)},t.prototype.className="member-boards-view",t.prototype.getReactRoot=function(){return E.createElement(A,{},this.getMemberBoardsElements())},t.prototype.renderReactSection=function(){return O.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.renderBanner=function(){var e,t,n,r,o;return e=this.$(".js-boards-page-banners").empty(),o=V(this.model),t=o.bannerToDisplay,r=o.idBannersToDismiss,n=N(this.model),t?n&&!t.doesIncludeGold?e.prepend(this.subview(_,this.model,{banner:n,idNuxBannersToDismiss:r}).render().el):(e.prepend(new j({bannerToDisplay:t,idBannersToDismiss:r,model:this.model}).render().el),U("Boards Page","NUX Banner Displayed",t.type),q("Boards Page","display","nux banner","","to a user","",t.type)):n?e.prepend(this.subview(_,this.model,{banner:n}).render().el):void 0},t.prototype.render=function(){return this.$el.html('<div class="js-boards-page-banners"></div><div class="js-boards-page"></div>'),null==this.$reactRoot&&(this.$reactRoot=this.$(".js-boards-page")),this.renderReactSection(),this.renderBanner(),this},t.prototype.getMemberBoardsElements=function(){return F.render(function(e){return function(){return F.div(function(){var t,n,r,o,s,u;for(u=(null!=m?m.enabled:void 0)&&!e.model.isDismissed(m.id)&&window.locale===m.locale&&Date.now()<y.parse(m.dateExpires),u&&(e._recordedDisplayed||(e._recordedDisplayed=!0,U("Boards Page Announcement","Displayed",m.id)),F.createElement(i,{icon:m.icon,message:m.message,onClick:function(e){return null!=e.target.href?U("Boards Page Announcement","Click",m.id,e.target.href):void 0},onDismiss:function(t){return e.model.dismiss(m.id),U("Boards Page Announcement","Dismiss",m.id)}})),o={items:e.getStarredBoards().map(D(e,"boardToBoardItemDndElement")),header:e.getStarredBoardsHeader(),noSidebarMod:!0,isStarredSection:!0},o.items.length>0&&F.createElement(l,o),o={items:e.getMyBoards().map(D(e,"boardToBoardItemElement")),header:e.getMyBoardsHeader(),mayBeSorted:!0,noSidebarMod:!0,createNewItem:E.createElement(a,{preloadData:D(e,"preloadCreateBoardData"),newBoard:D(e,"newBoard",e.model)}),isPersonalSection:!0},F.createElement(c,o),s=e.model.getSortedOrgs(),t=0,n=s.length;n>t;t++)r=s[t],o={items:e.getOrgBoards(r).map(D(e,"boardToBoardItemElement")),header:e.getOrgHeader(r),mayBeSorted:!0,noSidebarMod:!0,createNewItem:E.createElement(a,{preloadData:D(e,"preloadCreateBoardData"),newBoard:D(e,"newBoard",r)}),orgId:r.id,orgName:r.get("name")},F.createElement(c,o);return F.addElement(e.getAddOrgButtonElement())})}}(this))},t.prototype.backgroundObjForBoard=function(e){var t,n,r,o;return P.extend({brightness:e.getPref("backgroundBrightness")},e.getPref("backgroundTile")?{image:e.getPref("backgroundImage"),tiled:!0}:(t=null!=(n=null!=(r=M.smallestPreviewBiggerThan(e.getPref("backgroundImageScaled"),400,200))?r.url:void 0)?n:e.getPref("backgroundImage"))?{image:t,tiled:!1}:{color:null!=(o=e.getPref("backgroundColor"))?o:e.getClientBackgroundColor("blue")})},t.prototype.boardToBoardItemDndElement=function(e){var t,n;return t=this.boardToBoardItemProps(e),t.onDragHover=function(t){return function(t){var n,r,i,a;return r=o.me().boardStarList,n=r.getBoardStar(t),i=r.getBoardIndex(e.id),a=r.getNewPos(n,i),n.set({pos:a})}}(this),t.onDragEnd=function(){var t,n;n=o.me().boardStarList,t=n.getBoardStar(e.id),T.using(x.getLock(),function(){return R(t,"update",{pos:t.get("pos")}).catch(function(){})}).done()},t.orgname=null!=(n=e.getOrganization())?n.get("displayName"):void 0,t.isDraggable=!0,E.createElement(u,t)},t.prototype.boardToBoardItemElement=function(e){return E.createElement(s,this.boardToBoardItemProps(e))},t.prototype.boardToBoardItemProps=function(e){var t;return{id:e.id,name:e.get("name"),hasUnseenActivity:e.hasUnseenActivity(),dateLastActivity:new Date(null!=(t=e.get("dateLastActivity"))?t:M.idToDate(e.id)),isLessActive:e.isLessActive(),background:this.backgroundObjForBoard(e),showOptions:o.isLoggedIn(),isStarred:null!=o.me().boardStarList.getBoardStar(e.id),relUrl:e.getUrl(),onStarClick:function(e){return function(e){var t;t=o.me().boardStarList,T.using(x.getLock(),function(){return null==t.getBoardStar(e)?t.starBoard(e):t.unstarBoard(e)}).done()}}(this),badgeComponents:[],tagComponents:[],key:e.id}},t.prototype.preloadCreateBoardData=function(){var e,t;return t=null!=(e=I("createBoardWithBackground"))?e.get("enabled"):void 0,t?L.preloadData():void 0},t.prototype.newBoard=function(e,t){var n,r;r=null!=(n=I("createBoardWithBackground"))?n.get("enabled"):void 0,r?w.show({displayType:"mod-no-chrome",opacity:.75,reactElement:E.createElement(g,{defaultOrg:null!=e.memberList?e:void 0})}):S.toggle({elem:t,top:0,view:v,options:{model:e,modelCache:this.modelCache}}),U("Boards View","Clicked 'Create new board' Button")},t.prototype.getAddOrgButtonElement=function(){var e;return e={onClick:D(this,"showAddOrgPopOver")},E.createElement(h,e)},t.prototype.showAddOrgPopOver=function(e){return U("Boards View","Clicked Add Org Button"),S.toggle({elem:e,top:0,view:b,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.getMyBoardsHeader=function(){return E.createElement(d,{title:z("board section title.personal boards"),iconClass:"member"})},t.prototype.getMyBoards=function(){return P.filter(this.model.boardList.models,function(e){return!e.isOrgBoard()&&e.isOpen()})},t.prototype.getOrgHeader=function(e){var t;return t={title:e.get("displayName"),iconClass:"organization",logoHash:e.get("logoHash"),linkElements:[{url:f.getOrganizationUrl(e),iconClass:"board",titleKey:"boards",trackOnClick:function(){return U("Boards View","Clicked Team Boards Button")}},{url:f.getOrganizationMembersUrl(e),iconClass:"member",titleKey:"members",trackOnClick:function(){return U("Boards View","Clicked Team Members Button")}},{url:f.getOrganizationAccountUrl(e),iconClass:"gear",titleKey:"settings",trackOnClick:function(){return U("Boards View","Clicked Team Settings Button")}}].map(D.choke(1,E,"createElement",p))},e.isFeatureEnabled("enterpriseUI")?(t.smallIconClass="enterprise",t.smallIconTitleKey="enterprise"):e.isPremium()&&(t.smallIconClass="business-class",t.smallIconTitleKey="business-class"),
E.createElement(d,t)},t.prototype.getOrgBoards=function(e){return P.filter(this.model.boardList.models,function(t){return function(t){var n;return(null!=(n=t.getOrganization())?n.id:void 0)===e.id&&t.isOpen()}}(this))},t.prototype.getStarredBoardsHeader=function(){return E.createElement(d,{title:z("board section title.starred boards"),iconClass:"star"})},t.prototype.getStarredBoards=function(){return P.filter(this.model.boardStarList.getBoards(),function(e){return e.isOpen()})},t.prototype.remove=function(){return O.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(B)},{}],609:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;l=e("underscore"),d=e(79),r=e(15),o=e(517),i=e(447),a=e(7),p=e(104),h=e(758),m=e(872),u=e(133),c=e(549),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.className="window-module",t.prototype.initialize=function(e){return this.cards=e.cards,d(this.cards.length>0)},t.prototype.events=function(){return{click:function(e){return this.$(e.target).closest("a").length?void 0:a.navigate(a.getBoardUrl(this.model),{trigger:!0})}}},t.prototype.render=function(){var e,t,n,a,s,c,d,f,g,v,b,y,w,_,k;if(f=null!=(d=this.model.getOrganization())?{url:d.get("url"),name:d.get("displayName")}:void 0,c=l.groupBy(this.cards,function(e){return e.get("idList")}),this.$el.html(m({name:this.model.get("name"),url:this.model.get("url"),permissionLevel:this.model.get("prefs").permissionLevel,starred:this.model.isStarred(),org:f,lists:this.model.listList.chain().filter(function(e){return c[e.id]}).map(function(e){return{id:e.id,name:e.get("name")}}).value()})),t=this.$(".js-permission-level"),a={permIconClass:o.getPermLevelIconClassForBoard(this.model),permText:p(["board perms",this.model.getPermLevel(),"name"])},t.html(h(a)),g=this.model.get("prefs"),e=this.$(".js-board"),null!=g.backgroundColor)s=this.model.getClientBackgroundColor(g.background),e.css({"background-color":s});else{switch(k=r.hasOwnProperty(g.background)&&null!=(v=null!=(b=u.smallestPreviewBiggerThan(g.backgroundImageScaled,640,480))?b.url:void 0)?v:g.backgroundImage,_=g.backgroundTile?k:null!=(y=null!=(w=u.smallestPreviewBiggerThan(g.backgroundImageScaled,64,64))?w.url:void 0)?y:g.backgroundImage,e.addClass("body-custom-board-background"),g.backgroundTile&&e.addClass("body-custom-board-background-tiled"),n=g.backgroundBrightness){case"light":e.addClass("body-light-board-background");break;case"dark":e.addClass("body-dark-board-background")}e.css({"background-image":'url("'+k+'")'})}return l.each(this.$(".js-list"),function(e){return function(t){var n,r,o;return n=e.$(t),r=n.attr("data-idList"),o=l.chain(c[r]).sortBy(function(e){return e.get("pos")}).map(function(t){return e.subview(i,t)}).value(),e.appendSubviews(o,n)}}(this)),this},t}(c)},{}],610:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(83),o=e(450),a=e(133),s=e(549),u=e("underscore"),c=e(546),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="window-module",t.prototype.initialize=function(e){this.templateData=e.templateData},t.prototype.render=function(){var e;return e={iconType:"clock",isOverdue:!1,isDueSoon:!1},u.extend(e,this.templateData),this.groupedCards.length>0?(this.$el.html(c.fill("member_cards_date",e)),this.renderCards()):this.$el.empty(),this},t.prototype.renderCards=function(){var e;return e=this.groupedCards.map(function(e){return function(t){return e.subview(o,t,{showBoard:!0})}}(this)),this.appendSubviews(e,this.$(".js-list"))},t}(s)},{}],611:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(282),i=e(569),a=e(133),s=e(549),u=e(875),c=e(51),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="filter cards",t.prototype.initialize=function(){return this.listenTo(o,"change:cardsPageFilter",function(){return this.render()})},t.prototype.events={"click .js-set-filter":"setFilter"},t.prototype.render=function(){return this.$el.html(u({filter:o.getCardsPageFilter()})),this},t.prototype.setFilter=function(e){var t;t=this.$(e.currentTarget).attr("data-filter"),a.stop(e),o.setCardsPageFilter(t),i.hide(),c("Member View","Cards Page","Filter",t)},t}(s)},{}],612:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(35),i=e(282),a=e(569),s=e(133),u=e(549),l=e(876),d=e(51),c=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="filter cards",t.prototype.initialize=function(){return this.listenTo(i,"change:cardsPageGroup",function(){return this.render()})},t.prototype.events={"click .js-set-group":"setGroup"},t.prototype.render=function(){var e;return e=r.isMe(this.model)?this.model.organizationList.models:this.modelCache.find("Organization",function(e){return function(t){return null!=t.getMembershipFor(e.model)}}(this)),this.$el.html(l({group:i.getCardsPageGroup(),organizations:c.chain(e).map(function(e){return{id:e.id,name:e.get("displayName")}}).sortBy(function(e){var t;return t=e.name,t.toLowerCase()}).value()})),this},t.prototype.setGroup=function(e){var t;t=this.$(e.currentTarget).attr("data-group"),s.stop(e),i.setCardsPageGroup(t),a.hide(),d("Member View","Cards Page","Group",t)},t}(u)},{}],613:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(282),i=e(569),a=e(133),s=e(549),u=e(877),c=e(51),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="sort cards",t.prototype.initialize=function(){return this.listenTo(o,"change:cardsPageSortType",function(){return this.render()})},t.prototype.events={"click .js-sort-by-board":"sortByBoard","click .js-sort-by-due-date":"sortByDueDate"},t.prototype.render=function(){return this.$el.html(u({sort:o.getCardsPageSortType()})),this},t.prototype.sortByBoard=function(e){a.stop(e),o.sortCardsPageByBoard(),i.hide(),c("Member View","Cards Page","Sort by Board")},t.prototype.sortByDueDate=function(e){a.stop(e),o.sortCardsPageByDate(),i.hide(),c("Member View","Cards Page","Sort by Due Date")},t}(s)},{}],614:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A=function(e,t){function n(){this.constructor=e}for(var r in t)M.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},M={}.hasOwnProperty,B=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(221),o=e(35),i=e(7),a=e(83),k=e(815),s=e(609),c=e(611),l=e(612),u=e(610),d=e(613),h=e(282),m=e(622),f=e(40),g=e(569),v=e("bluebird"),b=e(133),y=e("underscore"),T=e(544)(),E=e(871),O=e(51),S=e("moment"),x=e(104),_=function(e){return Date.now()-b.getMs({days:e})},w=function(e){return function(t){return a.parse(t.get("dateLastActivity"))>_(e)}},C={"active-day":w(1),"active-week":w(7),"active-month":w(30),"active-year":w(365),all:function(e){return!0}},j=T.renderable(function(){return T.div(".spinner.loading")}),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this._oldestLoaded=null,this._loadedUnknown={},this.listenTo(this.model.boardList,"add remove reset",this.frameDebounce(this.renderMainContent)),this.listenTo(this.model.organizationList,"add remove reset change:memberships",this.frameDebounce(this.renderMainContent)),this.listenTo(h,"change:cardsPageSortType change:cardsPageGroup",function(){return this.renderCardsSection()}),this.listenTo(h,"change:cardsPageGroup",function(){return this._updateUrl()}),this.listenTo(h,"change:cardsPageFilter",function(){return this.getData()}),v.try(function(e){return function(){var t,n,r;return t=e.options.orgname&&null!=(r=e.modelCache.findOne("Organization","name",e.options.orgname))?r.id:void 0,null==t&&(t=e.getSelectedGroup()),n=function(t){var n;return"personal"===t||"all"===t?!0:(n=e.modelCache.get("Organization",t),null!=(null!=n?n.getMembershipFor(e.model):void 0)||B.call(e.model.get("idOrganizations"),t)>=0)},n(t)?t:f.loadOrganizationMembersMinimal(t).then(function(e){return n(t)?t:"all"})}}(this)).then(function(e){return function(t){return e.getSelectedGroup()!==t&&h.setCardsPageGroup(t),t!==e.options.orgname?e._updateUrl():void 0}}(this)).done()},t.prototype.events={"click .js-toggle-sort":"toggleSort","click .js-set-filter":"toggleFilter","click .js-set-group":"toggleGroup"},t.prototype._updateUrl=function(){var e,t,n;return e=this.getSelectedGroup(),n=(t=this.modelCache.get("Organization",e))?i.getMemberCardsUrl(this.model.get("username"),t.get("name")):"personal"===e?i.getMemberCardsUrl(this.model.get("username"),"personal"):i.getMemberCardsUrl(this.model.get("username")),i.navigate(n,{replace:!0})},t.prototype.renderMainContent=function(){return this.setActiveView(".js-member-cards"),this.$(".js-content").html(E({showGroup:"all"!==this.getSelectedGroup()||this.model.organizationList.length>0})),this.renderCardsSection(),this},t.prototype.getData=function(){var e,t,n,i,a,s;return e=this.getFilterType(),t=this.getSelectedGroup(),n=function(){switch(e){case"active-day":return _(1);case"active-week":return _(7);case"active-month":return _(30);case"active-year":return _(365);default:return void 0}}(),a=_(14600),i=null!=n?n:a,s=function(e){return function(){return e.loading=!0,e.renderCardsSection()}}(this),v.try(function(e){return function(){var n;if(!o.isMe(e.model)&&!e._loadedMemberships)return e._loadedMemberships=!0,s(),n=o.me(),f.loadMyOrganizations().then(function(){var r;return r=n.organizationList.filter(function(e){return e.isFeatureEnabled("deactivated")}),0!==r.length?f.loadMemberOrganizationsDeactivatedMembers().then(function(){var n;return"all"===t?(n=r.filter(function(t){return t.isDeactivated(e.model)}),v.map(n,function(t){return f.loadOrgMemberCardData(t.id,e.model.id).then(function(){return e._loadedUnknown[t.id]=!0})},{concurrency:3})):void 0}):void 0})}}(this)).then(function(e){return function(){var r;if(b.checkId(t)){if(e._loadedUnknown[t])return;if(r=e.modelCache.get("Organization",t),null==r||r.isDeactivated(e.model)||null==r.getMembershipFor(e.model))return s(),f.loadOrgMemberCardData(r.id,e.model.id).then(function(){return e._loadedUnknown[r.id]=!0,e._oldestLoaded=a})}return null==e._oldestLoaded||e._oldestLoaded>i?(s(),f.loadMemberCards(e.model.id,n).then(function(){return e._oldestLoaded=i})):void 0}}(this)).catch(r,function(e){return function(){}}(this)).then(function(e){return function(){return e.loading=!1,e.renderCardsSection()}}(this)).done()},t.prototype.getCards=function(){var e,t;return e=this.getFilterType(),t=this.getSelectedGroup(),this.modelCache.find("Card",function(n){return function(r){var o;return o=r.getBoard(),r.isOpen()&&r.hasMember(n.model)&&(null!=o?o.isOpen():void 0)&&function(){switch(t){case"all":return!0;case"personal":return null==(null!=o?o.getOrganization():void 0);default:return(null!=o?o.get("idOrganization"):void 0)===t}}()&&(!C.hasOwnProperty(e)||C[e](r))}}(this))},t.prototype.getSortType=function(){return h.getCardsPageSortType()},t.prototype.getFilterType=function(){return h.getCardsPageFilter()},t.prototype.getSelectedGroup=function(){var e;return e=h.getCardsPageGroup(),"personal"===e||"all"===e||null!=this.modelCache.get("Organization",e)?e:"all"},t.prototype.renderSortText=function(){var e,t;return this.$(".js-sort-text").html(x(["sorting cards by",this.getSortType()])),this.$(".js-filter-text").html(x(["filtering cards by",this.getFilterType()])),e=this.getSelectedGroup(),this.$(".js-group-text").html("personal"===e?x(["showing cards in group","personal"]):null!=e&&null!=(t=this.modelCache.get("Organization",e))?x(["showing cards in group","organization"],{name:t.get("displayName")}):x(["showing cards in group","all"]))},t.prototype.toggleSort=function(e){b.stop(e),O("Member View","Cards Page","Open Sorting Options"),g.toggle({elem:this.$(".js-toggle-sort"),view:new d({model:this.model,modelCache:this.modelCache})})},t.prototype.toggleFilter=function(e){b.stop(e),O("Member View","Cards Page","Open Filtering Options"),g.toggle({elem:this.$(".js-set-filter"),view:new c({model:this.model,modelCache:this.modelCache})})},t.prototype.toggleGroup=function(e){return b.stop(e),O("Member View","Cards Page","Open Group Options"),g.toggle({elem:this.$(".js-set-group"),view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.clearContent=function(){return this.$(".js-cards-content").empty()},t.prototype.renderCardsSection=function(){if(this.clearContent(),this.renderSortText(),this.loading)this.renderLoading();else switch(this.getSortType()){case"board":this.renderBoardSort();break;case"date":this.renderDateSort()}},t.prototype._appendNoVisibleCards=function(){var e,t;t=x(o.isMe(this.model)?"no assigned cards.at all":"no assigned cards.that you can see"),e={message:t,classes:"gutter",style:"padding: 60px 10px;"},this.$(".js-cards-content").html(k(e))},t.prototype.renderLoading=function(){return this.$(".js-cards-content").html(j())},t.prototype.renderBoardSort=function(){var e,t,n,r,o,i,a,u,c;for(r=this.getCards(),o=!1,n=y.chain(r).map(function(e){return e.getBoard()}).uniq().compact().filter(function(e){return null!=e?e.isOpen():void 0}).sortBy(function(e){return e.get("name").toLowerCase()}).sortBy(function(e){return e.isStarred()?0:1}).value(),i=0,u=n.length;u>i;i++)e=n[i],t=y.filter(r,function(t){return function(t){return t.get("idBoard")===e.id}}(this)),a=y.chain(t).pluck("id").sort().value().join(","),y.isEmpty(t)||(o=!0,c=this.subview(s,e,{cards:t},a),this.appendSubview(c,this.$(".js-cards-content")));return o||this._appendNoVisibleCards(),this},t.prototype.renderDateSort=function(){var e,t,n,r,i,s,c,l,d,p,h,m;n=function(e,t){var n,r;return r=S().add(e,"days"),n=S().add(t,"days"),function(e,t){return!t&&S(e).isBetween(r,n)}},e=function(e){var t;return t=e.get("due"),null!=t?a.parse(t):null},s={"overdue cards":{fxTest:function(e,t){return!t&&S(e).isBefore(S())},data:{isOverdue:!0}},"due in the next day":{fxTest:n(0,1),data:{isDueSoon:!0}},"due in the next 7 days":{fxTest:n(1,7)},"due in the next month":{fxTest:n(7,28)},"due later":{fxTest:function(e,t){return!t&&S(e).isAfter(S().add(28,"days"))}},"due date met":{fxTest:function(e,t){return t}},"cards with no due date":{fxTest:function(e){return null==e},data:{iconType:"card"}}},h=y.sortBy(this.getCards(),function(e){return function(e){var t;return null!=(t=e.get("due"))?t:""}}(this)),c=!1;for(l in s)d=s[l],r=d.fxTest,t=d.data,i=h.filter(function(t){return function(t){return r(e(t),t.get("dueComplete"))}}(this)),y.isEmpty(i)||(c=!0,m=y.extend({header:x(["card group headers",l])},t),p=this.subview(u,o.me(),{templateData:m},"datesectionview-"+l),p.groupedCards=i,this.appendSubview(p,this.$(".js-cards-content")));return c||this._appendNoVisibleCards(),this},t}(m)},{}],615:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(559),i=e(569),a=e(133),s=e(549),c=e(546),l=e(51),u=e(104),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="delete account",t.prototype.events={"click .js-delete-member":"deleteMember","click .js-cancel-delete":"cancelDeleteMember"},t.prototype.render=function(){var e;return e=this,this.$el.html(c.fill("popover_confirm_member_delete",this.model.toJSON())),this},t.prototype.deleteMember=function(e){a.stop(e),this.$(".js-delete-member").attr("disabled","disabled"),this.model.run("deleteAccount",{msg:"troodbye!"},function(){i.hide(),r.flash("email sent","confirm"),l("Member","Sent Account Delete Email")})},t.prototype.cancelDeleteMember=function(e){a.stop(e),i.hide()},t}(s)},{}],616:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(559),o=e(35),i=e(25),s=e(40),u=e(133),c=e(549),l=e("underscore"),d=e(881),p=e(882),h=e(104),m=e(102),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderDebounced),this.listenTo(this.model,"change:paidAccount",this.renderDebounced)},t.prototype.events={"click .js-close-modal":"closeGoldEarned","click .js-close-intro-helper":"closeGoldIntro","click .js-start-using-gold":"startUsingGold"},t.prototype.render=function(){var e,t,n,r,i,a;return this.$el.empty(),o.isMe(this.model)?(a=this.viewShown,this.model.isGold()&&!this.model.isDismissed("GoldIntro")?(this.viewShown="intro",this.$el.html(p({hasThreePowerups:this.model.isFeatureEnabled("threePlugins")}))):this.model.isDismissed("GoldEarned")&&this.options.allowDismiss||this.activating||(this.viewShown="earned",t=this.model.get("credits"),i=l.filter(t,function(e){var t;return!e.applied&&e.count>0&&("invitation"===(t=e.type)||"promoCode"===t)}),e=l.reduce(i,function(e,t){return e+t.count},0),e&&(e>12&&(e=12),r=l.chain(i).filter(function(e){return"invitation"===e.type&&null!=e.memberInvited}).pluck("memberInvited").pluck("fullName").value(),n={hasInvitations:r.length>0,joinedNames:r,localizedCongratulations:m("months of trello gold",e),showClose:this.options.allowDismiss,hasGold:this.model.isGold()},this.$el.html(d(n)))),null!=a&&a!==this.viewShown&&this.delegateEvents(),this):this},t.prototype.refreshPaidAccount=function(){return null==this.startedPolling&&(this.startedPolling=Date.now()),this.startedPolling+u.getMs({minutes:1})<Date.now()?(r.hide("activating"),void r.show("activating gold timeout","error","activating-failed")):s.loadMemberPaidAccount(this.model.id).then(function(e){return function(){e.model.isGold()?(delete e.startedPolling,e.activating=!1,r.hide("activating")):e.setTimeout(l.bind(e.refreshPaidAccount,e),u.getMs({seconds:1}))}}(this)).done()},t.prototype.startUsingGold=function(e){return u.stop(e),this.activating=!0,r.show("activating gold","info","activating"),this.render(),this.model.run("unpaidAccount",{products:[i.productShortNames.trelloGoldMonthly]},function(e){return function(t,n){return null==t&&n?e.refreshPaidAccount():void 0}}(this))},t.prototype.closeGoldEarned=function(e){return u.stop(e),this.model.dismiss("GoldEarned")},t.prototype.closeGoldIntro=function(e){return u.stop(e),this.model.dismiss("GoldIntro")},t}(c)},{}],617:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(597),o=e(518),i=e(561),a=e(601),u=e(569),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewType=a,t.prototype.initialize=function(){return this.listenTo(this,"requestSetPassword",this.showSetPassword),t.__super__.initialize.apply(this,arguments)},t.prototype.showSetPassword=function(e){return i.toggle("cant remove credential",e.popover({confirmBtnClass:"confirm",fxConfirm:function(t){return function(n){return u.show(e.popover({view:r,options:{model:t.model,modelCache:t.modelCache}}))}}(this)}))},t}(o)},{}],618:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(39),i=e(527),a=e(40),s=e(210),u=e(636),c=e("react"),d=e(541)("member_notifications"),l=e("underscore"),r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.loadMore=this.loadMore.bind(this),this.updateNotifications=this.updateNotifications.bind(this),this.state={nextPage:1,isMore:!1,notifications:[]}}return p(t,e),t.prototype.displayName="MemberNotifications",t.prototype.componentDidMount=function(){return this.props.listenTo("add:Notification remove:Notification change:Notification",this.updateNotifications),this.updateNotifications()},t.prototype.updateNotifications=function(){var e;return e=s.sortedByDateDescending(o),this.setState({notifications:e,isMore:!0,nextPage:Math.floor(e.length/s.PAGE_SIZE)})},t.prototype.loadMore=function(){return a.loadMoreNotificationData(this.props.member.get("username"),this.state.nextPage).then(function(e){return function(t){return e.setState({isMore:t.length>s.PAGE_SIZE-1})}}(this)).done()},t.prototype.render=d.renderable(function(){return d.div(function(e){return function(){return d.div(".window-module-title",function(){return d.span(".window-module-title-icon.icon-lg.icon-notification"),d.h3(function(){return d.format("notifications")})}),0===e.state.notifications.length&&d.div(".empty-list",function(){return d.format("no-notifications")}),d.div(".js-list-notifications",function(){return d.createElement(u,{notifications:e.state.notifications,context:"notifications-page"})}),d.a(".show-more.js-more-notifications",{onClick:e.loadMore,class:d.classify({hide:!e.state.isMore})},function(){return d.format("load-more-notifications")})}}(this))}),t}(c.Component),t.exports=i(r)},{}],619:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;a=e(40),o=e(618),s=e("react"),u=e("react-dom"),c=e(540),d=e("recup"),l=e(549),r=e("jquery"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.className="member-notifications-view",t.prototype.renderOnce=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$el.prepend(this.reactRoot),this.renderReactSection(),this},t.prototype.getReactRoot=function(){return s.createElement(c,{},this.getNotificationListComponent())},t.prototype.renderReactSection=function(){return u.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getNotificationListComponent=function(){return d.render(function(e){return function(){return d.div(function(){return d.createElement(o,{member:e.model})})}}(this))},t}(l)},{}],620:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e(170),o=e(285),a=e(622),s=e(679),u=e(227),c=e(548),l=e(109),d=e(546),p=e(51),t.exports=l(c,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActionsAndRemoveDateLimit"},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),p("Member Profile Page","Open"),this.limit=10,this.nextPage=1+Math.floor(this.getActions().length/this.limit),this.daysBack=u.memberProfile_daysBack,this.actionListView=this.collectionSubview(o,new r(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{context:this.model,showBoard:!0,showOrganization:!0,readOnly:!0}}),this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.renderMainContent)),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.getActions(),{silent:!0}),e.renderActions()}}(this))},t.prototype.renderMainContent=function(){var e;return e=this.model.toJSON(),this.setActiveView(".js-member-profile"),this.$(".js-content").html(d.fill("member_profile",e)),this.defer(function(e){return function(){var t,n;return e.model.organizationList.length>0?(n=e.subview(s,e.model),t=e.$(".js-list-orgs").empty(),e.appendSubview(n,t)):e.$(".js-list-orgs").closest(".window-module").hide(),e.actionListView.setElement(e.$(".list-actions")[0]),e.renderActions()}}(this)),this},t.prototype.renderActions=function(){return 0===this.actionListView.collection.length?this.actionListView.$el.html(d.fill("actions_empty",{daysBack:this.daysBack})):this.actionListView.render(),this.$(".js-more-actions").toggleClass("hide",!this.hasMoreActionsOrDateLimited()),this},t.prototype.hasMoreActionsOrDateLimited=function(){return null!=this.daysBack||this.hasMoreActions()},t.prototype.loadMoreActionsAndRemoveDateLimit=function(){return this.daysBack=null,this.loadMoreActions()},t.prototype.getActionsFilter=function(){return u.memberActions},t}(a))},{}],621:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(633),i=e(133),a=e(549),s=e("underscore"),u=e(546),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:sessions",this.frameDebounce(this.render))},t.prototype.events={"click .js-log-out-other":"logOutOther"},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),this.$el.html(u.fill("member_session_list",e)),n=function(){var n,r,i,a,s;for(a=null!=(i=e.sessions)?i:[],s=[],n=0,r=a.length;r>n;n++)t=a[n],s.push(this.subview(o,this.model,t,t.id));return s}.call(this),this.ensureSubviews(n,this.$(".js-sessions")),this},t.prototype.logOutOther=function(e){return i.stop(e),this.model.run("logoutOtherSessions"),this.model.set("sessions",s.filter(this.model.get("sessions"),function(e){return function(e){return e.isCurrent}}(this))),this.render()},t}(a)},{}],622:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e(74),o=e(35),i=e(592),s=e(106),h=e(103),c=e(569),l=e(543),d=e(133),p=e(549),f=e(109),g=e(546),v=e(51),b=e("xtend"),m=e(878),a=e(41),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),f(l,t),t.prototype.initialize=function(){this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username change:bio change:prefs change:paidAccount",this.render),this.listenTo(this.model,"change:initials change:fullName change:username change:bio",this.renderDetails)},t.prototype.events={"click .js-change-avatar-profile":"changeAvInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,b(t.prototype.events,e||this.events))},t.prototype.render=function(){var e,t,n,i;return t=o.isMe(this.model),e=this.model.toJSON(),this.model.organizationList.models.length>0&&(e.showOrgs=!0),t&&(i=null!=(n=e.paidAccount)?n.standing:void 0,e.hasAccount=this.model.hasMemberOrOrgAccount(),e.accountProblem=r.isProblem(i),e.isMe=!0,e.upsellEnabled=!a.get("dontUpsell")),e.hasCrown=this.model.isFeatureEnabled("crown"),e.editable=t,this.$el.html(m(e)),this.renderDetails(),this.renderMainContent(),this},t.prototype.renderDetails=function(){var e,t;return t=o.isMe(this.model),e=this.model.toJSON(),e.bioHtml=s.markdownAsHtml(e.bio,{textData:e.bioData}),e.hasCrown=this.model.isFeatureEnabled("crown"),this.$(".js-current-details").empty().append(g.fill("member_detail_profile_info",e,{editable:t})),t&&this.$(".js-profile-form").empty().append(g.fill("member_detail_profile_edit",e,{editable:t})),this},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeAvInProfile=function(e){d.stop(e),v("Member View","Header","Change Avatar Menu"),c.toggle({elem:this.$(".js-change-avatar-profile"),view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){d.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),v("Member View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){d.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset()},t.prototype.submitProfile=function(e){var t,n,r,o,i;if(d.stop(e),!this.disabled){for(t={},i=["fullName","username","bio","initials"],r=0,o=i.length;o>r;r++)n=i[r],t[n]=this.$(".js-profile-form [name="+n+"]").val();t.initials=t.initials.toUpperCase(),this.disableSubmit(),this.model.update(t,{waitForServer:!0},function(e){return function(t){var n;e.disabled=!1,e.$(".js-submit-profile").removeAttr("disabled"),t?(n=t.message.trim().toLowerCase(),e.$(".js-profile-form-error").removeClass("hide").text(h(n))):(e.$(".js-profile-form-error").addClass("hide"),e.cancelEditProfile(),v("Member","Successfully Change User Info"))}}(this))}},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t}(p)},{}],623:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(35),i=e(40),a=e(569),s=e(133),u=e(549),c=e("underscore"),l=e(546),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="voters",t.prototype.events={"click .js-more-members-voted":"showAll","click .js-vote":"vote","click .js-unvote":"unvote"},t.prototype.initialize=function(){return i.loadCardVoters(this.model.id).done(),this.listenTo(this.model.memberVotedList,"add remove reset",this.frameDebounce(this.render))},t.prototype.showAll=function(){return this.render(!0)},t.prototype.render=function(e){var t,n,o;return o=this.model.memberVotedList,t={members:function(){var e,t,r,i;for(r=o.models,i=[],e=0,t=r.length;t>e;e++)n=r[e],i.push(n.toJSON());return i}()},e!==!0&&(t.members=t.members.slice(0,48),t.loading=0===o.length,t.fewMembers=o.length<14,t.moreMembers=o.length>48,t.lengthDiff=o.length-48,t.canVote=this.model.getBoard().canVote(r.me()),t.voted=c.include(this.model.get("idMembersVoted"),r.myId())),this.$el.html(l.fill("members_voted",t,{},{member:l.member})),this},t.prototype.vote=function(e){return s.preventDefault(e),this.model.vote(!0),!1},t.prototype.unvote=function(e){return s.preventDefault(e),this.model.vote(!1),0===this.model.get("idMembersVoted").length&&a.hide(),!1},t}(u)},{}],624:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,
e},u={}.hasOwnProperty;o=e(549),i=e(544)("member_account"),a=i.renderable(function(e){var t;return t=e.tempPassword,i.p(function(){return i.format("temporary-mobile-password")}),i.p(".u-text-align-center",function(){return i.strong(function(){return i.text(t)})})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewTitleKey="temporary mobile password",t.prototype.render=function(){return this.$el.html(a({tempPassword:this.options.tempPassword})),this},t}(o)},{}],625:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;s=e("react"),l=e(541)("nux_boards_page_banner"),u=e("underscore"),c=e(28),i=c.ORG_TYPE_ENTERPRISE,o=c.ORG_TYPE_BUSINESS_CLASS,a=c.ORG_TYPE_FREE,r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.displayName="NUXBanner",t.prototype.render=l.renderable(function(){var e,t,n,r,a,s,c,d,p,h,m,f,g,v;return p=this.props,t=p.heading,a=p.isUpgrade,s=p.onDismissBanner,c=p.orgDisplayName,d=p.orgType,m=p.subheading,f=p.teamheading,g=p.tips,v=p.utmTerm,n=d===o,r=d===i,h=function(){switch(!0){case r:return".nux-banner-section-ent";case n:return".nux-banner-section-bc";default:return".nux-banner-section"}}(),e=".nux-banner-content",a&&(e+=".nux-banner-content-upgraded-org"),l.div(".nux-banner",function(n){return function(){return l.button(".icon-lg.icon-close",{onClick:s}),l.div(h,function(){return l.div(e,function(){return l.div(".nux-banner-welcome-section",function(){return l.h1(".nux-banner-welcome-heading",function(){return l.format(t)}),l.p(".nux-banner-welcome-subheading",function(){return f&&c&&(l.format(f,{team_name:c}),l.raw("<br/>")),l.format(m)})}),l.ol(".nux-banner-tip-list",function(){return u.map(g,function(e,t){return l.li(".nux-banner-tip-list-item",function(){return l.span(".nux-banner-tip-list-item-index",{"aria-hidden":!0},function(){return l.text(t+1)}),l.span(".nux-banner-tip-list-item-text",function(){return e.imgSrc?(l.format(e.key),l.a({href:e.url,target:"_blank"},function(){return l.img(".nux-banner-tip-list-app-download-button",{alt:l.l(e.imgAlt),src:e.imgSrc})})):e.url?l.format(e.key,{url:e.url}):l.format(e.key)})})})})})})}}(this))}),t}(s.Component),t.exports=r},{}],626:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),o=e(35),i=e(82),a=e(625),u=e("react"),c=e("react-dom"),l=e(540),d=e(118),m=e(549),f=e("underscore"),g=e("recup"),v=e(546),p={key:"tip-download app",url:"https://play.google.com/store/apps/details?id=com.trello",imgAlt:"tip-google play",imgSrc:"https://a.trellocdn.com/images/buttons/2d8bf64328f6c2666c1d5a3558fd7042/btn-playstore.png"},h={key:"tip-download app",url:"https://itunes.apple.com/app/trello-organize-anything/id461504587",imgAlt:"tip-app store",imgSrc:"https://a.trellocdn.com/images/buttons/0c89bea1f934eadd07d8284fead760d6/btn-appstore.png"},t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.initialize=function(){return this.listenTo(o.me(),{"change:oneTimeMessagesDismissed":this.frameDebounce(this.render)})},t.prototype.getReactRoot=function(){return u.createElement(l,{},this.getNuxBanner())},t.prototype.renderReactSection=function(){return c.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.render=function(){return null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$el.append(this.$reactRoot),this.renderReactSection(),this},t.prototype.getNuxBanner=function(){var e,t,n,r,o,s,u;return u=this.options,e=u.bannerToDisplay,n=u.idBannersToDismiss,t=function(e){return function(){return n.forEach(function(t){return e.model.dismiss(t)})}}(this),r=i.isAndroid(),o=i.isIos(),s=e.tips.length-1,r?e.tips[s]=p:o&&(e.tips[s]=h),g.render(function(n){return function(){return g.div(function(){return g.createElement(a,f.extend({onDismissBanner:t},e))})}}(this))},t.prototype.remove=function(){return c.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(m)},{}],627:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(596),o=e(7),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.apiChangeRole=function(e){return t.__super__.apiChangeRole.apply(this,arguments),"admin"!==e&&this.isAdminAndMe()?o.navigate(o.getOrganizationUrl(this.parent),{trigger:!0}):void 0},t}(r)},{}],628:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;s=e(546),o=e(549),i=e(544)("select_member"),a=i.renderable(function(e){var t,n;return n=e.text,t=e.extraText,i.li({class:"item js-member-item"},function(){return i.a({href:"#",class:"js-select-member ",title:n,autocompleteText:n},function(){return i.span(".text",{title:"card"},function(){return i.text(t)})})})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.render=function(){return this.$el.html(a(this.options)),this},t}(o)},{}],629:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,s=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(631),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.initialize=function(){return this.listenTo(this.options.card,"change:idMembers",this.renderActive)},t.prototype.renderActive=function(){var e;return this.$(".js-member-item").toggleClass("active",(e=this.model.id,s.call(this.options.card.get("idMembers"),e)>=0))},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.renderActive(),this},t}(o)},{}],630:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e("jquery"),o=e(559),i=e(220),a=e(166),s=e(212),u=e(569),l=e(133),d=e(549),p=e("underscore"),f=e(546),g=e(51),h=e(104),m=e(103),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="add as",t.prototype.initialize=function(){if(this.parent=this.options.parent,this.member=this.model,this.isBoard=this.isOrg=!1,this.objText="",this.didSendInvite=!0,this.parent instanceof a)this.isBoard=!0,this.objText="Board",this.invitationList=this.parent.invitationList;else{if(!(this.parent instanceof s))throw new Error("A fragile abstraction has broken");this.isOrg=!0,this.objText="Org"}return this.invitationList=this.parent.invitationList},t.prototype.events={"click .js-invite":"invite"},t.prototype.render=function(){var e,t,n,r,o,i;for(e={showAdmin:this.parent.owned(this.member)&&this.options.canMakeAdmin,showObserver:this.parent.hasObservers()},r=function(){if(this.isBoard)return"board roles";if(this.isOrg)return"org roles";throw new Error("A fragile abstraction has broken")}.call(this),o=this.parent.getAvailableRoles(),t=0,n=o.length;n>t;t++)i=o[t],e["roleText_"+i]=h([r,i,"text"]);return null==e.roleText_admin&&(e.roleText_admin=e.roleText_superadmin),this.$el.html(f.fill("manage_members_select_role",e)),this},t.prototype.invite=function(e){var t,n,a;l.stop(e),t=r(e.target).closest(".js-invite"),a=t.hasClass("js-select-admin")?"admin":t.hasClass("js-select-member")?"normal":t.hasClass("js-select-observer")?"observer":void 0,i({url:"/1/"+this.parent.typeName.toLowerCase()+"/"+this.parent.id+"/members/"+this.member.id,type:"put",data:{type:a},dataType:"json",success:function(e){return function(e){return g("Invitations","Add Member to Board","Role: "+a)}}(this),error:function(e){return function(e,t){var n;n=m(e),o.showLiteralText(n,"error","alert",3e3),g("Invitations","Error: "+e.responseText)}}(this)}),"function"==typeof(n=this.options).onSendInvite&&n.onSendInvite(),this.options.onSendInvite=null,u.hide()},t}(d)},{}],631:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(546),o=e(549),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(){},t.prototype.render=function(){var e;return e=this.model.toJSON(),"ghost"===this.model.get("memberType")&&(e.isVirtual=!0),e.unconfirmed=this.options.showUnconfirmed&&!e.isVirtual&&!e.confirmed,e.inactive=this.options.showInactive&&!e.active,e.isKnownMember=this.options.isKnownMember,e.extraText=this.options.extraText,e.disabled=this.options.disabled,this.options.linkName?e.url="/"+this.model.get("username"):delete e.url,this.$el.html(i.fill("select_member",e,{},{member:i.member})),this.$(".js-member").data("id",this.model.id),this},t}(o)},{}],632:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),o=e(204),i=e(569),a=e(630),u=e(133),c=e(51),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.invite=function(e){var t,n;u.stop(e),t=r(e.target).closest(".js-invite"),n=t.hasClass("js-select-admin")?"admin":t.hasClass("js-select-member")?"normal":t.hasClass("js-select-observer")?"observer":void 0,o.prototype.create.call(this,{model:this.parent,data:{type:n,email:this.options.email},success:function(e){return function(t){return c("Invitations","Send Email "+e.objText+" Invite to New Member","Role: "+n)}}(this)}),i.popView()},t}(a)},{}],633:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(83),a=e(549),s=e("underscore"),u=e(546),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="member-account-session",t.prototype.events={"click .js-revoke":"revoke"},t.prototype.render=function(){var e,t;return e=this.options,e["type_"+this.options.type]=!0,t=e.ipAddress,this.$el.html(u.fill("member_session",e)),o.update(this.el),this},t.prototype.revoke=function(e){return r.get("/login/revoke",{id:this.options.id},function(e){return function(){return e.model.set("sessions",s.filter(e.model.get("sessions"),function(t){return t.id!==e.options.id}))}}(this))},t}(a)},{}],634:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e(561),o=e(83),a=e(133),s=e(549),u=e("underscore"),d=e(546),p=e(51),l=e("moment"),c=e(104),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="member-applications-list-item",t.prototype.events={"click .js-revoke":"revoke"},t.prototype.render=function(){var e,t,n,r,i,a;return a=this.options,n=a.dateExpires,i=a.permissions,r=a.identifier,t=a.dateCreated,e={identifier:r,dateApproved:l(o.parse(t)).calendar(),dateExpires:n?l(o.parse(n)).calendar():null,neverExpires:null==n},e.permissions=u.isEmpty(i)?[c("token perms.none")]:i.map(function(e){var t,n,r;return n=e.write?"readwrite":"read",t="*"===e.idModel?"general":"specific",r=e.modelType.toLowerCase(),c(["token perms",n,t,r])}),this.$el.html(d.fill("member_application",e)),this},t.prototype.revoke=function(e){return a.stop(e),r.toggle("revoke token",{elem:e.currentTarget,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.set("tokens",u.filter(e.model.get("tokens"),function(t){return t.id!==e.options.id})),e.model.pull("tokens",e.options.id,function(){return p("Member","Applications","Revoke App")})}}(this)})},t}(s)},{}],635:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;r=e(35),o=e(593),i=e(562),s=e(39),u=e(527),c=e(40),d=e(210),p=e(636),l=e(638),h=e(569),m=e("react"),f=e(88),g=e(133),y=e(541)("header_notification_list_menu"),w=e(51),b=e(46),v=e("underscore"),a=function(e){function t(e){var t;t=this.getNotificationData(),this.state={canAllowDesktopNotifications:i.notEnabled(),notifications:t.notifications,remainingUnread:t.remainingUnread,surveyDismissed:!1,isLoadingNotifications:null!=d.loadAllPromise,loadedAllNotifications:!1},null!=d.loadAllPromise&&this.handleLoadAllPromise(d.loadAllPromise)}return _(t,e),t.prototype.displayName="HeaderNotifications",t.prototype.componentDidMount=function(){return this.props.listenTo("add:Notification remove:Notification change:Notification",this.updateNotifications.bind(this))},t.prototype.componentWillUnmount=function(){var e;return null!=(e=this._notificationPermissionPromise)?e.cancel():void 0},t.prototype.getNotificationData=function(){var e,t;return e=d.sortedByDateDescending(s),t=e.filter(function(e){return e.get("unread")}),{notifications:e,remainingUnread:t.length}},t.prototype.updateNotifications=function(){return this.setState(this.getNotificationData())},t.prototype.render=y.renderable(function(){var e,t,n,o,i,a,s;return i=this.state,e=i.canAllowDesktopNotifications,o=i.notifications,a=i.remainingUnread,s=i.surveyDismissed,t=i.isLoadingNotifications,n=i.loadedAllNotifications,y.div(function(i){return function(){var u;return i.props.showSurvey&&!s&&y.createElement(l,{username:null!=(u=r.me())?u.get("username"):void 0,onDismiss:function(){return i.setState({surveyDismissed:!0}),i.props.onDismissSurvey()},submitSurvey:i.props.submitSurvey}),0===o.length?y.p(".empty",{style:{padding:"24px 6px"}},function(){return y.format("no-notifications")}):y.div(function(){return y.createElement(p,{notifications:o,context:"header"}),y.ul(".pop-over-list.mod-add-top-margin",function(){return t?y.div(".spinner.loading"):n||y.li(function(){var e,t;return e=(null!=(t=f("loadAllNotifications"))?t.get("loadAll"):void 0)?{onClick:i.viewAllNotifications.bind(i)}:{href:i.props.noteUrl,onClick:i.trackViewAllNotifications},y.a(".js-view-all-notifications",e,function(){return a>0?y.format("see-all-notifications-remainingunread-more-unread",{remainingUnread:a}):y.format("see-all-notifications")})}),y.li(function(){return y.a(".js-change-email-frequency",{onClick:i.changeEmailFrequency.bind(i)},function(){return y.format("change-notification-email-frequency")})}),e?y.li(function(){return y.a(".js-allow-desktop-notifications",{onClick:i.allowDesktopNote.bind(i)},function(){return y.format("allow-desktop-notifications")})}):void 0})})}}(this))}),t.prototype.trackViewAllNotifications=function(){return w("Header","Notifications Menu","See All Notifications")},t.prototype.viewAllNotifications=function(e){var t,n,r;return r=this.state,t=r.isLoadingNotifications,n=r.loadedAllNotifications,this.trackViewAllNotifications(),this.setState({isLoadingNotifications:!0}),this.handleLoadAllPromise(d.loadAllNotifications(this.props.member.get("username")))},t.prototype.handleLoadAllPromise=function(e){return e.then(function(e){return function(){return e.setState({isLoadingNotifications:!1,loadedAllNotifications:!0})}}(this)).catch(function(e){return function(t){return e.setState({isLoadingNotifications:!1}),b(t)}}(this))},t.prototype.changeEmailFrequency=function(e){g.stop(e),w("Header","Notifications Menu","Change Email Frequency"),h.pushView({view:new o({model:this.props.member,modelCache:s})})},t.prototype.allowDesktopNote=function(e){g.stop(e),w("Header","Notifications Menu","Allow Desktop Notifications"),this._notificationPermissionPromise=i.requestPermission().then(function(e){return function(t){return e.setState({canAllowDesktopNotifications:i.notEnabled()})}}(this)).catch(function(e){return function(){return e.setState({canAllowDesktopNotifications:!1})}}(this)).cancellable()},t}(m.Component),t.exports=u(a)},{}],636:[function(e,t,n){var r,o,i,a,s,u,c,l,d;r=e(35),o=e(84),i=e(637),a=e("react"),l=e("recup"),d=e(544)(""),s=e(107),u=e("underscore"),c=new o("notification"),t.exports=a.createClass({displayName:"NotificationsList",getInitialState:function(){return{now:new Date}},componentDidMount:function(){return this.interval=setInterval(this.updateNow,1e4)},componentWillUnmount:function(){return clearInterval(this.interval)},updateNow:function(){return this.setState({now:new Date})},render:function(){var e,t,n,o;return o=this.props,t=o.notifications,e=o.context,n=this.state.now,t=u.map(t,function(t){var o,u,l,d,p,h;for(d=t.getExpandedData(),d.entities=c.getEntities(t.get("display")),p=d.entities,u=0,l=p.length;l>u;u++)o=p[u],"comment"===o.type?o.textHtml=s.comments.format(o.text).output:"relDate"===o.type&&(o.text=c.relDateText(o.date,n));return"cardDueSoon"===t.get("type")?d.isDueDateNotification=!0:("declinedInvitationToBoard"===(h=t.get("type"))||"declinedInvitationToOrganization"===h)&&(d.isDeclinedInvitationNotification=!0),/Enterprise/.test(t.get("type"))&&(d.isEnterpriseAdmin=r.me().isEnterpriseAdminOf(t.get("data").enterprise)),d.isDueSoon="cardDueSoon "===t.get("type"),d.isCommentLike=t.isCommentLike(),d.isAddAttachment=t.isAddAttachment(),d.idMemberCreator=t.get("idMemberCreator"),d.markRead=t.markRead.bind(t),d.navigateToView=t.navigateToView.bind(t),d.context=e,d.member=t.getMember(),d.key=t.id,a.createElement(i,d)}),a.createElement("div",null,t)}})},{}],637:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;o=e(582),i=e(83),a=e(817),m=e(48),s=e(605),u=e(39),l=e(569),d=e("react"),f=e(541)("notification"),g=e(51),p=e(133),h=e("underscore"),r=e("jquery"),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.displayName="Notification",t.prototype.render=f.renderable(function(){var e,t,n,r,o,u,c,l,d,p,g;return d=this.props,r=d.isCommentLike,n=d.isAddAttachment,g=d.unread,p=d.type,l=d.member,u=d.isDueDateNotification,c=d.isEnterpriseAdmin,e=d.date,o=d.isDeclinedInvitationNotification,t=d.entities,l=d.member,f.div({class:f.classify({"mod-comment-type":r,"mod-attachment-type":n,"mod-unread":g,"mod-due-soon":"cardDueSoon"===p,phenom:!0}),ref:function(e){return i.update(e)},onClick:this.clickedNotification.bind(this)},function(n){return function(){return f.div(".phenom-creator",function(){l?f.div(".member.js-show-mem-menu",{"data-idmember":l.id,onClick:n.viewMemberActionMenu.bind(n)},function(){return f.createElement(s,l)}):u?f.span(".icon-lg.icon-clock"):o?f.span(".icon-lg.icon-close"):f.span(".icon-lg.icon-member")}),f.div(".phenom-desc",function(){return h.forEach(t,function(e){return f.createElement(a,{entity:e,context:{},options:{isEnterpriseAdmin:c}})})}),f.p(".phenom-meta.quiet",function(){return e?f.span(".date",{"data-date":e}):void 0})}}(this)),m("notifications",this.props)}),t.prototype.clickedNotification=function(e){return this.props.markRead(),"header"===this.props.context?g("Header","Notifications Menu","Clicked Notification"):"notifications-page"===this.props.context&&g("Member View","Notifications Page","Clicked Notification"),r(e.target).is("a")?void 0:(this.props.navigateToView(),p.stop(e))},t.prototype.viewMemberActionMenu=function(e){var t,n;p.stop(e),t=u.get("Member",null!=(n=r(e.target).closest("[data-idmember]").attr("data-idmember"))?n:this.props.idMemberCreator),r(e.target).closest(".pop-over").length>0?l.pushView({view:o,options:{model:t,modelCache:u}}):l.toggle({elem:this.$(".js-show-mem-menu"),view:o,options:{model:t,modelCache:u}})},t}(d.Component)},{}],638:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;s=e("react"),c=e(541)("nps"),d=e(51),u=e("underscore"),r=e("jquery"),i=10,o=256,l=[c.l(["recommend","1"]),c.l(["recommend","2"]),c.l(["recommend","3"]),c.l(["recommend","4"])],t.exports=a=function(e){function t(e){this.state={visible:!0,feedback:"",stage:"choose-score"}}return p(t,e),t.prototype.displayName="HeaderNotifications",t.prototype.render=c.renderable(function(){return this.state.visible?c.div(".nps-container",function(e){return function(){switch(c.div(".nps-dismiss",function(){return c.a(".quiet",{onClick:function(t){return null!=e.state.score?(e.props.submitSurvey({completed:!1,score:e.state.score,trackScore:!0}),d("NPS","Dismiss","With Score")):d("NPS","Dismiss","Without Score"),e.props.onDismiss()}},function(){return c.format("close")})}),e.state.stage){case"choose-score":return e.renderChooseScore();case"follow-up":return e.renderFollowUp();case"complete-promoter":return e.renderCompletePromoter();case"complete-passive":return e.renderCompletePassive();case"complete-detractor":return e.renderCompleteDetractor()}}}(this)):c.div()}),t.prototype.renderChooseScore=function(){var e;return e=function(e){return function(t){return function(){return e.setState({score:t,stage:"follow-up"}),e.props.submitSurvey({completed:!0,score:t,trackScore:!0})}}}(this),c.p(".nps-prelude",function(){return c.format("we-want-to-know")}),c.h2(".nps-question",function(){return c.format("how-likely-are-you-to-recommend-trello-to-others")}),c.div(".nps-buttons",function(){var t,n,r;for(n=[],r=t=0;10>=t;r=++t)n.push(c.button(".nps-button",{onClick:e(r)},function(){return c.text(r)}));return n}),c.div(".quiet.nps-explanation",function(){return c.div(".nps-low",function(){return c.format("not-likely")}),c.div(".nps-spacing",function(){}),c.div(".nps-high",function(){return c.format("very-likely")})})},t.prototype.renderFollowUp=function(){var e,t,n;return t=function(e){return function(){return e.setState({stage:function(){switch(this.state.score){case 9:case 10:return"complete-promoter";case 6:case 7:case 8:return"complete-passive";case 0:case 1:case 2:case 3:case 4:case 5:return"complete-detractor"}}.call(e)}),e.props.submitSurvey({completed:!0,score:e.state.score,comment:e.state.feedback,usage:e.state.usage,trackUsage:!0})}}(this),n=function(e){return function(t){return function(){return e.setState({usage:t})}}}(this),e=function(e){return function(){return d("NPS","Click Back"),e.setState({stage:"choose-score"})}}(this),c.p(".nps-back-container.quiet",function(){return c.span(".nps-back",{onClick:e},function(){return c.span(".icon-sm.icon-back"),c.text(" "),c.span(".nps-back-text",function(){return c.format("back")})})}),c.p(".nps-prelude",function(){return c.format("thanks-one-more-quick-thing")}),c.h2(".nps-question",function(){return c.format("tell-us-more-about-that-score")}),c.textarea(".nps-feedback",{maxLength:o,defaultValue:this.state.feedback,placeholder:c.l("were-all-ears")+" ",onInput:function(e){return function(t){return e.setState({feedback:t.target.value})}}(this)}),c.div(".nps-remaining.quiet",function(e){return function(){var t;return t=o-e.state.feedback.length,0===t?(c.format("you-re-out-of-room-send-more-via"),c.a({href:"/contact",target:"contact"},function(){return c.format("our-contact-page")})):100>t?c.text(t):void 0}}(this)),c.h2(".nps-question",function(){return c.format("how-do-you-use-trello")}),c.div(".nps-uses",function(e){return function(){var t,r,o,i,a;for(o=["business","personal","both"],i=[],t=0,r=o.length;r>t;t++)a=o[t],i.push(c.button(".nps-use",{class:c.classify({"nps-use-selected":a===e.state.usage}),onClick:n(a)},function(){return c.format(["usage",a])}));return i}}(this)),c.button(".nps-submit",{onClick:t},function(){return c.format("submit")})},t.prototype.renderCompletePromoter=function(){var e,t;return e=function(e){return function(){return e.setState({visible:!1}),d("NPS","Complete Promoter","Click Tweet"),window.open("https://twitter.com/intent/tweet?"+r.param({text:u.sample(l),url:"https://trello.com/"+e.props.username+"/recommend",related:"trello,TacoTrello"}))}}(this),t=function(e){return function(){return d("NPS","Complete Promoter","Click Finish"),e.setState({visible:!1})}}(this),c.p(".nps-submitted",function(){return c.format("submitted")}),c.div(".nps-illustration",function(){return c.img(".nps-illustration-image",{src:"https://a.trellocdn.com/images/stickers/06ddf78e10598774b89e3264d8e414da/taco-love%402x.png"})}),c.p(".nps-follow-up",function(){return c.format("we-love-your-enthusiasm")}),c.p(function(){return c.img(".nps-twitter-icon",{src:"https://a.trellocdn.com/images/nps/3f9b6f94a110473bc5b822708970b69e/twitter.svg"}),c.format("care-to-share")}),c.button(".nps-tweet",{onClick:e},function(){return c.format("tweet-about-trello")}),c.button(".nps-finish",{onClick:t},function(){return c.format("finish")})},t.prototype.renderCompletePassive=function(){var e,t;return e=function(e){return function(){return e.setState({visible:!1}),d("NPS","Complete Passive","Click Game"),window.open("/taco-out")}}(this),t=function(e){return function(){return e.setState({visible:!1}),d("NPS","Complete Passive","Click Finish")}}(this),c.p(".nps-submitted",function(){return c.format("feedback-submitted")}),c.div(".nps-illustration",function(){return c.img(".nps-illustration-image",{src:"https://a.trellocdn.com/images/stickers/905a89b9fb1f867747130360e6cbb4d4/taco-celebrate%402x.png"})}),c.p(".nps-follow-up",function(){return c.format("thanks-for-your-time")}),c.p(function(){return c.format("not-ready-to-get-back-to-work")}),c.button(".nps-game",{onClick:e},function(){return c.format("play-a-game-with-taco")}),c.button(".nps-finish",{onClick:t},function(){return c.format("finish")})},t.prototype.renderCompleteDetractor=function(){var e,t;return e=function(e){return function(){return e.setState({visible:!1}),d("NPS","Complete Detractor","Click Contact Support"),window.open("/contact")}}(this),t=function(e){return function(){return e.setState({visible:!1}),d("NPS","Complete Detractor","Click Finish")}}(this),c.p(".nps-submitted",function(){return c.format("feedback-submitted")}),c.div(".nps-illustration",function(){return c.img(".nps-illustration-image",{src:"https://a.trellocdn.com/images/stickers/60cf2c2b89c387f8c1ed92f301492b28/taco-alert%402x.png"})}),c.p(".nps-follow-up",function(){return c.format("we-re-sorry-to-hear-that")}),c.p(function(){return c.format("is-there-anything-we-can-do-to-help")}),c.button(".nps-support",{onClick:e},function(){return c.format("contact-support")}),c.button(".nps-finish",{onClick:t},function(){return c.format("finish")})},t}(s.Component)},{}],639:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(691),o=e(569),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.onSubmit=function(e){e&&(this.model.tagList.create({name:e},{wait:!0}),o.popView())},t.prototype.viewTitleKey="add tag",t}(i)},{}],640:[function(e,t,n){var r,o;r=e("react"),o=e(541)("ask_an_admin"),t.exports=r.createClass({displayName:"AskAnAdminComponent",render:o.renderable(function(){var e;return e=this.props.admins,o.div(function(){return o.div(".ask-an-admin",function(){return o.format("seem-helpful-ask-an-admin-to-consider-upgrading-your-team")}),o.h3(function(){return o.format("team-admins")}),o.ul(".organization-admin-list",function(){return e.forEach(function(e){return o.li(".organization-admin-list-item",function(){return o.div(".organization-admin-list-item-avatar",function(){var t;return t=e.avatarHash,t?t?o.img({src:avatarDomain+"/"+t+"/30.png"}):void 0:o.span(".icon.icon-lg.icon-member")}),o.div(".organization-admin-list-item-details",function(){return o.div(".organization-admin-list-item-name",function(){return o.text(e.fullName)}),o.div(".organization-admin-list-item-username",function(){return o.text("@"+e.username)})})})})})})})})},{}],641:[function(e,t,n){var r,o,i,a,s;r=e(221),o=e("react"),s=e(541)("bc_info"),i=e(245),a=e(92),t.exports=o.createClass({displayName:"BC3UpgradeComponent",getInitialState:function(){return{showingYearly:!1,upgradeDisabled:!1,error:null}},render:s.renderable(function(){var e,t,n,o,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C;return d=this.props,C=d.yearlyDiscountAmount,k=d.yearlyDiscount,n=d.isMonthly,_=d.userCount,u=d.onUpgradeClick,o=d.isPerActiveUser,p=this.state,g=p.showingYearly,w=p.upgradeDisabled,e=p.error,f=n&&!g,t=!(n||0===k),b=i.choke(0,i(this,"setState",{showingYearly:!0})),v=i.choke(0,i(this,"setState",{showingYearly:!1})),h=f?this.props.monthly:this.props.yearly,c=h.price,y=h.totalPrice,l=h.productNumber,m=function(e){return function(t){return e.setState({upgradeDisabled:!0}),u(l,t).catch(r.BadRequest,r.Unauthorized,function(t){return e.setState({error:t.message,upgradeDisabled:!1})}).done()}}(this),C=a.money(C),c=a.money(c),y=a.money(y),s.div(".business-class-upgrade-box.u-gutter",function(){return o&&(s.p(function(){return s.format("were also introducing smart billing")}),s.p(function(){return s.format("theres also new pricing")})),s.p(function(){return o?f?s.format("when paid monthly per active user",{price:c}):s.format("when paid annually per active user",{price:c}):f?s.format("when paid monthly per user",{price:c}):s.format("when paid annually per user",{price:c})}),s.p(function(){return o?s.format("your new price per month per active user",{totalPrice:y,userCount:_}):s.format("your new price per month per user",{totalPrice:y,userCount:_})}),t&&s.p(function(){return s.format("discount upgrade to yearly",{yearlyDiscountAmount:C,yearlyDiscountPercent:a.percentage(k)})}),e&&s.p(function(){return s.text(e)}),s.button({onClick:m,class:"primary",disabled:w},function(){return s.format("upgrade my team")}),s.p(".quiet.business-class-upgrade-box-spaced-item",function(){return t?s.format("youll be chargedminus your discount",{totalPrice:y,yearlyDiscountAmount:C}):s.format("youll be charged",{totalPrice:y})}),n?s.p(function(){return g?s.b(v,function(){return s.format("or go back to monthly pricing")}):(k>0&&(s.format("or switch to paying annually",{yearlyDiscountPercent:a.percentage(k)}),s.text(" ")),s.b(b,function(){return s.format("see annual pricing")}))}):void 0})})})},{}],642:[function(e,t,n){var r,o;r=e("react"),o=e(541)("bc_info"),t.exports=r.createClass({displayName:"BC3UpgradeContactUsComponent",render:o.renderable(function(){return o.div(".business-class-upgrade-box.u-gutter",function(){return o.p(function(){return o.format("contact us to upgrade")}),o.p(".business-class-upgrade-box-header",function(){return o.format("contact options",{phoneNumber:"1 (844) 873-5561",emailAddress:"sales@trello.com"})})})})})},{}],643:[function(e,t,n){var r,o,i,a;r=e("react"),i=e(541)("org_account"),a=e(51),o=e(104),t.exports=r.createClass({displayName:"BoardCreateVisibilityRestrictionsComponent",render:i.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.restrictions,i.div(".setting-item-detail",function(){return i.div(".markeddown",function(){var e,t,n,o,a;for(n=["public","org","private"],o=[],e=0,t=n.length;t>e;e++)a=n[e],o.push(i.p(function(){return i.format(["board create visibility",a,r[a]])}));return o}),e&&!t?i.p(".helper.u-float-left",function(){
return i.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})})})},{}],644:[function(e,t,n){var r,o,i,a;r=e("react"),i=e(541)("org_account"),a=e(51),o=e(104),t.exports=r.createClass({displayName:"BoardInviteRestrictionsComponent",render:i.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.restricted,i.div(".setting-item-detail",function(){return i.div(function(){return r?i.p(function(){return i.format("only-team-members-can-be-added-to-boards-inside-this-team")}):i.p(function(){return i.format("anybody-can-be-added-to-boards-inside-this-team")})}),e&&!t?i.p(".helper.u-float-left",function(){return i.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})})})},{}],645:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;o=e(639),a=e(652),s=e(569),u=e(133),c=e(549),r=e("jquery"),d=e(544)("org_filtering"),p=d.renderable(function(e,t){return e.tagList.models.length||d.p(function(){return d.format("tags-explanation")}),d.ul(".select-tags-list",function(){var n,r,o,i;for(o=e.tagList.models,n=0,r=o.length;r>n;n++)i=o[n],d.li(".select-tags-list-item.js-tag-item",{"data-id-tag":i.id},function(){return d.a(".select-tags-list-item-name-link.js-toggle-tag",function(){var e;return e=i.id,h.call(t.getIdTags(),e)>=0&&d.icon("check",{class:"select-tags-list-item-name-link-check-icon"}),d.text(i.get("name"))}),d.a(".select-tags-list-item-edit-button.icon-sm.icon-edit.js-edit-tag",{href:"#"})})}),d.div(function(){return d.a(".quiet-button.full.js-add-tag",{href:"#"},function(){return d.format("create-tag")})})}),l=function(e){return r(e.target).closest(".js-tag-item")[0].getAttribute("data-id-tag")},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:idTags",this.render),this.listenTo(this.options.org.tagList,"add remove reset change",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-add-tag":"addTag","click .js-toggle-tag":function(e){return this.toggleTag(l(e))},"click .js-edit-tag":function(e){return this.editTag(e,l(e))}},t.prototype.viewTitleKey="pick tags",t.prototype.addTag=function(e){return u.stop(e),s.pushView({view:o,options:{model:this.options.org,modelCache:this.modelCache}})},t.prototype.toggleTag=function(e){return this.model.toggleTag(e)},t.prototype.editTag=function(e,t){return u.stop(e),s.pushView({view:a,options:{modelCache:this.modelCache,model:this.options.org.tagList.get(t)}})},t.prototype.render=function(){return this.$el.html(p(this.options.org,this.model)),this},t}(c)},{}],646:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty,w=[].slice,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};l=e("underscore"),r=e(221),o=e(222),s=e(569),u=e("bluebird"),g=e(51),m=e(544)("bulk_add_org_members"),c=e(549),a={RESTRICTED:"restricted",MUST_REACTIVATE:"must-reactivate",USERNAME_NOT_FOUND:"username-not-found",NOT_IN_ENTERPRISE:"not-in-enterprise",NO_ENTERPRISE_LICENSES:"no-enterprise-licenses",UNKNOWN:"unknown",EXISTING:"existing",ADDED:"added"},d=/^[^@]+@[a-z0-9-]+(\.[a-z0-9-]+)+$/i,v=/^@[a-z0-9_]{3,}$/,f=m.renderable(function(){return m.div(function(){return m.label(function(){return m.format("emails-or-usernames"),m.textarea(".org-members-bulk-add.js-list",{placeholder:m.l("list-placeholder")})}),m.div(".org-members-bulk-add-found.quiet",function(){return m.div(".org-members-bulk-add-found-entry.js-emails-found",function(){return m.format("email-addresses-found"),m.text(" "),m.span(".js-email-count",function(){return m.text("0")})}),m.div(".org-members-bulk-add-found-entry.js-usernames-found",function(){return m.format("usernames-found"),m.text(" "),m.span(".js-username-count",function(){return m.text("0")})})}),m.button(".primary.full.js-add",function(){return m.format("add")})})}),p=m.renderable(function(){return m.div(function(){return m.div(".spinner.loading"),m.div(".org-members-bulk-add-progress.js-progress")})}),h=m.renderable(function(e,t){return m.div(function(){var n,r,o,i,s;for(i=l.values(a),r=0,o=i.length;o>r;r++)n=i[r],(null!=(s=e[n])?s.length:void 0)>0&&(m.div(".org-members-bulk-add-results-heading",function(){var r;return m.format(["category",n],{enterpriseDisplayName:null!=(r=null!=t?t.get("displayName"):void 0)?r:""}),m.text(" ("),m.text(e[n].length),m.text(")")}),m.div(".org-members-bulk-add-results-list",function(){var t,r,o,i,a;for(i=e[n],a=[],r=0,o=i.length;o>r;r++)t=i[r],a.push(m.div(".org-members-bulk-add-results-list-item",function(){return m.text(t)}));return a}));return m.div(function(){return m.button(".primary.full.js-close",function(){return m.format("done")})})})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="add members",t.prototype.events={"click .js-add":"addMembers","input .js-list":"updateMembers","click .js-close":function(e){return s.hide()}},t.prototype.render=function(){return this.$el.html(f()),this.updateMembers(),this},t.prototype._parseEntries=function(){return this.$(".js-list").val().split(/[\s,;"<>]/)},t.prototype._parseEmails=function(){return l.chain(this._parseEntries()).map(function(e){return e.replace(/^\s+|\s+$/g,"").toLowerCase()}).filter(function(e){return d.test(e)}).uniq().sort().value()},t.prototype._parseUsernames=function(){return l.chain(this._parseEntries()).map(function(e){return e.replace(/^\s+|\s+$/g,"").toLowerCase()}).filter(function(e){return v.test(e)}).map(function(e){return e.replace(/@/g,"")}).uniq().sort().value()},t.prototype.updateMembers=function(e){var t,n,r;return n=this._parseEmails().length,r=this._parseUsernames().length,t=n+r,this.$(".js-email-count").text(n),this.$(".js-username-count").text(r),this.$(".js-emails-found").toggleClass("hide",0===n),this.$(".js-usernames-found").toggleClass("hide",0===r),this.$(".js-add").prop("disabled",0===t).toggleClass("disabled",0===t)},t.prototype.addMembers=function(e){var t,n;return n=w.call(this._parseEmails()).concat(w.call(this._parseUsernames())),this.$el.html(p()),g("Organization View","Members Page","Bulk Add",n.length),t=0,u.map(n,function(e){return function(i){return o({method:"get",url:"/1/members/"+i,data:{fields:"idOrganizations"}}).catch(r.NotFound,function(e){return null}).then(function(t){var n;if(null!=t){if(n=e.model.id,_.call(t.idOrganizations,n)>=0)throw new r.Conflict("already in organization");return o({method:"put",url:"/1/organizations/"+e.model.id+"/members/"+t.id,data:{type:"normal"}})}if(d.test(i))return o({method:"post",url:"/1/organizations/"+e.model.id+"/memberships",data:{email:i,type:"normal"}});throw new r.NotFound("username not found")}).then(function(e){return a.ADDED}).catch(r,function(e){var t;return t=e.message,/email restricted/.test(t)?a.RESTRICTED:/already invited/.test(t)||/already in organization/.test(t)?a.EXISTING:/must reactivate/.test(t)?a.MUST_REACTIVATE:/username not found/.test(t)?a.USERNAME_NOT_FOUND:/Must first transfer account to the/.test(t)?a.NOT_IN_ENTERPRISE:/No Enterprise licenses/.test(t)?a.NO_ENTERPRISE_LICENSES:a.UNKNOWN}).then(function(e){return t++,this.$(".js-progress").text(t+"/"+n.length),{user:i,state:e}})}}(this),{concurrency:5}).then(function(e){return function(t){var r,o,i,a;i=l.chain(t).groupBy("state").pairs().map(function(e){var t,n;return t=e[0],n=e[1],[t,l.chain(n).pluck("user").sortBy(function(e){return e.toLowerCase().replace(/@.*$/,"")}).value()]}).object().value(),e.$el.html(h(i,e.model.getEnterprise())),a=[];for(r in i)o=i[r],a.push(g("Organization View","Members Page","Bulk Add",r,n.length));return a}}(this)).done()},t}(c)},{}],647:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),i=e(650),a=e(569),s=e(133),u=e(549),c=e("underscore"),l=e(546),d=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-select-org":"chooseOrg","click .js-disabled":"stop","click .js-create-org":"createOrg"},t.prototype.render=function(){var e;return e={},this.model.organizationList.length>0&&(e.orgs=this.model.organizationList.map(function(e){return function(e){var t,n,r,o,i,a;return t=e.owned(),r=e.isPremium(),i=e.needsBCUpgrade(),n=!i||!t,a=!t||r&&!i?"#":"/"+e.get("name")+"/billing",o=e.get("memberships").length,c.extend(e.toJSON(),{memberCount:o,isAdmin:t,isPremium:r,needsBCUpgrade:i,orgUrl:a,isDisabled:n})}}(this))),this.$el.html(l.fill("select_org_to_upgrade",e)),this},t.prototype.chooseOrg=function(e){return d("Select Team to Upgrade","Choose Team")},t.prototype.stop=function(e){return s.stop(e)},t.prototype.createOrg=function(e){s.stop(e),a.toggle({elem:r(e.target),top:20,view:i,options:{model:this.model,modelCache:this.modelCache,createOpts:{isBusinessClass:!0}}}),d("Business Class Choose Org Page","Create New Org")},t}(u)},{}],648:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].slice;r=e("jquery"),o=e(220),i=e(35),s=e(569),u=e(133),c=e(549),d=e(546),p=e(51),l=e(104),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change logo",t.prototype.initialize=function(){return this.listenTo(this.model,"change:logoHash",this.frameDebounce(this.render))},t.prototype.events={"change .js-upload-logo":"startUpload","click .js-remove-logo":"removeLogo"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(d.fill("popover_org_logo",e)),this},t.prototype.startUpload=function(e){var t,n,a,s,c,d,h;return c=this.model,s=r(e.target),t=this.$(".js-error").hide(),a=null!=(d=s[0])&&null!=(h=d.files)?h[0]:void 0,null==a||u.validFileSize(a)?!a&&s.val()?u.uploadFile(i.myToken(),s,this.uploadResult.bind(this)):null!=a?(n=new FormData,n.append("token",i.myToken()),n.append("file",a),o({url:s.closest("form").attr("action"),data:n,type:"post",processData:!1,contentType:!1,error:function(e){return function(t){var n,r;return r=t.status,n=t.responseText,e.uploadResult(Error(n))}}(this),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(f.call(arguments)))}}(this),timeout:12e4})):void 0:(t.text(l("images can not be larger than 10mb")).show(),void p("Organization","Logo","Upload Error - File Too Large"))},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?(p("Organization","Logo","Error - "+e),t.show().text(e)):(p("Organization","Logo","Use Uploaded - New"),s.hide())},t.prototype.removeLogo=function(e){u.stop(e),o({url:"/1/organizations/"+this.model.id+"/logo",type:"DELETE",success:function(e){return function(){return p("Organization","Logo","Remove Logo"),s.hide()}}(this)})},t}(c)},{}],649:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(212),i=e(569),a=e(133),s=e(549),c=e(546),l=e(51),u=e(104),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="select team visibility",t.prototype.tagName="ul",t.prototype.className="pop-over-list",t.setVisibility=function(e){return function(t){return a.stop(t),l("Organization","Changed Visibility"),this.model.setPref("permissionLevel",e),i.hide()}},t.prototype.events={"click .js-select-members":t.setVisibility("private"),"click .js-select-public":t.setVisibility("public")},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),e["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0,e.publicText=u("org perms.public.text"),e.privateText=u("org perms.private.text"),this.$el.html(c.fill("change_org_vis",e)),this},t}(s)},{}],650:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e(35),o=e(7),a=e(40),s=e(569),u=e("bluebird"),c=e(133),l=e(549),d=e(546),p=e(51),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="create organization",t.prototype.initialize=function(e){return this.createOpts=e.createOpts,null!=this.createOpts?this.createOpts:this.createOpts={isBusinessClass:!1,boardToAddToOrg:!1}},t.prototype.events={"click .js-save":"submit","submit form":"submit","click .js-business-class":"clickBusinessClassMore","input .js-display-name":function(){return this.updateSubmitButton()}},t.prototype.getValue=function(e){var t;return null!=(t=this.$("[name="+e+"]").val())?t.trim():void 0},t.prototype.render=function(){var e;return this.$el.html(d.fill("org_create",{boardToAddToOrg:this.createOpts.boardToAddToOrg,memberCount:null!=(e=this.model.memberList)?e.length:void 0})),this.updateSubmitButton(),this},t.prototype.updateSubmitButton=function(){return this.$(".js-save").prop("disabled",0===this.getValue("displayName").length)},t.prototype.submit=function(e){var t,n,i,l,d;for(c.stop(e),t={},this.$(".js-save").prop("disabled",!0).addClass("disabled"),d=["displayName","desc"],n=0,i=d.length;i>n;n++)l=d[n],t[l]=this.getValue(l);r.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(e){return function(t){return e.createOpts.boardToAddToOrg&&e.createOpts.boardToAddToOrg.update({idOrganization:t.id}),a.loadOrganizationMembersMinimal(t.id).then(function(){var t;return e.$(".js-add-members").prop("checked")?(t=e.model.getOrganization(),u.map(e.model.memberList.models,function(e){return t.isMember(e)?void 0:t.changeMemberRole(e,{type:"normal"})},{concurrency:3})):void 0}).then(function(){e.createOpts.isBusinessClass?(o.organizationBillingView(t.get("name")),p("New Team","Create Business Class Team",void 0,t.id)):(o.organizationBoardsView(t.get("name"),t.id),p("New Team","Create Team",void 0,t.id)),s.hide()}).done()}}(this)})},t.prototype.clickBusinessClassMore=function(){return p("New Org","Click Business Class Link")},t}(l)},{}],651:[function(e,t,n){var r,o,i;r=e("react"),i=e(541)("org_account"),o=e(104),t.exports=r.createClass({displayName:"DeleteOrgButtonComponent",render:i.renderable(function(){var e;return e=this.props.onClick,i.div(".window-module.u-gutter",function(){return i.b(e,".quiet-button",{style:{padding:"6px 11px",marginTop:"32px"}},function(){return i.format("delete-this-organization")})})})})},{}],652:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(569),a=e(549),i=e(691),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.getName=function(){return this.model.get("name")},t.prototype.onSubmit=function(e){e&&(this.model.update({name:e}),o.popView())},t.prototype.onDelete=function(){return this.model.destroy(),o.popView()},t.prototype.viewTitleKey="edit tag",t}(i)},{}],653:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;a=e(135),o=e("react"),s=e(541)("select_member"),i=e(104),t.exports=r=function(e){function t(e){t.__super__.constructor.call(this,e)}return u(t,e),t.prototype.displayName="AutocompleteMemberAvatar",t.prototype.shouldComponentUpdate=a,t.prototype.render=s.renderable(function(){var e,t,n,r,o,a,u,c,l,d,p,h,m,f,g,v;return g=this.props,e=g.active,t=g.avatarHash,o=g.email,v=g.username,n=g.confirmed,p=g.joined,a=g.fullName,h=g.memberType,u=g.initials,l=g.isDeactivated,c=g.isBoardAdmin,d=g.isOrganizationAdmin,m=g.onMouseDown,f=g.onRemoveClick,r=g.displayDetails,s.div(".member-container",{onMouseDown:m},function(){var m;return m=a+" ("+v+")",e&&v?(s.div(".member",function(){var e,n;return t?(e=[window.avatarDomain,t,"30.png"].join("/"),n=[window.avatarDomain,t,"50.png"].join("/"),s.img({class:"member-avatar",height:"30",width:"30",src:e,srcSet:e+" 1x, "+n+" 2x",alt:m,title:m})):null!=u?s.span(".member-initials",{title:m},function(){return s.text(u)}):void 0}),s.div(".member-info",function(){if(s.div(".full-name",function(){return s.text(m)}),r){if(p)return null!=h==="ghost"?s.span(".quiet.sub-name",function(){return s.text(i("invited"))}):s.span(".quiet.sub-name",function(){return s.text("("+i("joined")+")")});if(n||s.span(".quiet.sub-name",function(){return s.format("unconfirmed-user")}),!e)return s.span(".quiet.sub-name",function(){return s.format("inactive-account")})}}),l||(c&&s.span(".member-type.admin",{title:s.l("this-member-is-an-admin-of-this-board")}),d&&s.span(".member-type.admin",{title:s.l("this-member-is-an-admin-of-this-organization")})),s.span(".member-gold-badge",{title:s.l("this-member-has-trello-gold")})):s.div(function(){return s.div(".member-info",function(){return s.div(".full-name",function(){return s.text(o)})})}),f?s.a(".icon-sm .icon-close",{onClick:f,href:"#"}):void 0})}),t}(o.Component)},{}],654:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty,y=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};p=e("underscore"),r=e("jquery"),o=e(220),i=e(221),a=e(222),s=e(653),u=e(646),l=e("bluebird"),d=e("react"),m=e(541)("org_members"),f=e(546),h=/([a-zA-Z0-9.+_-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi,g=/^@[a-z0-9_]{3,}$/,t.exports=c=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.updateSearchResultList=p.debounce(this.updateSearchResultList,250),this.searchForMembersPromise=null,this.selectMemberOption=this.selectMemberOption.bind(this),this.removeMemberOption=this.removeMemberOption.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onInputFocus=this.onInputFocus.bind(this),this.onInputBlur=this.onInputBlur.bind(this),this.onInputKeyUp=this.onInputKeyUp.bind(this),this.onInputPaste=this.onInputPaste.bind(this),this.onAutocompleteKeyDown=this.onAutocompleteKeyDown.bind(this),this.onAutocompleteSubmit=this.onAutocompleteSubmit.bind(this),this.searchCache={},this.state={activeIndex:-1,isOpen:!1,isFetching:!1,processingMembers:!1,isActive:!0,isTyping:!1,searchResults:[],searchText:"",selectedOptions:[]}}var n,o;return v(t,e),n=function(e){return r.trim(e).toLowerCase().match(h)},o=function(e){return r.trim(e).toLowerCase().replace(/@/g,"")},t.prototype.componentDidMount=function(){return this.refs.searchInput.focus()},t.prototype.componentDidUpdate=function(){return this.refs.searchInput.focus()},t.prototype.componentWillUnmount=function(){var e;return null!=(e=this.searchForMembersPromise)?e.cancel():void 0},t.prototype.updateSearchResultList=function(e){var t;if(e)return t=this.searchCache[e],t?this.receiveSearchResults(t):this.searchForMembers(e)},t.prototype.searchForMembers=function(e,t){var r;return null!=(r=this.searchForMembersPromise)&&r.cancel(),this.searchForMembersPromise=l.try(function(t){return function(){return e.length>2?(t.setState({isFetching:!0}),g.test(e)?e=o(e):h.test(e)&&(e=n(e)),a({url:"/1/search/members/",type:"get",data:{query:e,idOrganization:t.props.orgId},dataType:"json"})):void 0}}(this)).cancellable().then(function(t){return function(n){return t.searchCache[e]=n,t.receiveSearchResults(n)}}(this)).catch(l.CancellationError,function(e){return function(){return e.setState({isFetching:!1})}}(this))},t.prototype.receiveSearchResults=function(e){return e=p.filter(e,function(e){return function(e){return e.active&&(e.email||e.username)}}(this)),this.setState({isOpen:this.state.isTyping&&e.length,isFetching:!1,searchResults:e})},t.prototype.selectMemberOption=function(e,t){var n,r;return e.preventDefault(),null!=(r=this.searchForMembersPromise)&&r.cancel(),n=p.uniq(p.union(this.state.selectedOptions,p.flatten([t])),!1,function(e){return function(e){return e.username?e.username:e.email}}(this)),this.setState({selectedOptions:n,searchText:"",isOpen:!1}),this.refs.searchInput.focus()},t.prototype.removeMemberOption=function(e){return this.setState({selectedOptions:this.state.selectedOptions.filter(function(t){return function(t,n){return n!==e}}(this))})},t.prototype.onInputBlur=function(e){return h.test(e.target.value)&&this.selectMemberOption(e,p.map(n(e.target.value),function(e){return function(e){return{email:e}}}(this))),this.setState({isOpen:!1,isActive:!1})},t.prototype.onInputChange=function(e){var t;return e.persist(),t=e.target.value,this.setState({searchText:t,isOpen:""!==t}),this.updateSearchResultList(t)},t.prototype.onInputFocus=function(e){return this.setState({isActive:!0})},t.prototype.onInputKeyUp=function(e){var t,r,o,i,a;return t=this.state,i=t.searchText,a=t.selectedOptions,"Enter"!==(r=e.key)&&","!==r&&" "!==r||!h.test(e.target.value)?"Backspace"===e.key&&!e.target.value&&a.length?this.removeMemberOption(a.length-1):this.setState({isTyping:!0}):(e.preventDefault(),this.setState({isOpen:!1,isTyping:!1}),null!=(o=this.searchForMembersPromise)&&o.cancel(),this.selectMemberOption(e,p.map(n(e.target.value),function(e){return function(e){return{email:e}}}(this))))},t.prototype.onInputPaste=function(e){var t;return t=e.clipboardData.getData("Text"),h.test(t)?this.selectMemberOption(e,p.map(n(t),function(e){return function(e){return{email:e}}}(this))):void 0},t.prototype.onAutocompleteKeyDown=function(e){var t,n,r,o,i;switch(o=this.state,t=o.activeIndex,i=o.searchResults,e.key){case"Enter":if(i[t]&&!i[t].joined)return this.setState({activeIndex:-1}),this.selectMemberOption(e,i[t]);break;case"ArrowRight":case"ArrowDown":return n=t===i.length-1?-1:t+1,this.setState({activeIndex:n});case"ArrowLeft":case"ArrowUp":return r=-1===t?i.length-1:t-1,this.setState({activeIndex:r});default:return null}},t.prototype.onAutocompleteSubmit=function(e){var t,r,o;return r=this.state.searchText,t=this.props.orgId,h.test(r)&&this.selectMemberOption(e,p.map(n(r),function(e){return function(e){return{email:e}}}(this))),o=p.map(this.state.selectedOptions,function(e){return function(e){return e.email?e.email:e.username}}(this)),l.map(o,function(e){return function(n){return e.setState({processingMembers:!0}),a({method:"get",url:"/1/members/"+n,data:{fields:"idOrganizations"}}).catch(i.NotFound,function(e){return null}).then(function(e){if(null!=e){if(y.call(e.idOrganizations,t)>=0)throw new i.Conflict("already in organization");return a({method:"put",url:"/1/organizations/"+t+"/members/"+e.id,data:{type:"normal"}})}if(h.test(n))return a({method:"post",url:"/1/organizations/"+t+"/memberships",data:{email:n,type:"normal"}});throw new i.NotFound("username not found")})}}(this),{concurrency:5}).done()},t.prototype.render=m.renderable(function(){var e,t,n,r,o,i,a,u,c,l,d,f,g,v,b;return l=this.state,e=l.activeIndex,r=l.isActive,o=l.isFetching,i=l.isOpen,c=l.processingMembers,f=l.searchResults,g=l.searchText,v=l.selectedOptions,d=this.props,u=d.placeholder,a=d.orgId,b=g.match(h),t=v.length>0,n=(!t&&b||t)&&!c,m.div(".org-team-members-autocomplete-container",function(t){return function(){return m.div(".org-team-members-autocomplete",{class:m.classify({active:r||v.length,processing:c}),onKeyDown:t.onAutocompleteKeyDown},function(){if(m.div(".autocomplete-selected",function(){return v.length&&v.map(function(e,n){return m.div(".autocomplete-option",function(){return m.createElement(s,p.extend({onRemoveClick:function(e){return t.removeMemberOption(n)}},e))})}),m.input(".autocomplete-input",{type:"text",onBlur:t.onInputBlur,onChange:t.onInputChange,onKeyUp:t.onInputKeyUp,onFocus:t.onInputFocus,onPaste:t.onInputPaste,disabled:c,placeholder:v.length?"":u,value:g,ref:"searchInput"})}),i){if(o)return m.div(".autocomplete-search-results",function(){return m.div(".spinner.loading")});if(f.length>0)return m.div(".autocomplete-search-results",function(){return f.map(function(n,r){var o,i,a;return a=p.find(v,function(e){var t;return t=e.id,t===n.id}),i=a||n.joined||n.isDeactivated,o=e===r&&!i,m.div(".autocomplete-option",{class:m.classify({disabled:i,active:o})},function(){return m.createElement(s,p.extend({onMouseDown:function(e){return t.selectMemberOption(e,n)},displayDetails:!0},n))})})})}}),m.button(".autocomplete-btn.primary",{class:m.classify({disabled:!n}),disabled:!n,onClick:t.onAutocompleteSubmit},function(){return c?m.div(".spinner.loading"):m.format("invite-to-team")})}}(this))}),t}(d.Component)},{}],655:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M=function(e,t){function n(){this.constructor=e}for(var r in t)B.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},B={}.hasOwnProperty;r=e("jquery"),o=e(289),i=e(559),a=e(220),s=e(221),u=e(35),c=e(646),l=e(551),d=e(204),h=e(100),m=e(22),S=e(104),T=e(103),j=e(851),f=e(208),g=e(603),v=e(725),y=e(677),b=e(27),w=e(569),_=e(133),k=e(549),C=e("underscore"),E=e(109),O=e(546),x=e(850),A=e(51),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),E(v,g,l,t),t.prototype.viewTitleKey="add members",t.prototype.initialize=function(){this.savedSearch=""},t.prototype.events={"click .js-search-results .js-select-member":"addMember","paste .js-search-input":"searchPaste","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember","click .js-show-invitation-link":"showInvitationLink","click .js-invitation-link":"clickInvitationLink","click .js-deactivate-link":"deactivateInvitationLink","click .js-copy-link":"copyInvitationLink","click .js-bulk-add-members":"showBulkAddView","click .js-link-google-apps":"startLinkingGoogleApps"},t.prototype.render=function(){var e,t,n;return t={},t.canInviteMembers=!0,t.canAddMembers=!0,t.placeholder=S("add member placeholder"),t.isPerUser=b.isPerUser(this.model.get("products")),t.perUserPrice=null!=(n=b.getPrice(this.model.get("products")))?n.toFixed(2):void 0,t.isYearly="yearly"===b.getInterval(this.model.get("products")),t.isMonthly="monthly"===b.getInterval(this.model.get("products")),t.canLinkGoogleApps=this.model.isFeatureEnabled("googleApps")&&(!this.model.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&this.model.editable(),this.$el.html(j(t)),null!=(e=o.addMemberToOrganizationAd(u.me(),this.model))&&this.$(".js-ad").html(this.subview(e,this.model).render().el),this.setTimeout(function(e){return function(){return e.input=e.$(".js-search-input"),e.input.click(function(e){return _.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(e){var t;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),t=this.input.val().toLowerCase().trim(),""===t)return void this.clearSearchResults();this.loadingEl.show(),a({url:"/1/search/members/",type:"get",data:{idOrganization:this.model.id,query:t},dataType:"json",success:function(e){return function(n){return e.renderSearchResults(t,n)}}(this)})}},t.prototype.keydownEvent=function(e){var t;t=h.getKey(e),t===m.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(_.stop(e),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(_.stop(e),this.$(".email-invite:first").click()):(t===m.ArrowUp||t===m.ArrowDown)&&(_.stop(e),_.navMenuList(this.$(".js-search-results .js-list"),"li",t))},t.prototype._handleError=function(e){var t;return t=T(e),i.showLiteralText(t,"error","alert",3e3),A("Invitations","Error: "+t),this.input.focus().select()},t.prototype.addMember=function(e){var t,n;_.stop(e),r(e.target).closest(".item.disabled").length>0||(this.clearSearchResults(),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),a({url:"/1/organization/"+this.model.id+"/members/"+t,type:"put",data:{type:"normal"},dataType:"json",success:function(e){return function(r){return null!=r.token||e.model.memberList.find(function(e){return e.id===t})?void 0:(e.model.memberList.add(n),A("Invitations","Add Member to Organization","Role: Member"))}}(this),error:this._handleError.bind(this)}))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,n,r;return r=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,t=C.compact(_.removeDomainFromEmailAddress(e.email).split(r)).join(" ").replace(n,""),e.fullName=_.toTitleCase(t),e.modelType="Organization",this.$(".js-uninvited-search-results").append(x(e)).show()},t.prototype.sendEmailInvite=function(e){var t,n,o,i;if(_.stop(e),n=this.$(".js-send-email-invite"),null==n.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),i=t.val().trim(),!_.validName(i))return _.setCaretAtEnd(t),void r(".js-name-error").show();o={fullName:i,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},n.attr("disabled","disabled"),a({url:"/1/organizations/"+this.model.id+"/members",type:"put",dataType:"json",data:o,success:function(e){return function(t){var r;return r=new f(t,{modelCache:e.modelCache}),e.model.memberList.get(r.id)||e.model.memberList.add(r),A("Invitations","Send Email Org Invite to New Member","Role: "+t.type),n.removeAttr("disabled"),w.hide()}}(this),error:this._handleError.bind(this)})}},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-uninvited-search-results").hide().empty(),r(".js-search-results").hide()},t.prototype.removeInvitation=function(e){var t;t=r(e.currentTarget).closest(".invitation").data("id"),d.prototype.delete({model:this.model,idInvitation:t,success:function(e){return function(){return A("Invitations","Delete Organization Invite"),e.search}}(this)}),_.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===u.myId()||this.model.owned()},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t.prototype.showBulkAddView=function(e){return _.stop(e),w.pushView({view:c,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.startLinkingGoogleApps=function(e){return A("Organization View","Members Page","Start Linking Google Apps Domain"),w.pushView({view:y,options:{model:this.model,modelCache:this.modelCache}})},t}(k)},{}],656:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v=[].slice;o=void 0,
t(function(){return o=e(222)}),i=e(35),d=e(569),p=e("react"),g=e(541)("manage_members"),m=e("underscore"),u=e(657),c=e(658),l=e(659),h=e(661),a=250,f=function(e){return m.debounce(e,a)},s=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/,n.exports=p.createClass({displayName:"ManageOrgMembersComponent",getInitialState:function(){return{isSearching:!1,members:null,searchValue:null,selectedMembers:[]}},render:g.renderable(function(){var e,t,n,r,o,a,u;return r=this.state,t=r.isSearching,n=r.members,a=r.searchValue,u=r.selectedMembers,o=t?"":".hide",e=a&&s.test(a)&&i.me().attributes.email!==a,g.div(".add-member-popup",function(t){return function(){return g.div(".search-with-spinner",function(){return g.input(".search-member",{type:"text",onChange:t.onSearchInputChange}),g.div(".spinner.small"+o)}),n?n.length?(t.renderMemberList(),u.length?t.renderSummary():void 0):e?(t.renderInviteAddName(),t.renderInvitationLink()):g.div(".quiet.search-text.no-results",function(){return g.format("no-results")}):(g.div(".quiet.search-text",function(){return g.format("search-for-a-person-in-trello-by-name-or-email-address-or-enter-an-email-address-to-invite-someone-new")}),t.renderInvitationLink())}}(this))}),renderMemberList:function(){var e,t,n;return t=this.state,e=t.members,n=t.selectedMembers,g.createElement(l,{members:e,selectedMembers:n,toggleMember:this.toggleMember})},renderInvitationLink:function(){var e;return e=this.props.model,g.createElement(u,{apiUrl:e.url(),teamUrl:e.get("url")})},renderInviteAddName:function(){var e,t,n,r,o;return r=this.props,t=r.model,n=r.modelCache,o=this.state.searchValue,e=o,g.createElement(c,{email:e,model:t,modelCache:n})},renderSummary:function(){var e,t,n,r,o;return n=this.state.selectedMembers,e=this.props.model,r=n.length,t=e.calculateTotalPrice(r),e.isPremiumMonthly()&&(o="monthly-subscription"),e.isPremiumYearly()&&(o="yearly-subscription"),g.createElement(h,{addSelectedMembers:this.addSelectedMembers,price:t,selectedMembersCount:r,subscriptionIntervalKey:o})},toggleMember:function(e){var t;return t=this.state.selectedMembers.some(function(t){return t===e})?this.state.selectedMembers.filter(function(t){return t!==e}):v.call(this.state.selectedMembers).concat([e]),this.setState({selectedMembers:t})},onSearchInputChange:function(e){var t;return t=e.target.value,this.setState({selectedMembers:[]}),t.length?this.searchMembers(t):this.setState({members:null,searchValue:null})},searchMembers:f(function(e){return this.setState({isSearching:!0,searchValue:e}),o({url:"/1/search/members/",type:"get",data:{idOrganization:this.props.model.id,query:e},dataType:"json"}).then(function(e){return function(t){return t=m.sortBy(t.filter(function(e){return e.confirmed&&!e.joined}),function(e){var t;return null!=(t=e.fullName)?t.toLocaleLowerCase():void 0}),e.setState({isSearching:!1,members:t})}}(this))}),addSelectedMembers:function(){var e,t,n,r;return n=this.state,e=n.members,r=n.selectedMembers,t=this.props.model,r.forEach(function(n){return function(n){var r;return r=e.filter(function(e){return e.id===n})[0],t.addMember(r)}}(this)),d.hide()}})},{}],657:[function(e,n,r){var o,i,a;o=void 0,t(function(){return o=e(222)}),i=e("react"),a=e(541)("manage_members"),n.exports=i.createClass({displayName:"InvitationLink",getInitialState:function(){return{linkEnabled:!1,invitationUrl:""}},render:a.renderable(function(){var e,t,n;return n=this.state,e=n.invitationUrl,t=n.linkEnabled,a.div(".invitation-link-wrapper",function(n){return function(){return t?(a.format("anyone-you-share-this-link-with-will-be-able-to-join"),a.input({type:"text",readOnly:!0,placeholder:a.l("loading"),ref:n.inputDidMount,value:e,onClick:n.copyInvitationLink}),a.button(".quiet-button",{onClick:n.deactivateInvitationLink},function(){return a.format("disable-this-link")})):a.button(".quiet-button",{onClick:n.showLink},function(){return a.format("you-can-also-invite-people-by-giving-them-a-special-link")})}}(this))}),showLink:function(){return this.setState({linkEnabled:!0})},inputDidMount:function(e){var t,n,r;return e?(n=this.props,t=n.apiUrl,r=n.teamUrl,o({method:"post",url:t+"/invitationSecret"}).get("secret").then(function(t){return function(n){var o;return o=r.replace(/(\/b\/[^\/]+|\/[^\/]+$)(.*)$/,"/invite$1/"+n+"$2"),t.setState({invitationUrl:o}),e.focus()}}(this)).done()):void 0},deactivateInvitationLink:function(e){var t;return t=this.props.apiUrl,this.setState({invitationUrl:"",linkEnabled:!1}),o({method:"delete",url:t+"/invitationSecret"}).done()},copyInvitationLink:function(e){var t;return t=e.target,t.select(),document.execCommand("copy")}})},{}],658:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g;o=e(559),i=e(221),a=void 0,t(function(){return a=e(222)}),h=e(103),s=e(208),u=e(569),c=e("react"),m=e(541)("invite_add_name"),f=e(51),l=e(133),d=e("underscore"),p=function(e){var t,n,r;return r=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,t=d.compact(l.removeDomainFromEmailAddress(e).split(r)).join(" ").replace(n,""),l.toTitleCase(t)},g=function(e){return e.length<=4},n.exports=c.createClass({displayName:"InviteAddName",getInitialState:function(){var e;return e=p(this.props.email),{err:g(e),fullName:e}},componentWillReceiveProps:function(e){var t,n;return t=e.email,n=p(t),this.setState({err:g(n),fullName:n})},render:m.renderable(function(){var e,t,n,r,o,i,a,s,u;return i=this.props,e=i.email,r=i.model,o=i.modelCache,a=this.state,t=a.err,n=a.fullName,s=a.submitting,u=t?"":".hide",m.div({style:{marginTop:"10px"}},function(t){return function(){return m.p(".quiet",function(){return m.format("we dont know that personteam",{email:e})}),m.p(".error"+u,function(){return m.format("full-name-must-be-more-than-4-characters")}),m.form({onSubmit:t.onSubmit},function(){return m.label(function(){return m.format("full-name")}),m.input({type:"text",value:n,onChange:t.onNameChange}),m.input(".wide.primary",{type:"submit",disabled:s,value:m.l("send")})})}}(this))}),onNameChange:function(e){var t,n;return n=e.target,t=n.value,this.setState({err:g(t.trim()),fullName:t})},onSubmit:function(e){var t;return e.preventDefault(),t=this.state.err,t?void 0:this.sendEmailInvite()},sendEmailInvite:function(e){var t,n,r,o,c,l;return l=this.props,t=l.email,r=l.member,o=l.model,c=l.modelCache,n=this.state.fullName,e={fullName:n,email:t,type:"normal"},this.setState({submitting:!0}),a({url:"/1/organizations/"+o.id+"/members",type:"put",dataType:"json",data:e}).then(function(e){return function(e){return r=new s(e,{modelCache:c}),o.memberList.get(r.id)||o.memberList.add(r),f("Invitations","Send Email Org Invite to New Member","Role: "+e.type),u.hide()}}(this)).finally(function(e){return function(){return e.setState({submitting:!1})}}(this)).catch(i,this._handleError)},_handleError:function(e){var t,n;return t=h(e),o.showLiteralText(t,"error","alert",3e3),f("Invitations","Error: "+(null!=(n=e.message)?n:e.responseText))}})},{}],659:[function(e,t,n){var r,o;o=e(541)("manage_members"),r=e(660),t.exports=o.statelessRenderable("MemberList",function(e){var t,n,i;return t=e.members,n=e.selectedMembers,i=e.toggleMember,o.div(function(){return o.div(".member-list-header",function(){return o.div(".name.quiet",function(){return o.format("name")}),o.div(".select.quiet",function(){return o.format("select")})}),t.forEach(function(e){var t;return t=n.some(function(t){return t===e.id}),o.createElement(r,{isSelected:t,member:e,toggleMember:i})})})})},{}],660:[function(e,t,n){var r;r=e(541)("manage_members"),t.exports=r.statelessRenderable("Member",function(e){var t,n,o,i,a,s,u,c,l,d,p,h;return a=e.isSelected,s=e.member,p=e.toggleMember,t=s.avatarHash,n=s.fullName,i=s.initials,o=s.id,h=s.username,u=function(){return p(o)},c=function(e){return"Enter"===e.key||" "===e.key?u():void 0},l=a?".checked":"",d=n+" ("+h+")",r.div(".member-wrapper",{tabIndex:0,onClick:u,onKeyUp:c},function(){return r.div(".member",function(){return t?r.img(".member-avatar",{height:"32",width:"32",src:window.avatarDomain+"/"+t+"/50.png",srcSet:window.avatarDomain+"/"+t+"/50.png 1x, "+window.avatarDomain+"/"+t+"/50.png 2x",alt:d,title:d}):r.span(".member-initials",{title:d},function(){return r.text(i)})}),r.div(".full-name",function(){return r.text(n)}),r.div(".quiet",function(){return r.text("@"+h)}),r.div(".checkbox"+l,function(){return r.span(".icon-lg.icon-check")})})})},{}],661:[function(e,t,n){var r,o,i;r=e(93),o=e(102),i=e(541)("manage_members"),t.exports=i.statelessRenderable("Summary",function(e){var t,n,a,s,u,c,l;return t=e.addSelectedMembers,u=e.price,c=e.selectedMembersCount,l=e.subscriptionIntervalKey,n=c?"":".disabled",s=o("new member license count",c),a=r(u),i.div(function(){return i.div(".summary-header.quiet",function(){return i.format("summary")}),i.div(".summary",function(){return i.div(".license-count",function(){return i.text(s)}),i.div(".quiet",function(){return i.format(l)}),i.div(".total",function(){return i.format("total-price",{price:a})})}),i.button(".primary"+n,{onClick:t,disabled:!c},function(){return i.format("add-to-team")})})})},{}],662:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O=function(e,t){function n(){this.constructor=e}for(var r in t)A.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},A={}.hasOwnProperty;r=e("jquery"),o=e(289),i=e(559),a=e(220),s=e(221),u=e(35),l=e(551),d=e(204),p=e(100),h=e(22),x=e(103),j=e(861),f=e(208),g=e(603),v=e(725),b=e(27),y=e(569),w=e(133),_=e(549),k=e("underscore"),S=e(109),T=e(546),C=e(850),E=e(51),c=e(41),t.exports=m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return O(t,e),S(v,g,l,t),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){this.savedSearch=""},t.prototype.events={"click .js-search-results .js-select-member":"addMember","paste .js-search-input":"searchPaste","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember","click .js-show-invitation-link":"showInvitationLink","click .js-invitation-link":"clickInvitationLink","click .js-deactivate-link":"deactivateInvitationLink"},t.prototype.render=function(){var e,t,n;return t={},t.canInviteMembers=!0,t.canAddMembers=!0,t.isPerUser=b.isPerUser(this.model.get("products")),t.perUserPrice=null!=(n=b.getPrice(this.model.get("products")))?n.toFixed(2):void 0,t.isYearly="yearly"===b.getInterval(this.model.get("products")),t.isMonthly="monthly"===b.getInterval(this.model.get("products")),this.$el.html(j(t)),null==(e=o.addMemberToOrganizationAd(u.me(),this.model))||c.get("dontUpsell")||this.$(".js-upgrade-team").html(this.subview(e,this.model).render().el),this.setTimeout(function(e){return function(){return e.input=e.$(".js-search-input"),e.input.click(function(e){return w.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(e){var t;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),t=this.input.val().toLowerCase().trim(),""===t)return void this.clearSearchResults();this.loadingEl.show(),a({url:"/1/search/members/",type:"get",data:{idOrganization:this.model.id,query:t},dataType:"json",success:function(e){return function(n){var r;return r=k.sortBy(n,function(e){var t;return null!=(t=e.fullName)?t.toLocaleLowerCase():void 0}),e.renderSearchResults(t,r)}}(this)})}},t.prototype.keydownEvent=function(e){var t;t=p.getKey(e),t===h.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(w.stop(e),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(w.stop(e),this.$(".email-invite:first").click()):(t===h.ArrowUp||t===h.ArrowDown)&&(w.stop(e),w.navMenuList(this.$(".js-search-results .js-list"),"li",t))},t.prototype._handleError=function(e){var t,n;return t=x(e),i.showLiteralText(t,"error","alert",3e3),E("Invitations","Error: "+(null!=(n=e.message)?n:e.responseText)),this.input.focus().select()},t.prototype.addMember=function(e){var t,n;w.stop(e),r(e.target).closest(".item.disabled").length>0||(this.clearSearchResults(),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),this.model.addMember(n).catch(s,this._handleError.bind(this)))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,n,r;return r=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,t=k.compact(w.removeDomainFromEmailAddress(e.email).split(r)).join(" ").replace(n,""),e.fullName=w.toTitleCase(t),e.modelType="Organization",this.$(".js-uninvited-search-results").append(C(e)).show()},t.prototype.sendEmailInvite=function(e){var t,n,o,i;if(w.stop(e),n=this.$(".js-send-email-invite"),null==n.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),i=t.val().trim(),!w.validName(i))return w.setCaretAtEnd(t),void r(".js-name-error").show();o={fullName:i,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},n.attr("disabled","disabled"),a({url:"/1/organizations/"+this.model.id+"/members",type:"put",dataType:"json",data:o,success:function(e){return function(t){var r;return r=new f(t,{modelCache:e.modelCache}),e.model.memberList.get(r.id)||e.model.memberList.add(r),E("Invitations","Send Email Org Invite to New Member","Role: "+t.type),n.removeAttr("disabled"),y.hide()}}(this),error:this._handleError.bind(this)})}},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-uninvited-search-results").hide().empty(),r(".js-search-results").hide()},t.prototype.removeInvitation=function(e){var t;t=r(e.currentTarget).closest(".invitation").data("id"),d.prototype.delete({model:this.model,idInvitation:t,success:function(e){return function(){return E("Invitations","Delete Organization Invite"),e.search}}(this)}),w.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===u.myId()||this.model.owned()},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t}(_)},{}],663:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty,g=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(7),o=e(83),a=e(674),s=e(569),u=e(133),c=e(549),l=e("underscore"),p=e(546),h=e(51),d=e(102),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="org activity for member",t.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},t.prototype.initialize=function(){return this.org=this.options.org},t.prototype.events={"click .js-view-org-boards-for-member":"viewBoards","click .js-view-member-org-cards":"viewCards"},t.prototype.render=function(e){var t,n,i,a,s,u,c;for(i=this.model.toJSON(),n=0,u=l.filter(this.org.boardList.models,function(e){return function(e){return e.isOpen()}}(this)),a=0,s=u.length;s>a;a++)t=u[a],c=this.model,g.call(t.memberList.models,c)>=0&&n++;return i.boardCount=d("boards",n),i.hasBoards=n>0,this.org.isFeatureEnabled("orgCards")&&(i.orgCardsUrl=r.getOrganizationMemberCardsUrl(this.org.get("name"),i.username)),this.$el.html(p.fill("org_member_activity",i)),o.update(this.el),this},t.prototype.viewCards=function(){return h("Organization View","Members Page","Activity - View Org Cards")},t.prototype.viewBoards=function(e){u.stop(e),h("Organization View","Members Page","Activity - View Boards"),s.pushView({view:new a({model:this.model,parent:this.org,modelCache:this.modelCache})})},t}(c)},{}],664:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e("react"),i=e(541)("org_account"),a=e(51),r=function(e){function t(){this.state={hasEnterprise:!0}}return s(t,e),t.displayName="OrgBCSettingsComponent",t.prototype.componentDidMount=function(){return this.props.hasEnterprisePromise.then(function(e){return function(t){return e.setState({hasEnterprise:t})}}(this))},t.prototype.render=i.renderable(function(){var e,t,n,r,o,s,u,c,l;return c=this.props,u=c.items,s=c.isAdmin,r=c.hasBC,e=c.billingUrl,l=c.upsellEnabled,o=this.state.hasEnterprise,n=function(e){return"/business-class"===e.target.getAttribute("href")?a("Organization View","Settings Page","A Whole Lot More Link"):void 0},t=function(){return a("Organization View","Settings Page","Upgrade My Team Button")},i.div(function(){return r?i.div(function(){return u.forEach(i.addElement)}):!o&&l?i.div(".org-bc-settings",function(){return i.div(".org-bc-settings-header",{onClick:n},function(){return i.span(function(){return i.img({src:"https://a.trellocdn.com/images/3494275fd68fd1b05677e97f6c0874e3/business-class-logo-blue.svg"})}),i.br(),i.format("upgrade-to-trello-business-class-to-unlock-these-settings"),i.br(),s?i.link(e,".button-link.primary",{onClick:t},function(){return i.format("upgrade-my-team")}):(i.br(),i.format("seem-helpful-ask-your-team-admin-to-consider-upgrading-your-team"),i.br(),i.br())}),u.forEach(i.addElement)}):void 0})}),t}(o.Component),t.exports=r},{}],665:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e("react"),i=e(541)("org_account"),a=e(51),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.displayName="OrgInviteRestrictionsContentsComponent",t.prototype.render=i.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.restrictions,i.div(function(){return i.div(".setting-item-detail",function(){return i.div(".markeddown",function(){return r.length?(i.p(function(){return i.format("only-people-with-these-email-domains-can-join-this-organization")}),i.ul(function(){var e,t,n,o;for(o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(i.li(function(){return i.strong(function(){return i.text(n)})}));return o})):i.p(function(){return i.format("anyone-with-any-email-domain-can-be-added-to-this-organization")})})}),e&&!t?i.p(".helper.u-float-left",function(){return i.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})}),t}(o.Component),t.exports=r},{}],666:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;m=e(541)("org_account"),r=e(643),o=e(644),a=e(664),s=e(665),u=e("react"),c=e("react-dom"),l=e(692),d=e(693),p=e(694),h=e(696),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.displayName="OrgAccountComponent",t.prototype.render=m.renderable(function(){return m.div(function(e){return function(){return m.addElement(e.getVisibilitySection()),e.props.hasBC?(m.addElement(e.getBCSettingsComponent()),m.addElement(e.getSlackSection())):(m.addElement(e.getSlackSection()),m.addElement(e.getBCSettingsComponent()))}}(this))}),t.prototype.getVisibilitySection=function(){return u.createElement(l,{header:m.render(function(){return m.format("team-visibility")}),contents:u.createElement(h,{canChange:this.props.isAdmin,visibility:this.props.visibility}),onChange:this.props.openChangeOrgVis,canChange:this.props.isAdmin})},t.prototype.getBCSettingsComponent=function(){var e;return e={items:[this.getOrgInviteRestrictionsSection(),this.getBoardCreateVisibilityRestrictionsSection(),this.getBoardInviteRestrictionsSection(),this.getSlackRestrictionsSection()],isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,billingUrl:this.props.billingUrl,hasEnterprisePromise:this.props.hasEnterprisePromise,upsellEnabled:this.props.upsellEnabled},u.createElement(a,e)},t.prototype.canChange=function(){return this.props.isAdmin&&this.props.prefsEnabled},t.prototype.getOrgInviteRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("team-membership-restrictions"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(s,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,restrictions:this.props.inviteRestrictions}),onChange:this.props.openChangeOrgInviteRestrictions,canChange:this.canChange()})},t.prototype.getBoardCreateVisibilityRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("board-creation-restrictions"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(r,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,restrictions:this.props.boardVisibilityRestrictions}),onChange:this.props.openChangeBoardVisRestrictions,canChange:this.canChange()})},t.prototype.getBoardInviteRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("inviting-non-org-members-to-boards"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(o,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,restricted:this.props.externalMembersDisabled}),onChange:this.props.openChangeNonOrgMemberBoardInvites,canChange:this.canChange()})},t.prototype.getSlackRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("slack-team-restrictions"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(p,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,slackAssociation:this.props.slackAssociation}),onChange:this.props.openChangeSlackRestrictions,canChange:this.canChange()})},t.prototype.getSlackSection=function(){return u.createElement(d,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,slackAssociation:this.props.slackAssociation,deleteSlackAssociation:this.props.deleteSlackAssociation,changeSlackSelfJoin:this.props.changeSlackSelfJoin})},t}(u.Component),t.exports=i},{}],667:[function(e,n,r){var o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V=function(e,t){function n(){this.constructor=e}for(var r in t)z.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},z={}.hasOwnProperty;o=e("jquery"),i=e(74),a=e(221),s=e(35),u=e(316),c=e(649),d=e(561),p=e(7),h=e(651),P=e(103),L=e(46),m=void 0,t(function(){return m=e(40)}),f=e(666),g=e(27),b=e(670),y=e(686),w=e(687),_=e(688),k=e(689),C=e(226),x=e(569),j=e("bluebird"),S=e("react"),T=e("react-dom"),E=e(540),O=e(133),A=e("underscore"),I=e(51),N=e(50),B=e(104),D=e(541)("org_account"),M=e(245),l=e(41),n.exports=v=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return V(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:prefs",this.renderMainContent),this.listenTo(this.model,"change:slack-association",this.renderMainContent)},t.prototype.renderMainContent=function(){return null==this.$reactRoot&&(this.$reactRoot=o("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-org-account"),this},t.prototype.renderReactSection=function(){return T.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){return S.createElement(E,{},D.render(function(e){return function(){return D.div(function(){return D.addElement(e.getOrgAccountComponent()),e.model.owned()?e.model.isPremium()&&!i.willExpire(e.model.get("paidAccount"))?D.addElement(e.orgBCDelete()):D.createElement(h,{onClick:M(e,"orgDeleteConfirm")}):void 0})}}(this)))},t.prototype.getOrgAccountComponent=function(){var e,t;return e={isAdmin:this.model.owned(),slackAssociation:this.model.getLatestSlackAssociation(),prefsEnabled:this.model.isFeatureEnabled("prefs"),hasBC:this.model.isPremium(),hasEnterprisePromise:this.hasEnterprise(),visibility:this.model.getPermLevel(),billingUrl:this.model.get("name")+"/billing",upsellEnabled:!l.get("dontUpsell"),changeSlackSelfJoin:this.model.changeSlackSelfJoin.bind(this.model),deleteSlackAssociation:this.model.deleteSlackAssociation.bind(this.model),inviteRestrictions:null!=(t=this.model.get("prefs").orgInviteRestrict)?t:[],boardVisibilityRestrictions:this.model.get("prefs").boardVisibilityRestrict,externalMembersDisabled:this.model.get("prefs").externalMembersDisabled,openChangeOrgVis:this.openChangeOrgVis.bind(this),openChangeOrgInviteRestrictions:this.openChangeOrgInviteRestrictions.bind(this),openChangeBoardVisRestrictions:this.openChangeBoardVisRestrictions.bind(this),openChangeNonOrgMemberBoardInvites:this.openChangeNonOrgMemberBoardInvites.bind(this),openChangeSlackRestrictions:this.openChangeSlackRestrictions.bind(this)},this.model.ensureSlackAssociation(),S.createElement(f,e)},t.prototype.hasEnterprise=function(){return j.map(s.me().get("idOrganizations"),function(e){return m.loadOrganizationData(e)}).then(function(e){return 0!==e.filter(function(e){return e.get("idEnterprise")}).length})},t.prototype.openChangeOrgVis=function(e){x.toggle({elem:e,view:new c({model:this.model,modelCache:this.modelCache})}),I("Organization View","Settings Page","Open Change Org Visibility")},t.prototype.openChangeOrgInviteRestrictions=function(e){x.toggle({elem:e,view:new w({model:this.model,modelCache:this.modelCache})}),I("Organization View","Settings Page","Open Restrict Org Invites by Email Domain")},t.prototype.openChangeNonOrgMemberBoardInvites=function(e){x.toggle({elem:e,view:new b({model:this.model,modelCache:this.modelCache})}),I("Organization View","Settings Page","Toggle Allow Inviting Non-Org Members to Boards")},t.prototype.openChangeSlackRestrictions=function(e){x.toggle({elem:e,view:new _({model:this.model,modelCache:this.modelCache})}),I("Organization View","Settings Page","Toggle Slack Team Linking Restrictions")},t.prototype.openChangeBoardVisRestrictions=function(e){x.toggle({elem:e,view:new y({model:this.model,modelCache:this.modelCache})}),I("Organization View","Settings Page","Open Change Board Visibility")},t.prototype.bcAdLink=function(){return I("Organization View","Settings Page","Inline Business Class Ad Link")},t.prototype.orgBCDelete=function(){var e;return I("Organization View","Settings Page","Open Delete Org Dialog"),e=function(e){return function(){return new j(function(t,n){return e.model.destroy({success:function(){return I("Organization","Successfully Delete"),t()},error:function(e,t){return n(a.fromResponse(t.status,P(t)))}})}).then(function(){return p.navigate("/",{trigger:!0})})}}(this),I("Organization View","Settings Page","Open Cancel Business Class and Delete Team Dialog"),S.createElement(u,{key:"cancel bc",isDeleting:!0,productName:B("products.bc"),id:this.model.id,cancelProduct:function(t){return function(n){var r,o;return n&&(o=n.reason,r=n.details,N(t.model,o,r)),t.model.paysWithPurchaseOrder()?e():C.cancel(t.model).then(function(e){return I("Organization","Successfully Canceled Paid Account"),t.model.set(e)}).catch(function(e){return L(e)}).then(function(){return e()})}}(this)})},t.prototype.orgDeleteConfirm=function(e){var t;I("Organization View","Settings Page","Open Delete Org Dialog"),t=function(e){return function(){return new j(function(t,n){return e.model.destroy({success:function(){return I("Organization","Successfully Delete"),t()},error:function(e,t){return n(a.fromResponse(t.status,P(t)))}})}).then(function(){return x.hide(),p.navigate("/",{trigger:!0})})}}(this),this.model.isPremium()&&!i.willExpire(this.model.get("paidAccount"))?(I("Organization View","Settings Page","Open Cancel Business Class and Delete Team Dialog"),x.toggle({elem:e,getViewTitle:function(){return B(["view title","delete team"])},maxWidth:600,reactElement:S.createElement(u,{key:"cancel bc",initialIsCancelling:!0,isDeleting:!0,productName:B("products.bc"),cancelProduct:function(e){return function(n){var r,o;return o=n.reason,r=n.details,N(e.model,o,r),e.model.paysWithPurchaseOrder()?t():C.cancel(e.model).then(function(t){return I("Organization","Successfully Canceled Paid Account"),e.model.set(t)}).catch(function(e){return L(e)}).then(function(){return t()})}}(this)})})):d.toggle("delete organization",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return t().done()}}(this)})},t.prototype.remove=function(){return T.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(k)},{}],668:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e("react"),r=e(654),a=e(541)("org_members"),t.exports=o=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={showingAll:!1}}return s(t,e),t.prototype.render=a.renderable(function(){var e,t,n,o,s,u,c,l,d,p,h,m,f,g,v;return h=this.props,e=h.canManageMembers,d=h.openManageMembers,t=h.filter,c=h.onFilterChange,l=h.onShowAllChange,s=h.inviteTeamMembers,g=h.teamMemberCount,f=h.teamIsEmpty,n=h.guestMemberCount,u=h.memberTypeFilter,p=h.orgId,o=h.hasBC,m=this.state.showingAll,v=function(e){return function(){return m=!e.state.showingAll,e.setState({showingAll:m}),l(m)}}(this),a.div(function(){return a.div(".org-members-section",{class:a.classify({active:"team-member"===u})},function(){return f?(a.div(".org-members-empty-container",function(){return a.img({className:"org-members-team-illustration",alt:a.l("invite-your-team"),src:"https://a.trellocdn.com/images/organization/b0d9f513a05be128693e0b0dbe9618b5/new-team.svg"}),a.div(".org-members-empty-content",function(){return a.h1(".org-members-heading",function(){return a.format("invite-your-team")}),a.p(".org-members-subheading",function(){return a.format("trello-works-best")}),a.addElement(i.createElement(r,{placeholder:a.l("invite-input-placeholder"),orgId:p}))})}),o?a.p(".org-members-empty-bc-billing.quiet",function(){return a.icon("enterprise"),a.format("inviting-new-members-will-update-billing")}):void 0):a.div(".org-members-actions-container",function(){return a.div(".org-members-actions-header",function(){return a.h1(function(){return a.format("team-members"),a.raw("&nbsp;"),a.span(".team-member-count",function(){return a.text("("+g+")")})}),a.p(function(){return o?a.format("team-members-view-bc"):a.format("team-members-view")})}),a.div(".org-members-actions",function(){return a.div(".org-members-actions-search",function(){return a.input(".org-members-page-navigation-input",{type:"text",placeholder:a.l("filter-by-name"),value:t,onChange:function(e){return c(e.target.value)}})}),a.div(".org-members-actions-add",function(){return e?a.b(s,{class:"primary button-link autowrap"},function(){return a.icon("add-member","invite-team-members")}):void 0})})})}),a.div(".org-members-section",{class:a.classify({active:"guest"===u})},function(){return n?a.div(".org-members-actions-container",function(){return a.div(".org-members-actions-header",function(){return a.h1(function(){return a.format("guests"),a.raw("&nbsp;"),a.span(".guest-member-count",function(){return a.text("("+n+")");
})}),a.p(function(){return o?a.format("guests-view-bc"):a.format("guests-view")})}),a.div(".org-members-actions",function(){return a.div(".org-members-actions-search",function(){return a.input(".org-members-page-navigation-input",{type:"text",placeholder:a.l("filter-by-name"),value:t,onChange:function(e){return c(e.target.value)}})})})}):a.div(".org-members-empty-container",function(){return a.img({className:"org-members-guest-illustration",alt:a.l("boards-shared-with-friends"),src:"https://a.trellocdn.com/images/organization/a76a836ff67e77d7f911b8896e96e552/guests.svg"}),a.div(".org-members-empty-content",function(){return a.h1(".org-members-heading",function(){return a.format("boards-shared-with-friends")}),a.p(".org-members-subheading",function(){return a.format("if-client-contractors")})})})})})}),t}(i.Component)},{}],669:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e("react"),a=e(541)("org_ads"),s=e(51),o=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.dismissAndTrack=this.dismissAndTrack.bind(this)}return u(t,e),t.prototype.dismissAndTrack=function(){return s("Organization View","Members Page","Dismiss Security Ad"),this.props.dismissAd()},t.prototype.render=a.renderable(function(){var e;return e=this.props.billingUrl,a.div(".org-ad",function(t){return function(){return a.div(".close-ad",{onClick:t.dismissAndTrack},function(){return a.icon("close")}),a.img(".org-upsell-image",{src:"https://a.trellocdn.com/images/ads/2d6f0633d534c6c18f992b9b71b96f49/lock.svg"}),a.div(".org-ad-description",function(){return a.p(".bold",function(){return a.format("need-more-security")}),a.p(function(){return a.format("deactivate-former-members")})}),a.a(".button.primary.js-lets-do-this",{href:e,onClick:function(){return s("Organization View","Members Page","Lets Do This Button")}},function(){return a.format("lets-do-this")})}}(this))}),t}(i.Component),r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.dismissAndTrack=this.dismissAndTrack.bind(this)}return u(t,e),t.prototype.dismissAndTrack=function(){return s("Organization View","Boards Page","Dismiss Collections Ad"),this.props.dismissAd()},t.prototype.render=a.renderable(function(){var e;return e=this.props.billingUrl,a.div(".org-ad",function(t){return function(){return a.div(".close-ad",{onClick:t.dismissAndTrack},function(){return a.icon("close")}),a.div(".org-ad-description",function(){return a.p(".bold",function(){return a.format("need-more-control")})}),a.img(".org-upsell-image",{src:"https://a.trellocdn.com/images/collections/04c368f4479f478b6705bbd4cc373387/business-class-feature-roadmap.png"}),a.div(".org-ad-description",function(){return a.p(function(){return a.format("manage-with-business-class")})}),a.a(".button.primary.js-lets-do-this",{href:e,onClick:function(){return s("Organization View","Boards Page","Lets Do This Button")}},function(){return a.format("lets-do-this")})}}(this))}),t}(i.Component),t.exports={OrganizationMembersAd:o,OrganizationBoardsAd:r}},{}],670:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(133),i=e(549),a=e(912),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewTitleKey="inviting non-org members",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.render)},t.prototype.events={"click a":"setPref"},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.externalMembersDisabled=e.prefs.externalMembersDisabled,this.$el.html(a(e)),this},t.prototype.setPref=function(e){o.stop(e),e.target.parentElement.classList.contains("active")||this.model.setPref("externalMembersDisabled",!this.model.getPref("externalMembersDisabled"))},t}(i)},{}],671:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V,z,R,F,$,U,q=function(e,t){function n(){this.constructor=e}for(var r in t)H.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},H={}.hasOwnProperty,W=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(74),a=e(218),s=e(640),u=e(35),p=e(317),c=e(641),l=e(642),h=e(318),m=e(319),f=e(561),g=e(7),b=e(320),v=e(323),i=e(322),M=e(330),B=e(331),S=e(329),y=e(40),w=e(27),d=e(314),k=e(689),C=e(226),x=e(294),j=e(569),E=e("react"),O=e("react-dom"),A=e(540),P=e(133),L=e("underscore"),D=e(332),N=e(104),I=e(245),F=e(51),$=e(50),V=e("moment"),z=e(113),U=e("xtend"),R=e("recup"),T=e("bluebird"),t.exports=_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return q(t,e),t.prototype.renderMainContent=function(){return F("Team Billing Page","Open"),this.$(".js-content").empty(),null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-billing"),this},t.prototype.renderReactSection=function(){return O.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){var e;return E.createElement(A,{},o.hasAccount(null!=(e=this.model.get("paidAccount"))?e.standing:void 0)&&this.model.owned()?this.getBillingComponent():this.getSignUpComponent())},t.prototype.getBillingComponent=function(){var e;return e=D(this.model,w,{type:"bc",productName:N("products.bc"),productIconClass:"business-class",detailsUrl:"/business-class",onRenewClick:I(this,"renew"),cancelProduct:I(this,"cancel"),onSwitchToYearly:I(this,"switchToYearly"),didntGetAuthStatus:function(e){return function(){return y.loadOrganizationData(e.model.get("name")).done()}}(this),didGetAuthStatus:function(e){return function(){return y.loadOrganizationData(e.model.get("name")).done()}}(this),onChangeBillingContactClick:I(this,"changeBillingContactPopover"),reactivateProduct:I(C,"reactivate",this.model),changeCreditCard:I(C,"changeCreditCard",this.model),createPaidAccount:I(C,"createAccount",this.model),paidAccountPoll:I(a,{url:this.model.urlRoot+"/"+this.model.id+"?paid_account=true"}),onClickChangeCC:I(this,"changeCreditCardPopover"),onChangeAdditionalDetailsClick:I(this,"changeAdditionalDetailsPopover")}),R.render(function(t){return function(){return R.div(function(){var n,o,i,a,s,u;return o=null!=(i=e.paidAccount)&&null!=(a=i.products)?a[0]:void 0,null!=o&&w.isUpgrade(o)&&(s=w.isPerActiveUser(o)?t.model.get("activeBillableMemberCount"):t.model.get("billableMemberCount"),n=W.call(w.BC1Products,o)>=0&&s>=10&&!r.cookie("upgrade-bc")||t.model.isEnterprise(),R.createElement(x,{stringsKey:"business-class-upgrade",subtitleCount:2,infoUrl:"/business-class",epilogueCount:n?2:1,icon:"business-class"}),n?R.createElement(l):(u=0,R.createElement(c,U(w.currentPriceObjectForModel(t.model),{isMonthly:w.isMonthly(o),yearlyDiscount:u,yearlyDiscountAmount:e.current.yearly.totalPrice*u,isPerActiveUser:w.isPerActiveUser(o),userCount:s,onUpgradeClick:function(e){return C.changeProduct(t.model,e).then(function(e){return F("Organization","Successfully Upgraded to BC3"),t.model.set(e)})}})))),R.createElement(d,e)})}}(this))},t.prototype.getSignUpComponent=R.renderable(function(){return R.div(function(e){return function(){var t;return e.model.isFeatureEnabled("plugins")||R.createElement(x,{stringsKey:"business-class",subtitleCount:1,infoUrl:"/business-class",epilogueCount:0,icon:"business-class"}),e.model.owned()?(t=w.currentPriceObjectForModel(e.model),R.div(".billing",function(){var n,r,o,s,c,l;return R.createElement(b,{defaultProduct:t.yearly.productNumber,monthlyProduct:t.monthly,yearlyProduct:t.yearly,onSubmit:I(C,"createAccount",e.model),doPoll:I(a,{url:e.model.urlRoot+"/"+e.model.id+"?paid_account=true"}),buttonKey:"start-business-class",contentBuilders:[z(S,{productName:"Business Class",monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.yearly.productNumber,billingStrategy:t.billingStrategy}),z(v),z(i),z(M,{monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.yearly.productNumber,billingStrategy:t.billingStrategy}),z(B)],extraData:{billingContactFullName:null!=(n=null!=(r=e.model.get("paidAccount"))?r.contactFullName:void 0)?n:u.me().get("fullName"),billingContactEmail:null!=(o=null!=(s=e.model.get("paidAccount"))?s.contactEmail:void 0)?o:u.me().get("email"),billingContactLocale:null!=(c=null!=(l=e.model.get("paidAccount"))?l.contactLocale:void 0)?c:u.me().getPref("locale")},didntGetAuthStatus:function(){return y.loadOrganizationData(e.model.get("name")).done()},didGetAuthStatus:function(){var t,n;return null!=(n=null!=(t=e.options.urlOptions)?t.returnUrl:void 0)?y.loadOrganizationPaidAccount(e.model.id).then(function(){return g.navigate(n,{trigger:!0})}):g.organizationBoardsView(e.model.get("name"),e.model.id)}})})):e.model.isFeatureEnabled("plugins")?void 0:R.createElement(s,{admins:e.model.memberList.chain().filter(function(t){return e.model.ownedByMember(t)}).map(function(e){return{avatarHash:e.get("avatarHash"),fullName:e.get("fullName"),username:e.get("username")}}).value()})}}(this))}),t.prototype.cancel=function(e){var t,n;return e&&(n=e.reason,t=e.details),F("Organization View","Billing Page","Open Cancel Business Class Dialog"),$(this.model,n,t),e?T.resolve():C.cancel(this.model).then(function(e){return function(t){return F(e.model.typeName,"Successfully Canceled Paid Account"),e.model.set(t)}}(this))},t.prototype.renew=function(){return F("Organization View","Billing Page","Renew Expiring Business Class Subscription"),C.renew(this.model).then(function(e){return function(t){return F("Organization","Successfully Renewed Expiring Yearly Business Class Subscription"),e.model.set(t)}}(this)).done()},t.prototype.switchToYearly=function(e){return f.toggle("yearly billing switch",{elem:e,model:this.model,confirmBtnClass:"primary",fxConfirm:function(e){return function(t){return C.changeProduct(e.model,w.getYearlyEquivalent(e.model.get("paidAccount").product)).then(function(t){return F("Organization","Successfully Switched Business Class to Yearly Billing"),e.model.set(t)}).done()}}(this)})},t.prototype.changeBillingContactPopover=function(e){return F("Organization View","Billing Page","Open Change Billing Contact Info"),j.toggle({elem:e,view:new h({model:this.model,modelCache:this.modelCache})})},t.prototype.changeCreditCardPopover=function(e){return F("Organization View","Billing Page","Open Change Credit Card"),j.toggle({elem:e,view:new m({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAdditionalDetailsPopover=function(e){return F("Organization View","Billing Page","Open Change Additional Details"),j.toggle({elem:e,view:new p({model:this.model,modelCache:this.modelCache})})},t.prototype.remove=function(){return O.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(k)},{}],672:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};l=e("underscore"),o=e(351),r=e(350),i=e(354),a=e(356),s=e(673),u=e("react"),c=e(133),v=e(541)("org_filtering"),h=e(104),d=e(245),p=e(94),m=e(135),y=e("xtend"),b=e(51),g=["active","members","stars","alphabetical"],f=["tagFilter","sort"],t.exports=u.createClass({displayName:"OrganizationBoardsComponent",getInitialState:function(){var e,t;return e=l.defaults(null!=(t=this.props.initialFilterState)?t:{},{filter:"",tagFilter:null,sort:g[0],showOtherPrivateBoards:!1}),this.filterDoesntExist(e.tagFilter,this.props.tags)&&(e.tagFilter=null),e},render:v.renderable(function(){return v.div(".boards-page-layout",function(e){return function(){return v.div(".boards-page-layout-sidebar",function(){return v.addElement(e.getFilterComponent())}),v.div(".boards-page-layout-list",function(){return v.addElement(e.getBoardsComponent())})}}(this))}),componentWillReceiveProps:function(e){return this.filterDoesntExist(this.state.tagFilter,e.tags)?this.setState({tagFilter:null}):void 0},componentWillUpdate:function(e,t){return l.isEqual(l.pick(t,f),l.pick(this.state,f))?void 0:this.props.onFilterChange(l.pick(t,f))},shouldComponentUpdate:m,filterDoesntExist:function(e,t){return e&&!(w.call(l.pluck(t,"id"),e)>=0)},toggleTagFilter:function(e){return e===this.state.tagFilter?this.setState({tagFilter:null}):this.setState({tagFilter:e})},toggleShowOtherPrivateBoards:function(){return this.setState({showOtherPrivateBoards:!this.state.showOtherPrivateBoards})},isVisibleBoard:function(e){var t;return(!this.state.tagFilter||(t=this.state.tagFilter,w.call(e.idTags,t)>=0))&&(!this.state.filter||c.buildFuzzyMatcher(this.state.filter)(e.name))&&(this.state.showOtherPrivateBoards||!e.isOtherPrivate)},getBoardsComponent:function(){var e;return e={items:l.chain(this.props.boards.slice().sort(function(e,t){return e.name.localeCompare(t.name)})).sortBy(function(e){return function(t){switch(e.state.sort){case"alphabetical":return 0;case"active":return-t.dateLastActivity.valueOf();case"members":return-t.membershipCount;case"stars":return-t.starCount}}}(this)).map(function(e){return function(t){return y(t,{hidden:!e.isVisibleBoard(t),tagComponents:t.tags.map(function(t){return u.createElement(i,{text:t.name,key:t.id,selected:t.id===e.state.tagFilter,onClick:function(){return b("Organization View","Boards Page","Click Tag Under Board"),e.toggleTagFilter(t.id)}})}).concat(t.extraTagComponents)})}}(this)).map(function(e){return u.createElement(o,e)}).value(),createNewItem:null!=this.props.newBoard?u.createElement(r,{newBoard:this.props.newBoard,preloadData:this.props.preloadCreateBoardData}):void 0},u.createElement(a,e)},getFilterComponent:function(){var e,t,n;return e=function(e,t){var n,r,o,i,a,s,u,c;for(u={},r=0,a=e.length;a>r;r++)for(o=e[r],c=t(o),i=0,s=c.length;s>i;i++)n=c[i],Object.hasOwnProperty.call(u,n)||(u[n]=0),u[n]++;return u},t=e(this.props.boards,d.get("idTags")),n={tags:this.props.tags.map(function(e){return function(n){var r;return{html:v.l("tag-with-count",{name:n.name,count:p(null!=(r=t[n.id])?r:0)}),onClick:e.toggleTagFilter.bind(e,n.id),selected:n.id===e.state.tagFilter}}}(this)),sorts:g.map(function(e){return function(t){return{html:h(["org sort",t]),onClick:function(){return b("Organization View","Boards Page","Select Sort",t),e.setState({sort:t})},selected:t===e.state.sort}}}(this)),onFilterChange:function(e){return function(t){return e.setState({filter:t})}}(this),onAddTag:this.props.addTag,filter:this.state.filter,showOtherPrivateBoards:this.state.showOtherPrivateBoards,canShowOtherPrivateBoards:l.find(this.props.boards,"isOtherPrivate"),toggleOtherPrivateBoards:d(this,"toggleShowOtherPrivateBoards"),key:this.id},u.createElement(s,n)}})},{}],673:[function(e,t,n){var r,o,i,a;r=e("react"),a=e(541)("org_filtering"),i={alphabetical:"Alphabetical",active:"Most Active",members:"Number of Members",stars:"Number of Stars"},o=function(e,t,n){var r,o,i;return i=null!=n?n:{},r=i.hasCloseableItems,o=i.onAddTag,a.ul(".boards-page-navigation-list",function(){var n,i,s,u,c,l;for(a.li(".boards-page-navigation-list-header",function(){return a.text(t)}),i=0,s=e.length;s>i;i++)c=e[i],n=c.html,l=c.selected,u=c.onClick,a.li(".boards-page-navigation-list-item",function(){var e;return e={"boards-page-navigation-list-item-link":!0,"mod-closeable":r,"is-active":l},a.b(u,{class:a.classify(e)},function(){return a.raw(n),r&&l?a.icon("close",{class:"boards-page-navigation-list-item-link-icon"}):void 0})});null!=o&&a.li(".boards-page-navigation-list-item",function(){return a.b(o,{class:"boards-page-navigation-list-item-link mod-quiet"},function(){return a.format("create-tag")})})})},t.exports=r.createClass({displayName:"OrganizationBoardsFilterComponent",render:a.renderable(function(){var e,t,n,r,i,s,u,c,l;return i=this.props,t=i.filter,u=i.sorts,c=i.tags,r=i.onFilterChange,n=i.onAddTag,s=i.showOtherPrivateBoards,e=i.canShowOtherPrivateBoards,l=i.toggleOtherPrivateBoards,a.div(".boards-page-navigation",function(){return a.input(".boards-page-navigation-input",{type:"text",placeholder:a.l("search-for-boards"),value:t,onChange:function(e){return r(e.target.value)}}),o(u,a.l("sort")),c.length?o(c,a.l("filter-by-tag"),{hasCloseableItems:!0,onAddTag:n}):(a.p(".quiet.boards-page-navigation-explainer",function(){return a.format("tags-explanation")}),a.b(n,{class:"quiet-button"},function(){return a.format("create-tag")})),e?a.ul(".boards-page-navigation-list",function(){a.li(".boards-page-navigation-list-header",function(){return a.format("visibility")}),a.li(".boards-page-navigation-list-item",function(){var e;return e={"boards-page-navigation-list-item-link":!0,"mod-closeable":!0,"is-active":s},a.b(l,{class:a.classify(e)},function(){return a.format("show other private boards"),s?a.icon("close",{class:"boards-page-navigation-list-item-link-icon"}):void 0})})}):void 0})})})},{}],674:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(133),i=e(549),a=e("underscore"),u=e(546),s=e(104),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="boards for member",t.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},t.prototype.initialize=function(){this.org=this.options.parent},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.boards=this.org.boardList.models.filter(function(e){return function(t){return a.contains(t.memberList.models,e.model)&&t.isOpen()}}(this)).map(function(e){return function(t){var n;return n=t.toJSON(),n.memberType=s(["member types",t.getMemberType(e.model)]),n.url=t.getUrl(),n}}(this)),this.$el.html(u.fill("org_boards_for_member",e)),this},t}(i)},{}],675:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I,N,V=function(e,t){function n(){this.constructor=e}for(var r in t)z.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},z={}.hasOwnProperty,R=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};T=e("underscore"),r=e("jquery"),o=e(639),i=e(35),c=e(351),s=e(350),u=e(313),l=e(353),d=e(356),p=e(645),a=e(517),f=e(403),m=e(344),g=e(83),b=e(672),w=e(689),h=e(7),v=e(563),_=e(569),k=e("react"),C=e("react-dom"),E=e(345),x=e(540),M=e(88),j=e(118),S=e(133),D=e(900),B=e(104),O=e(245),I=e(51),L=e(541)("org_filtering"),A=e(94),N=e("xtend"),P=e("moment"),t.exports=y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return V(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),I("Organization Boards Page","Open"),this.listenTo(this.model,"change",this.renderReactSection),this.listenTo(this.model.boardList,"change:idTags change:name",this.renderReactSection),this.listenTo(this.model.tagList,"add remove reset change",this.renderReactSection),this.listenTo(i.me().boardStarList,"add remove reset",this.frameDebounce(this.renderReactSection)),this.listenTo(i.me(),"change:messagesDismissed",this.frameDebounce(this.renderReactSection))},t.prototype.events={"click .js-close-intro-helper":"closeBCIntro"},t.prototype.isFullWidth=function(){return!this.isAdDismissed("collection-features")||this.model.isFeatureEnabled("tags")},t.prototype.boardToModelForBoardItem=function(e){var t,n;return t={id:e.id,name:e.get("name"),idTags:e.getIdTags(),isOtherPrivate:null==i.me().boardList.get(e.id)&&"private"===e.getPref("permissionLevel"),membershipCount:e.getMembershipCount(),starCount:e.getStarCount("organization"),dateLastActivity:new Date(null!=(n=e.get("dateLastActivity"))?n:S.idToDate(e.id)),background:this.backgroundObjForBoard(e),showOptions:i.isLoggedIn(),isStarred:null!=i.me().boardStarList.getBoardStar(e.id),relUrl:e.getUrl(),onStarClick:function(e){return function(e){var t;t=i.me().boardStarList,null==t.getBoardStar(e)?t.starBoard(e):t.unstarBoard(e)}}(this),badgeComponents:this.model.isFeatureEnabled("tags")?this.badgeComponentsForBoard(e):[],key:e.id}},t.prototype.boardToModelForBoardItemWithTags=function(e){return N(this.boardToModelForBoardItem(e),{tags:this.tagsForBoard(e),extraTagComponents:[k.createElement(l,{onClick:this.addTagToBoard.bind(this,e),key:e.id,id:e.id})]})},t.prototype.boardToModelForBoardItemWithNoTags=function(e){return N(this.boardToModelForBoardItem(e),{tagComponents:[]})},t.prototype.backgroundObjForBoard=function(e){var t,n,r,o;return T.extend({brightness:e.getPref("backgroundBrightness")},e.getPref("backgroundTile")?{image:e.getPref("backgroundImage"),tiled:!0}:(t=null!=(n=null!=(r=S.smallestPreviewBiggerThan(e.getPref("backgroundImageScaled"),400,200))?r.url:void 0)?n:e.getPref("backgroundImage"))?{image:t,tiled:!1}:{color:null!=(o=e.getPref("backgroundColor"))?o:e.getClientBackgroundColor("blue")})},t.prototype.tagsForBoard=function(e){return this.model.tagList.models.filter(function(t){var n;return n=t.id,R.call(e.getIdTags(),n)>=0}).map(function(e){return{id:e.id,name:e.get("name")}})},t.prototype.storedTagsCleanup=function(e){var t,n;return t=j.get(this.localStorageKey()),n=null!=t?t.tagFilter:void 0,!n||R.call(T.map(e,function(e){return e.id}),n)>=0?void 0:(t.tagFilter=null,j.set(this.localStorageKey(),t))},t.prototype.addTagToBoard=function(e,t){return I("Organization View","Boards Page","Open Tag Select Menu"),_.toggle({elem:t,view:p,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.badgeComponentsForBoard=function(e){var t,n,r,o,i,s;return o=e.getStarCount("organization"),n=e.getMembershipCount(),t=null!=(r=e.get("dateLastActivity"))?r:S.idToDate(e.id),i=a.getPermLevelIconClassForBoard(e),s=a.getPermLevelAltTextForBoard(e),T.compact([k.createElement(u,{icon:i,title:s,iconClass:"is-vis-color",key:["vis",e.id].join("-")}),k.createElement(u,{icon:"member",text:A(n),title:L.l("members"),key:["member",e.id].join("-")}),o?k.createElement(u,{icon:"star",text:A(o),title:L.l("members-who-starred-board"),key:["star",e.id].join("-")}):void 0,k.createElement(u,{icon:"activity",text:g.toDateString(t),title:L.l("last-activity"),key:["activity",e.id].join("-")})])},t.prototype.renderMainContent=function(){var e;return e=this.model.isPremium()&&this.model.owned(),this.$(".js-content").empty(),e&&!i.me().isDismissed("BCIntro-"+this.model.id)&&this.$(".js-content").append(D({isEnterprise:this.model.belongsToRealEnterprise(),hasCSVExport:this.model.isFeatureEnabled("csvExport"),hasGoldMembers:this.model.isFeatureEnabled("goldMembers")})),null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-org-profile"),this},t.prototype.renderReactSection=function(){return C.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.localStorageKey=function(){return"orgFilteringState-"+this.model.id},t.prototype.saveFilter=function(e){return j.set(this.localStorageKey(),e)},t.prototype.getReactRoot=function(){return k.createElement(x,{},this.model.isFeatureEnabled("tags")?this.getFilterableBoardsComponent():this.getBoardsComponent())},t.prototype.getFilterableBoardsComponent=function(){var e;return e={key:this.model.id,id:this.model.id,tags:this.model.tagList.toJSON(),boards:this.getBoardItemsWithTags(),newBoard:i.me().canAddBoardsTo(this.model)?this.newBoard.bind(this):void 0,preloadCreateBoardData:O(this,"preloadCreateBoardData"),addTag:O(this,"addTag"),onFilterChange:O(this,"saveFilter"),initialFilterState:j.get(this.localStorageKey())},k.createElement(b,e)},t.prototype.getBoardsComponent=function(){var e,t,n;return t=i.me(),e=this.isAdDismissed("collection-features"),n={billingUrl:h.getOrganizationBillingUrl(this.model),showAd:!e,isAdDismissed:e,dismissAd:t.dismissAd.bind(t,"collection-features"),items:this.getBoardItemsWithNoTags().map(O.choke(1,k,"createElement",c))},i.me().canAddBoardsTo(this.model)&&(n.createNewItem=k.createElement(s,{newBoard:O(this,"newBoard"),preloadData:O(this,"preloadCreateBoardData")})),k.createElement(d,n)},t.prototype.addTag=function(e){return I("Organization View","Boards Page","Open Create Tag Menu"),_.toggle({elem:e,view:o,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.preloadCreateBoardData=function(){var e,t;return t=null!=(e=M("createBoardWithBackground"))?e.get("enabled"):void 0,t?E.preloadData():void 0},t.prototype.newBoard=function(e){var t,n;return I("Organization View","Boards Page","Open Create Board Menu"),n=null!=(t=M("createBoardWithBackground"))?t.get("enabled"):void 0,n?v.show({displayType:"mod-no-chrome",opacity:.75,reactElement:k.createElement(m,{defaultOrg:this.model})}):_.toggle({elem:e,view:f,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.getVisibleBoards=function(){return this.model.boardList.models.filter(function(e){return e.isOpen()})},t.prototype.getBoardItemsWithTags=function(){return this.getVisibleBoards().map(O(this,"boardToModelForBoardItemWithTags"))},t.prototype.getBoardItemsWithNoTags=function(){return this.getVisibleBoards().map(O(this,"boardToModelForBoardItemWithNoTags"))},t.prototype.remove=function(){return C.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t.prototype.closeBCIntro=function(){i.me().dismiss("BCIntro-"+this.model.id),I("Organization View","Profile Page","Dismiss BC Intro Helper"),this.renderMainContent(),S.scrollToTop()},t}(w)},{}],676:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e(559),o=e(220),i=e(83),a=e(106),u=e(689),c=e(133),l=e("underscore"),d=e(46),h=e(546),m=e(51),p=e("moment"),f=e(121),g=e("xtend"),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:exports",this.renderExports)},t.prototype.events={"click .js-create-new-export":"clickCreateNewExport","click .js-download-export":"downloadExport"},t.prototype.renderMainContent=function(){var e;return e={},e.hasCSV=this.model.isFeatureEnabled("csvExport"),this.$(".js-content").html(h.fill("org_export",e,{editable:this.model.editable()})),this.renderExports(),this.setActiveView(".js-org-export"),this},t.prototype.renderExports=function(){var e,t,n,r,o,s,u,c;if(t=this.model.toJSON({prefs:!0}),e=this.$(".js-list-exports").empty(),l.isEmpty(t.exports))r=h.fill("org_export_empty");else for(r="",u=t.exports,o=0,s=u.length;s>o;o++)n=u[o],t=l.clone(n),t.size=a.bytes(t.size),t.time=p(i.parse(t.startedAt)).calendar(),t.generating=null==t.exportUrl,c=f(["exports",t.status.stage]),null!=c?t.status=g(t.status,{stage:c}):d(new Error("Missing export stage for "+t.status.stage)),r+=h.fill("org_export_item",t);return e.append(r),this},t.prototype.export=function(e){return o({url:"/1/organizations/"+this.model.get("name")+"/exports",method:"post",data:{attachments:e},success:function(t){return function(n){return m("Organization","Export",e?"With Attachments":"Without Attachments"),null!=n?(t.model.get("exports").unshift(n),t.model.trigger("change:exports")):void 0}}(this),error:function(e){return function(e,t,n,o){return e.responseText.indexOf("in progress")>-1?r.show("ongoing org export","error","alert",5e3):o()}}(this)})},t.prototype.clickCreateNewExport=function(e){return c.stop(e),this.$("#includeAttachments").is(":checked")?this.export(!0):this.export(!1)},t.prototype.downloadExport=function(e){m("Organization","Download Export")},t}(u)},{}],677:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(118),i=e(549),a=e(546),s=e(51),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="link google apps domain",t.prototype.events={"click .js-link":"link"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(a.fill("org_link_ga_helper",e,{editable:this.model.editable()})),this},t.prototype.link=function(){s("Organization View","Members Page","Google Apps Marketplace link"),o.enabled()&&o.set("idOrganizationLinking",this.model.id)},t}(i)},{}],678:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(549),i=e(546),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.tagName="li",t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0}),e.visIconClass=this.model.getPermLevel(),e.hasBusinessClass=this.model.isPremium(),this.$el.html(i.fill("organization_list_item",e)),this},t}(o)},{}],679:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e("jquery"),o=e(678),a=e(549),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="ul",t.prototype.className="org-list",t.prototype.initialize=function(e){this.listenTo(this.model.organizationList,{"add remove reset change:closed":this.frameDebounce(this.render)})},t.prototype.render=function(){var e;return this.$el.empty(),e=this.model.getSortedOrgs().map(function(e){return function(t){return e.subview(o,t)}}(this)),this.appendSubviews(e),this},t}(a)},{}],680:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j=function(e,t){function n(){this.constructor=e}for(var r in t)S.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},S={}.hasOwnProperty;b=e("underscore"),y=e(245),o=e(663),i=e(668),s=e(669).OrganizationMembersAd,a=e(627),c=e(681),l=e(682),d=e(683),p=e(684),g=e(690),h=e("react"),m=e("react-dom"),f=e(540),w=e("recup"),_=e(88),k=e(541)("org_members"),C=e(51),v=e(133),x=e("xtend"),r=e(41),t.exports=u=function(e){function t(e){var n;t.__super__.constructor.apply(this,arguments),this.showNewLayout=null!=(n=_("teamMembersTabLayout"))?n.get("enabled"):void 0,this.state={filter:"",showAll:!1,memberTypeFilter:"team-member"}}return j(t,e),t.prototype.render=k.renderable(function(){return k.div(".org-members-page-layout",function(e){return function(){return k.div(".org-members-page-layout-sidebar",function(){return k.addElement(e.orgSidebarPropsToElement()),e.props.sidebar.hasBC||e.props.sidebar.isAdDismissed||r.get("dontUpsell")?void 0:k.addElement(e.orgAdComponent())}),k.div(".org-members-page-layout-list",function(){return e.showNewLayout&&k.addElement(e.getOrganizationActionsElement()),k.addElement(e.getMemberListElement())})}}(this))}),t.prototype.orgAdComponent=function(){var e;return e={billingUrl:this.props.sidebar.billingUrl,dismissAd:this.props.sidebar.dismissAd},h.createElement(s,e)},t.prototype.orgSidebarPropsToElement=function(){var e,t;return this.showNewLayout?(t=x(this.props.sidebar,{teamIsEmpty:this.props.teamIsEmpty,teamMemberCount:this.props.orgMemberList.length,guestMemberCount:this.props.collaboratorModels.length,memberTypeFilter:this.state.memberTypeFilter,onMemberTypeChange:function(e){return function(t){return e.setState({memberTypeFilter:t,filter:""})}}(this)}),h.createElement(c,t)):(e=x(this.props.sidebar,{filter:this.state.filter,onFilterChange:function(e){return function(t){return e.setState({filter:t})}}(this),onShowAllChange:function(e){return function(t){
return e.setState({showAll:t})}}(this)}),h.createElement(p,e))},t.prototype.getMemberListElement=function(){var e,t;return t={guest:this.props.collaboratorModels.map(y(this,"memberModelToMemberItemElement")),"team-member":this.props.teamIsEmpty?[]:this.props.memberModels.map(y(this,"memberModelToMemberItemElement"))},e={showNewLayout:this.showNewLayout,memberTypeFilter:this.state.memberTypeFilter,memberItems:this.showNewLayout?t[this.state.memberTypeFilter]:this.props.memberModels.map(y(this,"memberModelToMemberItemElement"))},h.createElement(d,e)},t.prototype.isVisibleMember=function(e){return(!e.hidden||this.state.showAll)&&(!this.state.filter||v.buildFuzzyMatcher(this.state.filter)(e.fullName))},t.prototype.memberModelToMemberItemElement=function(e){var t;return t=b.extend({isFilterMatch:this.isVisibleMember(e)},e),h.createElement(l,t)},t.prototype.getOrganizationActionsElement=function(){var e;return e=x(this.props.sidebar,{orgId:this.props.orgId,teamMemberCount:this.props.orgMemberList.length,guestMemberCount:this.props.collaboratorModels.length,memberTypeFilter:this.state.memberTypeFilter,teamIsEmpty:this.props.teamIsEmpty,hasBC:this.props.sidebar.hasBC,filter:this.state.filter,onFilterChange:function(e){return function(t){return e.setState({filter:t})}}(this),onShowAllChange:function(e){return function(t){return e.setState({showAll:t})}}(this)}),h.createElement(i,e)},t}(h.Component)},{}],681:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e("react"),i=e(541)("org_members"),t.exports=r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={showingAll:!1}}return a(t,e),t.prototype.render=i.renderable(function(){var e,t,n,r,o,a,s,u,c,l,d,p,h;return c=this.props,e=c.canShowAll,u=c.openManageMembers,t=c.filter,o=c.onFilterChange,s=c.onShowAllChange,r=c.memberTypeFilter,a=c.onMemberTypeChange,d=c.teamIsEmpty,p=c.teamMemberCount,n=c.guestMemberCount,l=this.state.showingAll,h=function(e){return function(){return l=!e.state.showingAll,e.setState({showingAll:l}),s(l)}}(this),i.div(function(){return i.div(".org-members-page-navigation-list",function(){return i.div(".org-members-options",function(){return i.div(".org-members-filter-list",function(){return i.h1(function(){return i.format("members-of-team-boards")}),i.ul(".org-members-filter",function(){return i.li(function(){return i.a({className:"team-member"===r?"active":void 0,href:"#",onClick:function(e){return function(e){return a("team-member")}}(this)},function(){return i.format("team-members"),d?void 0:(i.raw("&nbsp;"),i.text("("+p+")"))})}),i.li(function(){return i.a({className:"guest"===r?"active":void 0,href:"#",onClick:function(e){return function(e){return a("guest")}}(this)},function(){return i.format("guests"),n?(i.raw("&nbsp;"),i.text("("+n+")")):void 0})})})})})})})}),t}(o.Component)},{}],682:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e("react"),i=e(541)("member_list_item_detail"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=i.renderable(function(){var e,t,n,r,o,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O;return S=this.props,f=S.isVirtual,l=S.isDeactivated,a=S.fullName,O=S.username,E=S.showGoogleApps,s=S.gMail,h=S.isOrgMember,T=S.showActivity,t=S.allowTypeChange,x=S.orgMemberType,e=S.allowReactivate,p=S.isMe,o=S.canRemove,C=S.orgIsBC,j=S.ownsOrg,u=S.hidden,k=S.onViewActivity,w=S.onRoleChange,y=S.onRemoveOrDeactivate,r=S.avatarHash,n=S.avatarDomain,c=S.initials,m=S.isOrganizationAdmin,b=S.onReactivateClick,_=S.onUnhideMember,g=S.onHideMember,v=S.onInviteMember,d=S.isFilterMatch,i.div({class:i.classify({"member-list-item-detail":!0,hide:!d})},function(){return i.div({class:i.classify({member:!0,"member-no-menu":!0,"member-virtual":f,"member-deactivated":l})},function(){return r?i.img(".member-avatar",{height:"30",width:"30",src:[n,r,"30.png"].join("/"),srcSet:[n,r,"30.png 1x"].join("/")+", "+[n,r,"50.png 2x"].join("/"),alt:a+" ("+O+")",title:a+" ("+O+")"}):i.span(".member-initials",{title:a+" ("+O+")"},function(){return c?i.text(c):void 0}),l||m&&i.span(".member-type.admin",{title:i.l("this-member-is-an-admin-of-this-organization")}),i.span(".member-gold-badge",{title:i.l("this-member-has-trello-gold")})}),i.div(".details",function(){return i.p(".name-line",function(){return i.span(".full-name",function(){return a?i.text(a):void 0})}),i.p(".u-bottom.quiet",function(){return O&&i.span(".quiet.u-inline-block",function(){return i.format("at-username",{username:O})}),E&&s?(O&&i.text("- "),i.icon("google"),i.text(s)):void 0})}),i.div(".options",function(){if(h){if(T&&i.b(k,".option.quiet-button",function(){return i.format("activity")}),t?i.b(w,".option.button-link.role-button",function(){return i.text(x),i.icon("dropdown-menu")}):i.p(".option.status.quiet",function(){return i.text(x)}),e&&i.b(b,".option.quiet-button",function(){return i.format("reactivate")}),p)return i.b(y,{class:i.classify({option:!0,"button-link":!0,"remove-button":!0,disabled:!o}),disabled:!o},function(){return C?i.icon("close","leave-ellipsis"):i.icon("close","leave")});if(j)return i.b(y,{class:i.classify({option:!0,"button-link":!0,"remove-button":!0,disabled:!o}),disabled:!o},function(){return i.icon("close","remove-ellipsis")})}else if(E)return u?i.b(_,".option.quiet-button",function(){return i.format("always-show")}):i.b(g,".option.quiet-button",function(){return i.format("dismiss")}),i.b(v,".option.button-link.primary",function(){return i.icon("add","add-member")})})})}),t}(o.Component)},{}],683:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e("react"),a=e(541)("org_members"),i=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=a.renderable(function(){var e,t,n,r,o;return n=this.props,e=n.memberItems,r=n.showNewLayout,t=n.memberTypeFilter,o=i.filter(e,function(e){return function(e){return e.props.isFilterMatch}}(this)),r?e.length?o.length?a.div(function(){e.forEach(a.addElement)}):a.div(function(){return a.div(".org-members-missing-container",function(){return a.img({className:"org-members-missing-illustration",alt:a.l("no-guest-result"),src:"https://a.trellocdn.com/images/organization/930abc84ebe27331d32a0aaf12e74ffd/missing.svg"}),a.div(".org-members-missing-content",function(){return"guest"===t?a.p(function(){return a.format("no-guest-result")}):a.p(function(){return a.format("no-member-result")})})})}):a.div(function(){}):a.div(function(){e.forEach(a.addElement)})}),t}(o.Component)},{}],684:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e("react"),i=e(541)("org_members"),t.exports=r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={showingAll:!1}}return a(t,e),t.prototype.render=i.renderable(function(){var e,t,n,r,o,a,s,u,c,l,d,p;return l=this.props,t=l.canManageMembers,e=l.canLinkGoogleApps,n=l.canShowAll,a=l.onLinkGoogleApps,c=l.openManageMembers,u=l.openBulkAdd,r=l.filter,o=l.onFilterChange,s=l.onShowAllChange,d=this.state.showingAll,p=function(e){return function(){return d=!e.state.showingAll,e.setState({showingAll:d}),s(d)}}(this),i.div(function(){return i.div(".org-members-page-navigation-list",function(){return i.div(".org-members-options",function(){return i.div(".org-members-page-navigation-list-header",function(){return i.format("search-team")}),i.hr(),i.input(".org-members-page-navigation-input",{style:{marginBottom:50},type:"text",placeholder:i.l("find-members-by-name-ellipsis"),value:r,onChange:function(e){return o(e.target.value)}}),t&&(i.div(".org-members-page-navigation-list-header",function(){return i.format("add-members")}),i.hr(),i.b(c,{class:"primary button-link autowrap"},function(){return i.icon("member","add-by-name-or-email")}),i.b(u,{class:"button-link autowrap"},function(){return i.icon("member","add-a-list-of-emails-or-usernames")})),e&&i.div(function(){return i.b(a,{class:"button-link"},function(){return i.icon("google","link-google-apps-domain")})}),n?i.b(p,".quiet-button",function(){return i.format(d?"hide-dismissed":"show-dismissed-accounts")}):void 0})})})}),t}(o.Component)},{}],685:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E,O,A,M,B,P,L,D,I=function(e,t){function n(){this.constructor=e}for(var r in t)N.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},N={}.hasOwnProperty,V=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),O=e("underscore"),o=e(559),i=e(221),a=e(35),A=e(245),B=e(104),u=e(7),s=e(646),M=e(88),c=e(655),d=e(662),l=e(656),p=e(208),h=e(663),m=e(627),f=e(677),g=e(680),v=e(682),b=e(683),y=e(684),_=e(689),C=e("bluebird"),k=e(569),x=e("react"),j=e("react-dom"),S=e(540),P=e("recup"),T=e(690),L=e(541)("org_members"),D=e(51),E=e(133),t.exports=w=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.getGoogleAppsData(),this.listenTo(this.model,{"change:memberships":this.frameDebounce(this.renderReactSection)}),this.listenTo(this.model,{"change:memberships":this.getCollaborators}),this.listenTo(this.model,{"change:collaborators":this.frameDebounce(this.renderReactSection)}),this.listenTo(a.me(),"change:messagesDismissed",this.frameDebounce(this.renderReactSection))},t.prototype.isFullWidth=function(){return!0},t.prototype.renderMainContent=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$(".js-content").append(this.reactRoot),this.renderReactSection(),this.setActiveView(".js-org-members"),this},t.prototype.renderReactSection=function(){return j.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getReactRoot=function(){return x.createElement(S,{},this.getOrgMembersComponent())},t.prototype.getOrgMembersComponent=function(){var e,t,n;return t=this.getMembers().map(A(this,"memberToModelForMemberItemElement")),e=this.model.collaboratorList.map(A(this,"memberToModelForMemberItemElement")),n={memberModels:t,orgMemberList:this.getMembers(),orgId:this.model.id,sidebar:this.orgToOrgSidebarProps(),collaboratorModels:e,teamIsEmpty:1===this.getMembers().length&&O.some(t,function(e){return function(e){return e.isMe&&e.isOrganizationAdmin}}(this))},x.createElement(g,n)},t.prototype.orgToOrgSidebarProps=function(){var e,t,n,r;return t=a.me(),e=this.isAdDismissed("security-features"),r=M("teamMembersTabLayout").get("enabled"),n={canManageMembers:this.model.editable(),canLinkGoogleApps:this.model.isFeatureEnabled("googleApps")&&(!this.model.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&this.model.editable(),canShowAll:this.model.isFeatureEnabled("googleApps")&&O.any(this.mappingsData,function(e){return function(t){var n;return(null!=(n=e.modelCache.findOne("Member","gMail",t.gMail))?n.get("hidden"):void 0)||t.hidden}}(this)),onLinkGoogleApps:this.startLinkingGoogleApps.bind(this),openManageMembers:this.openManageMembers.bind(this),openBulkAdd:this.openBulkAdd.bind(this),billingUrl:u.getOrganizationBillingUrl(this.model),hasBC:this.model.isPremium(),isAdDismissed:e,dismissAd:t.dismissAd.bind(t,"security-features"),inviteTeamMembers:r&&this.inviteTeamMembers.bind(this)||null}},t.prototype.getGoogleAppsData=function(){return this.model.isLinkedToGoogleApps()&&this.model.editable()?this.model.getGoogleAppsMappings().then(function(e){return function(t){return e.mappingsData=t}}(this)).catch(function(e){return function(t){return e.googleAppsFetchFailed=!0}}(this)).finally(function(e){return function(){return e.renderMainContent()}}(this)).done():void 0},t.prototype.startLinkingGoogleApps=function(e){return D("Organization View","Members Page","Start Linking Google Apps Domain"),k.toggle({elem:e,view:f,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openManageMembers=function(e){var t,n,r;D("Organization View","Members Page","Open Manage Members"),r=M("newMemberChargesPopup").get("enabled"),n=this.model.owned()&&this.model.isBusinessClass(),t=!!this.model.calculateTotalPrice(1),r&&n&&t?k.toggle({elem:e,getViewTitle:function(){return B(["view title","members"])},reactElement:x.createElement(l,{key:"members",model:this.model,modelCache:this.modelCache})}):k.toggle({elem:e,view:d,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.inviteTeamMembers=function(e){D("Organization View","Members Page","Invite Team Members"),k.toggle({elem:e,view:c,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openBulkAdd=function(e){D("Organization View","Members Page","Open Bulk Add"),k.toggle({elem:e,view:s,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.memberToModelForMemberItemElement=function(e){var t,n;return t=this.model.getMemberType(e),n={isVirtual:"virtual"===t,isDeactivated:"deactivated"===t,fullName:e.get("fullName"),username:e.get("username"),showGoogleApps:this.model.isLinkedToGoogleApps()&&this.model.editable()&&null!=this.mappingsData,gMail:e.get("gMail"),isOrgMember:"public"!==t,showActivity:this.model.owned()&&"virtual"!==t,allowTypeChange:this.model.owned()&&"deactivated"!==t&&"unconfirmed"!==t&&"virtual"!==t,orgMemberType:B(["member types",t]),allowReactivate:this.model.owned()&&"deactivated"===t,isMe:a.isMe(e),canRemove:e.getMembershipData(this.model).canRemove,orgIsBC:this.model.isPremium(),ownsOrg:this.model.owned(),hidden:e.get("hidden"),onViewActivity:this.viewMemberActivity.bind(this,e),onRoleChange:this.changeRole.bind(this,e),onRemoveOrDeactivate:this.removeOrDeactivate.bind(this,e),avatarHash:e.get("avatarHash"),avatarDomain:window.avatarDomain,initials:e.get("initials"),isOrganizationAdmin:"admin"===t,onReactivateClick:this.reactivateMember.bind(this,e),onUnhideMember:this.unhideMember.bind(this,e),onHideMember:this.hideMember.bind(this,e),onInviteMember:this.inviteToOrg.bind(this,e)}},t.prototype.getCollaborators=function(){return this.model.fetchCollaborators()},t.prototype.getMembers=function(){var e,t,n,r,o,i,a,s,u,c,l,d,h,m;if(d=O.clone(this.model.memberList.models),null!=this.mappingsData)for(h=this.mappingsData,r=0,a=h.length;a>r;r++)m=h[r],null!=m.idMember?(l=this.modelCache.get("Member",m.idMember),null==l?l=new p({id:m.idMember,fullName:m.fullName,gMail:m.gMail,initials:m.initials,hidden:m.hidden},{modelCache:this.modelCache}):l.set("gMail",m.gMail)):(l=this.modelCache.findOne("Member","gMail",m.gMail),null==l&&(l=new p({fullName:m.fullName,gMail:m.gMail,initials:m.initials,hidden:m.hidden},{modelCache:this.modelCache}),m.idMember=l.cid)),V.call(d,l)<0&&d.push(l);for(t=[],o=0,s=d.length;s>o;o++)c=d[o],"deactivated"===this.model.getMemberType(c)&&t.push(c);for(n=[],i=0,u=d.length;u>i;i++)c=d[i],"virtual"===this.model.getMemberType(c)&&n.push(c);return e=O.difference(d,n,t),e.concat(t).concat(n)},t.prototype.inviteToOrg=function(e){return D("Organization View","Members Page","Add Google Apps Member"),C.try(function(t){return function(){return e.id?t.model.changeMemberRole(e,{type:"normal"}):t.model.addMemberRole({fullName:e.get("fullName"),email:e.get("gMail"),type:"normal"}).then(function(){return o.show("invitation sent","info","alert",3e3)})}}(this)).catch(i,function(e){o.showLiteralText(e.localizedMessage(),"error","alert",3e3),D("Invitations","Error: "+e.message)}).done()},t.prototype.hideMember=function(e){return e.get("gMail")?(e.set("hidden",!0),this.model.toggleMemberHidden(e,{type:"post"}),this.renderReactSection()):void 0},t.prototype.unhideMember=function(e){return e.get("gMail")?(e.set("hidden",!1),this.model.toggleMemberHidden(e,{type:"delete"}),this.renderReactSection()):void 0},t.prototype.reactivateMember=function(e,t){return D("Organization View","Members Page","Reactivate"),this.model.reactivateMember(e).catch(i,function(e){o.showLiteralText(e.localizedMessage(),"error","alert",3e3),D("Invitations","Error: "+e.message)}).done()},t.prototype.removeOrDeactivate=function(e,t){D("Organization View","Members Page","Remove or Deactivate Member Button"),k.toggle({elem:t,view:T,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.viewMemberActivity=function(e,t){D("Organization View","Members Page","View Member Activity"),k.toggle({elem:t,view:h,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.changeRole=function(e,t){D("Organization View","Members Page","Change Role Button"),k.toggle({elem:t,view:m,options:{model:e,parent:this.model,modelCache:this.modelCache}})},t}(_)},{}],686:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e("jquery"),i=e(549),a=e(546),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewTitleKey="board creation restrictions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.events={"click a":"changeRestriction"},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),this.$el.html(a.fill("org_prefs_vis",e)),this},t.prototype.changeRestriction=function(e){var t,n,o;return t=r(e.target),n="boardVisibilityRestrict/"+t.closest("ul").attr("data-vis"),o=t.attr("data-restriction"),this.model.setPref(n,o)},t}(i)},{}],687:[function(e,t,n){var r,o,i,a,s,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),o=e(220),i=e(22),u=e(549),c=e(913),l=e(546),s=e(133),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="org membership restrictions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.renderRestrictions))},t.prototype.events={"click .js-form-submit-input":"addRestriction","submit .js-form":"addRestriction","click .js-restricted-address":"removeRestriction"},t.prototype.render=function(){var e;return this.$el.html(c({hasRestrictions:(null!=(e=this.model.get("prefs").orgInviteRestrict)?e.length:void 0)>0})),this.renderRestrictions(),this},t.prototype.renderRestrictions=function(){var e,t,n,r,o,i;if(e=this.$(".js-list").empty(),(null!=(r=this.model.get("prefs").orgInviteRestrict)?r.length:void 0)>0){for(o=this.model.get("prefs").orgInviteRestrict,t=0,n=o.length;n>t;t++)i=o[t],e.append(l.fill("org_pref_restriction",{restriction:i}));return this.$(".js-restriction-list").show()}return this.$(".js-restriction-list").hide()},t.prototype.addRestriction=function(e){var t;return s.stop(e),t=this.$(".js-input-restricted").val(),/^@/.test(t)?t="*"+t:-1===t.indexOf("@")&&t.indexOf(".")>0&&(t="*@"+t),this.$(".js-loading").removeClass("hide"),o({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"put",data:{value:t},dataType:"json",success:function(e){return function(){return e.$(".js-input-restricted").val("").select().focus(),e.$(".js-loading").addClass("hide"),e.$(".js-errors").hide()}}(this),error:function(e){return function(t){return e.$(".js-loading").addClass("hide"),e.$(".js-errors").text(t.responseText).show()}}(this)})},t.prototype.removeRestriction=function(e){var t;return t=r(e.target).closest("a").attr("data-pattern"),r(e.target).closest("li").remove(),o({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"delete",data:{value:t},dataType:"json",success:function(e){return function(){return e.$(".js-input-restricted").select().focus(),e.$(".js-errors").hide()}}(this)})},t.prototype.enableSelfJoin=function(e){return this.model.changeSlackSelfJoin(!0)},t.prototype.disableSelfJoin=function(e){return this.model.changeSlackSelfJoin(!1)},t}(u)},{}],688:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(133),i=e(549),a=e(916),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewTitleKey="slack team restrictions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:slack-association",this.render)},t.prototype.events={"click a":"setRestriction"},t.prototype.render=function(){var e;return e=this.model._slackAssociation,this.$el.html(a(e)),this},t.prototype.setRestriction=function(e){var t;o.stop(e),e.target.parentElement.classList.contains("active")||(t=e.target.parentElement.classList.contains("js-enable-admin-only"),this.model.changeSlackAdminOnlyLinking(t))},t}(i)},{}],689:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C=function(e,t){function n(){this.constructor=e}for(var r in t)x.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},x={}.hasOwnProperty;o=e(35),i=e(648),s=e(106),r=e(74),c=e(569),l=e(543),d=e(133),p=e(549),g=e(109),b=e(905),w=e(546),_=e(51),m=e(103),h=e(104),f=e(46),k=e("xtend"),y=e(903),v=e("moment"),a=e(41),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),g(l,t),t.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:logoHash change:products change:paidAccount change:prefs change:name",this.render),this.listenTo(this.model,"change:name change:displayName change:website change:desc",this.renderDetails),this.listenTo(this.model,"change:memberships",this.membershipChange),this.listenTo(this.model.memberList,"add remove reset",this.renderDebounced),this.listenTo(this.model,"change:name",function(e){return function(){var t;return t=location.pathname.replace(/[^\/]+/,e.model.get("name")),history.replaceState(null,null,t)}}(this)),this.memberTypeMe=this.model.getMemberType(o.me())},t.prototype.events={"click .js-change-org-logo":"changeLogoInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},t.prototype.isFullWidth=function(){return!1},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),this.model.editable()&&(n=null!=(t=e.paidAccount)?t.standing:void 0,e.hasAccount=r.hasAccount(n),e.accountActive=r.isActive(e.paidAccount),e.accountProblem=r.isProblem(n),e.accountInactive=r.isInactive(n)),e.isInOrg=this.model.isMember(o.me()),e.hasBusinessClass=this.model.isPremium(),e.isEnterprise=this.model.isEnterprise(),e.paysWithPurchaseOrder=this.model.paysWithPurchaseOrder(),e.isOrgAdmin=this.model.owned(),e.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),e.pLevelAltText=h(["org perms",this.model.getPermLevel(),"text"]),e.pLevelDisplayText=h(["org perms",this.model.getPermLevel(),"name"]),e.websiteHref=d.sanitizeWebAddress(e.website),e.descriptionHtml=s.markdownAsHtml(e.desc,{textData:e.descData}),e.isFullWidth=this.isFullWidth(),e.editable=this.model.editable(),e.hasUnlimitedPowerUps=this.model.isFeatureEnabled("plugins"),e.upsellEnabled=!a.get("dontUpsell"),this.$el.empty(),this.$el.html(y(e)),this.renderDetails(),this.renderMainContent(),this},t.prototype.renderDetails=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.enterpriseUI=this.model.isFeatureEnabled("enterpriseUI"),e.isBusinessClass=this.model.isPremium(),e.isOrgAdmin=this.model.owned(),e.pLevelAltText=h(["org perms",this.model.getPermLevel(),"text"]),e.pLevelDisplayText=h(["org perms",this.model.getPermLevel(),"name"]),e.websiteHref=d.sanitizeWebAddress(e.website),e.descriptionHtml=s.markdownAsHtml(e.desc,{textData:e.descData}),e.canEdit=this.model.owned(),this.$(".js-current-details").html(b(e)),this.model.editable()&&this.$(".js-profile-form").empty().append(w.fill("org_detail_profile_edit",e,{editable:this.model.editable()})),this},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,k(t.prototype.events,e||this.events))},t.prototype.membershipChange=function(){var e;return e=this.model.getMemberType(o.me()),e!==this.memberTypeMe?(this.memberTypeMe=e,this.render()):void 0},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeLogoInProfile=function(e){d.stop(e),_("Organization View","Open Change Logo Menu from Profile Image"),c.toggle({elem:this.$(".js-change-org-logo"),view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){d.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),_("Organization View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){d.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset(),_("Organization View","Cancel Edit Profile")},t.prototype.submitProfile=function(e){var t,n,r,o,i,a,s,u;if(d.stop(e),!this.disabled){for(t={},s=["displayName","name","website","desc"],r=0,i=s.length;i>r;r++)n=s[r],t[n]=this.$(".js-profile-form [name="+n+"]").val();for(t.name=t.name.toLowerCase().replace(/[^a-z0-9_]/g,""),u=["displayName","website"],o=0,a=u.length;a>o;o++)n=u[o],t[n]=t[n].trim();this.disableSubmit(),this.model.update(t,{waitForServer:!0},function(e){return function(t){var n;e.disabled=!1,e.$(".js-submit-profile").removeAttr("disabled"),t?(n=t.message.trim().toLowerCase(),e.$(".js-profile-form-error").removeClass("hide").text(m(n))):(e.$(".js-profile-form-error").addClass("hide"),e.cancelEditProfile(),_("Organization View","Changed Name and Details"))}}(this))}},t.prototype.isAdDismissed=function(e){var t,n;return n=o.me(),t=n.isAdDismissed(e),t?v().diff(v(t.lastDismissed),"days")<=14:!1},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t}(p)},{}],690:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(220),i=e(35),a=e(7),s=e(569),c=e(133),l=e(549),p=e(546),h=e(51),d=e(104),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey=function(){return this.org.isPremium()?"remove or deactivate member":"remove member"},t.prototype.initialize=function(){return this.org=this.options.org},t.prototype.events={"click .js-deactivate":"deactivateMember","click .js-soft-remove":"removeMember"},t.prototype.render=function(){var e,t;return t=this.org.getMemberType(this.model),e=this.model.toJSON(),e.orgMemberType=d(["member types",t]),e.ownsOrg=this.org.owned(),e.orgIsBC=this.org.isPremium(),e.isDeactivated="deactivated"===t,e.isOrgMember="public"!==t,e.isVirtual="virtual"===t,e.canDeactivate=this.org.isPremOrgAdmin(i.me())&&!e.isVirtual&&!e.isDeactivated,e.isMe=i.isMe(this.model),this.$el.html(p.fill("org_remove_or_deactivate_member",e)),this},t.prototype._checkIfLostVisibility=function(){return i.isMe(this.model)?a.navigate("/",{trigger:!0}):void 0},t.prototype.deactivateMember=function(e){c.stop(e),this.org.deactivateMember(this.model),this._checkIfLostVisibility(),s.hide()},t.prototype.removeMember=function(e){var t;c.stop(e),r(this.el).find("#hardRemove").is(":checked")||"deactivated"===this.org.getMemberType(this.model)?(t="Hard Remove",this.org.memberList.remove(this.model,{mass:!0})):(t="Soft Remove",this.org.memberList.remove(this.model)),h("Organization","Remove Member From Organization",t),s.hide(),this._checkIfLostVisibility()},t}(l)},{}],691:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(569),i=e(133),a=e(549),c=e(51),s=e(544)("org_filtering"),u=s.renderable(function(e){var t,n;return n=e.name,t=e.isDeleteable,s.form(".js-add-tag-form",function(){return s.label(function(){return s.format("name"),s.input(".js-add-tag-name.js-autofocus",{type:"text",value:n})}),s.input(".primary",{type:"submit",value:s.l("save")}),t?s.button(".negate.u-float-right.js-delete-tag",{type:"button"},function(){return s.format("delete")}):void 0})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.events={"submit .js-add-tag-form":function(e){var t;e.preventDefault(),this.options.boardView?c("Board Menu","Collections Menu","Save New Collection"):c("Team Page","Collections Menu","Save New Collection"),t=this.$(".js-add-tag-name").val().trim(),this.onSubmit(t)},"click .js-delete-tag":function(e){i.stop(e),this.onDelete()}},t.prototype.getName=function(){return""},t.prototype.render=function(){return this.$el.html(u({name:this.getName(),isDeleteable:null!=this.onDelete})),this},t}(a)},{}],692:[function(e,t,n){var r,o;r=e("react"),o=e(541)("org_account"),t.exports=r.createClass({displayName:"SettingSectionComponent",render:o.renderable(function(){var e,t,n,r,i,a,s;return s=this.props,i=s.header,r=s.contents,a=s.onChange,e=s.canChange,n=s.changeContent,t=s.changeClasses,o.div(".window-module.u-clearfix",function(){return o.div(".window-module-title",function(){return o.h3(".u-inline",function(){return o.addElement(i)})}),o.div(".setting-item",function(){return o.div(".setting-item-detail",function(){return o.addElement(r)}),o.div(".setting-item-action",function(){var r;return r={"button-link":!0,"u-text-align-center":!0,disabled:!e},n?o.div({class:t,onClick:a},function(){return o.addElement(n)}):o.b(a,{disabled:!e,class:o.classify(r)},function(){return o.format("change")})})})})})})},{}],693:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;u=e(104),r=e("react"),i=e(692),s=e(695),c=e(541)("org_account"),o="https://slack.com/oauth/authorize",a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.displayName="SlackComponent",t.prototype.render=c.renderable(function(){var e,t,n,r,a,u;return a=this.props,r=a.isAdmin,n=a.hasBC,u=a.slackAssociation,t=a.deleteSlackAssociation,e=a.changeSlackSelfJoin,c.div(function(a){return function(){var a,l,d,p,h,m,f,g;return u?(l=u.associated,p=u.canChange,a=u.adminOnly,g=u.teams,m=u.qs,h=c.render(function(){return c.div(function(){return c.p(function(){return c.format("link-your-trello-and-slack-teams-together"),c.text(" "),c.a(".quiet",{href:"http://help.trello.com/article/1049-slack-app",target:"slack_help"},function(){return c.format("learn-more")})}),p?void 0:c.p(".helper.u-float-left",function(){return c.format("you-need-to-be-an-admin-to-link-this-trello-team-to-a-slack-team")})})}),f=p?o+m:"#",d={"slack-button":"slack-button",disabled:!p},c.createElement(i,{header:c.render(function(){return c.format("slack-team-linking")}),contents:h,
changeContent:c.render(function(){return c.a({href:f,disabled:!p},function(){return c.img({class:c.classify(d),alt:c.l("add-to-slack"),src:"https://platform.slack-edge.com/img/add_to_slack.png",srcSet:"https://platform.slack-edge.com/img/add_to_slack.png 1x, https://platform.slack-edge.com/img/add_to_slack@2x.png 2x"})})}),changeClasses:c.classify({"u.text-align-center":"u.text-align-center"})}),void(l&&g.forEach(function(o){return c.createElement(s,{icon:c.render(function(){return c.img({class:"slack-team-icon",alt:"Slack Team Icon",src:o.icon})}),header:c.render(function(){return c.div(function(){return c.text(o.name)})}),contents:c.render(function(){return c.div(function(){return c.div(function(){return c.p(function(){return c.format("this-team-is-linked-to-domain",{domain:o.domain})}),c.p({class:c.classify({quiet:!n||!r})},function(){return o.selfJoin?c.format("slack-members-self-join"):c.format("slack-members-invite-only"),c.icon("business-class",{class:"icon-business-class-color"})})}),p?void 0:c.p(".helper.u-float-left",function(){return c.format("you-need-to-be-an-admin-to-change-this-setting")})})}),canChange:p,isAdmin:r,hasBC:n,team:o,changeSlackSelfJoin:e,deleteSlackAssociation:t})}))):void c.createElement(i,{header:c.render(function(){return c.format("slack-team-linking")}),contents:c.render(function(){return c.format("loading")}),changeContent:c.render(function(){return c.a({href:o,disabled:!0,class:".button-link.u-text-align-center.disabled"},function(){return c.text("")})}),changeClasses:c.classify({"u.text-align-center":"u.text-align-center"})})}}(this))}),t}(r.Component),t.exports=a},{}],694:[function(e,t,n){var r,o;r=e("react"),o=e(541)("org_account"),t.exports=r.createClass({displayName:"SlackRestrictionsComponent",render:o.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.slackAssociation,o.div(".setting-item-detail",function(){return o.div(function(){return o.p(function(){return(null!=r?r.adminOnly:void 0)?o.format("slack-admin-only-linking"):o.format("slack-normal-member-linking")})}),e&&!t?o.p(".helper.u-float-left",function(){return o.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})})})},{}],695:[function(e,t,n){var r,o,i,a,s,u;a=e(245),r=e(569),o=e(538),i=e("react"),s=e(541)("org_account"),u=e(51),t.exports=i.createClass({displayName:"SlackTeamComponent",changeAssociatedSlack:function(e){var t,n,a,c,l,d,p,h;return p=this.props.team,n=p.domain,c=p.id,d=p.name,h=p.selfJoin,a=this.props.hasBC,l=this.props.isAdmin,t=a&&l,r.toggle({elem:e,getViewTitle:function(){return d},reactElement:i.createElement(o,{key:"slack team linking",items:[{onClick:function(e){return function(){return u("Slack Association","Unlink"),r.hide(),e.props.deleteSlackAssociation(c)}}(this),content:s.render(function(){return s.a({href:"#"},function(){return s.format("unlink"),s.span({className:"sub-name"},function(){return s.format("this-trello-team-will-no-longer-be-linked-to-domain",{domain:n})})})})},{content:s.render(function(){return s.hr()})},{content:s.render(function(){return s.p(function(){return s.format("who-can-join-team")})})},{onClick:function(e){return function(){return t?(u("Slack Association","SelfJoin"),r.hide(),e.props.changeSlackSelfJoin(!0,c)):void 0}}(this),content:s.render(function(){return s.a({class:s.classify({disabled:!t}),href:"#"},function(){return s.format("slack-self-join"),h&&s.icon("check"),s.span({className:"sub-name"},function(){return s.format("slack-team-members-can-join-team")})})})},{onClick:function(e){return function(){return t?(u("Slack Association","InviteOnly"),r.hide(),e.props.changeSlackSelfJoin(!1,c)):void 0}}(this),content:s.render(function(){return s.a({class:s.classify({disabled:!t}),href:"#"},function(){return s.format("slack-invite-only"),h||s.icon("check"),s.span({className:"sub-name"},function(){return s.format("slack-team-members-require-invite")})})})},{content:s.render(function(){return s.div(function(){return l?a?void 0:(s.hr(),s.icon("business-class",{class:"icon-business-class-color u-float-left"}),s.p(".slack-bc-upsell",function(){return s.format("slack-upgrade-to-business-class")})):(s.hr(),s.p(".helper",function(){return s.format("you-need-to-be-an-admin-to-change-this-setting")}))})})}]})})},render:s.renderable(function(){var e,t,n,r,o,i;return i=this.props,r=i.icon,n=i.header,t=i.contents,e=i.canChange,o=a(this,"changeAssociatedSlack"),s.div(".window-module.u-clearfix.slack-team",function(){return s.div(".u-float-left",function(){return s.addElement(r)}),s.div(function(){return s.div(".slack-team-header",function(){return s.h3(".u-inline",function(){return s.addElement(n)})}),s.div(".slack-team-body",function(){return s.div(".slack-team-detail",function(){return s.addElement(t)}),s.div(".slack-team-action",function(){var t;return t={"button-link":!0,"u-text-align-center":!0,disabled:!e},s.b(o,{disabled:!e,class:s.classify(t)},function(){return s.format("change")})})})})})})})},{}],696:[function(e,t,n){var r,o,i;r=e("react"),i=e(541)("org_account"),o=e(104),t.exports=r.createClass({displayName:"VisibilityContentsComponent",render:i.renderable(function(){var e,t,n;return t=this.props,e=t.canChange,n=t.visibility,i.div(function(){return i.div(function(){var e;switch(e=o(["org perms",n,"text"]),n){case"public":return i.p(function(){return i.icon("public"),i.format("public-helpertext",{helperText:e})});case"private":return i.p(function(){return i.icon("private"),i.format("private-helpertext",{helperText:e})});default:throw new Error("Unrecognized visibility setting: "+n)}}),e?void 0:i.p(".helper.u-float-left",function(){return i.format("you-need-to-be-an-admin-to-change-this-setting")})})})})},{}],697:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;o=e(536),i=e(718),a=e("bluebird"),s=e("underscore"),d=e(544)(),h=e("xtend"),p=d.renderable(function(e){var t,n,r;return t=e.icon,r=e.text,n=e.iconColor,null!=t&&d.span(".badge-icon.icon-sm.plugin-icon",{style:d.stylify({"background-image":d.urlify(t+"?color="+n)})}),r?d.span(".badge-text",function(){return d.text(r)}):void 0}),c={blue:"plugin-color-blue",green:"plugin-color-green",orange:"plugin-color-orange",red:"plugin-color-red",yellow:"plugin-color-yellow",purple:"plugin-color-purple",pink:"plugin-color-pink",sky:"plugin-color-sky",lime:"plugin-color-lime","light-gray":"plugin-color-light-gray"},u=s.values(c).join(" "),l=function(e){return c[e]},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.tagName="div",t.prototype.className="badge",t.prototype.initialize=function(e){this.pluginBadge=e.pluginBadge},t.prototype.renderBadge=function(e){return this.$el.html(p(e)),this.$el},t.prototype.render=function(){var e,t,n,r;return t=this.pluginBadge,n=l(t.color),r=null!=n?"fff":"999",e=this.renderBadge(h(t,{iconColor:r})),e.removeClass(u),null!=n&&e.addClass(n),this},t.prototype.updateBadge=function(e){return s.isEqual(this.pluginBadge,e)?void 0:(this.pluginBadge=e,this.render(e))},t}(i)},{}],698:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("hearsay"),h=e(537),o=e(697),a=e(536),s=e(718),u=e(571),c=e("bluebird"),m=e(56),l=e("underscore"),d={},p=null,f={},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.tagName="span",t.prototype.badgeView=o,t.prototype.runnerOptions=function(){return{command:"card-badges",board:this.model.getBoard(),card:this.model,timeout:1e4}},t.prototype._cacheKey=function(){var e,t,n,r;return r=this.runnerOptions(),n=r.command,e=r.board,t=r.card,[n,null!=e?e.id:void 0,null!=t?t.id:void 0].join(":")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t,n;return null!=(e=d[this._cacheKey()])&&this.renderResolvedBadges(e),t=null!=(n=this.model.getBoard())?n.id:void 0,t&&t!==p&&(p=t,f={}),u.enqueue("plugin_badges_render_"+this.cid,function(e){return function(t){var n,o,i,s;return o=t.delayed,s=e.runnerOptions(),i=null,n=r.combine(h(s.board,s.card),e.model.snoop()),e.subscribe(n,function(){return a.all(s).then(function(t){var n,r,o;return i=t,o=[],n=function(){return i===t},r=function(){return n()?(e.renderResolvedBadges(o),d[e._cacheKey()]=o.map(function(e){return l.omit(e,"callback")})):void 0},e.cancelOnRemove(c.map(t,function(t,i){var s;return e.retain(t),null!=t.dynamic?(s=function(){var u;return u=t.dynamic().cancellable().then(function(t){var a;return o[i]=t,r(),t.refresh&&n()?(a=Math.max(10,t.refresh),a+=2*Math.random()-1,e.setTimeout(s,1e3*a)):void 0}).catch(a.Error.NotHandled,function(){return null}),e.cancelOnRemove(u),u})():o[i]=t})).cancellable().then(function(){return r()}).catch(c.CancellationError,function(){})}).done()})}}(this)),this},t.prototype.trackBadges=function(e){return f[e]?void 0:(f[e]=!0,m("board view","views","Power-Up","","","card-badges",e))},t.prototype.renderResolvedBadges=function(e){var t;return t=e.map(function(e){return function(t,n){var r;return(null!=t?t.idPlugin:void 0)&&e.trackBadges(t.idPlugin),r=e.subview(e.badgeView,e.model,{pluginBadge:t},n),r.updateBadge(t),r}}(this)),this.ensureSubviews(l.compact(t))},t}(s)},{}],699:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e("jquery"),a=e(919),i=e(706),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.className="plugin-board-bar",t.prototype.events=function(){return{"click a[data-index].plugin-chrome-header-action":function(e){var t,n;return n=parseInt(r(e.currentTarget).attr("data-index"),10),t=this.content.actions[n],null!=t&&"function"==typeof t.callback?t.callback({el:e.currentTarget}):void 0},"click .js-close-plugin-chrome":function(e){return this.close()}}},t}(i)},{}],700:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;a=e(151),o=e(718),i=e(133),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName=function(){return null!=this.options.pluginButton.url?"a":"span"},t.prototype.attributes=function(){var e,t,n;return e=this.options.pluginButton,n=e.url,t=e.target,n&&a(n)?{href:n,target:null!=t?t:n}:void 0},t.prototype.initialize=function(e){return this.pluginButton=e.pluginButton,this.retain(this.pluginButton)},t.prototype.events={click:function(e){return i.stopPropagation(e),"function"==typeof this.trackClick&&this.trackClick(this.pluginButton),null!=this.pluginButton.callback?this.pluginButton.callback({el:e.currentTarget}).done():void 0}},t.prototype.template=function(){throw Error("no template specified")},t.prototype.renderOnce=function(){return this.$el.html(this.template(this.pluginButton)),this},t}(o)},{}],701:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;a=e("underscore"),o=e(536),s=e(537),i=e(718),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.buttonsSelector=".js-button-list",t.prototype.buttonView=null,t.prototype.renderContainer=function(){return this.$el},t.prototype.runnerOptions=function(){throw Error("runnerOptions not specified")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=this.runnerOptions(),e=this.renderContainer(),this.subscribe(s(t.board,t.card),function(n){return function(){return o.all(t).then(function(t){var r;return n.$el.toggleClass("hide",0===t.length),n.removeSubviews(),r=a.sortBy(t,"text").map(function(e,t){return n.subview(n.buttonView,n.model,{pluginButton:e},t)}),n.appendSubviews(r,e)}).done()}}(this)),this},t}(i)},{}],702:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(700),i=e(544)(),s=e(51),u=e(56),a=i.renderable(function(e){var t,n;t=e.icon,n=e.text,t&&(i.span(".icon-sm.plugin-icon",{style:i.stylify({"background-image":i.urlify(t+"?color=999")})}),i.raw(" ")),i.text(n)}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.template=a,t.prototype.className="button-link",t.prototype.trackClick=function(e){return s("Card Detail","Sidebar Plugin Button",e.text),u("card detail","opens","Power-Up","","","card-button",e.idPlugin)},t}(r)},{}],703:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(701),o=e(702),a=e(544)("card_detail"),s=a.renderable(function(){return a.h3(function(){return a.format("plugins")}),a.div(".u-clearfix.js-button-list")}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tagName="div",t.prototype.className="window-module u-clearfix hide",t.prototype.buttonsSelector=".js-button-list",t.prototype.buttonView=o,t.prototype.renderContainer=function(){return this.$el.html(s()),this.$(".js-button-list")},t.prototype.runnerOptions=function(){return{command:"card-buttons",board:this.model.getBoard(),card:this.model}},t}(r)},{}],704:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;a=e(151),r=e(697),s=e(265),c=e(56),i=e(133),u=s.renderable(function(e){var t,n,r,o,i;return n=null!=e?e:{},t=n.callback,i=n.url,o=n.title,r=n.text,s.h3(".card-detail-item-header",function(){return s.text(o)}),i&&a(i)?s.a(".card-detail-badge.plugin-card-detail-badge.is-clickable.js-badge",{href:i,target:i,title:r},function(){return s.text(r)}):t?s.a(".card-detail-badge.plugin-card-detail-badge.is-clickable.js-badge",{href:"#",title:r},function(){return s.text(r)}):s.span(".card-detail-badge.plugin-card-detail-badge.js-badge",{title:r},function(){return s.text(r)})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.tagName="div",t.prototype.className="card-detail-item",t.prototype.renderBadge=function(e){return this.$el.html(u(e)),this.$(".js-badge")},t.prototype.events={"click .js-badge":function(e){return i.stopPropagation(e),c("card detail","opens","Power-Up","","","card-detail-badge",this.pluginBadge.idPlugin),null!=this.pluginBadge.callback?(e.preventDefault(),this.pluginBadge.callback({el:e.currentTarget}).done()):void 0}},t}(r)},{}],705:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(698),o=e(704),a=e(56),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="div",t.prototype.badgeView=o,t.prototype.runnerOptions=function(){return{command:"card-detail-badges",board:this.model.getBoard(),card:this.model}},t.prototype.trackBadges=function(e){return null==this.trackedDetailsBadges&&(this.trackedDetailsBadges={}),this.trackedDetailsBadges[e]?void 0:(this.trackedDetailsBadges[e]=!0,a("card details","views","Power-Up","","","card-detail-badges",e))},t}(r)},{}],706:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e("jquery"),a=e(919),i=e(718),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.renderOnce=function(){return this.$el.html(a(this.content)),this.initIFrames(this.model),this},t.prototype.close=function(){var e;return"function"==typeof(e=this.content).callback&&e.callback(),this.isRemoved=!0,this.remove()},t}(i)},{}],707:[function(e,t,n){var r,o,i,a,s,u,c,l;r=e(106),o=e(532),i=e("bluebird"),a=e("react"),u=e(541)(),l=e("xtend"),s=e("underscore"),c=u.renderable(function(e){var t;return t=(null!=e?e:{}).detailsHtml,u.div(".markeddown",function(){return u.raw(t)})}),t.exports=a.createClass({displayName:"PluginGearComponent",keepInDOM:!0,propTypes:{io:a.PropTypes.instanceOf(o),model:a.PropTypes.object},getInitialState:function(){return{details:""}},componentDidMount:function(){i.props({details:this.props.io.getDetails()}).then(function(e){return function(t){return e.setState(t)}}(this))},render:function(){return c({detailsHtml:r.markdownAsHtml(this.state.details)})}})},{}],708:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=function(e,t){function n(){this.constructor=e}for(var r in t)j.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},j={}.hasOwnProperty;r=e("jquery"),v=e("underscore"),o=e(35),i=e(7),y=e(102),a=e(40),u=e(569),m=e("bluebird"),f=e(133),g=e(549),b=e(104),_=e(544)("board_power_ups"),k=e(51),C=e(56),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.initialize=function(){var e;return e=o.me(),this.listenTo(e.organizationList,"add remove reset change",this.frameDebounce(this.render)),this.createNewTeam=0===e.organizationList.length},t.prototype.events=function(){return{"click .js-team":"clickTeam","click .js-create-team":"clickCreateTeam","click .js-create":"clickCreateNewTeam","click .js-cancel":"clickCancelNewTeam"}},t.prototype.render=function(){return this.$el.html(_.render(function(e){return function(){var t,n;return e.createNewTeam?(t=e.model.memberList.length,_.div(".create-team",function(){return _.p(function(){return _.format("first-create-your-business-class-team")}),_.p(function(){return _.label(function(){var e;return _.format("team-name"),e=1===t?{value:_.l("names-projects",{name:o.me().get("fullName")},{raw:!0})}:2===t?{placeholder:_.l("eg-names-projects",{name:o.me().get("fullName")},{raw:!0})}:{},e.maxLength=100,_.input(".full.js-autofocus.js-name",e)}),t>1?_.label(".create-team-add-members",function(e){return function(){return _.input(".js-add-members",{type:"checkbox",checked:!0}),_.format("add-the-members-of-this-board-to-the-team")}}(this)):void 0}),_.div(function(){return _.button(".primary.js-create",function(){return _.format("create")}),_.a(".create-team-cancel.js-cancel",{href:"#"},function(){return _.format("cancel")})}),_.hr()}),v.defer(function(){return e.$(".js-name").select().focus()})):(n=o.me().organizationList.sortBy(function(e){return e.get("displayName").toLowerCase()}),_.div(".assign-to-team",function(){return _.p(function(){return _.format("this-board-is-not-in-a-team-yet"),_.text(" "),_.format("please-select-a-team-or-create-a-new-team-to-upgrade")})}),n.length>0&&_.ul(".assign-to-team-list",function(){var t,r,o,i,a;for(a=[],r=0,o=n.length;o>r;r++)i=n[r],t=i.canAddBoard(e.model)?{class:"js-team","data-idOrganization":i.id}:{class:"disabled",title:_.l("team-restrictions-prevent-you-from-adding-this-board-to-this-team")},a.push(_.li(".assign-to-team-list-item",t,function(){return _.div(".assign-to-team-list-item-content",function(){return _.div(".assign-to-team-list-item-logo",function(){var e;return e=i.get("logoHash"),e?_.img({src:logoDomain+"/"+e+"/30.png"}):_.span(".icon-lg.icon-organization")}),_.div(".assign-to-team-list-item-details",function(){return _.div(".assign-to-team-list-item-name",function(){return _.text(i.get("displayName")),i.isFeatureEnabled("plugins")?(_.text(" "),_.icon("business-class",{class:"icon-business-class-color"})):void 0}),_.div(".assign-to-team-list-item-member-count",function(){var e;return null!=(e=i.get("memberships"))?_.text(y("members",e.length)):void 0})})})}));return a}),_.div(".assign-to-team-create.js-create-team",function(){return _.div(".assign-to-team-create-content",function(){return _.button(".button.primary",function(){return _.format("create-a-new-team")})})}))}}(this))),this},t.prototype.clickTeam=function(e){var t;return t=this.$(e.currentTarget).attr("data-idOrganization"),this.model.trigger("added-to-team"),m.fromNode(function(e){return function(n){return e.model.update("idOrganization",t,{waitForServer:!0},n)}}(this)).then(function(e){return function(){return i.navigate(i.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}}(this)).done()},t.prototype.clickCreateTeam=function(e){return this.createNewTeam=!0,this.render()},t.prototype.clickCancelNewTeam=function(e){return f.stop(e),this.createNewTeam=!1,this.model.trigger("cancel-add-to-team")},t.prototype.clickCreateNewTeam=function(e){var t,n;return n=this.$(".js-name").val(),/\S/.test(n)?(t={displayName:n},this.$(".js-create,.js-cancel").prop("disabled",!0).addClass("disabled"),o.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(e){return function(t){var n;return n=t.id,e.model.trigger("added-to-team"),e.model.update("idOrganization",n,{waitForServer:!0}),a.loadOrganizationMembersMinimal(n).then(function(){var n;return e.$(".js-add-members").prop("checked")?(n=e.model.getOrganization(),k("New Org","Create","Power-Ups Sidebar (with members)",t.id),m.map(e.model.memberList.models,function(e){return n.isMember(e)?void 0:n.changeMemberRole(e,{type:"normal"})},{concurrency:3})):k("New Org","Create","Power-Ups Sidebar (without members)",t.id)}).then(function(){return i.navigate(i.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}).done()}}(this)})):void 0},t}(g),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(_.render(function(e){return function(){return _.div(".count-explanation",function(){return _.p(function(){return _.format("only-team-members-can-enable-power-ups")})})}}(this)))},t}(g),l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(_.render(function(e){return function(){return _.div(".count-explanation",function(){return _.p(function(){return _.format("ask-an-admin-to-add-this-board-to-a-team")})}),_.div(".board-admins",function(){return _.b(function(){return _.format("board-admins")}),_.ul(".admin-list",function(){return e.model.memberList.filter(function(t){return e.model.ownedByMember(t)}).forEach(function(e){return _.li(".admin-list-item",function(){return _.div(".admin-list-item-avatar",function(){var t;return t=e.get("avatarHash"),t?_.img({src:avatarDomain+"/"+t+"/30.png"}):_.span(".icon.icon-lg.icon-member")}),_.div(".admin-list-item-details",function(){return _.div(".admin-list-item-name",function(){return _.text(e.get("fullName"))}),_.div(".admin-list-item-username",function(){return _.text("@"+e.get("username"))})})})})})})}}(this)))},t}(g),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.className="explainer power-ups-explainer power-ups-limit-reached",t.prototype.events={"click .js-upgrade-team":function(e){return k("Power-Ups Menu","Banner Ad","Get More Power-Ups Button")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=i.getBoardPowerUpsUpgradeUrl(this.model),e=o.me(),this.$el.html(_.render(function(e){return function(){return _.p(".power-ups-limit-reached-message",function(){return _.format("it-looks-like-youve-reached-your-power-ups-limit-for-this-board")}),_.p(".power-ups-limit-reached-sub",function(){return _.format("business-class-teams-get-unlimited-power-ups")}),_.p(".power-ups-limit-reached-sub",{style:"margin: 8px 40px"},function(){return _.format("to-unlock-more-upgrade-to-business-class-today")}),_.p(".power-ups-limit-reached-button",function(){return e.model.hasOrganization()?_.a(".button.primary.js-upgrade-team",{href:t},function(){return _.format("lets-do-this")}):_.a(".button.primary.js-add-to-team",{href:"#"},function(){return _.format("lets-do-this")})}),_.a(".power-ups-limit-reached-no-thanks.js-no-thanks",{href:"#"},function(){return _.format("no-thanks")})}}(this)))},t}(g),w=_.renderable(function(){return _.div(function(){return _.div(".spinner.loading")})}),h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.render=function(){return this.$el.html(w()),this},t}(g),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.viewTitleKey="power ups",t.prototype.noPadding=!0,t.prototype.className="plugin-enable-pop-over",t.prototype.initialize=function(e){return this.plugin=e.plugin,this.listenTo(this.model,"cancel-add-to-team",function(e){return function(){return e.addToTeam=!1,e.render()}}(this)),this.listenTo(this.model,"added-to-team",function(e){return function(){return e.redirecting=!0,e.render()}}(this)),this.redirecting=!1,this.addToTeam=!1},t.prototype.events=function(){return{"click .js-add-to-team":function(e){return f.stop(e),this.addToTeam=!0,this.render()},"click .js-no-thanks":function(e){return f.stop(e),u.hide()}}},t.prototype.render=function(){return this.$el.empty(),this.redirecting?this.renderSpinner():this.addToTeam?this.renderAddToTeam():(C("card-detail","opens","BC upgrade dialog","","","enable button",this.plugin.id),this.renderLimitAd()),this},t.prototype.renderSpinner=function(){return this.appendSubview(this.subview(h,this.model)),this},t.prototype.renderAddToTeam=function(){return this.model.hasOrganization()?(this.appendSubview(this.subview(d,this.model)),this):this.model.owned()?(a.loadMyOrganizations(),this.appendSubview(this.subview(c,this.model))):(this.appendSubview(this.subview(l,this.model)),this)},t.prototype.renderLimitAd=function(){return this.appendSubview(this.subview(p,this.model))},t}(g)},{}],709:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(700),i=e(544)(),s=e(51),u=e(56),a=i.renderable(function(e){var t,n,r;t=e.icon,r=e.text,n="light"===this.model.get("prefs").backgroundBrightness?"000":"f6f6f6",t&&i.span(".board-header-btn-icon.icon-sm.plugin-icon",{style:i.stylify({"background-image":i.urlify(t+"?color="+n)})}),i.span(".board-header-btn-text.u-text-underline",function(){return i.text(r)})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="board-header-btn",t.prototype.template=a,t.prototype.trackClick=function(e){return s("Board Header","Board Plugin Button",e.text),u("board view","opens","Power-Up","","","board-button",e.idPlugin)},t}(r)},{}],710:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(701),o=e(709),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.tagName="span",t.prototype.className="board-header-plugin-btns",t.prototype.buttonView=o,t.prototype.runnerOptions=function(){return{command:"board-buttons",timeout:1e4,board:this.model}},t}(r)},{}],711:[function(e,t,n){var r,o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(919),r=e(706),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.className="plugin-modal",t}(r)},{}],712:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e("bluebird"),o=e(718),a=e(544)(),s=a.renderable(function(e){var t,n,r,o;switch(t=(null!=e?e:{}).content,t.type){case"iframe":o=t.url,r=t.height,n=t.context,a.iframe(".plugin-iframe",{src:o})}}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.className="plugin-overlay",t.prototype.renderOnce=function(){return this.$el.html(s({content:this.content})),this.initIFrames(this.model),this},t}(o)},{}],713:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(718),a=e(569),s=e(544)(),u=s.renderable(function(e){var t,n;null==e&&(e={}),n=e.url,t=e.height,s.iframe(".plugin-iframe",{src:n,style:t?"height:"+t+"px;":void 0})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(e){return this.title=e.title,this.content=e.content,this.callback=e.callback,this.retain(this.callback)},t.prototype.getViewTitle=function(){return this.title},t.prototype.keepInDOM=!0,t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(u(this.content)),this.initIFrames(this.model),this},t.prototype.handleIFrameMessage=function(e,t){switch(t){case"done":if(null!=this.callback)return this.callback({el:e});a.hide()}},t}(i)},{}],714:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w=function(e,t){function n(){this.constructor=e}for(var r in t)_.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},_={}.hasOwnProperty;r=e("jquery"),p=e("underscore"),m=e(151),h=e(126),o=e("hearsay"),i=e(100),a=e(22),u=e(718),c=e(569),l=e("bluebird"),b=e(544)("plugin_popover"),d=e(133),y=e("xtend"),f=b.renderable(function(e){var t,n;null==e&&(e={}),n=e.showSearch,t=e.search,t&&n&&b.input(".js-search.js-autofocus",{type:"text",placeholder:t.placeholder}),b.div(".js-results")}),g=b.renderable(function(e){var t,n,r,o;r=e.search,n=e.noSearchResults,t=e.items,o=e.selectedIndex,n&&b.p(".empty.plugin-pop-over-search-empty",function(){r.empty?b.text(r.empty):b.format("no results")}),b.ul(".pop-over-list.js-list.navigable",function(){var e,n,r,i,a,s,u,c;for(n=0,i=t.length;i>n;n++)a=t[n],u=a.text,r=a.index,e=a.callback,c=a.url,s=r===o,b.li({class:b.classify({selected:s})},function(){var t;t=null!=e?{"data-index":r}:null!=c&&m(c)?{href:c,target:c}:void 0,b.a(t,function(){b.text(u)})})})}),v=b.renderable(function(e){var t;return t=(null!=e?e:{}).search,b.p(".quiet.plugin-pop-over-search-searching",function(){(null!=t?t.searching:void 0)?b.text(t.searching):b.format("searching")})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.initialize=function(e){return this.title=e.title,this.content=e.content,this.retain(this.content),
this.searchText=this.slot("")},t.prototype.getViewTitle=function(){return this.title},t.prototype.keepInDOM=!0,t.prototype.events=function(){return{"click a[data-index]":function(e){var t,n;return t=parseInt(r(e.currentTarget).attr("data-index"),10),n=p.isFunction(this.content.items)?this.content.searchResults[t]:this.content.items[t],n.callback({el:e.currentTarget}).done()},"click a[href]":function(e){return c.hide()},"input .js-search":function(e){return this.searchText.set(r(e.currentTarget).val())},"mouseenter li":function(e){return d.selectMenuItem(this.$(".js-list"),"li",r(e.currentTarget))},keydown:function(e){var t,n;n=i.getKey(e),t=this.$(".js-list"),n===a.ArrowUp||n===a.ArrowDown?(d.stop(e),d.navMenuList(t,"li",n)):(n===a.Enter||n===a.Tab)&&(d.stop(e),t.find("li.selected a").click())}}},t.prototype.renderOnce=function(){var e,t,n,r,o;return o=p.isFunction(this.content.items),this.$el.html(f({search:this.content.search,showSearch:this.content.search&&(o||this.content.items.length>this.content.search.count)})),e=this.$el.find(".js-results"),r=function(e){return function(t){return l.try(function(){var n,r,i,a,s;return o?e.content.items({options:{search:t}}):(r=e.content.items,r=r.map(function(e,t){return y(e,{index:t})}),e.content.search&&(t&&(s=d.buildFuzzyMatcher(t),r=r.filter(function(e){var t,n;return n=e.text,t=e.alwaysVisible,t||s(n)})),null!=(i=null!=(a=e.content.search)?a.count:void 0)&&(n=0,r=p.filter(r,function(e,t){return e.alwaysVisible?!0:i>n?(n++,!0):!1}))),r)}).then(function(t){return o?(e.content.searchResults=t.map(function(e,t){return y(e,{index:t})}),e.retain(e.content.searchResults),e.content.searchResults):t})}}(this),this.content.search?(t=300,p.isFinite(this.content.search.debounce)&&this.content.search.debounce>t&&(t=this.content.search.debounce),n=h(this.searchText,t),this.subscribe(n,function(t){return function(n){return e.html(v({search:t.content.search})),null!=t._outstandingSearch&&t._outstandingSearch.cancel(),t._outstandingSearch=r(n).cancellable(),t._outstandingSearch.then(function(n){var r,o,i,a;return t._outstandingSearch=null,r=!p.any(n,function(e){var t;return t=e.alwaysVisible,!t}),a=null!=(o=null!=(i=n[0])?i.index:void 0)?o:-1,e.html(g({search:t.content.search,noSearchResults:r,items:n,selectedIndex:a}))})}}(this))):(e.html(v()),r().then(function(t){return e.html(g({items:t,selectedIndex:0}))})),this},t}(u)},{}],715:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e("jquery"),o=e(561),i=e(536),s=e(569),u=e("bluebird"),d=e(265),h=e(51),c=e(133),l=e(549),m=e("xtend"),p=d.renderable(function(e){d.ul(".pop-over-list",function(){var t,n,r,o,i,a;for(t=0,r=e.length;r>t;t++)i=e[t],o=i.name,a=i.url,n=i.id,d.li(function(){d.a(".js-remove",{"data-id-attachment":n},function(){d.text(o)})})})}),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="remove attachments",t.prototype.initialize=function(e){var t;return t=e.section,this.section=t},t.prototype.events={"click .js-remove":"confirmRemove"},t.prototype.renderOnce=function(){var e;return e=this.model.getBoard(),u.map(this.section.claimed,function(t){return i.one({command:"format-url",board:e,options:{url:t.url}}).get("text").catch(i.Error.NotHandled,function(){return t.url}).then(function(e){return m(t,{name:e})})}).then(function(e){return function(t){return e.$el.html(p(t))}}(this)),this},t.prototype.confirmRemove=function(e){var t,n;return c.stop(e),t=r(e.currentTarget).attr("data-id-attachment"),n=this.model.attachmentList.get(t),o.pushView("remove attachment",{model:n,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return n.destroy(),h("Attachment","Delete Attachment",n.getType())}}(this)})},t}(l)},{}],716:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e("jquery"),h=e("underscore"),o=e(561),i=e("hearsay"),l=e(569),a=e(536),s=e(715),c=e(718),d=e("bluebird"),m=e(544)("plugin_section"),g=e(51),p=e(133),f=m.renderable(function(e){var t,n;t=e.canRemove,n=e.content,m.div(".window-module.u-clearfix",function(){var e,r;m.div(".window-module-title.window-module-title-no-divider",function(){m.span(".window-module-title-icon.icon-lg.plugin-section-icon.js-icon"),m.h3(".u-inline-block.plugin-section-title.js-title"),m.div(".window-module-title-options",function(){t&&m.a(".quiet.js-remove",{href:"#"},function(){m.format("remove")})})}),"iframe"===n.type&&(r=n.url,e=n.height,m.div(".u-gutter",function(){m.iframe(".plugin-iframe.plugin-section",{src:r,style:m.stylify({height:e?e+"px;":void 0})})}))})}),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.initialize=function(){return this.section=new i.Slot(null)},t.prototype.renderOnce=function(){var e;if(e=this.section.get(),null==e)throw Error("updateSection not called before render");return this.$el.html(f(Object.assign({},e,{canRemove:this.model.editable()}))),this.subscribe(this.section,function(e){return function(t){return d.resolve(h.result(t,"title")).then(function(t){return e.$(".js-title").text(t)}).catch(a.Error.Timeout,function(){}),d.resolve(h.result(t,"icon")).then(function(t){return e.$(".js-icon").css("background-image",m.urlify(t+"?color=999"))}).catch(a.Error.Timeout,function(){})}}(this)),this.initIFrames(this.model.getBoard(),this.model,this.section),this},t.prototype.updateSection=function(e){return this.retain(e),this.section.set(e)},t.prototype.events={"click .js-remove":"confirmRemove"},t.prototype.confirmRemove=function(e){var t,n;p.stop(e),n=this.section.get(),1===n.claimed.length?(t=this.model.attachmentList.get(n.claimed[0].id),o.toggle("remove attachment",{elem:this.$(e.currentTarget),model:t,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return t.destroy(),g("Attachment","Delete Attachment",t.getType())}}(this)})):l.toggle({elem:r(e.currentTarget),view:new s({model:this.model,section:n})})},t}(c)},{}],717:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e(35),o=e(7),i=e(106),c=e(569),s=e(708),m=e(549),h=e(133),g=e(544)("board_power_ups"),f=e(88),v=e(56),a="https://info.trello.com/power-ups",l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.events={"click .js-enable-power-up":"enablePowerUp"},t.prototype.initialize=function(){return this.powerUpEnablementInProgress=!1},t.prototype.enablePowerUp=function(e){var t;return h.stop(e),t=this.options.board,t.canEnableAdditionalPowerUps()?t.isPluginEnabled(this.model.id)?void c.hide():(this.powerUpEnablementInProgress=!0,this.render(),void t.enablePlugin(this.model.id).then(function(e){return function(){return v("card-detail","enables","Power-Up","","","enable button",e.model.id),e.powerUpEnablementInProgress=!1,c.hide()}}(this))):void c.toggle({elem:this.$(e.target),view:new s({model:t,plugin:this.model}),autoPosition:!0})},t.prototype.render=function(){var e;return e=this.model.details,this.$el.html(g.render(function(t){return function(){return g.p(function(){return g.div(".markeddown",function(){return g.raw(i.markdownAsHtml(e))}),g.a(".quiet",{href:a,target:"_blank",rel:"noopener"},function(){return g.format("learn-more")})}),g.p(function(){return t.powerUpEnablementInProgress?g.button(".button.primary",function(){return g.format("power-up-enablement-in-progress")}):g.button(".button.primary.js-enable-power-up",function(){return g.format("enable-power-up")})}),g.p(".secondary-links.quiet",function(){return g.a(".js-dismiss-power-up-suggestion",{href:"#"},function(){return g.format("not-now")})})}}(this))),this},t}(m),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.render=function(){return this.$el.html(g.render(function(e){return function(){return g.p(function(){return g.format("got-it-we-wont-ask-you-again")}),g.a(".quiet",{href:o.getMemberAccountUrl()},function(){return g.format("power-up-suggestion-settings")})}}(this))),this},t}(m),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.render=function(){return this.$el.html(g.render(function(e){return function(){return g.p(function(){return g.format("looks-like-you-dont-want-these-suggestions-we-wont-ask-you-again")})}}(this))),this},t}(m),u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="power up suggestions",t.prototype.className="plugin-suggestion-pop-over",t.prototype.initialize=function(e){this.board=e.board},t.prototype.events={"click .js-dismiss-power-up-suggestion":"dismissPowerUpSuggestion"},t.prototype.render=function(){return this.renderPowerUpSuggestionDetails(),this},t.prototype.renderPowerUpSuggestionDetails=function(){return this.$el.empty(),this.appendSubview(this.subview(l,this.model,{board:this.board})),this},t.prototype.renderStopSuggestingPowerUps=function(){return v("card-detail","opens","Power-up suggestions disabled screen","","","not now button",this.model.id),this.$el.empty(),this.appendSubview(this.subview(p,this.model)),this},t.prototype.renderPowerUpSuggestionsTurnedOff=function(){return this.$el.empty(),this.appendSubview(this.subview(d,this.model)),this},t.prototype.dismissPowerUpSuggestion=function(e){var t,n,o,i,a;h.stop(e),n=this.model.id,i=r.me().getDismissedPowerUpSuggestions(),null!=i&&(t=++i.length),a=f("powerUpSuggestions"),o=a.get("maxDismissalCount"),t===o?(v("Power-Up enable suggestion info screen","disables","all Power-Up enable suggestions","","","not now button",n),this.renderStopSuggestingPowerUps()):(v("Power-Up enable suggestion info screen","disables","Power-Up suggestion","","","not now button",n),c.hide()),r.me().dismissPowerUpSuggestionFor(n)},t}(m),t.exports=u},{}],718:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty,d=[].slice;r=e("jquery"),s=e("underscore"),o=e("hearsay"),u=e(537),a=e(549),t.exports=i=function(e){function t(){this._retained=[],this._pendingPromises=[],this._eventListeners=[],t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype._retainCallback=function(e){return null!=e&&null!=this._retained&&(e.retain().done(),this._retained.push(e)),e},t.prototype.retain=function(e){s.isFunction(e)?this._retainCallback(e):s.isArray(e)?e.forEach(function(e){return function(t){return e.retain(t)}}(this)):s.isObject(e)&&this.retain(s.values(e))},t.prototype.cancelOnRemove=function(e){return null!=this._pendingPromises?(this._pendingPromises.push(e),e.then(function(t){return function(){return t._pendingPromises=s.without(t._pendingPromises,e)}}(this))):e.cancel(),e},t.prototype.remove=function(){var e,n,r,o,i,a,s,u,c,l,d,p,h,m,f;for(t.__super__.remove.apply(this,arguments),c=this._pendingPromises,n=0,i=c.length;i>n;n++)u=c[n],u.cancel();for(delete this._pendingPromises,l=this._eventListeners,r=0,a=l.length;a>r;r++)d=l[r],m=d.target,f=d.type,e=d.callback,m.removeEventListener(f,e);for(delete this._eventListeners,p=this._retained,o=0,s=p.length;s>o;o++)h=p[o],h.release().done();delete this._retained},t.prototype.addEventListener=function(e,t,n){return e.addEventListener(t,n),this._eventListeners.push({target:e,type:t,callback:n})},t.prototype.handleIFrameMessage=null,t.prototype.initIFrames=function(){var e,t,n,i,a;t=arguments[0],n=arguments[1],i=3<=arguments.length?d.call(arguments,2):[],e=this.$el.find("iframe.plugin-iframe"),a=o.combine.apply(o,i.concat(u(t,n))),s.each(e,function(e){return function(t){var n,o;o=a.use(),n=r(t),n.addClass("iframe-loading").one("load",function(r){n.removeClass("iframe-loading"),e.subscribe(a,function(){return t.contentWindow.postMessage("render","*")}),o(),null!=e.handleIFrameMessage&&e.addEventListener(window,"message",function(n){n.source===t.contentWindow&&e.handleIFrameMessage(t,n.data)})})}}(this))},t}(a)},{}],719:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(35),a=e(133),s=e(549),u=e(955),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="calendar settings",t.prototype.initialize=function(){return this.generating=!1,this.listenTo(this.model,{"change:prefs":this.render,"change:myPrefs.calendarKey":this.generationComplete})},t.prototype.events={"click .js-calendar-pref-feed:not(.disabled)":"selectFeedEnabled","click .js-calendar-feed-url:not(:disabled)":"focusInput","click .js-regen-calendar-url:not(.disabled)":"generateNewFeedURL"},t.prototype.generationComplete=function(){return this.generating=!1,this.render()},t.prototype.generateNewFeedURL=function(e){return a.stop(e),this.generating=!0,this.model.generateCalendarKey(),this.render()},t.prototype.render=function(){var e,t,n;return n=this.model.toJSON({prefs:!0}).prefs,t=this.model.getPref("calendarKey"),e="https://"+location.host+"/calendar/"+(o.me().id+"/"+this.model.id+"/"+t+".ics"),t||(this.generating=!0,this.model.generateCalendarKey()),this.$el.html(u({isEnabled:n.calendarFeedEnabled,isGenerated:null!=t&&!this.generating,url:e,canChange:this.model.editable()})),this},t.prototype.focusInput=function(e){return this.$(".js-calendar-feed-url").focus().select()},t.prototype.selectFeedEnabled=function(e){var t,n;return a.stop(e),t=r(e.target).closest("a"),n="enabled"===t.attr("name"),this.model.setPref("calendarFeedEnabled",n)},t}(s)},{}],720:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),i=e(133),a=e(549),s=e(956),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="card aging settings",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-select:not(.disabled)":"selectMode"},t.prototype.render=function(){return this.$el.html(s({agingMode:this.model.getPref("cardAging"),canChange:this.model.editable()})),this},t.prototype.selectMode=function(e){var t,n;return i.stop(e),t=r(e.target).closest(".js-select"),n=t.attr("name"),this.model.setPref("cardAging",n)},t}(a)},{}],721:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),o=e(133),i=e(549),s=e(959),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="voting settings",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-voting-select:not(.disabled)":"selectPerm"},t.prototype.render=function(){var e;return this.$el.html(s({canChange:this.model.editable(),canSetObservers:null!=(e=this.model.getOrganization())?e.isFeatureEnabled("observers"):void 0,canSetOrganization:this.model.hasOrganization(),canSetPublic:this.model.isPublic(),votingMode:this.model.getPref("voting")})),this},t.prototype.selectPerm=function(e){var t,n;return o.stop(e),t=r(e.target).closest(".js-voting-select"),n=t.attr("name"),this.model.setPref("voting",n)},t}(i)},{}],722:[function(e,t,n){var r,o,i,a,s,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(517),i=e(447),a=e(549),s=e("underscore"),u=e(546),c=e(51),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="search-result-card",t.prototype.events={"click .list-card":"openCard"},t.prototype.render=function(){var e,t,n,o,a;return e=this.model.getBoard(),a=this.model.getList(),o=this.model.toJSON(),o=s.extend(o,{listName:a.get("name"),boardName:e.get("name"),permLevel:r.getPermLevelIconClassForBoard(e),archivedList:a.get("closed")}),n={hideMenu:!0,applyBoardCardFilter:!1},this.$el.html(u.fill("search_results_card",o)),t=this.subview(i,this.model,n),this.appendSubview(t,this.$(".js-list-card-container")),this},t.prototype.openCard=function(e){this.model.showDetail(),c("Search","Select Card")},t}(a)},{}],723:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=function(e,t){function n(){this.constructor=e}for(var r in t)j.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},j={}.hasOwnProperty;r=e("jquery"),o=e(35),i=e(355),a=e(722),u=e(7),c=e(564),d=e(724),p=e(40),h=e("bluebird"),m=e(726),f=e(728),g=e(283),v=e(133),b=e(549),y=e("underscore"),w=e(48),k=e(546),C=e(51),_=e(963),s=e(41),t.exports=l=function(e){function t(){this.results=null,this.serial=0,this.suggestSerial=0,this.idCardsLoaded=[],this.cardsLimit=u.isOnSearchPage()?12:8,this.cardsDesired=this.cardsLimit,this.noMoreCardMatches=!1,this.searchStates=["no-results","no-input","searching","search-results","err"],this.searchState="no-results",t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.viewTitleKey="search results",t.prototype.className="search-results-view",t.prototype.displayType="mod-search-over",t.prototype.hideHeader=!0,t.prototype.maxWidth="600",t.prototype.initialize=function(){var e,t,n;return n=function(e){return function(t){return e.dynamicDebounce(t,function(e){var t;return t=600,e.length<=1?3*t:e.length<=3?2*t:t})}}(this),t=n(this.update).bind(this),e=n(this.renderSearchedSuggestions).bind(this),this.listenTo(g,{"change:query":function(e,n){return t(n)},"change:suggestions":this.renderSuggestions,"change:suggestionSearchTerm":function(t,n){return e(n)}}),this.listenTo(o.me().savedSearchList,"add remove reset change",this.renderSavedSearches)},t.prototype.events={"click .js-see-all-saved-searches":"seeAllSavedSearchesEvent","click .js-saved-search-name":"doSavedSearch","sortstop .js-saved-searches-list":"sortStop","click .js-save-this-search":"saveThisSearch","input .js-saved-search-name-input":"changeSearchName","submit .js-save-this-search-form":"confirmSave","click .js-save-this-search-cancel":"cancelSave","click .js-show-search-tips":"showTips","click .js-card-results .js-list a":"trackCardClick","click .js-member-results .js-list .js-select-member":"trackMemClick","click .js-org-results .js-list .list-card":"trackOrgClick","click .js-select-suggestion":"selectSuggestion","mouseenter .js-select-suggestion":"mouseenterSuggestion","mouseleave .js-select-suggestion":"mouseleaveSuggestion","click .js-show-more-cards":"showMoreCards","click .js-show-more-boards":"showMoreBoards","click .js-show-more-members":"showMoreMembers","click .js-show-more-orgs":"showMoreOrgs","mouseenter .search-result-card-hover-target":"highlightCard","mouseleave .search-result-card-hover-target":"unHighlightCard","click .js-open-help-query":"trackOpenHelpQuery","click .js-open-help a":"trackOpenHelp","click .js-business-class-link":"trackBusinessClassClick","click .js-gold-link":"trackGoldClick"},t.prototype.update=function(e){var t,n,r,o,i,a;this.err=null,this.results=y.isEmpty(e)?{}:null,++this.serial,a=this.serial,this.renderResults(),y.isEmpty(e)||(i={query:e,partial:!0,modelTypes:"cards,boards,organizations,members",board_fields:"name,url,prefs",cards_limit:this.cardsLimit+1,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover",boards_limit:8,members_limit:8,organizations_limit:6},n=this.$(".js-open-help-query"),t=this.$(".js-open-help"),o=e.replace(/"/g,""),r=/\S/.test(o),t.toggleClass("hide",r),n.toggleClass("hide",!r).attr("href","http://help.trello.com/search?query="+encodeURIComponent(o)+"&source=trello-search").find(".js-query").text(o),p.loadSearchData(i).nodeify(function(e){return function(t,n){var r,o;return e.err=t,a!==e.serial?(o=y.pluck(null!=n&&null!=(r=n.options)?r.terms:void 0,"text"),void w("search","discarding search for "+o+", serial "+a)):(e.results=n,e.renderResults())}}(this)))},t.prototype.getMoreCards=function(e,t){var n;n=t.partial,h.try(function(t){return function(){var r,o;return t.idCardsLoaded.length<=t.cardsDesired&&!t.noMoreCardMatches?(r=Math.floor(t.cardsDesired/(t.cardsLimit+1)),o={query:e,partial:null!=n?n:!1,modelTypes:"cards",board_fields:"name,url,prefs",cards_limit:t.cardsLimit+1,cards_page:r,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover"},p.loadSearchData(o).then(function(e){var n;return t.idCardsLoaded=y.uniq(t.idCardsLoaded.concat(y.pluck(null!=(n=null!=e?e.cards:void 0)?n:[],"id")))}).catch(function(e){return t.err=e})):void 0}}(this)).then(function(e){return function(){return e.noMoreCardMatches=e.idCardsLoaded.length<=e.cardsDesired,e.renderCardResults(),e.$(".js-loading-cards").addClass("hide")}}(this)).done()},t.prototype.render=function(){var e;return e={savedSearchesEnabled:o.me().isFeatureEnabled("savedSearches"),upsellEnabled:!s.get("dontUpsell")},this.$el.html(_(e)),this.update(g.getQuery()),this.renderSuggestions(),this.renderSearchedSuggestions(g.getSuggestionSearchTerm()),this},t.prototype.selectSuggestion=function(e){var t,n,o,i,a,s,u;v.stop(e),t=r(e.target).closest(".js-select-suggestion"),a=t.attr("data-suggestionphrase"),s=f.getKeywordMap()[a],o=g.getQuery(),n=f.inputIndex,i=v.removeWordAtIndex(o,n),u=v.stripExtraSpaces(i+" "+a),(null!=s?s.moreInputNeeded:void 0)||(u+=" "),g.clearSuggestions(),g.setQuery(u),g.clearSuggestionSearchTerm(),g.clearSuggestionSearchModelTypes(),C("Search","Select Suggestion")},t.prototype.mouseleaveSuggestion=function(e){return this.$(".js-select-suggestion").removeClass("selected")},t.prototype.mouseenterSuggestion=function(e){return r(e.target).closest(".js-select-suggestion").addClass("selected")},t.prototype.renderSuggestions=function(){var e,t,n,r,o,i,a,s,u,c;if(c=g.getSuggestions(),n=c.length>0,e=this.$(".js-search-suggestions"),t=e.find(".js-search-suggestions-list").empty(),n){for(r="",o=0,a=c.length;a>o;o++)i=c[o],s=f.getSuggestionObjectContainingVariantOrKey(i),u=s.obj,u.phrase=s.key,r+=k.fill("search_suggetion",u);t.append(r),this.$(".js-select-suggestion").first().addClass("selected"),e.removeClass("hide")}else e.addClass("hide");return this},t.prototype.renderSearchedSuggestions=function(e){var t,n,r,o;t=this.$(".js-search-suggestions").addClass("hide"),n=t.find(".js-search-suggestions-list").empty(),++this.suggestSerial,o=this.suggestSerial,""!==e&&(r={query:e,modelTypes:g.getSuggestionSearchModelTypes(),partial:!0,board_fields:"name,url,prefs",boards_limit:6,members_limit:6},p.loadSearchData(r).nodeify(function(e){return function(r,i){var a,s,u,c,l,d,p,h,m,f,g,v,b,y,w;if(o===e.suggestSerial&&(s=(null!=i&&null!=(g=i.boards)?g.length:void 0)>0,u=(null!=i&&null!=(v=i.members)?v.length:void 0)>0,c=s||u,l="",c&&!r)){if(s)for(b=i.boards,d=0,h=b.length;h>d;d++)w=b[d],a=w,a.phrase='board:"'+w.name+'"',l+=k.fill("search_suggetion_board",a);else if(u)for(y=i.members,p=0,m=y.length;m>p;p++)w=y[p],a=w,a.phrase="@"+w.username,f={member:k.member},l+=k.fill("search_suggetion_member",a,"",f);return n.append(l),e.$(".js-select-suggestion").first().addClass("selected"),t.removeClass("hide")}}}(this)))},t.prototype.renderResults=function(){var e,t,n,o,i,a,s,u,c,l,d,p,h,m,f,v,b;for(this.idCardsLoaded=y.pluck(null!=(s=null!=(u=this.results)?u.cards:void 0)?s:[],"id"),this.noMoreCardMatches=this.idCardsLoaded.length<=this.cardsLimit,n=y.pluck(null!=(c=null!=(l=this.results)?l.boards:void 0)?c:[],"id"),o=y.pluck(null!=(d=null!=(p=this.results)?p.members:void 0)?d:[],"id"),i=y.pluck(null!=(h=null!=(m=this.results)?m.organizations:void 0)?h:[],"id"),this.searchState=null!=this.err?"err":""===g.getQuery()?"no-input":null==this.results?"searching":y.all([this.idCardsLoaded,n,o,i],y.isEmpty)?"no-results":(this.renderCardResults(),this.renderBoardResults(n),this.renderMemberResults(o),this.renderOrganizationResults(i),"search-results"),this.renderSavedSearches(),b={err:"js-err","no-input":"js-no-input",searching:"js-searching","no-results":"js-no-results","search-results":"js-search-results"},f=this.searchStates,t=0,a=f.length;a>t;t++)v=f[t],e=b[v],r(this.el.getElementsByClassName(e)).toggleClass("hide",v!==this.searchState);return this},t.prototype.renderSavedSearches=function(){var e,t,n,r,i,a;return i="no-input"===this.searchState,e=this.$(".js-save-this-search-menu"),r=!e.hasClass("hide"),this.$(".js-saved-search-links").toggleClass("hide",i||r),t=this.$(".js-saved-searches").toggleClass("hide",!i),i?(e.addClass("hide"),this.renderSavedSearchItems(t)):(a=g.getQuery(),n=y.find(o.me().savedSearchList.models,function(e){return e.toJSON().query===a}),null!=n&&this.$(".js-current-search-name").text(n.get("name")),this.$(".js-save-this-search").toggleClass("hide",null!=n),this.$(".js-current-search").toggleClass("hide",null==n)),this},t.prototype.renderSavedSearchItems=function(e){var t,n,i,a,s;return t=e.find(".js-saved-searches-list"),t.sortable({axis:"y",delay:"75",distance:"7",containment:".js-saved-searches-list",tolerance:"pointer",items:".saved-search",start:function(e,t){var n;return c.sorting=!0,n=r(t.helper).outerHeight(),r(t.placeholder).height(n)},stop:function(e){return function(){return e.defer(function(){return c.sorting=!1})}}(this)}),n=o.me(),a=n.savedSearchList.models,this.$(".js-no-saved-searches").toggleClass("hide",a.length>0),s=function(){var e,t,n;for(n=[],e=0,t=a.length;t>e;e++)i=a[e],n.push(this.subview(m,i,{parent:this}));return n}.call(this),t.empty(),this.appendSubviews(s,t),this},t.prototype.renderCardResults=function(){var e,t,n;return e=this.$(".js-card-results"),t=e.find(".js-list"),n=this.idCardsLoaded.slice(0,this.cardsDesired).map(function(e){return function(t){var n;return n=e.modelCache.get("Card",t),e.subview(a,n)}}(this)),this.ensureSubviews(n,t),e.toggleClass("hide",0===this.idCardsLoaded.length),this.$(".js-show-more-cards").toggleClass("hide",this.noMoreCardMatches),this},t.prototype.renderBoardResults=function(e){var t,n,r,o,a;return t=this.$(".js-board-results").addClass("hide"),e.length>0&&(n=t.find(".js-list").empty(),r=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)o=e[t],r.push(this.subview(i,this.modelCache.get("Board",o)));return r}.call(this),this.appendSubviews(r,n),t.removeClass("hide")),a=!1,this.$(".js-show-more-boards").toggleClass("hide",!a),this},t.prototype.renderMemberResults=function(e){var t,n,r,o,i;return t=this.$(".js-member-results").addClass("hide"),e.length>0&&(n=t.find(".js-list").empty(),o=function(){var t,n,o;for(o=[],t=0,n=e.length;n>t;t++)r=e[t],o.push(this.subview(d,this.modelCache.get("Member",r)));return o}.call(this),this.appendSubviews(o,n),t.removeClass("hide")),i=!1,this.$(".js-show-more-members").toggleClass("hide",!i),this},t.prototype.renderOrganizationResults=function(e){var t,n,r,o;return t=this.$(".js-org-results").addClass("hide"),e.length>0&&(o=function(){var t,r,o;for(o=[],t=0,r=e.length;r>t;t++)n=e[t],o.push(k.fill("organization_search_list_item",this.modelCache.get("Organization",n).toJSON()));return o}.call(this),t.removeClass("hide").find(".js-list").empty().append(o)),r=!1,this.$(".js-show-more-orgs").toggleClass("hide",!r),this},t.prototype.seeAllSavedSearchesEvent=function(){return this.clearSearch(),C("Search","Saved Search","See All Saved Searched (Go Back)")},t.prototype.clearSearch=function(){return g.setQuery("")},t.prototype.doSavedSearch=function(e){var t;return t=this.$(e.target).closest(".saved-search").find(".js-saved-search-query").text(),g.setQuery(t),C("Search","Saved Search","Open Saved Search")},t.prototype.sortStop=function(e,t){v.stopPropagation(e),t.item.trigger("movesavedsearch",[t]),C("Search","Saved Search","Reorder Saved Searches")},t.prototype.saveThisSearch=function(){return this.$(".js-saved-search-links").addClass("hide"),this.$(".js-save-this-search-menu").removeClass("hide"),this.$(".js-saved-search-name-input").val("").focus(),this.$(".js-save-this-search-submit").addClass("disabled")},t.prototype.changeSearchName=function(){var e,t;return t=this.$(".js-save-this-search-submit"),e=this.$(".js-saved-search-name-input"),t.toggleClass("disabled",0===e.val().trim().length),C("Search","See All Saved Searches")},t.prototype.confirmSave=function(e){var t,n;return v.preventDefault(e),this.$(".js-save-this-search-submit").hasClass("disabled")?void 0:(t=this.$(".js-saved-search-name-input").val().trim(),n=g.getQuery(),o.me().savedSearchList.saveSearch(t,n),this.cancelSave(),C("Search","Saved Search","Save"))},t.prototype.cancelSave=function(){return this.$(".js-saved-search-links").removeClass("hide"),this.$(".js-save-this-search-menu").addClass("hide"),C("Search","Saved Search","Cancel Save")},t.prototype.closeAllDeleteMenus=function(){var e,t,n,r,o;for(n=this.subviewsOfType(m),r=[],e=0,t=n.length;t>e;e++)o=n[e],r.push(o.cancelDeletion());return r},t.prototype.trackCardClick=function(){return C("Search","Select Item","Card")},t.prototype.trackMemClick=function(){return C("Search","Select Item","Member")},t.prototype.trackOrgClick=function(){return C("Search","Select Item","Team")},t.prototype.trackOpenHelpQuery=function(){return C("Search","Open Help with Query")},t.prototype.trackOpenHelp=function(){return C("Search","Open Help or Guide")},t.prototype.trackBusinessClassClick=function(){return C("Search","Click Business Class Link","Save Search Menu")},t.prototype.trackGoldClick=function(){return C("Search","Click Gold Link","Save Search Menu")},t.prototype.showTips=function(e){v.stop(e),this.$(".js-search-tips-helper").addClass("hide"),this.$(".js-search-tips-list").removeClass("hide"),C("Search","Show Tips")},t.prototype.showMoreCards=function(e){this.$(".js-loading-cards").removeClass("hide"),this.$(".js-show-more-cards").addClass("hide"),this.cardsDesired+=this.cardsLimit,this.getMoreCards(g.getQuery(),{partial:!0}),C("Search","Show More Cards")},t.prototype.showMoreBoards=function(e){},t.prototype.showMoreMembers=function(e){},t.prototype.showMoreOrgs=function(e){},t.prototype.highlightCard=function(e){var t;t=r(e.target).closest(".search-result-card").addClass("search-result-card-highlight-card"),t.closest(".js-list").addClass("search-result-card-highlight-section")},t.prototype.unHighlightCard=function(e){var t;t=r(e.target).closest(".search-result-card").removeClass("search-result-card-highlight-card"),t.closest(".js-list").removeClass("search-result-card-highlight-section")},t}(b)},{}],724:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),i=e(631),a=e(133),s=e(549),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tagName="li",t.prototype.className="search-result-member",t.prototype.events={"mouseenter .js-select-member":"hoverMember","mouseleave .js-select-member":"blurMember"},t.prototype.render=function(){return this.$el.empty(),this.appendSubview(this.subview(i,this.model,{linkName:!0})),this},t.prototype.blurMember=function(e){
var t;t=r(e.target).closest(".item").removeClass("selected")},t.prototype.hoverMember=function(e){var t;t=r(e.target).closest(".item"),a.selectMenuItem(r(e.target).closest(".js-list"),".item",t)},t}(s)},{}],725:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(569),i=e("bluebird"),a=e(631),s=e(133),u=e(549),c=e("underscore"),l=e(104),d=e(136),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.previousRender=null,t.prototype.renderSearchResults=function(e,t){var n,r,o,u,p,h,m;return this.$(".js-org-members").hide(),this.$el.find(".js-error").hide(),r=this.$el.find(".js-search-results"),n=r.find(".js-list").empty(),o=this.$el.find(".js-uninvited-search-results").hide().empty(),""===e?(this.clearSearchResults(),void this.loadingEl.hide()):(h=c.isEmpty(t),u=e.trim().length>=3,p=1===t.length&&s.checkEmail(e),this.$(".js-no-results").toggleClass("hide",!h),r.toggle(!h),!u&&h&&"function"==typeof this.renderOrgMembers&&this.renderOrgMembers(),this.helperEl.hide(),h||null!=t[0].id?(null!=(m=this.previousRender)&&m.cancel(),this.previousRender=i.resolve(t).map(function(e){return function(t){var n,r,o,i,a,s;return o=t.joined,s=t.similarity>0,delete t.joined,delete t.similarity,r={id:t.id},o?("ghost"===t.memberType?r.extraText=l("invited"):r.extraText=l("joined"),r.className="disabled"):null!=(a="function"==typeof(n=e.model).getOrganization?n.getOrganization():void 0)&&null!=(i=e.modelCache.get("Member",t.id))&&(null!=a?a.hasActiveMembership(i):void 0)&&(r.extraText=l("member-of-org",{orgName:a.get("displayName")},{raw:!0})),r.isKnownMember=s||p,d(e.modelCache,"enqueueDelta","Member",t).return(r)}}(this)).cancellable().tap(function(e){return function(){return e.deleteSubviewsOfType(a)}}(this)).each(function(e){return function(t){e.appendMemberToSearchResults(t)}}(this)).tap(function(e){return function(){var t;return e.loadingEl.hide(),t=e.$(".js-search-results .js-list li.js-autoselect:first"),s.selectMenuItem(e.$(".js-search-results .js-list"),"li",t)}}(this)).catch(i.CancellationError,function(){})):(this.renderEmailInviteToSearchResults(t[0]),r.hide(),void this.loadingEl.hide()))},t.prototype.appendMemberToSearchResults=function(e){var t,n,r,o,i;return r=this.modelCache.get("Member",e.id),i="function"==typeof(t=this.model).getOrganization?t.getOrganization():void 0,n=(null!=i?i.isPremOrgAdmin(r):void 0)?c.compact([e.className,"no-option"]).join(" "):e.className,o=this.subview(a,r,c.extend({showUnconfirmed:!0,showInactive:!0},e)),this.appendSubview(o,this.$(".js-search-results .js-list")),o.$("li").addClass(n)},t}(u)},{}],726:[function(e,t,n){var r,o,i,a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(35),i=e(133),a=e(549),s=e(546),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.className="saved-search",t.prototype.events={"click .js-delete-saved-search":"deleteSavedSearch","click .js-delete-saved-search-confirm":"confirmDeletion","click .js-delete-saved-search-cancel":"cancelDeletion",movesavedsearch:"moveSavedSearch"},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.allowDelete=r.me().isFeatureEnabled("savedSearches")||"@me"!==e.query,this.$el.html(s.fill("saved_search",e)),this},t.prototype.deleteSavedSearch=function(e){return this.options.parent.closeAllDeleteMenus(),this.$(".js-saved-search-name").addClass("saved-search-item-faded"),this.$(".js-delete-saved-search").addClass("hide"),this.$(".js-delete-saved-search-menu").removeClass("hide"),this.defer(function(e){return function(){return e.$(".js-delete-saved-search-menu").addClass("saved-search-delete-menu-shown")}}(this))},t.prototype.confirmDeletion=function(e){return this.model.destroy()},t.prototype.cancelDeletion=function(e){return this.$(".js-saved-search-name").removeClass("saved-search-item-faded"),this.$(".js-delete-saved-search").removeClass("hide"),this.$(".js-delete-saved-search-menu").addClass("hide").removeClass("saved-search-delete-menu-shown")},t.prototype.moveSavedSearch=function(e,t){var n,o;return o=t.item.parent().children(),n=o.index(t.item),this.model.update("pos",i.calcPos(n,r.me().savedSearchList,this.model)),this.model.collection.sort({silent:!0})},t}(a)},{}],727:[function(e,t,n){var r,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),o=e(7),i=e(723),a=e(100),s=e(22),u=e(569),c=e(728),d=e(283),p=e(547),h=e(133),m=e(549),f=e("underscore"),g=e(546),v=e(51),t.exports=l=function(e){function t(){this.fSearchOpen=!1,this.saveQueryDebounced=f.debounce(this.saveQuery,100),this.openSearchResultsViewDebounced=f.debounce(this.openSearchResultsView,100),this.autosuggestDebounced=f.debounce(this.autosuggest,100),p.addHandler(this,{scope:"search_box"}),t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("renderInputState"),this.listenTo(d,{"change:query":this.renderInputQuery})},t.prototype.events={"keydown .js-search-input":"searchKeydown","input .js-search-input":"search","click .js-search-input":function(e){return h.stop(e),this.openSearchResultsView()},"focus .js-search-input":"openSearchResultsView","click .js-open-search-page":"openSearchPage","mousedown .js-search-close":"clearSearch",shortcut:"shortcut"},t.prototype.render=function(){return this.$el.html(g.fill("header_search")),this.renderInputStateDebounced(),this.$(".js-search-input").val(d.getQuery()),this},t.prototype.renderInputQuery=function(){var e,t,n;e=this.$(".js-search-input"),n=e.val(),t=d.getQuery(),e.length>0&&n!==t&&(e.val(t),h.setCaretAtEnd(e))},t.prototype.renderInputState=function(){var e,t;t=this.fSearchOpen,e=this.hasInputValue(),this.$(".js-search-input").toggleClass("header-search-input-wide focus",t),this.$(".js-search-icon, .js-close-icon, .js-open-button").toggleClass("header-search-icon-dark",t),this.$(".js-search-icon").toggleClass("hide",t),this.$(".js-close-icon").toggleClass("hide",!t),this.$(".js-open-button").toggleClass("hide",!t)},t.prototype.hasInputValue=function(){var e;return(null!=(e=this.$(".js-search-input").val())?e.length:void 0)>0},t.prototype.shortcut=function(e){return e===s.ForwardSlash?(this.focusInput(),"Search"):void 0},t.prototype.focusInput=function(){var e;e=this.$(".js-search-input"),e.length&&h.setCaretAtEnd(e)},t.prototype.clearSearch=function(e){h.stop(e),u.hide(),this.closeSearch()},t.prototype.closeSearch=function(){this.$(".js-search-input").val("").blur(),d.setQuery(""),this.fSearchOpen=!1,this.renderInputStateDebounced()},t.prototype.searchKeydown=function(e){var t,n,o,i;o=a.getKey(e),this.renderInputStateDebounced(),n=e.target.selectionStart===(i=e.target.selectionEnd)&&i===e.target.value.length,o===s.Enter||o===s.Tab||o===s.ArrowRight&&n?(t=r(".js-select-suggestion.selected").length,t&&(h.stop(e),r(".js-select-suggestion.selected").click())):(o===s.ArrowUp||o===s.ArrowDown)&&(t=r(".js-select-suggestion.selected").length,t&&(h.stop(e),h.navMenuList(r(".js-search-suggestions-list"),".js-select-suggestion",o)))},t.prototype.search=function(e){return this.autosuggestDebounced(),this.saveQueryDebounced(),this.openSearchResultsViewDebounced()},t.prototype.autosuggest=function(e){var t,n,r,o,i,a,s,u,l,p,m,g;t=this.$(".js-search-input"),m=h.getWordFromCaret(t).str,o=c.findUniqueKeywords(m),s=d.getQuery(),c.inputIndex=h.getCaretPosition(t),i=f.filter(o,function(e){var t;return t=c.getSuggestionObjectContainingVariantOrKey(e).obj.containsRegex,!t.test(s)}),d.setSuggestions(i),n=!1,l=c.getKeywordsWithSearchSuggest();for(r in l)if(p=l[r],u=p.containsRegex,u.test(m))return n=!0,g=p.suggestionsSearchModelTypes,d.setSuggestionSearchModelTypes(g),a=m.replace(RegExp("^"+r),""),void d.setSuggestionSearchTerm(a);n||(d.clearSuggestionSearchTerm(),d.clearSuggestionSearchModelTypes())},t.prototype.saveQuery=function(){var e;e=this.$(".js-search-input").val(),d.setQuery(e),/\/search/.test(location.pathname)&&o.navigate(o.getSearchUrl(e),{replace:!0})},t.prototype.getResultsView=function(){return this.subview(i,null,null,"headerSearchResultsView")},t.prototype.openSearchResultsView=function(){var e;this.fSearchOpen||o.isOnSearchPage()||(this.fSearchOpen=!0,e=this.$(".js-search-input"),e.focus(),h.setCaretAtEnd(e),u.show({elem:e,view:new i({model:this.model,modelCache:this.modelCache}),elActive:e,hidden:f.bind(this.closeSearch,this)})),this.fSearchOpen=!0,this.renderInputStateDebounced()},t.prototype.openSearchPage=function(e){var t;return h.stop(e),t=d.getQuery(),u.hide(),c.navigateToSearch(t,{trigger:!0}),v("Header","Open Search Page")},t}(m)},{}],728:[function(e,t,n){var r,o,i,a,s,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(7),i=e(133),a=e("underscore"),s=e(104),t.exports=window.Search={navigateToSearch:function(e,t){var n;return n=(null!=t?t:{trigger:!1}).trigger,o.navigate(o.getSearchUrl(e),{trigger:n})},inputIndex:null,getSuggestionObjectContainingVariantOrKey:function(e){var t,n,r;if(n=this.getKeywordMap()[e],null!=n)return{key:e,obj:n};r=this.getKeywordsWithVariants();for(t in r)if(n=r[t],u.call(n.variants,e)>=0)return{key:t,obj:n};return{}},findKeywords:function(e){var t;return""===e?[]:t=a.filter(this.getKeywordsAndVariants(),function(t){return RegExp("^"+i.escapeForRegex(e)).test(t)})},findUniqueKeywords:function(e){var t,n;return t=this.findKeywords(e),n=a.uniq(t,!1,function(e){return function(t){return e.getSuggestionObjectContainingVariantOrKey(t).key}}(this))},_keywordsWith:function(e){var t,n;return a.object(function(){var r,o;r=this.getKeywordMap(),o=[];for(t in r)n=r[t],n.hasOwnProperty(e)&&o.push([t,n]);return o}.call(this))},getKeywordsWithVariants:function(){return null!=this._keywordsWithVariants?this._keywordsWithVariants:this._keywordsWithVariants=this._keywordsWith("variants")},getKeywordsWithSearchSuggest:function(){return null!=this._keywordsWithSearchSuggest?this._keywordsWithSearchSuggest:this._keywordsWithSearchSuggest=this._keywordsWith("suggestionsSearchModelTypes")},getKeywords:function(){return null!=this._keywords?this._keywords:this._keywords=a.keys(this.getKeywordMap())},getVariants:function(){var e,t;return null!=this._variants?this._variants:this._variants=a.flatten(function(){var n,r;n=this.getKeywordsWithVariants(),r=[];for(e in n)t=n[e],r.push(t.variants);return r}.call(this))},getKeywordsAndVariants:function(){return null!=this._keywordsAndVariants?this._keywordsAndVariants:this._keywordsAndVariants=this.getKeywords().concat(this.getVariants())},getKeywordMap:function(){return null!=this._keywordMap?this._keywordMap:this._keywordMap={"is:archived":{variants:["archived","is:closed","closed"],description:s("search.only include archived cards"),containsRegex:/\bis:archived\b/},"is:open":{variants:["open"],description:s("search.only include open cards"),containsRegex:/\bis:open\b/},"is:starred":{variants:["is:starred"],description:s("search.only include cards on starred boards"),containsRegex:/\bis:starred\b/},"has:attachments":{variants:["attachments"],description:s("search.only include cards with attachments"),containsRegex:/\bhas:attachments\b/},"has:cover":{variants:["cover"],description:s("search.only include cards with a cover"),containsRegex:/\bhas:cover\b/},"has:description":{variants:["description"],description:s("search.only include cards that have a description"),containsRegex:/\bhas:description\b/},"has:stickers":{variants:["stickers"],description:s("search.only include cards that have stickers"),containsRegex:/\bhas:stickers\b/},"has:members":{variants:["members"],suggestString:"has:members",description:s("search.only include cards that have members assigned"),containsRegex:/\bhas:members\b/},"@":{moreInputNeeded:!0,description:s("search.cards assigned to a member"),containsRegex:/@\S*\b/,suggestionsSearchModelTypes:"members"},"@me":{variants:["me"],description:s("search.only include cards assigned to me"),containsRegex:/\b@me\b/},"member:":{moreInputNeeded:!0,description:s("search.cards assigned to a member"),containsRegex:/\bmember:\S*\b/,suggestionsSearchModelTypes:"members"},"label:":{moreInputNeeded:!0,description:s("search.cards with this label"),containsRegex:/\blabel:\S*\b/},"#":{moreInputNeeded:!0,description:s("search.cards with this label"),containsRegex:/\b\#\S*\b/},"board:":{moreInputNeeded:!0,description:s("search.only cards on a particular board"),containsRegex:/\bboard:\S*\b/,suggestionsSearchModelTypes:"boards"},"list:":{moreInputNeeded:!0,description:s("search.cards in the list with matching text"),containsRegex:/\blist:\S*\b/},"name:":{moreInputNeeded:!0,description:s("search.cards that match text in the name"),containsRegex:/\bname:\S*\b/},"comment:":{moreInputNeeded:!0,description:s("search.cards that match text in the comment"),containsRegex:/\bcomment:\S*\b/},"checklist:":{moreInputNeeded:!0,description:s("search.cards that match text in a checklist"),containsRegex:/\bchecklist:\S*\b/},"description:":{moreInputNeeded:!0,description:s("search.cards that match text in the description"),containsRegex:/\bdescription:\S*\b/},"due:day":{variants:["day","today"],description:s("search.cards due in the next 24 hours"),containsRegex:/\bdue:day\b/},"due:week":{description:s("search.cards due in the next 7 days"),containsRegex:/\bdue:week\b/},"due:month":{description:s("search.cards due in the next 28 days"),containsRegex:/\bdue:month\b/},"due:overdue":{variants:["overdue"],description:s("search.cards that are past due"),containsRegex:/\bdue:overdue\b/},"due:incomplete":{variants:["notcomplete","incomplete","stilldue"],description:s("search.cards that are incomplete"),containsRegex:/\bdue:incomplete\b/},"due:complete":{variants:["completed","complete"],description:s("search.cards that have due dates marked complete"),containsRegex:/\bdue:complete\b/},"created:day":{description:s("search.cards created in the last 24 hours"),containsRegex:/\bcreated:day\b/},"created:week":{description:s("search.cards created in the last 7 days"),containsRegex:/\bcreated:week\b/},"created:month":{description:s("search.cards created in the last 28 days"),containsRegex:/\bcreated:month\b/},"edited:day":{description:s("search.cards edited in the last 24 hours"),containsRegex:/\bedited:day\b/},"edited:week":{description:s("search.cards edited in the last 7 days"),containsRegex:/\bedited:week\b/},"edited:month":{description:s("search.cards edited in the last 28 days"),containsRegex:/\bedited:month\b/}}}}},{}],729:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(35),i=e(561),s=e(731),u=e(133),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.toggleSelectable(),this.waitForId(this.model,function(e){return function(){return e.toggleSelectable()}}(this)),this.listenTo(this.model,"change:error",this.render)},t.prototype.events={"click .js-delete-sticker":"deleteSticker"},t.prototype.enabled=function(){var e;return o.me().isFeatureEnabled("customStickers")||(null!=(e=this.options.org)?e.isFeatureEnabled("customStickers"):void 0)},t.prototype.toggleSelectable=function(){var e;return e=null!=this.model.id,this.$el.toggleClass("js-draggable-sticker",e),this.$el.toggleClass("sticker-unselectable",!e)},t.prototype.deleteSticker=function(e){return u.stop(e),i.toggle("delete sticker",{elem:r(e.target).closest(".js-delete-sticker"),top:32,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy()}}(this)})},t}(s)},{}],730:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(569),a=e(732),s=e(133),u=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"stopEditing",this.stopEditing),this.listenTo(this.model,"startEditing",this.editSticker),this.listenTo(this.model,"disableEditing",this.disableEditing),this.listenTo(this.model,"enableEditing",this.enableEditing)},t.prototype.events={mouseenter:"mouseenter",mouseleave:"mouseleave",mousedown:"editSticker","mousedown .js-remove-sticker":"removeSticker","mousedown .js-rotate-sticker":"startRotate","mousedown .js-move-sticker":"startMove"},t.prototype.showEditControls=function(){return!0},t.prototype.disableEditing=function(){return this.$el.addClass("editing-disabled")},t.prototype.enableEditing=function(){return this.$el.removeClass("editing-disabled")},t.prototype.endCurrentEdit=function(){return r(document).off(".stickerrotate .stickermove .stickerautomove"),this.$el.removeClass("moving rotating"),r(".quick-card-editor").removeClass("invalid dragging")},t.prototype.stopEditing=function(e){var t,n,o,i,a;if(s.stop(e),this.isEditing()){for(this.endCurrentEdit(),this.$el.removeClass("editing"),r(".quick-card-editor").removeClass("quick-card-editor-editing-stickers"),o=this.model.collection.models,i=[],t=0,n=o.length;n>t;t++)a=o[t],i.push(a.trigger("enableEditing"));return i}},t.prototype.isEditing=function(){return this.$el.is(".moving, .rotating, .editing")},t.prototype.isEditingDisabled=function(){return this.$el.is(".editing-disabled")},t.prototype.isMovingOrRotating=function(){return this.$el.is(".moving, .rotating")},t.prototype.saveStickerAttrs=function(e){var t,n,r,o,i,a,u,c,l;o=e.position,i=e.rotation,a=function(e){return Math.round(100*e)/100},l={zIndex:this.model.collection.nextZIndex(this.model)},o&&(t=this.$el.closest(".list-card"),n=t.find(".js-card-stickers"),c=n.width(),u=n.height(),l.left=a(parseFloat(this.$el.css("left"))/c*100),l.top=a(parseFloat(this.$el.css("top"))/u*100)),i&&(r=s.getElemTransformMatrix(this.$el.find(".sticker-image")),l.rotate=a(s.getMatrixDegrees(r)%360)),this.model.update(l)},t.prototype.mouseenter=function(e){this.isEditingDisabled()||this.isEditing()||this.isMovingOrRotating()||this.$el.addClass("hover")},t.prototype.mouseleave=function(e){this.$el.removeClass("hover")},t.prototype.editSticker=function(e){var t,n,i,a,c,l,d,p,h;if(null==e||1===e.which){for(s.stop(e),a=!1,null!=e&&"mousedown"===e.type&&(l=e.pageX,d=e.pageY,n=function(e){return function(){return r(document).off(".stickerautomove"),clearTimeout(t)}}(this),r(document).on("mousemove.stickerautomove",function(e){return function(t){return Math.pow(t.pageX-l,2)+Math.pow(t.pageY-d,2)>25?(a=!0,n(),e.startMove(t)):void 0}}(this)),r(document).on("mouseup.stickerautomove",n),t=this.setTimeout(n,1e3)),h=u.clone(this.model.collection.models),i=0,c=h.length;c>i;i++)p=h[i],p!==this.model&&(p.trigger("stopEditing"),p.trigger("disableEditing"));this.defer(function(e){return function(){return o.hide(),e.$el.addClass("editing"),r(".quick-card-editor").addClass("quick-card-editor-editing-stickers")}}(this))}},t.prototype.startRotate=function(e){var t,n,o,i,a,u;if(this.isEditing())return s.preventDefault(e),u={x:this.$el.offset().left+this.$el.width()/2,y:this.$el.offset().top+this.$el.height()/2},o={x:e.pageX,y:e.pageY},i=s.calcDistanceFromCenter(this.$el,o.x,o.y),a=0,n=s.getElemTransformMatrix(this.$el.find(".sticker-image")),null!=n&&(a=s.getMatrixDegrees(n)),t=!1,r(document).on("mousemove.stickerrotate",function(e){return function(n){var c,l,d,p,h,m,f,g,v;t||(e.$el.removeClass("hover").addClass("rotating"),r(".quick-card-editor").addClass("dragging"),t=!0),g={x:n.pageX,y:n.pageY},l=4*s.calcDistanceFromCenter(e.$el,g.x,g.y),d=l-4*i,h=g.x-u.x,m=g.y-u.y,f=s.getDegrees(o.y-u.y,o.x-u.x),p=s.getDegrees(m,h),c=p-f,v=a+c,e.$el.find(".sticker-image").css({transform:"rotate("+v+"deg)","-webkit-transform":"rotate("+v+"deg)"})}}(this)),r(document).on("mouseup.stickerrotate",function(e){return function(){return t?(e.saveStickerAttrs({rotation:!0}),e.endCurrentEdit()):r(document).off(".stickerrotate")}}(this)),!1},t.prototype.startMove=function(e){var t,n,o,i,a,u,c,l,d,p,h,m,f;if(this.isEditing())return s.stop(e),t=this.$el.closest(".list-card"),n=t.find(".js-card-stickers"),h=n.offset(),l=h.left,d=h.top,f=this.$el.width(),m=this.$el.height(),p=n.width(),c=n.height(),o={left:-40,right:p-10,top:-40,bottom:c-10},null!=e?(a=this.$el.offset().left+this.$el.width()/2-e.pageX,u=this.$el.offset().top+this.$el.height()/2-e.pageY):(a=0,u=0),i=!1,r(document).on("mousemove.stickermove",function(e){return function(t){var n,s,c;return i||(e.$el.removeClass("hover").addClass("moving"),r(".quick-card-editor").addClass("dragging"),i=!0),n=t.pageX-l-f/2+a,s=t.pageY-d-m/2+u,c=!0,n>o.right&&(n=o.right,c=!1),n<o.left&&(n=o.left,c=!1),s>o.bottom&&(s=o.bottom,c=!1),s<o.top&&(s=o.top,c=!1),r(".quick-card-editor").toggleClass("invalid",!c),e.$el.css({left:n,top:s})}}(this)),r(document).on("mouseup.stickermove",function(e){return function(){return i?(e.saveStickerAttrs({position:!0}),e.endCurrentEdit()):r(document).off(".stickermove")}}(this)),!1},t.prototype.removeSticker=function(e){var t;this.isEditing()&&(t=u.once(function(e){return function(){e.stopEditing(),e.model.destroy(),e.$el.remove()}}(this)),this.$el.one("transitionEnd webkitTransitionEnd",t),this.setTimeout(t,100),this.$el.addClass("fade-out"))},t}(a)},{}],731:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(35),i=e(133),a=e(549),u=e(546),s=e(31),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="sticker-select js-draggable-sticker",t.prototype.enabled=function(){var e;return!this.model.get("premium")||r.me().isFeatureEnabled("additionalStickers")||(null!=(e=this.options.org)?e.isFeatureEnabled("additionalStickers"):void 0)},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.url=null!=(t=null!=(n=i.smallestPreviewBiggerThan(e.scaled,s))?n.url:void 0)?t:e.url,e.pending=null==e.image&&null==e.id&&null==e.error,this.$el.toggleClass("disabled",!this.enabled()).html(u.fill("sticker_select_item",e)).data("sticker",this.model),this},t}(a)},{}],732:[function(e,t,n){var r,o,i,a,s,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(133),i=e(549),u=e(546),s=e(31),a=e(143),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="sticker",t.prototype.showEditControls=function(){return!1},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.url=null!=(t=null!=(n=o.smallestPreviewBiggerThan(e.imageScaled,s))?n.url:void 0)?t:e.imageUrl,e.showEditControls=this.showEditControls(),this.$el.html(u.fill("sticker_on_card",e)).css({left:a(e.left)+"%",top:a(e.top)+"%"}),this},t}(i)},{}],733:[function(e,t,n){var r,o,i;i=e(544)("action"),r=e(818),o=e(867),t.exports=i.renderable(function(e,t,n){var a,s,u,c,l,d,p,h,m,f,g,v,b,y,w;return h=e.entities,g=e.saved,p=e.dateLastEdited,d=e.date,b=e.url,m=t.member,a=t.board,f=t.organization,l=t.canReply,u=t.canDelete,c=t.canEdit,s=t.canAttachLink,y=n.useEmbedly,w=n.usePreviews,v=n.showOptions,i.div(".phenom-creator",function(){return m?i.div(".member.js-show-mem-menu",{idmember:m.id},function(){return o(m)}):i.span(".icon-lg.icon-member")}),i.div(".phenom-desc",function(){var e,o,a;for(o=0,a=h.length;a>o;o++)e=h[o],r(e,t,n);return y&&i.div(".hide.embedly.js-embedly"),w?i.div(".hide.previews.js-previews"):void 0}),i.p(".phenom-meta.quiet",function(){var e,n,r,o;return g&&(b?i.a(".date.js-hide-on-sending.js-highlight-link",{dt:d,href:b}):i.span(".date.js-hide-on-sending",{dt:d,href:b})),p&&i.span(".js-date-title.js-hide-on-sending",{dt:p},function(){return i.text(" "),i.format("edited")}),i.span({class:i.classify({"js-spinner":!0,hide:g})},function(){return i.format("sending-ellipsis")}),a&&(e=t.boardPLevelAltText,n=t.boardPLevelIconClass,i.text(" - "),i.format("on-board-name",{url:a.url,name:a.name,boardPLevelAltText:e,boardPLevelIconClass:n})),f&&(r=t.orgPLevelAltText,o=t.orgPLevelIconClass,i.text(" - "),i.format("on-organization-name",{url:f.url,name:f.name,orgPLevelAltText:r,orgPLevelIconClass:o})),v?i.span(".js-hide-on-sending",function(){return l&&(i.text(" - "),i.a(".js-reply-to-action",{href:"#"},function(){return i.format("reply")})),c&&(i.text(" - "),i.a(".js-edit-action",{href:"#"},function(){return i.format("edit")})),s&&(i.text(" - "),i.a(".js-attach-link",{href:"#"},function(){return i.format("attach link")})),u?(i.text(" - "),i.a(".js-confirm-delete-action",{href:"#"},function(){return i.format("delete")})):void 0}):void 0})})},{}],734:[function(e,t,n){var r;r=e(544)("actions_empty"),t.exports=function(){return r.p(".empty-list",function(){return r.mustacheBlock("daysBack",function(){return r.format("no-actions-in-the-last-daysback-days",{daysBack:r.mustacheVar("daysBack")})}),r.mustacheBlockInverted("daysBack",function(){return r.format("no-actions")})})}},{}],735:[function(e,t,n){var r;r=e(544)("ad_business_class"),t.exports=function(){return r.format("check-out-business-class")}},{}],736:[function(e,t,n){var r;r=e(544)("ad_business_class_google_apps"),t.exports=function(){return r.span(".title",function(){return r.format("using-google-apps")}),r.span(".learn-more",function(){return r.a({href:"#"},function(){return r.format("learn-about-business-class-ellipsis")})})}},{}],737:[function(e,t,n){var r,o;o=e(544)("announcement"),r=function(e){var t;return t=["announcement"],e&&t.push(["announcement",e].join("-")),t.join(" ")},t.exports=o.renderable(function(e){var t,n,i,a;return t=e.url,i=e.title,n=e.html,a=e.type,o.div({class:r(a)},function(){o.h3(".announcement-header",function(){null!=t?o.a(".announcement-header-link",{target:"_blank",href:t},function(){return o.text(i)}):o.text(i)}),o.p(function(){return o.raw(n)}),null!=t&&o.p(".quiet",function(){return o.a({href:t,target:"_blank"},function(){return o.format("read-more-ellipsis")})})})})},{}],738:[function(e,t,n){var r;r=e(544)("archived_card_options"),t.exports=function(){return r.mustacheBlock("__ed",function(){return r.p(".quiet",{style:"margin-left: 8px;"},function(){return r.a(".js-reopen",{href:"#"},function(){return r.text(r.mustacheVar("reOpenText"))}),r.mustacheBlock("canDelete",function(){return r.text(" - "),r.a(".js-delete",{href:"#"},function(){return r.format("delete")})})})})}},{}],739:[function(e,t,n){var r;r=e(544)("archived_cards"),t.exports=function(){return r.div(".js-archive-items"),r.p(".empty-list.js-empty-message"),r.a(".show-more.js-more-cards",{href:"#"},function(){return r.format("load-more-cards")})}},{}],740:[function(e,t,n){var r;r=e(544)("archived_lists"),t.exports=function(){return r.ul(".archive-list.js-archive-items"),r.p(".js-empty-message.empty-list")}},{}],741:[function(e,t,n){var r;r=e(544)("atMention"),t.exports=function(){return r.span({class:"atMention"+r.mustacheBlock("isMe",function(){return" me"}),title:r.mustacheVar("fullName")},function(){return r.text(r.mustacheVar("atMention"))})}},{}],742:[function(e,t,n){var r;r=e(544)("attachment_thumb"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C;return t=e.canReply,n=e.canUseViewer,o=e.date,i=e.doDownload,a=e.edgeColor,s=e.editable,u=e.ext,l=e.imgSrc,d=e.isCover,p=e.isHidden,h=e.name,m=e.openIconClass,f=e.openText,g=e.plugin,v=e.pluginEnablementInProgress,b=e.previewClass,y=e.removeText,c=e.url,C=e.upsellEnabled,_={"attachment-thumbnail-preview":!0,"js-open-viewer":n,"attachment-thumbnail-preview-is-cover":d},p?r.div:(w={},l&&(w["background-image"]=r.urlify(l)),a&&(w["background-color"]=a),r.a({href:c,class:r.classify(_),target:"_blank",title:h,style:r.stylify(w),rel:"noreferrer nofollow"},function(){return b?r.span({class:["attachment-thumbnail-preview-service-logo",b].join(" ")}):l?void 0:u?r.span(".attachment-thumbnail-preview-ext",function(){return r.text(u)}):r.span(".icon-lg.icon-attachment.attachment-thumbnail-preview-attachment-icon")}),k=function(){return o&&r.span(function(){return r.format("added",{date:o})}),t&&r.span(function(){return r.a(".attachment-thumbnail-details-title-options-item.js-reply",{href:"#"},function(){return r.span(".attachment-thumbnail-details-options-item-text",function(){return r.format("comment")})})}),s?r.span(function(){return r.a(".attachment-thumbnail-details-title-options-item.dark-hover.js-confirm-delete",{href:"#"},function(){return r.span(".attachment-thumbnail-details-options-item-text",function(){return r.text(y)})})}):void 0},void r.p(".attachment-thumbnail-details",{class:r.classify({"js-open-viewer":n,"js-open-in-new-window":!n})},function(){r.span(".attachment-thumbnail-name.js-attachment-name",{class:r.classify({"can-edit-attachment-title":s})},function(){return r.text(h)}),i||r.a(".attachment-thumbnail-details-title-action.dark-hover.js-attachment-action.js-direct-link",{href:c,target:"_blank",rel:"noreferrer nofollow"},function(){return r.icon(m)}),r.textarea(".attachment-thumbnail-details-title.js-attachment-thumbnail-details hide",{maxlength:256},function(){return r.text(h)}),r.span(".u-block.quiet.attachment-thumbnail-details-title-options",function(){return k()}),g&&C&&r.span(".quiet.attachment-thumbnail-details-powerup",function(){return r.a(".attachment-thumbnail-details-powerup-item-button.js-enable-power-up",{href:"#","data-plugin":g.name},function(){return g.icon?r.span(".icon-sm.plugin-icon",{style:r.stylify({"background-image":r.urlify(g.icon+"?color=999")})}):r.span(".icon-sm.icon-power-up"),r.format("enable-power-up",{powerUpName:g.name})}),r.a(".attachment-thumbnail-details-powerup-item.js-show-power-up-suggestions-info",{href:"#","data-plugin":g.name},function(){return r.icon("information",{class:"power-up-item-suggestions-info-icon"})})}),v&&r.span(".quiet.attachment-thumbnail-details-powerup",function(){return r.a(".attachment-thumbnail-details-powerup-item-button.power-up-enablement-in-progress",{href:"#"},function(){return r.span(".icon-sm.icon-power-up",function(){}),r.format("enabling-power-up")})}),r.span(".quiet.attachment-thumbnail-details-options",function(){i&&r.a(".attachment-thumbnail-details-options-item.dark-hover.js-download",{href:c,target:"_blank",download:"download",rel:"noreferrer nofollow"},function(){return r.icon("download"),r.text(" "),r.span(".attachment-thumbnail-details-options-item-text",function(){return r.text(f)})}),s&&(r.a(".attachment-thumbnail-details-options-item.dark-hover.hide.js-make-cover",{href:"#"},function(){return r.icon("card-cover"),r.text(" "),r.span(".attachment-thumbnail-details-options-item-text",function(){return r.format("make-cover")})}),r.a(".attachment-thumbnail-details-options-item.dark-hover.hide.js-remove-cover",{href:"#"},function(){return r.icon("card-cover"),r.text(" "),r.span(".attachment-thumbnail-details-options-item-text",function(){return r.format("remove-cover")})}))})}))})},{}],743:[function(e,t,n){var r;r=e(544)("attachment_thumb_processing"),t.exports=r.renderable(function(){return r.div(".attachment-thumbnail.attachment-thumbnail-processing.js-attachment-thumb-processing",function(){return r.format("processing-ellipsis");
})})},{}],744:[function(e,t,n){var r;r=e(544)("attachment_viewer"),t.exports=function(){return r.div(".attachment-viewer-header.js-close-viewer",function(){return r.span(".icon-lg.icon-close.attachment-viewer-header-close-icon")}),r.div(".attachment-viewer-underlay.js-close-viewer"),r.div(".attachment-viewer-frames.js-frames"),r.div(".attachment-viewer-overlay",function(){return r.div(".attachment-viewer-frame-details.js-display-frame-details")}),r.a(".attachment-viewer-next-frame-btn.js-show-next-frame",function(){return r.span(".icon-lg.icon-forward.light.attachment-viewer-next-frame-btn-icon")}),r.a(".attachment-viewer-prev-frame-btn.js-show-prev-frame",function(){return r.span(".icon-lg.icon-back.light.attachment-viewer-prev-frame-btn-icon")})}},{}],745:[function(e,t,n){var r;r=e(544)("attachment_viewer_frame"),t.exports=function(){return r.div({class:"attachment-viewer-frame js-close-viewer "+r.mustacheVar("directionClass"),"data-idAttachment":r.mustacheVar("id")},function(){return r.div(".attachment-viewer-frame-preview-wrapper",function(){return r.div({class:"attachment-viewer-frame-preview"+r.mustacheBlock("isImage",function(){return" attachment-viewer-frame-preview-image-wrapper"})},function(){return r.mustacheBlock("isImage",function(){return r.img(".attachment-viewer-frame-preview-image.js-stop",{src:r.mustacheVar("url"),alt:r.mustacheVar("name")})}),r.mustacheBlock("isAudio",function(){return r.audio(".attachment-viewer-frame-preview-audio.js-stop",{controls:!0,name:r.mustacheVar("name")},function(){return r.source({src:r.mustacheVar("url"),type:"audio/"+r.mustacheVar("ext")})})}),r.mustacheBlock("isVideo",function(){return r.video(".attachment-viewer-frame-preview-video.js-stop",{controls:!0,name:r.mustacheVar("name"),src:r.mustacheVar("url")})}),r.mustacheBlock("isIFrameable",function(){return r.iframe(".attachment-viewer-frame-preview-iframe.js-stop",{src:r.mustacheVar("url")})}),r.mustacheBlock("isPlaceholder",function(){return r.p(".attachment-viewer-frame-preview-placeholder",function(){return r.format("there-is-no-preview-available-for-this-attachment-opentext",{url:r.mustacheVar("url"),openText:r.mustacheVar("openText")})})})})})})}},{}],746:[function(e,t,n){var r;r=e(544)("attachment_viewer_frame_details"),t.exports=function(){return r.div(".attachment-viewer-frame-details",function(){return r.h2(".attachment-viewer-frame-details-title",function(){return r.text(r.mustacheVar("name"))}),r.p(function(){return r.mustacheBlock("date",function(){return r.format("added",{date:r.mustacheVar("date")})}),r.mustacheBlock("meta",function(){return r.text(" - "),r.text(r.mustacheVar("meta"))})}),r.p(function(){return r.span(".js-meta",function(){var e;return e={href:r.mustacheVar("url"),target:"_blank"},r.mustacheBlock("doDownload",function(){return e.download=r.mustacheVar("name")}),r.a(e,function(){return r.span({class:"icon-sm icon-"+r.mustacheVar("openIconClass")+" light attachment-viewer-option-icon"}),r.text(r.mustacheVar("openText"))}),r.mustacheBlock("__ed",function(){return r.span({class:"js-cover-options"+r.mustacheBlockInverted("canMakeCover",function(){return" hide"})},function(){return r.span({class:"js-make-cover-box"+r.mustacheBlock("isCover",function(){return" hide"})},function(){return r.a(".js-make-cover",{href:"#"},function(){return r.icon("card-cover",{class:"light attachment-viewer-option-icon"}),r.format("make-cover")})}),r.span({class:"js-remove-cover-box"+r.mustacheBlockInverted("isCover",function(){return" hide"})},function(){return r.a(".js-remove-cover",{href:"#"},function(){return r.icon("card-cover",{class:"light attachment-viewer-option-icon"}),r.format("remove-cover")})})}),r.a(".js-open-delete-confirm",{href:"#"},function(){return r.icon("close",{class:"light attachment-viewer-option-icon"}),r.text(r.mustacheVar("removeButtonText"))})})}),r.span(".js-confirm-delete.hide",function(){return r.text(r.mustacheVar("removeMessageText")),r.a(".attachment-viewer-delete-link.js-delete",{href:"#"},function(){return r.text(r.mustacheVar("removeConfirmText"))}),r.a(".attachment-viewer-delete-link.js-close-delete-confirm",{href:"#"},function(){return r.text(r.mustacheVar("removeCancelText"))})})})})}},{}],747:[function(e,t,n){var r;r=e(544)("avatar_change"),t.exports=function(){return r.mustacheBlock("uploadedAvatarHash",function(){return r.a({class:"avatar-option js-use-uploaded-avatar "+r.mustacheBlock("avatarSource_upload",function(){return"active"}),href:"#"},function(){return r.img(".pic",{src:r.mustacheVar("__avatarDomain")+"/"+r.mustacheVar("uploadedAvatarHash")+"/50.png"}),r.span(".text",function(){return r.format("uploaded-picture"),r.icon("check")})}),r.hr()}),r.div(".js-grav.hide",function(){return r.a({class:"avatar-option js-use-gravatar "+r.mustacheBlock("avatarSource_gravatar",function(){return"active"}),href:"#"},function(){return r.img(".pic",{src:"https://secure.gravatar.com/avatar/"+r.mustacheVar("gravatarHash")+".png?s=50&r=PG&d=404"}),r.span(".text",function(){return r.format("gravatar"),r.icon("check")})}),r.hr()}),r.a({class:"avatar-option js-no-avatar "+r.mustacheBlock("avatarSource_none",function(){return"active"}),href:"#"},function(){return r.span(".pic.member",function(){return r.span(".member-initials",function(){return r.text(r.mustacheVar("initials"))})}),r.span(".text",function(){return r.format("initials-no-avatar"),r.icon("check")})}),r.hr(),r.mustacheBlock("canTakePhoto",function(){return r.a(".button-link.js-take-photo",{href:"#"},function(){return r.icon("camera","take-photo-with-camera")}),r.hr()}),r.p(".error.hide.js-error"),r.div(".uploader",function(){return r.form(".realfile",{action:"/1/member/"+r.mustacheVar("id")+"/avatar",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.input(".js-upload-avatar",{type:"file",name:"file",style:"margin-bottom: 0;",tabindex:"-1",accept:"image/*;capture=camera"})}),r.a(".button-link.fakefile",function(){return r.mustacheBlock("uploadedAvatarHash",function(){return r.icon("attachment","upload-a-new-picture")}),r.mustacheBlockInverted("uploadedAvatarHash",function(){return r.icon("attachment","upload-a-picture")})})})}},{}],748:[function(e,t,n){var r;r=e(544)("badge"),t.exports=function(){return r.span({class:"badge-icon icon-sm icon-"+r.mustacheVar("icon")}),r.mustacheBlock("text",function(){return r.span(".badge-text",function(){return r.text(r.mustacheVar("text"))})})}},{}],749:[function(e,t,n){var r,o;o=e(544)("billing_contact"),r=e(33),t.exports=o.renderable(function(e){var t,n,i;return n=e.fullName,t=e.email,i=e.locale,o.div(".error",{style:"display:hidden"}),o.form(function(){return o.label({for:"billingContactFullName"},function(){return o.format("name")}),o.input(".text",{name:"billingContactFullName",type:"text",id:"billingContactFullName",value:n,maxlength:"50"}),o.label({for:"billingContactEmail"},function(){return o.format("email")}),o.input(".text",{name:"billingContactEmail",type:"text",id:"billingContactEmail",value:t}),o.label({for:"billingContactLocale"},function(){return o.format("language")}),o.select({name:"billingContactLocale",id:"billingContactLocale"},function(){var e,t,n,a,s,u,c;for(s=[],e=0,t=r.length;t>e;e++)a=r[e],c=a.code,n=a.name,u=c.toLowerCase()===i.toLowerCase(),s.push(o.option({value:c,selected:u},function(){return o.text(n)}));return s}),o.input(".primary.js-submit",{type:"submit",value:o.l("save")})})})},{}],750:[function(e,t,n){var r;r=e(544)("board"),t.exports=function(){return r.div(".board-main-content",function(){return r.div(".board-header.u-clearfix.js-board-header"),r.div(".board-warnings.u-clearfix.js-board-warnings"),r.div(".board-canvas")}),r.div(".board-menu.js-fill-board-menu")}},{}],751:[function(e,t,n){var r;r=e(544)("board_archive"),t.exports=function(){return r.div(".archive-controls",function(){return r.div(".archive-controls-search",function(){return r.input(".js-search.js-autofocus",{type:"text",placeholder:r.l("search archive")})}),r.a(".archive-controls-switch.quiet-button.js-switch-section",{href:"#"})}),r.div(".spinner.loading.js-loading-spinner"),r.div(".archive-content.js-archive-content")}},{}],752:[function(e,t,n){var r;r=e(544)("board_background_options"),t.exports=function(){return r.p(".u-font-weight-bold.quiet",function(){return r.format("display-type")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select-option",{href:"#","data-background-display-type":"cover"},function(){return r.check(!r.mustacheVar("tile"),"cover")})}),r.li(function(){return r.a(".js-select-option",{href:"#","data-background-display-type":"tile"},function(){return r.check(r.mustacheVar("tile"),"tile")})})}),r.hr(),r.p(".u-font-weight-bold.quiet",function(){return r.format("board-text")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select-option",{href:"#","data-board-brightness":"dark"},function(){return r.check(r.mustacheVar("brightnessDark"),"light")})}),r.li(function(){return r.a(".js-select-option",{href:"#","data-board-brightness":"light"},function(){return r.check(r.mustacheVar("brightnessLight"),"dark")})})}),r.hr(),r.a(".quiet-button.js-delete-background",{href:"#"},function(){return r.format("delete-background")})}},{}],753:[function(e,t,n){var r;r=e(544)("board_background_selection"),t.exports=function(){return r.span({class:"background-box "+r.mustacheBlock("pending",function(){return"background-box-unselectable"})+r.mustacheBlock("tile",function(){return" background-tile"}),style:" "+r.mustacheBlock("backgroundImageThumbnail",function(){return'background-image: url("'+r.mustacheVar("backgroundImageThumbnail")+'")'})+"; "+r.mustacheBlock("color",function(){return"background-color: "+r.mustacheVar("color")+";"})+" "},function(){return r.mustacheBlock("attribution",function(){return r.a(".background-option.js-background-attribution",{href:r.mustacheVar("url"),target:"_blank",title:r.mustacheVar("url")},function(){return r.img({src:"https://a.trellocdn.com/images/d906fe5c1274c56c5571d49705547587/cc.png",style:"height: 14px; width: 14px; vertical-align: text-top;",title:r.mustacheVar("license")}),r.span(".text",{style:"margin-left: 2px;"},function(){return r.text(r.mustacheVar("name"))})})}),r.mustacheBlock("id",function(){return r.a(".background-option.js-options",function(){return r.icon("overflow-menu-horizontal",{class:"light",style:"vertical-align: bottom;"}),r.span(".text",function(){return r.format("options")})})}),r.mustacheBlock("error",function(){return r.span(".background-info",function(){return r.span(".text",function(){return r.text(r.mustacheVar("error"))})})}),r.mustacheBlock("pending",function(){return r.span(".background-info",function(){return r.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),r.span(".text",function(){return r.format("uploading-ellipsis")})})})})}},{}],754:[function(e,t,n){var r;r=e(544)("board_change_background"),t.exports=function(){return r.div(".board-backgrounds-section-tiles.u-clearfix",function(){return r.div(".board-backgrounds-section-tile.board-backgrounds-colors-tile.js-bg-colors",function(){return r.div(".image"),r.div(".title",function(){return r.format("colors")})}),r.div(".board-backgrounds-section-tile.board-backgrounds-photos-tile.js-bg-photos",function(){return r.div(".image"),r.div(".title",function(){return r.format("photos")})})}),r.hr(".board-menu-header-divider"),r.h2(function(){return r.format("custom")}),r.div({class:"board-backgrounds-list u-relative u-clearfix js-custom-list"+r.mustacheBlockInverted("enabled_customBoardBackgrounds",function(){return" disabled"})},function(){return r.div(".board-background-select.board-background-select-upload.js-uploader",function(){return r.form({action:"/1/member/"+r.mustacheVar("idMember")+"/customBoardBackgrounds",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.span(".background-box",function(){return r.span(".icon-lg.icon-add")}),r.input(".upload-background.js-upload-image",{type:"file",name:"file",multiple:"multiple",accept:"image/*"})})})})}},{}],755:[function(e,t,n){var r;r=e(544)("board_closed"),t.exports=r.renderable(function(e){var t,n,o,i;return i=e.name,o=e.deleting,n=e.canReopen,t=e.canDelete,r.div(".big-message.quiet",function(){return r.h1(function(){return r.format("name-is-closed",{name:i})}),o?r.format("deleting"):(n&&r.p(function(){return r.a(".js-reopen",{href:"#"},function(){return r.format("reopen")})}),t&&r.p({style:"margin-top: 64px"},function(){return r.a(".quiet.js-delete",{href:"#"},function(){return r.format("permanently-delete-board")})}),n||t?void 0:r.p(function(){return r.format("you-re-a-member-of-this-board-but-only-board-admins-are-able-to-re-open-it")}))})})},{}],756:[function(e,t,n){var r;r=e(544)("board_desc"),t.exports=function(){return r.div(".window-header.u-clearfix",function(){return r.span(".window-header-icon.icon-lg.icon-board"),r.div({class:"window-title non-empty u-inline "+r.mustacheBlock("__own",function(){return" editable "})+" ",attr:"name"},function(){return r.h2(".window-title-text.current.hide-on-edit",function(){return r.text(r.mustacheVar("name"))}),r.mustacheBlock("__own",function(){return r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})}),r.div(".edit.edit-heavy",function(){return r.textarea(".field.single-line",{type:"text"})})})})}),r.div(".window-main-col.window-main-col-full",function(){return r.div({class:"board-description u-clearfix"+r.mustacheBlock("__ed",function(){return" editable"}),attr:"desc"},function(){return r.div(".current.markeddown.hide-on-edit.u-bottom",function(){return r.mustacheBlockInverted("hasDesc",function(){return r.p(".u-bottom",function(){return r.mustacheBlock("__ed",function(){return r.a(".quiet.empty",{style:"padding: 100px 0;",href:"#"},function(){return r.format("no-description-click-to-edit")})}),r.mustacheBlockInverted("__ed",function(){return r.span(".quiet.empty",{style:"padding: 100px 0;"},function(){return r.format("no-description")})})})})}),r.mustacheBlock("__ed",function(){return r.mustacheBlock("hasDesc",function(){return r.p(".u-bottom.js-edit-desc",function(){return r.a(".quiet-button.mod-with-image.hide-on-edit",{href:"#"},function(){return r.icon("edit","edit-the-board-description",{class:"quiet-button-icon"})})})}),r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})}),r.div(".board-description-edit.edit",function(){return r.p(".helper",function(){return r.format("markdown-accepted")}),r.textarea(".field")})})})})}},{}],757:[function(e,t,n){var r;r=e(544)("board_header"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d,p,h,m,f,g,v;return n=e.canRename,f=e.orgLogoUrl,g=e.orgLogoUrl2x,a=e.hasBusinessClass,c=e.isBusinessClass,l=e.isEnterprise,m=e.orgDisplayName,h=e.name,v=e.orgName,d=e.isLoggedIn,u=e.isAdmin,p=e.isPrivateTeam,s=e.inBoardHeaderTest,s?(t=c?"BC":l?"ENT":"Free",o={"board-header-btn":!0,"board-header-btn-name":!0,"js-rename-board":n,"no-edit":!n},i={"board-header-btn":!0,"board-header-btn-org-name":!0,"js-open-org-menu":!0,"board-header-btn-without-icon":!f},r.a({href:"#",class:r.classify(o)},function(){return r.span(".board-header-btn-text",{dir:"auto"},function(){return r.text(h)})}),d&&r.a(".board-header-btn.js-star-board",{href:"#",title:r.l("click-to-star-or-unstar-this-board-starred-boards-show-up-at-the-top-of-your-boards-list"),"aria-label":r.l("star-or-unstar-board")},function(){return r.icon("star",{class:"board-header-btn-icon"})}),m&&(r.span(".board-header-btn-divider"),r.a({href:"/"+v,class:r.classify(i),data:{boardtype:t}},function(){return f&&r.img({class:"board-header-btn-name-org-logo",src:f,srcSet:f+" 1x, "+g+" 2x"}),r.span(".board-header-btn-text",function(){return r.text(m),r.span(".org-label",function(){return r.text(t)})})}),r.span(".board-header-btn-divider")),r.div(".board-header-btns.mod-left",function(){return r.a(".board-header-btn.hide.js-open-desc.js-fill-desc",{href:"#"},function(){return r.icon("description",{class:"board-header-btn-icon"})}),m||(r.span(".board-header-btn-divider"),p?r.span(".board-header-btn.board-header-btn-without-icon.board-header-btn-text.no-edit",function(){return r.format("private-team")}):r.a(".board-header-btn.board-header-btn-without-icon.board-header-btn-text.js-add-board-to-team",{href:"#",class:r.classify({"no-edit":!u})},function(){return r.format("personal")}),r.span(".board-header-btn-divider")),r.a(".board-header-btn.perms-btn.js-change-vis",{href:"#",id:"permission-level"}),r.span(".board-header-btn-divider.js-collection-divider.hide"),r.a(".board-header-btn.hide.js-collection",{href:"#"},function(){return r.img(".board-header-btn-icon.icon-sm.collection-icon-img.dark-icon",{src:"https://a.trellocdn.com/images/collections/9dc0b9b8f7804172b734bbdc3ea7c382/collections-black.svg"}),r.img(".board-header-btn-icon.icon-sm.collection-icon-img.light-icon",{src:"https://a.trellocdn.com/images/collections/0e197fd2ec35638b8d79e7eee235497c/collections.svg"})})}),r.div(".board-header-btns.mod-right",function(){return r.a(".board-header-btn.board-header-btn-filter-indicator.hide.js-filter-cards-indicator",{href:"#"},function(){return r.icon("filter",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("filtering-is-on")}),r.icon("close",{class:"board-header-btn-icon-close js-filter-card-clear"})}),r.a(".board-header-btn.sub-btn.hide.js-board-header-subscribed",{href:"#"},function(){return r.icon("subscribe",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("subscribed")})}),r.a(".board-header-btn.calendar-btn.hide.js-calendar",{href:"#"},function(){return r.icon("calendar",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("calendar")})}),r.span(".js-plugin-header-btns"),r.a(".board-header-btn.mod-show-menu.js-show-sidebar",{href:"#"},function(){return r.icon("overflow-menu-horizontal",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("show-menu")})})})):(o={"board-header-btn":!0,"board-header-btn-name":!0,"js-rename-board":n,"no-edit":!n,"board-header-btn-name-with-org-logo":f},i={"board-header-btn":!0,"board-header-btn-org-name":!0,"js-open-org-menu":!0,"board-header-btn-without-icon":!a},r.a({href:"#",class:r.classify(o)},function(){return f&&r.img({class:"board-header-btn-name-org-logo",src:f,srcSet:f+" 1x, "+g+" 2x"}),r.span(".board-header-btn-text",{dir:"auto"},function(){return r.text(h)})}),m&&r.a({href:"/"+v,class:r.classify(i)},function(){return a&&r.icon("business-class",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text",function(){return r.text(m)})}),r.div(".board-header-btns.mod-left",function(){return d&&r.a(".board-header-btn.js-star-board",{href:"#",title:r.l("click-to-star-or-unstar-this-board-starred-boards-show-up-at-the-top-of-your-boards-list"),"aria-label":r.l("star-or-unstar-board")},function(){return r.icon("star",{class:"board-header-btn-icon"})}),r.a(".board-header-btn.hide.js-open-desc.js-fill-desc",{href:"#"},function(){return r.icon("description",{class:"board-header-btn-icon"})}),r.a(".board-header-btn.perms-btn.js-change-vis",{href:"#",id:"permission-level"}),r.a(".board-header-btn.hide.js-collection",{href:"#"},function(){return r.img(".board-header-btn-icon.icon-sm.collection-icon-img.dark-icon",{src:"https://a.trellocdn.com/images/collections/9dc0b9b8f7804172b734bbdc3ea7c382/collections-black.svg"}),r.img(".board-header-btn-icon.icon-sm.collection-icon-img.light-icon",{src:"https://a.trellocdn.com/images/collections/0e197fd2ec35638b8d79e7eee235497c/collections.svg"})})}),r.div(".board-header-btns.mod-right",function(){return r.a(".board-header-btn.board-header-btn-filter-indicator.hide.js-filter-cards-indicator",{href:"#"},function(){return r.icon("filter",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("filtering-is-on")}),r.icon("close",{class:"board-header-btn-icon-close js-filter-card-clear"})}),r.a(".board-header-btn.sub-btn.hide.js-board-header-subscribed",{href:"#"},function(){return r.icon("subscribe",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("subscribed")})}),r.a(".board-header-btn.calendar-btn.hide.js-calendar",{href:"#"},function(){return r.icon("calendar",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("calendar")})}),r.span(".js-plugin-header-btns"),r.a(".board-header-btn.mod-show-menu.js-show-sidebar",{href:"#"},function(){return r.icon("overflow-menu-horizontal",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("show-menu")})})}))})},{}],758:[function(e,t,n){var r;r=e(544)("board_header_permissions"),t.exports=r.renderable(function(e){var t,n,o;return n=e.permIconClass,o=e.permText,r.span({class:r.classify((t={"board-header-btn-icon":!0,"icon-sm":!0},t["icon-"+n]=!0,t))}),r.span(".board-header-btn-text",function(){return r.text(o)})})},{}],759:[function(e,t,n){var r;r=e(544)("board_header_warnings"),t.exports=r.renderable(function(e){var t,n,o,i;return t=e.canDismiss,i=e.warning,o=i.key,n=i.dismiss,r.div(".board-warning",function(){return r.format(o),t?r.span(".js-dismiss-warning.board-warning-close.icon-sm.icon-close",{"data-dismiss":n}):void 0})})},{}],760:[function(e,t,n){var r;r=e(544)("board_member_profile"),t.exports=function(){return r.div(".window-header.u-clearfix",function(){return r.span(".window-header-icon.icon-lg.icon-activity"),r.h2(".window-title",function(){return r.text(r.mustacheVar("fullName")),r.span(".quiet",{style:"margin-left: 3px"},function(){return r.format("username",{username:r.mustacheVar("username")})})})}),r.div(".window-main-col.window-main-col-full",function(){return r.div(".list-actions",function(){return r.p(".js-board-member-profile-no-activity",function(){return r.format("this-member-has-no-board-activity")})}),r.a(".show-more.js-more-actions",{href:"#"},function(){return r.format("load-more-activity")})})}},{}],761:[function(e,t,n){var r;r=e(544)("board_menu_activity"),t.exports=function(){return r.div(".segmented-control",function(e){return function(){return r.a(".segmented-control-item.js-show-all.js-control-option",{href:"#"},function(){return r.format("all")}),r.a(".segmented-control-item.js-show-comments.js-control-option",{href:"#"},function(){return r.format("comments")})}}(this)),r.div(".phenom-list.js-list-activity"),r.a(".show-more.js-more-actions",{href:"#"},function(e){return function(){return r.format("load-more-activity")}}(this))}},{}],762:[function(e,t,n){var r;r=e(544)("board_menu_commenting"),t.exports=function(){return r.li(function(){return r.a(".js-select",{href:"#",name:"disabled"},function(){return r.check(r.mustacheVar("comments_disabled"),"disabled"),r.span(".sub-name",function(){return r.format("no-one-is-allowed-to-comment")})})}),r.li(function(){return r.a(".js-select",{href:"#",name:"members"},function(){return r.check(r.mustacheVar("comments_members"),"members"),r.span(".sub-name",function(){return r.format("allow-admins-and-normal-members-to-comment")})})}),r.li(function(){return r.a({href:"#",class:"js-select"+r.mustacheBlockInverted("comments_showObservers",function(){return" disabled"}),name:"observers"},function(){return r.check(r.mustacheVar("comments_observers"),"members-and-observers"),r.span(".sub-name",function(){return r.format("allow-admins-normal-members-and-observers-to-comment")})})}),r.li(function(){return r.a({href:"#",class:"js-select"+r.mustacheBlockInverted("orgCanSee",function(){return" disabled"}),name:"org"},function(){return r.check(r.mustacheVar("comments_org"),"organization-members"),r.span(".sub-name",function(){return r.format("allow-admins-normal-members-observers-and-organization-members-to-comment")})})}),r.li(function(){return r.a({href:"#",class:"js-select"+r.mustacheBlockInverted("permissionLevel_public",function(){return" disabled"}),name:"public"},function(){return r.check(r.mustacheVar("comments_public"),"public-members"),r.span(".sub-name",function(){return r.format("allow-any-trello-member-to-comment")})})})}},{}],763:[function(e,t,n){var r;r=e(544)("board_menu_default"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d,p,h,m,f,g;return t=e.canAssign,a=e.canInviteMembers,s=e.canJoin,m=e.selfJoin,n=e.canChangeBackground,i=e.canEnablePowerUps,u=e.hasBCPowerUps,c=e.hasGoldPowerUps,f=e.useTabs,d=e.highlightAddMember,p=e.org,l=e.hasOrg,g=e.visibility,o=e.canChangeOrganization,r.p(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},function(){return r.format("file-too-large-10mb-limit")}),f&&r.div(".board-menu-visibility",function(){return r.div(".board-menu-visibility-organization",{class:r.classify({"board-menu-visibility-organization-editable":o,"js-change-organization":o})},function(){var e,t;return null!=p?(null!=p.logoHash&&(e=window.logoDomain+"/"+p.logoHash+"/30.png",t=window.logoDomain+"/"+p.logoHash+"/170.png",r.div(".board-menu-visibility-logo",function(){return r.img(".board-menu-visibility-logo-image",{src:e,srcSet:e+" 1x, "+t+" 2x"})})),r.div(".board-menu-visibility-display-name",{title:p.displayName},function(){return r.text(p.displayName)}),r.div(".board-menu-visibility-icon",function(){return p.hasEnterprise?r.icon("enterprise"):p.isBusinessClass?r.icon("business-class"):void 0})):r.div(".board-menu-visibility-display-name",function(){return l?r.format("team-board"):r.format("personal-board")})}),r.div(".board-menu-visibility-gap"),r.div(".board-menu-visibility-permission-level.quiet.js-change-visibility",function(){switch(g){case"public":return r.icon("public"),r.format("public");case"org":return r.icon("organization-visible"),r.format("team-visible");case"private":return r.icon("private"),r.format("private")}})}),f&&(a&&(r.div(".highlight-add-members.js-highlight-add-members",function(){return r.div(".highlight-add-members-close.js-close-highlight-add-members",function(){return r.icon("close")}),r.div(".highlight-add-members-description",function(){return r.format("put-more-brainpower-behind-your-project")}),r.a(".button-link.primary.js-open-manage-board-members",{href:"#"},function(){return r.icon("add-member","invite-ellipsis")})}),r.a(".button-link.mod-full.js-simple-add-members.js-open-manage-board-members",{href:"#"},function(){return r.icon("add-member","invite-ellipsis")})),s&&(r.a(".button-link.js-join-board",{href:"#",style:"margin-bottom: 0;"},function(){return r.icon("add-member","join-board")}),m&&r.p(".helper",{style:"margin-top: 8px;"},function(){return r.format("org-members-can-join-this-board")})),(a||s)&&r.div({style:"height: 16px"})),h=[{key:"members",jsClass:"js-list-members"},{key:"team-members",jsClass:"js-list-team-members"},{key:"invited-members",jsClass:"js-list-invited-members"},{key:"non-team-members",jsClass:"js-list-non-team-members"},{key:"observers",jsClass:"js-list-observers"},{key:"deactivated-members",jsClass:"js-deactivated-members"}],r.div(".js-all-members",function(){var e,n,o,i,a,s;for(f&&r.h3(function(){return r.format("members")}),s=[],e=0,i=h.length;i>e;e++)a=h[e],o=a.key,n=a.jsClass,s.push(r.div(".board-menu-member-section."+n,function(){return r.div(".board-menu-member-section-header.js-heading",function(){return r.format(o)}),r.div(".u-clearfix.js-list",{class:r.classify({"js-list-draggable-board-members":t})})}));return s}),f||(r.div(".board-members-extras-button.u-clearfix.js-show-extra-members-button",function(){return r.a(".quiet-button.js-show-extra-members",{href:"#"},function(){return r.format("show-hidden-members")})}),r.div(".board-members-extras-button.u-clearfix.js-hide-extra-members-button",function(){return r.a(".quiet-button.js-hide-extra-members",{href:"#"},function(){return r.format("show-fewer-members")})})),f||(a&&r.a(".button-link.mod-full.js-simple-add-members.js-open-manage-board-members",{href:"#"},function(){return r.icon("add-member","invite-ellipsis")}),s&&(r.a(".button-link.js-join-board",{href:"#",style:"margin-bottom: 0;"},function(){return r.icon("add-member","join-board")}),m&&r.p(".helper",{style:"margin-top: 8px;"},function(){return r.format("org-members-can-join-this-board")}))),f?void 0:(r.hr(),r.ul(".board-menu-navigation",function(){return n&&r.li(".board-menu-navigation-item.mod-background",function(){return r.a(".board-menu-navigation-item-link.js-change-background",{href:"#"},function(){return r.span(".board-menu-navigation-item-link-icon.js-fill-background-preview"),r.raw("&nbsp;"),r.format("change-background")})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-card-filter",{href:"#"},function(){return r.icon("filter","filter-cards",{class:"board-menu-navigation-item-link-icon"})})}),i&&r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-power-ups",{href:"#"},function(){return r.icon("power-up","power-ups",{class:"board-menu-navigation-item-link-icon"}),r.raw("&nbsp;"),u?r.icon("business-class",{class:"icon-business-class-color"}):c&&r.icon("trello-gold",{class:"icon-trello-gold-color"}),r.span(".board-menu-navigation-item-link-count.js-enabled-power-up-count"),r.span(".board-menu-navigation-item-new.js-power-up-new",function(){return r.format("new")}),r.span(".board-menu-navigation-item-link-warning.js-power-up-disable-timer"),r.div(".board-menu-navigation-item-link-summary",function(){return r.raw("&nbsp;"),r.format("power-ups-explanation")})})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-stickers",{href:"#"},function(){return r.icon("sticker","stickers",{class:"board-menu-navigation-item-link-icon"})})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-more",{href:"#"},function(){return r.icon("overflow-menu-horizontal","more",{class:"board-menu-navigation-item-link-icon"})})})}),r.hr(),r.a(".board-menu-section-header.js-open-activity",{href:"#"},function(){return r.span(".board-menu-section-header-icon.icon-lg.icon-activity"),r.span(".board-menu-section-header-title",function(){return r.format("activity")}),r.span(".board-menu-section-header-count.js-unread-activity-count")}),r.div(".js-menu-action-list"),r.a(".show-more.js-fill-activity-button.js-open-activity",{href:"#"}))})},{}],764:[function(e,t,n){var r;r=e(544)("board_menu_email"),t.exports=r.renderable(function(e){var t,n,o,i,a,s;return t=e.commentsEnabled,n=e.email,o=e.listName,i=e.lists,a=e.position,s=e.positionName,t?(r.label({for:"boardEmail"},function(){return r.format("your-email-address-for-this-board")}),r.input(".non-empty.js-autofocus",{id:"boardEmail",type:"text",name:"boardEmail",readonly:"readonly",placeholder:r.l("loading-ellipsis"),value:n,style:"margin: 4px 0 8px;"}),r.a(".quiet-button.js-generate-address",{href:"#"},function(){return r.format("generate-a-new-email-address")}),r.a(".quiet-button.js-send-address",{href:"#"},function(){return r.format("email-me-this-address")}),r.hr(),r.label(function(){return r.format("your-emailed-cards-appear-in-ellipsis")}),r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-twothirds",function(){return r.span(".label",function(){return r.format("list")}),r.span(".value.js-list-value",function(){return r.text(o)}),r.label(function(){return r.format("list")}),r.select(".js-select-list",function(){var e,t,n,o,a,s,u;for(s=[],e=0,n=i.length;n>e;e++)a=i[e],t=a.id,o=a.name,u=a.selected,s.push(r.optionSelected(u,{
value:t},function(){return r.text(o)}));return s})}),r.div(".button-link.setting.form-grid-child.form-grid-child-third",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value",function(){return r.text(s)}),r.label(function(){return r.format("position")}),r.select(".js-select-position",function(){return r.optionSelected("top"===a,{value:"top"},function(){return r.format("top")}),r.optionSelected("bottom"===a,{value:"bottom"},function(){return r.format("bottom")})})})}),r.hr(),r.p(".u-bottom.quiet",function(){return r.format("tip-dont-share-this-email-address-anyone-who-has-it-can-add-cards-as-you-when-composing-emails-the-card-title-goes-in-the-subject-and-the-card-description-in-the-body-more-email-formatting-tips")})):(r.p(function(){return r.format("requires-comments-enabled")}),void r.p(function(){return r.format("enabled-by-enabling-comments")}))})},{}],765:[function(e,t,n){var r;r=e(544)("board_menu_invitations"),t.exports=function(){return r.li(function(){return r.a(".js-select",{href:"#",name:"admins"},function(){return r.check(r.mustacheVar("invitations_admins"),"admins"),r.span(".sub-name",function(){return r.format("allow-only-admins-to-add-and-remove-others")})})}),r.li(function(){return r.a(".js-select",{href:"#",name:"members"},function(){return r.check(r.mustacheVar("invitations_members"),"all-members"),r.span(".sub-name",function(){return r.format("allow-members-and-admins-to-add-and-remove-others")})})})}},{}],766:[function(e,t,n){var r;r=e(544)("board_menu_more"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d;return l=e.shortUrl,i=e.editableByMember,s=e.isLoggedIn,n=e.canCloseOrLeave,t=e.canCloseBoard,o=e.canLeaveBoard,u=e.pLevelAltText,c=e.pLevelClass,a=e.helperText,d=e.showCollections,r.ul(".board-menu-navigation",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-settings",{href:"#"},function(){return r.icon("gear","settings",{class:"board-menu-navigation-item-link-icon"})})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-labels",{href:"#"},function(){return r.icon("label","labels",{class:"board-menu-navigation-item-link-icon"})})}),d&&r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-collections",{href:"#"},function(){return r.img(".board-menu-navigation-item-link-icon.collection-icon-img",{src:"https://a.trellocdn.com/images/collections/5ebebc0a66b74d9246ce03c8c59b3a61/collections-grey.svg"}),r.raw("&nbsp;"),r.format("collections")})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-archive",{href:"#"},function(){return r.icon("archive","archived-items",{class:"board-menu-navigation-item-link-icon"})})})}),r.hr(),r.ul(".board-menu-navigation",function(){return i&&r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-email",{href:"#"},function(){return r.icon("email","email-to-board-settings",{class:"board-menu-navigation-item-link-icon"})})}),s&&(r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-board-subscribe",{href:"#"},function(){return r.icon("subscribe",{class:"board-menu-navigation-item-link-icon"}),r.raw("&nbsp;"),r.span(".js-subscribed-state")})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-copy-board",{href:"#"},function(){return r.icon("board","copy-board",{class:"board-menu-navigation-item-link-icon"})})})),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-share",{href:"#"},function(){return r.icon("share","print-and-export",{class:"board-menu-navigation-item-link-icon"})})})}),n&&(r.hr(),r.ul(".board-menu-navigation",function(){return t&&r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-close-board",{href:"#"},function(){return r.raw("&nbsp;"),r.format("close-board-ellipsis")})}),o?r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-leave-board",{href:"#"},function(){return r.raw("&nbsp;"),r.format("leave-board-ellipsis")})}):void 0})),r.hr(),r.form(".u-gutter",function(){return r.label({for:"id-short-url"},function(){return r.format("link-to-this-board")}),r.input(".js-short-url",{type:"text",readonly:"readonly",id:"id-short-url",value:l}),r.p(".quiet",function(){return r.span({class:"icon-sm icon-"+c,title:u}),r.text(a)})})})},{}],767:[function(e,t,n){var r;r=e(544)("board_menu_more_activity_button"),t.exports=function(){return r.mustacheBlockInverted("hasCount",function(e){return function(){return r.format("view-all-activity-ellipsis")}}(this)),r.mustacheBlock("hasCount",function(e){return function(){return r.format("view-all-unread-activity-count-ellipsis",{count:r.mustacheVar("count")})}}(this))}},{}],768:[function(e,t,n){var r;r=e(544)("board_menu_settings"),t.exports=function(){return r.ul(".pop-over-list.inset",function(e){return function(){return r.li(function(){return r.a({class:"js-change-org"+r.mustacheBlockInverted("canChangeOrg",function(){return" disabled"}),href:"#"},function(){return r.mustacheBlock("setOrgNull",function(){return r.format("remove-from-organization")}),r.mustacheBlockInverted("setOrgNull",function(){return r.format("change-organization-ellipsis")}),r.mustacheBlock("orgDisplayName",function(){return r.span(".sub-name",function(){return r.text(r.mustacheVar("orgDisplayName"))})})})}),r.hr(),r.li(function(){return r.a({class:r.mustacheBlock("__own",function(){return"js-toggle-covers"})+r.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return r.mustacheBlockInverted("cardCovers",function(){return r.format("enable-card-cover-images")}),r.mustacheBlock("cardCovers",function(){return r.format("card-cover-images-enabled"),r.icon("check")}),r.span(".sub-name",function(){return r.format("show-images-on-front-of-cards")})})}),r.hr(),r.li(function(){return r.a({class:r.mustacheBlock("__own",function(){return"js-change-comments"})+r.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return r.format("commenting-permissions-ellipsis-commentsdisplay",{commentsDisplay:r.mustacheVar("commentsDisplay")})})}),r.li(function(){return r.a({class:r.mustacheBlock("__own",function(){return"js-change-add-members"})+r.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return r.format("invitations-permissions-ellipsis-invitationsdisplay",{invitationsDisplay:r.mustacheVar("invitationsDisplay")})})}),r.hr(),r.li(function(){return r.a({class:" "+r.mustacheBlock("__own",function(){return" js-toggle-org-mem-join "})+" "+r.mustacheBlockInverted("__own",function(){return" disabled "})+" "+r.mustacheBlockInverted("hasOrg",function(){return" disabled "})+" "+r.mustacheBlock("permissionLevel_private",function(){return" disabled "})+" ",href:"#"},function(){return r.check(r.mustacheVar("selfJoin_true"),"allow-org-members-to-join"),r.span(".sub-name",function(){return r.mustacheBlock("hasOrg",function(){return r.mustacheBlock("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-cant-be-private")})}),r.mustacheBlock("hasOrg",function(){return r.mustacheBlockInverted("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited")})}),r.mustacheBlockInverted("hasOrg",function(){return r.mustacheBlock("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org-and-the-board-cant-be-private")})}),r.mustacheBlockInverted("hasOrg",function(){return r.mustacheBlockInverted("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org")})})})})})}}(this))}},{}],769:[function(e,t,n){var r;r=e(544)("board_menu_subscribed_state"),t.exports=function(){return r.check(r.mustacheVar("subscribed"),"subscribe")}},{}],770:[function(e,t,n){var r;r=e(544)("board_menu_vis"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d,p,h,m,f,g,v,b,y;n=e.current,u=e.isNewBoard,t=e.canChange,c=e.mustChange,i=e.hasSuperAdmins,o=e.hasOrg,d=e.orgName,f=e.privateRestricted,p=e.orgRestricted,g=e.publicRestricted,c&&d&&r.p(".quiet",function(){return r.format("illegal org visibility",{orgName:d})}),l=i?"with super admins":o?"with organization":"without organization",m={private:{iconClass:"icon-private",restricted:f},org:{iconClass:"icon-organization",restricted:p,invalid:u&&!o},public:{iconClass:"icon-public",restricted:g}},y=[];for(h in m)v=m[h],b=v.restricted,s=v.invalid,a=v.iconClass,y.push(r.li(function(){var e;return e=b||s||!t,r.a(".js-select",{class:r.classify({"light-hover":!e,disabled:e}),href:"#",name:h},function(){return r.span(".icon-sm.vis-icon",{class:a},function(){}),r.check(n===h,h),r.span(".sub-name",function(){var e;return e=null!=d?{orgName:d}:{},r.format(["permission subtext",l,h],e),t&&b?(r.raw(" "),r.span(".error",function(){return u?r.format(["illegal visibility","create"]):r.format(["illegal visibility","change"])})):void 0})})}));return y})},{}],771:[function(e,t,n){var r;r=e(544)("board_new"),t.exports=function(){return r.form(function(){return r.label({for:"boardNewTitle"},function(){return r.format("title")}),r.input(".non-empty.js-autofocus",{id:"boardNewTitle",type:"text",name:"name",placeholder:r.mustacheVar("placeholder"),value:r.mustacheVar("name"),dir:"auto"}),r.div({class:r.mustacheBlock("hideOrg",function(){return"hide"})},function(){return r.div(".u-clearfix",function(){return r.label(".u-float-left",{style:"margin-right: 8px;"},function(){return r.format("organization")}),r.mustacheBlock("canAddToOrgs",function(){return r.a(".icon-sm.icon-information.dark-hover.js-helper-add-org",{href:"#"})})}),r.mustacheBlockInverted("canAddToOrgs",function(){return r.p(".quiet",{style:"margin-bottom: 16px;"},function(){return r.format("organization-whisk-n-tsk"),r.text(" "),r.a(".js-create-org",{href:"#"},function(){return r.format("create-an-organization")})})}),r.select({name:"org-id",class:r.mustacheBlockInverted("canAddToOrgs",function(){return"hide"})},function(){return r.option({value:""},function(){return r.format("none")}),r.mustacheBlock("orgs",function(){return r.optionSelected(r.mustacheVar("selectOrg"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("displayName"))})})})}),r.input({type:"hidden",name:"permissionLevel",value:r.mustacheVar("pLevel")}),r.p(".quiet.js-vis-display"),r.ul(".pop-over-list.js-vis-chooser.hide"),r.p(".error.u-bottom.js-no-valid-org-privs.u-clearfix.hide"),r.mustacheBlock("isCopyBoard",function(){return r.div(".check-div.u-clearfix",{style:"margin-top: 10px;"},function(){return r.input({type:"checkbox",id:"idKeepCards",name:"cards",checked:!0}),r.label({for:"idKeepCards"},function(){return r.format("keep-cards")})}),r.p(".quiet",function(){return r.format("activity-and-members-will-not-be-copied")}),r.mustacheBlock("willRemovePowerUps",function(){return r.p(".quiet",function(){return r.format("power-ups-will-not-be-copied")})})}),r.input(".primary.wide.js-submit.disabled",{type:"submit",value:r.l("create")})})}},{}],772:[function(e,t,n){var r;r=e(544)("board_new_vis"),t.exports=function(){return r.format("this-board-will-be-visdisplaytext",{visIconClass:r.mustacheVar("visIconClass"),visDisplayText:r.mustacheVar("visDisplayText")}),r.text(" "),r.a(".js-change-vis",{href:"#"},function(){return r.format("change")})}},{}],773:[function(e,t,n){var r;r=e(544)("board_observer_count"),t.exports=function(){return r.a(".quiet-button.js-show-observers",{href:"#",style:"margin: 4px 0 0;"},function(){return r.text(r.mustacheVar("localizedObserverCount"))})}},{}],774:[function(e,t,n){var r;r=e(544)("board_sidebar"),t.exports=r.renderable(function(e){var t,n,o;return o=e.useTabs,t=e.canAddPowerUps,n=e.canAddStickers,o&&r.div(".board-menu-tabs",function(){return r.div(".board-menu-tab.js-hide-sidebar",function(){return r.span(".icon-lg.icon-close")}),r.div(".board-menu-tab.js-open-members.js-tab",{"data-name":"default"},function(){return r.span(".icon-lg.icon-member"),r.span(".board-menu-tab-text",function(){return r.format("people")})}),r.div(".board-menu-tab.js-open-activity.js-tab",{"data-name":"activity"},function(){return r.span(".icon-lg.icon-activity"),r.span(".board-menu-tab-text",function(){return r.format("activity")})}),t&&r.div(".board-menu-tab.js-open-power-ups.js-tab",{"data-name":"powerUps"},function(){return r.span(".icon-lg.icon-power-up"),r.span(".board-menu-tab-text",function(){return r.format("power-ups")})}),r.div(".board-menu-tab.js-open-filter.js-tab",{"data-name":"filter"},function(){return r.span(".icon-lg.icon-filter"),r.span(".board-menu-tab-text",function(){return r.format("filter")})}),n&&r.div(".board-menu-tab.js-open-stickers.js-tab",{"data-name":"stickers"},function(){return r.span(".icon-lg.icon-sticker"),r.span(".board-menu-tab-text",function(){return r.format("stickers")})}),r.div(".board-menu-tab.js-open-settings.js-tab",{"data-name":"settingsAndMore"},function(){return r.span(".icon-lg.icon-gear"),r.span(".board-menu-tab-text",function(){return r.format("settings")})})}),r.div(".board-menu-tab-content",function(){return r.div(".board-menu-header.js-board-menu-title",function(){return r.div(".board-menu-header-content",function(){return r.a(".board-menu-header-back-button.icon-lg.icon-back.js-pop-widget-view",{href:"#",title:r.l("go-back")}),o&&r.div(".board-menu-header-icon.js-board-menu-title-icon"),r.h3(".board-menu-header-title.js-board-menu-title-text",{class:r.classify({"align-left":o})}),o&&r.div(".board-menu-header-extra.js-board-menu-title-extra"),o?void 0:r.a(".board-menu-header-close-button.icon-lg.icon-close.js-hide-sidebar",{href:"#",title:r.l("close-the-board-menu")})}),r.hr(".board-menu-header-divider")}),r.div(".board-menu-content.u-fancy-scrollbar.js-board-menu-content-wrapper")})})},{}],775:[function(e,t,n){var r;r=e(544)("boards_page_add_org_button"),t.exports=function(){return r.div(".boards-page-board-section.u-clearfix",function(){return r.a(".quiet-button.u-float-left.js-add-org-boards-page",{href:"#"},function(){return r.format("create-a-new-organization-ellipsis")})})}},{}],776:[function(e,t,n){var r;r=e(544)("boards_sidebar"),t.exports=r.renderable(function(){return r.div(".boards-drawer-header",function(){return r.h3(function(){return r.format("boards")})}),r.div(".board-drawer-content.u-fancy-scrollbar",function(){return r.input(".js-search-boards",{type:"text",placeholder:r.l("find-boards-by-name-ellipsis")}),r.div(".js-board-drawer-boards"),r.div(".js-board-drawer-buttons")})})},{}],777:[function(e,t,n){var r;r=e(544)("boards_sidebar"),t.exports=r.renderable(function(){return r.p(".quiet.u-text-align-center.hide",{style:"margin: 6px 4px 0 0; padding: 8px 12px;"},function(){return r.format("no-boards")}),r.div(".starred-sidebar-boards-list.js-starred-boards"),r.div(".js-recent-boards"),r.div(".js-all-boards")})},{}],778:[function(e,t,n){var r;r=e(544)("boards_sidebar"),t.exports=r.renderable(function(){return r.a(".quiet-button.js-add-board",{href:"#"},function(){return r.format("create-new-board-ellipsis")}),r.a(".quiet-button.hide.js-pin",{href:"#"},function(){return r.format("always-keep-this-menu-open")}),r.a(".quiet-button.hide.js-unpin",{href:"#"},function(){return r.format("don-t-keep-this-menu-open")}),r.a(".quiet-button.js-open-closed-boards",{href:"#"},function(){return r.format("see-closed-boards-ellipsis")})})},{}],779:[function(e,t,n){var r;r=e(544)("boards_sidebar"),t.exports=r.renderable(function(){return r.ul(".sidebar-boards-list.js-board-results")})},{}],780:[function(e,t,n){var r;r=e(544)("boards_sidebar"),t.exports=r.renderable(function(){return r.a(".quiet-button.js-add-board-with-name",{href:"#"})})},{}],781:[function(e,t,n){var r,o;o=e(544)("calendar_day"),r=function(){return o.div({class:"calendar-day js-expand-day "+o.mustacheBlock("isToday",function(){return"today"})},function(){return o.div(".day-header.u-clearfix.js-toggle-day",function(){return o.h3(".date",function(){return o.text(o.mustacheVar("date"))}),o.div(".quiet.num-cards",function(){return o.div(".day-cards-header")}),o.a(".close-button.icon-sm.icon-close.dark-hover",{href:"#"})}),o.div(".calendar-day-list.js-calendar-sortable.u-fancy-scrollbar"),o.mustacheBlock("__ed",function(){return o.a(".calendar-card-composer.quiet-button.js-open-card-composer",{href:"#"},function(){return o.format("add-a-card-ellipsis")})})})},t.exports=function(){return o.mustacheVar("monthView")?o.div(".calendar-day-spacer-div",r):r()}},{}],782:[function(e,t,n){var r;r=e(544)("calendar_day_list_header"),t.exports=function(){return r.span(".calendar-list-header",{name:r.mustacheVar("listID")},function(){return r.icon("list"),r.text(" "),r.text(r.mustacheVar("listName"))})}},{}],783:[function(e,t,n){var r;r=e(544)("calendar_month"),t.exports=function(){return r.table(".calendar-table")}},{}],784:[function(e,t,n){var r;r=e(544)("calendar_toolbar"),t.exports=function(){return r.div(".calendar-header",function(){return r.div(".calendar-header-toolbar",function(){return r.h2(".calendar-header-toolbar-title.js-calendar-header"),r.div(".calendar-header-toolbar-today",function(){return r.a(".button-link.today-button.js-today",{href:"#"},function(){return r.format("today")})}),r.div(".calendar-header-toolbar-nav",function(){return r.a(".button-link.js-left-arrow.left-arrow",{href:"#"},function(){return r.icon("up")}),r.a(".button-link.js-right-arrow.right-arrow",{href:"#"},function(){return r.icon("down")})}),r.div(".calendar-header-toolbar-close",function(){return r.a(".icon-lg.icon-close.dark-hover.js-close-calendar",{href:"#"})}),r.div(".calendar-header-toolbar-type",function(){return r.a(".button-link.js-week-view.week-button",{href:"#"},function(){return r.format("week")}),r.a(".button-link.js-month-view.month-button",{href:"#"},function(){return r.format("month")})})}),r.div(".days-of-week",function(){return r.mustacheBlock("days",function(){return r.div(".quiet",function(){return r.text(r.mustacheVar("."))})})})}),r.div(".calendar-content")}},{}],785:[function(e,t,n){var r;r=e(544)("calendar_week"),t.exports=function(){return r.div(".week-horizontal-canvas")}},{}],786:[function(e,t,n){var r;r=e(544)("cant_add_board_to_org"),t.exports=function(){return r.p(".quiet",function(){return r.mustacheBlock("isOrgAdmin",function(){return r.format("organization-displayname-does-not-allow-new-boards-you-can-change-this-on-the-organization-settings-page-by-clicking-on-board-creation-restrictions",{"organization.displayName":r.mustacheVar("organization.displayName"),orgSettingsUrl:r.mustacheVar("orgSettingsUrl")})}),r.mustacheBlockInverted("isOrgAdmin",function(){return r.format("organization-displayname-does-not-allow-new-boards-only-an-admin-of-the-organization-can-change-this-setting",{"organization.displayName":r.mustacheVar("organization.displayName")})})})}},{}],787:[function(e,t,n){var r;r=e(544)("card_attach_links"),t.exports=r.renderable(function(e){return r.div(".card-attach-link-list",function(){var t,n,o,i,a,s,u,c;for(s=[],o=0,i=e.length;i>o;o++)a=e[o],c=a.url,u=a.text,n=a.domain,t=a.attached,s.push(r.div(".card-attach-link-list-item",{class:r.classify({attached:t})},function(){return r.div(".card-attach-link-list-item-title",function(){return u?r.text(u):r.format("link to domain",{domain:n})}),r.div(".card-attach-link-list-item-url.quiet",function(){return r.text(c)}),t?r.div(".card-attach-link-list-item-attached.quiet",function(){return r.span(".icon-lg.icon-check")}):r.button(".card-attach-link-list-item-attach.js-attach",{"data-url":c,"data-text":u},function(){return r.format("attach")})}));return s})})},{}],788:[function(e,t,n){var r;r=e(544)("card_composer_inline"),t.exports=function(){return r.div(".list-card.js-composer",function(){return r.div(".list-card-details.u-clearfix",function(){return r.div(".list-card-labels.u-clearfix.js-list-card-composer-labels"),r.textarea(".list-card-composer-textarea.js-card-title",{dir:"auto"},function(){return r.text(r.mustacheVar("title"))}),r.div(".list-card-members.js-list-card-composer-members")})}),r.div(".cc-controls.u-clearfix",function(){return r.div(".cc-controls-section",function(){return r.input(".primary.confirm.mod-compact.js-add-card",{type:"submit",value:r.l("add")}),r.a(".icon-lg.icon-close.dark-hover.js-cancel",{href:"#"})}),r.div(".cc-controls-section.mod-right",function(){return r.a(".icon-lg.icon-overflow-menu-horizontal.dark-background-hover.js-cc-menu",{href:"#"})})})}},{}],789:[function(e,t,n){var r;r=e(544)("card_copy"),t.exports=function(){return r.mustacheBlock("loading",function(){return r.div(".spinner.loading.js-loading-card-actions")}),r.mustacheBlockInverted("loading",function(){return r.form(function(){return r.label(function(){return r.format("title")}),r.textarea(".js-autofocus",{name:"name",style:"margin-bottom: 12px;"},function(){return r.text(r.mustacheVar("name"))}),r.mustacheBlock("hasStuff",function(){return r.p({style:"margin-bottom: 4px;"},function(){return r.strong(function(){return r.format("keep-ellipsis")})}),r.mustacheBlock("hasChecklists",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepChecklists",type:"checkbox",name:"checklists",checked:!0}),r.label({for:"idKeepChecklists"},function(){return r.format("checklists-numchecklists",{numChecklists:r.mustacheVar("numChecklists")})})})}),r.mustacheBlock("hasLabels",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepLabels",type:"checkbox",name:"labels",checked:!0}),r.label({for:"idKeepLabels"},function(){return r.format("labels-numlabels",{numLabels:r.mustacheVar("numLabels")})})})}),r.mustacheBlock("hasMembers",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepMembers",type:"checkbox",name:"members",checked:!0}),r.label({for:"idKeepMembers"},function(){return r.format("members-nummembers",{numMembers:r.mustacheVar("numMembers")})})})}),r.mustacheBlock("hasAttachments",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepAttachments",type:"checkbox",name:"attachments",checked:!0}),r.label({for:"idKeepAttachments"},function(){return r.format("attachments-numattachments",{numAttachments:r.mustacheVar("numAttachments")})})})}),r.mustacheBlock("hasComments",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepComments",type:"checkbox",name:"comments",checked:!0}),r.label({for:"idKeepComments"},function(){return r.format("comments-numcomments",{numComments:r.mustacheVar("numComments")})})})}),r.mustacheBlock("hasStickers",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepStickers",type:"checkbox",name:"stickers",checked:!0}),r.label({for:"idKeepStickers"},function(){return r.format("stickers-numstickers",{numStickers:r.mustacheVar("numStickers")})})})})}),r.br(),r.label(function(){return r.format("copy-to-ellipsis")}),r.mustachePartial("move_card_controls"),r.input(".primary.wide.js-submit",{type:"submit",value:r.l("create-card")})})})}},{}],790:[function(e,t,n){var r,o,i,a;a=e(544)("card_detail"),r=e(805),o=e(867),i=e(88),t.exports=a.renderable(function(e){var t,n,i,s,u,c,l,d,p,h;return u=e.editable,d=e.name,t=e.canComment,l=e.me,c=e.loading,p=e.showActions,n=e.canSubscribe,i=e.canToggleDetails,s=e.commentAndSubscribe,h=e.subscribeOnComment,a.div(".window-cover.hide.js-card-cover-box.js-open-card-cover-in-viewer",function(){return a.div(".window-cover-stickers.js-display-stickers")}),a.div(".window-archive-banner.hide.js-archive-banner",function(){return a.span(".icon-lg.icon-archive.window-archive-banner-icon"),a.p(".window-archive-banner-text",function(){return a.format("this-card-is-archived")})}),a.div(".window-archive-banner.hide.js-archived-list-banner",function(){return a.span(".icon-lg.icon-archive.window-archive-banner-icon"),a.p(".window-archive-banner-text",function(){return a.format("this-card-is-in-an-archived-list")})}),a.div(".window-header",function(){var e;return a.span(".window-header-icon.icon-lg.icon-card"),e={"window-title":!0},a.div({class:a.classify(e)},function(){var e;return a.h2(".card-detail-title-assist.js-title-helper",{dir:"auto"}),e={"mod-card-back-title":!0,"js-card-detail-title-input":!0},a.textarea({class:a.classify(e),disabled:!u,dir:"auto"})}),a.div(".window-header-inline-content.hide.quiet.js-current-list"),a.div(".window-header-inline-content.hide.js-subscribed-indicator-header",function(){return a.icon("subscribe")})}),a.div(".window-main-col",function(){return a.div(".card-detail-data.u-gutter",function(){return a.div(".card-detail-item.u-clearfix.hide.js-card-detail-members",function(){return a.h3(".card-detail-item-header",function(){return a.format("members")}),a.div(".js-card-detail-members-list")}),a.div(".card-detail-item.card-detail-item-labels.u-clearfix.hide.js-card-detail-labels",function(){return a.h3(".card-detail-item-header",function(){return a.format("labels")}),a.div(".u-clearfix.js-card-detail-labels-list")}),a.div(".card-detail-item.hide.js-card-detail-due-date",function(){return a.h3(".card-detail-item-header",function(){return a.format("due-date")}),a.span(".card-detail-badge.card-detail-due-date-badge.js-card-detail-due-date-badge",function(){return a.span(".card-detail-badge-due-date-complete-box.js-card-detail-due-date-badge-complete",function(){return a.span(".icon-sm.icon-check.card-detail-badge-due-date-complete-icon")}),a.text(" "),a.span(".js-date-text.card-detail-due-date-text")})}),a.div(".card-detail-item.hide.js-card-detail-votes",function(){return a.h3(".card-detail-item-header",function(){return a.format("votes")}),a.a(".card-detail-badge.is-clickable.js-card-detail-votes-badge.js-show-votes",{href:"#"})}),a.div(".card-detail-item.hide.js-card-detail-age",function(){return a.h3(".card-detail-item-header",function(){return a.format("last-updated")}),a.div(".card-detail-badge.date.mod-last-updated.js-card-detail-age-badge")}),a.div(".js-plugin-badges"),a.div({class:a.classify({"card-detail-item":!0,"card-detail-item-block":!0,"u-clearfix":!0,editable:u}),attr:"desc"},function(){return a.h3(".card-detail-item-header.hide.js-show-with-desc",function(){return a.format("description")}),u&&a.a(".card-detail-item-header-edit.hide-on-edit.js-show-with-desc.js-edit-desc",{href:"#"},function(){return a.format("edit")}),a.div(".description-content.js-desc-content",function(){return a.div(".description-content-fade-button",function(){return a.span(".description-content-fade-button-text",function(){return a.format("show-full-description")})}),a.div(".current.markeddown.hide-on-edit.js-card-desc.js-show-with-desc.hide",{dir:"auto"}),u?(a.p(".u-bottom",function(){return a.a(".quiet-button.mod-with-image.hide-on-edit.js-edit-desc.js-hide-with-desc",{href:"#"},function(){return a.icon("description","edit-the-description-ellipsis",{class:"quiet-button-icon"})})}),a.div(".card-detail-edit.edit",function(){return a.a(".helper.js-format-help",{href:"#"},function(){return a.format("formatting-help")}),a.textarea(".field",{placeholder:a.l("add-a-more-detailed-description")})}),a.p(".edits-warning.quiet",function(){return a.format("you-have-unsaved-edits-on-this-field"),a.text(" "),a.a(".js-view-edits",{href:"#"},function(){return a.format("view-edits")}),a.text(" - "),a.a(".js-discard-edits",{href:"#"},function(){return a.format("discard")})}),a.p(".edits-error.error",function(){return a.format("edit-not-saved")})):void 0})})}),a.div(".js-plugin-sections"),a.div(".window-module.js-trello-attachments-section.trello-attachments-section.u-clearfix.hide",function(){return a.div(".window-module-title.window-module-title-no-divider",function(){return a.span(".window-module-title-icon.icon-lg.icon-board"),a.h3(".u-inline-block",function(){return a.format("trello attachments")})}),a.div(".u-gutter",function(){return a.div(".u-clearfix.js-trello-attachments-list"),a.p(".js-show-fewer-trello-attachments.hide",function(){return a.a(".quiet-button.js-view-some-trello-attachments",{href:"#"},function(){return a.format("show-fewer-trello-attachments")})}),a.p(".js-show-more-trello-attachments.hide",function(){return a.a(".quiet-button.js-view-all-trello-attachments",{href:"#"})}),u?a.p(function(){return a.a(".quiet-button.js-attach-trello-attachment",{href:"#"},function(){return a.format("add-trello-attachment-ellipsis")})}):void 0})}),a.div(".window-module.js-attachments-section.u-clearfix.hide",function(){return a.div(".window-module-title.window-module-title-no-divider",function(){return a.span(".window-module-title-icon.icon-lg.icon-attachment"),a.h3(".u-inline-block",function(){return a.format("attachments")})}),a.div(".u-gutter",function(){return a.div(".u-clearfix.js-attachment-list"),a.p(".js-show-fewer-attachments.hide",function(){return a.a(".quiet-button.js-view-some-attachments",{href:"#"},function(){return a.format("show-fewer-attachments")})}),a.p(".js-show-more-attachments.hide",function(){return a.a(".quiet-button.js-view-all-attachments",{href:"#"})}),u?a.p(function(){return a.a(".quiet-button.js-attach",{href:"#"},function(){return a.format("add-an-attachment-ellipsis")})}):void 0})}),a.div(".checklist-list.window-module.js-checklist-list.js-no-higher-edits"),t&&a.div(".window-module.add-comment-section",function(){return a.div(".window-module-title.window-module-title-no-divider",function(){return a.span(".window-module-title-icon.icon-lg.icon-comment"),a.h3(function(){return a.format("add-comment")}),a.span(".editing-members.js-editing-members.hide")}),a.div(".new-comment.js-new-comment",function(){return l&&a.div(".member.member-no-menu",function(){return o(l)}),a.form(function(){return a.div(".comment-frame",function(){return a.div(".comment-box",function(){return a.textarea(".comment-box-input.js-new-comment-input",{placeholder:a.l("write-a-comment-ellipsis"),tabindex:"1",dir:"auto"}),r(u)})}),a.div(".comment-controls.u-clearfix",function(){var e,t;return a.input(".primary.confirm.mod-no-top-bottom-margin.js-add-comment",{disabled:"disabled",tabindex:"3",type:"submit",value:a.l("save")}),s===!0?(t=h?".is-subscribed":"",e=a.l("subscribe-me-to-updates").length>58?".mod-left":"",a.span(".comment-subscribe.is-clickable"+t+e+".js-comment-subscribe",function(){return a.span(".comment-subscribe-box",function(){return a.span(".icon-sm.icon-check.comment-subscribe-icon")}),a.div(".comment-subscribe-description",function(){return a.format("subscribe-me-to-updates")})})):void 0})}),a.div(".comment-too-long-warning",function(){return a.p(function(){return a.format("your-comment-is-too-long-you-can-add-it-as-a-text-attachment-or-truncate-it")}),a.input(".primary.js-attach-comment",{type:"submit",value:a.l("add-as-an-attachment"),tabindex:4}),a.input(".js-truncate-comment",{type:"submit",value:a.l("truncate"),tabindex:5})})})}),a.div(".window-module",function(){return a.div(".window-module-title.window-module-title-no-divider",function(){return a.span(".window-module-title-icon.icon-lg.icon-activity"),a.h3(function(){return a.format("activity")}),i?a.div(".window-module-title-options",function(){return a.a(".quiet.hide.js-show-details",{href:"#"},function(){return a.format("show-details")}),a.a(".quiet.hide.js-hide-details",{href:"#"},function(){return a.format("hide-details")})}):void 0}),a.div(".js-list-actions"),c&&a.div(".spinner.loading.js-loading-card-actions"),a.p(".u-bottom",function(){return a.a(".show-more.hide.js-show-all-actions",{href:"#"},function(){return a.format("show-all-actions-ellipsis")})})})}),a.div(".window-sidebar",function(){return u&&a.div(".window-module.u-clearfix",function(){
return a.h3(function(){return a.format("add")}),a.div(".u-clearfix",function(){return a.a(".button-link.js-change-card-members",{href:"#"},function(){return a.icon("member","members")}),a.a(".button-link.js-edit-labels",{href:"#"},function(){return a.icon("label","labels")}),a.a(".button-link.js-add-checklist-menu",{href:"#"},function(){return a.icon("checklist","checklist")}),a.a(".button-link.js-add-due-date",{href:"#"},function(){return a.icon("clock","due-date")}),a.a(".button-link.js-attach",{href:"#"},function(){return a.icon("attachment","attachment")})})}),a.div(".js-plugin-buttons"),u?a.div(".window-module.other-actions.u-clearfix",function(){return a.h3(function(){return a.format("actions")}),a.div(".u-clearfix",function(){return a.a(".button-link.js-move-card",{href:"#"},function(){return a.icon("move","move")}),a.a(".button-link.js-copy-card",{href:"#"},function(){return a.icon("card","copy")}),a.div(".js-subscribe-sidebar-button"),a.div(".js-vote-sidebar-button"),a.hr(),a.a(".button-link.js-archive-card",{href:"#"},function(){return a.icon("archive","archive")}),a.a(".button-link.js-unarchive-card",{href:"#"},function(){return a.icon("refresh","send-to-board")}),a.a(".button-link.negate.hide.js-delete-card",{href:"#"},function(){return a.icon("remove","delete")})})}):p&&n&&a.div(".window-module.u-clearfix",function(){return a.h3(function(){return a.format("actions")}),a.div(".u-clearfix",function(){return a.div(".js-subscribe-sidebar-button"),a.div(".js-vote-sidebar-button")})}),a.div(".window-module.u-clearfix",function(){return a.p(".quiet.u-bottom",function(){return a.a(".quiet-button.js-more-menu",{href:"#"},function(){return a.format("share-and-more-ellipsis")})})})}),a.p(".dropzone",function(){return a.format("drop-files-to-upload")}),a.p(".dropzone-limited",function(){return a.format("too-many-attachments")})})},{}],791:[function(e,t,n){var r;r=e(544)("card_detail_add_button"),t.exports=r.renderable(function(e){var t,n;return n=e.klass,t={"card-detail-item-add-button":!0,"dark-hover":!0},t[n]=!0,r.a({class:r.classify(t)},function(){return r.icon("add")})})},{}],792:[function(e,t,n){var r;r=e(544)("card_detail_list"),t.exports=r.renderable(function(e){var t,n;return t=e.editable,n=e.listName,r.p(".u-inline-block.u-bottom",function(){return r.format("in-list"),r.text(" "),r.a({href:"#",class:r.classify({"js-open-move-from-header":t,disabled:!t})},function(){return r.text(n)})})})},{}],793:[function(e,t,n){var r;r=e(544)("card_detail_more_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-print",{href:"#"},function(){return r.format("print-ellipsis")})}),r.li(function(){return r.a(".js-export-json",{href:r.mustacheVar("jsonURL")},function(){return r.format("export-json")})})}),r.mustachePartial("meta")}},{}],794:[function(e,t,n){var r;r=e(544)("card_detail_subscribe"),t.exports=r.renderable(function(e){var t,n;return n=e.subscribed,t={"button-link":!0,"is-on":n,"js-subscribe":!n,"js-unsubscribe":n},r.a({class:r.classify(t),title:r.l("subscribe-to-the-card-to-get-notifications-when-something-changes")},function(){return r.icon("subscribe","subscribe"),r.span(".on",function(){return r.icon("check",{class:"light"})})})})},{}],795:[function(e,t,n){var r;r=e(544)("card_detail_vote_btn_sidebar"),t.exports=r.renderable(function(e){var t,n,o;return t=e.canVote,o=e.voted,t?(n={"button-link":!0,"is-on":o,"js-unvote":o,"js-vote":!o},r.a({class:r.classify(n)},function(){return r.icon("vote","vote"),r.span(".on",function(){return r.icon("check",{class:"light"})})})):void 0})},{}],796:[function(e,t,n){var r,o,i;i=e(544)("card_in_list"),r=e(854),o=e(888),t.exports=i.renderable(function(e){var t,n,a,s,u,c,l,d;return n=e.hasStickers,s=e.labels,l=e.quickEdit,a=e.idShort,c=e.name,u=e.members,d=e.showEditor,t=e.badgesHTML,i.div(".list-card-cover.js-card-cover"),d&&i.icon("edit",{class:"list-card-operation dark-hover js-open-quick-card-editor js-card-menu"}),i.div(".list-card-stickers-area",{class:i.classify({hide:!n})},function(){return i.div(".stickers.js-card-stickers")}),i.div(".list-card-details",function(){return i.div(".list-card-labels.js-card-labels",function(){var e,t,n,o;for(o=[],e=0,n=s.length;n>e;e++)t=s[e],o.push(r({name:t.name,color:t.color,extraClasses:["mod-card-front"]}));return o}),l?i.textarea(".list-card-edit-title.js-edit-card-title",{dir:"auto"},function(){return i.text(c)}):i.span(".list-card-title.js-card-name",{dir:"auto"},function(){return a&&i.span(".card-short-id.hide",function(){return i.format("idshort",{idShort:a})}),i.text(c)}),i.div(".badges",function(){return i.span(".js-badges",function(){return i.raw(t)}),i.span(".js-plugin-badges")}),i.div(".list-card-members.js-list-card-members",function(){var e,t,n,r;for(r=[],e=0,t=u.length;t>e;e++)n=u[e],r.push(o(n));return r})}),i.p(".list-card-dropzone",function(){return i.format("drop-files-to-upload")}),i.p(".list-card-dropzone-limited",function(){return i.format("too-many-attachments")})})},{}],797:[function(e,t,n){var r;r=e(544)("card_menu_meta"),t.exports=function(){return r.hr(),r.div(function(){return r.div(function(){return r.label(function(){return r.format("link-to-this-card"),r.text(" "),r.icon(r.mustacheVar("pLevelClass"),{title:r.mustacheVar("pLevelAltText")})}),r.input(".js-short-url.js-autofocus",{type:"text",readonly:"readonly",value:r.mustacheVar("shortUrl")})}),r.div(function(){return r.label(function(){return r.format("embed-this-card")}),r.input(".js-embed",{type:"text",readonly:"readonly",value:r.mustacheVar("embed")})}),r.mustacheBlock("email",function(){return r.mustacheBlock("__ed",function(){return r.div(function(){return r.label(function(){return r.format("email-for-this-card")}),r.input(".js-email",{type:"text",readonly:"readonly",value:r.mustacheVar("email")}),r.p(".quiet",{stlye:"margin: 0 4px;"},function(){return r.l("emails-sent-to-this-address-will-appear-as-a-comment-by-you-on-the-card")})})})}),r.hr(),r.div(".quiet",function(){return r.mustacheBlock("idShort",function(){return r.p({style:"display: inline-block; margin: 0 8px 0 0;"},function(){return r.format("card-idshort",{idShort:r.mustacheVar("idShort")}),r.text(" ")})}),r.p({style:"display: inline-block; margin: 0;"},function(){return r.mustacheBlock("dateAdded",function(){return r.format("added",{dateAdded:r.mustacheVar("dateAdded")})}),r.mustacheBlock("__ed",function(){return r.text(" - "),r.a(".js-delete",{href:"#"},function(){return r.format("delete")})})})})})}},{}],798:[function(e,t,n){var r;r=e(544)("card_title_on_card_front"),t.exports=function(){return r.mustacheBlock("idShort",function(){return r.span(".card-short-id.hide",function(){return r.format("idshort",{idShort:r.mustacheVar("idShort")})})}),r.text(r.mustacheVar("name"))}},{}],799:[function(e,t,n){var r;r=e(544)("change_org_vis"),t.exports=function(){return r.li(function(){return r.a(".highlight-icon.js-select-members",{href:"#"},function(){return r.icon("private","private"),r.mustacheBlock("permissionLevel_private",function(){return r.icon("check")}),r.span(".sub-name",function(){return r.text(r.mustacheVar("privateText"))})})}),r.li(function(){return r.a(".highlight-icon.js-select-public",{href:"#"},function(){return r.icon("public","public"),r.mustacheBlock("permissionLevel_public",function(){return r.icon("check")}),r.span(".sub-name",function(){return r.text(r.mustacheVar("publicText"))})})})}},{}],800:[function(e,t,n){var r;r=e(544)("checklist"),t.exports=function(){return r.div({class:"window-module-title window-module-title-no-divider u-clearfix"+r.mustacheBlock("__ed",function(){return" ed grab"})},function(){return r.span(".window-module-title-icon.icon-lg.icon-checklist"),r.mustacheBlock("__ed",function(){return r.div(".editable.non-empty.checklist-title",{attr:"name"},function(){return r.h3(".current.hide-on-edit",{dir:"auto"},function(){return r.text(r.mustacheVar("name"))}),r.div(".window-module-title-options",function(){return r.mustacheBlock("__ed",function(){return r.a(".hide.hide-on-edit.quiet.js-show-checked-items",{href:"#",style:"margin: 0 8px;"}),r.a(".hide.hide-on-edit.quiet.js-hide-checked-items",{href:"#",style:"margin: 0 8px;"},function(){return r.format("hide-completed-items")}),r.a(".hide-on-edit.quiet.js-confirm-delete",{href:"#"},function(){return r.format("delete-ellipsis")})})}),r.div(".edit.edit-heavy",function(){return r.textarea(".field.full.single-line",{dir:"auto"})}),r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})})})}),r.mustacheBlockInverted("__ed",function(){return r.h3(function(){return r.text(r.mustacheVar("name"))})})}),r.div(".checklist-progress",function(){return r.span(".checklist-progress-percentage.js-checklist-progress-percent",function(){return r.text("0%")}),r.div(".checklist-progress-bar",function(){return r.div(".checklist-progress-bar-current.js-checklist-progress-bar")}),r.span(".checklist-completed-text.hide.quiet.js-completed-message",function(){return r.format("everything-in-this-checklist-is-complete")})}),r.div(".checklist-items-list.js-checklist-items-list.js-no-higher-edits"),r.mustacheBlock("__ed",function(){return r.div(".checklist-new-item.u-gutter.js-new-checklist-item",function(){return r.textarea(".checklist-new-item-text.js-new-checklist-item-input",{placeholder:r.l("add-an-item-ellipsis")}),r.div(".checklist-add-controls.u-clearfix",function(){return r.input(".primary.confirm.mod-submit-edit.js-add-checklist-item",{type:"submit",value:r.l("add")}),r.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-checklist-item",{href:"#"}),r.a(".checklist-add-controls-option.options-menu.dark-hover.js-open-emoji-selector",{href:"#"},function(){return r.span(".icon-sm.icon-emoji")}),r.a(".checklist-add-controls-option.options-menu.dark-hover.js-open-mention-selector",{href:"#"},function(){return r.span(".icon-sm.icon-mention")})})})})}},{}],801:[function(e,t,n){var r;r=e(544)("checklist_add_menu"),t.exports=r.renderable(function(e){var t;return t=e.checklistCards,r.form(function(){return r.label({for:"id-checklist"},function(){return r.format("title")}),r.input(".js-checklist-title.js-autofocus",{type:"text",id:"id-checklist",value:r.l("default-checklist-name"),"data-default":r.l("default-checklist-name"),dir:"auto"}),t.length>0&&r.span(function(){return r.label({for:"js-checklist-copy-source"},function(){return r.format("copy-items-from-ellipsis")}),r.select(".js-checklist-copy-source",function(){var e,n,o,i,a,s;for(r.option({value:"",selected:!0},function(){return r.format("none")}),s=[],n=0,o=t.length;o>n;n++)a=t[n],i=a.name,e=a.checklists,s.push(r.optgroup({label:i},function(){var t,n,o,a,s;for(s=[],n=0,o=e.length;o>n;n++)a=e[n],t=a.id,i=a.name,s.push(r.option({value:t},function(){return r.text(i)}));return s}));return s})}),r.input(".primary.wide.confirm.js-add-checklist",{type:"submit",value:r.l("add")})})})},{}],802:[function(e,t,n){var r;r=e(544)("checklist_item"),t.exports=function(){return r.div({class:"checklist-item-checkbox "+r.mustacheBlock("__ed",function(){return"enabled js-toggle-checklist-item"})},function(){return r.icon("check",{class:"checklist-item-checkbox-check"})}),r.div({class:"checklist-item-details non-empty js-checkitem "+r.mustacheBlock("__ed",function(){return"editable"}),attr:"name"},function(){return r.div(".checklist-item-row.js-checkitem-row.current.hide-on-edit",function(){return r.span(".checklist-item-details-text.markeddown.js-checkitem-name"),r.mustacheBlock("__ed",function(){return r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})})})}),r.mustacheBlock("__ed",function(){return r.div(".checklist-item-menu-wrapper.hide-on-edit",function(){return r.div(".checklist-item-menu.js-open-menu",function(){return r.span(".icon-sm.icon-overflow-menu-horizontal")})}),r.div(".edit.options-menu",function(){return r.textarea(".field.full.single-line.js-checkitem-input",{type:"text"})})})})}},{}],803:[function(e,t,n){var r;r=e(544)("closed_boards"),t.exports=function(){return r.div(".window-header",function(){return r.span(".window-header-icon.icon-lg.icon-archive"),r.h2(".window-title",function(){return r.format("closed-boards")})}),r.div(".window-main-col",function(){return r.mustacheBlockInverted("empty",function(){return r.div(".window-module.u-clearfix",function(){return r.ul(".archive-list.u-gutter.js-archive-items")})}),r.mustacheBlock("empty",function(){return r.p(".empty-list",function(){return r.format("no-boards-have-been-closed")})})}),r.div(".window-sidebar",function(){return r.p(".helper",function(){return r.format("you-have-to-have-been-a-board-admin-to-re-open-or-delete-a-closed-board")})})}},{}],804:[function(e,t,n){var r;r=e(544)("comment_edit_controls"),t.exports=function(){return r.div(".edit-controls.u-clearfix",function(){return r.div(".js-too-long-warning.hide",function(){return r.p(function(){return r.format("your-comment-is-too-long")})}),r.div(".js-is-empty-warning.hide",function(){return r.p(function(){return r.format("must-have-at-least-one-character")})}),r.input(".primary.confirm.js-save-edit",{type:"submit",value:r.l("save"),tabindex:"2"}),r.a(".js-discard-comment-edits.icon-lg.icon-close.dark-hover.cancel",{href:"#"})})}},{}],805:[function(e,t,n){var r;r=e(544)("comment_options"),t.exports=r.renderable(function(e){return r.div(".comment-box-options",function(){return e&&r.a(".comment-box-options-item.js-comment-add-attachment",{href:"#",title:r.l("add-an-attachment-ellipsis")},function(){return r.icon("attachment")}),r.a(".comment-box-options-item.js-comment-mention-member",{href:"#",title:r.l("mention-a-member-ellipsis")},function(){return r.icon("mention")}),r.a(".comment-box-options-item.js-comment-add-emoji",{href:"#",title:r.l("add-emoji-ellipsis")},function(){return r.icon("emoji")}),r.a(".comment-box-options-item.js-comment-add-card",{href:"#",title:r.l("add-card-ellipsis")},function(){return r.icon("card")})})})},{}],806:[function(e,t,n){var r;r=e(544)("confirm"),t.exports=function(){return r.p(function(){return r.mustacheVar("html")?r.raw(r.mustacheVar("html")):r.text(r.mustacheVar("text"))}),r.input(".js-confirm.full",{type:"submit",class:r.mustacheVar("confirmBtnClass"),value:r.mustacheVar("confirmText")}),r.mustacheBlock("cancelText",function(){return r.input(".js-cancel.full",{type:"submit",value:r.mustacheVar("cancelText")})})}},{}],807:[function(e,t,n){var r;r=e(544)("confirm_merge"),t.exports=function(){return r.p(function(){return r.text(r.mustacheVar("text"))}),r.ul(".pop-over-member-list.js-member"),r.input(".js-confirm.full",{type:"submit",value:r.mustacheVar("confirmText")})}},{}],808:[function(e,t,n){var r;r=e(544)("connect_failed"),t.exports=function(){return r.text(r.mustacheVar("msg")),r.br(),r.a(".app-alert-item-button",{href:"#",onclick:"window.location.reload()"},function(){return r.format("reload-page")})}},{}],809:[function(e,t,n){var r;r=e(544)("crop_photo"),t.exports=function(){return r.img(".crop-image"),r.button(".primary.js-done",function(){return r.format("looks-good")}),r.button(".js-back",function(){return r.format("try-again-ellipsis")})}},{}],810:[function(e,t,n){var r;r=e(544)("date_picker"),t.exports=r.renderable(function(e){var t,n,o;return o=e.upsellEnabled,t=e.canChangePowerUps,n=e.canEnableAdditionalPowerUps,r.div(".datepicker-select.u-clearfix",function(){return r.div(".datepicker-select-date",function(){return r.label(".datepicker-select-label",function(){return r.format("date"),r.input(".datepicker-select-input.js-dpicker-date-input.js-autofocus",{type:"text",placeholder:r.l("enter-date"),tabindex:101})})}),r.div(".datepicker-select-time",function(){return r.label(".datepicker-select-label",function(){return r.format("time"),r.input(".datepicker-select-input.js-dpicker-time-input",{type:"text",placeholder:r.l("enter-time"),tabindex:102})})})}),r.div(".pickers.js-dpicker-cal"),r.div(".datepicker-confirm-btns",function(){return r.input(".primary.wide.confirm",{type:"submit",value:r.l("save"),tabindex:103}),r.button(".negate.remove-date.js-remove-date",{type:"button",tabindex:104},function(){return r.format("remove")})}),r.div(".js-enable-cal.hide",function(){return r.hr(),n?(r.p(function(){return r.a(".quiet-button.mod-with-image.js-enable-calendar-powerup",{href:"#"},function(){return r.icon("power-up","enable-the-calendar-power-up",{class:"quiet-button-icon"})})}),r.p(".u-bottom.quiet",function(){return r.format("you-ll-get-a-calendar-view-of-your-cards-and-an-ical-feed-woo")})):o?r.p(".u-bottom.quiet",function(){return r.format("upgrade-to-business-class-to-enable-the-calendar-power-up"),r.text(" "),r.format("you-ll-get-a-calendar-view-of-your-cards-and-an-ical-feed-woo")}):void 0}),r.div(".js-cal-enabled.hide",function(){return r.hr(),r.p(".helper",function(){return t?r.format("click-the-calendar-button-in-the-board-header-to-open-the-calendar-to-change-calendar-settings-click-power-ups-in-the-board-menu"):r.format("click-the-calendar-button-in-the-board-header-to-open-the-calendar")})})})},{}],811:[function(e,t,n){var r;r=e(544)("dialog_close_button"),t.exports=function(){return r.a(".icon-lg.icon-close.dialog-close-button.js-close-window",{href:"#"})}},{}],812:[function(e,t,n){var r;r=e(544)("edit_controls"),t.exports=function(){return r.div(".edit-controls.u-clearfix",function(){return r.input(".primary.confirm.mod-submit-edit.js-save-edit",{type:"submit",value:r.l("save")}),r.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-edit",{href:"#"}),r.a(".option.delete.js-delete-item",{href:"#"},function(){return r.format("delete")}),r.a(".option.options-menu.dark-hover.js-open-menu",{href:"#"},function(){return r.span(".icon-sm.icon-overflow-menu-horizontal")}),r.a(".option.options-menu.dark-hover.js-open-emoji-selector",{href:"#"},function(){return r.span(".icon-sm.icon-emoji")}),r.a(".option.options-menu.dark-hover.js-open-mention-selector",{href:"#"},function(){return r.span(".icon-sm.icon-mention")})})}},{}],813:[function(e,t,n){var r;r=e(544)(),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d;for(u=e.members,l=[],o=0,s=u.length;s>o;o++)c=u[o],t=c.avatarHash,n=c.fullName,d=c.username,a=c.initials,i=c.icon,l.push(r.span(".edit-in-progress",function(){return r.span(".inline-member",function(){var e;return e=n+" ("+d+")",t?r.img(".inline-member-av",{src:[window.avatarDomain,t,"30.png"].join("/"),alt:e,title:e}):r.span(".quiet.initials",{title:e},function(){return r.text(a)})}),i?r.icon(i,{class:"icon"}):void 0}));return l})},{}],814:[function(e,t,n){var r;r=e(544)("embedly"),t.exports=function(){return r.div({class:"embed embed-"+r.mustacheVar("type")+" embed-provider-"+r.mustacheVar("provider_name")},function(){return r.mustacheBlockInverted("type_photo",function(){return r.mustacheBlock("requireHttps",function(){return r.raw(r.mustacheVar("htmlHttps"))}),r.mustacheBlockInverted("requireHttps",function(){return r.raw(r.mustacheVar("html"))})}),r.mustacheBlock("type_photo",function(){return r.a({href:r.mustacheVar("originalUrl"),target:"_blank"},function(){return r.img({src:r.mustacheVar("url")})})})})}},{}],815:[function(e,t,n){var r;r=e(544)("empty_list"),t.exports=r.renderable(function(e){var t,n,o;return t=e.classes,o=e.style,n=e.message,r.p({class:"empty-list "+t,style:o},function(){return r.text(n)})})},{}],816:[function(e,t,n){var r;r=e(544)("enterprise_detail"),t.exports=r.renderable(function(e){var t,n;return t=e.displayName,n=e.enforcesSso,r.div(".tabbed-pane-header",function(){return r.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return r.a({class:r.classify({"tabbed-pane-header-image":!0,"profile-image":!0}),href:"#"},function(){return r.span(".profile-image-icon.icon-lg.icon-enterprise")}),r.div(".tabbed-pane-header-details",function(){return r.div(".tabbed-pane-header-details-name",function(){return r.h1(".u-inline",function(){return r.text(t)}),r.span(".window-title-extra",function(){return r.icon("enterprise"),r.format("enterprise")}),r.span(".window-title-extra",function(){return n?(r.icon("private"),r.format("sso-enforced")):(r.icon("public"),r.format("not-sso-enforced"))})}),r.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return r.format("enterprise-admin")})})}),r.div(".tabbed-pane-nav")}),r.div(".tabbed-pane-main-col.u-clearfix",function(){return r.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return r.span(".tabbed-pane-main-col-loading-spinner.spinner")}),r.div({class:r.classify({"tabbed-pane-main-col-wrapper":!0,"js-content":!0,"is-full-width":!0})})})})},{}],817:[function(e,t,n){var r,o,i,a,s=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(805),o=e("react"),a=e(541)("entity"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.displayName="Entity",t.prototype.render=a.renderable(function(){var e,t,n,r,o,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,E;switch(w=this.props,c=w.entity,o=w.context,g=w.options,S=c.type,k=c.text,S){case"text":case"list":case"checklist":case"plugin":case"date":return a.span(function(){return a.text(k)});case"card":return T=c.url,a.a(".action-card",{href:T},function(){return a.text(k)});case"board":return T=c.url,a.a({href:T},function(){return a.text(k)});case"organization":return T=c.url,a.a({href:T},function(){return a.text(k||a.l("an-organization"))});case"enterprise":return T=c.url,d=g.isEnterpriseAdmin,d?a.a({href:T},function(){return a.text(k)}):a.span(function(){return a.text(k)});case"checkItem":return f=c.nameHtml,f?a.raw(f):a.text(k);case"comment":return C=c.textHtml,t=o.canEdit,j=g.truncateComment,a.div(".comment-container",function(){var e;return e={"action-comment":!0,markeddown:!0,"js-comment":!0,"is-truncated":j},a.div({class:a.classify(e)},function(){return j&&a.div(".action-comment-fade-button.js-expand-comment"),a.div(".current-comment.js-friendly-links.js-open-card",function(){return a.raw(C)}),t?a.div(".comment-box",function(){return a.textarea(".comment-box-input.js-text",{tabindex:"1"},function(){return a.text(k)}),i()}):void 0})});case"label":return r=c.color,n={"card-label":!0},n[r+"-label"]=!0,x=k||r+" label (default)",a.span({class:a.classify(n),title:x},function(){return k?a.text(k):a.raw("&nbsp;")});case"attachment":return m=c.link,T=c.url,h=c.isTrelloAttachment,p=c.isTrello,l=c.id,m?h?a.a(".js-open-attachment-viewer",{href:T,"data-idattachment":l},function(){return a.text(k)}):p?a.a(".js-friendly-links",{href:T},function(){return a.text(k)}):a.a(".js-friendly-links",{href:T,target:"_blank"},function(){return a.text(k)}):a.span(".attachment-deleted",function(){return a.text(k)});case"attachmentPreview":return y=c.previewUrlForRes,v=c.originalUrl,l=c.id,_=g.showCompactAttachmentPreview,y?(n={"js-open-attachment-viewer":!_,"js-open-card":_,"js-friendly-links":!0},b={"attachment-image-preview":!0,"mod-compact-image-preview":_},a.a({class:a.classify(n),href:v,target:"_blank","data-idattachment":l},function(){return a.img({class:a.classify(b),src:y})})):a.raw("&nbsp;");case"member":return l=c.id,e=c.avatarHash,E=c.username,a.span(".inline-member.js-show-mem-menu",{"data-idmember":l},function(){return e&&(x=k+" ("+E+")",a.img(".inline-member-av",{src:[window.avatarDomain,e,"30.png"].join("/"),alt:x,title:x})),a.span(".u-font-weight-bold",function(){return a.text(k)})});case"relDate":return u=c.date,s=c.current,a.span(".rel-date",{dt:u,text:k},function(){return a.text(s)});case"plugin":return a.text(a.mustacheVar("text"))}}),t}(o.Component)},{}],818:[function(e,t,n){var r,o;o=e(544)("entity"),r=e(805),t.exports=o.renderable(function(e,t,n){var i,a,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S;switch(x=e.type,w=e.text,x){case"text":case"list":case"checklist":case"plugin":case"date":return o.text(w);case"card":return j=e.url,o.a(".action-card",{href:j},function(){return o.text(w)});case"board":return j=e.url,o.a({href:j},function(){return o.text(w)});case"organization":return j=e.url,o.a({href:j},w||o.l("an-organization"));case"checkItem":return f=e.nameHtml,f?o.raw(f):o.text(w);case"comment":return _=e.textHtml,a=t.canEdit,C=n.truncateComment,o.div(".comment-container",function(){var e;return e={"action-comment":!0,markeddown:!0,"js-comment":!0,"is-truncated":C},o.div({class:o.classify(e),dir:"auto"},function(){return C&&o.div(".action-comment-fade-button.js-expand-comment"),o.div(".current-comment.js-friendly-links.js-open-card",function(){return o.raw(_)}),a?o.div(".comment-box",function(){return o.textarea(".comment-box-input.js-text",{tabindex:"1"},function(){return o.text(w)}),r(!0)}):void 0})});case"label":return u=e.color,s={"card-label":!0},s[u+"-label"]=!0,k=w||u+" label (default)",o.span({class:o.classify(s),title:k},function(){return w?o.text(w):o.raw("&nbsp;")});case"attachment":return m=e.link,j=e.url,h=e.isTrelloAttachment,p=e.isTrello,d=e.id,m?h?o.a(".js-open-attachment-viewer",{href:j,"data-idattachment":d},function(){return o.text(w)}):p?o.a(".js-friendly-links",{href:j},function(){return o.text(w)}):o.a(".js-friendly-links",{href:j,target:"_blank"},function(){return o.text(w)}):o.span(".attachment-deleted",function(){return o.text(w)});case"attachmentPreview":return b=e.previewUrlForRes,g=e.originalUrl,d=e.id,y=n.showCompactAttachmentPreview,b?(s={"js-open-attachment-viewer":!y,"js-open-card":y,"js-friendly-links":!0},v={"attachment-image-preview":!0,"mod-compact-image-preview":y},o.a({class:o.classify(s),href:g,target:"_blank","data-idattachment":d},function(){return o.img({class:o.classify(v),src:b})})):o.raw("&nbsp;");case"member":return d=e.id,i=e.avatarHash,S=e.username,o.span(".inline-member.js-show-mem-menu",{idMember:d},function(){return i&&(k=w+" ("+S+")",o.img(".inline-member-av",{src:[window.avatarDomain,i,"30.png"].join("/"),alt:k,title:k})),o.span(".u-font-weight-bold",function(){return o.text(w)})});case"relDate":return l=e.date,c=e.current,o.span(".rel-date",{dt:l,text:w},function(){return o.text(c)});case"plugin":return o.text(o.mustacheVar("text"))}})},{}],819:[function(e,t,n){var r;r=e(544)("error"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d,p;switch(s=e.isLoggedIn,p=e.url,n=e.errorType,u=e.modelType,t=e.email,c=e.nextActionUrl,d=function(e){return r.div(".big-message.with-picture.quiet",function(){return r.img({src:"https://a.trellocdn.com/images/656dc3a1db8d11cde974d7402898fb75/TacoBouncer.png",width:"459",height:"238"}),r.h1(function(){return r.format("roooooo-are-you")}),r.p(function(){return r.format(e)}),r.div(".callout",function(){return r.ol(function(){return r.li(function(){return r.format("check-your-email-at-email",{email:t})}),r.li(function(){return r.format("look-for-an-email-with-the-subject-trello-account-confirmation")}),r.li(function(){return r.format("click-on-the-confirmation-link-done")})})}),r.p(function(){return r.format("dont-see-anything-from-us"),r.raw(" "),r.a(".quiet.js-resend-confirmation-email",{href:"#"},function(){return r.format("resend-confirmation-link")})})})},l=function(e,t,n){return r.div(".big-message.quiet",function(){r.h1(function(){return r.format(e)}),s?r.p(function(){return r.format(n)}):r.p(function(){return r.format(t)})})},a=function(e){return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format(e)}),r.p(function(){return r.format("ask-for-a-new-link")})})},i=function(e,t,n){return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format(e)}),r.p(function(){return r.a(".quiet",{href:n},function(){return r.format(t)})})})},o=function(e){return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format(e)})})},n){case"notFound":return l("page-not-found","this-page-may-be-private-you-may-be-able-to-view-it-by-logging-in","this-page-may-be-private-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"boardNotFound":return l("board-not-found","this-board-may-be-private-you-may-be-able-to-view-it-by-logging-in","this-board-may-be-private-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"cardNotFound":return l("card-not-found","this-card-may-be-on-a-private-board-you-may-be-able-to-view-it-by-logging-in","this-card-may-be-on-a-private-board-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"boardInvitationNotFound":return a("board-invitation-not-valid");case"orgInvitationNotFound":return a("org-invitation-not-valid");case"unconfirmedOrgNotFound":return d("please-confirm-your-email-address-to-view-this-org");case"unconfirmedBoardNotFound":return d("please-confirm-your-email-address-to-view-this-board");default:return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format("page-not-found")})})}})},{}],820:[function(e,t,n){var r;r=e(544)("filter_cards"),t.exports=function(){return r.input(".js-input.js-autofocus",{type:"text",attr:"title",value:r.mustacheVar("title"),style:"margin-bottom: 0;"}),r.div(".js-filter-search-results")}},{}],821:[function(e,t,n){var r;r=e(544)("filter_cards_search_results"),t.exports=function(){return r.mustacheBlock("showHelper",function(){return r.p(".quiet",{style:"padding: 10px 8px 2px; margin-bottom: 0;"},function(){return r.format("type-to-filter-by-term-or-search-for-labels-members-or-due-times")})}),r.mustacheBlock("showLabels",function(){return r.hr(),r.ul({class:"label-list"+r.mustacheBlock("limitLabels",function(){return" limited"})},function(){return r.mustacheBlock("labels",function(){return r.li({class:"label-list-item"+r.mustacheBlock("isActive",function(){return" is-active"})},function(){return r.a(".label-list-item-link.js-toggle-label-filter",{href:"#","data-name":r.mustacheVar("color"),"data-idlabel":r.mustacheVar("id")},function(){return r.div(".label-list-item-link-label",function(){return r.span({class:"card-label mod-square card-label-"+r.mustacheVar("color")})}),r.mustacheBlock("name",function(){return r.span(".label-list-item-link-name",function(){return r.text(r.mustacheVar("name"))})}),r.mustacheBlockInverted("name",function(){return r.span(".label-list-item-link-name.mod-quiet",function(){return r.format("color-label-default",{color:r.mustacheVar("defaultColorName")})})}),r.icon("check",{class:"label-list-item-link-icon"})})})}),r.mustacheBlock("limitLabels",function(){return r.li(".label-list-item.js-show-all-labels-elem",function(){return r.a(".label-list-item-link.js-show-all-labels",{href:"#"},function(){return r.span(".label-list-item-link-name.mod-quiet",function(){return r.format("show-all-labels-remaininglabels-hidden",{remainingLabels:r.mustacheVar("remainingLabels")})})})})})})}),r.mustacheBlock("showMembers",function(){return r.hr(),r.ul({class:"pop-over-member-list checkable js-mem-list"+r.mustacheBlock("limitMembers",function(){return" limited"})},function(){return r.mustacheBlock("members",function(){return r.mustachePartial("select_member")})}),r.mustacheBlock("limitMembers",function(){return r.ul(".pop-over-member-list",function(){return r.li(".item",function(){return r.a(".name.quiet.js-show-all-members",{href:"#",style:"padding-left: 42px; font-weight: normal; margin-top: 4px;"},function(){return r.format("show-all-members-remainingmembers-hidden",{remainingMembers:r.mustacheVar("remainingMembers")})})})})})}),r.mustacheBlock("showDueTimes",function(){return r.hr(),r.ul(".pop-over-list.checkable.navigable.inset.normal-weight",function(){return r.mustacheBlock("dueOptions",function(){return r.li({class:"item "+r.mustacheBlock("isActive",function(){
return" active"})},function(){return r.a(".js-due-filter",{href:"#",time:r.mustacheVar("time"),style:"padding-left: 40px;"},function(){return r.text(r.mustacheVar("desc")),r.icon("check")})})})})}),r.mustacheBlock("showMatchMode",function(){return r.hr(),r.ul(".pop-over-list.checkable.navigable.inset.normal-weight",function(){return r.mustacheBlock("modes",function(){return r.li({class:"item "+r.mustacheBlock("isActive",function(){return" active"})},function(){return r.a(".js-mode-filter",{href:"#",mode:r.mustacheVar("mode"),style:"padding-left: 40px;"},function(){return r.text(r.mustacheVar("desc")),r.icon("check")})})})})}),r.hr(),r.ul(".pop-over-list.inset.normal-weight",function(){return r.li(function(){return r.a({href:"#",class:"js-clear-all"+r.mustacheBlockInverted("isFiltering",function(){return" disabled"}),style:"padding-left: 40px;"},function(){return r.format("clear-filter")})})})}},{}],822:[function(e,t,n){var r;r=e(544)("footer_chrome"),t.exports=r.renderable(function(e){var t;return t=e.url,r.a(".footer-chrome-logo",{href:"/","aria-label":r.l("trello-home")}),r.div(".footer-chrome-links",function(){return r.a(".dark-hover",{href:t,target:"_blank",rel:"noopener"},function(){return r.format("open-in-new-window"),r.raw("&nbsp;"),r.span(".icon-sm.icon-external-link")})})})},{}],823:[function(e,t,n){var r;r=e(544)("formatting_help"),t.exports=function(){return r.p(function(){return r.format("trello-uses-markdown-for-formatting-here-are-the-basics-see-the-complete-syntax")}),r.hr(),r.p(".quiet",function(){return r.format("first-level-header")}),r.code(function(){return r.format("making-scrambled-eggs-a-primer"),r.br(),r.text("\n    ===============================\n  ")}),r.hr(),r.p(".quiet",function(){return r.format("second-level-header")}),r.code(function(){return r.format("1-1-preparation"),r.br(),r.text("\n    ----------------\n  ")}),r.hr(),r.p(".quiet",function(){return r.format("paragraphs")}),r.code(function(){return r.format("add-two-new-lines-to-start-a-new-paragraph-crack-two-eggs-into-the-bowl-and-whisk")}),r.hr(),r.p(".quiet",function(){return r.format("bold")}),r.code(function(){return r.format("carefully-crack-the-eggs")}),r.hr(),r.p(".quiet",function(){return r.format("emphasis")}),r.code(function(){return r.format("whisk-the-eggs-vigorously")}),r.hr(),r.p(".quiet",function(){return r.format("lists")}),r.code(function(){return r.format("ingredients"),r.br(),r.br(),r.format("eggs"),r.br(),r.format("oil"),r.br(),r.format("optional-milk")}),r.hr(),r.p(".quiet",function(){return r.format("links")}),r.code(function(){return r.format("to-download-a-pdf-version-of-the-recipe-click-here-https-example-com-scrambled-eggs-pdf")}),r.hr(),r.p(".quiet",function(){return r.format("images")}),r.code(function(){return r.format("the-finished-dish-https-example-com-eggs-png")})}},{}],824:[function(e,t,n){var r;r=e(544)("header_add_menu"),t.exports=r.renderable(function(e){var t;return t=e.upsellEnabled,r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-new-board",{href:"#"},function(){return r.format("create-board"),r.text(" "),r.span(".sub-name",function(){return r.format("a-board-is-made-up-of-cards-ordered-on-lists")})})}),r.li(function(){return r.a(".js-new-org",{href:"#"},function(){return r.format("create-team"),r.text(" "),r.span(".sub-name",function(){return r.format("a-team-is-a-group-of-boards-and-people")})})}),t?r.li(function(){return r.a(".js-new-bc-org",{href:"#"},function(){return r.format("create-business-team"),r.text(" "),r.span(".sub-name",function(){return r.format("with-business-class-your-team-has-more")})})}):void 0})})},{}],825:[function(e,t,n){var r,o,i;i=e(544)("header_announcements"),r=e(737),o=e("locale").social,t.exports=i.renderable(function(e){var t,n,a,s;return e.forEach(r),n=e.length>0&&null!=(a=null!=(s=/^https?:\/\/(?:[-a-z]+\.)?blog\.trello\.com\/([^\/]+)/.exec(e[0].url))?s[1]:void 0)?a:"none",/\?/g.test(n)&&(n=n.replace(/\?/gi,"&")),t="?utm_campaign="+n,/utm_source/.test(n)||(t+="&utm_source=direct"),/utm_medium/.test(n)||(t+="&utm_medium=inapp"),i.div(".announcement-elsewhere",function(){return i.p(".quiet",{style:"margin: 0 4px 5px;"},function(){return i.format("for-more-updates-check-out-ellipsis")}),i.a(".announcement-elsewhere-blog.js-blog",{target:"_blank",href:o.blog+t},function(){return i.span(".announcement-elsewhere-blog-icon.icon-lg.icon-board"),i.span(".u-text-underline",function(){return i.format("trello-blog")})}),i.a(".announcement-elsewhere-social.js-t",{target:"_blank",href:o.twitter},function(){return i.span(".icon-lg.icon-twitter")}),i.a(".announcement-elsewhere-social.js-fb",{target:"_blank",href:o.facebook},function(){return i.span(".icon-lg.icon-facebook")}),i.a(".announcement-elsewhere-social.js-g",{target:"_blank",href:o.google},function(){return i.span(".icon-lg.icon-google")})})})},{}],826:[function(e,t,n){var r;r=e(544)("header_back_menu_button"),t.exports=function(){return r.a(".header-btn.js-back-menu",{href:"/","aria-label":r.l("backToHome")},function(){return r.span(".header-btn-icon.icon-lg.icon-board-back-to-home.light")})}},{}],827:[function(e,t,n){var r;r=e(544)("header_boards_menu_button"),t.exports=function(){return r.a(".header-btn.header-boards.js-boards-menu",{href:"#"},function(){return r.span(".header-btn-icon.icon-lg.icon-board.light"),r.span(".header-btn-text",function(){return r.format("boards")})})}},{}],828:[function(e,t,n){var r;r=e(544)("header_channel_picker"),t.exports=r.renderable(function(e){var t,n,o,i,a;return n=e.cookie,t=e.channels,o=e.dev,a=e.version,i=e.tests,n?(r.p(function(){return r.format("you-have-a-version-cookie-set-this-is-a-feature-intended-for-client-developers-and-testers-and-will-prevent-you-from-changing-channels")}),r.input(".js-remove-cookie.wide.primary",{type:"button",value:r.l("remove-cookie")})):r.ul(".pop-over-list",function(){var e,n,i;for(n=0,i=t.length;i>n;n++)e=t[n],r.li(function(){return r.a(".js-select",{href:"#",name:e.name},function(){return r.text(e.displayName),e.active?r.icon("check"):void 0})});return o?(r.hr(),r.li(function(){return r.a(".js-select-dev",{href:"#"},function(){return r.format("pick-a-version")})})):void 0}),r.hr(),r.pre({style:"margin-bottom: 0;"},function(){return r.text(a)}),i?(r.hr(),r.p(function(){return r.format("listed-below-are-experiments")}),r.p(function(){return r.format("below-the-experiment")}),r.button({class:r.classify({negate:!0,"button-link":!0,"header-experiment-remove-btn":!0,"js-remove-all-exps":!0})},function(){return r.format("remove-all-experiments")}),r.ul(".pop-over-list.header-experiment-list",function(){var e,t,n,o;for(n=[],e=0,t=i.length;t>e;e++)o=i[e],n.push(r.li(function(){return r.a(".js-view-exp-details",{href:"#","data-name":o.name},function(){return r.text(o.name),o.inExperiment?r.span(".sub-name",function(){return r.text(":: "+o.selectedVariation)}):r.span(".sub-name",function(){return r.format("not-in-experiment")})})}));return n})):void 0})},{}],829:[function(e,t,n){var r;r=e(544)("header_enterprise_admin_dashboard__menu"),t.exports=r.renderable(function(e){return r.ul(".pop-over-list",function(){var t,n,o,i;for(i=[],t=0,n=e.length;n>t;t++)o=e[t],i.push(r.li(function(){return r.a({href:o.url},function(){return r.text(o.title)})}));return i})})},{}],830:[function(e,t,n){var r,o;o=e(544)("header_info_menu"),r=e("locale").social,t.exports=o.renderable(function(){var e;return o.div(".js-fill-tip"),o.a({class:"next-tip-link js-new-tip",href:"#"},o.l("get-new-tip")),o.hr(),e=function(e,t,n){return o.li(".meta-link-list-item",function(){return o.a({class:"meta-link-list-item-link js-meta-page-link",href:e,"data-metapagename":t,target:"_blank"},o.l(n))})},o.ul(".meta-link-list",function(){return e("/tour","Tour","tour"),e("/pricing","Pricing","pricing"),e("/platforms","Apps","apps"),e(r.blog,"Blog","blog"),o.span(".js-more-menu-button",function(){return o.li(".meta-link-list-item",function(){return o.a({class:"meta-link-list-item-link js-meta-page-more-link",href:"#"},o.l("more"))})}),o.span(".js-more-menu.hide",function(){return e("http://help.trello.com","Help","help"),e("/jobs","Jobs","jobs"),e("https://developers.trello.com","Developers","developers"),e("/about","About","about"),e("/legal","Legal","legal")})})})},{}],831:[function(e,t,n){var r,o,i;i=e(544)("header_invite"),r=window.avatarDomain,o=function(e,t,n){var o;return o=t+" ("+n+")",{src:[r,e,"30.png"].join("/"),alt:o,title:o}},t.exports=i.renderable(function(e){var t,n,r,a,s,u,c,l,d,p,h;return s=e.isInviter,r=e.ghost,l=e.modelName,c=e.memberAdder,t=e.avatarHash,n=e.fullName,h=e.username,d=e.modelType,u=e.isLoggedIn,a=e.isBoard,p=e.signupUrl,i.div(".invited-message",function(){return i.a(".js-ignore-invite.icon-lg.icon-close.dialog-close-button",{href:"#"}),i.h1(function(){return s?i.format("you-invited-ghost-fullname-to-collaborate-on-modelname",{"ghost.fullName":r.fullName,modelName:l}):c?i.format("fullname-has-invited-you-to-collaborate-on-modelname",{fullName:c.fullName,modelName:l}):i.format("youve-been-invited-to-collaborate-on-modelname",{modelName:l})}),u?(s||i.p({style:"min-height: 20px;"},function(){return r.email?(i.format("your-account"),t&&i.img(".inline-member-av",o(t,n,h)),i.text(" "),i.format("fullname-username-hasnt-logged-in-with-ghost-email",{fullName:n,username:h,"ghost.email":r.email})):void 0}),s?i.a(".button.js-create-new-account.primary",{href:p},function(){return i.format("create-new-account-for-ghost-fullname",{"ghost.fullName":r.fullName})}):(i.a(".button.js-join-model.primary",{href:"#"},function(){return a?i.format("add-this-email-to-my-account-and-join-board"):i.format("add-this-email-to-my-account-and-join-org")}),i.a(".button.js-create-new-account",{href:p},function(){return i.format("create-new-account")}))):i.a(".button.primary",{href:p},function(){return a?i.format("join-board"):i.format("join-org")})})})},{}],832:[function(e,t,n){var r;r=e(544)("header_logo"),t.exports=function(){return r.a(".header-logo.js-home-via-logo",{href:"/","aria-label":r.l("trello-home")},function(){return r.span(".header-logo-loading"),r.span(".header-logo-default")})}},{}],833:[function(e,t,n){var r;r=e(544)("header_member_menu"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l;return s=e.hasAccount,c=e.profileUrl,i=e.cardsUrl,n=e.billingUrl,t=e.accountUrl,o=e.canLogOut,l=e.upsellEnabled,a=function(e,t,n){return r.li(function(){var o;return o={class:n,href:e},r.a(o,function(){return r.format(t)})})},u=function(e){return r.ul(".pop-over-list",e)},u(function(){return a(c,"profile","js-profile"),a(i,"cards","js-cards"),s&&l&&a(n,"billing","js-billing"),a(t,"settings","js-account")}),r.hr(),u(function(){return a("/contact","help","js-help"),a("/shortcuts","shortcuts","js-shortcuts"),a("#","change-locale","js-change-locale")}),r.hr(),u(function(){return r.li(function(){return r.a(".js-logout",{href:"#"},function(){r.format("log-out"),o||(r.br(),r.format("you-ll-need-to-set-a-password-first"))})})})})},{}],834:[function(e,t,n){var r;r=e(544)("header_notification_list_menu"),t.exports=function(){return r.mustacheBlockInverted("hasNotifications",function(){return r.p(".empty",{style:"padding: 24px 6px;"},function(){return r.format("no-notifications")})}),r.mustacheBlock("hasNotifications",function(){return r.ul(".pop-over-list.mod-add-top-margin",function(){return r.li(function(){return r.a(".js-view-all-notifications",{href:r.mustacheVar("noteUrl")},function(){return r.mustacheBlock("remainingUnread",function(){return r.format("see-all-notifications-remainingunread-more-unread",{remainingUnread:r.mustacheVar("remainingUnread")})}),r.mustacheBlockInverted("remainingUnread",function(){return r.format("see-all-notifications")})})}),r.li(function(){return r.a(".js-change-email-frequency",{href:"#"},function(){return r.format("change-notification-email-frequency")})}),r.mustacheBlock("canAllowDesktopNotifications",function(){return r.li(function(){return r.a(".js-allow-desktop-notifications",{href:"#"},function(){return r.format("allow-desktop-notifications")})})})})})}},{}],835:[function(e,t,n){var r,o;o=e(544)("header_promo_nav"),r=e("locale").social,t.exports=function(){return o.nav(".promo-nav",function(){return o.a(".promo-nav-button",{href:"/"},function(){return o.format("home")}),o.a(".promo-nav-button",{href:"/tour"},function(){return o.format("tour")}),o.a(".promo-nav-button",{href:r.blog,target:"_blank"},function(){return o.format("blog")})})}},{}],836:[function(e,t,n){var r;r=e(544)("header_public_board"),t.exports=function(){return r.p(".u-bottom",function(){return r.mustacheBlock("interactionText",function(){return r.span(".u-inline-block",function(){return r.text(r.mustacheVar("interactionText"))})}),r.span(".u-inline-block",function(){return r.format("sign-up-for-free-or-learn-more-about-trello",{signupUrl:r.mustacheVar("signupUrl"),tourUrl:r.mustacheVar("tourUrl")})})})}},{}],837:[function(e,t,n){var r;r=e(544)("header_search"),t.exports=function(){return r.a(".header-btn.open-search-btn.js-open-search-page",{href:"/search",title:r.l("search-for-boards-cards-members-and-organizations")},function(){return r.span(".header-btn-icon.icon-lg.icon-search.light")}),r.div(".header-search",function(){return r.input(".header-search-input.js-search-input.js-disable-on-dialog",{type:"text",autocomplete:"off",autocorrect:"off",spellcheck:"false",value:r.mustacheVar("query")}),r.span(".header-search-icon.icon-lg.icon-search.light.js-search-icon"),r.span(".header-search-icon.header-search-icon-close.icon-lg.icon-close.light.hide.js-close-icon.js-search-close"),r.a(".header-search-icon.header-search-icon-open.icon-lg.icon-external-link.light.hide.js-open-button.js-open-search-page",{href:"#"})})}},{}],838:[function(e,t,n){var r;r=e(544)("header_signup_login"),t.exports=function(){return r.a(".header-btn.header-signup",{href:"/signup"+r.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+r.mustacheVar("escapedReturnUrl")})},function(){return r.format("sign-up")}),r.a(".header-btn.header-login.no-right-margin",{href:"/login"+r.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+r.mustacheVar("escapedReturnUrl")})},function(){return r.format("log-in")})}},{}],839:[function(e,t,n){var r;r=e(544)("header_two_factor_backups_banner"),t.exports=function(){return r.p(".u-bottom",function(){return r.format("generate-new-backup-codes")})}},{}],840:[function(e,t,n){var r;r=e(544)("header_user"),t.exports=r.renderable(function(e){var t,n,o,i,a,s;return i=e.isLoggedIn,n=e.hasCrown,a=e.showChannelPicker,t=e.escapedReturnUrl,o=e.isEnterpriseAdmin,s=e.upsellEnabled,i?(r.a(".header-btn.js-open-add-menu",{href:"#","aria-label":r.l("create-board-or-org")},function(){return r.span(".header-btn-icon.icon-lg.icon-add.light")}),s&&r.a(".header-btn.header-info.js-open-header-info-menu",{href:"#","aria-label":r.l("open-information-menu")},function(){return r.span(".header-btn-icon.icon-lg.icon-information.light")}),r.a(".header-btn.header-notifications.js-open-header-notifications-menu",{href:"#","aria-label":r.l("notifications-menu")},function(){return r.span(".header-btn-icon.icon-lg.icon-notification.light")}),o&&r.a(".header-btn.header-enterprise-dashboard.js-open-enterprise-dashboard-menu",{href:"#","aria-label":r.l("enterprise-dashboard")},function(){return r.span(".header-btn-icon.icon-lg.icon-enterprise-dashboard.light")}),a&&r.a(".header-btn.header-btn-channel-picker.js-open-channel-picker",{href:"#","aria-label":r.l("switch-channels")},function(){return r.span(".header-btn-icon.icon-lg.icon-gear.light")}),r.a(".header-btn.header-avatar.js-open-header-member-menu",{href:"#","aria-label":r.l("member-menu")},function(){return r.span({class:"member"+(n?" has-crown":"")})})):(r.a(".header-btn.header-signup",{href:"/signup"+(t?"?returnUrl="+t:"")},function(){return r.format("sign-up")}),r.a(".header-btn.header-login.no-right-margin",{href:"/login"+(t?"?returnUrl="+t:"")},function(){return r.format("log-in")}))})},{}],841:[function(e,t,n){var r;r=e(544)("header_version_picker"),t.exports=function(){return r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("head")}),r.span(".value",function(){return r.text(r.mustacheVar("active.name"))}),r.label(function(){return r.format("head")}),r.select(".js-select-head",function(){return r.mustacheBlock("heads",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("value")},function(){return r.text(r.mustacheVar("displayName")),r.mustacheBlock("selected",function(){return r.format("current")})})})})}),r.mustacheBlock("versions.2.value",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("version")}),r.span(".value",function(){return r.text(r.mustacheVar("active.version"))}),r.label(function(){return r.format("version")}),r.select(".js-select-version",function(){return r.mustacheBlock("versions",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("value")},function(){return r.text(r.mustacheVar("displayName")),r.mustacheBlockInverted("active",function(){return r.text(" "),r.format("disabled")}),r.mustacheBlock("selected",function(){return r.text(" "),r.format("current")})})})})})})})}},{}],842:[function(e,t,n){var r;r=e(544)("header_warning_account_transfer_required_big"),t.exports=r.renderable(function(e){var t,n,o;return o=e.targetDate,t=e.enterpriseName,n=e.isAdmin,r.div(".centered-banner",function(){return r.div(".sso-notice",function(){return r.p(function(){return r.format("convert-to-enterprise-member",{enterpriseName:t,targetDate:o})}),r.p(function(){return n?r.format("admins-must-convert"):r.format("will-deactivate",{enterpriseName:t})})}),r.p(".u-bottom",function(){return r.button(".primary.wide.js-begin-transfer",{type:"button"},function(){return r.format("start-conversion")}),r.text(" "),r.a(".quiet.js-dismiss-account-transfer",{href:"#"},function(){return r.format("do-later")})})})})},{}],843:[function(e,t,n){var r;r=e(544)("header_warning_account_transfer_required_collapsed"),t.exports=r.renderable(function(e){var t,n,o;return n=e.overdue,o=e.remainingDays,t=e.enterpriseName,r.p(".u-bottom",function(){return r.p(function(){return n?r.format("account-conversion-overdue"):r.format("account-conversion-days-remaining",{remainingDays:o}),r.text(". "),r.a(".quiet",{href:"/enterprise/"+t+"/transfer-account"},function(){return n?r.format("convert-now"):r.format("start-conversion")})})})})},{}],844:[function(e,t,n){var r;r=e(544)("header_warning_account_transfer_required_delayed"),t.exports=r.renderable(function(e){var t;return t=e.enterpriseName,r.p(".u-bottom",function(){return r.p(function(){return r.format("no-converted-admin"),r.text(" "),r.a(".quiet",{href:"/enterprise/"+t+"/transfer-account"},function(){return r.format("convert-now")})})})})},{}],845:[function(e,t,n){var r;r=e(544)("header_warning_account_transfer_required_missed"),t.exports=r.renderable(function(){return r.p(".u-bottom",function(){return r.p(function(){return r.format("missed-transfer-date"),r.text(" "),r.a(".quiet",{href:"/transfer-account/missed-date"},function(){return r.format("convert-now")})})})})},{}],846:[function(e,t,n){var r;r=e(544)("header_warning_banner"),t.exports=function(){return r.p(".u-bottom",function(){return r.mustacheBlock("knownEmailProvider",function(){return r.format("please-confirm-your-email-address-email-check-your-inbox",{email:r.mustacheVar("email"),emailInboxUrl:r.mustacheVar("emailInboxUrl")}),r.a(".header-banner-link-left.quiet.js-resend-confirmation-email",{href:"#"},function(){return r.format("resend-email")})}),r.mustacheBlockInverted("knownEmailProvider",function(){return r.format("please-confirm-your-email-address-email",{email:r.mustacheVar("email")}),r.a(".header-banner-link-left.quiet.js-resend-confirmation-email",{href:"#"},function(){return r.format("resend-email")})})})}},{}],847:[function(e,t,n){var r;r=e(544)("header_warning_password"),t.exports=function(){return r.p(".u-bottom",function(){return r.format("we-ve-automatically-created-an-account-for-email-with-the-username-username",{email:r.mustacheVar("email"),username:r.mustacheVar("username")}),r.a(".quiet.js-change-password",{href:"/my/account"},function(){return r.format("add-a-password")})})}},{}],848:[function(e,t,n){t.exports={actions_empty:e(734),ad_business_class:e(735),ad_business_class_google_apps:e(736),archived_card_options:e(738),archived_cards:e(739),archived_lists:e(740),atMention:e(741),attachment_viewer:e(744),attachment_viewer_frame:e(745),attachment_viewer_frame_details:e(746),avatar_change:e(747),badge:e(748),board:e(750),board_archive:e(751),board_background_options:e(752),board_background_selection:e(753),board_change_background:e(754),board_desc:e(756),board_header:e(757),board_header_permissions:e(758),board_member_profile:e(760),board_menu_activity:e(761),board_menu_commenting:e(762),board_menu_default:e(763),board_menu_invitations:e(765),board_menu_more:e(766),board_menu_more_activity_button:e(767),board_menu_settings:e(768),board_menu_subscribed_state:e(769),board_menu_vis:e(770),board_new:e(771),board_new_vis:e(772),board_observer_count:e(773),boards_page_add_org_button:e(775),calendar_day:e(781),calendar_day_list_header:e(782),calendar_month:e(783),calendar_toolbar:e(784),calendar_week:e(785),cant_add_board_to_org:e(786),card_composer_inline:e(788),card_copy:e(789),card_detail_more_menu:e(793),card_menu_meta:e(797),card_title_on_card_front:e(798),change_org_vis:e(799),checklist:e(800),checklist_add_menu:e(801),checklist_item:e(802),closed_boards:e(803),comment_edit_controls:e(804),confirm:e(806),confirm_merge:e(807),connect_failed:e(808),crop_photo:e(809),dialog_close_button:e(811),edit_controls:e(812),embedly:e(814),error:e(819),filter_cards:e(820),filter_cards_search_results:e(821),formatting_help:e(823),header_add_menu:e(824),header_back_menu_button:e(826),header_boards_menu_button:e(827),header_logo:e(832),header_notification_list_menu:e(834),header_promo_nav:e(835),header_public_board:e(836),header_search:e(837),header_signup_login:e(838),header_two_factor_backups_banner:e(839),header_user:e(840),header_version_picker:e(841),header_warning_banner:e(846),header_warning_password:e(847),index:e(848),invitation:e(849),kiln_changeset_preview:e(852),kiln_changeset_thumbnail:e(853),label_edit_component:e(855),list:e(856),list_add:e(857),list_bulk_card_move:e(858),list_copy:e(859),manage_members_select_role:e(862),member_account:e(864),member_application:e(865),member_application_list:e(866),member_billing_org_link:e(868),member_billing_org_link_list:e(869),member_boards_list_ad:e(870),member_cards_card:e(873),member_cards_date:e(874),member_detail_profile_edit:e(879),member_detail_profile_info:e(880),member_gold_earned:e(881),member_inline:e(883),member_list_item_detail:e(885),member_login:e(886),member_on_board_menu:e(887),member_on_card_menu:e(889),member_profile:e(890),member_profile_info:e(891),member_session:e(892),member_session_list:e(893),members_voted:e(894),menu:e(895),menu_base:e(896),move_card_controls:e(898),observer_list:e(899),org_boards_for_member:e(901),org_create:e(902),org_detail_profile_edit:e(904),org_detail_profile_info:e(905),org_export:e(906),org_export_empty:e(907),org_export_item:e(908),org_link_ga_helper:e(909),org_member_activity:e(910),org_pref_restriction:e(911),org_prefs_nonorg_invites:e(912),org_prefs_vis:e(914),org_remove_or_deactivate_member:e(915),organization_list_item:e(917),organization_search_list_item:e(918),plugin_chrome:e(919),pop_over_ad:e(920),popover_add_board_to_org:e(921),popover_add_email:e(922),popover_add_list:e(923),popover_add_to_team:e(924),popover_auto_mentioner:e(925),popover_board_header_org_menu:e(926),popover_card_from_calendar:e(927),popover_change_board_org:e(928),popover_change_labels:e(929),popover_change_roles:e(930),popover_change_set_password:e(931),popover_change_user_info:e(932),popover_confirm_member_delete:e(933),popover_emoji_completer:e(934),popover_emoji_uploader:e(935),popover_filter_pos_results:e(936),popover_helper_new_board_add_org:e(937),popover_insertion_menu:e(938),popover_member_searcher:e(940),popover_move_card:e(941),popover_move_list:e(942),popover_org_logo:e(943),popover_rename_board:e(944),popover_select_members:e(945),popover_selector_menu:e(946),popover_set_email_freq:e(947),popover_share:e(948),power_up_item:e(950),power_up_item_details:e(951),power_ups_about_calendar:e(952),power_ups_about_card_aging:e(953),power_ups_about_voting:e(954),power_ups_detail_navbar:e(957),product_promo_button:e(960),quick_card_editor:e(961),saved_search:e(962),search_results_card:e(964),search_suggetion:e(965),search_suggetion_board:e(966),search_suggetion_member:e(967),select_emoji:e(970),select_labels:e(971),select_member:e(972),select_org_to_upgrade:e(973),shortcuts:e(974),sticker_on_card:e(975),sticker_pack_selection_list:e(976),sticker_select:e(977),sticker_select_item:e(978),sticker_select_item_upload:e(979),sync_error:e(980),take_photo:e(981),tooltip_content:e(983),woof_header:e(984)}},{}],849:[function(e,t,n){var r,o;o=e(544)("invitation"),r=e(863),t.exports=function(){return o.div(".phenom.invitation",function(){return o.mustacheBlock("MemberInviter",function(){return o.div(".creator.member.no-menu",function(){return r(o.mustacheVar("MemberInviter"))})}),o.div(".phenom-desc",function(){return o.p(function(){return o.mustacheBlock("MemberInviter",function(){return o.format("fullname-created-an-invitation-to",{fullName:o.mustacheVar("fullName")})}),o.span(".invitee",function(){return o.mustacheBlock("MemberInvited",function(){return o.mustachePartial("member_inline")}),o.mustacheBlockInverted("MemberInvited",function(){return o.text(o.mustacheVar("email")),o.mustacheBlockInverted("email",function(){return o.format("someone-new")})})})})}),o.p(".phenom-meta.quiet",function(){return o.mustacheBlock("dateExpires",function(){return o.span(".expiration-date",function(){return o.format("expires",{dateExpires:o.mustacheVar("dateExpires")})})}),o.mustacheBlock("canRemove",function(){return o.text(" - "),o.a(".u-inline-block.js-remove-invitation",{href:"#"},function(){return o.format("delete-invitation")})})})})}},{}],850:[function(e,t,n){var r;r=e(544)("invite_add_name"),t.exports=r.renderable(function(e){var t,n,o,i;return n=e.email,o=e.fullName,t=e.canAddAsObserver,i=e.modelType,r.p(".quiet",function(){if("Board"===i)return r.format("we dont know that personboard",{email:n});if("Organization"===i)return r.format("we dont know that personteam",{email:n});throw new Error("Expected either Board or Organization as modelType; got "+i)}),r.p(".error.hide.js-name-error",function(){return r.format("full-name-must-be-more-than-4-characters")}),r.form(".js-email-data",function(){return r.label(function(){return r.format("full-name")}),r.input(".js-autofocus.js-full-name",{type:"text",value:o}),r.input(".js-email",{type:"hidden",value:n}),t&&r.span(".check-div.quiet.u-clearfix",{style:r.stylify({"margin-left":"24px","padding-top":"2px","font-size":"12px","line-height":"15px"})},function(){return r.input({type:"checkbox",id:"addAsObserver"}),r.label({for:"addAsObserver"},function(){return r.format("include-this-member-as-a-view-only-observer")})}),r.input(".wide.primary.js-send-email-invite",{type:"submit",value:r.l("send")})})})},{}],851:[function(e,t,n){var r;r=e(544)("manage_members"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d,p,h,m;return n=e.canInviteMembers,o=e.canLinkGoogleApps,m=e.placeholder,i=e.disableAddingExternalMembers,a=e.isBCOrgAdmin,p=e.orgSettingsURL,t=e.canAddMembers,d=e.orgName,u=e.isPerUser,s=e.isMonthly,c=e.isYearly,h=e.perUserPrice,l=e.orgMemsView,null==d&&(d=""),r.div(".org-actions-popover",function(){return n&&r.div(".manage-member-invitation-section",function(){return r.div(".search-with-spinner",{style:"height: auto"},function(){return r.h4(function(){return r.icon("member","enter-email-address-or-name")}),r.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:m}),r.div(".spinner.small.hide.js-loading"),r.p(".u-bottom.quiet.bulk-add-members-copy",function(){return r.format("big-team"),r.a(".js-bulk-add-members.u-bottom.action-link",{href:"#"},function(){return r.format("add-many-people-at-once")})})})}),i&&(r.div(".search-with-spinner",function(){return r.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:m}),r.div(".spinner.small.hide.js-loading")}),r.p(".warning",function(){return a?r.format("only-organization-members-can-be-added-to-this-board-to-change-this-visit-the-organization-settings-page-and-click-inviting-non-org-members-to-boards",{orgSettingsURL:p}):r.format("only-organization-members-can-be-added-to-this-board-check-with-an-organization-admin-to-change-this-setting")})),r.div(".pop-over-section.hide.js-board-members",function(){return r.ul(".pop-over-member-list.options.js-list")}),r.div(".pop-over-section.hide",function(){return r.h4(function(){return r.format("error")}),r.p(".error",function(){return r.format("the-user-or-email-could-not-be-invited-due-to-an-organization-restriction")})}),r.div(".pop-over-section.hide.js-error",function(){return r.p(".error",{style:"margin: 16px 8px 6px;"})}),t&&(r.div(".pop-over-section.hide.js-uninvited-search-results"),r.div(".pop-over-section.hide.js-search-results",function(){return r.h4(function(){return r.format("select-to-add")}),r.ul(".pop-over-member-list.options.js-list")}),r.div(".pop-over-section.hide.js-no-results",function(){return r.p(".quiet.u-text-align-center",{style:"padding: 16px 4px;"},function(){return r.format("no-results")})}),r.div(".pop-over-section.hide.js-org-members",function(){return r.h4(function(){return r.format("orgname-members",{orgName:d})}),r.ul(".pop-over-member-list.options.u-clearfix.js-list",{class:r.classify({collapsed:l}),style:r.stylify({"margin-bottom":l?"8px":void 0})}),r.a(".quiet-button.js-add-all-org-members",{href:"#",style:"margin-top: 8px;"}),r.a(".quiet-button.js-more-org-members.hide",{href:"#",style:"margin-top: 8px;"},function(){return r.format("view-all-members")})})),u&&r.p(".quiet.u-bottom",{style:"padding: 6px;"},function(){return s&&r.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-month",{jpsPrice:h}),c?r.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-year",{jpsPrice:h}):void 0}),n&&r.div(".manage-member-invitation-section",function(){return r.div(".manage-member-invitation-link-header",function(){return r.h4(function(){return r.img(".icon-share-link",{src:"https://a.trellocdn.com/images/17095605578f7696a7029c904b584c00/icon-link.svg"}),r.format("share-team-invite-link")}),r.a(".action-link.js-show-invitation-link",{href:"#"},function(){return r.format("create-link")})}),r.div(".manage-member-invitation-link.hide.js-invitation-link-container",function(){return r.div(".manage-member-invitation-link-actions",function(){return r.input(".js-invitation-link",{type:"text",readonly:"readonly",placeholder:r.l("loading")}),r.button(".button.primary.js-copy-link",function(){return r.format("copy")})}),r.a(".quiet.js-deactivate-link",{href:"#"},function(){return r.format("disable-this-link")})})}),n&&r.div(".js-ad"),o?r.div(".js-link-google-apps",function(){return r.div(".pop-over-ad.business-class-ad",function(){return r.img(".icon-google-g.pop-over-ad-icon",{src:"https://a.trellocdn.com/images/services/2ccbebadc7891e8f0896e1b85961fdf6/google-g-logo.svg"}),r.div(".ad-copy",function(){return r.span(".title",function(){return r.format("using-google-apps")}),r.span(".learn-more",function(){return r.format("link-google-apps-domain")})})})}):void 0})})},{}],852:[function(e,t,n){var r;r=e(544)("kiln_changeset_preview"),t.exports=function(){var e,t;return t=null!=(e=r.mustacheVar("reviews"))?e:[],r.div(".attachment-extra-info-header",function(){var e;return e=0===t.length?"changeset-no-reviews":"changeset",
r.format(e,{url:r.mustacheVar("url"),shortHash:r.mustacheVar("shortHash"),author:r.mustacheVar("author")}),r.mustacheBlock("reviews",function(){return r.span(".quiet",function(){return r.a({href:r.mustacheVar("url"),target:"_blank"},function(){return r.text(r.mustacheVar("status"))})})})}),r.div(".attachment-extra-info-details.markeddown",function(){return r.raw(r.mustacheVar("commitMessageHtml"))})}},{}],853:[function(e,t,n){var r;r=e(544)("kiln_changeset_thumbnail"),t.exports=function(){return r.span({title:r.mustacheVar("commitMessage")},function(){return r.text(r.mustacheVar("shortCommitMessage"))}),r.span(".block.quiet",function(){var e,t,n;return n=null!=(t=r.mustacheVar("reviews"))?t:[],e=r.mustacheVar("date"),0!==n.length||e?0===n.length&&e?r.format("no-reviews-date",{date:e}):n.length>0&&!e?r.format("reviews-no-date"):n.length>0&&e&&r.format("reviews-date",{date:e}):r.format("no-reviews-no-date"),r.mustacheBlock("reviews",function(){return r.span(function(){return r.a({href:r.mustacheVar("url"),target:"_blank"},function(){return r.text(r.mustacheVar("status"))})})})})}},{}],854:[function(e,t,n){var r;r=e(544)("label"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u;if(o=e.color,u=e.name,i=e.extraClasses,n={"card-label":!0},o&&(n["card-label-"+o]=!0),i)for(a=0,s=i.length;s>a;a++)t=i[a],n[t]=!0;return r.span({class:r.classify(n),title:null!=u?u:o+" label (default)"},function(){return u?r.text(u):r.raw("&nbsp;")})})},{}],855:[function(e,t,n){var r;r=e(544)("label_edit_component"),t.exports=function(){return r.label({for:"labelName"},function(){return r.format("name")}),r.input(".js-autofocus.js-label-name",{id:"labelName",type:"text",name:"name",value:r.mustacheVar("label.name")}),r.label(function(){return r.format("select-a-color")}),r.mustacheBlock("colors",function(){return r.span({class:"card-label mod-edit-label mod-clickable card-label-"+r.mustacheVar("color")+" palette-color js-palette-color","data-color":r.mustacheVar("color")},function(){return r.span({class:"card-label-color-select-icon icon-sm icon-check light "+r.mustacheBlockInverted("selected",function(){return"hide"})+" js-palette-select"})})}),r.p(".u-bottom",function(){return r.format("no-color")}),r.p(".u-bottom.quiet",function(){return r.format("this-wont-show-up-on-the-front-of-cards")}),r.div(".u-clearfix",function(){return r.input(".primary.wide.js-submit",{type:"submit",value:r.mustacheVar("submitText")}),r.div(".u-float-right.js-accessory-view-holder")})}},{}],856:[function(e,t,n){var r;r=e(544)("list"),t.exports=r.renderable(function(e){var t,n,o;return n=e.name,o=e.subscribed,t=e.loggedIn,r.div(".list.js-list-content",function(){var e;return e={"list-header":!0,"js-list-header":!0,"u-clearfix":!0,"is-menu-shown":t,"is-subscribe-shown":o},r.div({class:r.classify(e)},function(){var e;return e={"list-header-name":!0,"mod-list-name":!0,"js-list-name-input":!0},r.div(".list-header-target.js-editing-target"),r.h2(".list-header-name-assist.js-list-name-assist",{dir:"auto"},n),r.textarea({class:r.classify(e),"aria-label":n,spellcheck:"false",dir:"auto",maxLength:512},n),r.p(".list-header-num-cards.hide.js-num-cards"),r.div(".list-header-extras",function(){var e;return e={"list-header-extras-subscribe":!0,"js-list-subscribed":!0},o||(e.hide=!0),r.span({class:r.classify(e)},function(){return r.icon("subscribe")}),t?r.a(".list-header-extras-menu.dark-hover.js-open-list-menu",{href:"#"},function(){return r.icon("overflow-menu-horizontal")}):void 0})}),r.a(".open-card-composer.js-open-card-composer",{href:"#"},function(){return r.format("add-a-card-ellipsis")})})})},{}],857:[function(e,t,n){var r;r=e(544)("list_add"),t.exports=function(){return r.form(function(){return r.span(".placeholder.js-open-add-list",function(){return r.format("add-a-list-ellipsis")}),r.input(".list-name-input",{type:"text",name:"name",placeholder:r.l("add-a-list-ellipsis"),autocomplete:"off",dir:"auto",maxLength:512}),r.div(".list-add-controls.u-clearfix",function(){return r.input(".primary.mod-list-add-button.js-save-edit",{type:"submit",value:r.l("save")}),r.a(".icon-lg.icon-close.dark-hover.js-cancel-edit",{href:"#"})})})}},{}],858:[function(e,t,n){var r;r=e(544)("list_bulk_card_move"),t.exports=function(){return r.form(function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("lists",function(){return r.li(function(){return r.a({href:"#",class:"js-select-list highlight-icon "+r.mustacheBlock("current",function(){return" disabled"}),name:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("name")),r.mustacheBlock("current",function(){return r.text(" "),r.format("current")})})})})})})}},{}],859:[function(e,t,n){var r;r=e(544)("list_copy"),t.exports=function(){return r.label(function(){return r.format("name")}),r.textarea(".js-autofocus",{name:"name"},function(){return r.text(r.mustacheVar("name"))}),r.input(".primary.wide.js-submit",{type:"submit",value:r.l("create-list")})}},{}],860:[function(e,t,n){var r;r=e(544)("list_menu"),t.exports=r.renderable(function(e){var t,n,o,i;return o=e.editable,i=e.subscribed,n=e.canSortByDueDate,t=e.canSortByAge,r.ul(".pop-over-list",function(){return o&&(r.li(function(){return r.a(".js-add-card",{href:"#"},function(){return r.format("add-card-ellipsis")})}),r.li(function(){return r.a(".js-copy-list",{href:"#"},function(){return r.format("copy-list-ellipsis")})}),r.li(function(){return r.a(".js-move-list",{href:"#"},function(){return r.format("move-list-ellipsis")})})),r.li(function(){return r.a(".highlight-icon.js-list-subscribe",{href:"#"},function(){return r.check(i,"subscribe")})})}),o?(r.hr(),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-move-cards",{href:"#"},function(){return r.format("move-all-cards-in-this-list-ellipsis")})}),r.li(function(){return r.a(".js-archive-cards",{href:"#"},function(){return r.format("archive-all-cards-in-this-list-ellipsis")})})}),(n||t)&&(r.hr(),r.ul(".pop-over-list",function(){return n&&r.li(function(){return r.a(".js-sort-by-due-date",{href:"#"},function(){return r.format("sort-by-due-date")})}),t?(r.li(function(){return r.a(".js-sort-newest-first",{href:"#"},function(){return r.format("sort-newest-first")})}),r.li(function(){return r.a(".js-sort-oldest-first",{href:"#"},function(){return r.format("sort-oldest-first")})})):void 0})),r.hr(),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-close-list",{href:"#"},function(){return r.format("archive-this-list")})})})):void 0})},{}],861:[function(e,t,n){var r;r=e(544)("manage_members"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d,p,h;return n=e.canInviteMembers,h=e.placeholder,o=e.disableAddingExternalMembers,i=e.isBCOrgAdmin,d=e.orgSettingsURL,t=e.canAddMembers,l=e.orgName,s=e.isPerUser,a=e.isMonthly,u=e.isYearly,p=e.perUserPrice,c=e.orgMemsView,null==l&&(l=""),n&&(r.div(".search-with-spinner",function(){return r.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:h}),r.div(".spinner.small.hide.js-loading")}),r.div(".pop-over-section.js-helper",function(){return r.p(".u-bottom.quiet",{style:"padding: 6px;"},function(){return r.format("search-for-a-person-in-trello-by-name-or-email-address-or-enter-an-email-address-to-invite-someone-new")})})),o&&(r.div(".search-with-spinner",function(){return r.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:h}),r.div(".spinner.small.hide.js-loading")}),r.p(".warning",function(){return i?r.format("only-organization-members-can-be-added-to-this-board-to-change-this-visit-the-organization-settings-page-and-click-inviting-non-org-members-to-boards",{orgSettingsURL:d}):r.format("only-organization-members-can-be-added-to-this-board-check-with-an-organization-admin-to-change-this-setting")})),r.div(".pop-over-section.hide.js-board-members",function(){return r.ul(".pop-over-member-list.options.js-list")}),r.div(".pop-over-section.hide",function(){return r.h4(function(){return r.format("error")}),r.p(".error",function(){return r.format("the-user-or-email-could-not-be-invited-due-to-an-organization-restriction")})}),r.div(".pop-over-section.hide.js-error",function(){return r.p(".error",{style:"margin: 16px 8px 6px;"})}),t&&(r.div(".pop-over-section.hide.js-uninvited-search-results"),r.div(".pop-over-section.hide.js-search-results",function(){return r.h4(function(){return r.format("select-to-add")}),r.ul(".pop-over-member-list.options.js-list")}),r.div(".pop-over-section.hide.js-no-results",function(){return r.p(".quiet.empty.u-text-align-center",{style:"padding: 16px 4px;"},function(){return r.format("no-results")})}),r.div(".pop-over-section.hide.js-org-members",function(){return r.h4(function(){return r.format("orgname-members",{orgName:l})}),r.ul(".pop-over-member-list.options.u-clearfix.js-list",{class:r.classify({collapsed:c}),style:r.stylify({"margin-bottom":c?"8px":void 0})}),r.a(".quiet-button.js-add-all-org-members",{href:"#",style:"margin-top: 8px;"}),r.a(".quiet-button.js-more-org-members.hide",{href:"#",style:"margin-top: 8px;"},function(){return r.format("view-all-members")})})),n&&r.div(".js-upgrade-team"),s&&(r.hr(),r.p(".quiet.u-bottom",{style:"padding: 6px;"},function(){return a&&r.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-month",{jpsPrice:p}),u?r.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-year",{jpsPrice:p}):void 0})),n?(r.hr(),r.a(".quiet-button.js-show-invitation-link",{href:"#"},function(){return r.format("you-can-also-invite-people-by-giving-them-a-special-link")}),r.div(".manage-member-invitation-link.hide.js-invitation-link-container",function(){return r.p(function(){return r.format("anyone-you-share-this-link-with-will-be-able-to-join")}),r.input(".js-invitation-link",{type:"text",readonly:"readonly",placeholder:r.l("loading")}),r.a(".quiet-button.js-deactivate-link",{href:"#"},function(){return r.format("disable-this-link")})})):void 0})},{}],862:[function(e,t,n){var r;r=e(544)("manage_members_select_role"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("showAdmin",function(){return r.li(function(){return r.a(".js-invite.js-select-admin",{href:"#"},function(){return r.format("admin-roletext-admin",{roleText_admin:r.mustacheVar("roleText_admin")})})})}),r.li(function(){return r.a(".js-invite.js-select-member",{href:"#"},function(){return r.format("normal-roletext-normal",{roleText_normal:r.mustacheVar("roleText_normal")})})}),r.mustacheBlock("showObserver",function(){return r.li(function(){return r.a(".js-invite.js-select-observer",{href:"#"},function(){return r.format("observer"),r.icon("business-class"),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_observer"))})})})})})}},{}],863:[function(e,t,n){var r,o;o=e(544)("member"),r=window.avatarDomain,t.exports=o.renderable(function(e){var t,n,i,a,s,u,c;return t=e.avatarHash,n=e.fullName,c=e.username,i=e.initials,s=e.isDeactivated,a=e.isBoardAdmin,u=e.isOrganizationAdmin,t?o.img(".member-avatar",{height:"30",width:"30",src:[r,t,"30.png"].join("/"),srcset:[[r,t,"30.png 1x"].join("/"),[r,t,"50.png 2x"].join("/")].join(", "),alt:n+" ("+c+")",title:n+" ("+c+")"}):o.span(".member-initials",{title:n+" ("+c+")"},function(){return o.text(i)}),s||(a&&o.span(".member-type.admin",{title:o.l("this-member-is-an-admin-of-this-board")}),u&&o.span(".member-type.admin",{title:o.l("this-member-is-an-admin-of-this-organization")})),o.span(".member-gold-badge",{title:o.l("this-member-has-trello-gold")})})},{}],864:[function(e,t,n){var r;r=e(544)("member_account"),t.exports=function(){return r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("account-details")})}),r.a(".big-link.js-change-name-and-bio",{href:"#"},function(){return r.span(".text",function(){return r.format("change-name-initials-or-bio")})}),r.a(".big-link.js-change-avatar",{href:"#"},function(){return r.span(".text",function(){return r.format("change-avatar")})}),r.a(".big-link.js-change-password",{href:"#"},function(){return r.span(".text",function(){return r.mustacheBlock("hasPassword",function(){return r.format("change-password")}),r.mustacheBlockInverted("hasPassword",function(){return r.format("set-password")})})}),r.a(".big-link.js-change-email",{href:"#"},function(){return r.span(".text",function(){return r.format("change-email")})}),r.a(".big-link.js-change-locale",{href:"#"},function(){return r.span(".text",function(){return r.format("change-locale")})})}),r.mustacheBlock("showMobileLoginPassword",function(){return r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("mobile-application-sign-in")})}),r.div(".u-gutter",function(){return r.input(".js-mobile-temp-password",{type:"button",value:r.l("generate-mobile-login-password")})})})}),r.div(".window-module.js-credentials-section",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("credentials")})}),r.div(".js-credentials-list.u-gutter",function(){return r.div(".spinner.loading")}),r.div(".u-gutter",function(){return r.input(".js-add-email",{type:"button",value:r.l("add-a-new-email-address")})})}),r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("notifications")})}),r.a(".big-link.js-change-email-freq",{href:"#"},function(){return r.span(".text",function(){return r.format("change-notification-email-frequency")})}),r.mustacheBlock("canAllowDesktopNotifications",function(){return r.a(".big-link.js-allow-desktop-notifications",{href:"#"},function(){return r.span(".text",function(){return r.format("allow-desktop-notifications")})})})}),r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("accessibility")})}),r.a(".big-link.js-toggle-cb-mode",{href:"#"},function(){return r.span(".text",function(){return r.mustacheBlock("cbEnabled",function(){return r.format("disable-color-blind-friendly-mode")}),r.mustacheBlockInverted("cbEnabled",function(){return r.format("enable-color-blind-friendly-mode")})})})}),r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("applications")})}),r.div(".js-member-applications",function(){return r.div(".spinner.loading")})}),r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("sessions")})}),r.div(".js-member-sessions.u-gutter",function(){return r.div(".spinner.loading")})}),r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("two-factor-auth")})}),r.a(".big-link.js-configure-2fa",{href:"/2fa"},function(){return r.span(".text",function(){return r.format("configure-two-factor-authentication")})})}),r.div(".window-module",function(){return r.a(".quiet-button.u-gutter.js-confirm-delete-member",{href:"#",style:"margin-top: 32px;"},function(){return r.format("permanently-delete-your-entire-account-forever")})})}},{}],865:[function(e,t,n){var r;r=e(544)("member_application"),t.exports=function(){return r.div(".member-applications-list-item-details",function(){return r.h5(function(){return r.mustacheBlock("identifier",function(){return r.text(r.mustacheVar("identifier"))}),r.mustacheBlockInverted("identifier",function(){return r.format("unknown-application")})}),r.ul(".quiet",function(){return r.mustacheBlock("permissions",function(){return r.li(function(){return r.text(r.mustacheVar("."))})})}),r.p(".quiet",function(){return r.format("approved-dateapproved",{dateApproved:r.mustacheVar("dateApproved")}),r.br(),r.mustacheBlock("neverExpires",function(){return r.format("never-expires")}),r.mustacheBlockInverted("neverExpires",function(){return r.format("expires-dateexpires",{dateExpires:r.mustacheVar("dateExpires")})})})}),r.div(".member-applications-list-item-button",function(){return r.input(".js-revoke",{type:"button",value:r.l("revoke")})})}},{}],866:[function(e,t,n){var r;r=e(544)("member_application_list"),t.exports=function(){return r.mustacheBlockInverted("hasTokens",function(){return r.p(".big-link.none",function(){return r.format("no-applications-are-using-your-trello-account")})}),r.mustacheBlock("hasTokens",function(){return r.div(".member-applications-list.u-gutter.js-list-member-applications")})}},{}],867:[function(e,t,n){var r;r=e(544)("member"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d;return t=e.avatarHash,d=e.username,i=e.fullName,a=e.initials,u=e.isDeactivated,s=e.isBoardAdmin,c=e.isOrganizationAdmin,l=i+" ("+d+")",t?(n=[window.avatarDomain,t,"30.png"].join("/"),o=[window.avatarDomain,t,"50.png"].join("/"),r.img({class:"member-avatar",height:"30",width:"30",src:n,srcset:n+" 1x, "+o+" 2x",alt:l,title:l})):r.span(".member-initials",{title:l},function(){return r.text(a)}),u||(s&&r.span(".member-type.admin",{title:r.l("this-member-is-an-admin-of-this-board")}),c&&r.span(".member-type.admin",{title:r.l("this-member-is-an-admin-of-this-organization")})),r.span(".member-gold-badge",{title:r.l("this-member-has-trello-gold")})})},{}],868:[function(e,t,n){var r;r=e(544)("member_billing_org_link"),t.exports=function(){return r.li(function(){return r.a({href:r.mustacheVar("billingLink")},function(){return r.format("displayname-billing-page",{displayName:r.mustacheVar("displayName")})})})}},{}],869:[function(e,t,n){var r;r=e(544)("member_billing_org_link_list"),t.exports=function(){return r.div(".u-gutter.markeddown",function(){return r.div({style:"max-width: 450px;"},function(){return r.h3(function(){return r.format("looking-for-your-organization-s-billing-page")}),r.ul(".js-org-link-list"),r.p(".quiet",function(){return r.format("this-is-your-personal-billing-page-you-can-manage-the-billing-for-your-business-class-organizations-on-the-above-pages")})}),r.hr()})}},{}],870:[function(e,t,n){var r;r=e(544)("member_boards_list_ad"),t.exports=function(){return r.text(r.mustacheVar("copyHtml")),r.icon("close",{class:"dark-hover ad-close js-close-ad",href:"#"})}},{}],871:[function(e,t,n){var r;r=e(544)("member_cards_base"),t.exports=r.renderable(function(e){var t;return t=e.showGroup,r.div(".window-module.u-gutter.member-cards-options",function(){return r.a(".quiet-button.mod-with-image.js-toggle-sort",{href:"#"},function(){return r.icon("overflow-menu-horizontal",{class:"quiet-button-icon"}),r.span(".js-sort-text")}),t&&r.a(".quiet-button.mod-with-image.js-set-group",{href:"#"},function(){return r.icon("filter",{class:"quiet-button-icon"}),r.span(".js-group-text")}),r.a(".quiet-button.mod-with-image.js-set-filter",{href:"#"},function(){return r.icon("filter",{class:"quiet-button-icon"}),r.span(".js-filter-text")})}),r.div(".js-cards-content")})},{}],872:[function(e,t,n){var r;r=e(544)("member_cards_board"),t.exports=r.renderable(function(e){var t,n,o,i,a,s;return s=e.url,n=e.name,o=e.org,i=e.permissionLevel,a=e.starred,t=e.lists,r.div(".member-cards-board.js-board",function(){return r.div(".board-header",function(){return r.a(".board-header-btn.no-edit.board-header-btn-name",{href:s},function(){return r.span(".board-header-btn-text",function(){return r.text(n)})}),a&&r.a(".board-header-btn.no-edit",function(){return r.span(".icon-sm.icon-star.board-header-btn-icon")}),null!=o&&r.a(".board-header-btn.board-header-btn-org-name.board-header-btn-without-icon",{href:o.url},function(){return r.span(".board-header-btn-text",function(){return r.text(o.name)})}),r.span(".board-header-btn.perms-btn.no-edit.js-permission-level",function(){return r.span(".icon-sm",{class:r.classify({"icon-organization-visible":"org"===i,"icon-public":"public"===i,"icon-private":"private"===i})})})}),r.div(".member-cards-board-lists.u-fancy-scrollbar",function(){var e,n,o,i;for(i=[],e=0,n=t.length;n>e;e++)o=t[e],i.push(r.div(".list-wrapper",function(){return r.div(".list",function(){return r.div(".list-header.u-clearfix",function(){return r.div(".list-header-name.mod-list-name",function(){return r.text(o.name)})}),r.div(".js-list.list-cards.u-fancy-scrollbar",{"data-idList":o.id})})}));return i})})})},{}],873:[function(e,t,n){var r;r=e(544)("member_cards_card"),t.exports=function(){return r.div(".js-card"),r.p(".list-card-position.quiet",function(){return r.mustacheBlock("showBoard",function(){return r.format("in-listname-on-boardname",{listName:r.mustacheVar("listName"),boardName:r.mustacheVar("boardName")})}),r.mustacheBlockInverted("showBoard",function(){return r.format("in-listname",{listName:r.mustacheVar("listName")})})})}},{}],874:[function(e,t,n){var r;r=e(544)("member_cards_date"),t.exports=function(){return r.div(".window-module-title",function(){return r.span({class:"window-module-title-icon icon-lg icon-"+r.mustacheVar("iconType")}),r.h3(function(){return r.text(r.mustacheVar("header"))})}),r.div(".card-grid.u-gutter.u-clearfix.js-list")}},{}],875:[function(e,t,n){var r,o;o=e(544)("member_cards_filter"),r=["active-day","active-week","active-month","active-year","all"],t.exports=o.renderable(function(e){var t;return t=e.filter,o.ul(".pop-over-list.checkable",function(){return r.forEach(function(e){return o.li({class:o.classify({active:e===t})},function(){return o.a(".highlight-icon.js-set-filter",{href:"#","data-filter":e},function(){return o.check(e===t,["filter-description",e])})})})})})},{}],876:[function(e,t,n){var r;r=e(544)("member_cards_group"),t.exports=r.renderable(function(e){var t,n,o;return t=e.group,n=e.organizations,o=function(e,n){return r.li({class:r.classify({active:t===e})},function(){return r.a(".highlight-icon.js-set-group",{href:"#","data-group":e},function(){return r.text(n),r.text(" "),t===e?(r.icon("check"),r.text(" ")):void 0})})},r.ul(".pop-over-list.checkable",function(){return o("all",r.l("all-boards")),o("personal",r.l("personal-boards")),n.forEach(function(e){return o(e.id,e.name)})})})},{}],877:[function(e,t,n){var r;r=e(544)("member_cards_sort"),t.exports=r.renderable(function(e){var t;return t=e.sort,r.ul(".pop-over-list.checkable",function(){return r.li({class:r.classify({active:"board"===t})},function(){return r.a(".highlight-icon.js-sort-by-board",{href:"#"},function(){return r.check("board"===t,"sort-by-board")})}),r.li({class:r.classify({active:"date"===t})},function(){return r.a(".highlight-icon.js-sort-by-due-date",{href:"#"},function(){return r.check("date"===t,"sort-by-due-date")})})})})},{}],878:[function(e,t,n){var r;r=e(544)("member_detail"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d,p;return d=e.upsellEnabled,l=e.showOrgs,n=e.avatarHash,i=e.fullName,s=e.hasCrown,o=e.editable,u=e.initials,p=e.username,c=e.isMe,a=e.hasAccount,t=e.accountProblem,r.div(".tabbed-pane-header",function(){return r.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return r.a({class:r.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"is-editable":o,"js-change-avatar-profile":o,"is-gold":s}),href:"#"},function(){return n?r.img(".profile-image-image",{src:[avatarDomain,n,"170.png"].join("/"),alt:i}):r.span(".profile-image-initials",function(){return r.text(u)}),r.span(".profile-image-change-text",function(){return r.format("change-avatar")})}),r.div(".tabbed-pane-header-details",function(){return r.div(".js-current-details"),o?r.form(".js-profile-form.hide"):void 0})})}),r.div(".tabbed-pane-nav.u-clearfix",function(){return r.ul(function(){r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-member-profile",{"data-tab":"profile",href:["",p].join("/")},function(){return r.format("profile")})}),r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-member-cards",{"data-tab":"cards",href:["",p,"cards"].join("/")},function(){return r.format("cards")})}),c&&(r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-member-account",{"data-tab":"settings",href:["",p,"account"].join("/")},function(){return r.format("settings")})}),d&&(t?r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"billing-issue",href:["",p,"billing"].join("/")},function(){return r.format("billing-issue")})}):a?r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"billing",href:["",p,"billing"].join("/")},function(){return r.format("billing")})}):r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"trello-gold",href:["",p,"billing"].join("/")},function(){return r.span(".icon-lg.icon-trello-gold.mod-inline.icon-trello-gold-color"),r.text(" "),r.format("trello-gold")})})))})}),r.div(".tabbed-pane-main-col.u-clearfix.mod-wider",function(){return r.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return r.span(".tabbed-pane-main-col-loading-spinner.spinner")}),r.div(".tabbed-pane-main-col-wrapper.js-content")})})},{}],879:[function(e,t,n){var r;r=e(544)("member_detail_profile_edit"),t.exports=function(){return r.p(".error.js-profile-form-error.hide"),r.label(function(){return r.format("full-name")}),r.input({type:"text",name:"fullName",value:r.mustacheVar("fullName"),dir:"auto",maxLength:128}),r.label(function(){return r.format("username")}),r.input({type:"text",name:"username",value:r.mustacheVar("username"),maxLength:100}),r.label(function(){return r.format("initials")}),r.input({type:"text",name:"initials",value:r.mustacheVar("initials"),maxLength:8}),r.label(function(){return r.format("bio-optional")}),r.textarea({name:"bio",dir:"auto",maxLength:16384},function(){return r.text(r.mustacheVar("bio"))}),r.input(".primary.wide.js-submit-profile",{type:"submit",value:r.l("save")}),r.input(".js-cancel-edit-profile",{type:"button",value:r.l("cancel")})}},{}],880:[function(e,t,n){var r;r=e(544)("member_detail_profile_info"),t.exports=function(){return r.div(".tabbed-pane-header-details-name",function(){return r.h1(".u-inline",function(){return r.text(r.mustacheVar("fullName"))}),r.p(".window-title-extra.quiet",function(){return r.format("at-username",{username:r.mustacheVar("username")})}),r.mustacheBlock("hasCrown",function(){return r.span(".member-profile-gold-badge",function(){return r.icon("trello-gold",{class:"member-profile-gold-badge-icon"}),r.mustacheBlock("__ed",function(){return r.format("you-ve-got-trello-gold")}),r.mustacheBlockInverted("__ed",function(){return r.format("has-trello-gold")})})})}),r.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return r.mustacheBlock("bioHtml",function(){return r.raw(r.mustacheVar("bioHtml"))})}),r.mustacheBlock("__ed",function(){return r.a(".button-link.tabbed-pane-header-details-edit.js-edit-profile",{href:"#"},function(){return r.icon("edit","edit-profile")})})}},{}],881:[function(e,t,n){var r;r=e(544)("member_gold_earned"),t.exports=r.renderable(function(e){var t,n,o,i,a;return n=e.hasInvitations,o=e.joinedNames,i=e.localizedCongratulations,a=e.showClose,t=e.hasGold,r.div(".window-module.gold-earned-modal",function(){return a&&r.a(".icon-lg.icon-close.dark-hover.gold-earned-modal-close.js-close-modal",{href:"#"}),r.img(".gold-earned-modal-image",{src:"https://a.trellocdn.com/images/3cbf48993d46484c5d82cc9c1844a54b/TrelloGoldIcon.png"}),r.h1(function(){return n?r.format("youve-earned-trello-gold"):r.format("youve-got-trello-gold")}),r.p(function(){return r.text(i)}),r.p(function(){return r.format("the-following-people-have-joined-trello-on-your-recommendation-or-invite"),r.ul(function(){return o.forEach(function(e){return r.li(function(){return r.text(e)})})})}),r.p(".gold-earned-modal-learn-more.quiet",function(){return r.a({href:"/gold"},function(){return r.format("learn-more-about-trello-gold")})}),t||r.a(".gold-earned-modal-button.button.primary.js-start-using-gold",{href:"#"},function(){return r.format("start-using-trello-gold")}),a?r.p(".quiet",{style:"margin-top: 16px;"},function(){return r.format("you-can-visit-your-account-settings-page-later-to-redeem-your-credits"),r.a(".js-close-modal",{href:"#"},function(){return r.text(" "),r.format("okay-thanks-close-this-header-thing")})}):void 0})})},{}],882:[function(e,t,n){var r;r=e(544)("member_gold_intro"),t.exports=r.renderable(function(e){var t;return t=e.hasThreePowerups,r.div(".product-intro-modal.gold-intro",function(){var e,n;return n=0,e=function(){return n+=1,r.span(".product-intro-number",function(){return r.text(n.toString())})},r.a(".icon-lg.icon-close.dark-hover.product-intro-close.js-close-intro-helper",{href:"#"}),r.div(".product-intro-header",function(){return r.img(".product-intro-logo",{src:"https://a.trellocdn.com/images/6d243fedef388195ac2dd4bf3f6fcfa5/TrelloGoldLogo.png",alt:"Trello Gold"})}),r.hr(),r.h2(function(){return r.format("yessssss-youve-got-trello-gold")}),r.p(function(){return r.format("here-s-what-you-need-to-know-to-get-started-ellipsis")}),t&&r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("more-power-ups")}),r.p(function(){return r.format("you-can-turn-on-up-to-three-power-ups-on-each-of-your-boards")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("stickers")}),r.p(function(){return r.format("check-out-the-stickers-pane-on-the-menu-of-any-board-you-can-view-and-stick-additional-stickers-and-upload-your-own-from-there")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("board-backgrounds")}),r.p(function(){return r.format("check-out-the-settings-pane-in-the-menu-of-any-board-and-select-change-board-background-from-there-you-can-view-and-use-additional-backgrounds-and-upload-your-own")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("larger-attachments")}),r.p(function(){return r.format("you-can-now-upload-files-up-to-250mb-just-select-a-file-via-attach-file-ellipsis-on-the-back-of-the-card-or-drag-and-drop-from-your-desktop")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("uploading-custom-emoji")}),r.p(function(){return r.format("while-on-a-card-open-the-comment-field-click-the-menu-button-in-the-bottom-right-hand-corner-and-select-upload-emoji-you-can-upload-images-and-name-the-emoji-from-there")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("billing-page")}),r.p(function(){return r.format("check-out-the-billing-tab-for-future-reference-you-can-see-when-your-account-will-renew-update-your-credit-card-info-see-billing-history-and-so-on-if-you-signed-up-via-credits-you-can-check-when-your-credits-expire-and-you-can-enter-a-credit-card-and-sign-up-for-a-subscription")})}),r.p(function(){return r.format("this-will-be-in-the-trello-gold-user-guide-for-future-reference-enjoy-and-thanks-for-upgrading")}),r.p(".product-intro-close-bottom.u-text-align-center.quiet",function(){return r.a(".js-close-intro-helper.dark-hover",{href:"#"},function(){return r.icon("close","got-it-close-this-helper",{class:"dark-hover"})})})})})},{}],883:[function(e,t,n){var r;r=e(544)("member_inline"),t.exports=function(){return r.mustacheBlock("avatarHash",function(){return r.img(".inline-member-av",{src:r.mustacheVar("__avatarDomain")+"/"+r.mustacheVar("avatarHash")+"/30.png",alt:r.mustacheVar("fullName")+" ("+r.mustacheVar("username")+")",title:r.mustacheVar("fullName")+" ("+r.mustacheVar("username")+")"})}),r.span(".u-font-weight-bold",function(){return r.text(r.mustacheVar("fullName"))})}},{}],884:[function(e,t,n){var r;r=e(544)("member_large_avatar"),t.exports=r.renderable(function(e){var t,n,o,i;return t=e.avatarHash,n=e.fullName,i=e.username,o=n+" ("+i+")",r.img({src:[window.avatarDomain,t,"original.png"].join("/"),alt:o,title:o})})},{}],885:[function(e,t,n){var r,o;o=e(544)("member_list_item_detail"),r=e(863),t.exports=function(){return o.div({class:"member member-no-menu"+o.mustacheBlock("isVirtual",function(){
return" member-virtual"})+o.mustacheBlock("isDeactivated",function(){return" member-deactivated"})},function(){return r(o.mustacheVar("."))}),o.div(".details",function(){return o.p(".name-line",function(){return o.span(".full-name",function(){return o.text(o.mustacheVar("fullName"))})}),o.p(".u-bottom.quiet",function(){return o.mustacheBlock("username",function(){return o.span(".quiet.u-inline-block",function(){return o.format("at-username",{username:o.mustacheVar("username")})})}),o.mustacheBlock("showGoogleApps",function(){return o.mustacheBlock("gMail",function(){return o.mustacheBlock("username",function(){return o.text("- ")}),o.icon("google"),o.text(o.mustacheVar("gMail"))})})})}),o.div(".options",function(){return o.mustacheBlock("isOrgMember",function(){return o.mustacheBlock("showActivity",function(){return o.a(".option.quiet-button.js-view-activity",{href:"#"},function(){return o.format("activity")})}),o.mustacheBlock("allowTypeChange",function(){return o.a(".option.button-link.role-button.js-change-role",{href:"#"},function(){return o.text(o.mustacheVar("orgMemberType")),o.icon("overflow-menu-horizontal")})}),o.mustacheBlockInverted("allowTypeChange",function(){return o.p(".option.status.quiet",function(){return o.text(o.mustacheVar("orgMemberType"))})}),o.mustacheBlock("allowReactivate",function(){return o.a(".option.quiet-button.js-reactivate",{href:"#"},function(){return o.format("reactivate")})}),o.mustacheBlock("isMe",function(){return o.a({class:"option button-link remove-button js-remove-or-deactivate "+o.mustacheBlockInverted("canRemove",function(){return"disabled"}),href:"#"},function(){return o.mustacheBlock("orgIsBC",function(){return o.icon("close","leave-ellipsis")}),o.mustacheBlockInverted("orgIsBC",function(){return o.icon("close","leave")})})}),o.mustacheBlockInverted("isMe",function(){return o.mustacheBlock("ownsOrg",function(){return o.a({class:"option button-link remove-button js-remove-or-deactivate "+o.mustacheBlockInverted("canRemove",function(){return"disabled"}),href:"#"},function(){return o.icon("close","remove-ellipsis")})})})}),o.mustacheBlockInverted("isOrgMember",function(){return o.mustacheBlock("showGoogleApps",function(){return o.mustacheBlockInverted("hidden",function(){return o.a(".option.quiet-button.js-hide-member",{href:"#"},function(){return o.format("dismiss")})}),o.mustacheBlock("hidden",function(){return o.a(".option.quiet-button.js-unhide-member",{href:"#"},function(){return o.format("always-show")})}),o.a(".option.button-link.primary.js-invite-to-org",{href:"#"},function(){return o.icon("add","add-member")})})})})}},{}],886:[function(e,t,n){var r;r=e(544)("member_login"),t.exports=function(){return r.p(".member-login-email.u-bottom",function(){return r.text(r.mustacheVar("email"))}),r.mustacheBlock("primary",function(){return r.p(".u-bottom.quiet",function(){return r.format("primary-email")})}),r.mustacheBlockInverted("primary",function(){return r.a(".js-primary.u-bottom.quiet",{href:"#"},function(){return r.format("set-as-primary-email")})}),r.p(".member-login-date-added.u-bottom.quiet",function(){return r.format("added",{dateAdded:r.mustacheVar("dateAdded")})}),r.mustacheBlockInverted("primary",function(){return r.icon("close",{class:"member-login-remove dark-hover js-remove"})})}},{}],887:[function(e,t,n){var r;r=e(544)("member_on_board_menu"),t.exports=function(){return r.li(function(){return r.mustacheVar("canInviteMemberToTeam")&&r.a({class:"js-add-to-team",href:"#"},function(){return r.format("add-to-team")}),r.mustacheBlock("type",function(){return r.a({class:r.mustacheBlock("canChangeRole",function(){return"js-change-role"})+r.mustacheBlockInverted("canChangeRole",function(){return"disabled"}),href:"#"},function(){return r.format("change-permissions-ellipsis-type",{type:r.mustacheVar("type")})})}),r.mustacheBlockInverted("type",function(){return r.a({class:r.mustacheBlock("canChangeRole",function(){return"js-change-role"})+r.mustacheBlockInverted("canChangeRole",function(){return"disabled"}),href:"#"},function(){return r.format("change-permissions-ellipsis")})})}),r.li(function(){return r.a({href:r.mustacheVar("boardProfileUrl")},function(){return r.format("view-member-s-board-activity")})}),r.mustacheBlock("canRemove",function(){return r.li(function(){return r.a(".js-remove-member",function(){return r.mustacheBlock("isMe",function(){return r.format("leave-board-ellipsis")}),r.mustacheBlockInverted("isMe",function(){return r.format("remove-from-board-ellipsis")})})})}),r.mustacheBlockInverted("canRemove",function(){return r.mustacheBlock("isMe",function(){return r.mustacheBlock("isMoreThanOneMember",function(){return r.mustacheBlock("memberIsAdmin",function(){return r.li(function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("you-can-t-leave-because-you-are-the-only-admin-to-make-another-user-an-admin-click-their-avatar-select-change-permissions-ellipsis-and-select-admin")})})})})})}),r.mustacheBlock("isGhost",function(){return r.li(function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("this-user-will-be-able-to-access-this-board-once-they-sign-up-with-trello-and-confirm-their-email-address")})})})}},{}],888:[function(e,t,n){var r,o;o=e(544)("member_on_card"),r=e(863),t.exports=o.renderable(function(e){var t,n,i,a,s,u,c,l,d;return t=e.avatarHash,n=e.fullName,i=e.id,a=e.initials,u=e.isDeactivated,s=e.isBoardAdmin,c=e.isOrganizationAdmin,l=e.isVirtual,d=e.username,o.div(".member.js-member-on-card-menu",{class:o.classify({"member-deactivated":u,"member-virtual":l}),"data-idmem":i},function(){return r({avatarHash:t,fullName:n,initials:a,isDeactivated:u,isBoardAdmin:s,isOrganizationAdmin:c,username:d})})})},{}],889:[function(e,t,n){var r;r=e(544)("member_on_card_menu"),t.exports=function(){return r.mustacheBlock("__ed",function(){return r.li(function(){return r.a(".js-remove-member",function(){return r.format("remove-from-card")})})})}},{}],890:[function(e,t,n){var r;r=e(544)("member_profile"),t.exports=function(){return r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.span(".window-module-title-icon.icon-lg.icon-organization"),r.h3(function(){return r.format("organizations")})}),r.div(".u-gutter.js-list-orgs")}),r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.span(".window-module-title-icon.icon-lg.icon-activity"),r.h3(function(){return r.format("activity")})}),r.div(".list-actions"),r.p(".u-bottom",function(){return r.a(".show-more.js-more-actions",{href:"#"},function(){return r.format("load-more-activity")})})})}},{}],891:[function(e,t,n){var r,o;o=e(544)("member_profile_info"),r=e(863),t.exports=function(){return o.div(".member-profile-info.u-clearfix",{name:o.mustacheVar("username")},function(){return o.div(".member",function(){return r(o.mustacheVar("."))}),o.div(".info",function(){return o.h3(".u-bottom",function(){return o.a(".js-profile",{href:"/"+o.mustacheVar("username")},function(){return o.text(o.mustacheVar("fullName"))})}),o.p(".quiet.u-bottom",function(){return o.format("at-username",{username:o.mustacheVar("username")})}),o.mustacheBlock("bio",function(){return o.p(".member-profile-info-bio.quiet",{title:o.mustacheVar("bio")},function(){return o.raw(o.mustacheVar("bioHtml"))})}),o.p(".quiet.u-bottom",function(){return o.mustacheBlock("showMemberOptions",function(){return o.mustacheBlock("orgCardsUrl",function(){return o.a({href:o.mustacheVar("orgCardsUrl")},function(){return o.format("view-org-cards")})}),o.mustacheBlock("__ed",function(){return o.span(function(){return o.a(".js-remove-mem",{href:"#"},function(){return o.format("remove-from-org")})})})})})})})}},{}],892:[function(e,t,n){var r;r=e(544)("member_session"),t.exports=function(){return r.mustacheBlock("type_support",function(){return r.p(".u-bottom",function(){return r.format("authorization-for-trello-support-ticket-data-ticket",{"data.ticket":r.mustacheVar("data.ticket")}),r.br(),r.span(".quiet",function(){return r.format("expires",{dateExpires:r.mustacheVar("dateExpires")}),r.raw(" "),r.a(".quiet.js-revoke",{href:"#"},function(){return r.format("revoke")})})})}),r.mustacheBlockInverted("type_support",function(){return r.p(".u-bottom",function(){return r.strong(function(){return r.text(r.mustacheVar("ipAddress"))}),r.span(".quiet"),r.br(),r.span(".quiet",function(){return r.mustacheBlock("isRecent",function(){return r.mustacheBlock("isCurrent",function(){return r.format("last-used-less-than-an-hour-ago-current-session")}),r.mustacheBlockInverted("isCurrent",function(){return r.format("last-used-less-than-an-hour-ago")})}),r.mustacheBlockInverted("isRecent",function(){return r.mustacheBlock("isCurrent",function(){return r.format("last-used-current-session",{dateLastUsed:r.mustacheVar("dateLastUsed")})}),r.mustacheBlockInverted("isCurrent",function(){return r.format("last-used",{dateLastUsed:r.mustacheVar("dateLastUsed")})})})})})})}},{}],893:[function(e,t,n){var r;r=e(544)("member_session_list"),t.exports=function(){return r.div(".js-sessions"),r.input(".js-log-out-other",{type:"button",value:r.l("log-out-other-sessions")})}},{}],894:[function(e,t,n){var r,o;o=e(544)("members_voted"),r=e(863),t.exports=function(){return o.mustacheBlock("loading",function(){return o.p(".quiet.u-text-align-center",{style:"margin: 24px 0;"},function(){return o.format("loading-ellipsis")})}),o.mustacheBlockInverted("loading",function(){return o.div({class:"list-voters u-clearfix "+o.mustacheBlock("fewMembers",function(){return"compact"})},function(){return o.mustacheBlock("members",function(){return o.div(".voter",function(){return o.div(".member.member-no-menu",function(){return r(o.mustacheVar("."))}),o.mustacheBlock("fewMembers",function(){return o.p(".title",function(){return o.text(o.mustacheVar("fullName")),o.text(" "),o.span(".quiet",function(){return o.format("username",{username:o.mustacheVar("username")})})})})})})}),o.mustacheBlock("moreMembers",function(){return o.a(".show-more.mod-compact.js-more-members-voted",{href:"#"},function(){return o.format("show-all-voters-lengthdiff-more",{lengthDiff:o.mustacheVar("lengthDiff")})})}),o.mustacheBlock("canVote",function(){return o.hr(),o.mustacheBlock("voted",function(){return o.a(".quiet-button.u-text-align-center.js-unvote",{href:"#"},function(){return o.format("remove-your-vote")})}),o.mustacheBlockInverted("voted",function(){return o.button(".button.primary.full.js-vote",{href:"#"},function(){return o.format("vote")})})})})}},{}],895:[function(e,t,n){var r;r=e(544)("menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.ul(".dynamic-pop-over-list")}),r.mustacheBlock("menu_cards",function(){return r.li(function(){return r.a({class:r.mustacheVar("js_class"),href:r.mustacheBlock("url",function(){return r.mustacheVar("url")})+r.mustacheBlockInverted("url",function(){return"#"})},function(){return r.text(r.mustacheVar("name"))})})})})}},{}],896:[function(e,t,n){var r;r=e(544)("menu_base"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.ul(".boards-pop-over-list")}),r.raw(r.mustacheVar("content"))})}},{}],897:[function(e,t,n){var r;r=e(544)("mini_profile"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c;return t=e.avatarHash,i=e.fullName,c=e.username,a=e.initials,n=e.bio,o=e.email,u=e.showEmail,s=e.isMe,r.div(".mini-profile",function(){return r.div(".mini-profile-member.member-large",function(){var e;return s?r.a(".av-btn.change.js-change-av",{href:"#"},function(){return r.format("change")}):t&&r.a(".av-btn.js-view-large",{href:"#"}),e=i+" ("+c+")",t?r.img(".member-avatar",{height:"50",width:"50",src:[window.avatarDomain,t,"50.png"].join("/"),alt:e,title:e}):r.span(".member-initials",{title:e},function(){return r.text(a)})}),r.div(".mini-profile-info",function(){return r.h3(".mini-profile-info-title",function(){return r.a(".mini-profile-info-title-link.js-profile",{href:"/"+c},function(){return r.text(i)})}),r.p(".quiet.u-bottom",function(){return r.format("at-username",{username:c})}),n&&r.p(".mini-profile-info-bio.quiet",function(){return r.text(n)}),u&&r.p(".u-bottom.quiet",function(){return r.text(o)}),s?r.p(".u-bottom",function(){return r.a(".quiet.js-edit-profile",{href:"#"},function(){return r.format("edit-profile-info")})}):void 0})})})},{}],898:[function(e,t,n){var r;r=e(544)("move_card_controls"),t.exports=function(){return r.mustacheBlockInverted("hideBoard",function(){return r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("board")}),r.span(".value.js-board-value"),r.label(function(){return r.format("board")}),r.select(".js-select-board",function(){return r.mustacheBlock("organizations",function(){return r.optgroup({label:r.mustacheVar("displayName")},function(){return r.mustacheBlock("boards",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("name")),r.mustacheBlock("selected",function(){return r.text(" "),r.format("current")})})})})})})})})}),r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-threequarters",function(){return r.span(".label",function(){return r.format("list")}),r.span(".value.js-list-value"),r.label(function(){return r.format("list")}),r.select(".js-select-list")}),r.div(".button-link.setting.form-grid-child.form-grid-child-quarter",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-position")})})}},{}],899:[function(e,t,n){var r;r=e(544)("observer_list"),t.exports=function(){return r.ul({class:"pop-over-member-list js-list "+r.mustacheBlock("__ed",function(){return"js-list-draggable-board-members"})})}},{}],900:[function(e,t,n){var r;r=e(544)("org_bc_intro"),t.exports=r.renderable(function(e){var t,n,o;return o=e.isEnterprise,t=e.hasCSVExport,n=e.hasGoldMembers,r.div(".product-intro-modal.bc-intro",function(){var e,i;return i=0,e=function(){return i+=1,r.span(".product-intro-number",function(){return r.text(i.toString())})},r.a(".icon-lg.icon-close.dark-hover.product-intro-close.js-close-intro-helper",{href:"#"}),r.div(".product-intro-header",function(){return o?r.img(".product-intro-logo",{src:"https://a.trellocdn.com/images/c44c457cc4c18c2cb7d1cb3b27effeda/trello-enterprise-with-text.png",alt:"Trello Enterprise"}):r.img(".product-intro-logo",{src:"https://a.trellocdn.com/images/65f97b9241872243c0b94f8bfa08a66a/trello-business-class-with-text.png",alt:"Trello Business Class"})}),r.hr(),r.div(".product-intro-section",function(){return r.h2(function(){return o?r.format("welcome-to-enterprise"):r.format("welcome-to-business-class")}),r.p(function(){return r.format("to-get-started")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("visit-the-members-tab-to-manage-members")}),r.p(function(){return r.format("you-can-link-your-google-apps-domain-change-roles-and-deactivate-members-and-view-member-activity-on-the-members-tab-above")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("check-out-the-organization-settings-page")}),r.p(function(){return r.format("to-check-out-organization-and-board-invite-restrictions-and-board-creation-restrictions-click-the-organization-settings-tab-above")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("organize-your-boards-with-collections")}),r.p(function(){return r.format("scroll-down-on-this-page-to-see-your-teams-boards-and-click-create-a-collecction")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("supercharge-your-boards-with-Power-Ups")}),r.p(function(){return r.format("open-the-power-ups-menu-in-the-menu-on-the-right-side-of-your-teams-boards-to-integrate-trello")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("create-bulk-exports-in-one-click")}),r.p(function(){return t?r.format("click-the-export-tab-to-open-the-export-dialog-exports-include-all-of-your-organization-s-data-optionally-including-attachments-exports-will-be-in-csv-and-json-format"):r.format("click-the-export-tab-to-open-the-export-dialog-exports-include-all-of-your-organization-s-data-optionally-including-attachments-exports-will-be-in-json-format")})}),n&&r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("use-board-backgrounds-and-stickers")}),r.p(function(){return r.format("open-the-board-menu-and-select-stickers-or-change-background-you-ll-see-additional-stickers-and-backgrounds-plus-you-can-upload-your-own")})}),o||r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("for-billing-info-ellipsis")}),r.p(function(){return r.format("to-see-billing-history-change-a-credit-card-or-change-the-billing-contact-click-the-billing-tab-above")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("check-the-user-guide")}),r.p({style:"margin-bottom: 0;"},function(){return o?r.format("everything-else-is-outlined-in-the-enterprise-user-guide"):r.format("everything-else-is-outlined-in-the-business-class-user-guide-business-class-features-are-usually-marked-with-this-icon")})}),r.p(".product-intro-close-bottom.u-text-align-center.quiet",function(){return r.a(".js-close-intro-helper.dark-hover",{href:"#"},function(){return r.icon("close","got-it-close-this-helper",{class:"dark-hover"})})})})})},{}],901:[function(e,t,n){var r;r=e(544)("org_boards_for_member"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("boards",function(){return r.li(function(){return r.a({href:r.mustacheVar("url")},function(){return r.text(r.mustacheVar("name")),r.text(" "),r.span(".quiet",function(){return r.format("membertype",{memberType:r.mustacheVar("memberType")})})})})})})}},{}],902:[function(e,t,n){var r,o;o=e(544)("org_create"),r=e(41),t.exports=function(){return o.form(function(){return o.p(".error",{style:"display:none"}),o.label({for:"org-display-name"},function(){return o.format("name")}),o.input(".js-autofocus.js-display-name",{type:"text",name:"displayName",id:"org-display-name",value:o.mustacheVar("displayName"),dir:"auto",maxLength:100}),o.label({for:"org-desc"},function(){return o.format("description-optional")}),o.textarea({id:"org-desc",name:"desc",dir:"auto"},function(){return o.text(o.mustacheVar("desc"))}),o.mustacheVar("boardToAddToOrg")&&o.mustacheVar("memberCount")>1&&o.label(".create-team-add-members",function(){return o.input(".js-add-members",{type:"checkbox",checked:!0}),o.format("add-the-members-of-this-board-to-the-team")}),o.input(".primary.wide.js-save",{type:"submit",value:o.l("create")})}),o.hr(),o.p(".quiet",function(){return o.format("a-team-is-a-group-of-boards-and-people")}),r.get("dontUpsell")?void 0:o.p(".quiet.u-bottom",function(){return o.format("business-class-gives-your-organization-more"),o.text(" "),o.a(".js-business-class",{href:"/business-class",target:"_blank"},function(){return o.format("learn-more")})})}},{}],903:[function(e,t,n){var r;r=e(544)("org_detail"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d,p,h,m;return p=e.name,n=e.editable,d=e.logoHash,s=e.isEnterprise,h=e.paysWithPurchaseOrder,a=e.isBusinessClassAdmin,c=e.isInOrg,l=e.isOrgAdmin,o=e.hasAccount,t=e.accountProblem,u=e.isFullWidth,i=e.hasUnlimitedPowerUps,m=e.upsellEnabled,r.div(".tabbed-pane-header",function(){return r.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return r.a({class:r.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"is-editable":n,"js-change-org-logo":n}),href:"#"},function(){return d?r.img(".profile-image-image",{src:[logoDomain,d,"170.png"].join("/")}):r.span(".profile-image-icon.icon-lg.icon-organization"),r.span(".profile-image-change-text",function(){return r.format("change-logo")})}),r.div(".tabbed-pane-header-details",function(){return r.div(".js-current-details"),n?r.form(".js-profile-form.hide"):void 0})})}),r.div(".tabbed-pane-nav.u-clearfix",function(){return r.ul(function(){var e;r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-profile",{"data-tab":"boards",href:["",p].join("/")},function(){return r.format("boards")})}),r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-members",{"data-tab":"members",href:["",p,"members"].join("/")},function(){return r.format("members")})}),a&&r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-export",{"data-tab":"export",href:["",p,"export"].join("/")},function(){return r.icon("business-class"),r.format("export")})}),c&&r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-account",{"data-tab":"settings",href:["",p,"account"].join("/")},function(){return r.format("settings")})}),c&&!s&&!h&&m&&(e=["",p,"billing"].join("/"),r.li(".tabbed-pane-nav-item",function(){return o?t?r.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"billing-issue",href:e},function(){return r.format("billing-issue")}):r.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"billing",href:e},function(){return r.format("billing")}):i?void 0:r.a(".tabbed-pane-nav-item-button.dark-hover.js-billing",{"data-tab":"business-class",href:e},function(){return r.span(".icon-sm.icon-business-class.mod-inline.icon-business-class-color"),r.text(" "),r.format("business class")})}))})}),r.div(".tabbed-pane-main-col.u-clearfix",function(){return r.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return r.span(".tabbed-pane-main-col-loading-spinner.spinner")}),r.div({class:r.classify({"tabbed-pane-main-col-wrapper":!0,"js-content":!0,"is-full-width":u})})})})},{}],904:[function(e,t,n){var r;r=e(544)("org_detail_profile_edit"),t.exports=function(){return r.p(".error.js-profile-form-error.hide"),r.label(function(){return r.format("name")}),r.input({type:"text",name:"displayName",value:r.mustacheVar("displayName"),dir:"auto"}),r.label(function(){return r.format("short-name")}),r.input({type:"text",name:"name",value:r.mustacheVar("name")}),r.label(function(){return r.format("website")}),r.input({type:"text",name:"website",value:r.mustacheVar("website")}),r.label(function(){return r.format("description-optional")}),r.textarea({name:"desc",dir:"auto"},function(){return r.text(r.mustacheVar("desc"))}),r.input(".primary.wide.js-submit-profile",{type:"submit",value:r.l("save")}),r.input(".js-cancel-edit-profile",{type:"button",value:r.l("cancel")})}},{}],905:[function(e,t,n){var r;r=e(544)("org_detail_profile_info"),t.exports=r.renderable(function(e){var t,n,o,i,a,s,u,c,l,d,p,h;return i=e.displayName,a=e.enterpriseUI,s=e.isBusinessClass,d=e.permissionLevel,c=e.pLevelAltText,l=e.pLevelDisplayText,o=e.descriptionHtml,h=e.websiteHref,p=e.website,t=e.accountProblem,u=e.name,n=e.canEdit,r.div(".tabbed-pane-header-details-name",function(){return r.h1(".u-inline",function(){return r.text(i)}),a?r.span(".window-title-extra",function(){return r.icon("enterprise"),r.format("enterprise")}):s&&r.span(".window-title-extra",function(){return r.icon("business-class"),r.format("business-class")}),r.span(".window-title-extra",function(){return r.icon(d,{title:c}),r.text(l)})}),r.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return null!=o&&r.raw(o),null!=h&&r.p(function(){return r.a({href:h},function(){return r.text(p)})}),t?r.div({style:"padding: 4px 8px; background-color: orange; margin-bottom: 8px;"},function(){return r.p(".u-bottom",function(){return r.format("oops-there-is-a-problem-with-your-billing-information-visit-billing-to-fix-it",{name:u})})}):void 0}),n?r.a(".button-link.tabbed-pane-header-details-edit.js-edit-profile",{href:"#"},function(){return r.icon("edit","edit-profile")}):void 0})},{}],906:[function(e,t,n){var r;r=e(544)("org_export"),t.exports=function(){return r.div(".window-module.org-export-header",function(){return r.button(".org-export-header-button.primary.js-create-new-export",function(){return r.format("create-new-export")}),r.div(".org-export-header-options.u-clearfix",function(){return r.input({id:"includeAttachments",type:"checkbox"}),r.label(".quiet.u-inline.u-font-weight-normal",{for:"includeAttachments"},function(){return r.format("include-raw-attachments-ellipsis")})}),r.p(".quiet.org-export-header-text",function(){return r.mustacheBlock("hasCSV",function(){return r.format("downloads-will-be-in-a-zip-format-that-includes-members-boards-and-all-other-data-in-csv-and-json-formats-if-you-choose-to-include-raw-attachments-they-will-be-in-their-native-format-otherwise-they-will-include-a-link-to-the-version-in-trello")}),r.mustacheBlockInverted("hasCSV",function(){return r.format("downloads-will-be-in-a-zip-format-that-includes-members-boards-and-all-other-data-in-json-format-if-you-choose-to-include-raw-attachments-they-will-be-in-their-native-format-otherwise-they-will-include-a-link-to-the-version-in-trello")})})}),r.div(".window-module.org-export-list",function(){return r.div(".window-module-title",function(){return r.span(".window-module-title-icon.icon-lg.icon-archive"),r.h3(function(){return r.format("exports")})}),r.div(".u-gutter.u-clearfix.js-list-exports")})}},{}],907:[function(e,t,n){var r;r=e(544)("org_export_empty"),t.exports=function(){return r.p(".quiet",{style:"padding: 7px 0;"},function(){return r.format("no-exports-click-create-new-export-to-generate-a-new-one")})}},{}],908:[function(e,t,n){var r;r=e(544)("org_export_item"),t.exports=function(){return r.div({class:"org-export-list-item u-clearfix"+r.mustacheBlock("generating",function(){return" org-export-list-item-generating"})},function(){return r.mustacheBlock("generating",function(){return r.p(".org-export-list-item-title",function(){return r.mustacheBlock("status",function(){return r.text(r.mustacheVar("stage")),r.mustacheBlock("total",function(){return r.format("progress-of-total",{progress:r.mustacheVar("progress"),total:r.mustacheVar("total")})})}),r.mustacheBlockInverted("status",function(){return r.format("creating-new-export-ellipsis")})})}),r.mustacheBlockInverted("generating",function(){return r.p(".org-export-list-item-title",function(){return r.mustacheBlock("attachments",function(){return r.format("time-size-includes-attachments",{time:r.mustacheVar("time"),size:r.mustacheVar("size")})}),r.mustacheBlockInverted("attachments",function(){return r.format("time-size",{time:r.mustacheVar("time"),size:r.mustacheVar("size")})})}),r.a(".button-link.org-export-list-item-button.js-download-export",{href:r.mustacheVar("exportUrl"),target:"_blank"},function(){return r.format("download")})})})}},{}],909:[function(e,t,n){var r;r=e(544)("org_link_ga_helper"),t.exports=function(){return r.div(".ga-link-helper-section",function(){return r.p(function(){return r.format("1-first-you-must-enable-administrative-api-access-for-your-google-apps-domain-you-can-find-instructions-for-doing-so-here")}),r.p(function(){return r.format("2-next-you-ll-need-to-add-the-trello-business-class-app-from-the-google-apps-marketplace-to-your-domain-the-button-below-will-get-you-there")}),r.p(function(){return r.format("3-when-there-be-sure-you-are-signed-in-to-the-google-account-with-the-correct-domain-you-want-to-use-click-the-integrate-with-google-button-then-follow-the-prompts")}),r.p(function(){return r.format("4-you-ll-see-other-users-from-your-google-apps-domain-on-this-page-when-configured-correctly")})}),r.a(".button.js-link",{style:"width: 100%; padding: 7px 0;",target:"_blank",href:"https://chrome.google.com/webstore/detail/trello-business-class/hmhbhkhihjbjgghmkhhniddhlojffhil"},function(){return r.format("go-to-google-apps-marketplace")})}},{}],910:[function(e,t,n){var r;r=e(544)("org_member_activity"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.mustacheBlock("hasBoards",function(){return r.a(".js-view-org-boards-for-member",{href:"#"},function(){return r.format("on-boardcount",{boardCount:r.mustacheVar("boardCount")})})}),r.mustacheBlockInverted("hasBoards",function(){return r.a(".disabled",{href:"#"},function(){return r.format("on-boardcount",{boardCount:r.mustacheVar("boardCount")})})})}),r.mustacheBlock("orgCardsUrl",function(){return r.li(function(){return r.a(".js-view-member-org-cards",{href:r.mustacheVar("orgCardsUrl")},function(){return r.format("view-members-org-cards")})})})}),r.mustacheBlock("lastActive",function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("fullname-was-last-active-in-this-organization",{fullName:r.mustacheVar("fullName"),lastActive:r.mustacheVar("lastActive")})})})}},{}],911:[function(e,t,n){var r;r=e(544)("org_pref_restriction"),t.exports=function(){return r.li(function(){return r.text(r.mustacheVar("restriction")),r.a(".dark-hover.js-restricted-address",{href:"#","data-pattern":r.mustacheVar("restriction")},function(){return r.icon("close",{class:"option close"})})})}},{}],912:[function(e,t,n){var r;r=e(544)("org_prefs_nonorg_invites"),t.exports=r.renderable(function(e){var t;return t=e.externalMembersDisabled,r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-be-added-to-team-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",function(){return r.li({class:r.classify({active:t})},function(){return r.a({href:"#"},function(){return r.format("only-team-members")})}),r.li({class:r.classify({active:!t})},function(){return r.a({href:"#"},function(){return r.format("anybody")})})})})})},{}],913:[function(e,t,n){var r;r=e(544)("org_prefs_restrict_invites"),t.exports=r.renderable(function(e){var t,n,o;return t=e.hasRestrictions,n=e.hasSlack,o=e.slackSelfJoin,r.div(function(){return r.div(".pop-over-sub-heading",function(){return r.format("email-domain-restrictions")}),r.form(".form-grid.js-form",function(){return r.div(".form-grid-child-threequarters.u-relative",function(){return r.input(".js-input-restricted.js-autofocus",{type:"text",placeholder:r.l("add-a-domain-or-address-ellipsis"),style:"margin-bottom: 6px;"}),r.span(".spinner.small.hide.js-loading",{style:"position: absolute; top: 12px; right: 8px; z-index: 2;"})}),r.div(".form-grid-child-quarter",function(){return r.input(".mod-inline-with-text-input.primary.js-form-submit-input",{type:"submit",value:r.l("add")})})}),r.p(".u-bottom.quiet",{style:"padding: 6px;"},function(){return r.format("choose-which-email-domains-and-addresses-can-be-added-to-the-organization-for-example-if-you-only-wanted-users-with-trello-com-email-addresses-to-be-able-to-be-added-to-the-organization-enter-trello-com")}),r.p(".error.u-bottom.js-errors",{style:"display: none; margin-top: 8px;"}),r.div(".pop-over-section.js-restriction-list",{style:r.stylify({"margin-top":"16px",display:t?"block":"none"})},function(){return r.h4(function(){return r.format("allowed-domains-and-addresses")}),r.ul(".closeable-list.js-list")})})})},{}],914:[function(e,t,n){var r;r=e(544)("org_prefs_vis"),t.exports=function(){return r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-create-public-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"public"},function(){return r.li({class:r.mustacheBlock("boardVisibilityRestrict_public_org",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"org"},function(){return r.format("any-organization-member")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_public_admin",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"admin"},function(){return r.format("only-organization-admins")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_public_none",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"none"},function(){return r.format("nobody")})})})}),r.hr(),
r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-create-organization-visible-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"org"},function(){return r.li({class:r.mustacheBlock("boardVisibilityRestrict_org_org",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"org"},function(){return r.format("any-organization-member")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_org_admin",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"admin"},function(){return r.format("only-organization-admins")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_org_none",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"none"},function(){return r.format("nobody")})})})}),r.hr(),r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-create-private-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"private"},function(){return r.li({class:r.mustacheBlock("boardVisibilityRestrict_private_org",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"org"},function(){return r.format("any-organization-member")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_private_admin",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"admin"},function(){return r.format("only-organization-admins")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_private_none",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"none"},function(){return r.format("nobody")})})})})}},{}],915:[function(e,t,n){var r;r=e(544)("org_remove_or_deactivate_member"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(".u-clearfix",function(){return r.a(".js-soft-remove",{href:"#"},function(){return r.span(".u-clearfix",function(){return r.mustacheBlock("isMe",function(){return r.format("leave-organization")}),r.mustacheBlockInverted("isMe",function(){return r.format("remove-from-organization")})}),r.span(".sub-name",function(){return r.mustacheBlock("isDeactivated",function(){return r.format("remove-all-access-to-the-organization-and-all-boards")}),r.mustacheBlockInverted("isDeactivated",function(){return r.mustacheBlock("orgIsBC",function(){return r.format("remove-all-access-to-the-organization")}),r.mustacheBlockInverted("orgIsBC",function(){return r.format("remove-all-access-to-the-organization-the-member-will-remain-on-all-their-boards-in-this-organization-they-will-receive-a-notification")})})})}),r.mustacheBlock("orgIsBC",function(){return r.mustacheBlockInverted("isDeactivated",function(){return r.mustacheBlockInverted("isMe",function(){return r.span(".check-div.quiet.u-clearfix",{style:"margin-left: 24px; padding-top: 2px; font-size: 12px; line-height: 15px;"},function(){return r.input({type:"checkbox",id:"hardRemove",name:"hard",checked:!0}),r.label({for:"hardRemove"},function(){return r.format("check-this-box-to-remove-the-member-from-all-boards")})})})})})}),r.mustacheBlock("canDeactivate",function(){return r.mustacheBlockInverted("isMe",function(){return r.li(".u-clearfix",function(){return r.a(".js-deactivate",{href:"#"},function(){return r.format("deactivate-disable-members-access-to-organization-boards-but-allow-other-organization-members-to-see-what-the-cards-and-boards-the-member-was-on")})})})})})}},{}],916:[function(e,t,n){var r;r=e(544)("org_slack_restrictions"),t.exports=r.renderable(function(e){var t;return t=e.adminOnly,r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-link-slack-teams")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",function(){return r.li({class:r.classify({active:!t,"js-disable-admin-only":!0})},function(){return r.a({href:"#"},function(){return r.format("any-team-member"),r.span(".icon-sm.icon-check")})}),r.li({class:r.classify({active:t,"js-enable-admin-only":!0})},function(){return r.a({href:"#"},function(){return r.format("only-team-admins"),r.span(".icon-sm.icon-check")})})})})})},{}],917:[function(e,t,n){var r;r=e(544)("organization_list_item"),t.exports=function(){return r.a({href:r.mustacheVar("url")},function(){return r.span(".item-name",function(){return r.text(r.mustacheVar("displayName"))}),r.mustacheBlock("hasBusinessClass",function(){return r.icon("business-class")}),r.span({class:"icon-sm icon-"+r.mustacheVar("visIconClass")})})}},{}],918:[function(e,t,n){var r;r=e(544)("organization_search_list_item"),t.exports=function(){return r.li(function(){return r.a(".link-item",{href:"/"+r.mustacheVar("name")},function(){return r.span(".item-name",function(){return r.text(r.mustacheVar("displayName"))})})})}},{}],919:[function(e,t,n){var r,o,i,a,s;r=e("underscore"),o=e(151),a=e(544)("plugin_chrome"),s=function(e){var t,n,r,o,i;return i=e.match(/[0-9a-f]{2}/gi).map(function(e){var t;return t=parseInt(e,16)/255,.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}),r=i[0],n=i[1],t=i[2],o=.2126*r+.7152*n+.0722*t,.4623475>=o},i=function(e){var t,n;return n=o(e.url)?e.url:"#",t={href:n,target:n,title:e.alt,"data-index":e.index},a.a(".plugin-chrome-header-action",t,function(){return a.span(".plugin-action-icon",{style:"background-image: url('"+e.icon+"');"})})},t.exports=a.renderable(function(e){var t,n,u,c,l,d,p,h,m,f,g,v;return g=e.url,l=e.height,u=e.context,t=e.accentColor,f=e.title,n=e.actions,c=e.fullscreen,"iframe"===e.type?(null!=t&&/^#[a-fA-F0-9]{6}$/.test(t)||(t="#EDEFF0"),v=r.chain(n).filter(function(e){return o(e.icon)}).map(function(e){return r.extend(e,{index:n.indexOf(e)})}).groupBy("position").value(),d=(null!=(p=v.left)?p.slice(0,3):void 0)||[],m=(null!=(h=v.right)?h.slice(0,1):void 0)||[],1===m.length&&(d=d.slice(0,2)),a.div(".plugin-chrome-wrapper",{class:a.classify({fullscreen:c})},function(){return a.div(".plugin-chrome-header",{style:"background-color: "+t+";"},function(){return a.div(".plugin-chrome-header-left-actions",function(){return d.map(i)}),a.span(".plugin-chrome-title",{class:a.classify({light:s(t)})},function(){return a.text(f)}),a.div(".plugin-chrome-header-right-actions",function(){return m.map(i),a.a(".plugin-chrome-close-button.icon-lg.icon-close.js-close-plugin-chrome",{class:a.classify({light:s(t)}),href:"#"})})}),a.div(".plugin-chrome-content",function(){return a.iframe(".plugin-iframe",{src:g,style:a.stylify({height:c?void 0:l+"px"})})})})):void 0})},{}],920:[function(e,t,n){var r;r=e(544)("pop_over_ad"),t.exports=function(){return r.a(".icon-sm.icon-close.dark-hover.ad-close.js-close-ad",{href:"#"}),r.mustacheBlock("iconClass",function(){return r.span({class:"pop-over-ad-icon "+r.mustacheVar("iconClass")})}),r.div(".ad-copy",function(){return r.raw(r.mustacheVar("copyHtml"))})}},{}],921:[function(e,t,n){var r;r=e(544)("popover_change_board_org"),t.exports=r.renderable(function(e){var t,n,o,i;return o=e.orgs,i=e.select,t=e.allowsSelfJoin,n=e.isPrivate,r.form(function(){return r.label(function(){return r.format("organization")}),r.select(".js-org",function(){var e,t,n,a;for(r.optionSelected(!o,{value:""},function(){return r.format("none")}),a=[],e=0,t=o.length;t>e;e++)n=o[e],a.push(r.optionSelected(i,{value:n.id},function(){return r.text(n.displayName)}));return a}),n&&r.div(".check-div.js-check-div",function(){return r.label(function(){return r.input(".js-make-org-visible",{type:"checkbox",checked:"checked"}),r.format("make-board-visible-to-organization")})}),t||r.div(".check-div.js-check-div",function(){return r.label(function(){return r.input(".js-make-org-joinable",{type:"checkbox",checked:"checked"}),r.format("allow-any-org-member-to-join-this-board")})}),r.input(".js-submit.wide.primary",{type:"submit",value:r.l("add")}),r.a({href:"#",class:"js-new-org right-of-button-link"},function(){return r.format("create-team")})})})},{}],922:[function(e,t,n){var r;r=e(544)("popover_add_email"),t.exports=function(){return r.form(function(){return r.p(".error",{id:"account-error"}),r.div(".field",function(){return r.label({for:"email"},function(){return r.format("new-email-address")}),r.input({id:"email",type:"email",name:"email",value:""})}),r.input(".primary.js-save-changes",{type:"submit",value:r.l("send-confirmation-email")})}),r.hr(),r.p(".quiet.u-bottom",function(){return r.format("we-ll-send-an-email-to-the-address-you-enter-click-the-link-in-the-email-to-confirm-the-address")})}},{}],923:[function(e,t,n){var r;r=e(544)("popover_add_list"),t.exports=function(){return r.form(function(){return r.div(".form-grid",function(){return r.div(".form-grid-child.form-grid-child-threequarters",function(){return r.label({for:"list-name"},function(){return r.format("name")}),r.input(".js-list-name.js-autofocus",{type:"text",id:"list-name",value:r.l("default-list-name"),style:"margin-bottom: 0;"})}),r.div(".form-grid-child.form-grid-child-quarter",function(){return r.div(".button-link.setting",{style:"margin-top: 4px;"},function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-list-pos")})})}),r.input(".primary.wide.js-add-list",{type:"submit",value:r.l("add")})})}},{}],924:[function(e,t,n){var r;r=e(544)("popover_add_to_team"),t.exports=r.renderable(function(e){var t;return t=e.teamType,r.p(".u-text-align-center",{style:"padding: 3px 0"},function(){return r.format("add to team-disclaimer",{teamType:t})}),r.button(".button-link.primary.u-width-100.js-add-to-team",function(){return r.format("add to team-confirm")})})},{}],925:[function(e,t,n){var r;r=e(544)("popover_auto_mentioner"),t.exports=function(){return r.mustacheBlock("button",function(){return r.input(".js-filter-mentionables.js-autofocus",{type:"text",placeholder:r.l("search-members-ellipsis")})}),r.p(".quiet.js-empty-list.hide",{style:"padding: 8px 8px 0;"},function(){return r.format("no-matching-members")}),r.ul(".pop-over-member-list.js-available-members"),r.mustacheBlock("button",function(){return r.div(".js-select-multiple-options.hide",function(){return r.hr(),r.ul(".pop-over-list",function(){return r.mustacheBlock("showAllCardMembers",function(){return r.li(function(){return r.a(".js-select-all-card-members",{href:"#"},function(){return r.format("mention-all-card-members")})})}),r.mustacheBlock("showAllBoardMembers",function(){return r.li(function(){return r.a(".js-select-all-board-members",{href:"#"},function(){return r.format("mention-all-board-members")})})}),r.mustacheBlock("showAllCommenters",function(){return r.li(function(){return r.a(".js-select-all-commenters",{href:"#"},function(){return r.format("mention-all-commenters")})})})})})})}},{}],926:[function(e,t,n){var r;r=e(544)("popover_board_header_org_menu"),t.exports=r.renderable(function(e){var t,n,o,i,a,s;return t=e.canChangeOrg,a=e.setOrgNull,o=e.name,i=e.products,n=e.isOrgMember,s=e.upsellEnabled,r.ul(".pop-over-list",function(){return t&&r.li(function(){return r.a(".js-change-org",{href:"#"},function(){return a&&r.format("remove-from-organization"),a?void 0:r.format("change-organization-ellipsis")})}),r.li(function(){return r.a(".js-view-org",{href:"/"+o},function(){return r.format("view-organization-page")})}),!i.length&&n&&s?r.li(".divide",function(){return r.a(".js-upgrade-to-bc",{href:"/"+o+"/billing"},function(){return r.format("upgrade-to-business-class")})}):void 0})})},{}],927:[function(e,t,n){var r;r=e(544)("popover_card_from_calendar"),t.exports=function(){return r.div(function(){return r.textarea(".js-card-title",function(){return r.text(r.mustacheVar("title"))})}),r.div(".button-link.list-button-link.setting",function(){return r.span(".label",function(){return r.format("list")}),r.span(".value.js-list-value"),r.label(function(){return r.format("list")}),r.select(".js-select-list")}),r.div(".button-link.pos-button-link.setting",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-position")}),r.input(".primary.wide.js-add-card",{type:"submit",value:r.l("add")})}},{}],928:[function(e,t,n){var r;r=e(544)("popover_change_board_org"),t.exports=function(){return r.form(function(){return r.label(function(){return r.format("organization")}),r.select(".js-org",function(){return r.optionSelected(!r.mustacheVar("orgs"),{value:""},function(){return r.format("none")}),r.mustacheBlock("orgs",function(){return r.optionSelected(r.mustacheVar("select"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("displayName"))})})}),r.mustacheBlock("isPrivate",function(){return r.div(".check-div.js-check-div",function(){return r.label(function(){return r.input(".js-make-org-visible",{type:"checkbox",checked:"checked"}),r.format("make-board-visible-to-organization")})})}),r.mustacheBlockInverted("allowsSelfJoin",function(){return r.div(".check-div.js-check-div",function(){return r.label(function(){return r.input(".js-make-org-joinable",{type:"checkbox",checked:"checked"}),r.format("allow-any-org-member-to-join-this-board")})})}),r.input(".js-submit.wide.primary",{type:"submit",value:r.l("change")}),r.a({href:"#",class:"js-new-org right-of-button-link"},function(){return r.format("create-team")})})}},{}],929:[function(e,t,n){var r;r=e(544)("popover_change_labels"),t.exports=function(){return r.input(".js-autofocus.js-label-search",{type:"text",placeholder:r.l("search-labels-ellipsis"),value:r.mustacheVar("searchInit"),autocomplete:"off"}),r.ul(".edit-labels-pop-over.js-labels-list"),r.mustacheBlock("__ed",function(){return r.div(function(){return r.a(".quiet-button.full.js-add-label",{href:"#"},function(){return r.format("create-a-new-label")}),r.a(".quiet-button.full.hide.js-show-more",{href:"#"},function(){return r.format("show-more-labels")}),r.hr(),r.a(".quiet-button.full.js-toggle-color-blind-mode",{href:"#"},function(){return r.mustacheBlock("isColorBlindEnabled",function(){return r.format("disable-color-blind-friendly-mode")}),r.mustacheBlockInverted("isColorBlindEnabled",function(){return r.format("enable-color-blind-friendly-mode")})})})})}},{}],930:[function(e,t,n){var r;r=e(544)("popover_change_roles"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a({class:r.mustacheBlock("canMakeAdmin",function(){return"js-make-admin highlight-icon"})+r.mustacheBlockInverted("canMakeAdmin",function(){return" disabled"})},function(){return r.check(r.mustacheVar("memberIsAdmin"),"admin"),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_admin"))})})}),r.li(function(){return r.a({class:r.mustacheBlock("canMakeMember",function(){return"highlight-icon js-make-member "})+r.mustacheBlockInverted("canMakeMember",function(){return" disabled"})},function(){return r.check(r.mustacheVar("memberIsNormal"),"normal"),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_normal"))})})}),r.mustacheBlock("showObserver",function(){return r.li(function(){return r.a({class:r.mustacheBlock("canMakeObserver",function(){return"highlight-icon js-make-observer "})+r.mustacheBlockInverted("canMakeObserver",function(){return" disabled"})},function(){return r.format("observer"),r.icon("business-class"),r.mustacheBlock("memberIsObserver",function(){return r.icon("check")}),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_observer"))})})})})}),r.mustacheBlockInverted("isMoreThanOneAdmin",function(){return r.mustacheBlock("memberIsAdmin",function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("you-can-t-change-roles-because-there-must-be-at-least-one-admin")})})})}},{}],931:[function(e,t,n){var r;r=e(544)("popover_change_set_password"),t.exports=function(){return r.form(function(){return r.mustacheBlock("hasPassword",function(){return r.label({for:"o_password"},function(){return r.format("old-password")}),r.input({id:"o_password",type:"password",name:"oldpassword",value:""})}),r.label({for:"password1"},function(){return r.mustacheBlock("hasPassword",function(){return r.format("new-password")}),r.mustacheBlockInverted("hasPassword",function(){return r.format("password")})}),r.input({id:"password1",type:"password",name:"password",value:""}),r.label({for:"password2"},function(){return r.mustacheBlock("hasPassword",function(){return r.format("new-password-again")}),r.mustacheBlockInverted("hasPassword",function(){return r.format("password-again")})}),r.input({id:"password2",type:"password",name:"password2",value:""}),r.p(".error",{id:"password-error"}),r.input(".primary.js-save-changes",{type:"submit",value:r.l("save")})}),r.mustacheBlockInverted("hasPassword",function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("you-havent-set-a-password-yet-you-can-set-a-password-so-you-can-log-onto-trello-with-just-your-username-or-email-address")})})}},{}],932:[function(e,t,n){var r;r=e(544)("popover_change_user_info"),t.exports=function(){return r.form(function(){return r.p(".error",{id:"account-error"}),r.div(".field",function(){return r.label({for:"fullName"},function(){return r.format("full-name")}),r.input({id:"fullName",type:"text",name:"fullName",value:r.mustacheVar("fullName")})}),r.div(".field",function(){return r.label({for:"initials"},function(){return r.format("initials")}),r.input({id:"initials",type:"text",name:"initials",value:r.mustacheVar("initials")})}),r.div(".field",function(){return r.label({for:"username"},function(){return r.format("username")}),r.input({id:"username",type:"text",name:"username",value:r.mustacheVar("username"),required:!0,autocomplete:"off",autocorrect:"off",spellcheck:"false",autocapitalize:"off"})}),r.div(".field",function(){return r.label({for:"bio"},function(){return r.format("bio")}),r.textarea({id:"bio",type:"text",name:"bio"},function(){return r.text(r.mustacheVar("bio"))})}),r.input(".primary.js-save-changes",{type:"submit",value:r.l("save")})}),r.hr(),r.p(".quiet.u-bottom",function(){return r.format("your-initials-are-used-in-place-of-your-avatar-if-your-avatar-is-not-set-usernames-require-a-minimum-of-3-characters-alphanumeric-only")})}},{}],933:[function(e,t,n){var r;r=e(544)("popover_confirm_member_delete"),t.exports=function(){return r.p(function(){return r.format("deleting-your-member-account-username-will-be-permanent",{username:r.mustacheVar("username")})}),r.p(function(){return r.b(function(){return r.format("you-will-lose-access-to-your-boards-and-organizations")})}),r.p(function(){return r.format("would-you-like-us-to-send-an-email-to-email-that-contains-a-link-that-you-can-use-to-delete-your-account",{email:r.mustacheVar("email")})}),r.input(".js-delete-member",{type:"submit",value:r.l("send-the-email")}),r.input(".js-cancel-delete",{type:"submit",value:r.l("never-mind")})}},{}],934:[function(e,t,n){var r;r=e(544)("popover_emoji_completer"),t.exports=r.renderable(function(e){var t,n,o;return n=e.input,t=e.button,o=e.upsellEnabled,t&&r.input(".js-filter-emoji.js-autofocus",{type:"text",placeholder:r.l("search-for-emoji-ellipsis")}),r.div(".js-results",function(){return r.ul(".pop-over-emoji-list.js-available-emoji"),o?(r.hr(),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-upload-emoji",{href:"#","data-emojiname":""},function(){return r.format("upload-emoji")})})})):void 0}),r.div(".js-no-results.hide",function(){return o?(r.p(".u-bottom.js-no-matching-emoji-helper"),r.a(".button.primary.full.js-upload-emoji",{href:"#","data-emojiname":""})):void 0})})},{}],935:[function(e,t,n){var r;r=e(544)("popover_emoji_uploader"),t.exports=function(){return r.mustacheBlockInverted("canUpload",function(){return r.div(".warning",function(){return r.mustacheBlockInverted("hasGold",function(){return r.p(function(){return r.format("you-can-upload-custom-emoji-with-trello-gold-learn-more-about-trello-gold")})}),r.mustacheBlockInverted("hasBCGold",function(){return r.p(".u-bottom",function(){return r.format("you-can-get-custom-emoji-for-your-entire-organization-with-business-class-learn-more-about-business-class")})})}),r.hr()}),r.form({action:"/1/member/"+r.mustacheVar("id")+"/customEmoji",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.label({for:"emojiImage"},function(){return r.format("upload-image")}),r.input(".js-upload-emoji-file.upload-emoji",{id:"emojiImage",type:"file",name:"file",tabindex:"-1",accept:"image/*"}),r.label({for:"emojiName"},function(){return r.format("emoji-name")}),r.input(".js-emoji-name",{id:"emojiName",type:"text",name:"name",value:r.mustacheVar("emojiName")}),r.p(".quiet",function(){return r.format("the-name-will-default-to-the-name-of-the-uploaded-file-you-can-change-it-here-though")}),r.p(".warning.hide.js-invalid-name",function(){return r.format("the-emoji-name-can-only-contain-letters-numbers-and-underscores")}),r.div(".js-emoji-preview",{style:"margin-bottom: 12px;"},function(){return r.p({style:"margin-bottom: 4px;"},function(){return r.strong(function(){return r.format("preview")})}),r.span(".js-emoji-preview-name",function(){return r.text(r.mustacheVar("emojiName"))}),r.text("  "),r.img(".js-emoji-preview.emoji")}),r.input(".primary.wide.js-upload-emoji",{type:"submit",value:r.l("create-custom-emoji")}),r.div(".error.hide",function(){return r.format("upload-failed")})}),r.mustacheBlock("canUpload",function(){return r.mustacheBlockInverted("hasBCGold",function(){return r.hr(),r.p(".u-bottom",function(){return r.format("you-can-also-get-custom-emoji-for-your-entire-organization-with-business-class-learn-more-about-business-class")})})})}},{}],936:[function(e,t,n){var r;r=e(544)("popover_filter_pos_results"),t.exports=function(){return r.ul(".pop-over-list.navigable.normal-weight.js-pos-results",function(){var e;return e=[["js-select-pos-keyword",r.mustacheVar("keywordList")],["js-select-pos-pos",r.mustacheVar("indexList")],["js-select-pos-list",r.mustacheVar("listList")]],e.forEach(function(e){var t,n;return t=e[0],n=e[1],n.forEach(function(e){return r.li(function(){return r.a({href:"#",name:e.value,class:t},function(){return r.format("position-in-list",{index:e.indexString,listName:e.listName})})})})})})}},{}],937:[function(e,t,n){var r;r=e(544)("popover_helper_new_board_add_org"),t.exports=function(){return r.p(function(){return r.format("an-organization-is-a-collection-of-members-and-boards-they-make-sharing-and-working-within-a-group-even-easier")}),r.a(".button.js-create-org",{href:"#"},function(){return r.format("create-an-organization")})}},{}],938:[function(e,t,n){var r;r=e(544)("popover_insertion_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-open-emoji-selector",{href:"#"},function(){return r.format("select-emoji-ellipsis")})}),r.li(function(){return r.a(".js-open-mention-selector",{href:"#"},function(){return r.format("mention-member-ellipsis")})})})}},{}],939:[function(e,t,n){var r;r=e(544)("popover_limit_exceeded"),t.exports=r.renderable(function(){return r.div(".error.js-limit-exceeded",{style:"margin: 12px 0 6px;"},function(){return r.format("attachments-per-card-exceeded")})})},{}],940:[function(e,t,n){var r;r=e(544)("popover_member_searcher"),t.exports=function(){return r.mustacheBlock("showSearch",function(){return r.input(".js-filter-members.js-autofocus",{type:"text",placeholder:r.l("search-members-ellipsis")})}),r.ul(".pop-over-member-list.checkable.js-members-list")}},{}],941:[function(e,t,n){var r;r=e(544)("popover_move_card"),t.exports=function(){return r.mustachePartial("move_card_controls"),r.input(".primary.wide.js-submit",{type:"submit",value:r.l("move")})}},{}],942:[function(e,t,n){var r;r=e(544)("popover_move_list"),t.exports=function(){return r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("board")}),r.span(".value.js-board-value"),r.label(function(){return r.format("board")}),r.select(".js-select-board",function(){return r.mustacheBlock("organizations",function(){return r.optgroup({label:r.mustacheVar("displayName")},function(){return r.mustacheBlock("boards",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("name")),r.mustacheBlock("selected",function(){return r.text(" "),r.format("current")})})})})})})})}),r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-list-pos")})}),r.input(".primary.wide.js-commit-position",{type:"submit",value:r.l("move")})}},{}],943:[function(e,t,n){var r;r=e(544)("popover_org_logo"),t.exports=function(){return r.p(".error.hide.js-error"),r.div(".uploader",function(){return r.form(".realfile",{action:"/1/organization/"+r.mustacheVar("id")+"/logo",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.input(".js-upload-logo",{type:"file",name:"file",style:"margin-bottom: 0;",tabindex:"-1"})}),r.a(".button-link.fakefile",function(){return r.icon("organization","upload-a-new-logo")})}),r.mustacheBlock("logoHash",function(){return r.hr(),r.a(".quiet-button.js-remove-logo",{href:"#"},function(){return r.format("remove-logo")})})}},{}],944:[function(e,t,n){var r;r=e(544)("popover_rename_board"),t.exports=function(){return r.form(function(){return r.label(function(){return r.format("name")}),r.input(".js-board-name.js-autofocus",{type:"text",value:r.mustacheVar("boardName"),dir:"auto"}),r.input(".primary.wide.js-rename-board",{type:"submit",value:r.l("rename")})})}},{}],945:[function(e,t,n){var r;r=e(544)("popover_select_members"),t.exports=r.renderable(function(e){var t,n;return t=e.includeOrgMembers,n=function(e){return t&&r.h4(function(){return r.format(e)}),r.div(".js-loading",function(){return r.p(".empty",{style:"padding: 24px 6px"},function(){return r.format("loading")})}),r.div(".js-no-results.hide",function(){return r.p(".empty",{style:"padding: 24px 6px"},function(){return r.format("no-results")})}),r.ul(".pop-over-member-list.checkable.u-clearfix.js-mem-list")},r.input(".js-search-mem.js-autofocus",{type:"text",placeholder:r.l("search-members")}),r.div(".pop-over-section.js-board-members",function(){return n("board-members")}),t?(r.div(".pop-over-section.js-org-members",function(){return n("team-members")}),r.div(".js-show-org-members",function(){return r.a(".quiet-button",{href:"#",style:"margin-top: 8px;"},function(){return r.format("show-team-members")})})):void 0})},{}],946:[function(e,t,n){var r;r=e(544)("popover_selector_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-mem-selector",{href:"#"},function(){return r.format("members-ellipsis")})}),r.li(function(){return r.a(".js-label-selector",{href:"#"},function(){return r.format("labels-ellipsis")})}),r.li(function(){return r.a(".js-pos-selector",{href:"#"},function(){return r.format("position-ellipsis")})})})}},{}],947:[function(e,t,n){var r;r=e(544)("popover_set_email_freq"),t.exports=function(){return r.ul(".pop-over-list",{name:"minutesBetweenSummaries"},function(){return r.li(function(){return r.a(".highlight-icon",{value:"-1"},function(){return r.check(r.mustacheVar("minutesBetweenSummaries_-1"),"never"),r.span(".sub-name",function(){return r.format("don-t-send-emails")})})}),r.li(function(){return r.a(".highlight-icon",{value:"60"},function(){return r.check(r.mustacheVar("minutesBetweenSummaries_60"),"periodically"),r.span(".sub-name",function(){return r.format("send-emails-about-once-an-hour")})})}),r.li(function(){return r.a(".highlight-icon",{value:"1"},function(){return r.check(r.mustacheVar("minutesBetweenSummaries_1"),"instantly"),r.span(".sub-name",function(){return r.format("send-emails-as-soon-as-possible")})})})})}},{}],948:[function(e,t,n){var r;r=e(544)("popover_share"),t.exports=r.renderable(function(e){var t,n,o,i,a,s;return n=e.hasCsvExport,t=e.csvURL,o=e.jsonURL,i=e.needsUpgradeForCsv,a=e.upgradeUrl,s=e.upsellEnabled,r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-print",{href:"#",title:r.l("print-using-the-browser-s-print-function-you-can-use-file")},function(){return r.format("print-ellipsis")})}),n&&r.li(function(){return r.a(".js-export-csv",{href:t,title:r.l("export-the-board-data-in-csv-format")},function(){return r.format("export-csv")})}),r.li(function(){return r.a(".js-export-json",{href:o,title:r.l("export-the-board-data-in-json-format")},function(){return r.format("export-json")})})}),!n&&s?(r.hr(),r.p(".quiet",{style:"margin: 16px 8px 8px;"},function(){return i&&r.a({href:a},function(){return r.format("there-s-an-update-to-business-class-available-with-csv-export")}),i?void 0:r.format("looking-for-csv-export-check-out-business-class")})):void 0})},{}],949:[function(e,t,n){var r;r=e(544)("popover_trello_completer"),t.exports=r.renderable(function(){return r.label(function(){return r.format("card-or-board-to-add"),r.input(".js-search.js-autofocus",{type:"text",placeholder:r.l("search-for-a-card-or-board-ellipsis")})}),r.div(".js-loading",function(){return r.span(".loading.spinner")}),r.div(".pop-over-section.js-card-results.hide",function(){return r.h4(".pop-over-section-heading",function(){return r.format("cards")}),r.ul(".pop-over-list.navigable.js-card-list"),r.div(".empty.js-no-card-results.hide",{style:"padding: 24px 6px"},function(){return r.p(".u-bottom",function(){return r.format("no-results")})})}),r.div(".pop-over-section.js-board-results.hide",function(){return r.h4(".pop-over-section-heading",function(){return r.format("boards")}),r.ul(".pop-over-list.navigable.js-board-list"),r.div(".empty.js-no-board-results.hide",{style:"padding: 24px 6px"},function(){return r.p(".u-bottom",function(){return r.format("no-results")})})})})},{}],950:[function(e,t,n){var r,o,i,a,s;a=e(88),s=e(544)("power_up_item"),i=function(e){var t,n,r,i,a,u;return i=e.iconSrc,t=e.canEnable,a=e.upgradeUrl,r=e.displayName,u=e.upsellEnabled,n=e.details,s.div(".power-up-item-header",function(){return s.div(".power-up-item-icon",function(){return s.img(".power-up-item-icon-image.mod-rounded",{src:i,alt:"Power-Up Icon"})}),s.div(".power-up-item-details",function(){return s.h4(".power-up-item-details-header.js-show-details",function(){return s.text(r)})}),s.div(".power-up-item-actions",function(){return s.a(".power-up-item-actions-button.mod-settings.js-show-settings",{href:"#"},function(){return s.icon("gear")}),t&&(u&&(a&&s.a(".power-up-item-actions-button.mod-upgrade.button-link.mod-button-link",{href:a},function(){return s.format("upgrade")}),a||s.a(".power-up-item-actions-button.mod-upgrade.button-link.mod-button-link.js-add-to-team",function(){return s.format("upgrade")})),s.a(".power-up-item-actions-button.mod-enable.button-link.primary.js-enable",{href:"#"},function(){return s.format("enable")}),s.a(".power-up-item-actions-button.mod-disable.button-link.negate.js-disable",{href:"#"},function(){return s.format("disable")}),u)?s.a(".power-up-item-actions-button.mod-fake-enable.button-link.primary.js-fake-enable",{href:"#"},function(){return s.format("enable")}):void 0})}),s.div(".power-up-item-tagline.js-show-details",function(){return s.text(o(n))})},o=function(e){var t;return t=e.split(/\.\s|\.{3}|/,1)[0].trim(),t.substring(0,95).trim()+""},r=function(e){var t,n,r,o,i;return r=e.iconSrc,n=e.displayName,t=e.canEnable,o=e.upgradeUrl,i=e.upsellEnabled,s.div(".power-up-item-icon",function(){return s.img(".power-up-item-icon-image.mod-rounded",{src:r,alt:"Power-Up Icon"}),s.icon("check",{class:"power-up-item-enabled-icon"})}),s.div(".power-up-item-details",function(){
return s.h4(".power-up-item-details-header.js-show-details",function(){return s.text(n),s.icon("information",{class:"power-up-item-details-info-icon"})})}),s.div(".power-up-item-actions",function(){return s.a(".power-up-item-actions-button.mod-settings.button-link.js-show-settings",{href:"#"},function(){return s.icon("gear")}),t&&(i&&(o&&s.a(".power-up-item-actions-button.mod-upgrade.button-link",{href:o},function(){return s.format("upgrade")}),o||s.a(".power-up-item-actions-button.mod-upgrade.button-link.js-add-to-team",function(){return s.format("upgrade")})),s.a(".power-up-item-actions-button.mod-enable.button-link.js-enable",{href:"#"},function(){return s.format("enable")}),s.a(".power-up-item-actions-button.mod-disable.button-link.js-disable",{href:"#"},function(){return s.format("disable")}),i)?s.a(".power-up-item-actions-button.mod-fake-enable.button-link.js-fake-enable",{href:"#"},function(){return s.format("enable")}):void 0})},t.exports=s.renderable(function(e){var t,n,o,s,u,c,l,d;return u=e.iconSrc,s=e.displayName,t=e.canEnable,l=e.upgradeUrl,d=e.upsellEnabled,o=e.details,n={iconSrc:u,displayName:s,canEnable:t,upgradeUrl:l,upsellEnabled:d,details:o},(null!=(c=a("powerUpTaglines"))?c.get("showTaglines"):void 0)?i(n):r(n)})},{}],951:[function(e,t,n){var r;r=e(544)("power_up_item_details"),t.exports=function(){return r.mustacheVar("isGrandfathered")&&r.p(".power-up-grandfathered",function(){return r.format("power-up-was-enabled-on-this-board-before-some-recent-changes-we-made",{name:r.mustacheVar("displayName")}),r.text(" ")}),r.p(function(){return r.text(r.mustacheVar("about"))}),r.mustacheBlock("showScreenshots",function(){return r.h4(function(){return r.format("screenshots")}),r.mustacheBlock("screenshots",function(){return r.img({src:r.mustacheVar("."),alt:r.mustacheVar("name")+" Screenshot"})})})}},{}],952:[function(e,t,n){var r;r=e(544)("power_ups_about_calendar"),t.exports=function(){return r.format("enable-the-calendar-power-up-to-gain-access-to-the-trello-calendar-view-display-cards-with-due-dates-in-a-weekly-or-monthly-format-for-a-time-based-overview-of-cards-most-useful-for-time-sensitive-projects-and-projects-with-multiple-due-dates")}},{}],953:[function(e,t,n){var r;r=e(544)("power_ups_about_card_aging"),t.exports=function(){return r.format("cards-will-visibly-age-as-time-passes-without-any-activity-regular-mode-will-cause-old-cards-to-become-progressively-more-transparent-pirate-mode-will-cause-old-cards-to-crack-and-tear-like-an-old-treasure-map-once-cards-have-new-activity-on-them-their-age-counter-is-reset-and-they-appear-new-again-age-thresholds-are-1-2-and-4-weeks")}},{}],954:[function(e,t,n){var r;r=e(544)("power_ups_about_voting"),t.exports=function(){return r.format("give-power-to-the-people-and-allow-users-to-vote-on-cards-then-track-card-vote-counts-and-voter-list")}},{}],955:[function(e,t,n){var r;r=e(544)("power_ups_calendar_prefs"),t.exports=r.renderable(function(e){var t,n,o,i;return n=e.isEnabled,o=e.isGenerated,i=e.url,t=e.canChange,r.h4(function(){return r.format("enable-icalendar-feed")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select.js-calendar-pref-feed",{href:"#",class:r.classify({disabled:!t}),name:"enabled"},function(){return r.span(".name",function(){return r.format("enabled")}),n?r.icon("check"):void 0})}),r.li(function(){return r.a(".js-select.js-calendar-pref-feed",{href:"#",class:r.classify({disabled:!t}),name:"disabled"},function(){return r.span(".name",function(){return r.format("disabled")}),n?void 0:r.icon("check")})})}),n?(r.hr(),r.h4(function(){return r.format("your-personal-icalendar-feed")}),r.input(".full.js-calendar-feed-url",{type:"text",value:o?i:r.format("generating")}),r.div(function(){return r.a(".button.js-regen-calendar-url",{href:"#"},function(){return o?r.format("regenerate-your-feed-url"):r.format("generating")})})):void 0})},{}],956:[function(e,t,n){var r;r=e(544)("power_ups_card_aging_prefs"),t.exports=r.renderable(function(e){var t,n;return t=e.agingMode,n=e.canChange,r.h2(function(){return r.format("how-do-you-want-the-aged-cards-to-look")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select",{href:"#",class:r.classify({disabled:!n}),name:"regular"},function(){return r.span(".name",function(){return r.format("regular-mode")}),"regular"===t&&r.icon("check"),r.span(".sub-name",function(){return r.format("older-cards-become-more-transparent")})})}),r.li(function(){return r.a(".js-select",{href:"#",class:r.classify({disabled:!n}),name:"pirate"},function(){return r.span(".name",function(){return r.format("pirate-mode")}),"pirate"===t&&r.icon("check"),r.span(".sub-name",function(){return r.format("older-cards-crackle-and-tear")})})})})})},{}],957:[function(e,t,n){var r;r=e(544)("power_ups_detail_navbar"),t.exports=function(){return r.a({class:"nav-item js-toolbar-select "+r.mustacheBlock("screenshots",function(){return"active"}),href:"#",name:"screenshots"},function(){return r.format("screenshots")}),r.a({class:"nav-item js-toolbar-select "+r.mustacheBlock("settings",function(){return"active"}),href:"#",name:"settings"},function(){return r.format("settings")})}},{}],958:[function(e,t,n){var r;r=e(544)("board_power_ups"),t.exports=r.renderable(function(e){var t,n,o,i;return o=e.partOfTeam,i=e.upgradeUrl,t=e.hasGold,n=e.onOldBC,r.h4(".power-ups-upgrade-header",function(){return r.format("exceeded-power-ups-limit")}),t?r.p(".power-ups-upgrade-text",function(){return r.format("as-a-gold-member-three-power-ups")}):n?r.p(".power-ups-upgrade-text",function(){return r.format("with-the-legacy-version-of-business-class-you-can-turn-on-one-power-up-per-board")}):o?r.p(".power-ups-upgrade-text",function(){return r.format("business-class-teams-get-unlimited-power-ups")}):r.p(".power-ups-upgrade-text",function(){return r.format("as-a-free-member-one-power-up")}),r.p(".power-ups-upgrade-text",function(){return r.format("power-ups-exceeds-your-limit")}),n?r.p(".power-ups-upgrade-text",function(){return r.format("to-unlock-more-upgrade-your-team-to-the-latest-version-of-business-class-today")}):r.p(".power-ups-upgrade-text",function(){return r.format("continue-using-upgrade-to-bc")}),r.div(".power-ups-upgrade-action",function(){return o?r.a(".button.primary",{href:i},function(){return r.format("lets-do-this")}):r.button(".button.primary.js-upgrade",function(){return r.format("lets-do-this")})}),r.div(".power-ups-upgrade-action",function(){return r.a(".power-ups-upgrade-cancel.js-go-back",{href:"#"},function(){return r.format("no-thanks")})})})},{}],959:[function(e,t,n){var r;r=e(544)("power_ups_voting_prefs"),t.exports=r.renderable(function(e){var t,n,o,i,a;return t=e.canChange,n=e.canSetObservers,o=e.canSetOrganization,i=e.canSetPublic,a=e.votingMode,r.h4(function(){return r.format("who-is-allowed-to-vote-on-cards")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t}),name:"members"},function(){return r.span(".name",function(){return r.format("members")}),"members"===a&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-on-all-boards")})})}),r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t||!n}),name:"observers"},function(){return r.span(".name",function(){return r.format("members-and-observers")}),"observers"===a&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-only-on-boards-with-observers")})})}),r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t||!o}),name:"org"},function(){return r.span(".name",function(){return r.format("organization-members")}),"org"===a&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-only-on-boards-within-an-organization")})})}),r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t||!i}),name:"public"},function(){return r.span(".name",function(){return r.format("public-members")}),"public"===a&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-on-public-boards")})})})})})},{}],960:[function(e,t,n){var r;r=e(544)("product_promo_button"),t.exports=r.renderable(function(e){var t;return t=e.upsellEnabled,r.div(".product-promo-button-overlay",function(){return r.span(".product-promo-button",function(){return t?r.format("get-business-class"):r.format("not-available")})})})},{}],961:[function(e,t,n){var r,o;o=e(544)("quick_card_editor"),r=e(796),t.exports=function(){return o.span(".icon-lg.icon-close.quick-card-editor-close-icon.js-close-editor"),o.div(".quick-card-editor-card",{style:"top: "+o.mustacheVar("top")+"px; left: "+o.mustacheVar("left")+"px; width: "+o.mustacheVar("width")+"px;"},function(){return o.div(".list-card.list-card-quick-edit.js-stop",{style:"width: "+o.mustacheVar("width")+"px;"},function(){return r(o.mustacheVar("."))}),o.input(".primary.wide.js-save-edits",{type:"submit",value:o.l("save")}),o.div({class:"quick-card-editor-buttons"+o.mustacheBlock("leftButtons",function(){return" quick-card-editor-buttons-left"})},function(){return o.a(".quick-card-editor-buttons-item.js-edit-labels",{href:"#"},function(){return o.icon("label",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("edit-labels")})}),o.a(".quick-card-editor-buttons-item.js-edit-members",{href:"#"},function(){return o.icon("member",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("change-members")})}),o.a(".quick-card-editor-buttons-item.js-move-card",{href:"#"},function(){return o.icon("move",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("move")})}),o.a(".quick-card-editor-buttons-item.js-copy-card",{href:"#"},function(){return o.icon("card",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("copy")})}),o.a(".quick-card-editor-buttons-item.js-edit-due-date",{href:"#"},function(){return o.icon("clock",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("change-due-date")})}),o.mustacheBlockInverted("closed",function(){return o.a(".quick-card-editor-buttons-item.js-archive",{href:"#"},function(){return o.icon("archive",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("archive")})})})})})}},{}],962:[function(e,t,n){var r;r=e(544)("saved_search"),t.exports=function(){return r.a(".saved-search-item.js-saved-search-name",{href:"#"},function(){return r.span(".saved-search-item-name",function(){return r.text(r.mustacheVar("name"))}),r.text(" "),r.span(".saved-search-query.quiet.js-saved-search-query",function(){return r.text(r.mustacheVar("query"))})}),r.mustacheBlock("allowDelete",function(){return r.a(".saved-search-delete.dark-hover.quiet.js-delete-saved-search",{href:"#"},function(){return r.icon("close")}),r.span(".saved-search-delete-menu.quiet.hide.js-delete-saved-search-menu",function(){return r.format("are-you-sure-you-want-to-delete"),r.a(".saved-search-delete-menu-item.js-delete-saved-search-confirm",{href:"#"},function(){return r.format("yes-delete")}),r.a(".saved-search-delete-menu-item.js-delete-saved-search-cancel",{href:"#"},function(){return r.format("no-keep-this")})})})}},{}],963:[function(e,t,n){var r;r=e(544)("search_instant_results"),t.exports=r.renderable(function(e){return function(e){var t,n,o;return n=e.savedSearchesEnabled,o=e.upsellEnabled,t=function(e){return r.format(e,{archived:"archived",attachments:"attachments",board:"board",checklist:"checklist",comment:"comment",cover:"cover",created:"created",day:"day",description:"description",due:"due",edited:"edited",has:"has",id:"id",is:"is",label:"label",list:"list",member:"member",members:"members",month:"month",name:"name",open:"open",overdue:"overdue",starred:"starred",stickers:"stickers",week:"week"})},r.div(".search-header-options",function(){return r.div(".js-saved-search-links",function(){return r.a(".quiet.dark-hover.search-header-options-option.js-see-all-saved-searches",{href:"#"},function(){return r.icon("back","back-to-saved-searches")}),(n||!n&&o)&&r.a(".quiet.dark-hover.search-header-options-option.js-save-this-search",{href:"#"},function(){return r.icon("star","save-this-search")}),r.span(".quiet.search-header-options-option.mod-save.js-current-search.hide",{href:"#"},function(){return r.icon("star"),r.span(".js-current-search-name")})})}),r.div(".search-results-section.js-save-this-search-menu.hide",function(){return n?(r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("what-would-you-like-to-call-this-search")})}),r.form(".js-save-this-search-form",function(){return r.input(".js-saved-search-name-input",{type:"text",style:"margin-bottom: 4px;"}),r.input(".primary.js-save-this-search-submit",{type:"submit",value:r.l("save")}),r.a(".quiet.js-save-this-search-cancel",{href:"#",style:"margin-left: 6px;"},function(){return r.format("nevermind")})})):(r.h2(function(){return r.format("upgrade-to-add-new-saved-searches")}),r.p({style:"font-size: 16px; line-height: 1.2;"},function(){return r.format("you-can-add-new-saved-searches-with-trello-gold-or-get-saved-searches-for-your-entire-organization-with-business-class")}),r.p(function(){return r.a(".button.js-gold-link",{target:"_blank",href:"/gold"},function(){return r.format("check-out-trello-gold")}),r.a(".button.js-business-class-link",{target:"_blank",href:"/business-class"},function(){return r.format("check-out-business-class")})}),r.hr())}),r.div(".search-results-section.js-search-suggestions.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("did-you-mean-ellipsis")})}),r.div(".js-search-suggestions-list")}),r.div(".search-results-section.js-saved-searches.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("saved-searches")})}),r.p(".quiet.hide.js-no-saved-searches",function(){return r.format("you-have-no-saved-searches-to-save-a-search-start-searching-and-click-save-this-search-in-the-upper-corner")}),r.div(".js-saved-searches-list"),r.hr()}),r.div(".js-search-results.u-clearfix.u-relative.hide",function(){return r.div(".search-results-section.js-card-results.u-clearfix.hide",function(){return r.div(".search-results-section-header.u-clearfix",function(){return r.h4(function(){return r.format("cards")})}),r.div(".js-list"),r.span(".search-loading.hide.js-loading-cards",{href:"#"},function(){return r.format("loading-ellipsis")}),r.a(".show-more.hide.js-show-more-cards",{href:"#"},function(){return r.format("show-more-cards-ellipsis")})}),r.div(".search-results-section.js-board-results.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("boards")})}),r.ul(".board-results-list.js-list"),r.a(".show-more.hide.js-show-more-boards",{href:"#"},function(){return r.format("show-more-boards-ellipsis")})}),r.div(".search-results-section.js-member-results.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("members")})}),r.ul(".js-list.pop-over-member-list"),r.a(".show-more.hide.js-show-more-members",{href:"#"},function(){return r.format("show-more-members-ellipsis")})}),r.div(".search-results-section.js-org-results.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("organizations")})}),r.ul(".org-list.js-list"),r.a(".show-more.hide.js-show-more-orgs",{href:"#"},function(){return r.format("show-more-organizations-ellipsis")})})}),r.div(".search-tips.hide.js-no-input",function(){return r.p(".search-tips-helper.quiet.js-search-tips-helper",function(){return t("refine-your-search-with-operators-like-at-member-label-is-archived-and-has-attachments"),r.text(" "),r.a(".js-show-search-tips",{href:"#"},function(){return r.format("learn-more-ellipsis")})}),r.div(".search-tips-list.js-search-tips-list.hide",function(){return r.p(".quiet",function(){return t("search-operators-help-you-find-specific-cards-and-create-highly-tailored-lists-trello-will-suggest-operators-for-you-as-you-type-but-here-s-a-full-list-to-keep-in-mind-you-can-add-to-any-operator-to-do-a-negative-search-such-as-has-members-to-search-for-cards-without-any-members-assigned")}),r.dl(function(){return r.dt(function(){return r.format("at-name")}),r.dd(function(){return t("returns-cards-assigned-to-a-member-if-you-start-typing-at-trello-will-suggest-members-for-you-member-also-works-at-me-will-include-only-your-cards")}),r.dt(function(){return r.format("label")}),r.dd(function(){return t("returns-labeled-cards-trello-will-suggest-labels-for-you-if-you-start-typing-and-the-label-you-are-looking-for-label-also-works")}),r.dt(function(){return t("board-id")}),r.dd(function(){return t("returns-cards-within-a-specific-board-if-you-start-typing-board-trello-will-suggest-boards-for-you-you-can-search-by-board-name-too-such-as-board-trello-to-search-only-cards-on-boards-with-trello-in-the-board-name")}),r.dt(function(){return t("list-name")}),r.dd(function(){return t("returns-cards-within-the-list-named-name-or-whatever-you-type-besides-name")}),r.dt(function(){return t("has-attachments")}),r.dd(function(){return t("returns-cards-with-attachments-has-description-has-cover-has-members-and-has-stickers-also-work-as-you-would-expect")}),r.dt(function(){return t("due-day")}),r.dd(function(){return t("returns-cards-due-within-24-hours-due-week-due-month-and-due-overdue-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-due-14-to-search-will-include-cards-due-in-the-next-14-days")}),r.dt(function(){return t("created-day")}),r.dd(function(){return t("returns-cards-created-in-the-last-24-hours-created-week-and-created-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-created-14-to-the-search-will-include-cards-created-in-the-last-14-days")}),r.dt(function(){return t("edited-day")}),r.dd(function(){return t("returns-cards-edited-in-the-last-24-hours-edited-week-and-edited-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-edited-21-to-the-search-will-include-cards-edited-in-the-last-21-days")}),r.dt(function(){return t("description-checklist-comment-and-name")}),r.dd(function(){return t("returns-cards-matching-the-text-of-card-descriptions-checklists-comments-or-names-for-example-comment-fix-it-will-return-cards-with-fix-it-in-a-comment")}),r.dt(function(){return t("is-open-and-is-archived")}),r.dd(function(){return r.format("returns-cards-that-are-either-open-or-archived-trello-returns-both-types-by-default")}),r.dt(function(){return t("is-starred")}),r.dd(function(){return r.format("only-include-cards-on-starred-boards")})})})}),r.div(".search-warning.hide.js-no-results",function(){return r.format("no-results")}),r.p(".search-warning.hide.js-searching",function(){return r.format("searching-ellipsis")}),r.p(".search-warning.hide.js-err",function(){return r.format("your-search-produced-an-error")}),r.div(".search-results-section.js-help.u-clearfix",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("looking-for-help-using-trello")})}),r.a(".js-open-help-query.hide",{href:"http://help.trello.com?source=trello-search",target:"help"},function(){return r.format("search-our-help-site-for")}),r.span(".js-open-help",function(){return r.format("visit-our-help-site-or-read-the-guide")})})}}(this))},{}],964:[function(e,t,n){var r;r=e(544)("search_results_card"),t.exports=function(){return r.div(".search-result-card-container.js-list-card-container",function(){return r.div(".search-result-card-container-fade")}),r.div(".search-result-card-details",function(){return r.p(".u-bottom",function(){return r.a(".search-result-card-details-name",{href:r.mustacheVar("url")},function(){return r.text(r.mustacheVar("name"))})}),r.p(".u-bottom.quiet",function(){return r.format("in-listname-archived-on-boardname",{listName:r.mustacheVar("listName"),archived:r.mustacheVar("archived"),boardName:r.mustacheVar("boardName"),permLevel:r.mustacheVar("permLevel")})})}),r.a(".search-result-card-hover-target",{href:r.mustacheVar("url")})}},{}],965:[function(e,t,n){var r;r=e(544)("search_suggetion"),t.exports=function(){return r.a(".search-suggestion.js-select-suggestion",{href:"#","data-suggestionphrase":r.mustacheVar("phrase")},function(){return r.span(".search-suggestion-string",function(){return r.text(r.mustacheVar("phrase"))}),r.span(".search-suggestion-desc",function(){return r.text(r.mustacheVar("description"))})})}},{}],966:[function(e,t,n){var r;r=e(544)("search_suggetion_board"),t.exports=function(){return r.a(".search-suggestion.search-suggestion-board.js-select-suggestion",{href:"#","data-suggestionphrase":r.mustacheVar("phrase")},function(){return r.span(".search-suggestion-board-image"),r.span(".search-suggestion-dec",function(){return r.format("cards-on-the-board-name",{name:r.mustacheVar("name")})})})}},{}],967:[function(e,t,n){var r,o;o=e(544)("search_suggetion_member"),r=e(863),t.exports=function(){return o.a(".search-suggestion.search-suggestion-member.js-select-suggestion",{href:"#","data-suggestionphrase":o.mustacheVar("phrase")},function(){return o.span(".member.search-suggestion-member-av",function(){return r(o.mustacheVar("."))}),o.span(function(){return o.format("cards-assigned-to-fullname",{fullName:o.mustacheVar("fullName")})})})}},{}],968:[function(e,t,n){var r;r=e(544)("select_board"),t.exports=r.renderable(function(e){var t,n,o,i;return o=e.name,n=e.id,t=e.closed,i=e.orgName,r.li(".item",function(){return r.a(".name.js-select-board",{href:"#",title:o,"data-id":n},function(){return r.span(".item-name",function(){return r.text(o),t?(r.text(" "),r.span(".quiet",function(){return r.format("archived")})):void 0}),i?r.span(".sub-name",function(){return r.format("in-orgname",{orgName:i})}):void 0})})})},{}],969:[function(e,t,n){var r;r=e(544)("select_card"),t.exports=r.renderable(function(e){var t,n,o,i;return i=e.name,o=e.id,n=e.closed,t=e.boardName,r.li(".item",function(){return r.a(".name.js-select-card",{href:"#",title:i,"data-id":o},function(){return r.span(".item-name",function(){return r.text(i),n?(r.text(" "),r.span(".quiet",function(){return r.format("archived")})):void 0}),t?r.span(".sub-name",function(){return r.format("in-boardname",{boardName:t})}):void 0})})})},{}],970:[function(e,t,n){var r;r=e(544)("select_emoji"),t.exports=function(){return r.li(".item",function(){return r.a(".name.js-select-emoji",{href:"#",title:r.mustacheVar("name")},function(){return r.img(".emoji",{src:r.mustacheVar("image")}),r.span(".emoji-name",{name:r.mustacheVar("name")},function(){return r.text(r.mustacheVar("name"))})})})}},{}],971:[function(e,t,n){var r;r=e(544)("select_labels"),t.exports=function(){return r.mustacheBlock("labels",function(){return r.li(function(){return r.mustacheBlock("__ed",function(){return r.a(".card-label-edit-button.icon-sm.icon-edit.js-edit-label",{href:"#","data-idlabel":r.mustacheVar("id")})}),r.span({class:"card-label mod-selectable card-label-"+r.mustacheVar("color")+" "+r.mustacheBlock("isActive",function(){return"active"})+" js-select-label","data-idlabel":r.mustacheVar("id"),"data-color":r.mustacheVar("color")},function(){return r.mustacheBlock("name",function(){return r.text(r.mustacheVar("name"))}),r.icon("check",{class:"card-label-selectable-icon light"})})})})}},{}],972:[function(e,t,n){var r,o;o=e(544)("select_member"),r=e(863),t.exports=function(){return o.li({class:"item"+o.mustacheBlock("isActive",function(){return" active"})+o.mustacheBlock("unconfirmed",function(){return" unconfirmed"})+o.mustacheBlock("inactive",function(){return" inactive"})+o.mustacheBlock("isKnownMember",function(){return" js-autoselect"})+" js-member-item"+o.mustacheBlock("disabled",function(){return" disabled"})},function(){return o.a({href:o.mustacheBlock("url",function(){return o.mustacheVar("url")})+o.mustacheBlockInverted("url",function(){return"#"}),class:"name js-select-member "+o.mustacheBlock("extraText",function(){return"multi-line"}),idMember:o.mustacheVar("id"),title:o.mustacheVar("fullName")+o.mustacheBlock("username",function(){return" ("+o.mustacheVar("username")+")"}),autocompleteText:o.mustacheVar("username")},function(){return o.span({class:"member js-member"+o.mustacheBlock("isVirtual",function(){return" virtual"})},function(){return r(o.mustacheVar("."))}),o.span(".full-name",{name:o.mustacheVar("fullName")+o.mustacheBlock("username",function(){return" ("+o.mustacheVar("username")+")"})},function(){return o.text(o.mustacheVar("fullName")),o.text(" "),o.mustacheBlock("username",function(){return o.format("username",{username:o.mustacheVar("username")})})}),o.mustacheBlock("extraText",function(){return o.div(".extra-text.quiet",function(){return o.format("extratext",{extraText:o.mustacheVar("extraText")})})}),o.icon("check",{class:"checked-icon"}),o.icon("forward",{class:"light option js-open-option"}),o.mustacheBlock("inactive",function(){return o.span(".quiet.sub-name",function(){return o.format("inactive-account")})}),o.mustacheBlock("unconfirmed",function(){return o.span(".quiet.sub-name",function(){return o.format("unconfirmed-user")})})})})}},{}],973:[function(e,t,n){var r,o;o=e(544)("select_org_to_upgrade"),r=e(102),t.exports=function(){return o.div(".select-org-to-upgrade",function(){return o.h2(".select-org-to-upgrade-header",function(){return o.format("select-an-organization-to-upgrade-to-business-class")}),o.ul(".select-org-to-upgrade-list",function(){return o.mustacheBlock("orgs",function(){return o.li(".select-org-to-upgrade-list-item",function(){return o.a({href:o.mustacheVar("orgUrl"),class:o.classify({"select-org-to-upgrade-list-item-link":!0,"js-select-org":!o.mustacheVar("isDisabled"),"disabled js-disabled":o.mustacheVar("isDisabled")})},function(){return o.mustacheBlock("logoHash",function(){return o.img(".select-org-to-upgrade-list-item-link-image",{src:o.mustacheVar("__logoDomain")+"/"+o.mustacheVar("logoHash")+"/30.png",alt:o.mustacheVar("displayName")+" logo"})}),o.mustacheBlockInverted("logoHash",function(){return o.span(".icon-lg.icon-organization.select-org-to-upgrade-list-item-link-image")}),o.span(".select-org-to-upgrade-list-item-link-name",function(){return o.text(o.mustacheVar("displayName"))}),o.span(".select-org-to-upgrade-list-item-link-details.quiet",function(){return o.text(r("members",o.mustacheVar("memberCount"))),o.text(". "),o.mustacheBlock("isPremium",function(){return o.mustacheBlockInverted("needsBCUpgrade",function(){return o.format("this-organization-already-has-business-class")}),o.mustacheBlock("needsBCUpgrade",function(){return o.mustacheBlock("isAdmin",function(){return o.format("an-update-is-available")}),o.mustacheBlockInverted("isAdmin",function(){return o.format("an-update-is-available-you-need-to-be-an-admin-to-upgrade")})})})})})})})}),o.mustacheBlockInverted("orgs",function(){return o.p({style:"margin: 24px 0;"},function(){return o.format("you-don-t-have-any-organizations"),o.raw(" "),o.a(".js-create-org",{href:"#"},function(){return o.format("click-here-to-create-one")})})})})}},{}],974:[function(e,t,n){var r,o;o=e(544)("shortcuts"),r=function(e,t,n){return o.div(".shortcut-list-item",function(){return o.h3(".shortcut-list-item-header",function(){return o.format(t)}),o.div(".shortcut-list-item-keys",function(){var t,n,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(o.span(".keyboard-key",function(){return o.text(n)}));return i}),o.div(".short-list-item-desc",function(){return n()})})},t.exports=function(){return o.div(".window-main-col",function(){return o.div(".window-header.u-clearfix",function(){return o.span(".window-header-icon.icon-lg.icon-information"),o.h2(".window-title",function(){return o.format("keyboard-shortcuts")})}),o.div(".shortcut-list.markeddown",function(){return o.hr(),r([""," / J"," / K",""],"navigate-cards",function(){return o.p(function(){return o.format("pressing-the-arrow-keys-will-select-adjacent-cards-on-a-board-pressing-j-will-select-the-card-below-the-current-card-pressing-k-will-select-the-card-above-the-current-card")})}),r(["B"],"open-header-boards-menu",function(){return o.p(function(){return o.format("pressing-b-opens-the-boards-menu-in-the-header-you-can-search-for-boards-and-navigate-boards-with-the-up-and-down-arrows-pressing-enter-with-a-board-selected-will-open-it")})}),r(["/"],"focus-search-box",function(){return o.p(function(){return o.format("pressing-puts-the-cursor-in-the-search-box-in-the-header")})}),r(["C"],"archive-card",function(){return o.p(function(){return o.format("pressing-c-will-archive-a-card")})}),r(["D"],"due-date",function(){return o.p(function(){return o.format("pressing-d-will-open-the-due-date-picker-for-a-card")})}),r(["E"],"quick-edit-mode",function(){return o.p(function(){return o.format("if-hovering-over-a-card-pressing-e-will-open-quick-edit-mode-which-lets-you-quickly-edit-the-title-and-other-card-attributes")})}),r(["Esc"],"close-menu-cancel-editing",function(){return o.p(function(){return o.format("pressing-esc-will-close-an-open-dialog-window-or-pop-over-or-cancel-edits-and-comments-you-are-composing")})}),r(["Command/Control","Enter"],"save-text",function(){return o.p(function(){return o.format("meta-enter-copy")})}),r(["Enter"],"open-card",function(){return o.p(function(){return o.format("pressing-enter-will-open-the-currently-selected-card-pressing-shift-enter-while-submitting-a-card-will-open-it-immediately-after-creating-it")})}),r(["F"],"open-card-filter-menu",function(){return o.p(function(){return o.format("use-f-to-open-the-card-filter-menu-the-search-by-title-input-is-automatically-focused")})}),r(["L"],"label",function(){return o.p(function(){return o.format("pressing-l-opens-a-pop-over-of-the-available-labels-clicking-a-label-will-add-or-remove-it-from-the-card")}),o.p(function(){return o.format("pressing-one-of-the-following-number-keys-will-apply-or-remove-that-label")}),o.table(function(){return o.thead(function(){return o.tr(function(){return o.th(function(){return o.format("key")}),o.th(function(){return o.format("label-color")})})}),o.tbody(function(){var e,t;return e=function(e){var t,n,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(o.tr(function(){return o.td(function(){return o.text(n[0])}),o.td(function(){return o.format(n[1])})}));return i},t=[["1","green"],["2","yellow"],["3","orange"],["4","red"],["5","purple"],["6","blue"],["7","sky"],["8","lime"],["9","pink"],["0","black"]],e(t)})})}),r([";"],"label-text",function(){return o.p(function(){return o.format("shows-or-hides-label-text")})}),r(["M"],"add-remove-members",function(){return o.p(function(){return o.format("pressing-m-opens-the-add-remove-members-menu-clicking-a-member-s-avatar-will-assign-or-unassign-that-person")})}),r(["N"],"insert-new-card",function(){return o.p(function(){return o.format("pressing-n-opens-a-pop-over-that-allows-you-to-add-a-card-after-the-currently-selected-card")})}),r([",",".","<",">"],"move-card-to-adjacent-list",function(){return o.p(function(){return o.format("pressing-period-or-comma-will-move-a-card-to-the-adjacent-left-or-right-list")})}),r(["Q"],"my-cards-filter",function(){return o.p(function(){return o.format("pressing-the-q-key-toggles-the-cards-assigned-to-me-filter")})}),r(["S"],"subscribe",function(){return o.p(function(){return o.format("pressing-s-will-subscribe-you-to-or-unsubscribe-you-from-a-card-subscribing-to-a-card-will-give-you-notifications-for-most-actions-to-that-card")})}),r(["Space"],"assign-self",function(){return o.p(function(){return o.format("pressing-space-will-assign-or-unassign-yourself-to-a-card")})}),r(["T"],"edit-title",function(){return o.p(function(){
return o.format("if-viewing-a-card-pressing-t-will-edit-the-title-if-hovering-over-a-card-pressing-t-will-open-the-card-and-edit-the-title")})}),r(["V"],"vote",function(){return o.p(function(){return o.format("pressing-v-will-add-or-remove-your-vote-on-a-card-if-the-voting-power-up-is-enabled")})}),r(["W"],"toggle-board-menu",function(){return o.p(function(){return o.format("pressing-w-will-collapse-or-expand-the-board-menu-the-sidebar-on-the-right")})}),r(["X"],"clear-all-filters",function(){return o.p(function(){return o.format("use-x-to-clear-all-active-card-filters")})}),r(["?"],"open-shortcuts-page",function(){return o.p(function(){return o.format("pressing-will-open-the-shortcuts-page")})}),r(["@"],"autocomplete-members",function(){return o.p(function(){return o.format("when-writing-a-comment-you-can-type-at-plus-a-member-s-name-username-or-initials-and-get-a-list-of-matching-members-you-can-navigate-that-list-with-the-up-and-down-arrows-pressing-enter-or-tab-with-a-member-selected-will-mention-that-user-in-the-comment-the-mentioned-user-will-get-a-notification-once-submitted")}),o.p(function(){return o.format("when-adding-a-new-card-you-can-use-the-same-method-to-assign-members-to-cards-before-submitting-them")})}),r(["#"],"autocomplete-labels",function(){return o.p(function(){return o.format("when-adding-a-new-card-you-can-type-plus-the-label-s-color-or-title-and-get-a-list-of-matching-labels-you-can-use-the-up-and-down-arrows-to-navigate-the-resulting-list-pressing-enter-or-tab-will-add-the-label-to-the-composed-card-the-labels-will-be-added-to-the-card-when-you-submit")})}),r(["^"],"autocomplete-position",function(){return o.p(function(){return o.format("when-adding-a-new-card-you-can-type-plus-a-list-name-or-position-in-a-list-you-can-also-type-top-or-bottom-to-add-to-the-top-or-bottom-of-the-current-list-you-can-use-the-up-and-down-arrows-to-navigate-the-resulting-list-pressing-enter-or-tab-will-automatically-change-the-position-of-the-composed-card")})})})})}},{}],975:[function(e,t,n){var r;r=e(544)("sticker_on_card"),t.exports=function(){return r.img(".sticker-image",{src:r.mustacheVar("url"),style:"-webkit-transform: rotate("+r.mustacheVar("rotate")+"deg);transform: rotate("+r.mustacheVar("rotate")+"deg);",alt:r.mustacheVar("image")}),r.mustacheBlock("showEditControls",function(){return r.div(".sticker-controls",function(){return r.span(".sticker-control-btn.rotate-btn.js-rotate-sticker",function(){return r.format("rotate")}),r.span(".sticker-control-btn.move-btn.js-move-sticker",function(){return r.format("move")}),r.span(".sticker-control-btn.remove-btn.js-remove-sticker",function(){return r.format("remove")})})})}},{}],976:[function(e,t,n){var r;r=e(544)("sticker_pack_selection_list"),t.exports=function(){return r.h2(function(){return r.text(r.mustacheVar("displayName"))}),r.div(".sticker-list.u-clearfix.js-sticker-list.u-relative")}},{}],977:[function(e,t,n){var r;r=e(544)("sticker_select"),t.exports=function(){return r.div(".sticker-list.u-clearfix.js-standard-sticker-list"),r.div(".js-premium-stickers"),r.h2(function(){return r.format("custom-stickers")}),r.div(".sticker-list.u-clearfix.js-custom-sticker-list")}},{}],978:[function(e,t,n){var r;r=e(544)("sticker_select_item"),t.exports=function(){return r.mustacheBlock("pending",function(){return r.img(".sticker-select-image.sticker-select-pending",{src:r.mustacheVar("url")})}),r.mustacheBlockInverted("pending",function(){return r.img(".sticker-select-image.sticker-select-shadow",{src:r.mustacheVar("url")}),r.img(".sticker-select-image.sticker-select-fixed",{src:r.mustacheVar("url")}),r.img(".sticker-select-image.sticker-select-peel",{src:r.mustacheVar("url")})}),r.mustacheBlock("id",function(){return r.span(".sticker-select-option.sticker-select-option-delete-button.js-delete-sticker",function(){return r.icon("close",{class:"sticker-select-option-icon"}),r.span(".sticker-select-option-text.u-text-underline",function(){return r.format("delete")})})}),r.mustacheBlock("error",function(){return r.span(".sticker-select-option",function(){return r.span(".sticker-select-option-text",function(){return r.text(r.mustacheVar("error"))})})}),r.mustacheBlock("pending",function(){return r.span(".sticker-select-option",function(){return r.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),r.span(".sticker-select-option-text",function(){return r.format("uploading-ellipsis")})})})}},{}],979:[function(e,t,n){var r;r=e(544)("sticker_select_item_upload"),t.exports=function(){return r.form({action:"/1/member/"+r.mustacheVar("id")+"/customStickers",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.div(".sticker-select.sticker-select-upload",function(){return r.span(".sticker-select-upload-icon.icon-lg.icon-add"),r.input({type:"file",name:"file",class:"sticker-select-upload-input js-upload-image "+r.mustacheBlockInverted("enabled_customStickers",function(){return" disabled"}),multiple:"multiple",accept:"image/*"})})})}},{}],980:[function(e,t,n){var r;r=e(544)("sync_error"),t.exports=function(){return r.format("you-have-been-disconnected-from-the-trello-server-for-too-long"),r.br(),r.a(".app-alert-item-button",{href:"#",onclick:"window.location.reload();"},function(){return r.format("reload-now")})}},{}],981:[function(e,t,n){var r;r=e(544)("take_photo"),t.exports=function(){return r.video({class:"video"+r.mustacheBlockInverted("connected",function(){return" hide"}),autoplay:!0,style:"width:100%"}),r.mustacheBlock("error",function(){return r.p(".error",function(){return r.text(r.mustacheVar("error"))})}),r.mustacheBlock("connected",function(){return r.button(".primary.wide.js-snap",function(){return r.format("snap-photo")})}),r.mustacheBlockInverted("connected",function(){return r.mustacheBlock("error",function(){return r.p(function(){return r.format("couldnt-find-a-camera-to-connect-to-ellipsis")})}),r.mustacheBlockInverted("error",function(){return r.p(function(){return r.format("trying-to-access-your-computers-camera-ellipsis-check-the-banner-at-the-top-of-the-page")})}),r.p(".u-bottom",function(){return r.a(".quiet-button.js-connect-camera",{href:"#"},function(){return r.format("try-again")})})})}},{}],982:[function(e,t,n){var r;r=e(544)("tips"),t.exports=r.renderable(function(e){var t,n,o,i,a;return n=e.id,o=e.imgUrl1x,i=e.imgUrl2x,t=e.bgcolor,a=e.url,r.a({class:"tip js-tip",href:a,"data-tipid":n,target:"_blank"},function(){return r.div({class:"tip-image",style:"background-color: "+t+";"},function(){return r.img({class:"tip-image-img",src:o,srcset:o+" 1x, "+i+" 2x"})}),r.h3(".tip-text",r.l(n))})})},{}],983:[function(e,t,n){var r;r=e(544)("tooltip_content"),t.exports=function(){var e,t,n;return t=r.mustacheVar("closeable"),n=r.mustacheVar("style"),e=t?[".tooltip-content-closeable"]:[],r.div(e.join("")+".tooltip-content.js-tooltip-content",function(){return t&&r.icon("close",{class:"tooltip-close-button js-tooltip-close-button"}),r.raw(r.mustacheVar("tooltipHtml"))})}},{}],984:[function(e,t,n){var r;r=e(544)("woof_header"),t.exports=function(){return r.a(".header-btn.header-woof",{href:"#"},function(){return r.span(".taco-talk-small-icon"),r.span(".header-btn-text",function(){return r.span(".left-arrow"),r.span(".js-phrase")})})}},{}],985:[function(e,t,n){(function(){var t,r=this,o=r.Backbone,i=[],a=i.push,s=i.slice,u=i.splice;t="undefined"!=typeof n?n:r.Backbone={},t.VERSION="0.9.10";var c=r._;c||"undefined"==typeof e||(c=e("underscore")),t.$=r.jQuery||r.Zepto||r.ender,t.noConflict=function(){return r.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=/\s+/,d=function(e,t,n,r){if(!n)return!0;if("object"==typeof n)for(var o in n)e[t].apply(e,[o,n[o]].concat(r));else{if(!l.test(n))return!0;for(var i=n.split(l),a=0,s=i.length;s>a;a++)e[t].apply(e,[i[a]].concat(r))}},p=function(e,t){var n,r=-1,o=e.length;switch(t.length){case 0:for(;++r<o;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:for(;++r<o;)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:for(;++r<o;)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:for(;++r<o;)(n=e[r]).callback.apply(n.ctx,t)}},h=t.Events={on:function(e,t,n){if(!d(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!d(this,"once",e,[t,n])||!t)return this;var r=this,o=c.once(function(){r.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,n),this},off:function(e,t,n){var r,o,i,a,s,u,l,p;if(!this._events||!d(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(a=e?[e]:c.keys(this._events),s=0,u=a.length;u>s;s++)if(e=a[s],r=this._events[e]){if(i=[],t||n)for(l=0,p=r.length;p>l;l++)o=r[l],(t&&t!==o.callback&&t!==o.callback._callback||n&&n!==o.context)&&i.push(o);this._events[e]=i}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!d(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&p(n,t),r&&p(r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=c.uniqueId("l"));return r[o]=e,e.on(t,"object"==typeof t?this:n,this),this},stopListening:function(e,t,n){var r=this._listeners;if(r){if(e)e.off(t,"object"==typeof t?this:n,this),t||n||delete r[e._listenerId];else{"object"==typeof t&&(n=this);for(var o in r)r[o].off(t,n,this);this._listeners={}}return this}}};h.bind=h.on,h.unbind=h.off,c.extend(t,h);var m=t.Model=function(e,t){var n,r=e||{};this.cid=c.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{}),(n=c.result(this,"defaults"))&&(r=c.defaults({},r,n)),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return c.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return c.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,o,i,a,s,u,l,d;if(null==e)return this;if("object"==typeof e?(o=e,n=t):(o={})[e]=t,n||(n={}),!this._validate(o,n))return!1;i=n.unset,s=n.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=c.clone(this.attributes),this.changed={}),d=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(r in o)t=o[r],c.isEqual(d[r],t)||a.push(r),c.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,i?delete d[r]:d[r]=t;if(!s){a.length&&(this._pending=!0);for(var p=0,h=a.length;h>p;p++)this.trigger("change:"+a[p],this,d[a[p]],n)}if(u)return this;if(!s)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,c.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,c.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!c.isEmpty(this.changed):c.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?c.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var o in e)c.isEqual(r[o],t=e[o])||((n||(n={}))[o]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(e){e=e?c.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){return e.set(e.parse(n,r),r)?void(t&&t(e,n,r)):!1},this.sync("read",this,e)},save:function(e,t,n){var r,o,i,a,s=this.attributes;return null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,!r||n&&n.wait||this.set(r,n)?(n=c.extend({validate:!0},n),this._validate(r,n)?(r&&n.wait&&(this.attributes=c.extend({},s,r)),void 0===n.parse&&(n.parse=!0),o=n.success,n.success=function(e,t,n){e.attributes=s;var i=e.parse(t,n);return n.wait&&(i=c.extend(r||{},i)),c.isObject(i)&&!e.set(i,n)?!1:void(o&&o(e,t,n))},i=this.isNew()?"create":n.patch?"patch":"update","patch"===i&&(n.attrs=r),a=this.sync(i,this,n),r&&n.wait&&(this.attributes=s),a):!1):!1},destroy:function(e){e=e?c.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(e,t,o){(o.wait||e.isNew())&&r(),n&&n(e,t,o)},this.isNew())return e.success(this,null,e),!1;var o=this.sync("delete",this,e);return e.wait||r(),o},url:function(){var e=c.result(this,"urlRoot")||c.result(this.collection,"url")||P();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=c.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,t||{}),!1):!0}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,c.extend({silent:!0},t))};c.extend(f.prototype,h,{model:m,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){e=c.isArray(e)?e.slice():[e],t||(t={});var n,r,o,i,s,l,d,p,h,m;for(d=[],p=t.at,h=this.comparator&&null==p&&0!=t.sort,m=c.isString(this.comparator)?this.comparator:null,n=0,r=e.length;r>n;n++)(o=this._prepareModel(i=e[n],t))?(s=this.get(o))?t.merge&&(s.set(i===o?o.attributes:i,t),h&&!l&&s.hasChanged(m)&&(l=!0)):(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)):this.trigger("invalid",this,i,t);if(d.length&&(h&&(l=!0),this.length+=d.length,null!=p?u.apply(this.models,[p,0].concat(d)):a.apply(this.models,d)),l&&this.sort({silent:!0}),t.silent)return this;for(n=0,r=d.length;r>n;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},remove:function(e,t){e=c.isArray(e)?e.slice():[e],t||(t={});var n,r,o,i;for(n=0,r=e.length;r>n;n++)i=this.get(e[n]),i&&(delete this._byId[i.id],delete this._byId[i.cid],o=this.indexOf(i),this.models.splice(o,1),this.length--,t.silent||(t.index=o,i.trigger("remove",i,this,t)),this._removeReference(i));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,c.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,c.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])},at:function(e){return this.models[e]},where:function(e){return c.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return c.invoke(this.models,"get",e)},update:function(e,t){t=c.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var n,r,o,i,a=[],s=[],u={};if(c.isArray(e)||(e=e?[e]:[]),t.add&&!t.remove)return this.add(e,t);for(r=0,o=e.length;o>r;r++)n=e[r],i=this.get(n),t.remove&&i&&(u[i.cid]=!0),(t.add&&!i||t.merge&&i)&&a.push(n);if(t.remove)for(r=0,o=this.models.length;o>r;r++)n=this.models[r],u[n.cid]||s.push(n);return s.length&&this.remove(s,t),a.length&&this.add(a,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,c.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?c.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){var o=r.update?"update":"reset";e[o](n,r),t&&t(e,n,r)},this.sync("read",this,e)},create:function(e,t){if(t=t?c.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,o){o.wait&&n.add(e,o),r&&r(e,t,o)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof m)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=c.isFunction(t)?t:function(e){return e.get(t)};return c.sortedIndex(this.models,e,r,n)}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];c.each(g,function(e){f.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),c[e].apply(c,t)}});var v=["groupBy","countBy","sortBy"];c.each(v,function(e){f.prototype[e]=function(t,n){var r=c.isFunction(t)?t:function(e){return e.get(t)};return c[e](this.models,r,n)}});var b=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},y=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,_=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(b.prototype,h,{initialize:function(){},route:function(e,n,r){return c.isRegExp(e)||(e=this._routeToRegExp(e)),r||(r=this[n]),t.history.route(e,c.bind(function(o){var i=this._extractParameters(e,o);r&&r.apply(this,i),this.trigger.apply(this,["route:"+n].concat(i)),this.trigger("route",n,i),t.history.trigger("route",this,n,i)},this)),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes)for(var e,t=c.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(y,"(?:$1)?").replace(w,function(e,t){return t?e:"([^/]+)"}).replace(_,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var C=t.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,S=/msie [\w.]+/,T=/\/$/;C.started=!1,c.extend(C.prototype,h,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(T,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(x,"")},start:function(e){if(C.started)throw new Error("Backbone.history has already been started");C.started=!0,this.options=c.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,o=S.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(j,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var i=this.location,a=i.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&i.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),C.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=c.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!C.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new C;var E=t.View=function(e){this.cid=c.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},O=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];c.extend(E.prototype,h,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=c.result(this,"events"))){this.undelegateEvents();for(var t in e){var n=e[t];if(c.isFunction(n)||(n=this[e[t]]),!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(O),o=r[1],i=r[2];n=c.bind(n,this),o+=".delegateEvents"+this.cid,""===i?this.$el.on(o,n):this.$el.on(o,i,n)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=c.extend({},c.result(this,"options"),e)),c.extend(this,c.pick(e,A)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var e=c.extend({},c.result(this,"attributes"));this.id&&(e.id=c.result(this,"id")),this.className&&(e.class=c.result(this,"className"));var n=t.$("<"+c.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}});var M={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.prepareData=function(e,t,n){return"create"==e||"update"==e||"patch"==e?JSON.stringify(t.toJSON(n)):null},t.sync=function(e,n,r){var o=M[e];c.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var i={type:o,dataType:"json"};if(r.url||(i.url=c.result(n,"url")||P()),null==r.data&&n&&(i.contentType="application/json",i.data=t.prepareData(e,n,r)),r.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){i.type="POST",r.emulateJSON&&(i.data._method=o);var a=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===i.type||r.emulateJSON||(i.processData=!1);var s=r.success;r.success=function(e){s&&s(n,e,r),n.trigger("sync",n,e,r)};var u=r.error;r.error=function(e){u&&u(n,e,r),n.trigger("error",n,e,r)};var l=r.xhr=t.ajax(c.extend(i,r));return n.trigger("request",n,l,r),l},t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var B=function(e,t){var n,r=this;n=e&&c.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},c.extend(n,r,t);var o=function(){this.constructor=n};return o.prototype=r.prototype,n.prototype=new o,e&&c.extend(n.prototype,e),n.__super__=r.prototype,n};m.extend=f.extend=b.extend=E.extend=C.extend=B;var P=function(){throw new Error('A "url" property or function must be specified')}}).call(this)},{}]},{},[57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]);for(;e.length>0;){var r=e;e=[],r.forEach(function(e){e()})}}();

<div class="row">
	<h1 style="text-decoration: underline">List Of Socialists</h1>
</div><br/><br/>

<div class="row">	
	<div class="col-md-1">
		<h2 style="text-decoration: underline">Name:</h2>
	</div>	
	<div class="col-md-3">
		<h2 style="text-decoration: underline">Email:</h2>
	</div>	
</div>

<% @users.each do |user| %>
<div class="row">
	<div class="col-md-1">
		<h2><%= user.name %></h2>
	</div>
	<div class="col-md-3">
		<h2><%= user.email %></h2>
	</div>	
	<div class="btn-group btn-lg col-md-8">
		<%= link_to 'Show', user, class: "btn btn-success" %>
		<%= link_to 'Edit', edit_user_path(user), class: "btn btn-success" %>
		<%= link_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-success" %>

		<!-- find active and received frinends  -->

		<% is_friend = current_user.friends.include?(user) %>
		<!-- if not you can add friend -->
		<% if user != current_user && !is_friend %>
			<%= link_to 'Add Friend', friendships_path(friend_id: user), method: :post, class: "btn btn-primary" %>	
			<% else %>

			<!-- already friend or pending request -->

			<% is_act_friend = current_user.active_friends.include?(user) %>
			<% if user != current_user && is_act_friend %>
				<button class="btn btn-primary deactive" type="submit">Already Your Friend</button>
				<%= link_to 'Cancel Friendship', friendship_path(id: user.id), :method => 'delete', data: { confirm: 'Are you sure you want to cancel friendship?' }, class: "btn btn-danger" %>
				<!-- cancel pending request -->

				<% elsif user != current_user %>
					
					<%= link_to 'Ignore Friend Request', friendship_path(id: user.id), :method => 'delete', data: { confirm: 'Are you sure you want to cancel friend request?' }, class: "btn btn-danger" %>
			<% end %>
		<% end %>
	</div>	
</div>
<% end %>

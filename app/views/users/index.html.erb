<div class="row">
	<h1 style="text-decoration: underline">List Of Socialists</h1>
</div><br/><br/>

<div class="row">	
	<div class="col-md-1">
		<h2 style="text-decoration: underline">Name:</h2>
	</div>	
	<div class="col-md-3">
		<h2 style="text-decoration: underline">Email:</h2>
	</div>	
</div>

<% @users.each do |user| %>
<div class="row">
	<div class="col-md-1">
		<h2><%= user.name %></h2>
	</div>
	<div class="col-md-3">
		<h2><%= user.email %></h2>
	</div>	
	<div class="btn-group col-md-8">
		<%= link_to 'Show', user, class: "btn btn-success" %>
		<%= link_to 'Edit', edit_user_path(user), class: "btn btn-success" %>
		<%= link_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-success" %>
		<!-- find active frinend and received -->
		<% @fri_act = current_user.active_friends(user) %>
		<% @fri_rec = current_user.received_friends(user) %>
		<!-- if not you can add friend -->
		<% if user != current_user && !@fri_act && !@fri_rec %>
			<%= link_to 'Add Friend', friendships_path(friend_id: user), method: :post, class: "btn btn-primary" %>	
			<% else %>
			<!-- already friend -->
			<% if user != current_user && @fri_act %>
				<button class="btn btn-danger deactive" type="submit">Already Your Friend</button>
				<%= link_to 'Cancel Friendship', friendships_path(current_user.friendships.find_by_friend_id(user)), method: :delete, data: { confirm: 'Are you sure you want to cancel friendship?' }, class: "btn btn-primary" %>
				<!-- cancel pending request -->
				<% else user != current_user %>
					<%= link_to 'Cancel Received Friend Request \ Ignore Request', friendships_path(current_user.friendships.find_by_friend_id(user)), method: :delete, data: { confirm: 'Are you sure you want to cancel friend request?' }, class: "btn btn-primary" %>
			<% end %>
		<% end %>
	</div>	
</div>
<% end %>
